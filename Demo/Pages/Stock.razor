@page "/stock"

<Container Margin=@(new Border("70px", "0px", "0px", "0px")) Padding=@(new Border("10px")) Width="auto">
    <Paper Width="1920px" Margin=@(new Border("0px", "30px")) Padding=@(new Border("120px", "20px" )) VerticalAlign=@VerticalAlignment.Start>
        <Horizontal HorizontalAlign=@HorizontalAlignment.Center>
            <Heading>@Model.Name</Heading>
        </Horizontal>
        <FinanceChart Data=@Model.Prices Min="0" Max=@Max>
            <StockSeries Data=@Model.Prices />
            <VolumeSeries Data=@Model.Prices Color=@Colors.Warning />
        </FinanceChart>
        <Paragraph> Company description </Paragraph>
        <Paragraph Align="justify"> @Model.Description</Paragraph>
    </Paper>
</Container>

<ThemeToggle />

@code
{
    [Inject]
    private DataService<DemoStock> StockService { get; set; }

    private DemoStock Model { get; set; } = new DemoStock();

    private long Max { get { return Model.Prices != null ? Model.Prices.Max(s => s.Volume) * 5 : 0; } }

    protected override async Task OnInitializedAsync()
    {
        Model = await StockService.LoadFromJson("aapl.json");
    }
}