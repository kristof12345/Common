!function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s="./single-bundle.js")}({"./modules/base.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sf=window.sf||{},window.sf.base=function(e){"use strict";var t="ej2_instances",s=0,n=!1;function o(e,t){var i=t;return i.unshift(void 0),new(Function.prototype.bind.apply(e,i))}function r(e){var t,i=new Uint16Array(5);(window.msCrypto||window.crypto).getRandomValues(i);var s="ej2"+function(e){for(var t="",i=0;i<5;i++)t+=(i?",":"")+e[parseInt(i.toString(),10)];return t}(i),n=function(i){i.source===window&&"string"==typeof i.data&&i.data.length<=32&&i.data===s&&(e(),t())};return window.addEventListener("message",n,!1),window.postMessage(s,"*"),t=function(){window.removeEventListener("message",n),e=n=s=void 0}}function a(e,t){for(var i=t,s=e.replace(/\[/g,".").replace(/\]/g,"").split("."),n=0;n<s.length&&!g(i);n++)i=i[s[parseInt(n.toString(),10)]];return i}function l(e,t,i){var s,n,o=e.replace(/\[/g,".").replace(/\]/g,"").split("."),r=i||{},a=r,l=o.length;for(s=0;s<l;s++)n=o[parseInt(s.toString(),10)],s+1===l?a[""+n]=void 0===t?{}:t:f(a[""+n])&&(a[""+n]={}),a=a[""+n];return r}function h(e,t){delete e[""+t]}var d="undefined"!=typeof window?window:{};function c(e){return!f(e)&&e.constructor==={}.constructor}function p(e,t){if(!f(t))for(var i=e,s=t,n=0,o=Object.keys(t);n<o.length;n++){var r=o[n];f(i.deepMerge)||-1===i.deepMerge.indexOf(r)||!c(s[""+r])&&!Array.isArray(s[""+r])?i[""+r]=s[""+r]:u(i[""+r],i[""+r],s[""+r],!0)}}function u(e,t,s,n){var o=e&&"object"===i(e)?e:{},r=arguments.length;n&&(r-=1);for(var a=function(e){if(!l[e])return"continue";var t=l[e];Object.keys(t).forEach((function(e){var i,s=o[""+e],r=t[""+e],a=Array.isArray(r)&&Array.isArray(s)&&r.length!==s.length,l=!y()||!(s instanceof Event||a);n&&l&&(c(r)||Array.isArray(r))?c(r)?(i=s||{},Array.isArray(i)&&i.hasOwnProperty("isComplexArray")?u(i,{},r,n):o[""+e]=u(i,{},r,n)):(i=y()?s&&Object.keys(r).length:s||[],o[""+e]=u([],i,r,i&&i.length||r&&r.length)):o[""+e]=r}))},l=arguments,h=1;h<r;h++)a(h);return o}function f(e){return null==e}function g(e){return void 0===e}function m(e,t){var i;return function(){var s=this,n=arguments,o=function(){return i=null,e.apply(s,n)};clearTimeout(i),i=setTimeout(o,t)}}function v(e,t){return e===t||!(e===document||!e)&&v(e.parentNode,t)}function b(e){try{throw new Error(e)}catch(e){throw e.message+"\n"+e.stack}}function y(){return n}function M(){if("undefined"!=typeof window){var e=new Uint16Array(5);return(window.msCrypto||window.crypto).getRandomValues(e)}}var C,w,S={latn:{_digits:"0123456789",_type:"numeric"}},N={decimal:".",group:",",percentSign:"%",plusSign:"+",minusSign:"-",infinity:"∞",nan:"NaN",exponential:"E"},x=[0,1,2,3,4,5,6,7,8,9],O=function(){function e(){}return e.getMainObject=function(e,t){return a(y()?t:"main."+t,e)},e.getNumberingSystem=function(e){return a("supplemental.numberingSystems",e)||this.numberingSystems},e.reverseObject=function(e,t){for(var i={},s=0,n=t||Object.keys(e);s<n.length;s++){var o=n[s];i.hasOwnProperty(e[o])||(i[e[o]]=o)}return i},e.getSymbolRegex=function(e){var t=e.map((function(e){return e.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")})).join("|");return new RegExp(t,"g")},e.getSymbolMatch=function(e){for(var t={},i=0,s=Object.keys(N);i<s.length;i++){var n=s[i];t[e[n]]=N[n]}return t},e.constructRegex=function(e){for(var t=e.length,i="",s=0;s<t;s++)i+=s!==t-1?e[parseInt(s.toString(),10)]+"|":e[parseInt(s.toString(),10)];return i},e.convertValueParts=function(e,t,i){return e.replace(t,(function(e){return i[e]}))},e.getDefaultNumberingSystem=function(e){var t={};return t.obj=a("numbers",e),t.nSystem=a("defaultNumberingSystem",t.obj),t},e.getCurrentNumericOptions=function(e,t,i,s){var n={},o=this.getDefaultNumberingSystem(e);if(!g(o.nSystem)||s){var r=s?a("obj.mapperDigits",o):a(o.nSystem+"._digits",t);if(!g(r)){n.numericPair=this.reverseObject(r,x);var l=RegExp;n.numberParseRegex=new l(this.constructRegex(r),"g"),n.numericRegex="["+r[0]+"-"+r[9]+"]",i&&(n.numericRegex=r[0]+"-"+r[9],n.symbolNumberSystem=a(s?"numberSymbols":"symbols-numberSystem-"+o.nSystem,o.obj),n.symbolMatch=this.getSymbolMatch(n.symbolNumberSystem),n.numberSystem=o.nSystem)}}return n},e.getNumberMapper=function(e,t,i){var s={mapper:{}},n=this.getDefaultNumberingSystem(e);if(!g(n.nSystem)){s.numberSystem=n.nSystem,s.numberSymbols=a("symbols-numberSystem-"+n.nSystem,n.obj),s.timeSeparator=a("timeSeparator",s.numberSymbols);var o=a(n.nSystem+"._digits",t);if(!g(o))for(var r=0,l=x;r<l.length;r++){var h=l[r];s.mapper[h]=o[h]}}return s},e.nPair="numericPair",e.nRegex="numericRegex",e.numberingSystems=S,e}(),E={DJF:"Fdj",ERN:"Nfk",ETB:"Br",NAD:"$",ZAR:"R",XAF:"FCFA",GHS:"GH₵",XDR:"XDR",AED:"د.إ.‏",BHD:"د.ب.‏",DZD:"د.ج.‏",EGP:"ج.م.‏",ILS:"₪",IQD:"د.ع.‏",JOD:"د.ا.‏",KMF:"CF",KWD:"د.ك.‏",LBP:"ل.ل.‏",LYD:"د.ل.‏",MAD:"د.م.‏",MRU:"أ.م.",OMR:"ر.ع.‏",QAR:"ر.ق.‏",SAR:"ر.س.‏",SDG:"ج.س.",SOS:"S",SSP:"£",SYP:"ل.س.‏",TND:"د.ت.‏",YER:"ر.ي.‏",CLP:"$",INR:"₹",TZS:"TSh",EUR:"€",AZN:"₼",RUB:"₽",BYN:"Br",ZMW:"K",BGN:"лв.",NGN:"₦",XOF:"CFA",BDT:"৳",CNY:"¥",BAM:"КМ",UGX:"USh",USD:"$",CZK:"Kč",GBP:"£",DKK:"kr.",KES:"Ksh",CHF:"CHF",MVR:"ރ.",BTN:"Nu.",XCD:"EC$",AUD:"$",BBD:"$",BIF:"FBu",BMD:"$",BSD:"$",BWP:"P",BZD:"$",CAD:"$",NZD:"$",FJD:"$",FKP:"£",GIP:"£",GMD:"D",GYD:"$",HKD:"$",IDR:"Rp",JMD:"$",KYD:"$",LRD:"$",MGA:"Ar",MOP:"MOP$",MUR:"Rs",MWK:"MK",MYR:"RM",PGK:"K",PHP:"₱",PKR:"Rs",RWF:"RF",SBD:"$",SCR:"SR",SEK:"kr",SGD:"$",SHP:"£",SLL:"Le",ANG:"NAf.",SZL:"E",TOP:"T$",TTD:"$",VUV:"VT",WST:"WS$",ARS:"$",BOB:"Bs",BRL:"R$",COP:"$",CRC:"₡",CUP:"$",DOP:"$",GTQ:"Q",HNL:"L",MXN:"$",NIO:"C$",PAB:"B/.",PEN:"S/",PYG:"₲",UYU:"$",VES:"Bs.S",IRR:"ريال",GNF:"FG",CDF:"FC",HTG:"G",XPF:"FCFP",HRK:"kn",HUF:"Ft",AMD:"֏",ISK:"kr",JPY:"¥",GEL:"₾",CVE:"​",KZT:"₸",KHR:"៛",KPW:"₩",KRW:"₩",KGS:"сом",AOA:"Kz",LAK:"₭",MZN:"MTn",MKD:"ден",MNT:"₮",BND:"$",MMK:"K",NOK:"kr",NPR:"रु",AWG:"Afl.",SRD:"$",PLN:"zł",AFN:"؋",STN:"Db",MDL:"L",RON:"lei",UAH:"₴",LKR:"රු.",ALL:"Lekë",RSD:"дин.",TJS:"смн",THB:"฿",TMT:"m.",TRY:"₺",UZS:"сўм",VND:"₫",TWD:"NT$"};C=e.HijriParser||(e.HijriParser={}),w=[28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990],C.getHijriDate=function(e){var t=e.getDate(),i=e.getMonth(),s=e.getFullYear(),n=i+1,o=s;n<3&&(o-=1,n+=12);var r=Math.floor(o/100),a=r-Math.floor(r/4)-2,l=Math.floor(365.25*(o+4716))+Math.floor(30.6001*(n+1))+t-a-1524,h=l+(a=(r=Math.floor((l-1867216.25)/36524.25))-Math.floor(r/4)+1)+1524,d=Math.floor((h-122.1)/365.25),c=Math.floor(365.25*d),p=Math.floor((h-c)/30.6001);t=h-c-Math.floor(30.6001*p),(i=Math.floor((h-c)/20.6001))>13&&(d+=1,i-=12),i-=1,s=d-4716;var u=l-24e5,f=l-1948084,g=Math.floor(f/10631);f-=10631*g;var m=Math.floor((f-.1335)/(10631/30)),v=30*g+m;f-=Math.floor(m*(10631/30)+.1335);var b=Math.floor((f+28.5001)/29.5);13===b&&(b=12);for(var y=f-Math.floor(29.5001*b-29),M=0;M<w.length&&!(w[parseInt(M.toString(),10)]>u);M++);var C=M+16260,S=Math.floor((C-1)/12),N=S+1,x=C-12*S,O=u-w[M-1]+1;return(O+"").length>2&&(O=y,x=b,N=v),{year:N,month:x,date:O}},C.toGregorian=function(e,t,i){var s=i+w[12*(e-1)+1+(t-1)-16260-1]-1+24e5,n=Math.floor(s+.5),o=Math.floor((n-1867216.25)/36524.25),r=1524+(o=n+1+o-Math.floor(o/4)),a=Math.floor((r-122.1)/365.25),l=Math.floor(365.25*a),h=Math.floor((r-l)/30.6001),d=r-l-Math.floor(30.6001*h),c=h-(h>13.5?13:1),p=a-(c>2.5?4716:4715);return p<=0&&c--,new Date(p+"/"+c+"/"+d)};var I=/\/MMMMM|MMMM|MMM|a|LLLL|LLL|EEEEE|EEEE|E|K|cccc|ccc|WW|W|G+|z+/gi,D=["sun","mon","tue","wed","thu","fri","sat"],T={m:"getMinutes",h:"getHours",H:"getHours",s:"getSeconds",d:"getDate",f:"getMilliseconds"},j={M:"month",d:"day",E:"weekday",c:"weekday",y:"year",m:"minute",h:"hour",H:"hour",s:"second",L:"month",a:"designator",z:"timeZone",Z:"timeZone",G:"era",f:"milliseconds"},A=function(){function t(){}return t.dateFormat=function(t,i,s){var n=this,o=e.IntlBase.getDependables(s,t,i.calendar),r=a("parserObject.numbers",o),l=o.dateObject,h={isIslamic:e.IntlBase.islamicRegex.test(i.calendar)};y()&&i.isServerRendered&&(i=e.IntlBase.compareBlazorDateFormats(i,t));var d=i.format||e.IntlBase.getResultantPattern(i.skeleton,o.dateObject,i.type,!1,y()?t:"");if(h.dateSeperator=y()?a("dateSeperator",l):e.IntlBase.getDateSeparator(o.dateObject),g(d))b("Format options or type given must be invalid");else{d=e.IntlBase.ConvertDateToWeekFormat(d),y()&&(d=d.replace(/tt/,"a")),h.pattern=d,h.numMapper=y()?u({},r):O.getNumberMapper(o.parserObject,O.getNumberingSystem(s));for(var c=0,p=d.match(I)||[];c<p.length;c++){var f=p[c],m=f.length,v=f[0];switch("K"===v&&(v="h"),v){case"E":case"c":y()?h.weekday=a("days."+e.IntlBase.monthIndex[m],l):h.weekday=o.dateObject[e.IntlBase.days]["stand-alone"][e.IntlBase.monthIndex[m]];break;case"M":case"L":y()?h.month=a("months."+e.IntlBase.monthIndex[m],l):h.month=o.dateObject[e.IntlBase.month]["stand-alone"][e.IntlBase.monthIndex[m]];break;case"a":h.designator=y()?a("dayPeriods",l):a("dayPeriods.format.wide",l);break;case"G":var M=m<=3?"eraAbbr":4===m?"eraNames":"eraNarrow";h.era=y()?a("eras",l):a("eras."+M,o.dateObject);break;case"z":h.timeZone=a("dates.timeZoneNames",o.parserObject)}}}return function(e){return isNaN(e.getDate())?null:n.intDateFormatter(e,h)}},t.intDateFormatter=function(t,i){for(var s="",n=i.pattern.match(e.IntlBase.dateParseRegex),o=this.getCurrentDateValue(t,i.isIslamic),r=0,a=n;r<a.length;r++){var l=a[r],h=l.length,d=l[0];"K"===d&&(d="h");var c=void 0,p="",u=void 0,g=void 0,m="";switch(d){case"M":case"L":c=o.month,h>2?s+=i.month[c]:u=!0;break;case"E":case"c":s+=i.weekday[D[t.getDay()]];break;case"H":case"h":case"m":case"s":case"d":case"f":if(u=!0,"d"===d)c=o.date;else if("f"===d){u=!1,g=!0;var v=(p=(p=t[T[d]]().toString()).substring(0,h)).length;if(h!==v){if(h>3)continue;for(var b=0;b<h-v;b++)p="0"+p.toString()}m+=p}else c=t[T[d]]();"h"===d&&(c=c%12||12);break;case"y":g=!0,m+=o.year,2===h&&(m=m.substr(m.length-2));break;case"a":var y=t.getHours()<12?"am":"pm";s+=i.designator[y];break;case"G":var M=t.getFullYear()<0?0:1,C=i.era[M];f(C)&&(C=i.era[M?0:1]),s+=C||"";break;case"'":s+="''"===l?"'":l.replace(/'/g,"");break;case"z":var w=t.getTimezoneOffset(),S=h<4?"+H;-H":i.timeZone.hourFormat;S=S.replace(/:/g,i.numMapper.timeSeparator),0===w?s+=i.timeZone.gmtZeroFormat:(g=!0,m=this.getTimeZoneValue(w,S)),m=i.timeZone.gmtFormat.replace(/\{0\}/,m);break;case":":s+=i.numMapper.numberSymbols.timeSeparator;break;case"/":s+=i.dateSeperator;break;case"W":u=!0,c=e.IntlBase.getWeekOfYear(t);break;default:s+=l}u&&(g=!0,m=this.checkTwodigitNumber(c,h)),g&&(s+=O.convertValueParts(m,e.IntlBase.latnParseRegex,i.numMapper.mapper))}return s},t.getCurrentDateValue=function(t,i){return i?e.HijriParser.getHijriDate(t):{year:t.getFullYear(),month:t.getMonth()+1,date:t.getDate()}},t.checkTwodigitNumber=function(e,t){var i=e+"";return 2===t&&2!==i.length?"0"+i:i},t.getTimeZoneValue=function(e,t){var i=this,s=t.split(";")[e>0?1:0],n=Math.abs(e);return s.replace(/HH?|mm/g,(function(e){var t=e.length,s=-1!==e.indexOf("H");return i.checkTwodigitNumber(Math.floor(s?n/60:n%60),t)}))},t}(),z={ms:"minimumSignificantDigits",ls:"maximumSignificantDigits",mf:"minimumFractionDigits",lf:"maximumFractionDigits"},L=["infinity","nan","group","decimal","exponential"],k=function(){function t(){}return t.numberFormatter=function(t,i,s){var n,o=this,r=u({},i),l={},h={},d=e.IntlBase.getDependables(s,t,"",!0),c=d.numericObject;h.numberMapper=y()?u({},c):O.getNumberMapper(d.parserObject,O.getNumberingSystem(s),!0),h.currencySymbol=y()?a("currencySymbol",c):e.IntlBase.getCurrencySymbol(d.numericObject,r.currency||e.defaultCurrencyCode,i.altSymbol),h.percentSymbol=y()?a("numberSymbols.percentSign",c):h.numberMapper.numberSymbols.percentSign,h.minusSymbol=y()?a("numberSymbols.minusSign",c):h.numberMapper.numberSymbols.minusSign;var p=h.numberMapper.numberSymbols;if(i.format&&!e.IntlBase.formatRegex.test(i.format))l=e.IntlBase.customFormat(i.format,h,d.numericObject);else{if(u(r,e.IntlBase.getProperNumericSkeleton(i.format||"N")),r.isCurrency="currency"===r.type,r.isPercent="percent"===r.type,y()||(n=e.IntlBase.getSymbolPattern(r.type,h.numberMapper.numberSystem,d.numericObject,r.isAccount)),r.groupOne=this.checkValueRange(r.maximumSignificantDigits,r.minimumSignificantDigits,!0),this.checkValueRange(r.maximumFractionDigits,r.minimumFractionDigits,!1,!0),g(r.fractionDigits)||(r.minimumFractionDigits=r.maximumFractionDigits=r.fractionDigits),g(r.useGrouping)&&(r.useGrouping=!0),r.isCurrency&&!y()&&(n=n.replace(/\u00A4/g,e.IntlBase.defaultCurrency)),y())l.nData=u({},{},a(r.type+"nData",c)),l.pData=u({},{},a(r.type+"pData",c)),"currency"===r.type&&i.currency&&e.IntlBase.replaceBlazorCurrency([l.pData,l.nData],h.currencySymbol,i.currency);else{var f=n.split(";");l.nData=e.IntlBase.getFormatData(f[1]||"-"+f[0],!0,h.currencySymbol),l.pData=e.IntlBase.getFormatData(f[0],!1,h.currencySymbol),r.useGrouping&&(r.groupSeparator=p[L[2]],r.groupData=this.getGroupingDetails(f[0]))}if(g(r.minimumFractionDigits)&&(r.minimumFractionDigits=l.nData.minimumFraction),g(r.maximumFractionDigits)){var m=l.nData.maximumFraction;r.maximumFractionDigits=g(m)&&r.isPercent?0:m}var v=r.minimumFractionDigits,b=r.maximumFractionDigits;g(v)||g(b)||v>b&&(r.maximumFractionDigits=v)}return u(l.nData,r),u(l.pData,r),function(e){return isNaN(e)?p[L[1]]:isFinite(e)?o.intNumberFormatter(e,l,h):p[L[0]]}},t.getGroupingDetails=function(t){var i={},s=t.match(e.IntlBase.negativeDataRegex);if(s&&s[4]){var n=s[4],o=n.lastIndexOf(",");if(-1!==o){var r=n.split(".")[0];i.primary=r.length-o-1;var a=n.lastIndexOf(",",o-1);-1!==a&&(i.secondary=o-1-a)}}return i},t.checkValueRange=function(e,t,i,s){var n=s?"f":"s",o=0,r=z["l"+n],a=z["m"+n];if(g(e)||(this.checkRange(e,r,s),o++),g(t)||(this.checkRange(t,a,s),o++),2===o){if(!(e<t))return!0;b(a+"specified must be less than the"+r)}else i&&1===o&&b("Both"+a+"and"+a+"must be present");return!1},t.checkRange=function(e,t,i){var s=i?[0,20]:[1,21];(e<s[0]||e>s[1])&&b(t+"value must be within the range"+s[0]+"to"+s[1])},t.intNumberFormatter=function(t,i,s){var n;if(!g(i.nData.type)){t<0?(t*=-1,n=i.nData):n=0===t&&i.zeroData||i.pData;var o="";if(n.isPercent&&(t*=100),n.groupOne)o=this.processSignificantDigits(t,n.minimumSignificantDigits,n.maximumSignificantDigits);else if(o=this.processFraction(t,n.minimumFractionDigits,n.maximumFractionDigits),n.minimumIntegerDigits&&(o=this.processMinimumIntegers(o,n.minimumIntegerDigits)),s.isCustomFormat&&n.minimumFractionDigits<n.maximumFractionDigits&&/\d+\.\d+/.test(o)){for(var r=o.split("."),a=r[1],l=a.length-1;l>=0&&("0"===a[""+l]&&l>=n.minimumFractionDigits);l--)a=a.slice(0,l);o=r[0]+"."+a}return"scientific"===n.type&&(o=(o=t.toExponential(n.maximumFractionDigits)).replace("e",s.numberMapper.numberSymbols[L[4]])),o=o.replace(".",s.numberMapper.numberSymbols[L[3]]),o="#,###,,;(#,###,,)"===n.format?this.customPivotFormat(parseInt(o)):o,n.useGrouping&&(o=this.groupNumbers(o,n.groupData.primary,n.groupSeparator||",",s.numberMapper.numberSymbols[L[3]]||".",n.groupData.secondary)),o=O.convertValueParts(o,e.IntlBase.latnParseRegex,s.numberMapper.mapper),"N/A"===n.nlead?n.nlead:n.nlead+o+n.nend}},t.processSignificantDigits=function(e,t,i){var s=e+"";return s.length<t?e.toPrecision(t):+(s=e.toPrecision(i))+""},t.groupNumbers=function(e,t,i,s,n){for(var o=!f(n)&&0!==n,r=e.split(s),a=r[0],l=a.length,h="";l>t;)h=a.slice(l-t,l)+(h.length?i+h:""),l-=t,o&&(t=n,o=!1);return r[0]=a.slice(0,l)+(h.length?i:"")+h,r.join(s)},t.processFraction=function(e,t,i){var s=(e+"").split(".")[1],n=s?s.length:0;if(t&&n<t){var o="";if(0!==n){o+=e;for(var r=0;r<t-n;r++)o+="0";return o}return o=e.toFixed(t),e.toFixed(t)}return!f(i)&&(n>i||0===i)?e.toFixed(i):e+""},t.processMinimumIntegers=function(e,t){var i=e.split("."),s=i[0],n=s.length;if(n<t){for(var o=0;o<t-n;o++)s="0"+s;i[0]=s}return i.join(".")},t.customPivotFormat=function(e){if(e>=5e5){var t=(e/=1e6).toString().split("."),i=(t[0],t[1]);return i&&+i.substring(0,1)>=5?Math.ceil(e).toString():Math.floor(e).toString()}return""},t}(),P=/^[0-9]*$/,B={minute:"setMinutes",hour:"setHours",second:"setSeconds",day:"setDate",month:"setMonth",milliseconds:"setMilliseconds"},U=function(){function t(){}return t.dateParser=function(t,i,s){var n=this,o=e.IntlBase.getDependables(s,t,i.calendar),r=O.getCurrentNumericOptions(o.parserObject,O.getNumberingSystem(s),!1,y()),l={};y()&&i.isServerRendered&&(i=e.IntlBase.compareBlazorDateFormats(i,t));var h,d=i.format||e.IntlBase.getResultantPattern(i.skeleton,o.dateObject,i.type,!1,y()?t:""),c="";if(g(d))b("Format options or type given must be invalid");else{d=e.IntlBase.ConvertDateToWeekFormat(d),l={isIslamic:e.IntlBase.islamicRegex.test(i.calendar),pattern:d,evalposition:{},culture:t};for(var p=d.match(e.IntlBase.dateParseRegex)||[],u=p.length,m=0,v=0,M=!1,C=r.numericRegex,w=y()?o.parserObject.numbers:O.getNumberMapper(o.parserObject,O.getNumberingSystem(s)),S=0;S<u;S++){var N=p[parseInt(S.toString(),10)],x=N.length,E="K"===N[0]?"h":N[0],I=void 0,D=void 0,T=j[E],A=2===x?"":"?";switch(M&&(m=v,M=!1),E){case"E":case"c":var z=void 0;z=y()?a("days."+e.IntlBase.monthIndex[x],o.dateObject):o.dateObject[e.IntlBase.days]["stand-alone"][e.IntlBase.monthIndex[x]];var L=O.reverseObject(z);c+="("+Object.keys(L).join("|")+")";break;case"M":case"L":case"d":case"m":case"s":case"h":case"H":case"f":if(D=!0,("M"===E||"L"===E)&&x>2){var k=void 0;k=y()?a("months."+e.IntlBase.monthIndex[x],o.dateObject):o.dateObject.months["stand-alone"][e.IntlBase.monthIndex[x]],l[T]=O.reverseObject(k),c+="("+Object.keys(l[T]).join("|")+")"}else if("f"===E){if(x>3)continue;I=!0,c+="("+C+C+"?"+C+"?)"}else I=!0,c+="("+C+C+A+")";"h"===E&&(l.hour12=!0);break;case"W":c+="("+C+(1===x?"?":"")+C+")";break;case"y":D=I=!0,c+=2===x?"("+C+C+")":"("+C+"{"+x+",})";break;case"a":D=!0;var P=y()?a("dayPeriods",o.dateObject):a("dayPeriods.format.wide",o.dateObject);l[T]=O.reverseObject(P),c+="("+Object.keys(l[T]).join("|")+")";break;case"G":D=!0;var B=x<=3?"eraAbbr":4===x?"eraNames":"eraNarrow";l[T]=O.reverseObject(y()?a("eras",o.dateObject):a("eras."+B,o.dateObject)),c+="("+Object.keys(l[T]).join("|")+"?)";break;case"z":D=0!==(new Date).getTimezoneOffset(),l[T]=a("dates.timeZoneNames",o.parserObject);var U=l[T],R=(h=x<4)?"+H;-H":U.hourFormat;R=R.replace(/:/g,w.timeSeparator),c+="("+this.parseTimeZoneRegx(R,U,C)+")?",M=!0,v=h?6:12;break;case"'":c+="("+N.replace(/'/g,"")+")?";break;default:c+="([\\D])"}if(D&&(l.evalposition[""+T]={isNumber:I,pos:S+1+m,hourOnly:h}),S===u-1&&!f(c)){var H=RegExp;l.parserRegex=new H("^"+c+"$","i")}}}return function(t){var i=n.internalDateParse(t,l,r);if(f(i)||!Object.keys(i).length)return null;if(l.isIslamic){var s={},o=i.year,a=i.day,h=i.month,d=o?o+"":"",c=2===d.length;o&&h&&a&&!c||(s=e.HijriParser.getHijriDate(new Date)),c&&(o=parseInt((s.year+"").slice(0,2)+d,10));var p=e.HijriParser.toGregorian(o||s.year,h||s.month,a||s.date);i.year=p.getFullYear(),i.month=p.getMonth()+1,i.day=p.getDate()}return n.getDateObject(i)}},t.getDateObject=function(e,t){var i=t||new Date;i.setMilliseconds(0);var s=e.year,n=e.designator,o=e.timeZone;if(!g(s)){if((s+"").length<=2)s+=100*Math.floor(i.getFullYear()/100);i.setFullYear(s)}for(var r=0,a=["hour","minute","second","milliseconds","month","day"];r<a.length;r++){var l=a[r],h=e[l];if(g(h)&&"day"===l&&i.setDate(1),!g(h))if("month"===l){if((h-=1)<0||h>11)return new Date("invalid");var d=i.getDate();i.setDate(1),i[B[l]](h);var c=new Date(i.getFullYear(),h+1,0).getDate();i.setDate(d<c?d:c)}else{if("day"===l){var p=new Date(i.getFullYear(),i.getMonth()+1,0).getDate();if(h<1||h>p)return null}i[B[l]](h)}}if(!g(n)){var u=i.getHours();"pm"===n?i.setHours(u+(12===u?0:12)):12===u&&i.setHours(0)}if(!g(o)){var f=o-i.getTimezoneOffset();0!==f&&i.setMinutes(i.getMinutes()+f)}return i},t.internalDateParse=function(e,t,i){var s=e.match(t.parserRegex),n={hour:0,minute:0,second:0};if(f(s))return null;for(var o=0,r=Object.keys(t.evalposition);o<r.length;o++){var a=r[o],l=t.evalposition[""+a],h=s[l.pos];if(l.isNumber)n[a]=this.internalNumberParser(h,i);else if("timeZone"!==a||g(h))h="month"!==a||t.isIslamic||"en"!==t.culture&&"en-GB"!==t.culture&&"en-US"!==t.culture?h:h[0].toUpperCase()+h.substring(1).toLowerCase(),n[a]=t[a][h];else{var d=l.pos,c=void 0,p=s[d+1],u=!g(p);l.hourOnly?c=60*this.getZoneValue(u,p,s[d+4],i):(c=60*this.getZoneValue(u,p,s[d+7],i),c+=this.getZoneValue(u,s[d+4],s[d+10],i)),f(c)||(n[""+a]=c)}}return t.hour12&&(n.hour12=!0),n},t.internalNumberParser=function(e,t){return e=O.convertValueParts(e,t.numberParseRegex,t.numericPair),P.test(e)?+e:null},t.parseTimeZoneRegx=function(e,t,i){var s,n,o=t.gmtFormat,r="("+i+")("+i+")";return s=e.replace("+","\\+"),n=(s=-1!==e.indexOf("HH")?s.replace(/HH|mm/g,"("+r+")"):s.replace(/H|m/g,"("+r+"?)")).split(";").map((function(e){return o.replace("{0}",e)})),s=n.join("|")+"|"+t.gmtZeroFormat},t.getZoneValue=function(e,t,i,s){var n=e?t:i;if(!n)return 0;var o=this.internalNumberParser(n,s);return e?-o:o},t}(),R=new RegExp("^([^0-9]*)(([0-9,]*[0-9]+)(.[0-9]+)?)([Ee][+-]?[0-9]+)?([^0-9]*)$"),H=/,/g,Y=["minusSign","infinity"],F=function(){function t(){}return t.numberParser=function(t,i,s){var n,o=this,r=e.IntlBase.getDependables(s,t,"",!0),l={custom:!0};e.IntlBase.formatRegex.test(i.format)||!i.format?(u(l,e.IntlBase.getProperNumericSkeleton(i.format||"N")),l.custom=!1,l.fractionDigits||i.maximumFractionDigits&&(l.maximumFractionDigits=i.maximumFractionDigits)):u(l,e.IntlBase.customFormat(i.format,null,null));var h,d=a("numbers",r.parserObject);if(n=O.getCurrentNumericOptions(r.parserObject,O.getNumberingSystem(s),!0,y()),l.symbolRegex=O.getSymbolRegex(Object.keys(n.symbolMatch)),l.infinity=n.symbolNumberSystem[Y[1]],y())l.nData=u({},{},a(l.type+"nData",d)),l.pData=u({},{},a(l.type+"pData",d)),"currency"===l.type&&i.currency&&e.IntlBase.replaceBlazorCurrency([l.pData,l.nData],a("currencySymbol",d),i.currency);else if(h=e.IntlBase.getSymbolPattern(l.type,n.numberSystem,r.numericObject,l.isAccount)){var c=(h=h.replace(/\u00A4/g,e.IntlBase.defaultCurrency)).split(";");l.nData=e.IntlBase.getFormatData(c[1]||"-"+c[0],!0,""),l.pData=e.IntlBase.getFormatData(c[0],!0,"")}return function(e){return o.getParsedNumber(e,l,n)}},t.getParsedNumber=function(e,t,i){var s,n,o,r,a,l;if(-1!==e.indexOf(t.infinity))return 1/0;e=O.convertValueParts(e,t.symbolRegex,i.symbolMatch),0===(e=-1!==(e=O.convertValueParts(e,i.numberParseRegex,i.numericPair)).indexOf("-")?e.replace("-.","-0."):e).indexOf(".")&&(e="0"+e);var h=e.match(R);if(f(h))return NaN;r=h[1],o=h[2];var d=h[5];return a=h[6],n=(s=t.custom?r===t.nData.nlead&&a===t.nData.nend:-1!==r.indexOf(t.nData.nlead)&&-1!==a.indexOf(t.nData.nend))?t.nData.isPercent:t.pData.isPercent,o=o.replace(H,""),d&&(o+=d),l=+o,("percent"===t.type||n)&&(l/=100),(t.custom||t.fractionDigits)&&(l=parseFloat(l.toFixed(t.custom?s?t.nData.maximumFractionDigits:t.pData.maximumFractionDigits:t.fractionDigits))),t.maximumFractionDigits&&(l=this.convertMaxFracDigits(o,t,l,s)),s&&(l*=-1),l},t.convertMaxFracDigits=function(e,t,i,s){var n=e.split(".");return n[1]&&n[1].length>t.maximumFractionDigits&&(i=+i.toFixed(t.custom?s?t.nData.maximumFractionDigits:t.pData.maximumFractionDigits:t.maximumFractionDigits)),i},t}(),q=function(){function e(e){this.ranArray=[],this.boundedEvents={},f(e)||(this.context=e)}return e.prototype.on=function(e,t,i,s){if(!f(t)){var n=i||this.context;this.notExist(e)?this.boundedEvents[""+e]=[{handler:t,context:n}]:f(s)?this.isHandlerPresent(this.boundedEvents[""+e],t)||this.boundedEvents[""+e].push({handler:t,context:n}):-1===this.ranArray.indexOf(s)&&(this.ranArray.push(s),this.boundedEvents[""+e].push({handler:t,context:n,id:s}))}},e.prototype.off=function(e,t,i){if(!this.notExist(e)){var s=a(e,this.boundedEvents);if(t){for(var n=0;n<s.length;n++)if(i){if(s[parseInt(n.toString(),10)].id===i){s.splice(n,1);var o=this.ranArray.indexOf(i);-1!==o&&this.ranArray.splice(o,1);break}}else if(t===s[parseInt(n.toString(),10)].handler){s.splice(n,1);break}}else delete this.boundedEvents[""+e]}},e.prototype.notify=function(e,t,i,s){if(this.notExist(e))i&&i.call(this,t);else{t&&(t.name=e);var n=a(e,this.boundedEvents).slice(0);if(window.Blazor)return this.blazorCallback(n,t,i,s,0);for(var o=0,r=n;o<r.length;o++){var l=r[o];l.handler.call(l.context,t)}i&&i.call(this,t)}},e.prototype.blazorCallback=function(e,t,i,s,n){var o=this,r=n===e.length-1;if(n<e.length){var a=e[parseInt(n.toString(),10)],l=a.handler.call(a.context,t);if(l&&"function"==typeof l.then){if(!i)return l;l.then((function(l){if(l="string"==typeof l&&o.isJson(l)?JSON.parse(l,o.dateReviver):l,u(t,t,l,!0),!i||!r)return o.blazorCallback(e,t,i,s,n+1);i.call(a.context,t)})).catch((function(e){s&&s.call(a.context,"string"==typeof e&&o.isJson(e)?JSON.parse(e,o.dateReviver):e)}))}else{if(!i||!r)return this.blazorCallback(e,t,i,s,n+1);i.call(a.context,t)}}},e.prototype.dateReviver=function(e,t){return y&&"string"==typeof t&&null!==t.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?new Date(t):t},e.prototype.isJson=function(e){try{JSON.parse(e)}catch(e){return!1}return!0},e.prototype.destroy=function(){this.boundedEvents=this.context=void 0},e.prototype.notExist=function(e){return!1===this.boundedEvents.hasOwnProperty(e)||this.boundedEvents[e].length<=0},e.prototype.isHandlerPresent=function(e,t){for(var i=0,s=e;i<s.length;i++){if(s[i].handler===t)return!0}return!1},e}(),V=new q;e.rightToLeft=!1;var W={};e.defaultCulture="en-US",e.defaultCurrencyCode="USD";var _=["numericObject","dateObject"],Q=function(){function t(e){e&&(this.culture=e)}return t.prototype.getDateFormat=function(e){return A.dateFormat(this.getCulture(),e||{type:"date",skeleton:"short"},W)},t.prototype.getNumberFormat=function(t){return t&&!t.currency&&(t.currency=e.defaultCurrencyCode),y()&&t&&!t.format&&(t.minimumFractionDigits=0),k.numberFormatter(this.getCulture(),t||{},W)},t.prototype.getDateParser=function(e){return U.dateParser(this.getCulture(),e||{skeleton:"short",type:"date"},W)},t.prototype.getNumberParser=function(e){return y()&&e&&!e.format&&(e.minimumFractionDigits=0),F.numberParser(this.getCulture(),e||{format:"N"},W)},t.prototype.formatNumber=function(e,t){return this.getNumberFormat(t)(e)},t.prototype.formatDate=function(e,t){return this.getDateFormat(t)(e)},t.prototype.parseDate=function(e,t){return this.getDateParser(t)(e)},t.prototype.parseNumber=function(e,t){return this.getNumberParser(t)(e)},t.prototype.getDatePattern=function(t,i){return e.IntlBase.getActualDateTimeFormat(this.getCulture(),t,W,i)},t.prototype.getNumberPattern=function(t,i){return e.IntlBase.getActualNumberFormat(this.getCulture(),t,W,i)},t.prototype.getFirstDayOfWeek=function(){return e.IntlBase.getWeekData(this.getCulture(),W)},t.prototype.getCulture=function(){return this.culture||e.defaultCulture},t}();var X=RegExp,G={"en-US":{d:"M/d/y",D:"EEEE, MMMM d, y",f:"EEEE, MMMM d, y h:mm a",F:"EEEE, MMMM d, y h:mm:s a",g:"M/d/y h:mm a",G:"M/d/yyyy h:mm:ss tt",m:"MMMM d",M:"MMMM d",r:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",R:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"h:mm tt",T:"h:m:s tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",U:"dddd, MMMM d, yyyy h:mm:ss tt",y:"MMMM yyyy",Y:"MMMM yyyy"}};!function(t){t.negativeDataRegex=/^(('[^']+'|''|[^*#@0,.E])*)(\*.)?((([#,]*[0,]*0+)(\.0*[0-9]*#*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,t.customRegex=/^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*[0#\ ]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,t.latnParseRegex=/0|1|2|3|4|5|6|7|8|9/g;var i=/[0-9]/g;t.defaultCurrency="$";var s=["infinity","nan","group","decimal"],n=/G|M|L|H|c|'| a|yy|y|EEEE|E/g,o={G:"",M:"m",L:"m",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};t.dateConverterMapper=/dddd|ddd/gi;t.islamicRegex=/^islamic/;var r={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};t.formatRegex=new X("(^[ncpae]{1})([0-1]?[0-9]|20)?$","i"),t.currencyFormatRegex=new X("(^[ca]{1})([0-1]?[0-9]|20)?$","i"),t.curWithoutNumberRegex=/(c|a)$/gi;var l={$:"isCurrency","%":"isPercent","-":"isNegative",0:"nlead",1:"nend"};function h(e,i,s,n,o){var r,l=s||"date";if(o)r=m({skeleton:e},o).format||m({skeleton:"d"},"en-US").format;else{if(-1!==t.basicPatterns.indexOf(e)){if(r=a(l+"Formats."+e,i),"dateTime"===l){var h=a("dateFormats."+e,i),d=a("timeFormats."+e,i);r=r.replace("{1}",h).replace("{0}",d)}}else r=a("dateTimeFormats.availableFormats."+e,i);g(r)&&"yMd"===e&&(r="M/d/y")}return r}function d(e,i,s,n){var o={},r=s||"gregorian";if(o.parserObject=O.getMainObject(e,i)||(y()?t.blazorDefaultObject:t.defaultObject),n)o.numericObject=a("numbers",o.parserObject);else{var l=y()?"dates":"dates.calendars."+r;o.dateObject=a(l,o.parserObject)}return o}function c(e,t,i,s){return a(e+"Formats-numberSystem-"+t+(s?".accounting":".standard"),i)||(s?a(e+"Formats-numberSystem-"+t+".standard",i):"")}function p(e){var i=e.match(t.dateConverterMapper);if(i&&y()){var s=3===i[0].length?"EEE":"EEEE";return e.replace(t.dateConverterMapper,s)}return e}function m(e,t){var i=e.format||e.skeleton,s=a((t||"en-US")+"."+i,G);return s||(s=a("en-US."+i,G)),s&&(s=p(s),e.format=s.replace(/tt/,"a")),e}function v(e){var i=e.match(t.formatRegex),s={},n=i[1].toUpperCase();return s.isAccount="A"===n,s.type=t.patternMatcher[n],e.length>1&&(s.fractionDigits=parseInt(i[2],10)),s}function b(e,s,n,o){var r=o?{}:{nlead:"",nend:""},a=e.match(t.customRegex);if(a){o||(r.nlead=M(a[1],n),r.nend=M(a[10],n),r.groupPattern=a[4]);var l=a[7];if(l&&s){var h=l.match(i);f(h)?r.minimumFraction=0:r.minimumFraction=h.length,r.maximumFraction=l.length-1}}return r}function M(e,i){return e?e.replace(t.defaultCurrency,i):""}function C(e,t,i){return a("currencies."+t+(i?"."+i:".symbol"),e)||a("currencies."+t+".symbol-alt-narrow",e)||"$"}function w(e,i,n){var o={type:"decimal",minimumFractionDigits:0,maximumFractionDigits:0},r=e.match(t.customRegex);if(f(r)||""===r[5]&&"N/A"!==e)return o.type=void 0,o;o.nlead=r[1],o.nend=r[10];var a=r[6],l=!!a.match(/\ $/g),h=-1!==a.replace(/\ $/g,"").indexOf(" ");o.useGrouping=-1!==a.indexOf(",")||h,a=a.replace(/,/g,"");var d=r[7];if(-1!==a.indexOf("0")&&(o.minimumIntegerDigits=a.length-a.indexOf("0")),f(d)||(o.minimumFractionDigits=d.lastIndexOf("0"),o.maximumFractionDigits=d.lastIndexOf("#"),-1===o.minimumFractionDigits&&(o.minimumFractionDigits=0),(-1===o.maximumFractionDigits||o.maximumFractionDigits<o.minimumFractionDigits)&&(o.maximumFractionDigits=o.minimumFractionDigits)),f(i)?u(o,S([o.nlead,o.nend],"%","%")):(i.isCustomFormat=!0,u(o,S([o.nlead,o.nend],"$",i.currencySymbol)),o.isCurrency||u(o,S([o.nlead,o.nend],"%",i.percentSymbol))),!f(n)){var p=c(o.type,i.numberMapper.numberSystem,n,!1);o.useGrouping&&(o.groupSeparator=h?" ":i.numberMapper.numberSymbols[s[2]],o.groupData=k.getGroupingDetails(p.split(";")[0])),o.nlead=o.nlead.replace(/'/g,""),o.nend=l?" "+o.nend.replace(/'/g,""):o.nend.replace(/'/g,"")}return o}function S(e,t,i){for(var s={nlead:e[0],nend:e[1]},n=0;n<2;n++){var o=e[parseInt(n.toString(),10)],r=o.indexOf(t);if(-1!==r&&(r<o.indexOf("'")||r>o.lastIndexOf("'"))){s[l[n]]=o.substr(0,r)+i+o.substr(r+1),s[l[t]]=!0,s.type=s.isCurrency?"currency":"percent";break}}return s}function N(e,t,i){e+=".";for(var s=0;s<t;s++)e+="0";if(t<i)for(var n=i-t,o=0;o<n;o++)e+="#";return e}function x(e,t){for(var i=e.split("."),s="",n=0;n<t;n++)s+="0";return i[1]?s+"."+i[1]:s}function I(e){var t=e.split("."),i=t[0],s=3-i.length%3;e="";for(var n=(i=(s&&1===s?"#":2===s?"##":"")+i).length-1;n>0;n-=3)e=","+i[n-2]+i[n-1]+i[parseInt(n.toString(),10)]+e;return e=e.slice(1),t[1]?e+"."+t[1]:e}t.dateParseRegex=/([a-z])\1*|'([^']|'')+'|''|./gi,t.basicPatterns=["short","medium","long","full"],t.defaultObject={dates:{calendars:{gregorian:{months:{"stand-alone":{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},narrow:{1:"J",2:"F",3:"M",4:"A",5:"M",6:"J",7:"J",8:"A",9:"S",10:"O",11:"N",12:"D"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"Before Christ","0-alt-variant":"Before Common Era",1:"Anno Domini","1-alt-variant":"Common Era"},eraAbbr:{0:"BC","0-alt-variant":"BCE",1:"AD","1-alt-variant":"CE"},eraNarrow:{0:"B","0-alt-variant":"BCE",1:"A","1-alt-variant":"CE"}},dateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y"}}},islamic:{months:{"stand-alone":{abbreviated:{1:"Muh.",2:"Saf.",3:"Rab. I",4:"Rab. II",5:"Jum. I",6:"Jum. II",7:"Raj.",8:"Sha.",9:"Ram.",10:"Shaw.",11:"Dhuʻl-Q.",12:"Dhuʻl-H."},narrow:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},wide:{1:"Muharram",2:"Safar",3:"Rabiʻ I",4:"Rabiʻ II",5:"Jumada I",6:"Jumada II",7:"Rajab",8:"Shaʻban",9:"Ramadan",10:"Shawwal",11:"Dhuʻl-Qiʻdah",12:"Dhuʻl-Hijjah"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"AH"},eraAbbr:{0:"AH"},eraNarrow:{0:"AH"}},dateFormats:{full:"EEEE, MMMM d, y G",long:"MMMM d, y G",medium:"MMM d, y G",short:"M/d/y GGGGG"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y G",yyyy:"y G",yyyyM:"M/y GGGGG",yyyyMd:"M/d/y GGGGG",yyyyMEd:"E, M/d/y GGGGG",yyyyMMM:"MMM y G",yyyyMMMd:"MMM d, y G",yyyyMMMEd:"E, MMM d, y G",yyyyMMMM:"MMMM y G",yyyyQQQ:"QQQ y G",yyyyQQQQ:"QQQQ y G"}}}},timeZoneNames:{hourFormat:"+HH:mm;-HH:mm",gmtFormat:"GMT{0}",gmtZeroFormat:"GMT"}},numbers:{currencies:{USD:{displayName:"US Dollar",symbol:"$","symbol-alt-narrow":"$"},EUR:{displayName:"Euro",symbol:"€","symbol-alt-narrow":"€"},GBP:{displayName:"British Pound","symbol-alt-narrow":"£"}},defaultNumberingSystem:"latn",minimumGroupingDigits:"1","symbols-numberSystem-latn":{decimal:".",group:",",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"×",perMille:"‰",infinity:"∞",nan:"NaN",timeSeparator:":"},"decimalFormats-numberSystem-latn":{standard:"#,##0.###"},"percentFormats-numberSystem-latn":{standard:"#,##0%"},"currencyFormats-numberSystem-latn":{standard:"¤#,##0.00",accounting:"¤#,##0.00;(¤#,##0.00)"},"scientificFormats-numberSystem-latn":{standard:"#E0"}}},t.blazorDefaultObject={numbers:{mapper:{0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},mapperDigits:"0123456789",numberSymbols:{decimal:".",group:",",plusSign:"+",minusSign:"-",percentSign:"%",nan:"NaN",timeSeparator:":",infinity:"∞"},timeSeparator:":",currencySymbol:"$",currencypData:{nlead:"$",nend:"",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentpData:{nlead:"",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentnData:{nlead:"-",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},currencynData:{nlead:"($",nend:")",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalnData:{nlead:"-",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalpData:{nlead:"",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2}},dates:{dayPeriods:{am:"AM",pm:"PM"},dateSeperator:"/",days:{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}},months:{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}},eras:{1:"AD"}}},t.monthIndex={3:"abbreviated",4:"wide",5:"narrow",1:"abbreviated"},t.month="months",t.days="days",t.patternMatcher={C:"currency",P:"percent",N:"decimal",A:"currency",E:"scientific"},t.getResultantPattern=h,t.getDependables=d,t.getSymbolPattern=c,t.ConvertDateToWeekFormat=p,t.compareBlazorDateFormats=m,t.getProperNumericSkeleton=v,t.getFormatData=b,t.changeCurrencySymbol=M,t.getCurrencySymbol=C,t.customFormat=function(e,t,i){for(var s={},n=e.split(";"),o=["pData","nData","zeroData"],r=0;r<n.length;r++)s[o[r]]=w(n[r],t,i);return f(s.nData)&&(s.nData=u({},s.pData),s.nData.nlead=f(t)?"-"+s.nData.nlead:t.minusSymbol+s.nData.nlead),s},t.customNumberFormat=w,t.isCurrencyPercent=S,t.getDateSeparator=function(e){var t=(a("dateFormats.short",e)||"").match(/[d‏M‏]([^d‏M])[d‏M‏]/i);return t?t[1]:"/"},t.getActualDateTimeFormat=function(e,t,i,s){var r=d(i,e,t.calendar);y()&&(t=m(t,e));var l=t.format||h(t.skeleton,r.dateObject,t.type);if(s){if(-1!==(l=l.replace(n,(function(e){return o[e]}))).indexOf("z")){var c=l.match(/z/g).length,p=void 0,u={timeZone:{}};u.numMapper=O.getNumberMapper(r.parserObject,O.getNumberingSystem(i)),u.timeZone=a("dates.timeZoneNames",r.parserObject);var f=(new Date).getTimezoneOffset(),g=c<4?"+H;-H":u.timeZone.hourFormat;g=g.replace(/:/g,u.numMapper.timeSeparator),0===f?p=u.timeZone.gmtZeroFormat:(p=A.getTimeZoneValue(f,g),p=u.timeZone.gmtFormat.replace(/\{0\}/,p)),l=l.replace(/[z]+/,'"'+p+'"')}l=l.replace(/ $/,"")}return l},t.getActualNumberFormat=function(i,s,n,o){var r,l,h=d(n,i,"",!0),p={custom:!0},f=h.numericObject,g={},m=(s.format||"").match(t.currencyFormatRegex),M=t.formatRegex.test(s.format)?v(s.format||"N"):{},w={};if(m){w.numberMapper=y()?u({},h.numericObject):O.getNumberMapper(h.parserObject,O.getNumberingSystem(n),!0);var S=y()?a("currencySymbol",h.numericObject):C(h.numericObject,s.currency||e.defaultCurrencyCode,s.altSymbol),E=c("currency",w.numberMapper.numberSystem,h.numericObject,/a/i.test(s.format)),D=(E=E.replace(/\u00A4/g,S)).split(";");g.hasNegativePattern=!!y()||D.length>1,g.nData=y()?a(M.type+"nData",f):b(D[1]||"-"+D[0],!0,S),g.pData=y()?a(M.type+"pData",f):b(D[0],!1,S),m[2]||s.minimumFractionDigits||s.maximumFractionDigits||(r=b(E.split(";")[0],!0,"",!0).minimumFraction)}if(t.formatRegex.test(s.format)||!s.format){if(u(p,v(s.format||"N")),p.custom=!1,l="###0",p.fractionDigits||s.minimumFractionDigits||s.maximumFractionDigits||r){p.fractionDigits&&(s.minimumFractionDigits=s.maximumFractionDigits=p.fractionDigits),l=N(l,r||p.fractionDigits||s.minimumFractionDigits||0,s.maximumFractionDigits||0)}if(s.minimumIntegerDigits&&(l=x(l,s.minimumIntegerDigits)),s.useGrouping&&(l=I(l)),"currency"===p.type||p.type&&y()){y()&&"currency"!==p.type&&(g.pData=a(p.type+"pData",f),g.nData=a(p.type+"nData",f));var T=l;l=g.pData.nlead+T+g.pData.nend,(g.hasNegativePattern||y())&&(l+=";"+g.nData.nlead+T+g.nData.nend)}"percent"!==p.type||y()||(l+=" %")}else l=s.format.replace(/'/g,'"');return Object.keys(w).length>0&&(l=o?l:function(e,t){if(-1!==e.indexOf(",")){var i=e.split(",");e=i[0]+a("numberMapper.numberSymbols.group",t)+i[1].replace(".",a("numberMapper.numberSymbols.decimal",t))}else e=e.replace(".",a("numberMapper.numberSymbols.decimal",t));return e}(l,w)),l},t.fractionDigitsPattern=N,t.minimumIntegerPattern=x,t.groupingPattern=I,t.getWeekData=function(e,t){var i="sun",s=a("supplemental.weekData.firstDay",t),n=e;return/en-/.test(n)&&(n=n.slice(3)),n=n.slice(0,2).toUpperCase()+n.substr(2),s&&(i=s[""+n]||s[n.slice(0,2)]||"sun"),r[""+i]},t.replaceBlazorCurrency=function(e,t,i){var s=a(i||"",E);if(t!==s)for(var n=0,o=e;n<o.length;n++){var r=o[n];r.nend=r.nend.replace(t,s),r.nlead=r.nlead.replace(t,s)}},t.getWeekOfYear=function(e){var t,i=new Date(e.getFullYear(),0,1),s=i.getDay();s=s>=0?s:s+7;var n=Math.floor((e.getTime()-i.getTime()-6e4*(e.getTimezoneOffset()-i.getTimezoneOffset()))/864e5)+1;if(s<4){if((t=Math.floor((n+s-1)/7)+1)>52){var o=new Date(e.getFullYear()+1,0,1).getDay();t=(o=o>=0?o:o+7)<4?1:53}}else t=Math.floor((n+s-1)/7);return t}}(e.IntlBase||(e.IntlBase={}));var K=/^(.*?):[ \t]*([^\r\n]*)$/gm,Z=function(){function e(e,t,s,n){this.mode=!0,this.emitError=!0,this.options={},"string"==typeof e?(this.url=e,this.type=t?t.toUpperCase():"GET",this.mode=!!f(s)||s):"object"===i(e)&&(this.options=e,p(this,this.options)),this.type=this.type?this.type.toUpperCase():"GET",this.contentType=void 0!==this.contentType?this.contentType:n}return e.prototype.send=function(e){var t=this;this.data=f(e)?this.data:e;var i={cancel:!1,httpRequest:null};return new Promise((function(e,s){t.httpRequest=new XMLHttpRequest,t.httpRequest.onreadystatechange=function(){t.stateChange(e,s)},f(t.onLoad)||(t.httpRequest.onload=t.onLoad),f(t.onProgress)||(t.httpRequest.onprogress=t.onProgress),f(t.onAbort)||(t.httpRequest.onabort=t.onAbort),f(t.onError)||(t.httpRequest.onerror=t.onError),f(t.onUploadProgress)||(t.httpRequest.upload.onprogress=t.onUploadProgress),t.httpRequest.open(t.type,t.url,t.mode),f(t.data)||null===t.contentType||t.httpRequest.setRequestHeader("Content-Type",t.contentType||"application/json; charset=utf-8"),t.beforeSend&&(i.httpRequest=t.httpRequest,t.beforeSend(i)),i.cancel||t.httpRequest.send(f(t.data)?null:t.data)}))},e.prototype.successHandler=function(e){return this.onSuccess&&this.onSuccess(e,this),e},e.prototype.failureHandler=function(e){return this.onFailure&&this.onFailure(this.httpRequest),e},e.prototype.stateChange=function(e,t){var i=this.httpRequest.responseText;if(this.dataType&&"json"===this.dataType.toLowerCase())if(""===i)i=void 0;else try{i=JSON.parse(i)}catch(e){}4===this.httpRequest.readyState&&(this.httpRequest.status>=200&&this.httpRequest.status<=299||304===this.httpRequest.status?e(this.successHandler(i)):this.emitError?t(new Error(this.failureHandler(this.httpRequest.statusText))):e())},e.prototype.getResponseHeader=function(e){var t,i;t={};for(var s=K.exec(this.httpRequest.getAllResponseHeaders());s;)t[s[1].toLowerCase()]=s[2],s=K.exec(this.httpRequest.getAllResponseHeaders());return f(i=t[e.toLowerCase()])?null:i},e}(),J=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i,$=/msie|trident/i,ee=/Trident\/7\./,te=/(ipad|iphone|ipod touch)/i,ie=/(ipad|iphone|ipod touch);.*os 7_\d|(ipad|iphone|ipod touch);.*os 8_\d/i,se=/android/i,ne=/trident|windows phone|edge/i,oe=/(version)[ /]([\w.]+)/i,re={OPERA:/(opera|opr)(?:.*version|)[ /]([\w.]+)/i,EDGE:/(edge)(?:.*version|)[ /]([\w.]+)/i,CHROME:/(chrome|crios)[ /]([\w.]+)/i,PANTHOMEJS:/(phantomjs)[ /]([\w.]+)/i,SAFARI:/(safari)[ /]([\w.]+)/i,WEBKIT:/(webkit)[ /]([\w.]+)/i,MSIE:/(msie|trident) ([\w.]+)/i,MOZILLA:/(mozilla)(?:.*? rv:([\w.]+)|)/i};"undefined"!=typeof window&&(window.browserDetails=window.browserDetails||{});var ae=function(){function e(){}return e.extractBrowserDetail=function(){for(var t={culture:{}},i=[],s=0,n=Object.keys(re);s<n.length;s++){var o=n[s];if(i=e.userAgent.match(re[""+o])){if(t.name="opr"===i[1].toLowerCase()?"opera":i[1].toLowerCase(),t.name="crios"===i[1].toLowerCase()?"chrome":t.name,t.version=i[2],t.culture.name=t.culture.language=navigator.language,e.userAgent.match(ee)){t.name="msie";break}var r=e.userAgent.match(oe);"safari"===t.name&&r&&(t.version=r[2]);break}}return t},e.getEvent=function(t){var i={start:{isPointer:"pointerdown",isTouch:"touchstart",isDevice:"mousedown"},move:{isPointer:"pointermove",isTouch:"touchmove",isDevice:"mousemove"},end:{isPointer:"pointerup",isTouch:"touchend",isDevice:"mouseup"},cancel:{isPointer:"pointercancel",isTouch:"touchcancel",isDevice:"mouseleave"}};return e.isPointer?i[""+t].isPointer:e.isTouch?i[""+t].isTouch+(e.isDevice?"":" "+i[""+t].isDevice):i[""+t].isDevice},e.getTouchStartEvent=function(){return e.getEvent("start")},e.getTouchEndEvent=function(){return e.getEvent("end")},e.getTouchMoveEvent=function(){return e.getEvent("move")},e.getTouchCancelEvent=function(){return e.getEvent("cancel")},e.isSafari=function(){return e.isDevice&&e.isIos&&e.isTouch&&"undefined"!=typeof window&&-1===window.navigator.userAgent.toLowerCase().indexOf("iphone")&&window.navigator.userAgent.toLowerCase().indexOf("safari")>-1},e.getValue=function(t,i){var s="undefined"!=typeof window?window.browserDetails:{};return"undefined"!=typeof navigator&&"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1&&!0===e.isTouch&&(s.isIos=!0,s.isDevice=!0,s.isTouch=!0,s.isPointer=!0),void 0===s[""+t]?s[""+t]=i.test(e.userAgent):s[""+t]},Object.defineProperty(e,"userAgent",{get:function(){return e.uA},set:function(t){e.uA=t,window.browserDetails={}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"info",{get:function(){return g(window.browserDetails.info)?window.browserDetails.info=e.extractBrowserDetail():window.browserDetails.info},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIE",{get:function(){return e.getValue("isIE",$)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isTouch",{get:function(){return g(window.browserDetails.isTouch)?window.browserDetails.isTouch="ontouchstart"in window.navigator||window&&window.navigator&&window.navigator.maxTouchPoints>0||"ontouchstart"in window:window.browserDetails.isTouch},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isPointer",{get:function(){return g(window.browserDetails.isPointer)?window.browserDetails.isPointer="pointerEnabled"in window.navigator:window.browserDetails.isPointer},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isMSPointer",{get:function(){return g(window.browserDetails.isMSPointer)?window.browserDetails.isMSPointer="msPointerEnabled"in window.navigator:window.browserDetails.isMSPointer},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isDevice",{get:function(){return e.getValue("isDevice",J)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIos",{get:function(){return e.getValue("isIos",te)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIos7",{get:function(){return e.getValue("isIos7",ie)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isAndroid",{get:function(){return e.getValue("isAndroid",se)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWebView",{get:function(){return g(window.browserDetails.isWebView)?(window.browserDetails.isWebView=!(g(window.cordova)&&g(window.PhoneGap)&&g(window.phonegap)&&"object"!==window.forge),window.browserDetails.isWebView):window.browserDetails.isWebView},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWindows",{get:function(){return e.getValue("isWindows",ne)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchStartEvent",{get:function(){return g(window.browserDetails.touchStartEvent)?window.browserDetails.touchStartEvent=e.getTouchStartEvent():window.browserDetails.touchStartEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchMoveEvent",{get:function(){return g(window.browserDetails.touchMoveEvent)?window.browserDetails.touchMoveEvent=e.getTouchMoveEvent():window.browserDetails.touchMoveEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchEndEvent",{get:function(){return g(window.browserDetails.touchEndEvent)?window.browserDetails.touchEndEvent=e.getTouchEndEvent():window.browserDetails.touchEndEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchCancelEvent",{get:function(){return g(window.browserDetails.touchCancelEvent)?window.browserDetails.touchCancelEvent=e.getTouchCancelEvent():window.browserDetails.touchCancelEvent},enumerable:!0,configurable:!0}),e.uA="undefined"!=typeof navigator?navigator.userAgent:"",e}(),le=function(){function e(){}return e.addOrGetEventData=function(e){return"__eventList"in e?e.__eventList.events:(e.__eventList={},e.__eventList.events=[])},e.add=function(t,i,s,n,o){var r,a=e.addOrGetEventData(t);r=o?m(s,o):s,n&&(r=r.bind(n));for(var l=i.split(" "),h=0;h<l.length;h++)a.push({name:l[parseInt(h.toString(),10)],listener:s,debounce:r}),ae.isIE?t.addEventListener(l[parseInt(h.toString(),10)],r):t.addEventListener(l[parseInt(h.toString(),10)],r,{passive:!1});return r},e.remove=function(t,i,s){for(var n=e.addOrGetEventData(t),o=i.split(" "),r=function(e){var i,r=-1;n&&0!==n.length&&n.some((function(t,n){return t.name===o[parseInt(e.toString(),10)]&&t.listener===s&&(r=n,i=t.debounce,!0)})),-1!==r&&n.splice(r,1),i&&t.removeEventListener(o[parseInt(e.toString(),10)],i)},a=0;a<o.length;a++)r(a)},e.clearEvents=function(t){var i,s;s=u([],s,i=e.addOrGetEventData(t));for(var n=0;n<s.length;n++)t.removeEventListener(s[parseInt(n.toString(),10)].name,s[parseInt(n.toString(),10)].debounce),i.shift()},e.trigger=function(t,i,s){for(var n=0,o=e.addOrGetEventData(t);n<o.length;n++){var r=o[n];r.name===i&&r.debounce.call(this,s)}},e}(),he=/^svg|^path|^g/;function de(e,t){var i=he.test(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return void 0===t||(i.innerHTML=t.innerHTML?t.innerHTML:"",void 0!==t.className&&(i.className=t.className),void 0!==t.id&&(i.id=t.id),void 0!==t.styles&&i.setAttribute("style",t.styles),void 0!==t.attrs&&ve(i,t.attrs)),i}function ce(e,t){for(var i=ue(t),s=RegExp,n=0,o=e;n<o.length;n++)for(var r=o[n],h=0,d=i;h<d.length;h++){var p=d[h];if(c(r)){var u=a("attributes.className",r);f(u)?l("attributes.className",p,r):new s("\\b"+p+"\\b","i").test(u)||l("attributes.className",u+" "+p,r)}else r.classList.contains(p)||r.classList.add(p)}return e}function pe(e,t){for(var i=ue(t),s=0,n=e;s<n.length;s++){var o=n[s],r=c(o);if(r?a("attributes.className",o):""!==o.className)for(var h=0,d=i;h<d.length;h++){var p=d[h];if(r){var u=a("attributes.className",o).split(" "),f=u.indexOf(p);-1!==f&&u.splice(f,1),l("attributes.className",u.join(" "),o)}else o.classList.remove(p)}}return e}function ue(e){var t=[];return"string"==typeof e?t.push(e):t=e,t}function fe(e){var t=e;return""===t.style.visibility&&t.offsetWidth>0}function ge(e){e.querySelectorAll("script").forEach((function(e){var t=document.createElement("script");t.text=e.innerHTML,document.head.appendChild(t),me(t)}))}function me(e){var t=e.parentNode;if(t)return t.removeChild(e)}function ve(e,t){for(var i=e,s=0,n=Object.keys(t);s<n.length;s++){var o=n[s];if(c(i)){var r=o;"tabindex"===o&&(r="tabIndex"),i.attributes[""+r]=t[""+o]}else i.setAttribute(o,t[""+o])}return i}function be(e,t,i){return void 0===t&&(t=document),e=Me(e),t.querySelector(e)}function ye(e,t,i){return void 0===t&&(t=document),e=Me(e),t.querySelectorAll(e)}function Me(e){var t=/(!|"|\$|%|&|'|\(|\)|\*|\/|:|;|<|=|\?|@|\]|\^|`|{|}|\||\+|~)/g;if(e.match(/#[0-9]/g)||e.match(t)){for(var i=e.split(","),s=0;s<i.length;s++){for(var n=i[parseInt(s.toString(),10)].split(" "),o=0;o<n.length;o++)if(n[parseInt(o.toString(),10)].indexOf("#")>-1&&!n[parseInt(o.toString(),10)].match(/\[.*\]/)){var r=n[parseInt(o.toString(),10)].split("#");if(r[1].match(/^\d/)||r[1].match(t)){var a=n[parseInt(o.toString(),10)].split(".");a[0]=a[0].replace(/#/,"[id='")+"']",n[parseInt(o.toString(),10)]=a.join(".")}}i[parseInt(s.toString(),10)]=n.join(" ")}return i.join(",")}return e}function Ce(e,t){var i=e;if("function"==typeof i.closest)return i.closest(t);for(;i&&1===i.nodeType;){if(Se(i,t))return i;i=i.parentNode}return null}function we(e,t){void 0!==t&&Object.keys(t).forEach((function(i){e.style[i]=t[i]}))}function Se(e,t){var i=e.matches||e.msMatchesSelector||e.webkitMatchesSelector;return i?i.call(e,t):-1!==[].indexOf.call(document.querySelectorAll(t),e)}var Ne=new RegExp("]"),xe=function(){function e(e,t){this.isRendered=!1,this.isComplexArraySetter=!1,this.isServerRendered=!1,this.allowServerDataBinding=!0,this.isProtectedOnChange=!0,this.properties={},this.changedProperties={},this.oldProperties={},this.bulkChanges={},this.refreshing=!1,this.ignoreCollectionWatch=!1,this.finalUpdate=function(){},this.childChangedProperties={},this.modelObserver=new q(this),g(t)||(this.element="string"==typeof t?document.querySelector(t):t,f(this.element)||(this.isProtectedOnChange=!1,this.addInstance())),g(e)||this.setProperties(e,!0),this.isDestroyed=!1}return e.prototype.setProperties=function(e,t){var i=this.isProtectedOnChange;this.isProtectedOnChange=!!t,p(this,e),!0!==t?(p(this.changedProperties,e),this.dataBind()):y()&&this.isRendered&&this.serverDataBind(e),this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.isProtectedOnChange=i},e.callChildDataBind=function(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++){var n=s[i];if(t[""+n]instanceof Array)for(var o=0,r=t[""+n];o<r.length;o++){var a=r[o];void 0!==a.dataBind&&a.dataBind()}else t[""+n].dataBind()}},e.prototype.clearChanges=function(){this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.childChangedProperties={}},e.prototype.dataBind=function(){if(e.callChildDataBind(this.childChangedProperties,this),Object.getOwnPropertyNames(this.changedProperties).length){var t=this.isProtectedOnChange,i=this.changedProperties,s=this.oldProperties;this.clearChanges(),this.isProtectedOnChange=!0,this.onPropertyChanged(i,s),this.isProtectedOnChange=t}},e.prototype.serverDataBind=function(e){if(y()){e=e||{},u(this.bulkChanges,{},e,!0);this.allowServerDataBinding&&window.sfBlazor.updateModel&&(window.sfBlazor.updateModel(this),this.bulkChanges={})}},e.prototype.saveChanges=function(e,t,i){if(y()){var s={};s[""+e]=t,this.serverDataBind(s)}this.isProtectedOnChange||(this.oldProperties[""+e]=i,this.changedProperties[""+e]=t,this.finalUpdate(),this.finalUpdate=r(this.dataBind.bind(this)))},e.prototype.addEventListener=function(e,t){this.modelObserver.on(e,t)},e.prototype.removeEventListener=function(e,t){this.modelObserver.off(e,t)},e.prototype.trigger=function(e,t,i,s){var n=this;if(!0!==this.isDestroyed){var o=this.isProtectedOnChange;this.isProtectedOnChange=!1;var r=this.modelObserver.notify(e,t,i,s);if(Ne.test(e)){var l=a(e,this);if(l){if(window.Blazor){var h=l.call(this,t);h&&"function"==typeof h.then?i?h.then((function(e){i&&(e="string"==typeof e&&n.modelObserver.isJson(e)?JSON.parse(e):e,i.call(n,e))})).catch((function(e){s&&(e="string"==typeof e&&n.modelObserver.isJson(e)?JSON.parse(e):e,s.call(n,e))})):r=h:i&&i.call(this,t)}else l.call(this,t),i&&i.call(this,t)}else i&&i.call(this,t)}return this.isProtectedOnChange=o,r}},e.prototype.addInstance=function(){var e="e-"+this.getModuleName().toLowerCase();ce([this.element],["e-lib",e]),f(this.element.ej2_instances)?l("ej2_instances",[this],this.element):this.element.ej2_instances.push(this)},e.prototype.destroy=function(){var e=this;this.element.ej2_instances=this.element.ej2_instances.filter((function(t){return t!==e})),pe([this.element],["e-"+this.getModuleName()]),0===this.element.ej2_instances.length&&pe([this.element],["e-lib"]),this.clearChanges(),this.modelObserver.destroy(),this.isDestroyed=!0},e}();function Oe(e,t){var i,s,n="string"==typeof e?document.getElementById(e):e;for(s=0;s<n.ej2_instances.length;s++){if(i=n.ej2_instances[parseInt(s.toString(),10)],"string"==typeof t){if(t===i.getModuleName())return i}else if(i instanceof t)return i}}function Ee(e,t,i,s){return e.properties.hasOwnProperty(t)&&e.properties[t]instanceof s||(e.properties[""+t]=o(s,[e,t,i])),e.properties[""+t]}function Ie(e,t,i,s,n,r){for(var a=[],l=i?i.length:0,h=0;h<l;h++){var d=s;if(r&&(d=s(i[parseInt(h.toString(),10)],e)),n){var c=o(d,[e,t,{},!0]);c.setProperties(i[parseInt(h.toString(),10)],!0),a.push(c)}else a.push(o(d,[e,t,i[parseInt(h.toString(),10)],!1]))}return a}function De(e,t){return function(){return this.properties.hasOwnProperty(t)||(this.properties[""+t]=e),this.properties[""+t]}}function Te(e,t){return function(i){if(this.properties[""+t]!==i){var s=this.properties.hasOwnProperty(t)?this.properties[t]:e;this.saveChanges(t,i,s),this.properties[""+t]=i}}}function je(e,t,i){return function(){return Ee(this,t,e,i)}}function Ae(e,t,i){return function(s){Ee(this,t,e,i).setProperties(s)}}function ze(e,t,i){return function(){var s=i({});return this.properties.hasOwnProperty(t)?this.properties[""+t]:Ee(this,t,e,s)}}function Le(e,t,i){return function(s){var n=i(s,this);Ee(this,t,e,n).setProperties(s)}}function ke(e,t,i){return function(){var s=this;if(!this.properties.hasOwnProperty(t)){var n=Ie(this,t,e,i,!1);this.properties[""+t]=n}var o=void 0!==this.controlParent&&this.controlParent.ignoreCollectionWatch||this.ignoreCollectionWatch;return this.properties[t].hasOwnProperty("push")||o||["push","pop"].forEach((function(e){var n={value:Re(e,t,i,s.properties[""+t]).bind(s),configurable:!0};Object.defineProperty(s.properties[""+t],e,n)})),this.properties[t].hasOwnProperty("isComplexArray")||Object.defineProperty(this.properties[""+t],"isComplexArray",{value:!0}),this.properties[""+t]}}function Pe(e,t,i){return function(s){this.isComplexArraySetter=!0;var n=Ie(this,t,e,i,!1),o=Ie(this,t,s,i,!0);this.isComplexArraySetter=!1,this.saveChanges(t,o,n),this.properties[""+t]=o}}function Be(e,t,i){return function(s){var n=this.properties.hasOwnProperty(t)?this.properties[t]:e,o=Ie(this,t,s,i,!0,!0);this.saveChanges(t,o,n),this.properties[""+t]=o}}function Ue(e,t,i){return function(){var s=i({});if(!this.properties.hasOwnProperty(t)){var n=Ie(this,t,e,s,!1);this.properties[""+t]=n}return this.properties[""+t]}}function Re(e,t,i,s){return function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var o=this.propName?this.getParentKey()+"."+t+"-":t+"-";switch(e){case"push":for(var r=0;r<i.length;r++){Array.prototype[""+e].apply(s,[i[parseInt(r.toString(),10)]]);var a=He(o+(s.length-1),i[parseInt(r.toString(),10)],!this.controlParent,e);this.serverDataBind(a,i[parseInt(r.toString(),10)],!1,e)}break;case"pop":Array.prototype[""+e].apply(s);var l=He(o+s.length,null,!this.controlParent,e);this.serverDataBind(l,{ejsAction:"pop"},!1,e)}return s}}function He(e,t,s,n){var o=e;if(s&&((o={})[""+e]=t,t&&"object"===i(t))){o[""+e].ejsAction=n}return o}function Ye(e){return function(t,i){var s={set:Te(e,i),get:De(e,i),enumerable:!0,configurable:!0};Object.defineProperty(t,i,s),We(t,i,"prop",e)}}function Fe(e,t){return function(i,s){var n={set:Ae(e,s,t),get:je(e,s,t),enumerable:!0,configurable:!0};Object.defineProperty(i,s,n),We(i,s,"complexProp",e,t)}}function qe(){return function(e,t){var i={set:function(e){var i=this.properties[""+t];if(i!==e){var s=function e(t,i){if(!1===t.hasOwnProperty("parentObj"))return{context:t,prefix:i};var s=a("propName",t);return s&&(i=s+"-"+i),e(a("parentObj",t),i)}(this,t);!1===g(i)&&s.context.removeEventListener(s.prefix,i),s.context.addEventListener(s.prefix,e),this.properties[""+t]=e}},get:De(void 0,t),enumerable:!0,configurable:!0};Object.defineProperty(e,t,i),We(e,t,"event")}}function Ve(e){}function We(e,t,i,s,n){g(e.propList)&&(e.propList={props:[],complexProps:[],colProps:[],events:[],propNames:[],complexPropNames:[],colPropNames:[],eventNames:[]}),e.propList[i+"s"].push({propertyName:t,defaultValue:s,type:n}),e.propList[i+"Names"].push(t)}var _e,Qe=(_e=function(e,t){return(_e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}_e(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Xe=function(e,t,s,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,s,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,s,a):o(t,s))||a);return r>3&&a&&Object.defineProperty(t,s,a),a},Ge=function(t){function i(e){var i=t.call(this,e,void 0)||this;return i.easing={ease:"cubic-bezier(0.250, 0.100, 0.250, 1.000)",linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)",easeIn:"cubic-bezier(0.420, 0.000, 1.000, 1.000)",easeOut:"cubic-bezier(0.000, 0.000, 0.580, 1.000)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)",elasticInOut:"cubic-bezier(0.5,-0.58,0.38,1.81)",elasticIn:"cubic-bezier(0.17,0.67,0.59,1.81)",elasticOut:"cubic-bezier(0.7,-0.75,0.99,1.01)"},i}var s;return Qe(i,t),s=i,i.prototype.animate=function(e,t){t=t||{};var i=this.getModel(t);if("string"==typeof e)for(var n=0,o=Array.prototype.slice.call(ye(e,document));n<o.length;n++){var r=o[n];i.element=r,s.delayAnimation(i)}else i.element=e,s.delayAnimation(i)},i.stop=function(e,t){e.style.animation="",e.removeAttribute("e-animate");var i=e.getAttribute("e-animation-id");if(i){var s=parseInt(i,10);cancelAnimationFrame(s),e.removeAttribute("e-animation-id")}t&&t.end&&t.end.call(this,t)},i.delayAnimation=function(t){"Disable"===e.animationMode?(t.begin&&t.begin.call(this,t),t.end&&t.end.call(this,t)):t.delay?setTimeout((function(){s.applyAnimation(t)}),t.delay):s.applyAnimation(t)},i.applyAnimation=function(e){var t=this;e.timeStamp=0;var i=0,s=0,n=0,o=e.duration;e.element.setAttribute("e-animate","true");!function r(a){try{if(a){n=0===n?a:n,e.timeStamp=a+e.timeStamp-n,n=a,!i&&e.begin&&e.begin.call(t,e),i+=1;var l=e.timeStamp/i;e.timeStamp<o&&e.timeStamp+l<o&&e.element.getAttribute("e-animate")?(e.element.style.animation=e.name+" "+e.duration+"ms "+e.timingFunction,e.progress&&e.progress.call(t,e),requestAnimationFrame(r)):(cancelAnimationFrame(s),e.element.removeAttribute("e-animation-id"),e.element.removeAttribute("e-animate"),e.element.style.animation="",e.end&&e.end.call(t,e))}else s=requestAnimationFrame(r),e.element.setAttribute("e-animation-id",s.toString())}catch(i){cancelAnimationFrame(s),e.element.removeAttribute("e-animation-id"),e.fail&&e.fail.call(t,i)}}()},i.prototype.getModel=function(e){return{name:e.name||this.name,delay:e.delay||this.delay,duration:void 0!==e.duration?e.duration:this.duration,begin:e.begin||this.begin,end:e.end||this.end,fail:e.fail||this.fail,progress:e.progress||this.progress,timingFunction:this.easing[e.timingFunction]?this.easing[e.timingFunction]:e.timingFunction||this.easing[this.timingFunction]}},i.prototype.onPropertyChanged=function(e,t){},i.prototype.getModuleName=function(){return"animation"},i.prototype.destroy=function(){},Xe([Ye("FadeIn")],i.prototype,"name",void 0),Xe([Ye(400)],i.prototype,"duration",void 0),Xe([Ye("ease")],i.prototype,"timingFunction",void 0),Xe([Ye(0)],i.prototype,"delay",void 0),Xe([qe()],i.prototype,"progress",void 0),Xe([qe()],i.prototype,"begin",void 0),Xe([qe()],i.prototype,"end",void 0),Xe([qe()],i.prototype,"fail",void 0),i=s=Xe([Ve],i)}(xe);function Ke(e){var t=e.target,i=this.rippleOptions.selector,s=i?Ce(t,i):t;if(!(!s||this.rippleOptions&&Ce(t,this.rippleOptions.ignore))){var n=s.getBoundingClientRect(),o=e.pageX-document.body.scrollLeft,r=e.pageY-(!document.body.scrollTop&&document.documentElement?document.documentElement.scrollTop:document.body.scrollTop),a=Math.max(Math.abs(o-n.left),Math.abs(o-n.right)),l=Math.max(Math.abs(r-n.top),Math.abs(r-n.bottom)),h=Math.sqrt(a*a+l*l),d=2*h+"px",c=o-n.left-h,p=r-n.top-h;this.rippleOptions&&this.rippleOptions.isCenterRipple&&(c=0,p=0,d="100%"),s.classList.add("e-ripple");var u=de("div",{className:"e-ripple-element",styles:"width: "+d+";height: "+d+";left: "+c+"px;top: "+p+"px;transition-duration: "+this.rippleOptions.duration.toString()+"ms;"});s.appendChild(u),window.getComputedStyle(u).getPropertyValue("opacity"),u.style.transform="scale(1)",s!==this.parent&&le.add(s,"mouseleave",Je,{parent:this.parent,rippleOptions:this.rippleOptions})}}function Ze(e){$e(e,this)}function Je(e){$e(e,this)}function $e(e,t){var i=t.rippleOptions.duration,s=e.target,n=t.rippleOptions.selector,o=n?Ce(s,n):s;if(o&&(!o||-1!==o.className.indexOf("e-ripple"))){var r=ye(".e-ripple-element",o),a=r[r.length-1];a&&(a.style.opacity="0.5"),t.parent!==o&&le.remove(o,"mouseleave",Je),setTimeout((function(){a&&a.parentNode&&a.parentNode.removeChild(a),o.getElementsByClassName("e-ripple-element").length||o.classList.remove("e-ripple"),t.done&&t.done(e)}),i)}}e.isRippleEnabled=!1,e.animationMode="";var et,tt=function(){function e(e){this.loadedModules=[],this.parent=e}return e.prototype.inject=function(e,t){var i=e.length;if(0!==i){this.loadedModules.length&&this.clearUnusedModule(e);for(var s=0;s<i;s++)for(var n=e[parseInt(s.toString(),10)],r=0,a=t;r<a.length;r++){var h=a[r],d=n.member;if(h&&h.prototype.getModuleName()===n.member&&!this.isModuleLoaded(d)){var c=o(h,n.args),p=this.getMemberName(d);n.isProperty?l(p,h,this.parent):l(p,c,this.parent);var u=n;u.member=p,this.loadedModules.push(u)}}}else this.clean()},e.prototype.clean=function(){for(var e=0,t=this.loadedModules;e<t.length;e++){var i=t[e];i.isProperty||a(i.member,this.parent).destroy()}this.loadedModules=[]},e.prototype.clearUnusedModule=function(e){for(var t=this,i=e.map((function(e){return t.getMemberName(e.member)})),s=0,n=this.loadedModules.filter((function(e){return-1===i.indexOf(e.member)}));s<n.length;s++){var o=n[s];o.isProperty||a(o.member,this.parent).destroy(),this.loadedModules.splice(this.loadedModules.indexOf(o),1),h(this.parent,o.member)}},e.prototype.getMemberName=function(e){return e[0].toLowerCase()+e.substring(1)+"Module"},e.prototype.isModuleLoaded=function(e){for(var t=0,i=this.loadedModules;t<i.length;t++){if(i[t].member===this.getMemberName(e))return!0}return!1},e}(),it=function(){function e(e,t,i,s){this.isComplexArraySetter=!1,this.properties={},this.changedProperties={},this.childChangedProperties={},this.oldProperties={},this.finalUpdate=function(){},this.callChildDataBind=a("callChildDataBind",xe),this.parentObj=e,this.controlParent=this.parentObj.controlParent||this.parentObj,this.propName=t,this.isParentArray=s,this.setProperties(i,!0)}return e.prototype.updateChange=function(e,t){!0===e?this.parentObj.childChangedProperties[""+t]=e:delete this.parentObj.childChangedProperties[""+t],this.parentObj.updateChange&&this.parentObj.updateChange(e,this.parentObj.propName)},e.prototype.updateTimeOut=function(){if(this.parentObj.updateTimeOut)this.parentObj.finalUpdate(),this.parentObj.updateTimeOut();else{var e=setTimeout(this.parentObj.dataBind.bind(this.parentObj));this.finalUpdate=function(){clearTimeout(e)}}},e.prototype.clearChanges=function(){this.finalUpdate(),this.updateChange(!1,this.propName),this.oldProperties={},this.changedProperties={}},e.prototype.setProperties=function(e,t){!0===t?(p(this,e),this.updateChange(!1,this.propName),this.clearChanges()):p(this,e)},e.prototype.dataBind=function(){if(this.callChildDataBind(this.childChangedProperties,this),this.isParentArray){var e=this.parentObj[this.propName].indexOf(this);Object.keys(this.changedProperties).length&&(l(this.propName+"."+e,this.changedProperties,this.parentObj.changedProperties),l(this.propName+"."+e,this.oldProperties,this.parentObj.oldProperties))}else this.parentObj.changedProperties[this.propName]=this.changedProperties,this.parentObj.oldProperties[this.propName]=this.oldProperties;this.clearChanges()},e.prototype.saveChanges=function(e,t,i,s){this.controlParent.isProtectedOnChange||(s||this.serverDataBind(e,t,!0),this.oldProperties[""+e]=i,this.changedProperties[""+e]=t,this.updateChange(!0,this.propName),this.finalUpdate(),this.updateTimeOut())},e.prototype.serverDataBind=function(e,t,i,s){if(y()&&!this.parentObj.isComplexArraySetter){var n,o={},r=i?this.getParentKey(!0)+"."+e:e;if(-1!==r.indexOf(".")){var a=r.split(".");n=o;for(var l=0;l<a.length;l++){var h=l===a.length-1;n[a[parseInt(l.toString(),10)]]=h?t:{},n=h?n:n[a[parseInt(l.toString(),10)]]}}else o[""+r]={},n=o[""+r],o[""+r][""+e]=t;if(this.isParentArray){n.ejsAction=s||"none"}this.controlParent.serverDataBind(o)}},e.prototype.getParentKey=function(e){var t="",i=this.propName;if(this.isParentArray){t=this.parentObj[this.propName].indexOf(this);var s=this.parentObj[this.propName].length;s=e?s:s>0?s-1:0,i+=t=-1!==t?"-"+t:"-"+s}return this.controlParent!==this.parentObj&&(i=this.parentObj.getParentKey()+"."+this.propName+t),i},e}(),st=["grid","pivotview","treegrid","spreadsheet","rangeNavigator","DocumentEditor","listbox","inplaceeditor","PdfViewer","richtexteditor","DashboardLayout","chart","stockChart","circulargauge","diagram","heatmap","lineargauge","maps","slider","smithchart","barcode","sparkline","treemap","bulletChart","kanban","daterangepicker","schedule","gantt","signature","query-builder","drop-down-tree","carousel","filemanager","uploader","accordion","tab","treeview"],nt=[115,121,110,99,102,117,115,105,111,110,46,105,115,76,105,99,86,97,108,105,100,97,116,101,100],ot=function(){function e(e){var t;this.isValidated=!1,this.isLicensed=!0,this.version="21",this.platform=/JavaScript|ASPNET|ASPNETCORE|ASPNETMVC|FileFormats/i,this.errors={noLicense:"<span>This application was built using a trial version of Syncfusion Essential Studio. To remove the license validation message permanently, a valid license key must be included.</span>",trailExpired:"<span>This application was built using a trial version of Syncfusion Essential Studio. To remove the license validation message permanently, a valid license key must be included.</span>",versionMismatched:"<span>The included Syncfusion license key is invalid.</span>",platformMismatched:"<span>The included Syncfusion license key is invalid.</span>",invalidKey:"<span>The included Syncfusion license key is invalid.</span>"},this.manager=(t=null,{setKey:function(e){t=e},getKey:function(){return t}}),this.npxManager={getKey:function(){return"npxKeyReplace"}},this.manager.setKey(e)}return e.prototype.validate=function(){if(!this.isValidated&&d&&!a(at(nt),d)&&!a("Blazor",d)){var e=void 0,t=void 0;if(this.manager&&this.manager.getKey()||this.npxManager&&"npxKeyReplace"!==this.npxManager.getKey()){var i=this.getInfoFromKey();if(i&&i.length)for(var s=0,n=i;s<n.length;s++){var o=n[s];if(!this.platform.test(o.platform)||o.invalidPlatform)e=this.errors.platformMismatched;else if(-1===o.version.indexOf(this.version))e=(e=(e=this.errors.versionMismatched).replace("##LicenseVersion",o.version)).replace("##Requireversion",this.version+".x");else if(o.expiryDate){var r=new Date(o.expiryDate),h=new Date;if(!(r!==h&&r<h))break;e=this.errors.trailExpired}}else e=this.errors.invalidKey}else{var c=a(at([115,121,110,99,102,117,115,105,111,110,46,108,105,99,101,110,115,101,67,111,110,116,101,110,116]),d);t=a(at([115,121,110,99,102,117,115,105,111,110,46,99,108,97,105,109,65,99,99,111,117,110,116,85,82,76]),d),e=c&&""!==c?c:this.errors.noLicense}if(e&&"undefined"!=typeof document&&!f(document)){var p=de("div",{innerHTML:"<img src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzE5OV80KSI+CjxwYXRoIGQ9Ik0xMiAyMUMxNi45NzA2IDIxIDIxIDE2Ljk3MDYgMjEgMTJDMjEgNy4wMjk0NCAxNi45NzA2IDMgMTIgM0M3LjAyOTQ0IDMgMyA3LjAyOTQ0IDMgMTJDMyAxNi45NzA2IDcuMDI5NDQgMjEgMTIgMjFaIiBzdHJva2U9IiM3MzczNzMiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMS4yNSAxMS4yNUgxMlYxNi41SDEyLjc1IiBmaWxsPSIjNjE2MDYzIi8+CjxwYXRoIGQ9Ik0xMS4yNSAxMS4yNUgxMlYxNi41SDEyLjc1IiBzdHJva2U9IiM3MzczNzMiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMS44MTI1IDlDMTIuNDMzOCA5IDEyLjkzNzUgOC40OTYzMiAxMi45Mzc1IDcuODc1QzEyLjkzNzUgNy4yNTM2OCAxMi40MzM4IDYuNzUgMTEuODEyNSA2Ljc1QzExLjE5MTIgNi43NSAxMC42ODc1IDcuMjUzNjggMTAuNjg3NSA3Ljg3NUMxMC42ODc1IDguNDk2MzIgMTEuMTkxMiA5IDExLjgxMjUgOVoiIGZpbGw9IiM3MzczNzMiLz4KPC9nPgo8ZGVmcz4KPGNsaXBQYXRoIGlkPSJjbGlwMF8xOTlfNCI+CjxyZWN0IHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0id2hpdGUiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K' style=\"top: 6px;\n                    position: absolute;\n                    left: 16px;\n                    width: 24px;\n                    height: 24px;\"/>"+e+' <a style="text-decoration: none;color: #0D6EFD;font-weight: 500;" href='+(et=t&&""!==t?t:"https://www.syncfusion.com/account/claim-license-key?pl=SmF2YVNjcmlwdA==&vs=MjE=")+">Claim your free account</a>"});p.setAttribute("style","position: fixed;\n                top: 10px;\n                left: 10px;\n                right: 10px;\n                font-size: 14px;\n                background: #EEF2FF;\n                color: #222222;\n                z-index: 999999999;\n                text-align: left;\n                border: 1px solid #EEEEEE;\n                padding: 10px 11px 10px 50px;\n                border-radius: 8px;\n                font-family: Helvetica Neue, Helvetica, Arial;"),document.body.appendChild(p),this.isLicensed=!1}this.isValidated=!0,l(at(nt),this.isValidated,d)}return this.isLicensed},e.prototype.getDecryptedData=function(e){try{return atob(e)}catch(e){return""}},e.prototype.getInfoFromKey=function(){try{var e="",t=[5439488,7929856,5111808,6488064,4587520,7667712,5439488,6881280,5177344,7208960,4194304,4456448,6619136,7733248,5242880,7077888,6356992,7602176,4587520,7274496,7471104,7143424],i=[],s=[],n=!1,o=!1;this.manager.getKey()?e=this.manager.getKey():(o=!0,e=this.npxManager.getKey().split("npxKeyReplace")[1]);for(var r=e.split(";"),a=0,l=r;a<l.length;a++){var h=l[a],d=this.getDecryptedData(h);if(d){var c=0,p="";if(o){var u=d[d.length-1],f=[];for(g=0;g<d.length;g++)f[parseInt(g.toString(),10)]=d[parseInt(g.toString(),10)].charCodeAt(0)-u.charCodeAt(0);for(g=0;g<f.length;g++)p+=String.fromCharCode(f[parseInt(g.toString(),10)])}else for(var g=0;g<d.length;g++,c++){c===t.length&&(c=0);var m=d.charCodeAt(g);p+=String.fromCharCode(m^t[parseInt(c.toString(),10)]>>16)}this.platform.test(p)?(i=p.split(";"),n=!1,i.length>3&&s.push({platform:i[0],version:i[1],expiryDate:i[2]})):p&&p.split(";").length>3&&(n=!0)}}return n&&!s.length?[{invalidPlatform:n}]:s.length?s:null}catch(e){return null}},e}(),rt=new ot;function at(e){for(var t="",i=0,s=e;i<s.length;i++){var n=s[i];t+=String.fromCharCode(n)}return t}function lt(e){rt=new ot(e)}var ht,dt,ct=function(e){return e&&lt(e),rt.validate()},pt=function(){var e='\n    <div style="\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n    z-index: 99999;\n    ">\n        <div style="\n    background: #FFFFFF;\n    height: 455px;\n    width: 840px;\n    font-family: Helvetica Neue, Helvetica, Arial;\n    color: #000000;\n    box-shadow: 0px 4.8px 14.4px rgb(0 0 0 / 18%), 0px 25.6px 57.6px rgb(0 0 0 / 22%);\n    display: block;\n    margin: 8% auto;\n    border-radius: 20px;\n    ">\n            <div style="\n    position: absolute;\nwidth: 838px;\nheight: 62px;\nbackground-color: #F9F9F9;\nborder: 1px solid #EEEEEE;\nborder-top-left-radius: 20px;\nborder-top-right-radius: 20px;\n">\n                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQ2IiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMTQ2IDMyIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNNDAuNTk2NSAxNS4wMDc4SDMyLjQyNUMzMS41NTU3IDE1LjAwNzggMzAuOTAzNyAxNS4xODEyIDMwLjUxMjUgMTUuNDg0NkMzMC4xMjEzIDE1LjgzMTQgMjkuOTA0IDE2LjMwODIgMjkuOTA0IDE3LjA0NTFDMjkuOTA0IDE3LjYwODYgMzAuMDc3OCAxOC4wNDIxIDMwLjQyNTYgMTguMzAyMkMzMC43NzMzIDE4LjYwNTYgMzEuMjk0OSAxOC43MzU2IDMxLjk5MDMgMTguNzM1NkgzNi4zMzY5QzM4LjExODkgMTguNzM1NiAzOS40MjI5IDE5LjA4MjQgNDAuMTYxOCAxOS43MzI2QzQwLjk0NDIgMjAuNDI2MiA0MS4yOTE5IDIxLjU1MzIgNDEuMjkxOSAyMy4xMTM3QzQxLjI5MTkgMjQuNzE3NiA0MC44NTcyIDI1Ljg4OCAzOS45ODc5IDI2LjY2ODJDMzkuMTE4NiAyNy40MDUxIDM3LjcyNzcgMjcuNzk1MyAzNS44NTg3IDI3Ljc5NTNIMjcuMDc4N1YyNS4wMjFIMzUuMzM3MkMzNi4yOTM0IDI1LjAyMSAzNi45NDU0IDI0Ljg5MSAzNy4zMzY2IDI0LjYzMDlDMzcuNzI3NyAyNC4zNzA4IDM3LjkwMTYgMjMuODk0IDM3LjkwMTYgMjMuMjg3MUMzNy45MDE2IDIyLjYzNjkgMzcuNzI3NyAyMi4xNjAxIDM3LjM4IDIxLjlDMzcuMDMyMyAyMS42Mzk5IDM2LjQyMzggMjEuNDY2NSAzNS41NTQ1IDIxLjQ2NjVIMzEuNjQyNkMyOS44NjA1IDIxLjQ2NjUgMjguNTEzMSAyMS4xMTk4IDI3LjY4NzMgMjAuMzgyOEMyNi44NjE0IDE5LjY0NTkgMjYuNDI2OCAxOC41MTg5IDI2LjQyNjggMTcuMDAxN0MyNi40MjY4IDE1LjM1NDUgMjYuODYxNCAxNC4xNDA4IDI3LjczMDcgMTMuMzYwNkMyOC42IDEyLjU4MDMgMjkuOTkwOSAxMi4yMzM1IDMxLjkwMzQgMTIuMjMzNUg0MC41OTY1VjE1LjAwNzhaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik00OC4wNzI3IDI1LjI4MTFINTAuNTA2OFYxNi4zOTQ5SDUzLjU0OTNWMjcuNTM1MkM1My41NDkzIDI5LjA1MjQgNTMuMjAxNiAzMC4xNzk0IDUyLjUwNjIgMzAuOTE2M0M1MS44MTA3IDMxLjY1MzIgNTAuNzI0MSAzMiA0OS4yNDYzIDMySDQzLjMzNVYyOS42NTkySDQ4LjcyNDdDNDkuMjg5NyAyOS42NTkyIDQ5Ljc2NzkgMjkuNTI5MiA1MC4wNzIxIDI5LjIyNThDNTAuMzc2NCAyOC45NjU3IDUwLjU1MDIgMjguNTMyMiA1MC41NTAyIDI4LjAxMlYyNy44Mzg2SDQ3Ljg5ODlDNDYuMjAzNyAyNy44Mzg2IDQ0Ljk0MzIgMjcuNDkxOSA0NC4yNDc4IDI2Ljg0MTZDNDMuNTA4OSAyNi4xNDgxIDQzLjE2MTEgMjUuMDY0NCA0My4xNjExIDIzLjQ2MDVWMTYuMzk0OUg0Ni4xNjAyVjIzLjIwMDVDNDYuMTYwMiAyNC4wNjc0IDQ2LjI5MDYgMjQuNjMwOSA0Ni41NTE0IDI0Ljg5MUM0Ni43MjUzIDI1LjE1MTEgNDcuMjQ2OSAyNS4yODExIDQ4LjA3MjcgMjUuMjgxMVoiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTU1Ljg5NjUgMTYuMzk0OUg2MS41OTA0QzYzLjMyOTEgMTYuMzk0OSA2NC41NDYxIDE2LjY5ODMgNjUuMjg1IDE3LjM0ODVDNjYuMDIzOSAxNy45OTg4IDY2LjM3MTYgMTkuMDgyNCA2Ni4zNzE2IDIwLjU1NjNWMjcuNzk1M0g2My4zMjkxVjIwLjk0NjRDNjMuMzI5MSAyMC4wNzk0IDYzLjE5ODcgMTkuNTE1OSA2Mi45Mzc5IDE5LjI5OTJDNjIuNjc3MSAxOS4wMzkxIDYyLjE1NTUgMTguOTA5MSA2MS4zMjk3IDE4LjkwOTFINTguODk1NlYyNy44Mzg2SDU1Ljg1M1YxNi4zOTQ5SDU1Ljg5NjVaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03NC45MzQyIDI1LjM2NzhINzguMTUwNlYyNy43OTUySDc0LjAyMTRDNzIuOTc4MiAyNy43OTUyIDcyLjEwODkgMjcuNjY1MiA3MS40NTcgMjcuNDkxOEM3MC44MDUgMjcuMjc1IDcwLjE5NjUgMjYuOTI4MyA2OS43MTgzIDI2LjQ1MTRDNjkuMTk2OCAyNS45MzEzIDY4Ljc2MjEgMjUuMjgxMSA2OC40NTc4IDI0LjU0NDJDNjguMTUzNiAyMy44MDcyIDY4LjAyMzIgMjIuOTgzNiA2OC4wMjMyIDIyLjE2QzY4LjAyMzIgMjEuMjkzMSA2OC4xNTM2IDIwLjQ2OTUgNjguNDU3OCAxOS42ODkyQzY4Ljc2MjEgMTguOTA5IDY5LjE1MzMgMTguMzAyMSA2OS43MTgzIDE3Ljc4MTlDNzAuMjM5OSAxNy4zMDUxIDcwLjgwNSAxNi45NTgzIDcxLjUwMDQgMTYuNzQxNkM3Mi4xOTU5IDE2LjUyNDkgNzMuMDIxNyAxNi40MzgyIDc0LjA2NDkgMTYuNDM4Mkg3OC4xOTQxVjE4LjkwOUg3NC45MzQyQzczLjQ5OTggMTguOTA5IDcyLjU0MzYgMTkuMTY5MSA3MS45Nzg1IDE5LjY0NTlDNzEuNDU2OSAyMC4xMjI3IDcxLjE1MjcgMjAuOTg5NyA3MS4xNTI3IDIyLjIwMzRDNzEuMTUyNyAyMi44OTY5IDcxLjI4MzEgMjMuNDYwNSA3MS41MDA0IDIzLjkzNzNDNzEuNzE3NyAyNC40MTQxIDcyLjA2NTUgMjQuNzYwOSA3Mi41MDAxIDI1LjA2NDNDNzIuNzE3NCAyNS4xOTQ0IDcyLjk3ODIgMjUuMjgxMSA3My4yODI1IDI1LjM2NzhDNzMuNjMwMiAyNS4zMjQ0IDc0LjE1MTggMjUuMzY3OCA3NC45MzQyIDI1LjM2NzhaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik04MC44NDU2IDE4LjY0ODlINzguNjcyNFYxNi4zNTE1SDgwLjg0NTZWMTUuMTgxMUM4MC44NDU2IDE0LjAxMDggODEuMDYzIDEzLjIzMDUgODEuNDk3NiAxMi44NDA0QzgxLjkzMjMgMTIuNDUwMyA4Mi43NTgxIDEyLjIzMzUgODMuOTc1MSAxMi4yMzM1SDg2Ljg0MzhWMTQuNDAwOUg4NS40MDk1Qzg0Ljg4NzkgMTQuNDAwOSA4NC41NDAyIDE0LjQ4NzYgODQuMzIyOSAxNC42NjFDODQuMTA1NSAxNC44MzQ0IDgzLjk3NTEgMTUuMDk0NSA4My45NzUxIDE1LjQ0MTJWMTYuMzUxNUg4Ni44NDM4VjE4LjY0ODlIODMuOTc1MVYyNy43OTUzSDgwLjg0NTZWMTguNjQ4OVoiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTk4LjQwNTYgMjcuNzk1M0g5Mi43MTE2QzkxLjAxNjUgMjcuNzk1MyA4OS44NDI5IDI3LjQ0ODUgODkuMDYwNSAyNi43OTgzQzg4LjMyMTYgMjYuMTQ4MSA4Ny45MzA0IDI1LjA2NDQgODcuOTMwNCAyMy41OTA2VjE2LjM5NDlIOTAuOTI5NVYyMy40MTcyQzkwLjkyOTUgMjQuMTk3NCA5MS4wNTk5IDI0LjY3NDMgOTEuMzIwNyAyNC45MzQ0QzkxLjU4MTUgMjUuMTk0NCA5Mi4xMDMxIDI1LjMyNDUgOTIuOTI4OSAyNS4zMjQ1SDk1LjM2M1YxNi4zOTQ5SDk4LjQwNTZWMjcuNzk1M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTEwMC42MjIgMjUuNDExMkgxMDcuMDExQzEwNy41NzcgMjUuNDExMiAxMDguMDExIDI1LjMyNDUgMTA4LjI3MiAyNS4xNTExQzEwOC41MzMgMjQuOTc3NyAxMDguNjYzIDI0LjY3NDMgMTA4LjY2MyAyNC4zMjc1QzEwOC42NjMgMjMuOTM3NCAxMDguNTMzIDIzLjY3NzMgMTA4LjI3MiAyMy40NjA1QzEwOC4wMTEgMjMuMjg3MSAxMDcuNTc3IDIzLjIwMDUgMTA3LjA1NSAyMy4yMDA1SDEwNC40NDdDMTAyLjg4MiAyMy4yMDA1IDEwMS44MzkgMjIuOTgzNyAxMDEuMzE4IDIyLjUwNjlDMTAwLjc1MiAyMi4wMzAxIDEwMC40OTIgMjEuMjA2NSAxMDAuNDkyIDE5Ljk5MjdDMTAwLjQ5MiAxOC43NzkgMTAwLjgzOSAxNy44Njg3IDEwMS40OTEgMTcuMjYxOEMxMDIuMTQzIDE2LjY5ODMgMTAzLjE4NyAxNi4zOTQ5IDEwNC41MzQgMTYuMzk0OUgxMTEuMDU0VjE4Ljc3OUgxMDUuNzA4QzEwNC44MzggMTguNzc5IDEwNC4yNzMgMTguODY1NyAxMDQuMDEyIDE4Ljk5NTdDMTAzLjc1MiAxOS4xNjkxIDEwMy42MjEgMTkuNDI5MiAxMDMuNjIxIDE5LjgxOTRDMTAzLjYyMSAyMC4xNjYxIDEwMy43NTIgMjAuNDI2MiAxMDMuOTY5IDIwLjU5OTZDMTA0LjE4NiAyMC43NzMgMTA0LjU3NyAyMC44NTk3IDEwNS4wNTYgMjAuODU5N0gxMDcuNzk0QzEwOS4wNTQgMjAuODU5NyAxMTAuMDExIDIxLjE2MzEgMTEwLjY2MyAyMS43MjY2QzExMS4zMTUgMjIuMjkwMiAxMTEuNjYyIDIzLjE1NzEgMTExLjY2MiAyNC4yNDA4QzExMS42NjIgMjUuMjgxMSAxMTEuMzU4IDI2LjE0ODEgMTEwLjc5MyAyNi43OTgzQzExMC4yMjggMjcuNDQ4NSAxMDkuNDQ2IDI3Ljc5NTMgMTA4LjUzMyAyNy43OTUzSDEwMC43MDlWMjUuNDExMkgxMDAuNjIyWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTE2LjU3NCAxNS4wOTQ0SDExMy40MDFWMTIuMjc2OUgxMTYuNTc0VjE1LjA5NDRaTTExNi41NzQgMjcuNzk1M0gxMTMuNDAxVjE2LjM5NDlIMTE2LjU3NFYyNy43OTUzWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTMwLjMwOSAyMi4xMTY3QzEzMC4zMDkgMjMuODkzOSAxMjkuNzQ0IDI1LjMyNDQgMTI4LjY1NyAyNi40MDgxQzEyNy41NzEgMjcuNDkxOCAxMjYuMDkzIDI4LjAxMiAxMjQuMjI0IDI4LjAxMkMxMjIuMzU1IDI4LjAxMiAxMjAuODc3IDI3LjQ5MTggMTE5Ljc5IDI2LjQwODFDMTE4LjcwNCAyNS4zMjQ0IDExOC4xMzkgMjMuODkzOSAxMTguMTM5IDIyLjExNjdDMTE4LjEzOSAyMC4zMzk0IDExOC43MDQgMTguOTA5IDExOS43OSAxNy44MjUzQzEyMC44NzcgMTYuNzQxNiAxMjIuMzk4IDE2LjIyMTQgMTI0LjIyNCAxNi4yMjE0QzEyNi4wNDkgMTYuMjIxNCAxMjcuNTI3IDE2Ljc0MTYgMTI4LjY1NyAxNy44MjUzQzEyOS43NDQgMTguODY1NiAxMzAuMzA5IDIwLjI5NjEgMTMwLjMwOSAyMi4xMTY3Wk0xMjEuMjY4IDIyLjExNjdDMTIxLjI2OCAyMy4yMDA0IDEyMS41MjkgMjQuMDY3MyAxMjIuMDUxIDI0LjY3NDJDMTIyLjU3MiAyNS4yODExIDEyMy4yNjggMjUuNTg0NSAxMjQuMTggMjUuNTg0NUMxMjUuMDkzIDI1LjU4NDUgMTI1Ljc4OSAyNS4yODExIDEyNi4zMSAyNC42NzQyQzEyNi44MzIgMjQuMDY3MyAxMjcuMDkzIDIzLjIwMDQgMTI3LjA5MyAyMi4xMTY3QzEyNy4wOTMgMjEuMDMzIDEyNi44MzIgMjAuMTY2MSAxMjYuMzEgMTkuNjAyNUMxMjUuNzg5IDE4Ljk5NTcgMTI1LjA5MyAxOC42OTIyIDEyNC4xMzcgMTguNjkyMkMxMjMuMjI0IDE4LjY5MjIgMTIyLjUyOSAxOC45OTU3IDEyMi4wMDcgMTkuNjAyNUMxMjEuNTI5IDIwLjE2NjEgMTIxLjI2OCAyMS4wMzMgMTIxLjI2OCAyMi4xMTY3WiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTMxLjc4NyAxNi4zOTQ5SDEzNy40ODFDMTM5LjIxOSAxNi4zOTQ5IDE0MC40MzYgMTYuNjk4MyAxNDEuMTc1IDE3LjM0ODVDMTQxLjkxNCAxNy45OTg4IDE0Mi4yNjIgMTkuMDgyNCAxNDIuMjYyIDIwLjU1NjNWMjcuNzk1M0gxMzkuMjE5VjIwLjk0NjRDMTM5LjIxOSAyMC4wNzk0IDEzOS4wODkgMTkuNTE1OSAxMzguODI4IDE5LjI5OTJDMTM4LjU2NyAxOS4wMzkxIDEzOC4wNDYgMTguOTA5MSAxMzcuMjIgMTguOTA5MUgxMzQuNzg2VjI3LjgzODZIMTMxLjc0M1YxNi4zOTQ5SDEzMS43ODdaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03LjEyODMxIDMuNzM3NDNIMFYxMC44NDY0SDcuMTI4MzFWMy43Mzc0M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTIzLjI1MTMgLTIuMTU3MjVlLTA1TDE4LjU1MTMgNS41MTY4NUwyNC4wODMxIDEwLjIwNDFMMjguNzgzMSA0LjY4NzI1TDIzLjI1MTMgLTIuMTU3MjVlLTA1WiIgZmlsbD0iI0ZGODYwMCIvPgo8cGF0aCBkPSJNMTUuNjA0MSAzLjczNzQzSDguNDc1ODNWMTAuODQ2NEgxNS42MDQxVjMuNzM3NDNaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03LjEyODMxIDEyLjE5MDJIMFYxOS4yOTkySDcuMTI4MzFWMTIuMTkwMloiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTE1LjYwNDEgMTIuMTkwMkg4LjQ3NTgzVjE5LjI5OTJIMTUuNjA0MVYxMi4xOTAyWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMjQuMDc5NyAxMi4xOTAySDE2Ljk1MTRWMTkuMjk5MkgyNC4wNzk3VjEyLjE5MDJaIiBmaWxsPSIjRkY4NjAwIi8+CjxwYXRoIGQ9Ik03LjEyODMxIDIwLjY4NjNIMFYyNy43OTUzSDcuMTI4MzFWMjAuNjg2M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTE1LjYwNDEgMjAuNjg2M0g4LjQ3NTgzVjI3Ljc5NTNIMTUuNjA0MVYyMC42ODYzWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMjQuMTIzMiAyMC42ODYzSDE2Ljk5NDlWMjcuNzk1M0gyNC4xMjMyVjIwLjY4NjNaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik0xNDYgMTUuODMxM0MxNDYgMTYuODcxNyAxNDUuMTc0IDE3LjY5NTMgMTQ0LjEzMSAxNy42OTUzQzE0My4wODggMTcuNjk1MyAxNDIuMjYyIDE2Ljg3MTcgMTQyLjI2MiAxNS44MzEzQzE0Mi4yNjIgMTQuNzkxIDE0My4wODggMTQuMDEwNyAxNDQuMTMxIDE0LjAxMDdDMTQ1LjEzMSAxMy45Njc0IDE0NiAxNC43OTEgMTQ2IDE1LjgzMTNaTTE0Mi45NTcgMTQuNzkxQzE0Mi42OTcgMTUuMDUxMSAxNDIuNTY2IDE1LjQ0MTIgMTQyLjU2NiAxNS44MzEzQzE0Mi41NjYgMTYuNjk4MyAxNDMuMjYyIDE3LjM5MTggMTQ0LjEzMSAxNy4zOTE4QzE0NSAxNy4zOTE4IDE0NS42OTYgMTYuNjk4MyAxNDUuNjk2IDE1LjgzMTNDMTQ1LjY5NiAxNS4wMDc3IDE0NSAxNC4yNzA4IDE0NC4xNzQgMTQuMjcwOEMxNDMuNjUzIDE0LjI3MDggMTQzLjI2MiAxNC40NDQyIDE0Mi45NTcgMTQuNzkxWk0xNDQuODcgMTYuOTE1SDE0NC40NzlMMTQzLjkxNCAxNi4wOTE0VjE2LjkxNUgxNDMuNjA5VjE0Ljc0NzZIMTQzLjk1N0MxNDQuNDM1IDE0Ljc0NzYgMTQ0LjY1MyAxNC45NjQ0IDE0NC42NTMgMTUuMzU0NUMxNDQuNjUzIDE1LjY1NzkgMTQ0LjQ3OSAxNS44NzQ3IDE0NC4xNzQgMTUuOTYxNEwxNDQuODcgMTYuOTE1Wk0xNDQuMDQ0IDE1LjY1NzlDMTQ0LjI2MSAxNS42NTc5IDE0NC4zOTIgMTUuNTI3OSAxNDQuMzkyIDE1LjM1NDVDMTQ0LjM5MiAxNS4xMzc4IDE0NC4yNjEgMTUuMDUxMSAxNDQuMDAxIDE1LjA1MTFIMTQzLjkxNFYxNS42NTc5SDE0NC4wNDRaIiBmaWxsPSIjMzU0M0E4Ii8+Cjwvc3ZnPgo=" style="\n    text-align: left;\n    width: 146px;\n    position: absolute;\n    top: 14px;\n    left: 31px;\n">\n            </div>\n            <div style="\n    position: relative;\n    top: 80px;\n    left: 32px;\n    font-size: 20px;\n    text-align: left;\n    font-weight: 700;\n    letter-spacing: 0.02em;\n    font-style: normal;\n    line-height: 125%;\n    ">Claim your FREE account and get a key in less than a minute</div>\n            <ul style="\n        font-size: 15px;\n        font-weight: 400;\n        color: #333333;\n        letter-spacing: 0.01em;\n        position: relative;\n        left: 32px;\n        top: 88px;\n        line-height: 180%;\n        ">\n                <li><span>Access to a 30-day free trial of any of our products.</span></li>\n                <li><span>Access to 24x5 support by developers via the <a href="https://support.syncfusion.com/create" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">support tickets</a>, <a href="https://www.syncfusion.com/forums" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">forum</a>, <a href="https://www.syncfusion.com/feedback" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">feature &amp; feedback page</a> and chat.</span></li>\n                <li><span>200+ <a href="https://www.syncfusion.com/succinctly-free-ebooks" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">ebooks </a>on the latest technologies, industry trends, and research topics.</span>\n                </li>\n                <li><span>Largest collection of over 7,000 flat and wireframe icons for free with Syncfusion <a href="https://www.syncfusion.com/succinctly-free-ebooks" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">Metro Studio.</a></span></li>\n                <li><span>Free and unlimited access to Syncfusion technical <a href="https://www.syncfusion.com/blogs/" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">blogs</a> and <a href="https://www.syncfusion.com/resources/techportal/whitepapers" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">whitepapers.</a></span></li>\n            </ul>\n            <div style="\n            font-size: 18px;\n            font-weight: 700;\n            position: relative;\n            line-height: 125%;\n            letter-spacing: 0.02em;\n            top: 90px;\n            left: 32px;\n    ">Syncfusion is trusted by 29,000+ businesses worldwide</div>\n            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODIwIiBoZWlnaHQ9IjU2IiB2aWV3Qm94PSIwIDAgODIwIDU2IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00MjcuNjE3IDIyLjU2NTlWMjQuNzIyNkM0MjYuNTU4IDI0LjM2MzggNDI1LjM5OCAyNC4xNTQ0IDQyNC40NzQgMjQuMTU0NEM0MjMuMzMzIDI0LjE1NDQgNDIyLjY5OCAyNC40OTEyIDQyMi42OTggMjUuMDk2M0M0MjIuNjk4IDI1LjQ4MjQgNDIyLjk3NiAyNS43MzgzIDQyMy43NzMgMjYuMDg1NEw0MjUuOTE3IDI3LjAxNzRDNDI3LjYzMyAyNy43NjM5IDQyOC40OTcgMjguODUzIDQyOC40OTcgMzAuMjY4MUM0MjguNDk3IDMyLjQ1MjIgNDI2LjU0NiAzMy44MyA0MjMuNDUyIDMzLjgzQzQyMi4zMjQgMzMuODMgNDIxLjAxOCAzMy42NzM2IDQxOS42MzYgMzMuMzcwOVYzMS4xNDE2QzQyMS4wMDYgMzEuNTAyOCA0MjIuMjYyIDMxLjY5NTcgNDIzLjIzOSAzMS42OTU3QzQyNC41MTggMzEuNjk1NyA0MjUuMjAzIDMxLjM1MDYgNDI1LjIwMyAzMC43MDc0QzQyNS4yMDMgMzAuMzIwOCA0MjQuOTM1IDMwLjAzNjcgNDI0LjMyMiAyOS43NzE3TDQyMS45NzUgMjguNzU5M0M0MjAuMjM2IDI4LjAwNzggNDE5LjQzMyAyNi45OTU0IDQxOS40MzMgMjUuNTUyMUM0MTkuNDMzIDIzLjQ4MzcgNDIxLjMxNCAyMi4xNjQ5IDQyNC4yNjUgMjIuMTY0OUM0MjUuMjk4IDIyLjE2NDkgNDI2LjU3IDIyLjMxNzEgNDI3LjYxNyAyMi41NjU5VjIyLjU2NTlaTTQzMC4xNjcgMjIuMzkwOUg0MzMuNjM1VjMzLjYwMzlINDMwLjE2N1YyMi4zOTA5Wk00NDQuOTExIDIyLjM5MDlWMjQuNDQ1MUg0MzkuNjc1VjI2Ljk3NDJINDQ0LjI0OVYyOC44MzIzSDQzOS42NzVWMzEuNDU0M0g0NDQuOTc4VjMzLjYwMzlINDM2LjMwNVYyMi4zOTA5SDQ0NC45MTFaTTQ2MS4yOTQgMjIuMzkwOVYzMy42MDM5SDQ1Ny45MzlWMjYuMjIzNkw0NTQuNjUyIDMzLjY5MTVINDUyLjUzMUw0NDkuMjY2IDI2LjIyMzZWMzMuNjAzOUg0NDYuOTQ5VjIyLjM5MDlINDUxLjE4NEw0NTQuMTc4IDI5LjIxMTRMNDU3LjE1NiAyMi4zOTA5SDQ2MS4yOTRWMjIuMzkwOVpNNDcyLjU3OSAyMi4zOTA5VjI0LjQ0NTFINDY3LjMzNVYyNi45NzQySDQ3MS45MDhWMjguODMyM0g0NjcuMzM1VjMxLjQ1NDNINDcyLjYzOFYzMy42MDM5SDQ2My45NTdWMjIuMzkwOUg0NzIuNTc5Wk00ODQuNzk0IDIyLjM5MDlWMzMuNjAzOUg0ODEuMDkzTDQ3Ni45MjYgMjYuNDEyM1YzMy42MDM5SDQ3NC42MDhWMjIuMzkwOUg0NzguNDA3TDQ4Mi40ODQgMjkuNDg3NlYyMi4zOTA5SDQ4NC43OTRaTTQ5NC44NTggMjIuNTY1OVYyNC43MjI2QzQ5My44MDcgMjQuMzY2MyA0OTIuNjQgMjQuMTU0NCA0OTEuNzMyIDI0LjE1NDRDNDkwLjU3MyAyNC4xNTQ0IDQ4OS45MzkgMjQuNDg1OCA0ODkuOTM5IDI1LjA5M0M0ODkuOTM5IDI1LjQ4ODYgNDkwLjE5OCAyNS43MjUgNDkxLjAyMyAyNi4wODU5TDQ5My4xNTcgMjcuMDE3OEM0OTQuODg1IDI3Ljc3MjIgNDk1LjczOSAyOC44NTE4IDQ5NS43MzkgMzAuMjgzNUM0OTUuNzM5IDMyLjQ1NTkgNDkzLjc4NiAzMy44MzA4IDQ5MC42OTkgMzMuODMwOEM0ODkuNTY5IDMzLjgzMDggNDg4LjI1OSAzMy42NzM2IDQ4Ni44NzggMzMuMzcxN1YzMS4xNDI0QzQ4OC4yNDcgMzEuNTAyOCA0ODkuNDk5IDMxLjY5NjUgNDkwLjQ3IDMxLjY5NjVDNDkxLjc0IDMxLjY5NjUgNDkyLjQ0NCAzMS4zNTE1IDQ5Mi40NDQgMzAuNzI4NUM0OTIuNDQ0IDMwLjMxNjMgNDkyLjE5NyAzMC4wNTA0IDQ5MS41NTUgMjkuNzcyNUw0ODkuMjE4IDI4Ljc2MDFDNDg3LjQ2NyAyOC4wMDI4IDQ4Ni42NzQgMjcuMDAyIDQ4Ni42NzQgMjUuNTUzM0M0ODYuNjc0IDIzLjQ4NjIgNDg4LjU1NiAyMi4xNjY1IDQ5MS41IDIyLjE2NjVDNDkyLjUzNiAyMi4xNjUzIDQ5My44MTMgMjIuMzE3MSA0OTQuODU4IDIyLjU2NTlWMjIuNTY1OVoiIGZpbGw9IiMwMEEwQjAiLz4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMzUyLjQxMyAyNi44MTlDMzUwLjk5MiAyNS4yNzU5IDM0OS42MzggMjMuODMxNSAzNDguMzQ5IDIyLjE1NzRMMzQ3LjkyIDIxLjU5OTVDMzQ5LjQwNiAyMS4zNjkzIDM1MC42OTUgMjAuMzg0OCAzNTAuNjk1IDE4Ljc0MzNDMzUwLjY5NSAxNy4yMzMxIDM0OS41MzkgMTYuMjQ4MiAzNDcuODIxIDE2LjI0ODJDMzQ2LjU5OCAxNi4yNDgyIDM0NS43MDYgMTYuMzEzNyAzNDUuMjQzIDE2LjMxMzdDMzQ0LjcxNSAxNi4zMTM3IDM0NC4yODUgMTYuMzEzNyAzNDMuNzkgMTYuMjgwOEMzNDMuODU2IDE4LjE1MjEgMzQzLjg4OSAxOC4yODM0IDM0My44ODkgMTkuNDMyMlYyMy42MzQzQzM0My44ODkgMjQuNDU1MyAzNDMuODU2IDI1LjI3NTkgMzQzLjc5IDI2LjgxODZDMzQ0LjE1MyAyNi43MjAyIDM0NC41MTcgMjYuNzIwMiAzNDQuNzgxIDI2LjcyMDJDMzQ1LjA0NSAyNi43MjAyIDM0NS40MDkgMjYuNzUzMSAzNDUuNzA2IDI2LjgxODZDMzQ1LjY0IDI1Ljc2NzkgMzQ1LjYwNyAyNC4wMjgzIDM0NS42MDcgMjMuNjM0M1YyMS4yMDUxQzM0Ny4xNiAyMy4yMDc3IDM0OS4yMDkgMjUuNjY5NSAzNTAuMDAxIDI2LjgxODZDMzUwLjM5OCAyNi43MjAyIDM1MC43MjggMjYuNzIwMiAzNTEuMTI0IDI2LjcyMDJDMzUxLjQ1NSAyNi43MjA2IDM1MS45MTggMjYuNzIwNiAzNTIuNDEzIDI2LjgxOVYyNi44MTlaTTM0OC44NzggMTkuMDA2QzM0OC44NzggMjAuMDIzNCAzNDguMzE3IDIxLjIwNTQgMzQ2Ljc5NyAyMS4yMDU0QzM0Ni40IDIxLjIwNTQgMzQ2LjAwMyAyMS4yMDU0IDM0NS42MDcgMjEuMTcyNVYxNy4wNjg4QzM0Ni4wMDMgMTYuOTcwNCAzNDYuNDk5IDE2LjkwNDYgMzQ2Ljc2MyAxNi45MDQ2QzM0OC4wODUgMTYuOTA0OSAzNDguODc4IDE3LjY2IDM0OC44NzggMTkuMDA2VjE5LjAwNlpNMzgyLjM4IDI2Ljg4NDVDMzgxLjgxOSAyNi4yOTM2IDM4MC45NiAyNS4zNDE3IDM4MC4xMzQgMjQuNDIyM0MzODAuODI4IDIzLjY2NzIgMzgxLjU1NSAyMi41NTEgMzgxLjk4NCAyMS41OTkxQzM4MS43MTkgMjEuNDY3OCAzODEuMzU2IDIxLjIwNTEgMzgxLjA5MiAyMC45NzUzQzM4MC45OTMgMjEuNzk1OSAzODAuNDMyIDIyLjg3OTIgMzc5LjYzOSAyMy44MzE1QzM3OC41MTUgMjIuNTE4NSAzNzguMjE4IDIyLjE1NzQgMzc3LjE5MyAyMC43Nzg1QzM3OC41ODEgMTkuODkyMSAzNzkuMjQyIDE4Ljg3NDMgMzc5LjI0MiAxOC4wNTM3QzM3OS4yNDIgMTcuMTAxNyAzNzguNTgxIDE2LjExNjkgMzc2Ljk2MiAxNi4xMTY5QzM3NS4yMTEgMTYuMTE2OSAzNzQuMzUyIDE3LjIwMDIgMzc0LjM1MiAxOC40ODAzQzM3NC4zNTIgMTkuMjM1NCAzNzQuNTUgMTkuODkxNyAzNzUuMzc2IDIwLjk3NTNDMzc0LjA1NCAyMS42OTc1IDM3Mi43NjYgMjIuNzQ3OSAzNzIuNzY2IDI0LjQyMjNDMzcyLjc2NiAyNi4wNjM5IDM3NC4wODcgMjYuOTE3NCAzNzUuNzA3IDI2LjkxNzRDMzc3LjE5MyAyNi45MTc0IDM3OC4xNTEgMjYuMzI2NiAzNzguOTEyIDI1LjYzNjlMMzc5LjkwMiAyNi44MTlDMzgwLjIgMjYuNzg2MSAzODAuNTMxIDI2LjcyMDYgMzgwLjg2MSAyNi43MjA2QzM4MS4zMjQgMjYuNzIwNiAzODEuODUyIDI2Ljc4NjEgMzgyLjM4IDI2Ljg4NDVWMjYuODg0NVpNMzgzLjM3MiA0MC4wMTU4QzM4MS45MTggMzguNDczIDM4MC41OTcgMzcuMDYxMiAzNzkuMzA4IDM1LjM4NzFMMzc4Ljg3OCAzNC44Mjg4QzM4MC4zMzIgMzQuNTk5MSAzODEuNjU0IDMzLjYxNSAzODEuNjU0IDMxLjk0MDFDMzgxLjY1NCAzMC40NjMyIDM4MC40OTggMjkuNDQ1NCAzNzguNzc5IDI5LjQ0NTRDMzc3LjU1NyAyOS40NDU0IDM3Ni42MzIgMjkuNTQzNSAzNzYuMTY5IDI5LjU0MzVDMzc1LjY3MyAyOS41NDM1IDM3NS4yNDQgMjkuNTQzNSAzNzQuNzQ4IDI5LjQ3NzZDMzc0LjgxNCAzMS4zODIyIDM3NC44NDggMzEuNDgwMiAzNzQuODQ4IDMyLjYyOTRWMzYuODMxMUMzNzQuODQ4IDM3LjY1MjQgMzc0LjgxNCAzOC41MDUyIDM3NC43NDggNDAuMDE1NEMzNzUuMTEyIDM5Ljk0OTYgMzc1LjQ3NSAzOS45NDk2IDM3NS43MDcgMzkuOTQ5NkMzNzYuMDA0IDM5Ljk0OTYgMzc2LjM2OCAzOS45NDk2IDM3Ni42MzIgNDAuMDE1NEMzNzYuNTY1IDM4Ljk5OCAzNzYuNTMzIDM3LjI1ODEgMzc2LjUzMyAzNi44MzExVjM0LjQzNDhDMzc4LjExOSAzNi40MDQyIDM4MC4xNjcgMzguODk5NiAzODAuOTYgNDAuMDE1NEMzODEuMzU2IDM5Ljk0OTYgMzgxLjY4NyAzOS45NDk2IDM4Mi4wODMgMzkuOTQ5NkMzODIuMzggMzkuOTUgMzgyLjg3NiAzOS45NSAzODMuMzcyIDQwLjAxNThaTTM2Mi4xNiAyNi44MTlDMzYwLjk3MSAyNS41NzE1IDM1OC44ODkgMjIuOTc4IDM1OC4wNjMgMjEuOTkzNUwzNTcuMjM3IDIwLjk3NTdDMzU4LjA5NiAxOS45NTgzIDM1OC42OSAxOS4zMzQxIDM1OS4zMTkgMTguNTc5QzM2MC4wNDUgMTcuNzkxIDM2MC43MDYgMTYuOTcwNCAzNjEuNDk5IDE2LjI0ODJDMzYxLjEzNiAxNi4zMTM3IDM2MC45MzcgMTYuMzEzNyAzNjAuNzM5IDE2LjMxMzdDMzYwLjU0MSAxNi4zMTM3IDM2MC4zNDMgMTYuMzEzNyAzNjAuMTQ0IDE2LjI0ODJDMzU5LjkxMyAxNi42MDkzIDM1OS41NSAxNy4wNjg4IDM1OS4xNTMgMTcuNTI4N0MzNTguNzU2IDE3Ljk1NTYgMzU4LjM2IDE4LjM4MjIgMzU4LjA2MyAxOC43NDMzQzM1Ny4yMzYgMTkuNjk1MiAzNTYuNzc0IDIwLjE1NDcgMzU1LjU4NSAyMS4yNzA5VjE5LjQ2NTVDMzU1LjU4NSAxOC40MTUxIDM1NS41ODUgMTcuNzI1NSAzNTUuNjUxIDE2LjI0ODJDMzU1LjMyMSAxNi4zMTM3IDM1NC45NTcgMTYuMzEzNyAzNTQuNzI2IDE2LjMxMzdDMzU0LjQ2MSAxNi4zMTM3IDM1NC4wMzIgMTYuMzEzNyAzNTMuNzY4IDE2LjI0ODJDMzUzLjgzMyAxNy44MjM5IDM1My44NjcgMTguMjgzNCAzNTMuODY3IDE5LjQzMjVWMjMuNjM0N0MzNTMuODY3IDI0LjY4NSAzNTMuODMzIDI1LjMwODggMzUzLjc2OCAyNi44MTlDMzU0LjE2NCAyNi43MjA2IDM1NC40OTUgMjYuNzIwNiAzNTQuNzI2IDI2LjcyMDZDMzU0Ljk1NyAyNi43MjA2IDM1NS4zNTMgMjYuNzUzNSAzNTUuNjUxIDI2LjgxOUMzNTUuNTg1IDI1LjE0NDkgMzU1LjU4NSAyNC4xNTk3IDM1NS41ODUgMjMuNjM0N1YyMS40MzUyQzM1Ni44MDcgMjIuODc5NiAzNTguNjkgMjUuMjQzMyAzNTkuNzQ4IDI2LjgxOUMzNjAuMTMgMjYuNzU2MyAzNjAuNTE3IDI2LjcyMzQgMzYwLjkwNSAyNi43MjA2QzM2MS4yMDIgMjYuNzIwNiAzNjEuNjY1IDI2LjcyMDYgMzYyLjE2IDI2LjgxOVYyNi44MTlaTTM3Mi42MDEgNDAuMDE1OEMzNzIuNTY4IDM5Ljg1MTkgMzcyLjUzNSAzOS43MjA2IDM3Mi41MzUgMzkuNTIzNEMzNzIuNTM1IDM5LjM5MjggMzcyLjU2OCAzOS4yMjgxIDM3Mi42MDEgMzkuMDk2NEMzNzEuMjggMzkuMTI5NyAzNjguOTAxIDM5LjE5NTIgMzY4LjM3MiAzOS4xOTUyVjM0LjY2NDlDMzY5LjY5NCAzNC42NjQ5IDM3MC45ODIgMzQuNjY0OSAzNzIuMjcgMzQuNzk2M0MzNzIuMjM4IDM0LjYzMjQgMzcyLjIwNCAzNC40Njc3IDM3Mi4yMDQgMzQuMzM2NEMzNzIuMjA0IDM0LjIwNTggMzcyLjIwNCAzNC4wNDE5IDM3Mi4yNyAzMy44NDQ3QzM3MS4zNDYgMzMuOTQyOCAzNjkuMTk4IDMzLjk3NiAzNjguMzcyIDMzLjk3NlYzMC4yNjZDMzY5LjgyNiAzMC4yNjYgMzcwLjY4NSAzMC4yNjYgMzcxLjE4IDMwLjI5OTNMMzcyLjUwMiAzMC4zNjUxQzM3Mi40MzYgMzAuMTY3OSAzNzIuNDM2IDMwLjA2OTIgMzcyLjQzNiAyOS45MDUzQzM3Mi40MzYgMjkuNzQxNCAzNzIuNDM2IDI5LjcwODEgMzcyLjUwMiAyOS40NDU4QzM3MS40MTEgMjkuNDc4MyAzNjkuOTI1IDI5LjU0MzggMzY5LjI2NCAyOS41NDM4QzM2OC44MDIgMjkuNTQzOCAzNjcuMzQ4IDI5LjUxMTMgMzY2LjU4NyAyOS40NDU4QzM2Ni42NTQgMzAuMjY2NCAzNjYuNjg2IDMxLjYxMjMgMzY2LjY4NiAzMi41NjQyVjM2Ljg2NTFDMzY2LjY4NiAzNy40ODg1IDM2Ni42MiAzOC43MzU3IDM2Ni41ODcgNDAuMDE2MkMzNjcuNTEzIDM5Ljk1MDMgMzY4LjgwMiAzOS45NTAzIDM2OS4yNjQgMzkuOTUwM0MzNzAuMDI0IDM5Ljk1IDM3MS42NDMgMzkuOTUgMzcyLjYwMSA0MC4wMTU4Wk0zNjQuNjA1IDM5LjEyOTRDMzY0LjQ0IDM4LjgwMDggMzY0LjM0MSAzOC4zMDg4IDM2NC4yNzUgMzguMDQ2MUMzNjIuOTIgMzkuMTYxOSAzNjEuOTk1IDM5LjM5MjQgMzYwLjkzOCAzOS4zOTI0QzM1OC41OTIgMzkuMzkyNCAzNTcuMzM3IDM3LjI5MTMgMzU3LjMzNyAzNC42NjQ5QzM1Ny4zMzcgMzEuNzQzNiAzNTguNzU3IDMwLjAzNjIgMzYxLjE2OSAzMC4wMzYyQzM2Mi40MjUgMzAuMDM2MiAzNjMuNjE0IDMwLjU5NDUgMzY0LjE3NiAzMS4xNTI4QzM2NC4yMDggMzAuODg5OCAzNjQuMzA4IDMwLjM2NDggMzY0LjQ3MyAzMC4wNjg4QzM2My4zMTYgMjkuNTExMyAzNjIuMjU5IDI5LjM0NjYgMzYxLjEwMiAyOS4zNDY2QzM1Ny4yMzcgMjkuMzQ2NiAzNTUuNDUzIDMxLjc0MzYgMzU1LjQ1MyAzNC44Mjg4QzM1NS40NTMgMzguMzA5MSAzNTcuNzk4IDQwLjE0NzEgMzYwLjczOSA0MC4xNDcxQzM2Mi40MjUgNDAuMTQ3MSAzNjMuODEyIDM5LjYyMjIgMzY0LjYwNSAzOS4xMjk0VjM5LjEyOTRaTTM0Mi4zMDMgMjYuODE5QzM0MC41MTkgMjMuNDA0OSAzMzguOCAxOS4xMzczIDMzNy41NzggMTYuMTE2OUgzMzcuMzhDMzM2LjU4NyAxOC4wMjA3IDMzNS4xMzMgMjEuMjcwOSAzMzQuNzM3IDIyLjE4OTlDMzM0LjI3NCAyMy4zMDYxIDMzMy4yNSAyNS41MDU2IDMzMi41ODkgMjYuODE4NkMzMzIuODAzIDI2Ljc1MzggMzMzLjAyNiAyNi43MjA2IDMzMy4yNSAyNi43MjAyQzMzMy40NDggMjYuNzIwMiAzMzMuNjEzIDI2Ljc1MzEgMzMzLjg0NSAyNi44MTg2QzMzNC4xNzUgMjUuOTMyMiAzMzQuNjM4IDI0LjgxNiAzMzUuMTMzIDIzLjYzNDNDMzM1Ljc5NCAyMy42MDE0IDMzNi4zODkgMjMuNTY4OCAzMzYuOTg0IDIzLjU2ODhDMzM3LjYxMiAyMy41Njg4IDMzOC4yNzIgMjMuNjAxNCAzMzguOTMzIDIzLjYzNDNMMzM5LjU5NCAyNS4yMUwzNDAuMjU1IDI2LjgxODZDMzQwLjcxNyAyNi43MjAyIDM0MS4wOCAyNi43MjAyIDM0MS4zMTIgMjYuNzIwMkMzNDEuNjA5IDI2LjcyMDYgMzQxLjg3MyAyNi43MjA2IDM0Mi4zMDMgMjYuODE5VjI2LjgxOVpNMzUzLjYzNiAyOS40NDU0QzM1My40MzggMjkuNTExMyAzNTMuMjczIDI5LjU0MzUgMzUzLjEwNyAyOS41NDM1QzM1Mi45MDkgMjkuNTQzNSAzNTIuNzQ0IDI5LjUxMDkgMzUyLjU0NiAyOS40NDU0QzM1Mi42NDQgMzAuNzU4NCAzNTIuNjc4IDMyLjA3MTQgMzUyLjY3OCAzMy4zNTE5VjM2LjczMzRDMzUyLjE0OSAzNi4yNzM2IDM1MC44NiAzNS4wOTE5IDM0OS4zNzQgMzMuNzEzQzM0Ny44NiAzMi4zMDc0IDM0Ni4zOTQgMzAuODUxMSAzNDQuOTc5IDI5LjM0NjZIMzQ0Ljc0OEMzNDQuNzgxIDMwLjgyNDMgMzQ0LjgxNCAzMi40IDM0NC44MTQgMzMuODExNFYzNS44Nzk5QzM0NC44MTQgMzcuNjUyOCAzNDQuODE0IDM4LjYwNDcgMzQ0LjcxNSA0MC4wMTYyQzM0NC45OCAzOS45NTAzIDM0NS4xMTIgMzkuOTUwMyAzNDUuMzEgMzkuOTUwM0MzNDUuNDQyIDM5Ljk1MDMgMzQ1LjU3NSAzOS45NTAzIDM0NS44MDYgNDAuMDE2MkMzNDUuNzQgMzguNjcwNiAzNDUuNzA3IDM2LjQ3MDggMzQ1LjcwNyAzNS44Nzk5VjMyLjU5NjhDMzQ4LjE4NSAzNC44NjI1IDM1MS4yMjQgMzcuODgyNiAzNTMuNDcxIDQwLjE0NzVIMzUzLjYwM0MzNTMuNjAzIDM4LjkzMjkgMzUzLjUzNyAzNy43MTc5IDM1My41MzcgMzYuNTA0VjM0LjYzMjdDMzUzLjUzNiAzMi40MzI1IDM1My41MzYgMzEuMzQ5MyAzNTMuNjM2IDI5LjQ0NTRaTTM0Mi41NjcgNDAuMDE1OEMzNDIuNTM0IDM5Ljg1MTkgMzQyLjUwMSAzOS43MjA2IDM0Mi41MDEgMzkuNTIzNEMzNDIuNTAxIDM5LjM5MjggMzQyLjUzNCAzOS4yMjgxIDM0Mi41NjcgMzkuMDk2NEMzNDEuMjQ2IDM5LjEyOTcgMzM4Ljg2NyAzOS4xOTUyIDMzOC4zNzEgMzkuMTk1MlYzNC42NjQ5QzMzOS42NiAzNC42NjQ5IDM0MC45NDggMzQuNjY0OSAzNDIuMjM3IDM0Ljc5NjNDMzQyLjIwNCAzNC42MzI0IDM0Mi4xNzEgMzQuNDY3NyAzNDIuMTcxIDM0LjMzNjRDMzQyLjE3MSAzNC4yMDU4IDM0Mi4xNzEgMzQuMDQxOSAzNDIuMjM3IDMzLjg0NDdDMzQxLjMxMiAzMy45NDI4IDMzOS4xOTcgMzMuOTc2IDMzOC4zNzEgMzMuOTc2VjMwLjI2NkMzMzkuNzkyIDMwLjI2NiAzNDAuNjUxIDMwLjI2NiAzNDEuMTc5IDMwLjI5OTNMMzQyLjQ2OCAzMC4zNjUxQzM0Mi40MzUgMzAuMTY3OSAzNDIuNDM1IDMwLjA2OTIgMzQyLjQzNSAyOS45MDUzQzM0Mi40MzUgMjkuNzQxNCAzNDIuNDM1IDI5LjY3NTUgMzQyLjQ2OCAyOS40NDU4QzM0MS4zNzggMjkuNDc4MyAzMzkuODkxIDI5LjU0MzggMzM5LjIzIDI5LjU0MzhDMzM4Ljc2NyAyOS41NDM4IDMzNy4zMTQgMjkuNTExMyAzMzYuNTU0IDI5LjQ0NThDMzM2LjYyIDMwLjI2NjQgMzM2LjY1MyAzMS42MTIzIDMzNi42NTMgMzIuNTY0MlYzNi44NjUxQzMzNi42NTMgMzcuNDg4NSAzMzYuNTg3IDM4LjczNTcgMzM2LjU1NCA0MC4wMTYyQzMzNy41MTIgMzkuOTUwMyAzMzguNzY3IDM5Ljk1MDMgMzM5LjIzIDM5Ljk1MDNDMzM5Ljk5IDM5Ljk1IDM0MS42NDIgMzkuOTUgMzQyLjU2NyA0MC4wMTU4VjQwLjAxNThaTTMzMS4yMDEgMjYuODE5QzMzMC42NzMgMjMuMjQwNiAzMzAuMjEgMTkuNDk4NCAzMjkuODQ3IDE2LjExNjlDMzI5Ljc0OCAxNi4xNDk4IDMyOS43MTQgMTYuMTQ5OCAzMjkuNjQ5IDE2LjExNjlDMzI4Ljk1NSAxNy4zMzE1IDMyOC4xNjIgMTguNjQ0NSAzMjcuNTY3IDE5LjU2MzlDMzI3LjAwNiAyMC40NTAzIDMyNi4zNDUgMjEuNTAwNyAzMjUuNTg1IDIyLjYxNjlDMzIzLjk5OSAyMC41ODE3IDMyMi4zNDcgMTguMDIxMSAzMjEuMjU2IDE2LjExNjlDMzIxLjE5IDE2LjE0OTggMzIxLjE1NyAxNi4xMTY5IDMyMS4wOTEgMTYuMTE2OUMzMjAuNzI4IDE5LjQ5OCAzMjAuMjMyIDIzLjI3MzIgMzE5LjczNiAyNi44MTlDMzIwLjAwMSAyNi43MjA2IDMyMC4xNjYgMjYuNzIwNiAzMjAuMjk4IDI2LjcyMDZDMzIwLjQ5NiAyNi43MjA2IDMyMC42MjggMjYuNzUzNSAzMjAuODU5IDI2LjgxOUMzMjAuOTkyIDI0LjQ1NTMgMzIxLjI1NiAyMi4xMjQ0IDMyMS41NTMgMTkuNjYyM0MzMjIuODQyIDIxLjUzMzYgMzIzLjk2NSAyMy4xNDIyIDMyNS4yMjEgMjQuODQ5M0MzMjYuMjc4IDIzLjIwNzcgMzI3LjM2OCAyMS40MzQ4IDMyOC41NTggMTkuNjI5NEMzMjguODg4IDIyLjE1NyAzMjkuMTg2IDI0LjQ1NTMgMzI5LjM1MSAyNi44MTlDMzI5Ljc4IDI2LjcyMDYgMzMwLjA3OCAyNi43MjA2IDMzMC4yNzYgMjYuNzIwNkMzMzAuNTQgMjYuNzIwNiAzMzAuODA1IDI2LjcyMDYgMzMxLjIwMSAyNi44MTlWMjYuODE5Wk0zMzQuOTY4IDMyLjIwMjhDMzM0Ljk2OCAzMC4yOTg5IDMzMy40NDggMjkuNDQ1NCAzMzEuNTk4IDI5LjQ0NTRDMzMwLjc3MiAyOS40NDU0IDMyOS44OCAyOS41NDM1IDMyOS4yNTIgMjkuNTQzNUMzMjkuMDIxIDI5LjU0MzUgMzI4LjUyNSAyOS41NDM1IDMyNy45OTcgMjkuNDc3NkMzMjguMDMgMzAuNTI4MyAzMjguMDk2IDMxLjQxNDggMzI4LjA5NiAzMi40MzIyVjM2LjkyOTVDMzI4LjA5NiAzNy45MTQ4IDMyOC4wMyAzOC45OTggMzI3Ljk5NyA0MC4wMTU0QzMyOC40MjYgMzkuOTQ5NiAzMjguNzI0IDM5Ljk0OTYgMzI4LjkyMiAzOS45NDk2QzMyOS4xNTMgMzkuOTQ5NiAzMjkuNDg0IDM5Ljk0OTYgMzI5Ljg4IDQwLjAxNTRDMzI5LjgxNSAzOS4wMzE5IDMyOS43ODIgMzguMDQ2NSAzMjkuNzgxIDM3LjA2MDlWMzUuNDJDMzMwLjE0NSAzNS40NTI2IDMzMC41MDggMzUuNDUyNiAzMzAuOTA1IDM1LjQ1MjZDMzMyLjgyIDM1LjQ1MjYgMzM0Ljk2OCAzNC43MzA0IDMzNC45NjggMzIuMjAyOFYzMi4yMDI4Wk0zMjYuMDE0IDM2Ljg5NzNDMzI2LjAxNCAzNS4yNTU4IDMyNC45MjQgMzQuNTMzNiAzMjMuMDQgMzMuNzQ1NkMzMjEuNjg2IDMzLjE4OCAzMjAuOTkyIDMyLjY5NTYgMzIwLjk5MiAzMS42NDQ1QzMyMC45OTIgMzAuNjYgMzIxLjc1MiAzMC4wMzYyIDMyMy4wMDggMzAuMDM2MkMzMjMuODM0IDMwLjAzNjIgMzI0LjU2MSAzMC4zMzE1IDMyNS4yMjIgMzAuODU2OEMzMjUuMjg3IDMwLjQ5NTcgMzI1LjQ1MyAzMC4xMzQ3IDMyNS42NTEgMjkuODM5NEMzMjQuODU4IDI5LjQ3ODMgMzIzLjk5OSAyOS4zNDcgMzIzLjA3NCAyOS4zNDdDMzIwLjM2NSAyOS4zNDcgMzE5LjUwNSAzMC44OTA1IDMxOS41MDUgMzIuMjAzNUMzMTkuNTA1IDMzLjgxMTggMzIwLjI5OSAzNC41NjcyIDMyMi4zNDcgMzUuMzU1M0MzMjMuNjM2IDM1Ljg0NyAzMjQuMjk2IDM2LjQ3MTEgMzI0LjI5NiAzNy41NTQ0QzMyNC4yOTYgMzguNzAzNSAzMjMuNDM3IDM5LjQyNTcgMzIyLjI0OCAzOS40MjU3QzMyMS41NTQgMzkuNDI1NyAzMjAuMzY1IDM5LjA2NDYgMzE5LjUzOSAzOC4zMDk5QzMxOS41MDUgMzguNzM2MSAzMTkuNTA1IDM5LjEzMDQgMzE5LjM3MyAzOS40OTE1QzMxOS45MDIgMzkuNzU0NiAzMjEuMTI1IDQwLjE0NzkgMzIyLjIxNSA0MC4xNDc5QzMyNC45OSA0MC4xNDcxIDMyNi4wMTQgMzguNDM5NyAzMjYuMDE0IDM2Ljg5NzNWMzYuODk3M1pNMzc4LjE1MiAxNy45ODgyQzM3OC4xNTIgMTguOTczIDM3Ny40NTggMTkuNjYyMyAzNzYuNzY0IDIwLjIyMDJDMzc2LjMwMSAxOS41NjM5IDM3NS43NCAxOC42NzcxIDM3NS43NCAxNy45ODgyQzM3NS43NCAxNy4yMzMxIDM3Ni4yNjggMTYuODA2MSAzNzYuOTk1IDE2LjgwNjFDMzc3Ljk4NyAxNi44MDY1IDM3OC4xNTIgMTcuNjkyNiAzNzguMTUyIDE3Ljk4ODJWMTcuOTg4MlpNMzc4LjQ4MiAyNS4wMTMyQzM3OC4xMTkgMjUuMzQxNyAzNzcuMjYgMjUuOTY1NSAzNzYuNTMzIDI1Ljk2NTVDMzc1LjU3NCAyNS45NjU1IDM3NC40MTggMjUuMjc1OSAzNzQuNDE4IDIzLjc5ODZDMzc0LjQxOCAyMi40ODU1IDM3NS4yNzcgMjEuODk0NyAzNzUuODA2IDIxLjU2NjVDMzc3LjAyOCAyMy4yNDA2IDM3Ny4wOTUgMjMuMzM5MSAzNzguNDgyIDI1LjAxMzJaTTM3OS44MDQgMzIuMjAyOEMzNzkuODA0IDMzLjI1MzUgMzc5LjI3NSAzNC40MDI2IDM3Ny43NTUgMzQuNDAyNkMzNzcuMzI2IDM0LjQwMjYgMzc2LjkyOSAzNC40MDI2IDM3Ni41MzMgMzQuMzY5M1YzMC4yNjU2QzM3Ni45MjkgMzAuMTY3NiAzNzcuNDI1IDMwLjEzNDMgMzc3LjcyMiAzMC4xMzQzQzM3OS4wMTEgMzAuMTM0MyAzNzkuODA0IDMwLjg4OTggMzc5LjgwNCAzMi4yMDI4Wk0zMzguNjAyIDIyLjgxNDFDMzM3LjkwOSAyMi44NDY2IDMzNy41NDUgMjIuODQ2NiAzMzcuMDgyIDIyLjg0NjZDMzM2LjUyMSAyMi44NDY2IDMzNi4xOSAyMi44NDY2IDMzNS40NjMgMjIuODE0MUwzMzcuMDgyIDE5LjAwNkwzMzguNjAyIDIyLjgxNDFaTTMzMy4xNTEgMzIuMzAwOEMzMzMuMTUxIDMzLjgxMTEgMzMyLjI1OCAzNC43OTU5IDMzMC44MDUgMzQuNzk1OUMzMzAuNTA3IDM0Ljc5NTkgMzMwLjE3NyAzNC43OTU5IDMyOS43OCAzNC43MzAxVjMwLjIzMjdDMzMwLjI0MyAzMC4xNjY5IDMzMC42MzkgMzAuMTMzOSAzMzEuMDM2IDMwLjEzMzlDMzMyLjQyNCAzMC4xMzQzIDMzMy4xNTEgMzEuMDIxMSAzMzMuMTUxIDMyLjMwMDhaTTM2OS41MjggMjMuNjY3NkMzNjkuNTI4IDIyLjAyNiAzNjguNDM4IDIxLjMwMzkgMzY2LjU1NSAyMC41MTYyQzM2NS4yIDE5Ljk1ODMgMzY0LjUwNiAxOS40OTg4IDM2NC41MDYgMTguNDE1MUMzNjQuNTA2IDE3LjQ2MzIgMzY1LjI2NiAxNi44MDY1IDM2Ni41MjEgMTYuODA2NUMzNjcuMzQ4IDE2LjgwNjUgMzY4LjA3NSAxNy4xMDE3IDM2OC43MzUgMTcuNjI3NUMzNjguODAyIDE3LjI2NjQgMzY4Ljk2NyAxNi45MDQ5IDM2OS4xMzEgMTYuNjQyMkMzNjguMzcyIDE2LjI4MTEgMzY3LjQ3OSAxNi4xMTcyIDM2Ni41ODcgMTYuMTE3MkMzNjMuOTQ0IDE2LjExNzIgMzYyLjk4NiAxNy42NiAzNjIuOTg2IDE5LjAwNkMzNjIuOTg2IDIwLjU4MTcgMzYzLjgxMiAyMS4zMzY4IDM2NS44NjEgMjIuMTI0NEMzNjcuMTQ5IDIyLjYxNjkgMzY3LjgxIDIzLjI0MDYgMzY3LjgxIDI0LjM1NjhDMzY3LjgxIDI1LjQ3MyAzNjYuOTUxIDI2LjE5NTIgMzY1Ljc2MiAyNi4xOTUyQzM2NS4wMzUgMjYuMTk1MiAzNjMuODc5IDI1LjgzNDEgMzYzLjA1MiAyNS4xMTE5QzM2My4wMiAyNS41Mzg5IDM2Mi45ODYgMjUuOSAzNjIuODg3IDI2LjI2MTFDMzYzLjM4MyAyNi41MjM4IDM2NC42MDYgMjYuOTE3NCAzNjUuNzI5IDI2LjkxNzRDMzY4LjUwNCAyNi45MTc0IDM2OS41MjggMjUuMjQzMyAzNjkuNTI4IDIzLjY2NzZWMjMuNjY3NloiIGZpbGw9IiMwMzY1NTUiLz4NCjxwYXRoIGQ9Ik02NDAuNDE2IDIwLjU1NzNDNjM4LjY3MSAxOS44MzU0IDYzNy42MzEgMTkuNTU1MSA2MzYuNTk4IDE5LjU1NTFDNjM1LjUxNCAxOS41NTUxIDYzNC44MTkgMTkuOTE3IDYzNC44MTkgMjAuNDc2NUM2MzQuODE5IDIyLjE2NDUgNjQwLjk2MiAyMS42ODkzIDY0MC45NjIgMjUuNTkzNkM2NDAuOTYyIDI3Ljc0NjQgNjM5LjAyNCAyOC45OTc0IDYzNi4zMzIgMjguOTk3NEM2MzQuMjIgMjguOTk3NCA2MzMuMTggMjguNDg4IDYzMS45ODMgMjcuOTExNlYyNS40OTYyQzYzMy43MSAyNi41NjM1IDYzNC43NjggMjYuOTQwMSA2MzYuMTAxIDI2Ljk0MDFDNjM3LjI1NiAyNi45NDAxIDYzNy44NzkgMjYuNTYzNSA2MzcuODc5IDI1LjkwNjNDNjM3Ljg3OSAyNC4wNjg1IDYzMS43MzcgMjQuNzQxNSA2MzEuNzM3IDIwLjcyMTNDNjMxLjczNyAxOC43ODI3IDYzMy41MzQgMTcuNDk5IDYzNi4zMzIgMTcuNDk5QzYzNy42ODIgMTcuNDk5IDYzOC45MDEgMTcuNzYzNSA2NDAuNDE2IDE4LjM3MDdWMjAuNTU3M1pNNjQ5LjAxNiAyOC40ODQxQzY0Ny45OTIgMjguODMwNiA2NDcuMTI2IDI4Ljk5NTQgNjQ2LjI2MiAyOC45OTU0QzY0My40MDIgMjguOTk1NCA2NDEuNTUyIDI3LjQ0MjIgNjQxLjU1MiAyNS4wNzkyQzY0MS41NTIgMjIuNzU5NCA2NDMuNDczIDIxLjEyMDIgNjQ2LjE1NiAyMS4xMjAyQzY0Ni45ODUgMjEuMTIwMiA2NDguMDQ0IDIxLjMxODIgNjQ4Ljg5MSAyMS42MTIzVjIzLjM4ODFDNjQ4LjIyMSAyMy4wNTYyIDY0Ny40NDQgMjIuODc0MSA2NDYuODA5IDIyLjg3NDFDNjQ1LjI3MyAyMi44NzQxIDY0NC4yODYgMjMuNzM0MyA2NDQuMjg2IDI1LjA2MTlDNjQ0LjI4NiAyNi40MDggNjQ1LjI1NiAyNy4yOTQgNjQ2LjcyIDI3LjI5NEM2NDcuMzM3IDI3LjI5NCA2NDcuODg2IDI3LjE2MjMgNjQ5LjAxNiAyNi43NjhMNjQ5LjAxNiAyOC40ODQxWk02NzEuMzIgMjQuMjA5QzY3MS40MjUgMjMuMTU0OCA2NzIuMDgxIDIyLjU0NTcgNjczLjA4NyAyMi41NDU3QzY3NC4wNzYgMjIuNTQ1NyA2NzQuNzQ2IDIzLjE3MjEgNjc0Ljg1MiAyNC4yMDlINjcxLjMyWk02NzIuOTEgMjEuMTIyOUM2NzAuNCAyMS4xMjI5IDY2OC42MTQgMjIuNzc1NSA2NjguNjE0IDI1LjEwMTJDNjY4LjYxNCAyNy40NDQxIDY3MC40NzEgMjguOTk1NCA2NzMuMzM1IDI4Ljk5NTRDNjczLjk3IDI4Ljk5NTQgNjc1LjUwNCAyOC45OTU0IDY3Ni45NjYgMjcuOTg3VjI2LjUwNDJDNjc1Ljc2OSAyNy4yOTkzIDY3NC45NzcgMjcuNTczMSA2NzMuOTU1IDI3LjU3MzFDNjcyLjM0MSAyNy41NzMxIDY3MS4zNTQgMjYuNzk0OSA2NzEuMjY1IDI1LjQ2NjZINjc3LjExQzY3Ny4yMzIgMjIuNjkzOSA2NzUuMjc5IDIxLjEyMjkgNjcyLjkxIDIxLjEyMjlWMjEuMTIyOVpNNjc4LjA5OSAyOC44NTcySDY4MC42NTRWMjEuMjYyN0g2NzguMDk5VjI4Ljg1NzJaTTY4Ny43NjcgMjYuNzgxNUM2ODcuMjM0IDI3LjIyODEgNjg2Ljc5MiAyNy40MDcyIDY4Ni4yNDYgMjcuNDA3MkM2ODUuMDQzIDI3LjQwNzIgNjg0LjI4MSAyNi40ODM4IDY4NC4yODEgMjUuMTAwNEM2ODQuMjgxIDIzLjU4NDEgNjg1LjA0MyAyMi43MTAxIDY4Ni4zMzEgMjIuNzEwMUM2ODYuNzkyIDIyLjcxMDEgNjg3LjM5NCAyMi45MDggNjg3Ljc2NyAyMy4xNTU5VjI2Ljc4MTVaTTY4Ny43NjcgMTcuNjM5MVYyMS41OTU4QzY4Ny4wNzYgMjEuMjg0NyA2ODYuMzg4IDIxLjEyMDIgNjg1LjY0NCAyMS4xMjAyQzY4My4zMTMgMjEuMTIwMiA2ODEuNyAyMi43MjY2IDY4MS43IDI1LjA1MDdDNjgxLjcgMjcuMzI0OCA2ODMuMzEzIDI4Ljk5NzQgNjg1LjUgMjguOTk3NEM2ODYuMzY3IDI4Ljk5NzQgNjg3LjAzNyAyOC43ODU2IDY4Ny43NjcgMjguMjQzNVYyOC44NTQ5SDY5MC4zMjJWMTcuNjM5MUg2ODcuNzY3Wk02OTQuMTA1IDI0LjIwOUM2OTQuMjExIDIzLjE1NDggNjk0Ljg2NCAyMi41NDU3IDY5NS44NjggMjIuNTQ1N0M2OTYuODU4IDIyLjU0NTcgNjk3LjUzNSAyMy4xNzIxIDY5Ny42NDEgMjQuMjA5SDY5NC4xMDVaTTY5NS42OTQgMjEuMTIyOUM2OTMuMTg0IDIxLjEyMjkgNjkxLjQgMjIuNzc1NSA2OTEuNCAyNS4xMDEyQzY5MS40IDI3LjQ0NDEgNjkzLjI1OSAyOC45OTU0IDY5Ni4xMTkgMjguOTk1NEM2OTYuNzUzIDI4Ljk5NTQgNjk4LjI5IDI4Ljk5NTQgNjk5Ljc1NSAyNy45ODdWMjYuNTA0MkM2OTguNTU3IDI3LjI5OTMgNjk3Ljc2MyAyNy41NzMxIDY5Ni43MzYgMjcuNTczMUM2OTUuMTMxIDI3LjU3MzEgNjk0LjE0IDI2Ljc5NDkgNjk0LjA1MSAyNS40NjY2SDY5OS44OTRDNzAwLjAxNSAyMi42OTM5IDY5OC4wNjEgMjEuMTIyOSA2OTUuNjk0IDIxLjEyMjkiIGZpbGw9IiMwMDlFNEQiLz4NCjxwYXRoIGQ9Ik03MDMuNzIxIDIzLjQzNjhINzAzLjc1OEM3MDQuNTE3IDIxLjg1NjIgNzA1LjM2NiAyMS4xMTUgNzA2LjM1MiAyMS4xMTVDNzA2Ljg2MiAyMS4xMTUgNzA3LjMwMyAyMS4yOTY0IDcwOC4wNDQgMjEuODA3Nkw3MDcuMzQxIDIzLjkxMzNDNzA2LjY3IDIzLjUxODYgNzA2LjIyOSAyMy4zNTM1IDcwNS44MjMgMjMuMzUzNUM3MDQuODg2IDIzLjM1MzUgNzA0LjI4NiAyNC4xNzc1IDcwMy43MjEgMjUuNTcwNFYyOC44NDY2SDcwMS4xNjJWMjEuMjU0MUg3MDMuNzIxVjIzLjQzNjhaTTY4MC43NzUgMTguMDY3NEM2ODEuMDE1IDE4LjY1NzUgNjgwLjU4MyAxOS40ODA1IDY3OS44MTQgMTkuOTA0QzY3OS4wNDEgMjAuMzI3MSA2NzguMjI0IDIwLjE5MjggNjc3Ljk4NiAxOS42MDI3QzY3Ny43NDMgMTkuMDExNyA2NzguMTczIDE4LjE4NzcgNjc4Ljk0NSAxNy43NjY2QzY3OS43MTYgMTcuMzQxMSA2ODAuNTMzIDE3LjQ3NTkgNjgwLjc3NSAxOC4wNjc0WiIgZmlsbD0iIzAwOUU0RCIvPg0KPHBhdGggZD0iTTY1OC4yMiAyNC4wMjMxQzY1OC4yMiAyMS45NjUxIDY1Ni43MTkgMjEuMTIyNiA2NTUuMjM5IDIxLjEyMjZDNjU0LjIzMiAyMS4xMjI2IDY1My40MDQgMjEuNTE4NCA2NTIuNjY0IDIyLjM5MjFINjUyLjYyOVYxNy42MzkySDY1MC4wNzFWMjguODM1M0g2NTIuNjI5VjI0LjAyMzFDNjUzLjIyOCAyMy4yMTYxIDY1My43MzggMjIuODcxMSA2NTQuMzM4IDIyLjg3MTFDNjU1LjEzNCAyMi44NzExIDY1NS42NjIgMjMuMzk4NiA2NTUuNjYyIDI0LjUzMjlWMjcuMjAwOEM2NTYuNTIgMjYuNzg5NiA2NTcuMzkzIDI2LjUzNzQgNjU4LjIyIDI2LjQ0MzhWMjQuMDIzMVpNNjY0LjYzNiAyMS4xMTk5QzY2My41OTQgMjEuMTE5OSA2NjIuNzk5IDIxLjQ4MTEgNjYxLjk4NCAyMi4zNDkzVjIxLjI2MjRINjU5LjQyOFYyNi40MjM0QzY2MC4zMTMgMjYuNTA1OCA2NjEuNDQzIDI2Ljg4NDcgNjYxLjk4NCAyNy41MTA0VjIzLjk2MzRDNjYyLjY1NyAyMy4wMjMyIDY2My4xMzQgMjIuNzA5NyA2NjMuNzcgMjIuNzA5N0M2NjQuNDk0IDIyLjcwOTcgNjY1LjA0NSAyMy4xNTU2IDY2NS4wNDUgMjQuMjI2NFYyOC44MzcySDY2Ny42MDJWMjQuMDI4OUM2NjcuNjAyIDIxLjc5MjYgNjY1LjkwOCAyMS4xMTk5IDY2NC42MzYgMjEuMTE5OVYyMS4xMTk5Wk02NjkuMDE1IDMxLjAxODFINjY2LjA0M1YzMi45ODY0SDY2OC45MDlWMzMuODMxMkg2NjYuMDQzVjM1Ljg2MTlINjY5LjEwM1YzNi43MDU1SDY2NS4wNDZWMzAuMTc1Mkg2NjkuMDE1TDY2OS4wMTUgMzEuMDE4MVpNNjcxLjQ0MiAzNi43MDkzSDY3Mi4zNTJWMzAuMTczM0g2NzEuNDQyVjM2LjcwOTNaTTY3Ni44NTkgMzMuMDQ4NEM2NzcuNTA0IDMzLjA0ODQgNjc3LjkwNCAzMy40NjMxIDY3Ny45MzUgMzQuMTE0Mkg2NzUuNjE2QzY3NS43NDIgMzMuNDM0MiA2NzYuMTYxIDMzLjA0ODQgNjc2Ljg1OSAzMy4wNDg0Wk02NzUuNiAzNC42ODFINjc4Ljg0MkM2NzguODQyIDMzLjA4NjkgNjc4LjA2MiAzMi4zMTggNjc2LjgzOCAzMi4zMThDNjc1LjU2OSAzMi4zMTggNjc0LjY4OCAzMy4xOTI0IDY3NC42ODggMzQuNDk2OUM2NzQuNjg4IDM1LjY4OSA2NzUuNDg0IDM2Ljc4OTggNjc2LjkxNyAzNi43ODk4QzY3Ny42OTggMzYuNzg5OCA2NzguMjAzIDM2LjYyODEgNjc4Ljc2MyAzNi4yODJWMzUuNDU2QzY3OC4yMjIgMzUuNzg1NiA2NzcuNjk4IDM1Ljk3NTggNjc3LjE0NyAzNS45NzU4QzY3Ni4yNjUgMzUuOTc1OCA2NzUuNzQyIDM1LjUzNSA2NzUuNiAzNC42ODA2VjM0LjY4MVpNNjg0Ljc4NiAzMy41MzA5QzY4NC4yNjMgMzMuMTk2NiA2ODMuOTE0IDMzLjA5ODUgNjgzLjUxNSAzMy4wOTg1QzY4Mi42ODIgMzMuMDk4NSA2ODIuMTA1IDMzLjY5NDUgNjgyLjEwNSAzNC41NjdDNjgyLjEwNSAzNS40NTYgNjgyLjcxOSAzNS45OTE2IDY4My42NjggMzUuOTkxNkM2ODQuMDU4IDM1Ljk5MTYgNjg0LjQzIDM1Ljg5NzMgNjg0Ljg4OCAzNS43MDU5VjM2LjU0MjZDNjg0LjU4MiAzNi42Nzc0IDY4My45OTcgMzYuNzg5OCA2ODMuNTE1IDM2Ljc4OThDNjgyLjEzNiAzNi43ODk4IDY4MS4xOCAzNS45MDYyIDY4MS4xOCAzNC42NDMyQzY4MS4xOCAzMy4yMTc4IDY4Mi4wNTQgMzIuMzE4IDY4My40NTMgMzIuMzE4QzY4My45ODcgMzIuMzE4IDY4NC4zNDYgMzIuNDMzOSA2ODQuNzg3IDMyLjYxNDVMNjg0Ljc4NiAzMy41MzA5Wk02ODguOTM0IDMyLjQwMDRINjkwLjM5NVYzMy4xNjUxSDY4OC45MzRWMzUuMzc1MkM2ODguOTM0IDM1Ljg4MTEgNjg5LjMyNyAzNi4wMjc0IDY4OS41OTMgMzYuMDI3NEM2ODkuOTIyIDM2LjAyNzQgNjkwLjI2MiAzNS45MiA2OTAuNjMgMzUuNzA3OVYzNi41MDM3QzY5MC4zMSAzNi42Njc4IDY4OS44MiAzNi43ODk4IDY4OS41MTkgMzYuNzg5OEM2ODguNTI4IDM2Ljc4OTggNjg4LjAyNyAzNi4yMTYxIDY4OC4wMjcgMzUuNDM5MVYzMy4xNjUxSDY4Ny4yMjRWMzMuMDcwM0w2ODguOTM0IDMxLjUxMDJWMzIuNDAwNFpNNjkzLjg3NiAzMi40MDA0VjMzLjM5NjlINjkzLjg5NUM2OTQuMzU5IDMyLjYzNDUgNjk0LjggMzIuMzE4IDY5NS4yMyAzMi4zMThDNjk1LjYwMSAzMi4zMTggNjk1Ljk0NyAzMi40ODAxIDY5Ni4zMjkgMzIuODE2Nkw2OTUuODQ3IDMzLjU2NDRDNjk1LjU3IDMzLjMwOTEgNjk1LjIxMSAzMy4xMzMxIDY5NC45OTUgMzMuMTMzMUM2OTQuMzY4IDMzLjEzMzEgNjkzLjg3NiAzMy43MjY4IDY5My44NzYgMzQuNDYyNlYzNi43MDkzSDY5Mi45NjdWMzIuNDAwNEg2OTMuODc2Wk03MDUuNjU3IDMzLjUzMDlDNzA1LjEzMSAzMy4xOTY2IDcwNC43ODIgMzMuMDk4NSA3MDQuMzgxIDMzLjA5ODVDNzAzLjU0OSAzMy4wOTg1IDcwMi45NzcgMzMuNjk0NSA3MDIuOTc3IDM0LjU2N0M3MDIuOTc3IDM1LjQ1NiA3MDMuNTkyIDM1Ljk5MTYgNzA0LjUzNSAzNS45OTE2QzcwNC45MjUgMzUuOTkxNiA3MDUuMjk1IDM1Ljg5NzMgNzA1Ljc2IDM1LjcwNTlWMzYuNTQyNkM3MDUuNDQ3IDM2LjY3NzQgNzA0Ljg2MiAzNi43ODk4IDcwNC4zOCAzNi43ODk4QzcwMy4wMDQgMzYuNzg5OCA3MDIuMDQ0IDM1LjkwNjIgNzAyLjA0NCAzNC42NDMyQzcwMi4wNDQgMzMuMjE3OCA3MDIuOTIyIDMyLjMxOCA3MDQuMzIgMzIuMzE4QzcwNC44NTUgMzIuMzE4IDcwNS4yMTIgMzIuNDMzOSA3MDUuNjU3IDMyLjYxNDVMNzA1LjY1NyAzMy41MzA5Wk02OTguNzQyIDM2LjcwOTNINjk5LjY1MlYzMi40MDA4SDY5OC43NDJWMzYuNzA5M1oiIGZpbGw9IiMwMDlFNEQiLz4NCjxwYXRoIGQ9Ik02OTkuNjg0IDMwLjg1MjVDNjk5Ljc3MyAzMS4wNjA0IDY5OS42MTggMzEuMzU0NCA2OTkuMzQ0IDMxLjUwNDFDNjk5LjA2OCAzMS42NTQzIDY5OC43NzYgMzEuNjA2MiA2OTguNjkzIDMxLjM5NzhDNjk4LjYxIDMxLjE4NzQgNjk4Ljc2MSAzMC44OTU4IDY5OS4wMzggMzAuNzQ1NkM2OTkuMzExIDMwLjU5MzUgNjk5LjYwMSAzMC42NDIxIDY5OS42ODQgMzAuODUyNVYzMC44NTI1Wk02NTguOTQgMzEuMjAwOUM2NTguNzc5IDMxLjIwMDkgNjU4LjcxMSAzMS4yMjU1IDY1OC42NDYgMzEuMjkzOEM2NTguNjIgMzEuMzIwMyA2NTguNjEgMzEuMzQ3MiA2NTguNiAzMS40MDExTDY1Ny43ODQgMzQuMjg3QzY1Ny41OTMgMzUuMjk5MiA2NTYuMjU5IDM2LjMwOTkgNjU0LjUyMSAzNi4zMDk5SDY1Mi4xMDRMNjUyLjUyMyAzNC44MjdINjU0LjA3NkM2NTQuMjM0IDM0LjgyNyA2NTQuMzU4IDM0Ljc3MjEgNjU0LjQ2MiAzNC42NjQzQzY1NC41IDM0LjYyMjUgNjU0LjU1IDM0LjU1NyA2NTQuNTU2IDM0LjQ4OTZMNjU1LjIwMSAzMS45NjgxQzY1NS4zOTEgMzAuOTU1NSA2NTYuNTM4IDI5LjgzNjkgNjU4LjI3NiAyOS44MzY5SDY2MC43NTFMNjYwLjQzNSAzMS4yMDA5SDY1OC45NFpNNjU5LjQ5NyAzMi45NTk2TDY1OS43NzMgMzIuMDI1OUg2NjIuMjg4QzY2Mi41OTggMzAuNjcyIDY2Mi4zNTQgMjkuNDE3NyA2NjEuNDczIDI4LjU5NjFDNjU5LjY4OSAyNi45MzMyIDY1NS45NTcgMjcuNDk4MyA2NTMuMTc3IDI5Ljk3NzlDNjUyLjc0MyAzMC4zNjMgNjUyLjM3NiAzMC43NzkzIDY1Mi4wNDIgMzEuMjA0OEg2NTMuNTU2TDY1My4yMDQgMzIuMTQwNEg2NTEuMzk1QzY1MS4yMjIgMzIuNDM1NCA2NTEuMDYgMzIuNzI4MSA2NTAuOTM2IDMzLjAyNUg2NTMuMDgxTDY1Mi43MzcgMzMuOTYwN0g2NTAuNjNDNjUwLjI2OSAzNS4zOTAxIDY1MC40OTkgMzYuNzIzMyA2NTEuNDA2IDM3LjU2OTlDNjUzLjE2NyAzOS4yMTE2IDY1Ni44ODggMzguNjM0NiA2NTkuNjY3IDM2LjE1NTRDNjYwLjE1MyAzNS43MjQyIDY2MC41NTUgMzUuMjU4NyA2NjAuOTE4IDM0Ljc4MDhINjU4Ljk3M0w2NTkuMjY5IDMzLjg0NzFINjYxLjU0M0M2NjEuNzEgMzMuNTUwMSA2NjEuODYzIDMzLjI1NjUgNjYxLjk4MyAzMi45NTk2SDY1OS40OTdaIiBmaWxsPSIjMDA5RTREIi8+DQo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfNThfMTExKSI+DQo8cGF0aCBkPSJNNzc1LjA2OCA0MS4yMjc0Qzc2Ni4yODUgNDIuMDQ2MyA3NTcuMTMxIDQwLjc1NjQgNzU1Ljg0OCAzMy44MTlDNzU1LjIyMSAzMC4zOTkgNzU2Ljc2NSAyNi43NzI1IDc1OC44MSAyNC41MTg0VjIzLjMxNDhDNzU1LjEyNiAyNi41OCA3NTMuMTMgMzAuNzExNSA3NTQuMjggMzUuNTkyQzc1NS43NDggNDEuODUxOCA3NjMuNjAzIDQ1LjM5NjcgNzc1LjU5NSA0NC4yMTk1Qzc4MC4zNDIgNDMuNzU0NSA3ODYuNTUgNDIuMjEyIDc5MC44NjkgMzkuODE0NFYzNi40MTA5Qzc4Ni45NDkgMzguNzcxMyA3ODAuNDY4IDQwLjcyMTEgNzc1LjA2OCA0MS4yMjc0VjQxLjIyNzRaTTc5OC4yMDUgMjMuMjMzNUM3OTYuMTIyIDEyLjk1MzMgNzc2LjM3MyAxMi4zMDE2IDc2My42NDMgMjAuMTMzOFYyMC45OTg5Qzc3Ni4zNTkgMTQuMzkxNSA3OTQuMzk1IDE0LjQzMTcgNzk2LjAzNyAyMy45MDE2Qzc5Ni41ODkgMjcuMDM0MiA3OTQuODQzIDMwLjI5NzggNzkxLjcyMyAzMi4xNzdWMzQuNjM0MkM3OTUuNDc2IDMzLjI0MzIgNzk5LjMyNCAyOC43NDQyIDc5OC4yMDUgMjMuMjMzNVYyMy4yMzM1WiIgZmlsbD0iIzBFN0RDMiIvPg0KPHBhdGggZD0iTTc5MC4xNTkgMjEuNzM2OEg3ODcuODU2VjMyLjEwM0M3ODcuODU2IDMzLjMxNzkgNzg4LjQzNyAzNC4zNzQ0IDc5MC4xNTkgMzQuNTQzMlYyMS43MzY4Wk03NjIuNzM5IDI1LjUyMTdINzYwLjQzMkw3NjAuNDMxIDMyLjI5NDNDNzYwLjQzMSAzMy41MTM0IDc2MS4wMTMgMzQuNTY4OCA3NjIuNzM5IDM0LjczNDRWMjUuNTIxN1YyNS41MjE3Wk03NjAuNDMyIDIyLjA1MjFINzYyLjczMlYyNC4yNTg0SDc2MC40MzJWMjIuMDUyMVpNNzc2LjUzIDM0LjYyNzJDNzc0LjY2NiAzNC42MjcyIDc3My44NzcgMzMuMzE3NyA3NzMuODc3IDMyLjAyOFYyMy4wMzU1SDc3Ni4xNlYyNS41MjE3SDc3Ny44NzlWMjcuMzg1M0g3NzYuMTZWMzEuODg1NEM3NzYuMTYgMzIuNDExMyA3NzYuNDA3IDMyLjcwNDQgNzc2Ljk1IDMyLjcwNDRINzc3Ljg3OVYzNC42MjcyTDc3Ni41MyAzNC42MjcyVjM0LjYyNzJaTTc4MC43MzEgMzAuNzk2MUM3ODAuNzMxIDMxLjk3NjggNzgxLjQ2MSAzMi44NDQ2IDc4Mi43NTQgMzIuODQ0NkM3ODMuNzY2IDMyLjg0NDYgNzg0LjI2NiAzMi41NjA1IDc4NC44NSAzMS45NzY4TDc4Ni4yNjEgMzMuMzM0OUM3ODUuMzU3IDM0LjIzNzkgNzg0LjQwOSAzNC43ODcgNzgyLjczNyAzNC43ODdDNzgwLjU1MiAzNC43ODcgNzc4LjQ1OSAzMy41ODE5IDc3OC40NTkgMzAuMDY4NkM3NzguNDU5IDI3LjA2NTEgNzgwLjI4OCAyNS4zNjczIDc4Mi42ODYgMjUuMzY3M0M3ODUuMTI0IDI1LjM2NzMgNzg2LjUyNSAyNy4zNTQ5IDc4Ni41MjUgMjkuOTYzOVYzMC43OTYzSDc4MC43MzFWMzAuNzk2MVpNNzgyLjU4NiAyNy4yNzU2Qzc4MS44MDUgMjcuMjc1NiA3ODEuMjA0IDI3LjY4MjMgNzgwLjk1IDI4LjIzMDlDNzgwLjgwMiAyOC41NjA3IDc4MC43NDcgMjguODE3NyA3ODAuNzMxIDI5LjIyMjlINzg0LjI0OUM3ODQuMjA0IDI4LjIzMDkgNzgzLjc1OSAyNy4yNzU2IDc4Mi41ODYgMjcuMjc1NlpNNzY4LjkzOSAyNy4zODUzQzc2OS42MDggMjcuMzg1MyA3NjkuODg3IDI3LjcxOTggNzY5Ljg4NyAyOC4yNjI2VjM0LjY0MDZINzcyLjE3VjI4LjI0OTJDNzcyLjE3IDI2Ljk1NDIgNzcxLjQ4NyAyNS41MjQxIDc2OS40ODIgMjUuNTI0MUw3NjQuNzY2IDI1LjUyMTdWMzQuNjQwNkg3NjcuMDVWMjcuMzg1M0g3NjguOTM5VjI3LjM4NTNaTTc5Mi42MzcgMjMuNTg5MUM3OTIuMTI5IDIzLjU4OTEgNzkxLjcyNCAyMy4xNzU0IDc5MS43MjQgMjIuNjYyOUM3OTEuNzI0IDIyLjE1MjkgNzkyLjEyOSAyMS43MzY4IDc5Mi42MzcgMjEuNzM2OEM3OTMuMTQyIDIxLjczNjggNzkzLjU1NiAyMi4xNTI5IDc5My41NTYgMjIuNjYyOUM3OTMuNTU2IDIzLjE3NTQgNzkzLjE0MiAyMy41ODkxIDc5Mi42MzcgMjMuNTg5MVpNNzkyLjYzNyAyMS44OTEyQzc5Mi4yMTggMjEuODkxMiA3OTEuODgyIDIyLjI0MDcgNzkxLjg4MiAyMi42NjI5Qzc5MS44ODIgMjMuMDg3NiA3OTIuMjE4IDIzLjQzMDkgNzkyLjYzNyAyMy40MzA5Qzc5My4wNTUgMjMuNDMwOSA3OTMuNDAyIDIzLjA4NzYgNzkzLjQwMiAyMi42NjI5Qzc5My40MDIgMjIuMjQwNyA3OTMuMDU1IDIxLjg5MTIgNzkyLjYzNyAyMS44OTEyWk03OTMuMDQzIDIzLjIxOEg3OTIuODcyQzc5Mi44NjQgMjMuMjE3OSA3OTIuODU3IDIzLjIxNTcgNzkyLjg1MSAyMy4yMTE2Qzc5Mi44NDUgMjMuMjA3NSA3OTIuODQgMjMuMjAxNyA3OTIuODM3IDIzLjE5NDlMNzkyLjYwNSAyMi43OTdDNzkyLjU5OCAyMi43ODg1IDc5Mi41NzkgMjIuNzc4OCA3OTIuNTczIDIyLjc3ODhINzkyLjQ2N1YyMy4xNzU0Qzc5Mi40NjcgMjMuMTk1IDc5Mi40NTMgMjMuMjE4MSA3OTIuNDI4IDIzLjIxODFINzkyLjI3NEM3OTIuMjUxIDIzLjIxODEgNzkyLjIzNSAyMy4xOTUgNzkyLjIzNSAyMy4xNzU0VjIyLjE3NDlDNzkyLjIzNSAyMi4xMTY0IDc5Mi4yNTQgMjIuMDkyNCA3OTIuMzA1IDIyLjA4NUM3OTIuMzYxIDIyLjA3OSA3OTIuNTA1IDIyLjA3MTYgNzkyLjU4NiAyMi4wNzE2Qzc5Mi44NzIgMjIuMDcxNiA3OTMuMDM5IDIyLjE1NjYgNzkzLjAzOSAyMi40MjQ0VjIyLjQ0NEM3OTMuMDM5IDIyLjYwOTQgNzkyLjk1OSAyMi42OTk1IDc5Mi44MzMgMjIuNzM5N0w3OTMuMDc0IDIzLjE1NDdDNzkzLjA3OCAyMy4xNjQgNzkzLjA4IDIzLjE3MzkgNzkzLjA4IDIzLjE4NEM3OTMuMDggMjMuMTk5NyA3OTMuMDcyIDIzLjIxOCA3OTMuMDQzIDIzLjIxOFYyMy4yMThaTTc5Mi44MjEgMjIuNDI0NEM3OTIuODIxIDIyLjMxMjcgNzkyLjc1MiAyMi4yNzczIDc5Mi42MDUgMjIuMjc3M0g3OTIuNDU5VjIyLjU5NDdDNzkyLjQ4MiAyMi41OTQ3IDc5Mi41ODYgMjIuNTk5NiA3OTIuNjA1IDIyLjU5OTZDNzkyLjc1MiAyMi41OTk2IDc5Mi44MjEgMjIuNTUgNzkyLjgyMSAyMi40NDRWMjIuNDI0NFoiIGZpbGw9IiMwRTdEQzIiLz4NCjwvZz4NCjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMV81OF8xMTEpIj4NCjxwYXRoIGQ9Ik01MzMuNzczIDIwLjk5MTFDNTI5LjI2MyAyMC45OTExIDUyNS41OTkgMjQuNjU0NyA1MjUuNTk5IDI5LjE2NDRDNTI1LjU5OSAzMy42NzQxIDUyOS4yNjMgMzcuMzM3NyA1MzMuNzczIDM3LjMzNzdDNTM4LjI4MiAzNy4zMzc3IDU0MS45NDYgMzMuNjc0MSA1NDEuOTQ2IDI5LjE2NDRDNTQxLjk0NiAyNC42NTQ3IDUzOC4yODIgMjAuOTkxMSA1MzMuNzczIDIwLjk5MTFaTTUzMy43NzMgMzYuNTE4NkM1MjkuNzEzIDM2LjUxODYgNTI2LjQxOSAzMy4yMTUgNTI2LjQxOSAyOS4xNjQ0QzUyNi40MTkgMjUuMTEzNyA1MjkuNzEzIDIxLjgxMDIgNTMzLjc3MyAyMS44MTAyQzUzNy44MzIgMjEuODEwMiA1NDEuMTI3IDI1LjExMzcgNTQxLjEyNyAyOS4xNjQ0QzU0MS4xMjcgMzMuMjE1IDUzNy44MzIgMzYuNTE4NiA1MzMuNzczIDM2LjUxODZaIiBmaWxsPSJibGFjayIvPg0KPHBhdGggZD0iTTUzNi42OSAyMy45MjUyQzUzNi42NjMgMjMuOTA3MiA1MzYuNjI3IDIzLjg5ODIgNTM2LjU5MSAyMy44OTgyQzUzNi40ODMgMjMuODk4MiA1MzYuNDAyIDIzLjk3OTIgNTM2LjQwMiAyNC4wODczVjI2LjY0MzdDNTM2LjQwMiAyNi43MzM3IDUzNi4zMyAyNi44MDU3IDUzNi4yNCAyNi44MDU3SDUzMS4yOUM1MzEuMiAyNi44MDU3IDUzMS4xMzcgMjYuNzMzNyA1MzEuMTI4IDI2LjY0MzdWMjQuMDg3M0M1MzEuMTI4IDI0LjA1MTMgNTMxLjExOSAyNC4wMjQyIDUzMS4xMDEgMjMuOTg4MkM1MzEuMDQ3IDIzLjg5ODIgNTMwLjkzIDIzLjg3MTIgNTMwLjgzOSAyMy45MjUyQzUyOS4wMTIgMjUuMDUwNCA1MjcuOTA1IDI3LjAwMzcgNTI3LjkwNSAyOS4xNjQxQzUyNy45MDUgMzEuMzI0NCA1MjkuMDEyIDMzLjI3NzcgNTMwLjg1NyAzNC40MDI5QzUzMC44ODUgMzQuNDIwOSA1MzAuOTIxIDM0LjQyOTkgNTMwLjk1NyAzNC40Mjk5QzUzMS4wNjUgMzQuNDI5OSA1MzEuMTQ2IDM0LjM0ODkgNTMxLjE0NiAzNC4yNDA5VjMxLjY4NDVDNTMxLjE0NiAzMS41OTQ0IDUzMS4yMTggMzEuNTMxNCA1MzEuMzA4IDMxLjUyMjRINTM2LjI1OEM1MzYuMzQ4IDMxLjUyMjQgNTM2LjQyIDMxLjU5NDQgNTM2LjQyIDMxLjY4NDVWMzQuMjQwOUM1MzYuNDIgMzQuMjc2OSA1MzYuNDI5IDM0LjMwMzkgNTM2LjQ0NyAzNC4zMzk5QzUzNi41MDEgMzQuNDI5OSA1MzYuNjE4IDM0LjQ1NjkgNTM2LjcwOCAzNC40MDI5QzUzOC41NTQgMzMuMjc3NyA1MzkuNjYxIDMxLjMyNDQgNTM5LjY2MSAyOS4xNjQxQzUzOS42NjEgMjcuMDAzNyA1MzguNTM2IDI1LjA1MDQgNTM2LjY5IDIzLjkyNTJWMjMuOTI1MlpNNTMwLjE5MSAzMi4zNjg2TDUzMC4yMTggMzIuNjc0Nkw1MzAuMDIgMzIuNDMxNkM1MjguNDk5IDMwLjUxNDMgNTI4LjQ5OSAyNy44MDQ4IDUzMC4wMiAyNS44ODc1TDUzMC4xOTEgMjUuNjcxNUw1MzAuMjE4IDI1LjY0NDVMNTMwLjE5MSAyNS45NTk2QzUzMC4xNjQgMjYuMjExNiA1MzAuMTU1IDI2LjQ3MjYgNTMwLjE1NSAyNi43MzM3VjMxLjU4NTRDNTMwLjE1NSAzMS44NDY1IDUzMC4xNzMgMzIuMTA3NSA1MzAuMTkxIDMyLjM2ODZaTTUzNi40MDIgMzAuMzg4M0M1MzYuNDAyIDMwLjQ3ODMgNTM2LjMzIDMwLjU1MDMgNTM2LjI0IDMwLjU1MDNINTMxLjI5QzUzMS4yIDMwLjU1MDMgNTMxLjEzNyAzMC40NzgzIDUzMS4xMjggMzAuMzg4M1YyNy45Mzk5QzUzMS4xMjggMjcuODQ5OSA1MzEuMiAyNy43Nzc4IDUzMS4yOSAyNy43Nzc4SDUzNi4yNEM1MzYuMzMgMjcuNzc3OCA1MzYuNDAyIDI3Ljg0OTkgNTM2LjQwMiAyNy45Mzk5VjMwLjM4ODNaTTUzNy41MTkgMzIuNDMxNkw1MzcuMzIxIDMyLjY3NDZMNTM3LjM0OCAzMi4zNjg2QzUzNy4zNzUgMzIuMTE2NSA1MzcuMzg0IDMxLjg1NTUgNTM3LjM4NCAzMS41OTQ0VjI2LjczMzdDNTM3LjM4NCAyNi40NzI2IDUzNy4zNzUgMjYuMjExNiA1MzcuMzQ4IDI1Ljk1OTZMNTM3LjMzOSAyNS44MjQ1TDUzNy4zMyAyNS42ODA1VjI1LjY0NDVMNTM3LjUxOSAyNS44ODc1QzUzOC4yNTcgMjYuODA1NyA1MzguNjYyIDI3Ljk3NTkgNTM4LjY2MiAyOS4xNTUxQzUzOC42NjIgMzAuMzM0MiA1MzguMjU3IDMxLjUxMzQgNTM3LjUxOSAzMi40MzE2VjMyLjQzMTZaIiBmaWxsPSJibGFjayIvPg0KPHBhdGggZD0iTTU1NC4yNzYgMjkuMDIwMkM1NTQuMjMxIDI5LjAwMjIgNTU0LjE3NyAyOC45ODQyIDU1NC4xNzcgMjguOTMwMkM1NTQuMTc3IDI4Ljg5NDIgNTU0LjE5NSAyOC44NjcyIDU1NC4yMzEgMjguODQ5MkM1NTQuMjk0IDI4LjgyMjIgNTU1Ljg1MSAyOC4yNjQxIDU1NS44NTEgMjYuNDI3OEM1NTUuODUxIDI0LjM4NDUgNTU0LjQ3NCAyMy4xNjkzIDU1Mi4xNTIgMjMuMTY5M0g1NDYuNTI2VjM1LjE3NzJINTUyLjY2NUM1NTQuNDU2IDM1LjE3NzIgNTU2LjM4MiAzMy45MDggNTU2LjM4MiAzMS44NjQ2QzU1Ni4zODIgMjkuOTExMyA1NTQuOTA2IDI5LjIyNzIgNTU0LjI3NiAyOS4wMjAyVjI5LjAyMDJaTTU0OS4zNjEgMjUuNjI2N0M1NDkuMzYxIDI1LjU4MTcgNTQ5LjM5NyAyNS41NDU2IDU0OS40NDIgMjUuNTQ1Nkg1NTEuNjc1QzU1Mi40MTMgMjUuNTQ1NiA1NTIuOTE3IDI2LjA0MDcgNTUyLjkxNyAyNi43Nzg4QzU1Mi45MTcgMjcuMzU0OSA1NTIuNDY3IDI3Ljk3NiA1NTEuNjIxIDI3Ljk3Nkg1NDkuNDQyQzU0OS4zOTcgMjcuOTc2IDU0OS4zNjEgMjcuOTQgNTQ5LjM2MSAyNy44OTVWMjUuNjI2N1pNNTUxLjY3NSAzMi44MDk4SDU0OS40NDJDNTQ5LjM5NyAzMi44MDk4IDU0OS4zNjEgMzIuNzczOCA1NDkuMzYxIDMyLjcyODhWMzAuMzM0NEM1NDkuMzYxIDMwLjI4OTQgNTQ5LjM5NyAzMC4yNTM0IDU0OS40NDIgMzAuMjUzNEg1NTEuNjIxQzU1Mi42OTIgMzAuMjUzNCA1NTMuMzA0IDMwLjcxMjUgNTUzLjMwNCAzMS41MjI2QzU1My4zMDQgMzIuMzU5NyA1NTIuNzM3IDMyLjgwOTggNTUxLjY3NSAzMi44MDk4VjMyLjgwOThaTTU3NS4zODQgMjcuOTQ5TDU3NC45NTIgMjcuODU5QzU3My45OCAyNy42NTIgNTczLjAzNSAyNy4zOTA5IDU3My4wMzUgMjYuNTUzOEM1NzMuMDM1IDI1LjcxNjcgNTczLjgxOCAyNS4zMzg2IDU3NC41OTIgMjUuMzM4NkM1NzUuNTAxIDI1LjMzODYgNTc2LjQwMSAyNS43NDM3IDU3Ny4wODYgMjYuNDQ1OEw1NzguODY4IDI0LjY4MTVDNTc4LjEwMyAyMy44MzU0IDU3Ni43NDQgMjIuODYzMiA1NzQuNTQ3IDIyLjg2MzJDNTcxLjkwMSAyMi44NjMyIDU3MC4xMTggMjQuMzY2NSA1NzAuMTE4IDI2LjYwNzhDNTcwLjExOCAyOC45NzUyIDU3MS45ODIgMjkuODY2MyA1NzMuNTQ4IDMwLjE5OTRMNTczLjk3MSAzMC4yODk0QzU3NS40OTIgMzAuNjEzNSA1NzYuMjEyIDMwLjg1NjUgNTc2LjIxMiAzMS43MjA2QzU3Ni4yMTIgMzIuNDk0NyA1NzUuNTE5IDMzLjAwNzggNTc0LjQ5MyAzMy4wMDc4QzU3My4yODcgMzMuMDA3OCA1NzIuMjE2IDMyLjQ3NjcgNTcxLjQwNiAzMS40Nzc2TDU2OS41NzggMzMuMjY4OUM1NzAuNTUxIDM0LjQyMTEgNTcxLjgzOCAzNS40NjUyIDU3NC41MjkgMzUuNDY1MkM1NzYuODI1IDM1LjQ2NTIgNTc5LjE1NiAzNC4xMzMgNTc5LjE1NiAzMS41NzY2QzU3OS4xNDcgMjguOTU3MiA1NzcuMzY1IDI4LjM2MzEgNTc1LjM4NCAyNy45NDlWMjcuOTQ5Wk01OTkuMTAzIDIzLjE2OTNWMjcuNTYyQzU5OS4xMDMgMjcuNjA3IDU5OS4wNjcgMjcuNjQzIDU5OS4wMjIgMjcuNjQzSDU5NS4zMzFDNTk1LjI4NiAyNy42NDMgNTk1LjI1IDI3LjYwNyA1OTUuMjUgMjcuNTYyVjIzLjE2OTNINTkyLjIyNlYzNS4xNzcySDU5NS4yNVYzMC40NjA0QzU5NS4yNSAzMC40MTU0IDU5NS4yODYgMzAuMzc5NCA1OTUuMzMxIDMwLjM3OTRINTk5LjAyMkM1OTkuMDY3IDMwLjM3OTQgNTk5LjEwMyAzMC40MTU0IDU5OS4xMDMgMzAuNDYwNFYzNS4xNzcySDYwMi4xNDZWMjMuMTY5M0g1OTkuMTAzWk01ODYuMTQxIDMyLjcxOThDNTg0Ljc4MiAzMi43MTk4IDU4My4zMTUgMzEuNTg1NiA1ODMuMzE1IDI5LjA5MjJDNTgzLjMxNSAyNi44MTQ4IDU4NC42OTIgMjUuNjI2NyA1ODYuMDUxIDI1LjYyNjdDNTg3LjA0MSAyNS42MjY3IDU4Ny43MzQgMjYuMDQwNyA1ODguMjgzIDI2Ljk1ODlMNTkwLjYwNiAyNS40MTk2QzU4OS40MTggMjMuNjczMyA1ODguMDA0IDIyLjg4MTIgNTg2LjAzMyAyMi44ODEyQzU4Mi4xNzEgMjIuODgxMiA1ODAuNDQzIDI2LjAwNDcgNTgwLjQ0MyAyOS4wOTIyQzU4MC40NDMgMzIuODQ1OCA1ODIuNzI5IDM1LjQ2NTIgNTg1Ljk5NyAzNS40NjUyQzU4OC40MjcgMzUuNDY1MiA1ODkuNTM1IDM0LjU3NDEgNTkwLjY5NiAzMi45MjY4TDU4OC4zNTUgMzEuMzUxNkM1ODcuODMzIDMyLjE5NzcgNTg3LjI2NiAzMi43MTk4IDU4Ni4xNDEgMzIuNzE5OFpNNTYzLjE3OCAyMi44NjMyQzU1OS44NzUgMjIuODYzMiA1NTcuNjYxIDI1LjM5MjYgNTU3LjY2MSAyOS4xNjQyQzU1Ny42NjEgMzIuOTM1OCA1NTkuODc1IDM1LjQ2NTIgNTYzLjE3OCAzNS40NjUyQzU2Ni40ODIgMzUuNDY1MiA1NjguNjk2IDMyLjkzNTggNTY4LjY5NiAyOS4xNjQyQzU2OC42OTYgMjUuMzkyNiA1NjYuNDgyIDIyLjg2MzIgNTYzLjE3OCAyMi44NjMyVjIyLjg2MzJaTTU2My4xNzggMzIuNzE5OEM1NjEuNTU4IDMyLjcxOTggNTYwLjUxNCAzMS4zMjQ2IDU2MC41MTQgMjkuMTY0MkM1NjAuNTE0IDI3LjAxMjkgNTYxLjU1OCAyNS42MjY3IDU2My4xNzggMjUuNjI2N0M1NjQuODA4IDI1LjYyNjcgNTY1Ljg2MSAyNy4wMTI5IDU2NS44NjEgMjkuMTY0MkM1NjUuODYxIDMxLjMyNDYgNTY0LjgwOCAzMi43MTk4IDU2My4xNzggMzIuNzE5OFoiIGZpbGw9IiNGODAwMDAiLz4NCjwvZz4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTQ2LjM0NCAyMi4xODExQzE0Ny41OTUgMjIuMjg1NCAxNDguODQ1IDIxLjU1NTMgMTQ5LjYyNyAyMC42Mjk4QzE1MC4zOTUgMTkuNjc4MSAxNTAuOTAzIDE4LjQwMDUgMTUwLjc3MyAxNy4wOTY5QzE0OS42NjYgMTcuMTQ5MSAxNDguMjk4IDE3LjgyNjkgMTQ3LjUxNyAxOC43Nzg2QzE0Ni44IDE5LjU5OTkgMTQ2LjE4OCAyMC45Mjk2IDE0Ni4zNDQgMjIuMTgxMVpNMTQ3Ljg0MSAyMy4wNzk3QzE0OC42NTMgMjIuNzYwNiAxNDkuNjU4IDIyLjM2NTYgMTUwLjc2IDIyLjQyOTFDMTUxLjQ2MyAyMi40ODEyIDE1My40OTUgMjIuNjg5OCAxNTQuNzk4IDI0LjYxOTJDMTU0Ljc5MiAyNC42MjM3IDE1NC43NzggMjQuNjMyMyAxNTQuNzU5IDI0LjY0NUMxNTQuNDM2IDI0Ljg1NDggMTUyLjM5IDI2LjE4NzEgMTUyLjQxNCAyOC44MTY5QzE1Mi40MzkgMzEuOTQ5OSAxNTQuOTg4IDMzLjExODMgMTU1LjMyMiAzMy4yNzExQzE1NS4zNDQgMzMuMjgxMSAxNTUuMzU2IDMzLjI4NjcgMTU1LjM1OCAzMy4yODgzQzE1NS4zNTYgMzMuMjkyNiAxNTUuMzU0IDMzLjMwMSAxNTUuMzUgMzMuMzEzM0MxNTUuMjgzIDMzLjUyODggMTU0Ljg0NSAzNC45NDg5IDE1My44NDcgMzYuNDA0QzE1Mi45MjIgMzcuNzU5OCAxNTEuOTcxIDM5LjA4OTUgMTUwLjQ2IDM5LjExNTZDMTQ5Ljc0OSAzOS4xMjgzIDE0OS4yNyAzOC45MjExIDE0OC43NzIgMzguNzA1NEMxNDguMjQ3IDM4LjQ3ODUgMTQ3LjcwMSAzOC4yNDIyIDE0Ni44NCAzOC4yNDIyQzE0NS45NDcgMzguMjQyMiAxNDUuMzc2IDM4LjQ4NDggMTQ0LjgyNiAzOC43MTg0QzE0NC4zNDggMzguOTIxNCAxNDMuODg3IDM5LjExNzQgMTQzLjI0NSAzOS4xNDE3QzE0MS43ODYgMzkuMTkzOCAxNDAuNjc5IDM3LjcwNzcgMTM5Ljc1NCAzNi4zNTE5QzEzNy44NjYgMzMuNjE0MyAxMzYuNDIgMjguNjM0NCAxMzguMzc0IDI1LjI3MUMxMzkuMzI1IDIzLjU4OTMgMTQxLjA1NyAyMi41MzM0IDE0Mi45MTkgMjIuNTA3M0MxNDMuNzMyIDIyLjQ5MjUgMTQ0LjUwNyAyMi44MDA2IDE0NS4xODQgMjMuMDcwMUMxNDUuNzAyIDIzLjI3NTggMTQ2LjE2MiAyMy40NTg5IDE0Ni41NCAyMy40NTg5QzE0Ni44NzcgMjMuNDU4OSAxNDcuMzE5IDIzLjI4NTEgMTQ3Ljg0MSAyMy4wNzk3WiIgZmlsbD0iYmxhY2siLz4NCjxwYXRoIGQ9Ik0zNi44NTg3IDM3LjUyNDFIMzEuOTg3NEwzNS4wMzQyIDE5LjY2NjhIMzkuOTA1MkwzNi44NTg3IDM3LjUyNDFaIiBmaWxsPSIjMDA1NzlGIi8+DQo8cGF0aCBkPSJNNTQuNTE1NyAyMC4xMDQxQzUzLjU1NDkgMTkuNzQyOCA1Mi4wMzA5IDE5LjM0MzggNTAuMTQ2NiAxOS4zNDM4QzQ1LjMzNjEgMTkuMzQzOCA0MS45NDg2IDIxLjc3NTMgNDEuOTI3OCAyNS4yNTE2QzQxLjg4NzggMjcuODE2NSA0NC4zNTMxIDI5LjI0MSA0Ni4xOTcgMzAuMDk2MkM0OC4wODE2IDMwLjk3MDEgNDguNzIyMyAzMS41NDA1IDQ4LjcyMjMgMzIuMzE5NEM0OC43MDMxIDMzLjUxNTcgNDcuMTk5NCAzNC4wNjcyIDQ1Ljc5NjkgMzQuMDY3MkM0My44NTIxIDM0LjA2NzIgNDIuODEgMzMuNzgyOSA0MS4yMjY0IDMzLjExNzNMNDAuNTg1IDMyLjgzMkwzOS45MDMzIDM2Ljg0MDZDNDEuMDQ1OCAzNy4zMzM5IDQzLjE1MDcgMzcuNzcxNyA0NS4zMzYxIDM3Ljc5MDlDNTAuNDQ3MyAzNy43OTA5IDUzLjc3NDkgMzUuMzk3MSA1My44MTQzIDMxLjY5MjVDNTMuODMzOCAyOS42NTk3IDUyLjUzMiAyOC4xMDIgNDkuNzI1NCAyNi44MjkyQzQ4LjAyMTcgMjYuMDEyMSA0Ni45NzgzIDI1LjQ2MTIgNDYuOTc4MyAyNC42MjUyQzQ2Ljk5ODMgMjMuODY1MiA0Ny44NjA4IDIzLjA4NjggNDkuNzg0IDIzLjA4NjhDNTEuMzY3NyAyMy4wNDg2IDUyLjUzMTIgMjMuNDA5NCA1My40MTI2IDIzLjc3MDVMNTMuODUzMiAyMy45NjAxTDU0LjUxNTcgMjAuMTA0MVoiIGZpbGw9IiMwMDU3OUYiLz4NCjxwYXRoIGQ9Ik02MC45OTI0IDMxLjE5NzlDNjEuMzkzNiAzMC4xNzIgNjIuOTM3MiAyNi4yMDE2IDYyLjkzNzIgMjYuMjAxNkM2Mi45MTcgMjYuMjM5NyA2My4zMzc2IDI1LjE1NjggNjMuNTc4MSAyNC40OTE5TDYzLjkxODYgMjYuMDMwNkM2My45MTg2IDI2LjAzMDYgNjQuODQxIDMwLjMwNTEgNjUuMDQxNCAzMS4xOTc5QzY0LjI4IDMxLjE5NzkgNjEuOTU0NiAzMS4xOTc5IDYwLjk5MjQgMzEuMTk3OVpNNjcuMDA1NCAxOS42NjY4SDYzLjIzNzRDNjIuMDc1NSAxOS42NjY4IDYxLjE5MjcgMTkuOTg5NSA2MC42OTE0IDIxLjE0ODRMNTMuNDU1OCAzNy41MjM5SDU4LjU2NzFDNTguNTY3MSAzNy41MjM5IDU5LjQwODUgMzUuMzE5OSA1OS41ODk0IDM0Ljg0NTJDNjAuMTUwMSAzNC44NDUyIDY1LjEyMjMgMzQuODQ1MiA2NS44NDM3IDM0Ljg0NTJDNjUuOTgzNSAzNS40NzIxIDY2LjQyNDkgMzcuNTIzOSA2Ni40MjQ5IDM3LjUyMzlINzAuOTM1Mkw2Ny4wMDU0IDE5LjY2NjhWMTkuNjY2OFoiIGZpbGw9IiMwMDU3OUYiLz4NCjxwYXRoIGQ9Ik0yNy45MTggMTkuNjY2OEwyMy4xNDc1IDMxLjg0MzhMMjIuNjI2MiAyOS4zNzQxQzIxLjc0NDIgMjYuNTI0NSAxOC45NzgxIDIzLjQyODQgMTUuODkxNCAyMS44ODlMMjAuMjYxIDM3LjUwNTJIMjUuNDEyMkwzMy4wNjkgMTkuNjY2OEgyNy45MThWMTkuNjY2OFoiIGZpbGw9IiMwMDU3OUYiLz4NCjxwYXRoIGQ9Ik0xOC43MTg0IDE5LjY2NjhIMTAuODgxMUwxMC44MDA5IDIwLjAyNzZDMTYuOTE0NSAyMS41MDk1IDIwLjk2MzUgMjUuMDgxNSAyMi42MjcgMjkuMzc0OUwyMC45MjMyIDIxLjE2NzlDMjAuNjQyNyAyMC4wMjc0IDE5Ljc4MDcgMTkuNzA0NCAxOC43MTg0IDE5LjY2NjhaIiBmaWxsPSIjRkFBNjFBIi8+DQo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDJfNThfMTExKSI+DQo8cGF0aCBkPSJNMjIxLjE1OCAxNy40OTlWMTguOTM1NkgyMzEuMzA2VjE3LjQ5OUgyMjEuMTU4Wk0yMzIuNzQ0IDE3LjQ5OVYxOC45MzU2SDI0Ny4yMDZDMjQ3LjIwNiAxOC45MzU2IDI0NS43MjkgMTcuNDk5IDI0My43NzMgMTcuNDk5SDIzMi43NDRaTTI1MC4wNDMgMTcuNDk5VjE4LjkzNTZIMjU4Ljc5M0wyNTguMjczIDE3LjQ5OUgyNTAuMDQzWk0yNjUuMDY1IDE3LjQ5OUwyNjQuNTQ2IDE4LjkzNTZIMjczLjIxNlYxNy40OTlIMjY1LjA2NVpNMjIxLjE1OCAyMC4yOTI5VjIxLjcyOTZIMjMxLjMwNlYyMC4yOTI5SDIyMS4xNThaTTIzMi43NDQgMjAuMjk1VjIxLjcyOTdIMjQ4Ljg4NEMyNDguODg0IDIxLjcyOTcgMjQ4LjY5NiAyMC42MjM5IDI0OC4zNjcgMjAuMjk1SDIzMi43NDRaTTI1MC4wNDMgMjAuMjk1VjIxLjcyOTdIMjU5Ljc1MkwyNTkuMjcxIDIwLjI5NUgyNTAuMDQzWk0yNjQuMDI3IDIwLjI5NUwyNjMuNTQ2IDIxLjcyOTdIMjczLjIxNlYyMC4yOTVIMjY0LjAyN1YyMC4yOTVaTTIyNC4wNzQgMjMuMDg2OVYyNC41MjU3SDIyOC40NjlWMjMuMDg2OUgyMjQuMDc0VjIzLjA4NjlaTTIzNS42NjEgMjMuMDg2OVYyNC41MjU3SDI0MC4wNTZWMjMuMDg2OUgyMzUuNjYxVjIzLjA4NjlaTTI0NC4zMzEgMjMuMDg2OVYyNC41MjU3SDI0OC43MjZDMjQ4LjcyNiAyNC41MjU3IDI0OS4wMDUgMjMuNzY1OSAyNDkuMDA1IDIzLjA4NjlIMjQ0LjMzMVYyMy4wODY5Wk0yNTIuOTYgMjMuMDg2OVYyNC41MjU3SDI2MC43NTJMMjYwLjIzMiAyMy4wODY5SDI1Mi45NlYyMy4wODY5Wk0yNjMuMDY5IDIzLjA4NjlMMjYyLjU0OCAyNC41MjU3SDI3MC4zNzlWMjMuMDg2OUgyNjMuMDY5VjIzLjA4NjlaTTIyNC4wNzQgMjUuODgzVjI3LjMxOTdIMjI4LjQ2OVYyNS44ODNIMjI0LjA3NFYyNS44ODNaTTIzNS42NjEgMjUuODgzVjI3LjMxOTdIMjQ2Ljg4N0MyNDYuODg3IDI3LjMxOTcgMjQ3LjgyNiAyNi41ODI1IDI0OC4xMjUgMjUuODgzSDIzNS42NjFaTTI1Mi45NiAyNS44ODNWMjcuMzE5N0gyNTcuMzU1VjI2LjUyTDI1Ny42MzQgMjcuMzE5N0gyNjUuNjg0TDI2NS45ODQgMjYuNTJWMjcuMzE5N0gyNzAuMzc5VjI1Ljg4M0gyNjIuMTI5TDI2MS42OTEgMjcuMDk5OUwyNjEuMjUxIDI1Ljg4M0gyNTIuOTZaTTIyNC4wNzQgMjguNjc3VjMwLjExMzdIMjI4LjQ2OVYyOC42NzdIMjI0LjA3NFpNMjM1LjY2MSAyOC42NzdWMzAuMTEzN0gyNDguMTI1QzI0Ny44MjYgMjkuNDE2NSAyNDYuODg3IDI4LjY3NyAyNDYuODg3IDI4LjY3N0gyMzUuNjYxWk0yNTIuOTYgMjguNjc3VjMwLjExMzdIMjU3LjM1NVYyOC42NzdIMjUyLjk2Wk0yNTguMTUzIDI4LjY3N0wyNTguNjg1IDMwLjExMzdIMjY0LjcyMUwyNjUuMjI2IDI4LjY3N0gyNTguMTUzWk0yNjUuOTg0IDI4LjY3N1YzMC4xMTM3SDI3MC4zNzlWMjguNjc3SDI2NS45ODRaTTIyNC4wNzQgMzEuNDcxVjMyLjkwNzZIMjI4LjQ2OVYzMS40NzFIMjI0LjA3NFpNMjM1LjY2MSAzMS40NzFWMzIuOTA3NkgyNDAuMDU2VjMxLjQ3MUgyMzUuNjYxWk0yNDQuMzMxIDMxLjQ3MVYzMi45MDc2SDI0OS4wMDVDMjQ5LjAwNSAzMi4yMjk2IDI0OC43MjYgMzEuNDcxIDI0OC43MjYgMzEuNDcxSDI0NC4zMzFWMzEuNDcxWk0yNTIuOTYgMzEuNDcxVjMyLjkwNzZIMjU3LjM1NVYzMS40NzFIMjUyLjk2Wk0yNTkuMTUxIDMxLjQ3MUwyNTkuNjY2IDMyLjkwNzZIMjYzLjcxM0wyNjQuMjMyIDMxLjQ3MUgyNTkuMTUxWk0yNjUuOTg0IDMxLjQ3MVYzMi45MDc2SDI3MC4zNzlWMzEuNDcxSDI2NS45ODRaTTIyMS4yMzcgMzQuMjY1VjM1LjcwMzdIMjMxLjM4NlYzNC4yNjVIMjIxLjIzN1pNMjMyLjc0NCAzNC4yNjVWMzUuNzAzN0gyNDguMzY3QzI0OC42OTYgMzUuMzc0MyAyNDguODg0IDM0LjI2NSAyNDguODg0IDM0LjI2NUgyMzIuNzQ0VjM0LjI2NVpNMjUwLjEyMyAzNC4yNjVWMzUuNzAzN0gyNTcuMzU1VjM0LjI2NUgyNTAuMTIzWk0yNjAuMTUxIDM0LjI2NUwyNjAuNjggMzUuNzAzN0gyNjIuNzM5TDI2My4yMzYgMzQuMjY1SDI2MC4xNTFaTTI2NS45ODQgMzQuMjY1VjM1LjcwMzdIMjczLjI5NVYzNC4yNjVIMjY1Ljk4NFpNMjIxLjIzNyAzNy4wNjFWMzguNDk3N0gyMzEuMzg2VjM3LjA2MUgyMjEuMjM3Wk0yMzIuNzQ0IDM3LjA2MVYzOC40OTU2SDI0My43NzNDMjQ1LjcyOSAzOC40OTU2IDI0Ny4yMDYgMzcuMDYxIDI0Ny4yMDYgMzcuMDYxSDIzMi43NDRaTTI1MC4xMjMgMzcuMDYxVjM4LjQ5NzdIMjU3LjM1NVYzNy4wNjFIMjUwLjEyM1pNMjYxLjE1NSAzNy4wNjFMMjYxLjY2NCAzOC40OTM2TDI2MS43NTIgMzguNDk1NkwyNjIuMjY5IDM3LjA2MUgyNjEuMTU1VjM3LjA2MVpNMjY1Ljk4NCAzNy4wNjFWMzguNDk3N0gyNzMuMjk1VjM3LjA2MUgyNjUuOTg0WiIgZmlsbD0iIzFGNzBDMSIvPg0KPC9nPg0KPGRlZnM+DQo8Y2xpcFBhdGggaWQ9ImNsaXAwXzU4XzExMSI+DQo8cmVjdCB3aWR0aD0iNDQuNDQ3MyIgaGVpZ2h0PSIyOS42MzE1IiBmaWxsPSJ3aGl0ZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNzUzLjk1NSAxNC44MTU1KSIvPg0KPC9jbGlwUGF0aD4NCjxjbGlwUGF0aCBpZD0iY2xpcDFfNThfMTExIj4NCjxyZWN0IHdpZHRoPSI3Ni41NDgxIiBoZWlnaHQ9IjE2LjM1MDciIGZpbGw9IndoaXRlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1MjUuNTk5IDIwLjk4ODkpIi8+DQo8L2NsaXBQYXRoPg0KPGNsaXBQYXRoIGlkPSJjbGlwMl81OF8xMTEiPg0KPHJlY3Qgd2lkdGg9IjUyLjEzNzIiIGhlaWdodD0iMjAuOTk4NyIgZmlsbD0id2hpdGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIyMS4xNTggMTcuNDk5KSIvPg0KPC9jbGlwUGF0aD4NCjwvZGVmcz4NCjwvc3ZnPg0K" style="\n            width: 742.5px;\n            position: relative;\n            top: 107px;\n            left: 32px;\n            ">\n            <a href='+et+' style="\n        float: left;\n        border-radius: 56px;\n        background: #0D6EFD;\n        padding-top: 8px;\n        width: 280px;\n        height: 38px;\n        text-align: center;\n        position: relative;\n        top: 127px;\n        left: 274px;\n        font-size: 16px;\n        color: white;\n        text-decoration: none;\n        letter-spacing: 0.02em;\n    ">Claim your FREE account</a>\n            <div style="\n    font-size: 14px;\n    position: relative;\n    top: 180px;\n    left: 19px;\n    letter-spacing: 0.02em;\n    font-weight: 500;\n    line-height: 125%;\n">have a Syncfusion account? <a href="https://www.syncfusion.com/account/login?ReturnUrl=/account/login" style="text-decoration: none;\ncolor: #0D6EFD;\nfont-weight: 500;">Sign In</a></div>\n        </div>\n    </div>';if("undefined"!=typeof document&&!f(document)){var t=de("div",{innerHTML:e});document.body.appendChild(t)}},ut=(ht=function(e,t){return(ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}ht(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),ft=function(e,t,s,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,s,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,s,a):o(t,s))||a);return r>3&&a&&Object.defineProperty(t,s,a),a},gt=0,mt=0,vt=0,bt=!0,yt=!1;e.versionBasedStatePersistence=!1;var Mt=function(t){function s(i,s){var n=t.call(this,i,s)||this;return n.randomId=M(),n.isStringTemplate=!1,n.needsID=!1,n.isReactHybrid=!1,f(n.enableRtl)&&n.setProperties({enableRtl:e.rightToLeft},!0),f(n.locale)&&n.setProperties({locale:e.defaultCulture},!0),n.moduleLoader=new tt(n),n.localObserver=new q(n),V.on("notifyExternalChange",n.detectFunction,n,n.randomId),"undefined"==typeof window||"undefined"==typeof document||ct()||-1!==st.indexOf(n.getModuleName())&&(vt+=1)>5&&(bt=!1),g(s)||n.appendTo(),n}return ut(s,t),s.prototype.requiredModules=function(){return[]},s.prototype.destroy=function(){this.isDestroyed||(this.enablePersistence&&this.setPersistData(),this.localObserver.destroy(),this.refreshing||(pe([this.element],["e-control"]),this.trigger("destroyed",{cancel:!1}),t.prototype.destroy.call(this),this.moduleLoader.clean(),V.off("notifyExternalChange",this.detectFunction,this.randomId)))},s.prototype.refresh=function(){this.refreshing=!0,this.moduleLoader.clean(),this.destroy(),this.clearChanges(),this.localObserver=new q(this),this.preRender(),this.injectModules(),this.render(),this.refreshing=!1},s.prototype.accessMount=function(){this.mount&&!this.isReactHybrid&&this.mount()},s.prototype.getRootElement=function(){return this.isReactHybrid?this.actualElement:this.element},s.prototype.getLocalData=function(){var t=this.getModuleName()+this.element.id;return e.versionBasedStatePersistence?window.localStorage.getItem(t+this.ej2StatePersistenceVersion):window.localStorage.getItem(t)},s.prototype.appendTo=function(e){if(f(e)||"string"!=typeof e?f(e)||(this.element=e):this.element=be(e,document),!f(this.element)){var i="e-"+this.getModuleName().toLowerCase();ce([this.element],["e-control",i]),this.isProtectedOnChange=!1,this.needsID&&!this.element.id&&(this.element.id=this.getUniqueID(this.getModuleName())),this.enablePersistence&&(this.mergePersistData(),window.addEventListener("unload",this.setPersistData.bind(this)));var s=a("ej2_instances",this.element);s&&-1!==s.indexOf(this)||t.prototype.addInstance.call(this),this.preRender(),this.injectModules(),bt||yt||(pt(),yt=!0),this.render(),this.mount?this.accessMount():this.trigger("created")}},s.prototype.renderComplete=function(e){if(y()){window.sfBlazor.renderComplete(this.element,e)}this.isRendered=!0},s.prototype.dataBind=function(){this.injectModules(),t.prototype.dataBind.call(this)},s.prototype.on=function(e,t,i){if("string"==typeof e)this.localObserver.on(e,t,i);else for(var s=0,n=e;s<n.length;s++){var o=n[s];this.localObserver.on(o.event,o.handler,o.context)}},s.prototype.off=function(e,t){if("string"==typeof e)this.localObserver.off(e,t);else for(var i=0,s=e;i<s.length;i++){var n=s[i];this.localObserver.off(n.event,n.handler)}},s.prototype.notify=function(e,t){!0!==this.isDestroyed&&this.localObserver.notify(e,t)},s.prototype.getInjectedModules=function(){return this.injectedModules},s.Inject=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.prototype.injectedModules||(this.prototype.injectedModules=[]);for(var i=0;i<e.length;i++)-1===this.prototype.injectedModules.indexOf(e[parseInt(i.toString(),10)])&&this.prototype.injectedModules.push(e[parseInt(i.toString(),10)])},s.prototype.createElement=function(e,t,i){return de(e,t)},s.prototype.triggerStateChange=function(e,t){this.isReactHybrid&&(this.setState(),this.currentContext={calls:e,args:t})},s.prototype.injectModules=function(){this.injectedModules&&this.injectedModules.length&&this.moduleLoader.inject(this.requiredModules(),this.injectedModules)},s.prototype.detectFunction=function(e){var t=Object.keys(e);t.length&&(this[t[0]]=e[t[0]])},s.prototype.mergePersistData=function(){var t;f(t=e.versionBasedStatePersistence?window.localStorage.getItem(this.getModuleName()+this.element.id+this.ej2StatePersistenceVersion):window.localStorage.getItem(this.getModuleName()+this.element.id))||""===t||this.setProperties(JSON.parse(t),!0)},s.prototype.setPersistData=function(){this.isDestroyed||(e.versionBasedStatePersistence?window.localStorage.setItem(this.getModuleName()+this.element.id+this.ej2StatePersistenceVersion,this.getPersistData()):window.localStorage.setItem(this.getModuleName()+this.element.id,this.getPersistData()))},s.prototype.renderReactTemplates=function(e){f(e)||e()},s.prototype.clearTemplate=function(e,t){},s.prototype.getUniqueID=function(e){return this.isHistoryChanged()&&(gt=0),dt=this.pageID(location.href),mt=history.length,e+"_"+dt+"_"+gt++},s.prototype.pageID=function(e){var t=0;if(0===e.length)return t;for(var i=0;i<e.length;i++){t=(t<<5)-t+e.charCodeAt(i),t&=t}return Math.abs(t)},s.prototype.isHistoryChanged=function(){return dt!==this.pageID(location.href)||mt!==history.length},s.prototype.addOnPersist=function(e){for(var t=this,i={},s=0,n=e;s<n.length;s++){var o,r=n[s];g(o=a(r,this))||l(r,this.getActualProperties(o),i)}return JSON.stringify(i,(function(e,i){return t.getActualProperties(i)}))},s.prototype.getActualProperties=function(e){return e instanceof it?a("properties",e):e},s.prototype.ignoreOnPersist=function(e){return JSON.stringify(this.iterateJsonProperties(this.properties,e))},s.prototype.iterateJsonProperties=function(e,t){for(var s={},n=function(n){if(-1===t.indexOf(n)){var r=e[n];if("object"!==i(r)||r instanceof Array)s[""+n]=r;else{var a=t.filter((function(e){return new RegExp(n+".").test(e)})).map((function(e){return e.replace(n+".","")}));s[""+n]=o.iterateJsonProperties(o.getActualProperties(r),a)}}},o=this,r=0,a=Object.keys(e);r<a.length;r++){n(a[r])}return s},ft([Ye(!1)],s.prototype,"enablePersistence",void 0),ft([Ye()],s.prototype,"enableRtl",void 0),ft([Ye()],s.prototype,"locale",void 0),s=ft([Ve],s)}(xe);"undefined"!=typeof window&&window.addEventListener("popstate",(function(){gt=0}));var Ct,wt,St,Nt,xt=(Ct=function(e,t){return(Ct=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}Ct(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Ot=function(e,t,s,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,s,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,s,a):o(t,s))||a);return r>3&&a&&Object.defineProperty(t,s,a),a},Et={left:0,top:0,bottom:0,right:0},It={isDragged:!1},Dt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xt(t,e),Ot([Ye(0)],t.prototype,"left",void 0),Ot([Ye(0)],t.prototype,"top",void 0),t}(it),Tt=function(e){function t(t,i){var n=e.call(this,i,t)||this;return n.dragLimit=s.getDefaultPosition(),n.borderWidth=s.getDefaultPosition(),n.padding=s.getDefaultPosition(),n.diffX=0,n.prevLeft=0,n.prevTop=0,n.dragProcessStarted=!1,n.eleTop=0,n.tapHoldTimer=0,n.externalInitialize=!1,n.diffY=0,n.parentScrollX=0,n.parentScrollY=0,n.droppables={},n.bind(),n}var s;return xt(t,e),s=t,t.prototype.bind=function(){this.toggleEvents(),ae.isIE&&ce([this.element],"e-block-touch"),this.droppables[this.scope]={}},t.getDefaultPosition=function(){return u({},Et)},t.prototype.toggleEvents=function(e){var t;g(this.handle)||(t=be(this.handle,this.element));var i=this.enableTapHold&&ae.isDevice&&ae.isTouch?this.mobileInitialize:this.initialize;e?le.remove(t||this.element,ae.isSafari()?"touchstart":ae.touchStartEvent,i):le.add(t||this.element,ae.isSafari()?"touchstart":ae.touchStartEvent,i,this)},t.prototype.mobileInitialize=function(e){var t=this,i=e.currentTarget;this.tapHoldTimer=setTimeout((function(){t.externalInitialize=!0,t.removeTapholdTimer(),t.initialize(e,i)}),this.tapHoldThreshold),le.add(document,ae.isSafari()?"touchmove":ae.touchMoveEvent,this.removeTapholdTimer,this),le.add(document,ae.isSafari()?"touchend":ae.touchEndEvent,this.removeTapholdTimer,this)},t.prototype.removeTapholdTimer=function(){clearTimeout(this.tapHoldTimer),le.remove(document,ae.isSafari()?"touchmove":ae.touchMoveEvent,this.removeTapholdTimer),le.remove(document,ae.isSafari()?"touchend":ae.touchEndEvent,this.removeTapholdTimer)},t.prototype.getScrollableParent=function(e,t){return f(e)?null:e[{vertical:"scrollHeight",horizontal:"scrollWidth"}[""+t]]>e[{vertical:"clientHeight",horizontal:"clientWidth"}[""+t]]&&("vertical"===t?e.scrollTop>0:e.scrollLeft>0)?("vertical"===t?(this.parentScrollY=this.parentScrollY+(0===this.parentScrollY?e.scrollTop:e.scrollTop-this.parentScrollY),this.tempScrollHeight=e.scrollHeight):(this.parentScrollX=this.parentScrollX+(0===this.parentScrollX?e.scrollLeft:e.scrollLeft-this.parentScrollX),this.tempScrollWidth=e.scrollWidth),f(e)?e:this.getScrollableParent(e.parentNode,t)):this.getScrollableParent(e.parentNode,t)},t.prototype.getScrollableValues=function(){this.parentScrollX=0,this.parentScrollY=0;this.element.classList.contains("e-dialog")&&this.element.classList.contains("e-dlg-modal"),this.getScrollableParent(this.element.parentNode,"vertical"),this.getScrollableParent(this.element.parentNode,"horizontal")},t.prototype.initialize=function(e,t){if(this.currentStateTarget=e.target,!this.isDragStarted()){if(this.isDragStarted(!0),this.externalInitialize=!1,this.target=e.currentTarget||t,this.dragProcessStarted=!1,this.abort){var i=this.abort;"string"==typeof i&&(i=[i]);for(var s=0;s<i.length;s++)if(!f(Ce(e.target,i[parseInt(s.toString(),10)])))return void(this.isDragStarted()&&this.isDragStarted(!0))}this.preventDefault&&!g(e.changedTouches)&&"touchstart"!==e.type&&e.preventDefault(),this.element.setAttribute("aria-grabbed","true");var n=this.getCoordinates(e);if(this.initialPosition={x:n.pageX,y:n.pageY},!this.clone){var o=this.element.getBoundingClientRect();this.getScrollableValues(),e.clientX===e.pageX&&(this.parentScrollX=0),e.clientY===e.pageY&&(this.parentScrollY=0),this.relativeXPosition=n.pageX-(o.left+this.parentScrollX),this.relativeYPosition=n.pageY-(o.top+this.parentScrollY)}this.externalInitialize?this.intDragStart(e):(le.add(document,ae.isSafari()?"touchmove":ae.touchMoveEvent,this.intDragStart,this),le.add(document,ae.isSafari()?"touchend":ae.touchEndEvent,this.intDestroy,this)),this.toggleEvents(!0),"touchstart"!==e.type&&this.isPreventSelect&&document.body.classList.add("e-prevent-select"),this.externalInitialize=!1,le.trigger(document.documentElement,ae.isSafari()?"touchstart":ae.touchStartEvent,e)}},t.prototype.intDragStart=function(e){this.removeTapholdTimer();var t=!g(e.changedTouches);if(!t||1===e.changedTouches.length){var i,s=this.getCoordinates(e),n=getComputedStyle(this.element);this.margin={left:parseInt(n.marginLeft,10),top:parseInt(n.marginTop,10),right:parseInt(n.marginRight,10),bottom:parseInt(n.marginBottom,10)};var o=this.element;if(this.clone&&this.dragTarget){var r=Ce(e.target,this.dragTarget);f(r)||(o=r)}this.isReplaceDragEle&&(o=this.currentStateCheck(e.target,o)),this.offset=this.calculateParentPosition(o),this.position=this.getMousePosition(e,this.isDragScroll);var a=this.initialPosition.x-s.pageX,l=this.initialPosition.y-s.pageY;if(Math.sqrt(a*a+l*l)>=this.distance||this.externalInitialize){var h=this.getHelperElement(e);if(!h||f(h))return;t&&e.preventDefault();var d=this.helperElement=h;if(this.parentClientRect=this.calculateParentPosition(d.offsetParent),this.dragStart){var c={event:e,element:o,target:this.getProperTargetElement(e),bindEvents:y()?this.bindDragEvents.bind(this):null,dragElement:d};this.trigger("dragStart",c)}this.dragArea?this.setDragArea():(this.dragLimit={left:0,right:0,bottom:0,top:0},this.borderWidth={top:0,left:0}),i={left:this.position.left-this.parentClientRect.left,top:this.position.top-this.parentClientRect.top},this.clone&&!this.enableTailMode&&(this.diffX=this.position.left-this.offset.left,this.diffY=this.position.top-this.offset.top),this.getScrollableValues();var p=getComputedStyle(o),u=parseFloat(p.marginTop);this.clone&&0!==u&&(i.top+=u),this.eleTop=isNaN(parseFloat(p.top))?0:parseFloat(p.top)-this.offset.top,this.enableScrollHandler&&!this.clone&&(i.top-=this.parentScrollY,i.left-=this.parentScrollX);var m=this.getProcessedPositionValue({top:i.top-this.diffY+"px",left:i.left-this.diffX+"px"});this.dragArea&&"string"!=typeof this.dragArea&&this.dragArea.classList.contains("e-kanban-content")&&"relative"===this.dragArea.style.position&&(i.top+=this.dragArea.scrollTop),this.dragElePosition={top:i.top,left:i.left},we(d,this.getDragPosition({position:"absolute",left:m.left,top:m.top})),le.remove(document,ae.isSafari()?"touchmove":ae.touchMoveEvent,this.intDragStart),le.remove(document,ae.isSafari()?"touchend":ae.touchEndEvent,this.intDestroy),y()||this.bindDragEvents(d)}}},t.prototype.bindDragEvents=function(e){fe(e)?(le.add(document,ae.isSafari()?"touchmove":ae.touchMoveEvent,this.intDrag,this),le.add(document,ae.isSafari()?"touchend":ae.touchEndEvent,this.intDragStop,this),this.setGlobalDroppables(!1,this.element,e)):(this.toggleEvents(),document.body.classList.remove("e-prevent-select"))},t.prototype.elementInViewport=function(e){for(this.top=e.offsetTop,this.left=e.offsetLeft,this.width=e.offsetWidth,this.height=e.offsetHeight;e.offsetParent;)e=e.offsetParent,this.top+=e.offsetTop,this.left+=e.offsetLeft;return this.top>=window.pageYOffset&&this.left>=window.pageXOffset&&this.top+this.height<=window.pageYOffset+window.innerHeight&&this.left+this.width<=window.pageXOffset+window.innerWidth},t.prototype.getProcessedPositionValue=function(e){return this.queryPositionInfo?this.queryPositionInfo(e):e},t.prototype.calculateParentPosition=function(e){if(f(e))return{left:0,top:0};var t=e.getBoundingClientRect(),i=getComputedStyle(e);return{left:t.left+window.pageXOffset-parseInt(i.marginLeft,10),top:t.top+window.pageYOffset-parseInt(i.marginTop,10)}},t.prototype.intDrag=function(e){if(g(e.changedTouches)||1===e.changedTouches.length){var t,i;this.clone&&e.changedTouches&&ae.isDevice&&ae.isTouch&&e.preventDefault(),this.position=this.getMousePosition(e,this.isDragScroll);var s=this.getDocumentWidthHeight("Height");s<this.position.top&&(this.position.top=s);var n=this.getDocumentWidthHeight("Width");if(n<this.position.left&&(this.position.left=n),this.drag){var o=this.getProperTargetElement(e);this.trigger("drag",{event:e,element:this.element,target:o})}var r=this.checkTargetElement(e);if(r.target&&r.instance){var a=!0;this.hoverObject&&(this.hoverObject.instance!==r.instance?this.triggerOutFunction(e,r):a=!1),a&&(r.instance.dragData[this.scope]=this.droppables[this.scope],r.instance.intOver(e,r.target),this.hoverObject=r)}else this.hoverObject&&this.triggerOutFunction(e,r);var l=this.droppables[this.scope].helper;this.parentClientRect=this.calculateParentPosition(this.helperElement.offsetParent);var h=this.parentClientRect.left,d=this.parentClientRect.top,c=this.getCoordinates(e),p=c.pageX,u=c.pageY,m=this.position.left-this.diffX,v=this.position.top-this.diffY,b=getComputedStyle(l);if(this.dragArea){if(this.pageX!==p||this.skipDistanceCheck){var y=l.offsetWidth+(parseFloat(b.marginLeft)+parseFloat(b.marginRight));t=this.dragLimit.left>m&&m>0?this.dragLimit.left:this.dragLimit.right+window.pageXOffset<m+y&&m>0?m-(m-this.dragLimit.right)+window.pageXOffset-y:m<0?this.dragLimit.left:m}if(this.pageY!==u||this.skipDistanceCheck){var M=l.offsetHeight+(parseFloat(b.marginTop)+parseFloat(b.marginBottom));i=this.dragLimit.top>v&&v>0?this.dragLimit.top:this.dragLimit.bottom+window.pageYOffset<v+M&&v>0?v-(v-this.dragLimit.bottom)+window.pageYOffset-M:v<0?this.dragLimit.top:v}}else t=m,i=v;var C,w,S=d+this.borderWidth.top,N=h+this.borderWidth.left;if(this.dragProcessStarted&&(f(i)&&(i=this.prevTop),f(t)&&(t=this.prevLeft)),this.helperElement.classList.contains("e-treeview"))this.dragArea?(this.dragLimit.top=this.clone?this.dragLimit.top:0,C=i-S<0?this.dragLimit.top:i-this.borderWidth.top,w=t-N<0?this.dragLimit.left:t-this.borderWidth.left):(C=i-this.borderWidth.top,w=t-this.borderWidth.left);else if(this.dragArea){var x=this.helperElement.classList.contains("e-dialog");this.dragLimit.top=this.clone?this.dragLimit.top:0,C=i-S<0?this.dragLimit.top:i-S,w=t-N<0?x?t-(N-this.borderWidth.left):this.dragElePosition.left:t-N}else C=i-S,w=t-N;var O=parseFloat(getComputedStyle(this.element).marginTop);if(O>0&&(this.clone&&(C+=O,v<0&&(O+v>=0?C=O+v:C-=O),C=this.dragLimit.bottom<C?this.dragLimit.bottom:C),i-S<0))if(v+O+(l.offsetHeight-S)>=0){var E=this.dragLimit.top+v-S;E+O+S<0?C-=O+S:C=E}else C-=O+S;if(this.dragArea&&this.helperElement.classList.contains("e-treeview"))C=C+(M=l.offsetHeight+(parseFloat(b.marginTop)+parseFloat(b.marginBottom)))>this.dragLimit.bottom?this.dragLimit.bottom-M:C;this.enableScrollHandler&&!this.clone&&(C-=this.parentScrollY,w-=this.parentScrollX),this.dragArea&&"string"!=typeof this.dragArea&&this.dragArea.classList.contains("e-kanban-content")&&"relative"===this.dragArea.style.position&&(C+=this.dragArea.scrollTop);var I=this.getProcessedPositionValue({top:C+"px",left:w+"px"});we(l,this.getDragPosition(I)),this.elementInViewport(l)||!this.enableAutoScroll||this.helperElement.classList.contains("e-treeview")||this.helperElement.scrollIntoView();var D=document.querySelectorAll(":hover");if(this.enableAutoScroll&&this.helperElement.classList.contains("e-treeview")){0===D.length&&(D=this.getPathElements(e));var T=this.getScrollParent(D,!1);this.elementInViewport(this.helperElement)?this.getScrollPosition(T,C):this.elementInViewport(this.helperElement)||(0===(D=[].slice.call(document.querySelectorAll(":hover"))).length&&(D=this.getPathElements(e)),T=this.getScrollParent(D,!0),this.getScrollPosition(T,C))}this.dragProcessStarted=!0,this.prevLeft=t,this.prevTop=i,this.position.left=t,this.position.top=i,this.pageX=p,this.pageY=u}},t.prototype.getScrollParent=function(e,t){for(var i,s=t?e.reverse():e,n=s.length-1;n>=0;n--)if(("auto"===(i=window.getComputedStyle(s[parseInt(n.toString(),10)])["overflow-y"])||"scroll"===i)&&s[parseInt(n.toString(),10)].scrollHeight>s[parseInt(n.toString(),10)].clientHeight)return s[parseInt(n.toString(),10)];if("visible"===(i=window.getComputedStyle(document.scrollingElement)["overflow-y"]))return document.scrollingElement.style.overflow="auto",document.scrollingElement},t.prototype.getScrollPosition=function(e,t){e&&e===document.scrollingElement?e.clientHeight+document.scrollingElement.scrollTop-this.helperElement.clientHeight<t&&e.getBoundingClientRect().height+this.parentClientRect.top>t?e.scrollTop+=this.helperElement.clientHeight:e.scrollTop>t-this.helperElement.clientHeight&&(e.scrollTop-=this.helperElement.clientHeight):e&&e!==document.scrollingElement&&(e.clientHeight+e.getBoundingClientRect().top-this.helperElement.clientHeight+document.scrollingElement.scrollTop<t?e.scrollTop+=this.helperElement.clientHeight:e.getBoundingClientRect().top>t-this.helperElement.clientHeight-document.scrollingElement.scrollTop&&(e.scrollTop-=this.helperElement.clientHeight))},t.prototype.getPathElements=function(e){var t=e.clientX>0?e.clientX:0,i=e.clientY>0?e.clientY:0;return document.elementsFromPoint(t,i)},t.prototype.triggerOutFunction=function(e,t){this.hoverObject.instance.intOut(e,t.target),this.hoverObject.instance.dragData[this.scope]=null,this.hoverObject=null},t.prototype.getDragPosition=function(e){var t=u({},e);return this.axis&&("x"===this.axis?delete t.top:"y"===this.axis&&delete t.left),t},t.prototype.getDocumentWidthHeight=function(e){var t=document.body,i=document.documentElement;return Math.max(t["scroll"+e],i["scroll"+e],t["offset"+e],i["offset"+e],i["client"+e])},t.prototype.intDragStop=function(e){if(this.dragProcessStarted=!1,g(e.changedTouches)||1===e.changedTouches.length){if(-1!==["touchend","pointerup","mouseup"].indexOf(e.type)){if(this.dragStop){var t=this.getProperTargetElement(e);this.trigger("dragStop",{event:e,element:this.element,target:t,helper:this.helperElement})}this.intDestroy(e)}else this.element.setAttribute("aria-grabbed","false");var i=this.checkTargetElement(e);i.target&&i.instance&&(i.instance.dragStopCalled=!0,i.instance.dragData[this.scope]=this.droppables[this.scope],i.instance.intDrop(e,i.target)),this.setGlobalDroppables(!0),document.body.classList.remove("e-prevent-select")}},t.prototype.intDestroy=function(e){this.dragProcessStarted=!1,this.toggleEvents(),document.body.classList.remove("e-prevent-select"),this.element.setAttribute("aria-grabbed","false"),le.remove(document,ae.isSafari()?"touchmove":ae.touchMoveEvent,this.intDragStart),le.remove(document,ae.isSafari()?"touchend":ae.touchEndEvent,this.intDragStop),le.remove(document,ae.isSafari()?"touchend":ae.touchEndEvent,this.intDestroy),le.remove(document,ae.isSafari()?"touchmove":ae.touchMoveEvent,this.intDrag),this.isDragStarted()&&this.isDragStarted(!0)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.getModuleName=function(){return"draggable"},t.prototype.isDragStarted=function(e){return e&&(It.isDragged=!It.isDragged),It.isDragged},t.prototype.setDragArea=function(){var e,t,s,n=0,o=0;if(s="string"===i(this.dragArea)?be(this.dragArea):this.dragArea){var r=s.getBoundingClientRect();e=s.scrollWidth?s.scrollWidth:r.right-r.left,t=s.scrollHeight?this.dragArea&&!f(this.helperElement)&&this.helperElement.classList.contains("e-treeview")?s.clientHeight:s.scrollHeight:r.bottom-r.top;for(var a=["Top","Left","Bottom","Right"],l=getComputedStyle(s),h=0;h<a.length;h++){var d=a[parseInt(h.toString(),10)],c=l["border"+d+"Width"],p=l["padding"+d],u=d.toLowerCase();this.borderWidth[""+u]=isNaN(parseFloat(c))?0:parseFloat(c),this.padding[""+u]=isNaN(parseFloat(p))?0:parseFloat(p)}n=this.dragArea&&!f(this.helperElement)&&this.helperElement.classList.contains("e-treeview")?r.top+document.scrollingElement.scrollTop:r.top,o=r.left,this.dragLimit.left=o+this.borderWidth.left+this.padding.left,this.dragLimit.top=s.offsetTop+this.borderWidth.top+this.padding.top,this.dragLimit.right=o+e-(this.borderWidth.right+this.padding.right),this.dragLimit.bottom=n+t-(this.borderWidth.bottom+this.padding.bottom)}},t.prototype.getProperTargetElement=function(e){var t,i=this.getCoordinates(e),s=this.helperElement.style.pointerEvents||"",n=-1!==e.type.indexOf("pointer")&&"safari"===ae.info.name&&parseInt(ae.info.version)>12;return v(e.target,this.helperElement)||-1!==e.type.indexOf("touch")||n?(this.helperElement.style.pointerEvents="none",t=document.elementFromPoint(i.clientX,i.clientY),this.helperElement.style.pointerEvents=s):t=e.target,t},t.prototype.currentStateCheck=function(e,t){return f(this.currentStateTarget)||this.currentStateTarget===e?f(t)?e:t:this.currentStateTarget},t.prototype.getMousePosition=function(e,t){var i,s,n=void 0!==e.srcElement?e.srcElement:e.target,o=this.getCoordinates(e),r=f(n.offsetParent);if(t?(i=this.clone?o.pageX:o.pageX+(r?0:n.offsetParent.scrollLeft)-this.relativeXPosition,s=this.clone?o.pageY:o.pageY+(r?0:n.offsetParent.scrollTop)-this.relativeYPosition):(i=this.clone?o.pageX:o.pageX+window.pageXOffset-this.relativeXPosition,s=this.clone?o.pageY:o.pageY+window.pageYOffset-this.relativeYPosition),document.scrollingElement&&!t&&!this.clone){var a=document.scrollingElement.scrollHeight>0&&document.scrollingElement.scrollHeight>document.scrollingElement.clientHeight&&document.scrollingElement.scrollTop>0;i=document.scrollingElement.scrollWidth>0&&document.scrollingElement.scrollWidth>document.scrollingElement.clientWidth&&document.scrollingElement.scrollLeft>0?i-document.scrollingElement.scrollLeft:i,s=a?s-document.scrollingElement.scrollTop:s}return{left:i-(this.margin.left+this.cursorAt.left),top:s-(this.margin.top+this.cursorAt.top)}},t.prototype.getCoordinates=function(e){return e.type.indexOf("touch")>-1?e.changedTouches[0]:e},t.prototype.getHelperElement=function(e){var t;return this.clone?this.helper?t=this.helper({sender:e,element:this.target}):(t=de("div",{className:"e-drag-helper e-block-touch",innerHTML:"Draggable"}),document.body.appendChild(t)):t=this.element,t},t.prototype.setGlobalDroppables=function(e,t,i){this.droppables[this.scope]=e?null:{draggable:t,helper:i,draggedElement:this.element}},t.prototype.checkTargetElement=function(e){var t=this.getProperTargetElement(e),i=this.getDropInstance(t);if(!i&&t&&!f(t.parentNode)){var s=Ce(t.parentNode,".e-droppable")||t.parentElement;s&&(i=this.getDropInstance(s))}return{target:t,instance:i}},t.prototype.getDropInstance=function(e){var t,i=e&&e.ej2_instances;if(i)for(var s=0,n=i;s<n.length;s++){var o=n[s];if("droppable"===o.getModuleName()){t=o;break}}return t},t.prototype.destroy=function(){this.toggleEvents(!0),e.prototype.destroy.call(this)},Ot([Fe({},Dt)],t.prototype,"cursorAt",void 0),Ot([Ye(!0)],t.prototype,"clone",void 0),Ot([Ye()],t.prototype,"dragArea",void 0),Ot([Ye()],t.prototype,"isDragScroll",void 0),Ot([Ye()],t.prototype,"isReplaceDragEle",void 0),Ot([Ye(!0)],t.prototype,"isPreventSelect",void 0),Ot([qe()],t.prototype,"drag",void 0),Ot([qe()],t.prototype,"dragStart",void 0),Ot([qe()],t.prototype,"dragStop",void 0),Ot([Ye(1)],t.prototype,"distance",void 0),Ot([Ye()],t.prototype,"handle",void 0),Ot([Ye()],t.prototype,"abort",void 0),Ot([Ye()],t.prototype,"helper",void 0),Ot([Ye("default")],t.prototype,"scope",void 0),Ot([Ye("")],t.prototype,"dragTarget",void 0),Ot([Ye()],t.prototype,"axis",void 0),Ot([Ye()],t.prototype,"queryPositionInfo",void 0),Ot([Ye(!1)],t.prototype,"enableTailMode",void 0),Ot([Ye(!1)],t.prototype,"skipDistanceCheck",void 0),Ot([Ye(!0)],t.prototype,"preventDefault",void 0),Ot([Ye(!1)],t.prototype,"enableAutoScroll",void 0),Ot([Ye(!1)],t.prototype,"enableTapHold",void 0),Ot([Ye(750)],t.prototype,"tapHoldThreshold",void 0),Ot([Ye(!1)],t.prototype,"enableScrollHandler",void 0),t=s=Ot([Ve],t)}(xe),jt=(wt=function(e,t){return(wt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}wt(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),At=function(e,t,s,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,s,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,s,a):o(t,s))||a);return r>3&&a&&Object.defineProperty(t,s,a),a},zt=function(e){function t(t,i){var s=e.call(this,i,t)||this;return s.mouseOver=!1,s.dragData={},s.dragStopCalled=!1,s.bind(),s}return jt(t,e),t.prototype.bind=function(){this.wireEvents()},t.prototype.wireEvents=function(){le.add(this.element,ae.isSafari()?"touchend":ae.touchEndEvent,this.intDrop,this)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.getModuleName=function(){return"droppable"},t.prototype.intOver=function(e,t){if(!this.mouseOver){var i=this.dragData[this.scope];this.trigger("over",{event:e,target:t,dragData:i}),this.mouseOver=!0}},t.prototype.intOut=function(e,t){this.mouseOver&&(this.trigger("out",{evt:e,target:t}),this.mouseOver=!1)},t.prototype.intDrop=function(e,t){if(this.dragStopCalled){this.dragStopCalled=!1;var i,s=!0,n=this.dragData[this.scope],o=!!n&&(n.helper&&fe(n.helper));o&&(i=this.isDropArea(e,n.helper,t),this.accept&&(s=Se(n.helper,this.accept))),o&&this.drop&&i.canDrop&&s&&this.trigger("drop",{event:e,target:i.target,droppedElement:n.helper,dragData:n}),this.mouseOver=!1}},t.prototype.isDropArea=function(e,t,i){var s={canDrop:!0,target:i||e.target},n="touchend"===e.type;if(n||s.target===t){t.style.display="none";var o=n?e.changedTouches[0]:e,r=document.elementFromPoint(o.clientX,o.clientY);s.canDrop=!1,s.canDrop=v(r,this.element),s.canDrop&&(s.target=r),t.style.display=""}return s},t.prototype.destroy=function(){le.remove(this.element,ae.isSafari()?"touchend":ae.touchEndEvent,this.intDrop),e.prototype.destroy.call(this)},At([Ye()],t.prototype,"accept",void 0),At([Ye("default")],t.prototype,"scope",void 0),At([qe()],t.prototype,"drop",void 0),At([qe()],t.prototype,"over",void 0),At([qe()],t.prototype,"out",void 0),t=At([Ve],t)}(xe),Lt=(St=function(e,t){return(St=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}St(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),kt=function(e,t,s,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,s,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,s,a):o(t,s))||a);return r>3&&a&&Object.defineProperty(t,s,a),a},Pt={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222},Bt=function(e){function t(t,s){var n=e.call(this,s,t)||this;return n.keyPressHandler=function(e){for(var t=e.altKey,s=e.ctrlKey,o=e.shiftKey,r=e.which,a=0,l=Object.keys(n.keyConfigs);a<l.length;a++)for(var h=l[a],d=0,c=n.keyConfigs[""+h].split(",");d<c.length;d++){var p=c[d],u=i.getKeyConfigData(p.trim());t===u.altKey&&s===u.ctrlKey&&o===u.shiftKey&&r===u.keyCode&&(e.action=h,n.keyAction&&n.keyAction(e))}},n.bind(),n}var i;return Lt(t,e),i=t,t.prototype.destroy=function(){this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.bind=function(){this.wireEvents()},t.prototype.getModuleName=function(){return"keyboard"},t.prototype.wireEvents=function(){this.element.addEventListener(this.eventName,this.keyPressHandler)},t.prototype.unwireEvents=function(){this.element.removeEventListener(this.eventName,this.keyPressHandler)},t.getKeyConfigData=function(e){if(e in this.configCache)return this.configCache[""+e];var t=e.toLowerCase().split("+"),s={altKey:-1!==t.indexOf("alt"),ctrlKey:-1!==t.indexOf("ctrl"),shiftKey:-1!==t.indexOf("shift"),keyCode:null};return t[t.length-1].length>1&&Number(t[t.length-1])?s.keyCode=Number(t[t.length-1]):s.keyCode=i.getKeyCode(t[t.length-1]),i.configCache[""+e]=s,s},t.getKeyCode=function(e){return Pt[""+e]||e.toUpperCase().charCodeAt(0)},t.configCache={},kt([Ye({})],t.prototype,"keyConfigs",void 0),kt([Ye("keyup")],t.prototype,"eventName",void 0),kt([qe()],t.prototype,"keyAction",void 0),t=i=kt([Ve],t)}(xe),Ut=function(){function t(t,i,s){this.controlName=t,this.localeStrings=i,this.setLocale(s||e.defaultCulture)}return t.prototype.setLocale=function(e){var i=this.intGetControlConstant(t.locale,e);this.currentLocale=i||this.localeStrings},t.load=function(e){this.locale=u(this.locale,e,{},!0)},t.prototype.getConstant=function(e){return f(this.currentLocale[""+e])?this.localeStrings[""+e]||"":this.currentLocale[""+e]},t.prototype.intGetControlConstant=function(e,t){return e[""+t]?e[""+t][this.controlName]:null},t.locale={},t}(),Rt=(Nt=function(e,t){return(Nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}Nt(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Ht=function(e,t,s,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,s,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,s,a):o(t,s))||a);return r>3&&a&&Object.defineProperty(t,s,a),a},Yt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Rt(t,e),Ht([Ye(50)],t.prototype,"swipeThresholdDistance",void 0),t}(it),Ft=/(Up|Down)/,qt=function(e){function t(t,i){var s=e.call(this,i,t)||this;return s.touchAction=!0,s.tapCount=0,s.startEvent=function(e){if(!0===s.touchAction){var t=s.updateChangeTouches(e);void 0!==e.changedTouches&&(s.touchAction=!1),s.isTouchMoved=!1,s.movedDirection="",s.startPoint=s.lastMovedPoint={clientX:t.clientX,clientY:t.clientY},s.startEventData=t,s.hScrollLocked=s.vScrollLocked=!1,s.tStampStart=Date.now(),s.timeOutTapHold=setTimeout((function(){s.tapHoldEvent(e)}),s.tapHoldThreshold),le.add(s.element,ae.touchMoveEvent,s.moveEvent,s),le.add(s.element,ae.touchEndEvent,s.endEvent,s),le.add(s.element,ae.touchCancelEvent,s.cancelEvent,s)}},s.moveEvent=function(e){var t=s.updateChangeTouches(e);s.movedPoint=t,s.isTouchMoved=!(t.clientX===s.startPoint.clientX&&t.clientY===s.startPoint.clientY);var i={};s.isTouchMoved&&(clearTimeout(s.timeOutTapHold),s.calcScrollPoints(e),i=u(i,{},{startEvents:s.startEventData,originalEvent:e,startX:s.startPoint.clientX,startY:s.startPoint.clientY,distanceX:s.distanceX,distanceY:s.distanceY,scrollDirection:s.scrollDirection,velocity:s.getVelocity(t)}),s.trigger("scroll",i),s.lastMovedPoint={clientX:t.clientX,clientY:t.clientY})},s.cancelEvent=function(e){clearTimeout(s.timeOutTapHold),clearTimeout(s.timeOutTap),s.tapCount=0,s.swipeFn(e),le.remove(s.element,ae.touchCancelEvent,s.cancelEvent)},s.endEvent=function(e){s.swipeFn(e),s.isTouchMoved||"function"==typeof s.tap&&(s.trigger("tap",{originalEvent:e,tapCount:++s.tapCount}),s.timeOutTap=setTimeout((function(){s.tapCount=0}),s.tapThreshold)),s.modeclear()},s.swipeFn=function(e){clearTimeout(s.timeOutTapHold),clearTimeout(s.timeOutTap);var t=s.updateChangeTouches(e),i=t.clientX-s.startPoint.clientX,n=t.clientY-s.startPoint.clientY;i=Math.floor(i<0?-1*i:i),n=Math.floor(n<0?-1*n:i),s.isTouchMoved=i>1||n>1,/Firefox/.test(ae.userAgent)&&0===t.clientX&&0===t.clientY&&"mouseup"===e.type&&(s.isTouchMoved=!1),s.endPoint=t,s.calcPoints(e);var o={originalEvent:e,startEvents:s.startEventData,startX:s.startPoint.clientX,startY:s.startPoint.clientY,distanceX:s.distanceX,distanceY:s.distanceY,swipeDirection:s.movedDirection,velocity:s.getVelocity(t)};if(s.isTouchMoved){var r=void 0,a=s.swipeSettings.swipeThresholdDistance;r=u(r,s.defaultArgs,o);var l=!1,h=s.element,d=s.isScrollable(h),c=Ft.test(s.movedDirection);(a<s.distanceX&&!c||a<s.distanceY&&c)&&(l=!d||s.checkSwipe(h,c)),l&&s.trigger("swipe",r)}s.modeclear()},s.modeclear=function(){s.modeClear=setTimeout((function(){s.touchAction=!0}),"function"!=typeof s.tap?0:20),s.lastTapTime=(new Date).getTime(),le.remove(s.element,ae.touchMoveEvent,s.moveEvent),le.remove(s.element,ae.touchEndEvent,s.endEvent),le.remove(s.element,ae.touchCancelEvent,s.cancelEvent)},s.bind(),s}return Rt(t,e),t.prototype.onPropertyChanged=function(e,t){},t.prototype.bind=function(){this.wireEvents(),ae.isIE&&this.element.classList.add("e-block-touch")},t.prototype.destroy=function(){this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.wireEvents=function(){le.add(this.element,ae.touchStartEvent,this.startEvent,this)},t.prototype.unwireEvents=function(){le.remove(this.element,ae.touchStartEvent,this.startEvent)},t.prototype.getModuleName=function(){return"touch"},t.prototype.isScrollable=function(e){var t=getComputedStyle(e),i=t.overflow+t.overflowX+t.overflowY;return!!/(auto|scroll)/.test(i)},t.prototype.tapHoldEvent=function(e){var t;this.tapCount=0,this.touchAction=!0,le.remove(this.element,ae.touchMoveEvent,this.moveEvent),le.remove(this.element,ae.touchEndEvent,this.endEvent),t={originalEvent:e},this.trigger("tapHold",t),le.remove(this.element,ae.touchCancelEvent,this.cancelEvent)},t.prototype.calcPoints=function(e){var t=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.startPoint.clientX)),this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.startPoint.clientY)),this.distanceX>this.distanceY?this.movedDirection=t.clientX>this.startPoint.clientX?"Right":"Left":this.movedDirection=t.clientY<this.startPoint.clientY?"Up":"Down"},t.prototype.calcScrollPoints=function(e){var t=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.lastMovedPoint.clientX)),this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.lastMovedPoint.clientY)),(this.distanceX>this.distanceY||!0===this.hScrollLocked)&&!1===this.vScrollLocked?(this.scrollDirection=t.clientX>this.lastMovedPoint.clientX?"Right":"Left",this.hScrollLocked=!0):(this.scrollDirection=t.clientY<this.lastMovedPoint.clientY?"Up":"Down",this.vScrollLocked=!0)},t.prototype.getVelocity=function(e){var t=e.clientX,i=e.clientY,s=Date.now(),n=t-this.startPoint.clientX,o=i-this.startPoint.clientX,r=s-this.tStampStart;return Math.sqrt(n*n+o*o)/r},t.prototype.checkSwipe=function(e,t){var i=["scroll","offset"],s=t?["Height","Top"]:["Width","Left"];return e[i[0]+s[0]]<=e[i[1]+s[0]]||(0===e[i[0]+s[1]]||e[i[1]+s[0]]+e[i[0]+s[1]]>=e[i[0]+s[0]])},t.prototype.updateChangeTouches=function(e){return e.changedTouches&&0!==e.changedTouches.length?e.changedTouches[0]:e},Ht([qe()],t.prototype,"tap",void 0),Ht([qe()],t.prototype,"tapHold",void 0),Ht([qe()],t.prototype,"swipe",void 0),Ht([qe()],t.prototype,"scroll",void 0),Ht([Ye(350)],t.prototype,"tapThreshold",void 0),Ht([Ye(750)],t.prototype,"tapHoldThreshold",void 0),Ht([Fe({},Yt)],t.prototype,"swipeSettings",void 0),t=Ht([Ve],t)}(xe),Vt=new RegExp("\\n|\\r|\\s\\s+","g"),Wt=new RegExp(/'|"/g),_t=new RegExp("if ?\\("),Qt=new RegExp("else if ?\\("),Xt=new RegExp("else"),Gt=new RegExp("for ?\\("),Kt=new RegExp("(/if|/for)"),Zt=new RegExp("\\((.*)\\)",""),Jt=new RegExp("^[0-9]+$","g"),$t=new RegExp("[\\w\"'.\\s+]+","g"),ei=new RegExp('"(.*?)"',"g"),ti=new RegExp("[\\w\"'@#$.\\s-+]+","g"),ii=new RegExp("\\${([^}]*)}","g"),si=/^\..*/gm,ni=/\\/gi,oi=/\\\\/gi,ri=new RegExp("[\\w\"'@#$.\\s+]+","g"),ai=/\window\./gm;function li(e,t,i){var s=function(e,t,i,s){var n=0,o=[],r=e.match(/class="([^"]+|)\s{2}/g),a="";r&&r.forEach((function(t){a=t.replace(/\s\s+/g," "),e=e.replace(t,a)}));return e.replace(Vt,"").replace(ei,"'$1'").replace(ii,(function(e,r,a,l){var h=r.match(Zt);if(h){var d=h[1];if(Qt.test(r))r='";} '+r.replace(h[1],d.replace($t,(function(e){return hi(e=e.trim(),!Wt.test(e)&&-1===o.indexOf(e),t,o,s)})))+'{ \n str = str + "';else if(_t.test(r))r='"; '+r.replace(h[1],d.replace(ti,(function(e){return pi(e,t,o,s)})))+'{ \n str = str + "';else if(Gt.test(r)){var c=h[1].split(" of ");r='"; '+r.replace(h[1],(function(e){return o.push(c[0]),o.push(c[0]+"Index"),"var i"+(n+=1)+"=0; i"+n+" < "+hi(c[1],!0,t,o,s)+".length; i"+n+"++"}))+"{ \n "+c[0]+"= "+hi(c[1],!0,t,o,s)+"[i"+n+"]; \n var "+c[0]+"Index=i"+n+'; \n str = str + "'}else{var p=r.split("("),u=i&&i.hasOwnProperty(p[0])?"this.":"global";u=/\./.test(p[0])?"":u;var f=h[1].split(",");0===h[1].length||/data/.test(f[0])||/window./.test(f[0])||(h[1]="global"===u?t+"."+h[1]:h[1]);if(ai.test(r)&&/\]\./gm.test(r)||/@|\$|#/gm.test(r)){/@|\$|#|\]\./gm.test(r)&&(r='"+ '+("global"===u?"":u)+r.replace(h[1],d.replace(ri,(function(e){return pi(e,t,o,s)})))+'+ "')}else r='" + '+("global"===u?"":u)+r.replace(d,hi(h[1].replace(/,( |)data.|,/gi,","+t+".").replace(/,( |)data.window/gi,",window"),"global"!==u,t,o,s))+'+"'}}else Xt.test(r)?r='"; '+r.replace(Xt,'} else { \n str = str + "'):r.match(Kt)?r=r.replace(Kt,'"; \n } \n str = str + "'):/@|#|\$/gm.test(r)?(r.match(ni)&&(r=ci(r)),r='"+'+di(r,-1===o.indexOf(r),t,o)+'"]+"'):r=r.match(ni)?'"+'+di(r=ci(r),-1===o.indexOf(r),t,o)+'"]+"':""!==r?'"+'+hi(r.replace(/,/gi,"+"+t+"."),-1===o.indexOf(r),t,o,s)+'+"':" ";return r}))}(e,"data",t,i);return new Function("data",'var str="'+s+"\";var valueRegEx = (/value=\\'([A-Za-z0-9 _]*)((.)([\\w)(!-;?-■\\s]+)['])/g);\n    var hrefRegex = (/(?:href)([\\s='\"./]+)([\\w-./?=&\\\\#\"]+)((.)([\\w)(!-;/?-■\\s]+)['])/g);\n    if(str.match(valueRegEx)){\n        var check = str.match(valueRegEx);\n        var str1 = str;\n        for (var i=0; i < check.length; i++) {\n            var check1 = str.match(valueRegEx)[i].split('value=')[1];\n            var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n            change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n            str1 = str1.replace(check1, change);\n        }\n        str = str.replace(str, str1);\n    }\n    else if (str.match(/(?:href='')/) === null) {\n        if(str.match(hrefRegex)) {\n            var check = str.match(hrefRegex);\n            var str1 = str;\n            for (var i=0; i < check.length; i++) {\n                var check1 = str.match(hrefRegex)[i].split('href=')[1];\n                if (check1) {\n                    var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n                    change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n                    str1 = str1.replace(check1, change);\n                }\n            }\n            str = str.replace(str, str1);\n        }\n    }\n     return str;").bind(t)}function hi(e,t,i,s,n){return!t||Jt.test(e)||-1!==s.indexOf(e.split(".")[0])||n||"true"===e||"false"===e?e:i+"."+e}function di(e,t,i,s){return t&&!Jt.test(e)&&-1===s.indexOf(e.split(".")[0])?i+'["'+e:e}function ci(e){return e=e.match(oi)?e:e.replace(ni,"\\\\")}function pi(e,t,i,s){e=e.trim();if(/\window\./gm.test(e))return e;var n=/'|"/gm;return/@|\$|#/gm.test(e)&&(e=di(e,-1===i.indexOf(e),t,i)+'"]'),si.test(e)?function(e,t,i,s){return!t||Jt.test(e)||-1!==s.indexOf(e.split(".")[0])||/^\..*/gm.test(e)?e:i+"."+e}(e,!n.test(e)&&-1===i.indexOf(e),t,i):hi(e,!n.test(e)&&-1===i.indexOf(e),t,i,s)}var ui=/^[\n\r.]+<tr|^<tr/,fi=/^[\n\r.]+<svg|^<path|^<g/,gi={};function mi(){return"-"+Math.random().toString(36).substr(2,5)}var vi={compile:(new(function(){function e(){}return e.prototype.compile=function(e,t,i){return void 0===t&&(t={}),li(e,t)},e}())).compile},bi=["script","style","iframe[src]",'link[href*="javascript:"]','object[type="text/x-scriptlet"]','object[data^="data:text/html;base64"]','img[src^="data:text/html;base64"]','[src^="javascript:"]','[dynsrc^="javascript:"]','[lowsrc^="javascript:"]','[type^="application/x-shockwave-flash"]'],yi=[{attribute:"href",selector:'[href*="javascript:"]'},{attribute:"background",selector:'[background^="javascript:"]'},{attribute:"style",selector:'[style*="javascript:"]'},{attribute:"style",selector:'[style*="expression("]'},{attribute:"href",selector:'a[href^="data:text/html;base64"]'}],Mi=["onchange","onclick","onmouseover","onmouseout","onkeydown","onload","onerror","onblur","onfocus","onbeforeload","onbeforeunload","onkeyup","onsubmit","onafterprint","onbeforeonload","onbeforeprint","oncanplay","oncanplaythrough","oncontextmenu","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onformchange","onforminput","onhaschange","oninput","oninvalid","onkeypress","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmousedown","onmousemove","onmouseup","onmousewheel","onoffline","onoine","ononline","onpagehide","onpageshow","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreadystatechange","onredo","onresize","onscroll","onseeked","onseeking","onselect","onstalled","onstorage","onsuspend","ontimeupdate","onundo","onunload","onvolumechange","onwaiting","onmouseenter","onmouseleave","onstart","onpropertychange","oncopy","ontoggle","onpointerout","onpointermove","onpointerleave","onpointerenter","onpointerrawupdate","onpointerover","onbeforecopy","onbeforecut","onbeforeinput"],Ci=function(){function e(){}return e.beforeSanitize=function(){return{selectors:{tags:bi,attributes:yi}}},e.sanitize=function(e){var t=this.beforeSanitize();return this.serializeValue(t,e)},e.serializeValue=function(e,t){this.removeAttrs=e.selectors.attributes,this.removeTags=e.selectors.tags,this.wrapElement=document.createElement("div"),this.wrapElement.innerHTML=t,this.removeXssTags(),this.removeJsEvents(),this.removeXssAttrs();var i=this.wrapElement.innerHTML;return this.removeElement(),i.replace("&amp;","&")},e.removeElement=function(){for(var e=this.wrapElement.children,t=0;t<e.length;t++)for(var i=e[parseInt(t.toString(),10)].attributes,s=0;s<i.length;s++)this.wrapElement.children[parseInt(t.toString(),10)].removeAttribute(i[parseInt(s.toString(),10)].localName)},e.removeXssTags=function(){var e=this.wrapElement.querySelectorAll(this.removeTags.join(","));e.length>0&&e.forEach((function(e){me(e)}))},e.removeJsEvents=function(){var e=this.wrapElement.querySelectorAll("["+Mi.join("],[")+"]");e.length>0&&e.forEach((function(e){Mi.forEach((function(t){e.hasAttribute(t)&&e.removeAttribute(t)}))}))},e.removeXssAttrs=function(){var e=this;this.removeAttrs.forEach((function(t,i){var s=e.wrapElement.querySelectorAll(t.selector);s.length>0&&s.forEach((function(e){e.removeAttribute(t.attribute)}))}))},e}();return e.blazorCultureFormats=G,e.Ajax=Z,e.Animation=Ge,e.rippleEffect=function(t,i,s){var n=function(e){return{selector:e&&e.selector?e.selector:null,ignore:e&&e.ignore?e.ignore:null,rippleFlag:e&&e.rippleFlag,isCenterRipple:e&&e.isCenterRipple,duration:e&&e.duration?e.duration:350}}(i);return!1===n.rippleFlag||void 0===n.rippleFlag&&!e.isRippleEnabled?function(){}:(t.setAttribute("data-ripple","true"),le.add(t,"mousedown",Ke,{parent:t,rippleOptions:n}),le.add(t,"mouseup",Ze,{parent:t,rippleOptions:n,done:s}),le.add(t,"mouseleave",Je,{parent:t,rippleOptions:n}),ae.isPointer&&le.add(t,"transitionend",Je,{parent:t,rippleOptions:n}),function(){t.removeAttribute("data-ripple"),le.remove(t,"mousedown",Ke),le.remove(t,"mouseup",Ze),le.remove(t,"mouseleave",Je),le.remove(t,"transitionend",Je)})},e.enableRipple=function(t){return e.isRippleEnabled=t,e.isRippleEnabled},e.setGlobalAnimation=function(t){e.animationMode=t},e.Base=xe,e.getComponent=Oe,e.removeChildInstance=function(e){for(var t=[].slice.call(e.getElementsByClassName("e-control")),i=0;i<t.length;i++){var s=t[parseInt(i.toString(),10)].classList[1].split("e-")[1],n=Oe(t[parseInt(i.toString(),10)],s);g(n)||n.destroy()}},e.Browser=ae,e.enableVersionBasedPersistence=function(t){e.versionBasedStatePersistence=t},e.Component=Mt,e.ChildProperty=it,e.Position=Dt,e.Draggable=Tt,e.Droppable=zt,e.EventHandler=le,e.onIntlChange=V,e.cldrData=W,e.Internationalization=Q,e.setCulture=function(t){e.defaultCulture=t,V.notify("notifyExternalChange",{locale:e.defaultCulture})},e.setCurrencyCode=function(t){e.defaultCurrencyCode=t,V.notify("notifyExternalChange",{currencyCode:e.defaultCurrencyCode})},e.loadCldr=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=0,s=e;i<s.length;i++){var n=s[i];u(W,n,{},!0)}},e.enableRtl=function(t){void 0===t&&(t=!0),e.rightToLeft=t,V.notify("notifyExternalChange",{enableRtl:e.rightToLeft})},e.getNumericObject=function(t,i){var s=e.IntlBase.getDependables(W,t,"",!0)[_[0]],n=e.IntlBase.getDependables(W,t,"")[_[1]],o=a("defaultNumberingSystem",s),r=y()?a("numberSymbols",s):a("symbols-numberSystem-"+o,s),l=e.IntlBase.getSymbolPattern(i||"decimal",o,s,!1);return u(r,e.IntlBase.getFormatData(l,!0,"",!0),{dateSeparator:e.IntlBase.getDateSeparator(n)})},e.getNumberDependable=function(t,i){var s=e.IntlBase.getDependables(W,t,"",!0);return e.IntlBase.getCurrencySymbol(s.numericObject,i)},e.getDefaultDateObject=function(t){return e.IntlBase.getDependables(W,"",t,!1)[_[1]]},e.KeyboardEvents=Bt,e.L10n=Ut,e.ModuleLoader=tt,e.Property=Ye,e.Complex=Fe,e.ComplexFactory=function(e){return function(t,i){var s={set:Le({},i,e),get:ze({},i,e),enumerable:!0,configurable:!0};Object.defineProperty(t,i,s),We(t,i,"complexProp",{},e)}},e.Collection=function(e,t){return function(i,s){var n={set:Pe(e,s,t),get:ke(e,s,t),enumerable:!0,configurable:!0};Object.defineProperty(i,s,n),We(i,s,"colProp",e,t)}},e.CollectionFactory=function(e){return function(t,i){var s={set:Be([],i,e),get:Ue([],i,e),enumerable:!0,configurable:!0};Object.defineProperty(t,i,s),We(t,i,"colProp",{},e)}},e.Event=qe,e.NotifyPropertyChanges=Ve,e.CreateBuilder=function(e){var t=function(e){return this.element=e,this};return function(i){return t.prototype.hasOwnProperty("create")||((t.prototype=function e(t){if(g(t.prototype.builderObject)){t.prototype.builderObject={properties:{},propCollections:[],add:function(){this.isPropertyArray=!0,this.propCollections.push(u({},this.properties,{}))}};for(var i=/complex/,s=0,n=Object.keys(t.prototype.propList);s<n.length;s++)for(var o=n[s],r=function(s){i.test(o)?t.prototype.builderObject[s.propertyName]=function(t){var i,n={};return p(n,e(s.type)),t(n),i=n.isPropertyArray?n.propCollections:u({},n.properties,{}),this.properties[s.propertyName]=i,n.properties={},n.propCollections=[],n.isPropertyArray=!1,this}:t.prototype.builderObject[s.propertyName]=function(e){return this.properties[s.propertyName]=e,this}},a=0,l=t.prototype.propList[""+o];a<l.length;a++){r(l[a])}}return t.prototype.builderObject}(e)).create=function(){var t=u({},{},this.properties);return this.properties={},new e(t,this.element)}),new t(i)}},e.SwipeSettings=Yt,e.Touch=qt,e.blazorTemplates=gi,e.getRandomId=mi,e.compile=function(e,t,i){var s=vi.compile(e,t,i);return function(e,t,i,n,o,r,a,l){var h=s(e,t,i,a,l);if(y()&&!o){var d=n+mi();if(gi[""+n]||(gi[""+n]=[]),f(r))e.BlazorTemplateId=d,gi[""+n].push(e);else for(var c=0,p=Object.keys(gi[""+n][parseInt(r.toString(),10)]);c<p.length;c++){var u=p[c];"BlazorTemplateId"!==u&&e[""+u]&&(gi[""+n][parseInt(r.toString(),10)][""+u]=e[""+u]),"BlazorTemplateId"===u&&(d=gi[""+n][parseInt(r.toString(),10)][""+u])}return"rowTemplate"===i?[de("tr",{id:d,className:"e-blazor-template"})]:[de("div",{id:d,className:"e-blazor-template"})]}return"string"==typeof h?fi.test(h)?de("svg",{innerHTML:h}).childNodes:de(ui.test(h)?"table":"div",{innerHTML:h}).childNodes:h}},e.updateBlazorTemplate=function(e,t,i,s,n){if(y()){window.sfBlazor.updateTemplate(t,gi[""+e],e,i,n),!1!==s&&(gi[""+e]=[])}},e.resetBlazorTemplate=function(e,t,i){var s=document.getElementById(e);if(s)for(var n=s.getElementsByClassName("blazor-inner-template"),o=0;o<n.length;o++){var r=" ";r=f(i)?n[parseInt(o.toString(),10)].getAttribute("data-templateId"):n[parseInt(i.toString(),10)].getAttribute("data-templateId");var a=document.getElementById(r);if(a)for(var l=a.childNodes.length,h=0;h<l;h++)f(i)?n[parseInt(o.toString(),10)].appendChild(a.childNodes[0]):(n[parseInt(i.toString(),10)].appendChild(a.childNodes[0]),o=n.length)}},e.setTemplateEngine=function(e){vi.compile=e.compile},e.getTemplateEngine=function(){return vi.compile},e.disableBlazorMode=function(){n=!1},e.createInstance=o,e.setImmediate=r,e.getValue=a,e.setValue=l,e.deleteObject=h,e.containerObject=d,e.isObject=c,e.getEnumValue=function(e,t){return e[t]},e.merge=p,e.extend=u,e.isNullOrUndefined=f,e.isUndefined=g,e.getUniqueID=function(e){return e+"_"+s++},e.debounce=m,e.queryParams=function(e){for(var t=[],i=0,s=Object.keys(e);i<s.length;i++){var n=s[i];t.push(encodeURIComponent(n)+"="+encodeURIComponent(""+e[""+n]))}return t.join("&")},e.isObjectArray=function(e){var t=Object.prototype.toString;return"[object Array]"===t.call(e)&&"[object Object]"===t.call(e[0])},e.compareElementParent=v,e.throwError=b,e.print=function(e,t){var i=document.createElement("div"),s=[].slice.call(document.getElementsByTagName("head")[0].querySelectorAll("base, link, style")),n=[].slice.call(document.getElementsByTagName("body")[0].querySelectorAll("link, style"));if(n.length)for(var o=0,r=n.length;o<r;o++)s.push(n[parseInt(o.toString(),10)]);var a="";f(t)&&(t=window.open("","print","height=452,width=1024,tabbar=no")),i.appendChild(e.cloneNode(!0));var l=0;for(r=s.length;l<r;l++)a+=s[parseInt(l.toString(),10)].outerHTML;t.document.write("<!DOCTYPE html> <html><head>"+a+"</head><body>"+i.innerHTML+"<script> (function() { window.ready = true; })(); <\/script></body></html>"),t.document.close(),t.focus();var h=setInterval((function(){t.ready&&(t.print(),t.close(),clearInterval(h))}),500);return t},e.formatUnit=function(e){var t=e+"";return t.match(/auto|cm|mm|in|px|pt|pc|%|em|ex|ch|rem|vw|vh|vmin|vmax/)?t:t+"px"},e.enableBlazorMode=function(){n=!0},e.isBlazor=y,e.getElement=function(e){return e instanceof Node||!y()||f(e.xPath)?e:document.evaluate(e.xPath,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue},e.getInstance=function(e,i){var s="string"==typeof e?document.querySelector(e):e;if(s[""+t])for(var n=0,o=s[""+t];n<o.length;n++){var r=o[n];if(r instanceof i)return r}return null},e.addInstance=function(e,i){var s="string"==typeof e?document.querySelector(e):e;s[""+t]?s[""+t].push(i):s[""+t]=[i]},e.uniqueID=M,e.createElement=de,e.addClass=ce,e.removeClass=pe,e.isVisible=fe,e.prepend=function(e,t,i){for(var s=document.createDocumentFragment(),n=0,o=e;n<o.length;n++){var r=o[n];s.appendChild(r)}return t.insertBefore(s,t.firstElementChild),i&&ge(t),e},e.append=function(e,t,i){var s=document.createDocumentFragment();if(e instanceof NodeList)for(;e.length>0;)s.appendChild(e[0]);else for(var n=0,o=e;n<o.length;n++){var r=o[n];s.appendChild(r)}return t.appendChild(s),i&&ge(t),e},e.detach=me,e.remove=function(e){var t=e.parentNode;le.clearEvents(e),t.removeChild(e)},e.attributes=ve,e.select=be,e.selectAll=ye,e.closest=Ce,e.siblings=function(e){for(var t=[],i=0,s=Array.prototype.slice.call(e.parentNode.childNodes);i<s.length;i++){var n=s[i];n.nodeType===Node.ELEMENT_NODE&&e!==n&&t.push(n)}return t},e.getAttributeOrDefault=function(e,t,i){var s,n=c(e);return f(s=n?a("attributes."+t,e):e.getAttribute(t))&&i&&(n?e.attributes[""+t]=i:e.setAttribute(t,i.toString()),s=i),s},e.setStyleAttribute=we,e.classList=function(e,t,i){ce([e],t),pe([e],i)},e.matches=Se,e.includeInnerHTML=function(e,t){e.innerHTML=t},e.containsClass=function(e,t){return c(e)?new RegExp("\\b"+t+"\\b","i").test(e.attributes.className):e.classList.contains(t)},e.cloneNode=function(e,t){return c(e)?t?u({},{},e,!0):void 0:e.cloneNode(t)},e.Observer=q,e.SanitizeHtmlHelper=Ci,e.componentList=st,e.registerLicense=lt,e.validateLicense=ct,e.getVersion=function(){return rt.version},e.createLicenseOverlay=pt,e}({})},"./modules/navigationsbase.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sf=window.sf||{};window.sf.navigations=window.sf.base.extend({},window.sf.navigations,function(e){"use strict";var t,s,n=(t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,i)},function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}),o=function(e,t,s,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,s,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,s,a):o(t,s))||a);return r>3&&a&&Object.defineProperty(t,s,a),a},r=function(e){function t(t,i){return e.call(this,t,i)||this}return n(t,e),t.prototype.preRender=function(){this.browser=sf.base.Browser.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=sf.base.Browser.isDevice,this.customStep=!0;var e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=sf.base.getUniqueID("hscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add("e-rtl")},t.prototype.render=function(){this.touchModule=new sf.base.Touch(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),sf.base.EventHandler.add(this.scrollEle,"scroll",this.scrollHandler,this),this.isDevice?(this.element.classList.add("e-scroll-device"),this.createOverlay(this.element)):this.createNavIcon(this.element),this.setScrollState()},t.prototype.setScrollState=function(){sf.base.isNullOrUndefined(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetWidth,this.customStep=!1):this.customStep=!0},t.prototype.initialize=function(){var e=this.createElement("div",{className:"e-hscroll-content"}),t=this.createElement("div",{className:"e-hscroll-bar"});t.setAttribute("tabindex","-1");for(var i=this.element,s=0,n=[].slice.call(i.children);s<n.length;s++){var o=n[s];e.appendChild(o)}t.appendChild(e),i.appendChild(t),t.style.overflowX="hidden",this.scrollEle=t,this.scrollItems=e},t.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},t.prototype.getModuleName=function(){return"hScroll"},t.prototype.destroy=function(){var t=this.element;t.style.display="",t.classList.remove("e-hscroll"),t.classList.remove("e-scroll-device"),t.classList.remove("e-rtl");var i=sf.base.selectAll(".e-"+t.id+"_nav.e-scroll-nav",t),s=sf.base.selectAll(".e-scroll-overlay",t);[].slice.call(s).forEach((function(e){sf.base.detach(e)}));for(var n=0,o=[].slice.call(this.scrollItems.children);n<o.length;n++){var r=o[n];t.appendChild(r)}this.uniqueId&&this.element.removeAttribute("id"),sf.base.detach(this.scrollEle),i.length>0&&(sf.base.detach(i[0]),sf.base.isNullOrUndefined(i[1])||sf.base.detach(i[1])),sf.base.EventHandler.remove(this.scrollEle,"scroll",this.scrollHandler),this.touchModule.destroy(),this.touchModule=null,e.prototype.destroy.call(this)},t.prototype.disable=function(e){var t=sf.base.selectAll(".e-scroll-nav:not(.e-overlay)",this.element);e?this.element.classList.add("e-overlay"):this.element.classList.remove("e-overlay"),[].slice.call(t).forEach((function(t){t.setAttribute("tabindex",e?"-1":"0")}))},t.prototype.createOverlay=function(e){var t=e.id.concat("_nav"),i=this.createElement("div",{className:"e-scroll-overlay e-scroll-right-overlay"}),s="e-"+e.id.concat("_nav e-scroll-nav e-scroll-right-nav"),n=this.createElement("div",{id:t.concat("_right"),className:s}),o=this.createElement("div",{className:"e-nav-right-arrow e-nav-arrow e-icons"});n.appendChild(o);var r=this.createElement("div",{className:"e-scroll-overlay e-scroll-left-overlay"});this.ieCheck&&n.classList.add("e-ie-align"),e.appendChild(i),e.appendChild(n),e.insertBefore(r,e.firstChild),this.eventBinding([n])},t.prototype.createNavIcon=function(e){var t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav e-scroll-nav e-scroll-right-nav"),s={role:"button",id:t.concat("_right"),"aria-label":"Scroll right"},n=this.createElement("div",{className:i,attrs:s});n.setAttribute("aria-disabled","false");var o=this.createElement("div",{className:"e-nav-right-arrow e-nav-arrow e-icons"}),r="e-"+e.id.concat("_nav e-scroll-nav e-scroll-left-nav"),a={role:"button",id:t.concat("_left"),"aria-label":"Scroll left"},l=this.createElement("div",{className:r+" e-overlay",attrs:a});l.setAttribute("aria-disabled","true");var h=this.createElement("div",{className:"e-nav-left-arrow e-nav-arrow e-icons"});l.appendChild(h),n.appendChild(o),e.appendChild(n),e.insertBefore(l,e.firstChild),this.ieCheck&&(n.classList.add("e-ie-align"),l.classList.add("e-ie-align")),this.eventBinding([n,l])},t.prototype.onKeyPress=function(e){var t=this;if("Enter"===e.key){this.keyTimer=window.setTimeout((function(){t.keyTimeout=!0,t.eleScrolling(10,e.target,!0)}),100)}},t.prototype.onKeyUp=function(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(e){var t=this;[].slice.call(e).forEach((function(e){new sf.base.Touch(e,{tapHold:t.tabHoldHandler.bind(t),tapHoldThreshold:500}),e.addEventListener("keydown",t.onKeyPress.bind(t)),e.addEventListener("keyup",t.onKeyUp.bind(t)),e.addEventListener("mouseup",t.repeatScroll.bind(t)),e.addEventListener("touchend",t.repeatScroll.bind(t)),e.addEventListener("contextmenu",(function(e){e.preventDefault()})),sf.base.EventHandler.add(e,"click",t.clickEventHandler,t)}))},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(e){var t=this,i=e.originalEvent.target;i=this.contains(i,"e-scroll-nav")?i.firstElementChild:i;this.timeout=window.setInterval((function(){t.eleScrolling(10,i,!0)}),50)},t.prototype.contains=function(e,t){return e.classList.contains(t)},t.prototype.eleScrolling=function(e,t,i){var s=this.element,n=t.classList;n.contains("e-scroll-nav")&&(n=t.querySelector(".e-nav-arrow").classList),this.contains(s,"e-rtl")&&this.browserCheck&&(e=-e),!this.contains(s,"e-rtl")||this.browserCheck||this.ieCheck?n.contains("e-nav-right-arrow")?this.frameScrollRequest(e,"add",i):this.frameScrollRequest(e,"",i):n.contains("e-nav-left-arrow")?this.frameScrollRequest(e,"add",i):this.frameScrollRequest(e,"",i)},t.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},t.prototype.swipeHandler=function(e){var t,i=this.scrollEle;t=e.velocity<=1?e.distanceX/(10*e.velocity):e.distanceX/e.velocity;var s=.5;!function n(){var o=Math.sin(s);o<=0?window.cancelAnimationFrame(o):("Left"===e.swipeDirection?i.scrollLeft+=t*o:"Right"===e.swipeDirection&&(i.scrollLeft-=t*o),s-=.5,window.requestAnimationFrame(n))}()},t.prototype.scrollUpdating=function(e,t){"add"===t?this.scrollEle.scrollLeft+=e:this.scrollEle.scrollLeft-=e,this.enableRtl&&this.scrollEle.scrollLeft>0&&(this.scrollEle.scrollLeft=0)},t.prototype.frameScrollRequest=function(e,t,i){var s=this;if(i)this.scrollUpdating(e,t);else{this.customStep||[].slice.call(sf.base.selectAll(".e-scroll-overlay",this.element)).forEach((function(t){e-=t.offsetWidth}));!function i(){var n,o;s.contains(s.element,"e-rtl")&&s.browserCheck?(n=-e,o=-10):(n=e,o=10),n<10?window.cancelAnimationFrame(o):(s.scrollUpdating(o,t),e-=o,window.requestAnimationFrame(i))}()}},t.prototype.touchHandler=function(e){var t=this.scrollEle,i=e.distanceX;this.ieCheck&&this.contains(this.element,"e-rtl")&&(i=-i),"Left"===e.scrollDirection?t.scrollLeft=t.scrollLeft+i:"Right"===e.scrollDirection&&(t.scrollLeft=t.scrollLeft-i)},t.prototype.arrowDisabling=function(e,t){if(this.isDevice){var i=(sf.base.isNullOrUndefined(e)?t:e).querySelector(".e-nav-arrow");sf.base.isNullOrUndefined(e)?sf.base.classList(i,["e-nav-right-arrow"],["e-nav-left-arrow"]):sf.base.classList(i,["e-nav-left-arrow"],["e-nav-right-arrow"])}else e&&t&&(e.classList.add("e-overlay"),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),t.classList.remove("e-overlay"),t.setAttribute("aria-disabled","false"),t.setAttribute("tabindex","0"));this.repeatScroll()},t.prototype.scrollHandler=function(e){var t=e.target,i=t.offsetWidth,s=(this.element,this.element.querySelector(".e-scroll-left-nav")),n=this.element.querySelector(".e-scroll-right-nav"),o=this.element.querySelector(".e-scroll-left-overlay"),r=this.element.querySelector(".e-scroll-right-overlay"),a=t.scrollLeft;if(a<=0&&(a=-a),this.isDevice&&(!this.enableRtl||this.browserCheck||this.ieCheck||(o=this.element.querySelector(".e-scroll-right-overlay"),r=this.element.querySelector(".e-scroll-left-overlay")),o.style.width=a<40?a+"px":"40px",t.scrollWidth-Math.ceil(i+a)<40?r.style.width=t.scrollWidth-Math.ceil(i+a)+"px":r.style.width="40px"),0===a)this.arrowDisabling(s,n);else if(Math.ceil(i+a+.1)>=t.scrollWidth)this.arrowDisabling(n,s);else{var l=this.element.querySelector(".e-scroll-nav.e-overlay");l&&(l.classList.remove("e-overlay"),l.setAttribute("aria-disabled","false"),l.setAttribute("tabindex","0"))}},t.prototype.onPropertyChanged=function(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++){switch(s[i]){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}}},o([sf.base.Property(null)],t.prototype,"scrollStep",void 0),t=o([sf.base.NotifyPropertyChanges],t)}(sf.base.Component),a=(s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),l=function(e,t,s,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,s,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,s,a):o(t,s))||a);return r>3&&a&&Object.defineProperty(t,s,a),a},h=function(e){function t(t,i){return e.call(this,t,i)||this}return a(t,e),t.prototype.preRender=function(){this.browser=sf.base.Browser.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=sf.base.Browser.isDevice,this.customStep=!0;var e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=sf.base.getUniqueID("vscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add("e-rtl")},t.prototype.render=function(){this.touchModule=new sf.base.Touch(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),sf.base.EventHandler.add(this.scrollEle,"scroll",this.scrollEventHandler,this),this.isDevice?(this.element.classList.add("e-scroll-device"),this.createOverlayElement(this.element)):this.createNavIcon(this.element),this.setScrollState(),sf.base.EventHandler.add(this.element,"wheel",this.wheelEventHandler,this)},t.prototype.setScrollState=function(){sf.base.isNullOrUndefined(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetHeight,this.customStep=!1):this.customStep=!0},t.prototype.initialize=function(){var e=sf.base.createElement("div",{className:"e-vscroll-content"}),t=sf.base.createElement("div",{className:"e-vscroll-bar"});t.setAttribute("tabindex","-1");for(var i=this.element,s=0,n=[].slice.call(i.children);s<n.length;s++){var o=n[s];e.appendChild(o)}t.appendChild(e),i.appendChild(t),t.style.overflow="hidden",this.scrollEle=t,this.scrollItems=e},t.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},t.prototype.getModuleName=function(){return"vScroll"},t.prototype.destroy=function(){var t=this.element;t.style.display="",sf.base.removeClass([this.element],["e-vscroll","e-scroll-device","e-rtl"]);var i=sf.base.selectAll(".e-"+t.id+"_nav.e-scroll-nav",t),s=sf.base.selectAll(".e-scroll-overlay",t);[].slice.call(s).forEach((function(e){sf.base.detach(e)}));for(var n=0,o=[].slice.call(this.scrollItems.children);n<o.length;n++){var r=o[n];t.appendChild(r)}this.uniqueId&&this.element.removeAttribute("id"),sf.base.detach(this.scrollEle),i.length>0&&(sf.base.detach(i[0]),sf.base.isNullOrUndefined(i[1])||sf.base.detach(i[1])),sf.base.EventHandler.remove(this.scrollEle,"scroll",this.scrollEventHandler),this.touchModule.destroy(),this.touchModule=null,e.prototype.destroy.call(this)},t.prototype.disable=function(e){var t=sf.base.selectAll(".e-scroll-nav:not(.e-overlay)",this.element);e?this.element.classList.add("e-overlay"):this.element.classList.remove("e-overlay"),[].slice.call(t).forEach((function(t){t.setAttribute("tabindex",e?"-1":"0")}))},t.prototype.createOverlayElement=function(e){var t=e.id.concat("_nav"),i=sf.base.createElement("div",{className:"e-scroll-overlay e-scroll-down-overlay"}),s="e-"+e.id.concat("_nav e-scroll-nav e-scroll-down-nav"),n=sf.base.createElement("div",{id:t.concat("down"),className:s}),o=sf.base.createElement("div",{className:"e-nav-down-arrow e-nav-arrow e-icons"});n.appendChild(o);var r=sf.base.createElement("div",{className:"e-scroll-overlay e-scroll-up-overlay"});this.ieCheck&&n.classList.add("e-ie-align"),e.appendChild(i),e.appendChild(n),e.insertBefore(r,e.firstChild),this.eventBinding([n])},t.prototype.createNavIcon=function(e){var t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav e-scroll-nav e-scroll-down-nav"),s=sf.base.createElement("div",{id:t.concat("_down"),className:i});s.setAttribute("aria-disabled","false");var n=sf.base.createElement("div",{className:"e-nav-down-arrow e-nav-arrow e-icons"}),o="e-"+e.id.concat("_nav e-scroll-nav e-scroll-up-nav"),r=sf.base.createElement("div",{id:t.concat("_up"),className:o+" e-overlay"});r.setAttribute("aria-disabled","true");var a=sf.base.createElement("div",{className:"e-nav-up-arrow e-nav-arrow e-icons"});r.appendChild(a),s.appendChild(n),s.setAttribute("tabindex","0"),e.appendChild(s),e.insertBefore(r,e.firstChild),this.ieCheck&&(s.classList.add("e-ie-align"),r.classList.add("e-ie-align")),this.eventBinding([s,r])},t.prototype.onKeyPress=function(e){var t=this;if("Enter"===e.key){this.keyTimer=window.setTimeout((function(){t.keyTimeout=!0,t.eleScrolling(10,e.target,!0)}),100)}},t.prototype.onKeyUp=function(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(e){var t=this;[].slice.call(e).forEach((function(e){new sf.base.Touch(e,{tapHold:t.tabHoldHandler.bind(t),tapHoldThreshold:500}),e.addEventListener("keydown",t.onKeyPress.bind(t)),e.addEventListener("keyup",t.onKeyUp.bind(t)),e.addEventListener("mouseup",t.repeatScroll.bind(t)),e.addEventListener("touchend",t.repeatScroll.bind(t)),e.addEventListener("contextmenu",(function(e){e.preventDefault()})),sf.base.EventHandler.add(e,"click",t.clickEventHandler,t)}))},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(e){var t=this,i=e.originalEvent.target;i=this.contains(i,"e-scroll-nav")?i.firstElementChild:i;this.timeout=window.setInterval((function(){t.eleScrolling(10,i,!0)}),50)},t.prototype.contains=function(e,t){return e.classList.contains(t)},t.prototype.eleScrolling=function(e,t,i){var s=t.classList;s.contains("e-scroll-nav")&&(s=t.querySelector(".e-nav-arrow").classList),s.contains("e-nav-down-arrow")?this.frameScrollRequest(e,"add",i):s.contains("e-nav-up-arrow")&&this.frameScrollRequest(e,"",i)},t.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},t.prototype.wheelEventHandler=function(e){e.preventDefault(),this.frameScrollRequest(this.scrollStep,e.deltaY>0?"add":"",!1)},t.prototype.swipeHandler=function(e){var t,i=this.scrollEle;t=e.velocity<=1?e.distanceY/(10*e.velocity):e.distanceY/e.velocity;var s=.5;!function n(){var o=Math.sin(s);o<=0?window.cancelAnimationFrame(o):("Up"===e.swipeDirection?i.scrollTop+=t*o:"Down"===e.swipeDirection&&(i.scrollTop-=t*o),s-=.02,window.requestAnimationFrame(n))}()},t.prototype.scrollUpdating=function(e,t){"add"===t?this.scrollEle.scrollTop+=e:this.scrollEle.scrollTop-=e},t.prototype.frameScrollRequest=function(e,t,i){var s=this;if(i)this.scrollUpdating(e,t);else{this.customStep||[].slice.call(sf.base.selectAll(".e-scroll-overlay",this.element)).forEach((function(t){e-=t.offsetHeight}));!function i(){e<10?window.cancelAnimationFrame(10):(s.scrollUpdating(10,t),e-=10,window.requestAnimationFrame(i))}()}},t.prototype.touchHandler=function(e){var t=this.scrollEle,i=e.distanceY;"Up"===e.scrollDirection?t.scrollTop=t.scrollTop+i:"Down"===e.scrollDirection&&(t.scrollTop=t.scrollTop-i)},t.prototype.arrowDisabling=function(e,t){if(this.isDevice){var i=(sf.base.isNullOrUndefined(e)?t:e).querySelector(".e-nav-arrow");sf.base.isNullOrUndefined(e)?sf.base.classList(i,["e-nav-down-arrow"],["e-nav-up-arrow"]):sf.base.classList(i,["e-nav-up-arrow"],["e-nav-down-arrow"])}else e.classList.add("e-overlay"),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),t.classList.remove("e-overlay"),t.setAttribute("aria-disabled","false"),t.setAttribute("tabindex","0");this.repeatScroll()},t.prototype.scrollEventHandler=function(e){var t=e.target,i=t.offsetHeight,s=this.element.querySelector(".e-scroll-up-nav"),n=this.element.querySelector(".e-scroll-down-nav"),o=this.element.querySelector(".e-scroll-up-overlay"),r=this.element.querySelector(".e-scroll-down-overlay"),a=t.scrollTop;if(a<=0&&(a=-a),this.isDevice&&(o.style.height=a<40?a+"px":"40px",t.scrollHeight-Math.ceil(i+a)<40?r.style.height=t.scrollHeight-Math.ceil(i+a)+"px":r.style.height="40px"),0===a)this.arrowDisabling(s,n);else if(Math.ceil(i+a+.1)>=t.scrollHeight)this.arrowDisabling(n,s);else{var l=this.element.querySelector(".e-scroll-nav.e-overlay");l&&(l.classList.remove("e-overlay"),l.setAttribute("aria-disabled","false"),l.setAttribute("tabindex","0"))}},t.prototype.onPropertyChanged=function(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++){switch(s[i]){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}}},l([sf.base.Property(null)],t.prototype,"scrollStep",void 0),t=l([sf.base.NotifyPropertyChanges],t)}(sf.base.Component);function d(e,t,i,s,n,o){var a=e("div",{className:"e-menu-"+s});return t.appendChild(a),a.appendChild(i),o?(a.style.overflow="hidden",a.style.height=o+"px"):(a.style.maxHeight=t.style.maxHeight,t.style.overflow="hidden"),"vscroll"===s?new h({enableRtl:n},a).scrollStep=sf.base.select(".e-"+s+"-bar",t).offsetHeight/2:new r({enableRtl:n},a).scrollStep=sf.base.select(".e-"+s+"-bar",t).offsetWidth,a}return e.HScroll=r,e.VScroll=h,e.addScrolling=function(e,t,i,s,n,o){var r,a,l=t.parentElement;if("vscroll"===s?(r=o||t.getBoundingClientRect().height,a=i.getBoundingClientRect().height):(r=t.getBoundingClientRect().width,a=i.getBoundingClientRect().width),r<a)return d(e,t,i,s,n,o);if(l){var h=l.getBoundingClientRect().width;return h<r&&"hscroll"===s?(a=h,t.style.maxWidth=h+"px",d(e,t,i,s,n,o)):i}return i},e.destroyScroll=function(e,t,i){if(e){var s=sf.base.select(".e-menu-parent",t);s?i&&i!==s||(e.destroy(),t.parentElement.appendChild(s),sf.base.detach(t)):(e.destroy(),sf.base.detach(t))}},e}({}))},"./modules/popup.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sf=window.sf||{};sf.popups=sf.base.extend({},sf.popups,function(e){"use strict";var t,s=(t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,i)},function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}),n=function(e,t,s,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,s,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,s,a):o(t,s))||a);return r>3&&a&&Object.defineProperty(t,s,a),a},o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),n([sf.base.Property("left")],t.prototype,"X",void 0),n([sf.base.Property("top")],t.prototype,"Y",void 0),t}(sf.base.ChildProperty),r="e-popup",a="e-rtl",l="e-popup-open",h="e-popup-close",d=function(e){function t(t,i){return e.call(this,i,t)||this}return s(t,e),t.prototype.onPropertyChanged=function(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++){switch(s[i]){case"width":sf.base.setStyleAttribute(this.element,{width:sf.base.formatUnit(e.width)});break;case"height":sf.base.setStyleAttribute(this.element,{height:sf.base.formatUnit(e.height)});break;case"zIndex":sf.base.setStyleAttribute(this.element,{zIndex:e.zIndex});break;case"enableRtl":this.setEnableRtl();break;case"position":case"relateTo":this.refreshPosition();break;case"offsetX":var n=e.offsetX-t.offsetX;this.element.style.left=(parseInt(this.element.style.left,10)+n).toString()+"px";break;case"offsetY":var o=e.offsetY-t.offsetY;this.element.style.top=(parseInt(this.element.style.top,10)+o).toString()+"px";break;case"content":this.setContent();break;case"actionOnScroll":"none"!==e.actionOnScroll?this.wireScrollEvents():this.unwireScrollEvents()}}},t.prototype.getModuleName=function(){return"popup"},t.prototype.resolveCollision=function(){this.checkCollision()},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.destroy=function(){this.element.classList.contains("e-popup-open")&&this.unwireEvents(),this.element.classList.remove(r,a,l,h),this.content=null,this.relateTo=null,e.prototype.destroy.call(this)},t.prototype.render=function(){this.element.classList.add(r);var e={};1e3!==this.zIndex&&(e.zIndex=this.zIndex),"auto"!==this.width&&(e.width=sf.base.formatUnit(this.width)),"auto"!==this.height&&(e.height=sf.base.formatUnit(this.height)),sf.base.setStyleAttribute(this.element,e),this.fixedParent=!1,this.setEnableRtl(),this.setContent()},t.prototype.wireEvents=function(){sf.base.Browser.isDevice&&sf.base.EventHandler.add(window,"orientationchange",this.orientationOnChange,this),"none"!==this.actionOnScroll&&this.wireScrollEvents()},t.prototype.wireScrollEvents=function(){if(this.getRelateToElement())for(var e=0,t=this.getScrollableParent(this.getRelateToElement());e<t.length;e++){var i=t[e];sf.base.EventHandler.add(i,"scroll",this.scrollRefresh,this)}},t.prototype.unwireEvents=function(){sf.base.Browser.isDevice&&sf.base.EventHandler.remove(window,"orientationchange",this.orientationOnChange),"none"!==this.actionOnScroll&&this.unwireScrollEvents()},t.prototype.unwireScrollEvents=function(){if(this.getRelateToElement())for(var e=0,t=this.getScrollableParent(this.getRelateToElement());e<t.length;e++){var i=t[e];sf.base.EventHandler.remove(i,"scroll",this.scrollRefresh)}},t.prototype.getRelateToElement=function(){var e=""===this.relateTo||sf.base.isNullOrUndefined(this.relateTo)?document.body:this.relateTo;return this.setProperties({relateTo:e},!0),"string"==typeof this.relateTo?document.querySelector(this.relateTo):this.relateTo},t.prototype.scrollRefresh=function(e){if("reposition"===this.actionOnScroll?sf.base.isNullOrUndefined(this.element)||this.element.offsetParent===e.target||this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&null==e.target.parentElement||this.refreshPosition():"hide"===this.actionOnScroll&&this.hide(),"none"!==this.actionOnScroll&&this.getRelateToElement()){var t=this.isElementOnViewport(this.getRelateToElement(),e.target);t||this.targetInvisibleStatus?t&&(this.targetInvisibleStatus=!1):(this.trigger("targetExitViewport"),this.targetInvisibleStatus=!0)}},t.prototype.isElementOnViewport=function(e,t){for(var i=this.getScrollableParent(e),s=0;s<i.length;s++)if(!this.isElementVisible(e,i[s]))return!1;return!0},t.prototype.isElementVisible=function(e,t){var i=this.checkGetBoundingClientRect(e);if(!i.height||!i.width)return!1;if(sf.base.isNullOrUndefined(this.checkGetBoundingClientRect(t))){var s=window,n={top:s.scrollY,left:s.scrollX,right:s.scrollX+s.outerWidth,bottom:s.scrollY+s.outerHeight},o=sf.popups.calculatePosition(e),r={top:o.top,left:o.left,right:o.left+i.width,bottom:o.top+i.height},a={top:n.bottom-r.top,left:n.right-r.left,bottom:r.bottom-n.top,right:r.right-n.left};return a.top>0&&a.left>0&&a.right>0&&a.bottom>0}var l=t.getBoundingClientRect();return!(i.bottom<l.top||i.bottom>l.bottom||i.right>l.right||i.left<l.left)},t.prototype.preRender=function(){},t.prototype.setEnableRtl=function(){this.reposition(),this.enableRtl?this.element.classList.add(a):this.element.classList.remove(a)},t.prototype.setContent=function(){if(!sf.base.isNullOrUndefined(this.content))if(this.element.innerHTML="","string"==typeof this.content)this.element.textContent=this.content;else{var e=this.getRelateToElement(),t=this.content.props;e.classList.contains("e-dropdown-btn")&&!sf.base.isNullOrUndefined(t)||this.element.appendChild(this.content)}},t.prototype.orientationOnChange=function(){var e=this;setTimeout((function(){e.refreshPosition()}),200)},t.prototype.refreshPosition=function(e,t){sf.base.isNullOrUndefined(e)||this.checkFixedParent(e),this.reposition(),t||this.checkCollision()},t.prototype.reposition=function(){var e,t,i=this.getRelateToElement();if("number"==typeof this.position.X&&"number"==typeof this.position.Y)e={left:this.position.X,top:this.position.Y};else if("string"==typeof this.position.X&&"number"==typeof this.position.Y||"number"==typeof this.position.X&&"string"==typeof this.position.Y){var s=void 0,n=this.element.style.display;this.element.style.display="block",this.element.classList.contains("e-dlg-modal")&&(s=this.element.parentElement.style.display,this.element.parentElement.style.display="block"),t=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY),e="string"==typeof this.position.X?{left:t.left,top:this.position.Y}:{left:this.position.X,top:t.top},this.element.style.display=n,this.element.classList.contains("e-dlg-modal")&&(this.element.parentElement.style.display=s)}else if(i){n=this.element.style.display;this.element.style.display="block",e=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY),this.element.style.display=n}else e={left:0,top:0};sf.base.isNullOrUndefined(e)||(this.element.style.left=e.left+"px",this.element.style.top=e.top+"px")},t.prototype.checkGetBoundingClientRect=function(e){try{return e.getBoundingClientRect()}catch(e){return null}},t.prototype.getAnchorPosition=function(e,t,i,s,n){var o=this.checkGetBoundingClientRect(t),r=this.checkGetBoundingClientRect(e);if(sf.base.isNullOrUndefined(o)||sf.base.isNullOrUndefined(r))return null;var a=e,l={left:0,top:0};switch(t.offsetParent&&"BODY"===t.offsetParent.tagName&&"BODY"===e.tagName?l=sf.popups.calculatePosition(e):(t.classList.contains("e-dlg-modal")&&"BODY"!==a.tagName&&(t=t.parentElement),l=sf.popups.calculateRelativeBasedPosition(a,t)),i.X){default:case"left":break;case"center":t.classList.contains("e-dlg-modal")&&"BODY"===a.tagName&&"container"===this.targetType?l.left+=window.innerWidth/2-o.width/2:"container"===this.targetType?l.left+=r.width/2-o.width/2:l.left+=r.width/2;break;case"right":t.classList.contains("e-dlg-modal")&&"BODY"===a.tagName&&"container"===this.targetType?l.left+=window.innerWidth-o.width:"container"===this.targetType?l.left+=r.width-o.width:l.left+=r.width}switch(i.Y){default:case"top":break;case"center":t.classList.contains("e-dlg-modal")&&"BODY"===a.tagName&&"container"===this.targetType?l.top+=window.innerHeight/2-o.height/2:"container"===this.targetType?l.top+=r.height/2-o.height/2:l.top+=r.height/2;break;case"bottom":t.classList.contains("e-dlg-modal")&&"BODY"===a.tagName&&"container"===this.targetType?l.top+=window.innerHeight-o.height:"container"===this.targetType?l.top+=r.height-o.height:l.top+=r.height}return l.left+=s,l.top+=n,l},t.prototype.callFlip=function(e){var t=this.getRelateToElement();sf.popups.flip(this.element,t,this.offsetX,this.offsetY,this.position.X,this.position.Y,this.viewPortElement,e,this.fixedParent)},t.prototype.callFit=function(e){if(0!==sf.popups.isCollide(this.element,this.viewPortElement).length)if(sf.base.isNullOrUndefined(this.viewPortElement)){var t=sf.popups.fit(this.element,this.viewPortElement,e);e.X&&(this.element.style.left=t.left+"px"),e.Y&&(this.element.style.top=t.top+"px")}else{var i=this.checkGetBoundingClientRect(this.element),s=this.checkGetBoundingClientRect(this.viewPortElement);if(sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(s))return null;e&&!0===e.Y&&(s.top>i.top?this.element.style.top="0px":s.bottom<i.bottom&&(this.element.style.top=parseInt(this.element.style.top,10)-(i.bottom-s.bottom)+"px")),e&&!0===e.X&&(s.right<i.right?this.element.style.left=parseInt(this.element.style.left,10)-(i.right-s.right)+"px":s.left>i.left&&(this.element.style.left=parseInt(this.element.style.left,10)+(s.left-i.left)+"px"))}},t.prototype.checkCollision=function(){var e=this.collision.X,t=this.collision.Y;"none"===e&&"none"===t||("flip"===e&&"flip"===t?this.callFlip({X:!0,Y:!0}):"fit"===e&&"fit"===t?this.callFit({X:!0,Y:!0}):("flip"===e?this.callFlip({X:!0,Y:!1}):"flip"===t&&this.callFlip({Y:!0,X:!1}),"fit"===e?this.callFit({X:!0,Y:!1}):"fit"===t&&this.callFit({X:!1,Y:!0})))},t.prototype.show=function(e,t){var s=this;if(this.getRelateToElement().classList.contains("e-filemanager")&&(this.fmDialogContainer=this.element.getElementsByClassName("e-file-select-wrap")[0]),this.wireEvents(),!sf.base.isNullOrUndefined(this.fmDialogContainer)&&sf.base.Browser.isIos&&(this.fmDialogContainer.style.display="block"),1e3===this.zIndex||!sf.base.isNullOrUndefined(t)){var n=sf.base.isNullOrUndefined(t)?this.element:t;this.zIndex=p(n),sf.base.setStyleAttribute(this.element,{zIndex:this.zIndex})}e=sf.base.isNullOrUndefined(e)||"object"!==i(e)?this.showAnimation:e,"none"===this.collision.X&&"none"===this.collision.Y||(sf.base.removeClass([this.element],h),sf.base.addClass([this.element],l),this.checkCollision(),sf.base.removeClass([this.element],l),sf.base.addClass([this.element],h)),sf.base.isNullOrUndefined(e)?(sf.base.removeClass([this.element],h),sf.base.addClass([this.element],l),this.trigger("open")):(e.begin=function(){s.isDestroyed||(sf.base.removeClass([s.element],h),sf.base.addClass([s.element],l))},e.end=function(){s.isDestroyed||s.trigger("open")},new sf.base.Animation(e).animate(this.element))},t.prototype.hide=function(e){var t=this;e=sf.base.isNullOrUndefined(e)||"object"!==i(e)?this.hideAnimation:e,sf.base.isNullOrUndefined(e)?(sf.base.removeClass([this.element],l),sf.base.addClass([this.element],h),this.trigger("close")):(e.end=function(){t.isDestroyed||(sf.base.removeClass([t.element],l),sf.base.addClass([t.element],h),t.trigger("close"))},new sf.base.Animation(e).animate(this.element)),this.unwireEvents()},t.prototype.getScrollableParent=function(e){return this.checkFixedParent(e),c(e,this.fixedParent)},t.prototype.checkFixedParent=function(e){for(var t=e.parentElement;t&&"HTML"!==t.tagName;){var i=getComputedStyle(t);"fixed"===i.position&&!sf.base.isNullOrUndefined(this.element)&&this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&"hidden"!==getComputedStyle(this.element.offsetParent).overflow&&(this.element.style.top=window.scrollY>parseInt(this.element.style.top,10)?sf.base.formatUnit(window.scrollY-parseInt(this.element.style.top,10)):sf.base.formatUnit(parseInt(this.element.style.top,10)-window.scrollY),this.element.style.position="fixed",this.fixedParent=!0),t=t.parentElement,!sf.base.isNullOrUndefined(this.element)&&sf.base.isNullOrUndefined(this.element.offsetParent)&&"fixed"===i.position&&"fixed"===this.element.style.position&&(this.fixedParent=!0)}},n([sf.base.Property("auto")],t.prototype,"height",void 0),n([sf.base.Property("auto")],t.prototype,"width",void 0),n([sf.base.Property(null)],t.prototype,"content",void 0),n([sf.base.Property("container")],t.prototype,"targetType",void 0),n([sf.base.Property(null)],t.prototype,"viewPortElement",void 0),n([sf.base.Property({X:"none",Y:"none"})],t.prototype,"collision",void 0),n([sf.base.Property("")],t.prototype,"relateTo",void 0),n([sf.base.Complex({},o)],t.prototype,"position",void 0),n([sf.base.Property(0)],t.prototype,"offsetX",void 0),n([sf.base.Property(0)],t.prototype,"offsetY",void 0),n([sf.base.Property(1e3)],t.prototype,"zIndex",void 0),n([sf.base.Property(!1)],t.prototype,"enableRtl",void 0),n([sf.base.Property("reposition")],t.prototype,"actionOnScroll",void 0),n([sf.base.Property(null)],t.prototype,"showAnimation",void 0),n([sf.base.Property(null)],t.prototype,"hideAnimation",void 0),n([sf.base.Event()],t.prototype,"open",void 0),n([sf.base.Event()],t.prototype,"close",void 0),n([sf.base.Event()],t.prototype,"targetExitViewport",void 0),t=n([sf.base.NotifyPropertyChanges],t)}(sf.base.Component);function c(e,t){for(var i=getComputedStyle(e),s=[],n=/(auto|scroll)/,o=e.parentElement;o&&"HTML"!==o.tagName;){var r=getComputedStyle(o);"absolute"===i.position&&"static"===r.position||!n.test(r.overflow+r.overflowY+r.overflowX)||s.push(o),o=o.parentElement}return t||s.push(document),s}function p(e){for(var t=e.parentElement,i=[];t&&"BODY"!==t.tagName;){var s=document.defaultView.getComputedStyle(t,null).getPropertyValue("z-index"),n=document.defaultView.getComputedStyle(t,null).getPropertyValue("position");"auto"!==s&&"static"!==n&&i.push(s),t=t.parentElement}for(var o=[],r=0;r<document.body.children.length;r++)if(!e.isEqualNode(document.body.children[r])){s=document.defaultView.getComputedStyle(document.body.children[r],null).getPropertyValue("z-index"),n=document.defaultView.getComputedStyle(document.body.children[r],null).getPropertyValue("position");"auto"!==s&&"static"!==n&&o.push(s)}o.push("999");var a=[];if(!sf.base.isNullOrUndefined(e.parentElement)&&"BODY"!==e.parentElement.tagName){var l=[].slice.call(e.parentElement.children);for(r=0;r<l.length;r++)if(!e.isEqualNode(l[r])){s=document.defaultView.getComputedStyle(l[r],null).getPropertyValue("z-index"),n=document.defaultView.getComputedStyle(l[r],null).getPropertyValue("position");"auto"!==s&&"static"!==n&&a.push(s)}}var h=i.concat(o,a),d=Math.max.apply(Math,h)+1;return d>2147483647?2147483647:d}return e.PositionData=o,e.Popup=d,e.getScrollableParent=c,e.getZindexPartial=p,e.getMaxZindex=function(e){void 0===e&&(e=["*"]);for(var t=[],i=0;i<e.length;i++)for(var s=document.getElementsByTagName(e[i]),n=0;n<s.length;n++){var o=document.defaultView.getComputedStyle(s[n],null).getPropertyValue("z-index"),r=document.defaultView.getComputedStyle(s[n],null).getPropertyValue("position");"auto"!==o&&"static"!==r&&t.push(o)}var a=Math.max.apply(Math,t)+1;return a>2147483647?2147483647:a},e}({}))},"./modules/popupsbase.js":function(e,t,i){window.sf=window.sf||{};window.sf.popups=window.sf.base.extend({},window.sf.popups,function(e){"use strict";var t,i,s,n,o,r,a=!1;function l(e,o,r,l,c){if(i=void 0,i=c,a=!!l,!e)return{left:0,top:0};o||(o="left"),r||(r="top"),n=e.ownerDocument,s=e;return function(e,i,n){switch(t=s.getBoundingClientRect(),i+e){case"topcenter":h(b(),n),d(g(),n);break;case"topright":h(v(),n),d(g(),n);break;case"centercenter":h(b(),n),d(f(),n);break;case"centerright":h(v(),n),d(f(),n);break;case"centerleft":h(m(),n),d(f(),n);break;case"bottomcenter":h(b(),n),d(u(),n);break;case"bottomright":h(v(),n),d(u(),n);break;case"bottomleft":h(m(),n),d(u(),n);break;default:case"topleft":h(m(),n),d(g(),n)}return s=null,n}(o.toLowerCase(),r.toLowerCase(),{left:0,top:0})}function h(e,t){t.left=e}function d(e,t){t.top=e}function c(){return n.documentElement.scrollTop||n.body.scrollTop}function p(){return n.documentElement.scrollLeft||n.body.scrollLeft}function u(){return a?t.bottom:t.bottom+c()}function f(){return g()+t.height/2}function g(){return a?t.top:t.top+c()}function m(){return t.left+p()}function v(){var e=s&&s.classList.contains("e-date-range-wrapper")?i?i.width:0:i&&t.width>=i.width?i.width:0;return t.right+p()-e}function b(){return m()+t.width/2}function y(e,t,i){e.TL={top:t.position.top+t.offsetY,left:t.position.left+t.offsetX},e.TR={top:e.TL.top,left:e.TL.left+i.width},e.BL={top:e.TL.top+i.height,left:e.TL.left},e.BR={top:e.TL.top+i.height,left:e.TL.left+i.width}}function M(e,t){var i=!1,s=!1;return e-j()<E()&&(i=!0),t>I()&&(s=!0),{leftSide:i,rightSide:s}}function C(e,t){var i=!1,s=!1;return e-T()<O()&&(i=!0),t>D()&&(s=!0),{topSide:i,bottomSide:s}}function w(){return r.getBoundingClientRect().width}function S(){return r.getBoundingClientRect().height}function N(){return r.getBoundingClientRect().left}function x(){return r.getBoundingClientRect().top}function O(){return r?x():0}function E(){return r?N():0}function I(){return r?j()+N()+w():j()+z()}function D(){return r?T()+x()+S():T()+A()}function T(){return o.documentElement.scrollTop||o.body.scrollTop}function j(){return o.documentElement.scrollLeft||o.body.scrollLeft}function A(){return window.innerHeight}function z(){var e=window.innerWidth,t=document.documentElement.getBoundingClientRect();return e-(e-(sf.base.isNullOrUndefined(document.documentElement)?0:t.width))}var L,k,P,B,U,R,H,Y,F=["north-west","north","north-east","west","east","south-west","south","south-east"],q=["e-restrict-left"],V=["north","west","east","south"],W=0,_=0,Q=0,X=0,G=0,K=0,Z=null,J=null,$=null,ee=!0,te=0,ie=!0;function se(e){he();var t=sf.base.createElement("span",{attrs:{unselectable:"on",contenteditable:"false"}});t.setAttribute("class","e-dialog-border-resize e-"+e),"south"===e&&(t.style.height="2px",t.style.width="100%",t.style.bottom="0px",t.style.left="0px"),"north"===e&&(t.style.height="2px",t.style.width="100%",t.style.top="0px",t.style.left="0px"),"east"===e&&(t.style.height="100%",t.style.width="2px",t.style.right="0px",t.style.top="0px"),"west"===e&&(t.style.height="100%",t.style.width="2px",t.style.left="0px",t.style.top="0px"),L.appendChild(t)}function ne(e){var t;return sf.base.isNullOrUndefined(e)||(t="string"==typeof e?document.querySelector(e):e),t}function oe(e){sf.base.isNullOrUndefined(e)&&(e=this);for(var t=L.querySelectorAll(".e-resize-handle"),i=0;i<t.length;i++){k=t[i],sf.base.EventHandler.add(k,"mousedown",ae,e);var s="msie"===sf.base.Browser.info.name?"pointerdown":"touchstart";sf.base.EventHandler.add(k,s,de,e)}var n=L.querySelectorAll(".e-dialog-border-resize");if(!sf.base.isNullOrUndefined(n))for(i=0;i<n.length;i++){k=n[i],sf.base.EventHandler.add(k,"mousedown",ae,e);s="msie"===sf.base.Browser.info.name?"pointerdown":"touchstart";sf.base.EventHandler.add(k,s,de,e)}}function re(e){return e.indexOf("mouse")>-1?"mouse":"touch"}function ae(e){if(e.preventDefault(),L=e.target.parentElement,he(),G=e.pageX,K=e.pageY,e.target.classList.add("e-focused-handle"),sf.base.isNullOrUndefined(Z)||!0!==Z(e,this)){this.targetEle&&L&&L.querySelector(".e-dlg-resizable")&&(H="body"===this.target?null:this.targetEle,R=this.targetEle.clientWidth,B=this.targetEle.clientHeight);var t=sf.base.isNullOrUndefined(H)?document:H;sf.base.EventHandler.add(t,"mousemove",ce,this),sf.base.EventHandler.add(document,"mouseup",le,this);for(var i=0;i<q.length;i++)ee=!L.classList.contains(q[i])}}function le(e){var t="msie"===sf.base.Browser.info.name?"pointermove":"touchmove",i="msie"===sf.base.Browser.info.name?"pointerup":"touchend",s=sf.base.isNullOrUndefined(H)?document:H,n="msie"===sf.base.Browser.info.name?"pointerdown":"touchstart";sf.base.EventHandler.remove(s,"mousemove",ce),sf.base.EventHandler.remove(s,t,ce),sf.base.EventHandler.remove(s,n,ce),sf.base.isNullOrUndefined(document.body.querySelector(".e-focused-handle"))||document.body.querySelector(".e-focused-handle").classList.remove("e-focused-handle"),sf.base.isNullOrUndefined($)||$(e,this),sf.base.EventHandler.remove(document,"mouseup",le),sf.base.EventHandler.remove(document,i,le)}function he(){W=parseFloat(getComputedStyle(L,null).getPropertyValue("width").replace("px","")),_=parseFloat(getComputedStyle(L,null).getPropertyValue("height").replace("px","")),Q=L.getBoundingClientRect().left,X=L.getBoundingClientRect().top}function de(e){L=e.target.parentElement,he();var t=L.classList.contains("e-dialog");(e.target.classList.contains("e-resize-handle")||e.target.classList.contains("e-dialog-border-resize"))&&t&&e.target.classList.add("e-focused-handle");var i=e.touches?e.changedTouches[0]:e;if(G=i.pageX,K=i.pageY,sf.base.isNullOrUndefined(Z)||!0!==Z(e,this)){var s="msie"===sf.base.Browser.info.name?"pointermove":"touchmove",n="msie"===sf.base.Browser.info.name?"pointerup":"touchend",o=sf.base.isNullOrUndefined(H)?document:H;sf.base.EventHandler.add(o,s,ce,this),sf.base.EventHandler.add(document,n,le,this)}}function ce(e){if(e.target.classList.contains("e-resize-handle")&&e.target.classList.contains("e-focused-handle")?k=e.target:sf.base.isNullOrUndefined(document.body.querySelector(".e-focused-handle"))||(k=document.body.querySelector(".e-focused-handle")),!sf.base.isNullOrUndefined(k)){for(var t="",i=0;i<F.length;i++)k.classList.contains("e-"+F[i])&&(t=F[i]);switch(sf.base.isNullOrUndefined(J)||J(e,this),t){case"south":ue(e);break;case"north":fe(e);break;case"west":ge(e);break;case"east":me(e);break;case"south-east":ue(e),me(e);break;case"south-west":ue(e),ge(e);break;case"north-east":fe(e),me(e);break;case"north-west":fe(e),ge(e)}}}function pe(e){return e.getBoundingClientRect()}function ue(e){var t,i=document.documentElement.clientHeight,s=!1,n=(e.touches?e.changedTouches[0]:e).pageY,o=pe(L);sf.base.isNullOrUndefined(H)||(t=pe(H)),sf.base.isNullOrUndefined(H)?sf.base.isNullOrUndefined(H)&&(i-n>=0||o.top<0)&&(s=!0):s=!0;var r=_+(n-K);r=r>P?r:P;var a=0;sf.base.isNullOrUndefined(H)||(a=t.top);var l=sf.base.isNullOrUndefined(H)?0:H.offsetHeight-H.clientHeight,h=o.top-a-l/2;if(h=h<0?0:h,o.top>0&&h+r>B){if(s=!1,L.classList.contains("e-resize-viewport"))return;L.style.height=B-parseInt(h.toString(),10)+"px"}else{var d=0;if(s){o.top<0&&i+(o.height+o.top)>0&&r+(d=o.top)<=30&&(r=o.height-(o.height+o.top)+30),r+o.top>=B&&(L.style.height=o.height+(i-(o.height+o.top))+"px");var c=sf.base.isNullOrUndefined(H)?d:h;r>=P&&r+c<=B&&(L.style.height=r+"px")}}}function fe(e){var t,i=!1,s="mouse"===re(e.type)?e.pageY:e.touches[0].pageY,n=pe(L);sf.base.isNullOrUndefined(H)||(t=pe(H)),(!sf.base.isNullOrUndefined(H)&&n.top-t.top>0||sf.base.isNullOrUndefined(H)&&s>0)&&(i=!0);var o=_-(s-K);if(i&&o>=P&&o<=B){var r=0;sf.base.isNullOrUndefined(H)||(r=t.top);var a=X-r+(s-K);a=a>0?a:1,L.style.height=o+"px",L.style.top=a+"px"}}function ge(e){var t,i=document.documentElement.clientWidth,s=!1;sf.base.isNullOrUndefined(H)||(t=pe(H));var n="mouse"===re(e.type)?e.pageX:e.touches[0].pageX,o=pe(L),r=sf.base.isNullOrUndefined(H)?0:H.offsetWidth-H.clientWidth,a=sf.base.isNullOrUndefined(H)?0:t.left,l=sf.base.isNullOrUndefined(H)?0:t.width;sf.base.isNullOrUndefined(Y)&&(sf.base.isNullOrUndefined(H)?Y=i:(Y=o.left-a-r/2+o.width,Y+=l-r-Y)),(!sf.base.isNullOrUndefined(H)&&Math.floor(o.left-t.left+o.width+(t.right-o.right))-r<=R||sf.base.isNullOrUndefined(H)&&n>=0)&&(s=!0);var h=W-(n-G);if(ee&&(h=h>Y?Y:h),s&&h>=U&&h<=R){var d=0;sf.base.isNullOrUndefined(H)||(d=t.left);var c=Q-d+(n-G);c=c>0?c:1,h!==te&&ie&&(L.style.width=h+"px"),ee&&(L.style.left=c+"px",ie=1!==c)}te=h}function me(e){var t,i=document.documentElement.clientWidth,s=!1;sf.base.isNullOrUndefined(H)||(t=pe(H));var n=(e.touches?e.changedTouches[0]:e).pageX,o=pe(L);(!sf.base.isNullOrUndefined(H)&&(o.left-t.left+o.width<=R||o.right-t.left>=o.width)||sf.base.isNullOrUndefined(H)&&i-n>0)&&(s=!0);var r=W+(n-G),a=0;if(sf.base.isNullOrUndefined(H)||(a=t.left),o.left-a+r>R){if(s=!1,L.classList.contains("e-resize-viewport"))return;L.style.width=R-(o.left-a)+"px"}s&&r>=U&&r<=R&&(L.style.width=r+"px")}return e.fit=function(e,t,i,s){if(void 0===t&&(t=null),void 0===i&&(i={X:!1,Y:!1}),!i.Y&&!i.X)return{left:0,top:0};var n=e.getBoundingClientRect();if(r=t,o=e.ownerDocument,s||(s=l(e,"left","top")),i.X){var a=r?w():z(),h=E(),d=I(),c=h-s.left,p=s.left+n.width-d;n.width>a?s.left=c>0&&p<=0?d-n.width:p>0&&c<=0?h:c>p?d-n.width:h:c>0?s.left+=c:p>0&&(s.left-=p)}if(i.Y){var u=r?S():A(),f=O(),g=D(),m=f-s.top,v=s.top+n.height-g;n.height>u?s.top=m>0&&v<=0?g-n.height:v>0&&m<=0?f:m>v?g-n.height:f:m>0?s.top+=m:v>0&&(s.top-=v)}return s},e.isCollide=function(e,t,i,s){void 0===t&&(t=null);var n=l(e,"left","top");i&&(n.left=i),s&&(n.top=s);var a=[];r=t,o=e.ownerDocument;var h=e.getBoundingClientRect(),d=n.top,c=n.left,p=n.left+h.width,u=C(d,n.top+h.height),f=M(c,p);return u.topSide&&a.push("top"),f.rightSide&&a.push("right"),f.leftSide&&a.push("left"),u.bottomSide&&a.push("bottom"),a},e.flip=function(e,t,i,s,n,a,h,d,c){if(void 0===h&&(h=null),void 0===d&&(d={X:!0,Y:!0}),t&&e&&n&&a&&(d.X||d.Y)){var p,u={TL:null,TR:null,BL:null,BR:null},f={TL:null,TR:null,BL:null,BR:null};if("none"===window.getComputedStyle(e).display){var g=e.style.visibility;e.style.visibility="hidden",e.style.display="block",p=e.getBoundingClientRect(),e.style.removeProperty("display"),e.style.visibility=g}else p=e.getBoundingClientRect();var m={posX:n,posY:a,offsetX:i,offsetY:s,position:{left:0,top:0}};r=h,o=t.ownerDocument,function(e,t,i,s,n){i.position=l(e,i.posX,i.posY,s,n),t.TL=l(e,"left","top",s,n),t.TR=l(e,"right","top",s,n),t.BR=l(e,"left","bottom",s,n),t.BL=l(e,"right","bottom",s,n)}(t,u,m,c,p),y(f,m,p),d.X&&function e(t,i,s,n,o,r){var a=M(i.TL.left,i.TR.left);s.TL.left-j()<=E()&&(a.leftSide=!1);s.TR.left>I()&&(a.rightSide=!1);(a.leftSide&&!a.rightSide||!a.leftSide&&a.rightSide)&&("right"===n.posX?n.posX="left":n.posX="right",n.offsetX=n.offsetX+o.width,n.offsetX=-1*n.offsetX,n.position=l(t,n.posX,n.posY,!1),y(i,n,o),r&&e(t,i,s,n,o,!1))}(t,f,u,m,p,!0),d.Y&&u.TL.top>-1&&function e(t,i,s,n,o,r){var a=C(i.TL.top,i.BL.top);s.TL.top-T()<=O()&&(a.topSide=!1);s.BL.top>=D()&&t.getBoundingClientRect().bottom<window.innerHeight&&(a.bottomSide=!1);(a.topSide&&!a.bottomSide||!a.topSide&&a.bottomSide)&&("top"===n.posY?n.posY="bottom":n.posY="top",n.offsetY=n.offsetY+o.height,n.offsetY=-1*n.offsetY,n.position=l(t,n.posX,n.posY,!1,o),y(i,n,o),r&&e(t,i,s,n,o,!1))}(t,f,u,m,p,!0),function(e,t,i){var s=0,n=0;if(null!=e.offsetParent&&("absolute"===getComputedStyle(e.offsetParent).position||"relative"===getComputedStyle(e.offsetParent).position)){var o=l(e.offsetParent,"left","top",!1,i);s=o.left,n=o.top}e.style.top=t.position.top+t.offsetY-n+"px",e.style.left=t.position.left+t.offsetX-s+"px"}(e,m,p)}},e.calculateRelativeBasedPosition=function(e,t){var i=!1,s={left:0,top:0},n=e;if(!e||!t)return s;for(sf.base.isNullOrUndefined(t.offsetParent)&&"fixed"===t.style.position&&(i=!0);(t.offsetParent||i)&&e&&t.offsetParent!==e;)s.left+=e.offsetLeft,s.top+=e.offsetTop,e=e.offsetParent;for(e=n;(t.offsetParent||i)&&e&&t.offsetParent!==e;)s.left-=e.scrollLeft,s.top-=e.scrollTop,e=e.parentElement;return s},e.calculatePosition=l,e.createResize=function(e){Z=e.resizeBegin,J=e.resizing,$=e.resizeComplete,L=ne(e.element),H=ne(e.boundary);for(var t=e.direction.split(" "),i=0;i<t.length;i++)if(V.indexOf(t[i])>=0&&t[i])se(t[i]);else if(""!==t[i].trim()){var s=sf.base.createElement("div",{className:"e-icons e-resize-handle e-"+t[i]});L.appendChild(s)}P=e.minHeight,U=e.minWidth,R=e.maxWidth,B=e.maxHeight,e.proxy&&e.proxy.element&&e.proxy.element.classList.contains("e-dialog")?oe(e.proxy):oe()},e.setMinHeight=function(e){P=e},e.setMaxWidth=function(e){R=e},e.setMaxHeight=function(e){B=e},e.removeResize=function(){for(var e=L.querySelectorAll(".e-resize-handle"),t=0;t<e.length;t++)sf.base.detach(e[t]);var i=L.querySelectorAll(".e-dialog-border-resize");if(!sf.base.isNullOrUndefined(i))for(t=0;t<i.length;t++)sf.base.detach(i[t])},e}({}))},"./modules/sf-accordion.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Accordion=function(){"use strict";var e="e-acrdn-item",t="e-acrdn-header",i=function(){function i(e,t,i,s){window.sfBlazor=window.sfBlazor,this.keyConfigs={moveUp:"uparrow",moveDown:"downarrow",enter:"enter",space:"space",home:"home",end:"end"},this.element=t,this.dotNetRef=s,this.options=i,this.dataId=e,window.sfBlazor.setCompInstance(this)}return i.prototype.destroy=function(){var e=this.element;this.unwireEvents(),this.isDestroy=!0,e.classList.remove("e-acrdn-root"),!this.isNested&&sf.base.isRippleEnabled&&this.removeRippleEffect()},i.prototype.render=function(){var e=sf.base.closest(this.element,".e-acrdn-panel");this.isNested=!1,this.isDestroy||(this.isDestroy=!1),e&&e.firstElementChild&&e.firstElementChild.firstElementChild?e.firstElementChild.firstElementChild.classList.contains("e-accordion")&&(e.classList.add("e-nested"),this.isNested=!0):this.element.classList.add("e-acrdn-root"),this.wireFocusEvents(),this.wireEvents()},i.prototype.wireFocusEvents=function(){for(var i=0,s=[].slice.call(this.element.querySelectorAll("."+e));i<s.length;i++){var n=s[i],o=n.querySelector("."+t);n.childElementCount>0&&o&&(sf.base.EventHandler.clearEvents(o),sf.base.EventHandler.add(o,"focus",this.focusIn,this),sf.base.EventHandler.add(o,"blur",this.focusOut,this))}},i.prototype.unwireEvents=function(){sf.base.isNullOrUndefined(this.keyModule)||this.keyModule.destroy()},i.prototype.wireEvents=function(){this.isNested||this.isDestroy||(this.removeRippleEffect=sf.base.rippleEffect(this.element,{selector:"."+t})),this.isNested||(this.keyModule=new sf.base.KeyboardEvents(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}))},i.prototype.focusIn=function(e){e.target.parentElement.classList.add("e-item-focus")},i.prototype.focusOut=function(e){e.target.parentElement.classList.remove("e-item-focus")},i.prototype.afterContentRender=function(t){var i,s=this,n=[],o=t,r=o.children[0],a=o.children[1];r?i=sf.base.closest(r,"."+e):a&&(i=sf.base.closest(a,"."+e));var l=this.element.children;[].slice.call(l).forEach((function(e){e.classList.contains("e-active")&&n.push(e)}));var h=[].slice.call(this.element.querySelectorAll("."+e+" [e-animate]"));if(h.length>0)for(var d=0,c=h;d<c.length;d++){var p=c[d];n.push(p.parentElement)}var u=-1!==n.indexOf(i)&&"true"===a.getAttribute("e-animate"),f=!1;if(!sf.base.isNullOrUndefined(o)&&!sf.base.isNullOrUndefined(r)){var g=sf.base.select(".e-acrdn-panel",o),m=sf.base.closest(o,".e-acrdn-root").querySelector(".e-expand-state");if(sf.base.isNullOrUndefined(g))return;f=m===o,!sf.base.isVisible(g)||u&&!i.classList.contains("e-selected")?(n.length>0&&"Single"===this.options.expandMode&&!u&&n.forEach((function(e){s.collapse(sf.base.select(".e-acrdn-panel",e)),e.classList.remove("e-expand-state")})),this.expand(g)):this.collapse(g),sf.base.isNullOrUndefined(m)||f||m.classList.remove("e-expand-state")}},i.prototype.eleMoveFocus=function(i,s,n){var o,r=sf.base.closest(n,"."+e);n===s?o=("moveUp"===i?n.lastElementChild:n).querySelector("."+t):n.classList.contains(t)&&(r="moveUp"===i?r.previousElementSibling:r.nextElementSibling)&&(o=sf.base.select("."+t,r)),o&&o.focus()},i.prototype.keyActionHandler=function(e){var i=e.target,s=sf.base.closest(e.target,t);if(!sf.base.isNullOrUndefined(s)||i.classList.contains("e-accordion")||i.classList.contains(t)){var n,o=this.element;switch(e.action){case"moveUp":case"moveDown":this.eleMoveFocus(e.action,o,i);break;case"space":case"enter":n=i.nextElementSibling,!sf.base.isNullOrUndefined(n)&&n.classList.contains("e-acrdn-panel")?"true"!==n.getAttribute("e-animate")&&i.click():i.click(),e.preventDefault();break;case"home":case"end":("home"===e.action?o.firstElementChild.children[0]:o.lastElementChild.children[0]).focus(),e.preventDefault()}}},i.prototype.expand=function(t){var i=sf.base.closest(t,"."+e);sf.base.isNullOrUndefined(t)||sf.base.isVisible(t)&&"true"!==t.getAttribute("e-animate")||i.classList.contains("e-overlay")||this.dotNetRef.invokeMethodAsync("TriggerExpandingEvent",this.getIndexByItem(i))},i.prototype.expandAnimation=function(e,t,i,s,n,o){var r,a=this;this.lastActiveItemId=s.id,"None"===e&&"Enable"===sf.base.animationMode&&(e="SlideDown",n.name="SlideDown"),"SlideDown"===e?(n.begin=function(){a.expandProgress("begin",t,i,s,o),i.style.position="absolute",r=s.offsetHeight,i.style.maxHeight=i.offsetHeight+"px",s.style.maxHeight=""},n.progress=function(){s.style.minHeight=r+i.offsetHeight+"px"},n.end=function(){sf.base.setStyleAttribute(i,{position:"",maxHeight:""}),s.style.minHeight="",a.expandProgress("end",t,i,s,o)}):(n.begin=function(){a.expandProgress("begin",t,i,s,o)},n.end=function(){a.expandProgress("end",t,i,s,o)}),new sf.base.Animation(n).animate(i)},i.prototype.expandProgress=function(e,t,i,s,n){sf.base.removeClass([i],"e-content-hide"),sf.base.addClass([s],"e-selected"),sf.base.addClass([t],"e-expand-icon"),"end"===e&&(sf.base.addClass([s],"e-active"),i.setAttribute("aria-hidden","false"),sf.base.attributes(s.firstElementChild,{"aria-expanded":"true"}),t.classList.remove("e-toggle-animation"),this.dotNetRef.invokeMethodAsync("TriggerExpandedEvent",n),this.setPersistence("accordion"+this.element.id))},i.prototype.expandedItemsPush=function(e){var t=this.getIndexByItem(e);if(-1===this.options.expandedIndices.indexOf(t)){var i=[].slice.call(this.options.expandedIndices);i.push(t),this.options.expandedIndices=i}},i.prototype.getIndexByItem=function(e){var t=this.getItemElements();return[].slice.call(t).indexOf(e)},i.prototype.getItemElements=function(){var t=[],i=this.element.children;return[].slice.call(i).forEach((function(i){i.classList.contains(e)&&t.push(i)})),t},i.prototype.expandedItemsPop=function(e){var t=this.getIndexByItem(e),i=[].slice.call(this.options.expandedIndices),s=i.indexOf(t);s>-1&&i.splice(s,1),this.options.expandedIndices=i},i.prototype.collapse=function(t){var i=sf.base.closest(t,"."+e);sf.base.isNullOrUndefined(t)||!sf.base.isVisible(t)||i.classList.contains("e-overlay")||this.dotNetRef.invokeMethodAsync("TriggerCollapsingEvent",this.getIndexByItem(i))},i.prototype.collapseAnimation=function(e,t,i,s,n,o){var r,a,l,h,d=this;this.lastActiveItemId=i.id,"None"===e&&"Enable"===sf.base.animationMode&&(e="SlideUp",n.name="SlideUp"),"SlideUp"===e?(n.begin=function(){l=i.offsetHeight,i.style.minHeight=l+"px",t.style.position="absolute",r=i.offsetHeight,a=t.offsetHeight,t.style.maxHeight=a+"px",d.collapseProgress("begin",s,t,i,o)},n.progress=function(){(h=r-(a-t.offsetHeight))<l&&(i.style.minHeight=h+"px")},n.end=function(){t.style.display="none",d.collapseProgress("end",s,t,i,o),i.style.minHeight="",sf.base.setStyleAttribute(t,{position:"",maxHeight:"",display:""})}):(n.begin=function(){d.collapseProgress("begin",s,t,i,o)},n.end=function(){d.collapseProgress("end",s,t,i,o)}),new sf.base.Animation(n).animate(t)},i.prototype.collapseProgress=function(e,t,i,s,n){sf.base.removeClass([t],"e-expand-icon"),sf.base.removeClass([s],"e-selected"),"end"===e&&(sf.base.addClass([i],"e-content-hide"),t.classList.remove("e-toggle-animation"),sf.base.removeClass([s],"e-active"),i.setAttribute("aria-hidden","true"),sf.base.attributes(s.firstElementChild,{"aria-expanded":"false"}),this.dotNetRef.invokeMethodAsync("TriggerCollapsedEvent",n),this.setPersistence("accordion"+this.element.id))},i.prototype.expandingItem=function(t){this.accItem=sf.base.selectAll(":scope > ."+e,this.element);var i=this.getElementByIndex(t.index),s=sf.base.select(".e-acrdn-panel",i),n=sf.base.closest(i,".e-acrdn-root"),o=sf.base.select(".e-toggle-icon",i).firstElementChild,r=n.querySelector(".e-expand-state"),a={name:this.options.animation.expand.effect,duration:this.options.animation.expand.duration,timingFunction:this.options.animation.expand.easing};o.classList.add("e-toggle-animation"),this.expandedItemsPush(i),sf.base.isNullOrUndefined(r)||r.classList.remove("e-expand-state"),i.classList.add("e-expand-state"),"None"===a.name&&"Enable"!==sf.base.animationMode||"Disable"===sf.base.animationMode?(this.expandProgress("begin",o,s,i,t),this.expandProgress("end",o,s,i,t)):this.expandAnimation(a.name,o,s,i,a,t)},i.prototype.getElementByIndex=function(e){return this.accItem[e]?this.accItem[e]:null},i.prototype.collapsingItem=function(t){this.accItem=sf.base.selectAll(":scope > ."+e,this.element);var i=this.getElementByIndex(t.index),s=sf.base.select(".e-acrdn-panel",i),n=sf.base.select(".e-toggle-icon",i).firstElementChild,o={name:this.options.animation.collapse.effect,duration:this.options.animation.collapse.duration,timingFunction:this.options.animation.collapse.easing};this.expandedItemsPop(i),i.classList.add("e-expand-state"),n.classList.add("e-toggle-animation"),"None"===o.name&&"Enable"!==sf.base.animationMode||"Disable"===sf.base.animationMode?(this.collapseProgress("begin",n,s,i,t),this.collapseProgress("end",n,s,i,t)):this.collapseAnimation(o.name,s,i,n,o,t)},i.prototype.select=function(e){var i=this.getItemElements()[e];sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(sf.base.select("."+t,i))||i.children[0].focus()},i.prototype.expandItem=function(e,t){var i=this,s=this.getItemElements();if(sf.base.isNullOrUndefined(t))if("Single"===this.options.expandMode&&e){var n=s[s.length-1];this.itemExpand(e,n,this.getIndexByItem(n))}else{var o=sf.base.select("#"+this.lastActiveItemId,this.element);[].slice.call(s).forEach((function(t){i.itemExpand(e,t,i.getIndexByItem(t)),t.classList.remove("e-expand-state")}));var r=sf.base.select(".e-expand-state",this.element);r&&r.classList.remove("e-expand-state"),o&&o.classList.add("e-expand-state")}else{n=s[t];if(sf.base.isNullOrUndefined(n)||!n.classList.contains("e-select")||n.classList.contains("e-active")&&e)return;"Single"===this.options.expandMode&&this.expandItem(!1),this.itemExpand(e,n,t)}},i.prototype.setPersistence=function(e){this.options.enablePersistence&&window.localStorage.setItem(e,this.options.expandedIndices.toString())},i.prototype.itemExpand=function(e,t,i){var s=this,n=t.children[1];t.classList.contains("e-overlay")||(sf.base.isNullOrUndefined(n)&&e?this.dotNetRef.invokeMethodAsync("OnAccordionClick",i).then((function(){n=t.children[1],sf.base.isNullOrUndefined(n)||s.expand(n)})):sf.base.isNullOrUndefined(n)||(e?this.expand(n):this.collapse(n)))},i}();return{initialize:function(e,t,s,n){if(t&&e){null===s.expandedIndices&&(s.expandedIndices=[]);var o=new i(e,t,s,n);o.render(),o.dotNetRef.invokeMethodAsync("CreatedEvent",null)}},expandingItem:function(e,t){var i=window.sfBlazor.getCompInstance(e);i.element&&i.expandingItem(t)},collapsingItem:function(e,t){var i=window.sfBlazor.getCompInstance(e);i.element&&i.collapsingItem(t)},select:function(e,t){var i=window.sfBlazor.getCompInstance(e);i.element&&i.select(t)},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);t.element&&(t.setPersistence("accordion"+t.element.id),t.destroy())},setExpandModeAndRTL:function(e,t,i,s,n){var o=window.sfBlazor.getCompInstance(e);o.element&&(s&&(t?sf.base.addClass([o.element],"e-rtl"):sf.base.removeClass([o.element],"e-rtl")),n&&(o.options.expandMode=i,"Single"===i&&o.options.expandedIndices.length>1&&o.expandItem(!1)))},itemChanged:function(e){var t=window.sfBlazor.getCompInstance(e);t.element&&t.wireFocusEvents()},afterContentRender:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);s.element&&(s.options.animation=i,s.afterContentRender(t))},itemExpandedOrCollapsed:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(i.element){var s=i.accItem[t.index].querySelector(".e-acrdn-panel");s&&s.firstElementChild&&s.firstElementChild.firstElementChild&&s.firstElementChild.firstElementChild.classList.contains("e-accordion")&&s.classList.add("e-nested")}}}}()},"./modules/sf-accumulation-chart.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.AccumulationChart=function(){"use strict";var e=function(e,t){this.x=e,this.y=t},t=function(){function e(e,t,i,s,n){window.sfBlazor=window.sfBlazor,this.chartOnMouseDownRef=null,this.mouseMoveRef=null,this.mouseMoveThreshold=null,this.mouseEndRef=null,this.chartOnMouseClickRef=null,this.chartRightClickRef=null,this.mouseLeaveRef=null,this.chartMouseWheelRef=null,this.domMouseMoveRef=null,this.domMouseUpRef=null,this.chartKeyDownRef=null,this.chartKeyUpRef=null,this.longPressBound=null,this.touchObject=null,this.mouseY=0,this.mouseX=0,this.eventInterval=80,this.documentKeyHandler=function(e){e.altKey&&74===e.keyCode&&!sf.base.isNullOrUndefined(this.element)&&this.element.focus()},this.id=t,this.element=i,this.dotnetref=s,this.options=n,this.currentLegendIndex=0,this.currentPointIndex=0,this.previousTargetId="",this.dataId=e,window.sfBlazor.setCompInstance(this)}return e.prototype.render=function(){this.unWireEvents(),this.wireEvents()},e.prototype.destroy=function(){this.unWireEvents()},e.prototype.wireEvents=function(){var e=document.getElementById(this.id);if(e){i.dotnetrefCollection.push({id:this.id,dotnetref:this.dotnetref});
/*! Find the Events type */
var t=sf.base.Browser.isPointer?"pointerleave":"mouseleave";this.chartOnMouseDownRef=this.chartOnMouseDown.bind(this,this.dotnetref,this.id),this.mouseMoveRef=this.mouseMove.bind(this,this.dotnetref,this.id),this.mouseEndRef=this.mouseEnd.bind(this,this.dotnetref,this.id),this.chartOnMouseClickRef=this.chartOnMouseClick.bind(this,this.dotnetref,this.id),this.chartRightClickRef=this.chartRightClick.bind(this,this.dotnetref,this.id),this.chartKeyDownRef=this.chartOnKeyDown.bind(this,this.dotnetref,this.id),this.chartKeyUpRef=this.chartOnKeyUp.bind(this,this.dotnetref,this.id),this.mouseLeaveRef=this.mouseLeave.bind(this,this.dotnetref,this.id),
/*! Bind the Event handler */
e.addEventListener("mousemove",this.mouseMoveRef),e.addEventListener("touchmove",this.mouseMoveRef),sf.base.EventHandler.add(e,sf.base.Browser.touchEndEvent,this.mouseEndRef),sf.base.EventHandler.add(e,"click",this.chartOnMouseClickRef),sf.base.EventHandler.add(e,"contextmenu",this.chartRightClickRef),sf.base.EventHandler.add(e,t,this.mouseLeaveRef),sf.base.EventHandler.add(e,"keydown",this.chartKeyDownRef),sf.base.EventHandler.add(e,"keyup",this.chartKeyUpRef),sf.base.EventHandler.add(document.body,"keydown",this.documentKeyHandler),i.resizeBound=i.chartResize.bind(this,i.dotnetrefCollection);var s=sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize";sf.base.EventHandler.add(window,s,i.resizeBound),this.longPressBound=this.longPress.bind(this,this.dotnetref,this.id),this.touchObject=new sf.base.Touch(e,{tapHold:this.longPressBound,tapHoldThreshold:500})}},e.prototype.unWireEvents=function(){var e=this,t=document.getElementById(this.id);if(t){i.dotnetrefCollection=i.dotnetrefCollection.filter((function(t){return t.id!==e.id}));
/*! Find the Events type */
var s=sf.base.Browser.isPointer?"pointerleave":"mouseleave";
/*! Bind the Event handler */sf.base.EventHandler.remove(t,sf.base.Browser.touchStartEvent,this.chartOnMouseDownRef),t.removeEventListener("mousemove",this.mouseMoveRef),t.removeEventListener("touchmove",this.mouseMoveRef),sf.base.EventHandler.remove(t,sf.base.Browser.touchEndEvent,this.mouseEndRef),sf.base.EventHandler.remove(t,"click",this.chartOnMouseClickRef),sf.base.EventHandler.remove(t,"contextmenu",this.chartRightClickRef),sf.base.EventHandler.remove(t,s,this.mouseLeaveRef),sf.base.EventHandler.remove(t,"keydown",this.chartKeyDownRef),sf.base.EventHandler.remove(t,"keyup",this.chartKeyUpRef),sf.base.EventHandler.remove(document.body,"keydown",this.documentKeyHandler);var n=sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize";sf.base.EventHandler.remove(window,n,i.resizeBound),this.touchObject&&(this.touchObject.destroy(),this.touchObject=null)
/*! Apply the style for chart */}},e.prototype.getEventArgs=function(e){return{type:e.type,clientX:e.clientX,clientY:e.clientY,mouseX:this.mouseX,mouseY:this.mouseY,pointerType:e.pointerType,target:e.target.id,changedTouches:{clientX:e.changedTouches?e.changedTouches[0].clientX:0,clientY:e.changedTouches?e.changedTouches[0].clientY:0}}},e.prototype.setMouseXY=function(e,t){var i=document.getElementById(this.id+"_svg").getBoundingClientRect(),s=document.getElementById(this.id).getBoundingClientRect();this.mouseY=t-s.top-Math.max(i.top-s.top,0),this.mouseX=e-s.left-Math.max(i.left-s.left,0)},e.prototype.chartOnMouseDown=function(e,t,i){return this.dotnetref=e,this.id=t,this.dotnetref.invokeMethodAsync("OnChartMouseDown",this.getEventArgs(i)),!1},e.prototype.chartOnKeyDown=function(e,t,i){this.dotnetref=e,this.id=t;var s="";return this.options.showTooltip&&("Tab"==i.code&&this.previousTargetId.indexOf("Series")>-1||"Escape"===i.code)&&(s="ESC"),i.code.indexOf("Arrow")>-1&&i.preventDefault(),i.ctrlKey&&"p"===i.key&&(i.preventDefault(),s="CtrlP"),""!=s&&e.invokeMethodAsync("OnAccumulationChartKeyboardNavigations",s,i.target.id),!1},e.prototype.chartOnKeyUp=function(e,t,s){this.dotnetref=e,this.id=t;var n="",o=s.target.id,r=document.getElementById(this.element.id+"_chart_legend_translate_g"),a=document.getElementById(this.element.id+"_chart_legend_pageup");if(r){var l=r.firstElementChild,h=l.getAttribute("class");h&&-1===h.indexOf("e-chart-focused")?h+=" e-chart-focused":h="e-chart-focused",l.setAttribute("class",h)}if(a&&a.setAttribute("class","e-chart-focused"),"Tab"==s.code){if(""!=this.previousTargetId)if(this.previousTargetId.indexOf("_Point_")>-1&&-1==o.indexOf("_Point_")){var d=document.getElementById(this.previousTargetId).parentElement;i.setTabIndex(d.children[this.currentPointIndex],d.firstElementChild),this.currentPointIndex=0}else this.previousTargetId.indexOf("_chart_legend_page")>-1&&-1==o.indexOf("_chart_legend_page")&&-1==o.indexOf("_chart_legend_g_")?i.setTabIndex(s.target,a):this.previousTargetId.indexOf("_chart_legend_g_")>-1&&-1==o.indexOf("chart_legend_g_")&&i.setTabIndex(r.children[this.currentLegendIndex],r.firstElementChild);this.previousTargetId=o,o.indexOf("_chart_legend_g_")>-1&&this.options.enableHighlight?(o=s.target.lastElementChild.id,n="Tap"):o.indexOf("_Point_")>-1&&(this.options.enableHighlight||this.options.showTooltip)&&(n="Tap")}else if(s.code.indexOf("Arrow")>-1)if(s.preventDefault(),o.indexOf("_chart_legend_page")>-1)s.target.removeAttribute("tabindex"),this.previousTargetId=o=this.element.id+"_chart_legend_page"+("ArrowRight"==s.code?"up":"down"),i.focusTarget(document.getElementById(o));else if(o.indexOf("_chart_legend_")>-1){s.target.removeAttribute("tabindex"),this.currentLegendIndex+="ArrowUp"==s.code||"ArrowRight"==s.code?1:-1,this.currentLegendIndex=i.getActualIndex(this.currentLegendIndex,r.children.length);var c=r.children[this.currentLegendIndex];i.focusTarget(c),this.previousTargetId=o=c.lastElementChild.id,n=this.options.enableHighlight?"ArrowMove":""}else o.indexOf("_Point_")>-1&&(s.target.removeAttribute("tabindex"),this.currentPointIndex+="ArrowUp"==s.code||"ArrowRight"==s.code?1:-1,this.currentPointIndex=i.getActualIndex(this.currentPointIndex,s.target.parentElement.children.slice().filter((function(e){return e.id.indexOf("_Point_")>-1})).length),o=this.element.id+"_Series_0_Point_"+this.currentPointIndex,i.focusTarget(document.getElementById(o)),n=this.options.showTooltip?"ArrowMove":"");else"Enter"!=s.code&&"Space"!=s.code||!(o.indexOf("_chart_legend_")>-1||o.indexOf("_Point_")>-1)||(o=o.indexOf("_chart_legend_g")>-1?s.target.lastElementChild.id:o,n="Enter");return""!=n&&e.invokeMethodAsync("OnAccumulationChartKeyboardNavigations",n,o),!1},e.prototype.mouseMove=function(e,t,i){if(null==this.mouseMoveThreshold||(new Date).getTime()-this.mouseMoveThreshold>this.eventInterval){this.mouseMoveThreshold=(new Date).getTime(),this.dotnetref=e,this.id=t;var s=void 0,n=void 0,o=void 0;"touchmove"===i.type?(this.isTouch=!0,s=(o=i).changedTouches[0].clientX,n=o.changedTouches[0].clientY):(this.isTouch="touch"===i.pointerType||"2"===i.pointerType||this.isTouch,s=i.clientX,n=i.clientY),document.getElementById(this.id+"_svg")&&(this.setMouseXY(s,n),this.dotnetref.invokeMethodAsync("OnChartMouseMove",this.getEventArgs(i)))}return!1},e.prototype.mouseEnd=function(e,t,i){return this.dotnetref=e,this.id=t,this.dotnetref.invokeMethodAsync("OnChartMouseEnd",this.getEventArgs(i)),!1},e.prototype.chartOnMouseClick=function(e,t,i){return this.dotnetref=e,this.id=t,this.dotnetref.invokeMethodAsync("OnChartMouseClick",this.getEventArgs(i)),!1},e.prototype.chartRightClick=function(e,t,i){return this.dotnetref=e,this.id=t,this.dotnetref.invokeMethodAsync("OnChartRightClick",this.getEventArgs(i)),!1},e.prototype.mouseLeave=function(e,t,i){return this.dotnetref=e,this.id=t,this.dotnetref.invokeMethodAsync("OnChartMouseLeave",this.getEventArgs(i)),!1},e.prototype.longPress=function(e,t,i){return this.dotnetref=e,this.id=t,this.dotnetref.invokeMethodAsync("OnChartLongPress",i),!1},e}(),i={initialize:function(e,i,s,n){new t(e,i.id,i,s,n).render()},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.destroy()},focusTargetId:function(e){this.focusTarget(document.getElementById(e).parentElement)},focusTarget:function(e){var t=e.getAttribute("class");return e.setAttribute("tabindex","0"),t&&-1===t.indexOf("e-chart-focused")?t+=" e-chart-focused":t||(t="e-chart-focused"),e.setAttribute("tabindex","0"),e.setAttribute("class",t),e.focus(),e.id},getActualIndex:function(e,t){return e>t-1?0:e<0?t-1:e},setTabIndex:function(e,t){e.removeAttribute("tabindex"),t.setAttribute("tabindex","0")},id:"",getParentElementBoundsById:function(e){var t=document.getElementById(e);if(t){t.style.width="100%",t.style.height="100%";var i=t.getBoundingClientRect();return{width:i.width||t.clientWidth||t.offsetWidth,height:i.height||t.clientHeight||t.offsetHeight,left:i.left,top:i.top,right:i.right,bottom:i.bottom}}return{width:0,height:0,left:0,top:0,right:0,bottom:0}},getElementBoundsById:function(e,t){void 0===t&&(t=!0),t&&(this.id=e);var i=document.getElementById(e);if(i){var s=i.getBoundingClientRect();return{width:i.clientWidth||i.offsetWidth,height:i.clientHeight||i.offsetHeight,left:s.left,top:s.top,right:s.right,bottom:s.bottom}}return{width:0,height:0,left:0,top:0,right:0,bottom:0}},getAllCharacters:function(){for(var e=[],t=33;t<591;t++)e.push(String.fromCharCode(t));return e},measureText:function(e,t,i,s){var n=document.getElementById("chartmeasuretext");return null===n&&(n=sf.base.createElement("text",{id:"chartmeasuretext"}),document.body.appendChild(n))," "===e&&(e="&nbsp;"),n.innerHTML=e,n.style.position="fixed",n.style.fontSize="100px",n.style.fontWeight=t,n.style.fontStyle=i,n.style.fontFamily=s,n.style.visibility="hidden",n.style.top="-100",n.style.left="0",n.style.whiteSpace="nowrap",n.style.lineHeight="normal",{Width:n.clientWidth,Height:n.clientHeight}},getCharCollectionSize:function(e){for(var t=[],i=this.getAllCharacters(),s=i.length,n=e.length,o=0;o<n;o++)for(var r=e[o].split("_"),a=r[0],l=r[1],h=r[2],d=0;d<s;d++)t.push(this.measureText(i[d],a,l,h).Width+"");return JSON.stringify(t)},dotnetref:{},dotnetrefCollection:[],resizeBound:{},resize:{},chartResize:function(e,t){var i=this;return this.resize&&clearTimeout(this.resize),this.resize=setTimeout((function(){for(var t=e.length,s=0;s<t;s++)e[s].dotnetref.invokeMethodAsync("RemoveElements");for(s=0;s<t;s++)e[s].dotnetref.invokeMethodAsync("OnChartResize");clearTimeout(i.resize)}),500),!1},performAnimation:function(e,t,i,s,n,o,r,a,l){var h=this,d=/translate\((-?\d+\.?\d*),?\s*(-?\d+[.]?\d*)?\)/.exec(a);sf.base.isNullOrUndefined(a)||""===a||(n=+d[1],o=+d[2]);var c="";if(r<=0)return this.setElementTransform(t,e,"transform","translate("+n+", "+o+")",c),null;var p,u,f=t.replace("Series_0","datalabel").replace("Point","Series_0");if(!sf.base.isNullOrUndefined(document.getElementById(f+"text_"+e))){var g=(c=document.getElementById(f+"text_"+e).getAttribute("transform")).split(" ");g.length>2&&(c=g[2])}new sf.base.Animation({}).animate(sf.base.createElement("div"),{duration:r,progress:function(r){p=h.linear(r.timeStamp,i,n,r.duration),u=h.linear(r.timeStamp,s,o,r.duration),h.setElementTransform(t,e,"transform","translate("+(l?n-p:p)+", "+(l?o-u:u)+")",c)},end:function(s){h.setElementTransform(t,e,"transform","translate("+(l?i:n)+", "+(l?i:o)+")",c)}})},setElementTransform:function(e,t,i,s,n){var o=e.replace("Series_0","datalabel").replace("Point","Series_0");this.setElementAttribute(e+t,"transform",s),this.setElementAttribute(o+"shape_"+t,"transform",s),this.setElementAttribute(o+"text_"+t,"transform",s+" "+n),this.setElementAttribute(o+"connector_"+t,"transform",s)},linear:function(e,t,i,s){return-i*Math.cos(e/s*(Math.PI/2))+i+t},setElementAttribute:function(e,t,i){var s=document.getElementById(e);s&&s.setAttribute(t,i)},getElementAttribute:function(e,t){var i=document.getElementById(e);return i?i.getAttribute(t):""},createStyleElement:function(e,t){document.body.appendChild(sf.base.createElement("style",{id:e,innerHTML:t}))},renderTooltip:function(e,t,i,s){var n=document.getElementById(t+"_svg"),o=!(n&&parseInt(n.getAttribute("opacity"),10)>0),r=JSON.parse(e),a=window.sfBlazor.getCompInstance(s);o&&!sf.base.isNullOrUndefined(a)?(a.tooltip=new sf.svgbase.Tooltip(r),a.tooltip.enableRTL=r.enableRTL,a.tooltip.animationComplete=function(e){e.tooltip.fadeOuted&&i.invokeMethodAsync("TooltipAnimationComplete")},a.tooltip.appendTo("#"+t)):sf.base.isNullOrUndefined(a.tooltip)||(a.tooltip.location=new sf.svgbase.TooltipLocation(r.location.x,r.location.y),a.tooltip.content=r.content,a.tooltip.header=r.header,a.tooltip.offset=r.offset,a.tooltip.palette=r.palette,a.tooltip.shapes=r.shapes,a.tooltip.data=r.data,a.tooltip.template=r.template,a.tooltip.textStyle.color=r.textStyle.color||a.tooltip.textStyle.color,a.tooltip.textStyle.fontFamily=r.textStyle.fontFamily||a.tooltip.textStyle.fontFamily,a.tooltip.textStyle.fontStyle=r.textStyle.fontStyle||a.tooltip.textStyle.fontStyle,a.tooltip.textStyle.fontWeight=r.textStyle.fontWeight||a.tooltip.textStyle.fontWeight,a.tooltip.textStyle.opacity=r.textStyle.opacity||a.tooltip.textStyle.opacity,a.tooltip.textStyle.size=r.textStyle.size||a.tooltip.textStyle.size,a.tooltip.isNegative=r.isNegative,a.tooltip.clipBounds=new sf.svgbase.TooltipLocation(r.clipBounds.x,r.clipBounds.y),a.tooltip.arrowPadding=r.arrowPadding,a.tooltip.dataBind())},fadeOut:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||!sf.base.isNullOrUndefined(t)&&sf.base.isNullOrUndefined(t.tooltip)||(this.removeTooltipCommentElement(t),t.tooltip.fadeOut())},removeTooltipCommentElement:function(e){var t=document.getElementById(e.tooltip.element.id);if(t&&!e.isRemoveCommentElement&&t.childNodes.length>1){for(var i=t.childNodes,s=[],n=0;n<i.length;n++)(i[n].nodeName.match("#comment")||i[n].nodeName.match("#text"))&&s.push(i[n]);for(var o=0,r=s;o<r.length;o++){var a=r[o];sf.base.remove(a),e.isRemoveCommentElement=!0}}},animateRedrawElement:function(e,t,i,s,n,o,r,a){var l=this;void 0===r&&(r="x"),void 0===a&&(a="y");var h=document.getElementById(e);if(!h)return null;var d="DIV"===h.tagName,c=function(e,t){d?(h.style[r]=e+"px",h.style[a]=t+"px"):(h.setAttribute(r,e+""),h.setAttribute(a,t+""))};c(i,s),new sf.base.Animation({}).animate(sf.base.createElement("div"),{duration:t,progress:function(e){c(l.linear(e.timeStamp,i,n-i,e.duration),l.linear(e.timeStamp,s,o-s,e.duration))},end:function(){c(n,o)}})},doAnimation:function(e,t,i,s,n,o,r,a){var l=this,h=document.getElementById(e);t-=90;var d,c=o||s;a.x+=1,r+=.414*r,new sf.base.Animation({}).animate(h,{duration:c,delay:n,progress:function(e){d=l.linear(e.timeStamp,t,i,e.duration),h.setAttribute("d",l.getPathArc(a,t,d,r,0))},end:function(e){a.x-=1,h.setAttribute("d",l.getPathArc(a,t,t-9e-5,r,0));var i=document.getElementById(h.id.split("_")[0]+"_datalabel_Series_0")||document.getElementById(h.id.split("_")[0]+"_chart_datalabel_Series_0");i&&i.setAttribute("style","visibility: visible")}})},getPathArc:function(e,t,i,s,n){var o=i-t,r=(o=o<0?o+360:o)<180?0:1;return n||0!==n?this.getDoughnutPath(e,this.degreeToLocation(t,s,e),this.degreeToLocation(i,s,e),s,this.degreeToLocation(t,n,e),this.degreeToLocation(i,n,e),n,r):this.getPiePath(e,this.degreeToLocation(t,s,e),this.degreeToLocation(i,s,e),s,r)},getPiePath:function(e,t,i,s,n){return"M "+e.x+" "+e.y+" L "+t.x+" "+t.y+" A "+s+" "+s+" 0 "+n+" 1 "+i.x+" "+i.y+" Z"},getDoughnutPath:function(e,t,i,s,n,o,r,a){return"M "+t.x+" "+t.y+" A "+s+" "+s+" 0 "+a+" 1 "+i.x+" "+i.y+" L "+o.x+" "+o.y+" A "+r+" "+r+" 0 "+a+",0 "+n.x+" "+n.y+" Z"},degreeToLocation:function(t,i,s){var n=t*Math.PI/180;return new e(Math.cos(n)*i+s.x,Math.sin(n)*i+s.y)},ChangePiePath:function(e,t,i){for(var s=0,n=e;s<n.length;s++){var o=n[s];this.ChangePointPath(o.point,o.degree,o.start,o.pathOption,i,t,o.radius,o.innerRadius)}},GetPathOption:function(e,t,i,s,n){return t?this.getPathArc(e,i,(i+t)%360,s,n):""},ChangePointPath:function(e,t,i,s,n,o,r,a){var l,h,d=this,c=document.getElementById(s.id);new sf.base.Animation({}).animate(sf.base.createElement("div"),{duration:n,delay:0,progress:function(s){h=d.linear(s.timeStamp,e.degree,t-e.degree,s.duration),l=((l=d.linear(s.timeStamp,e.start,i-e.start,s.duration))/(Math.PI/180)+360)%360,c.setAttribute("d",d.GetPathOption(o,h,l,r,a)),e.isExplode,c.style.visibility="visible"},end:function(n){c.style.visibility=e.visible?"visible":"hidden",c.setAttribute("d",s.direction),e.degree=t,e.start=i}})}};return i}()},"./modules/sf-barcode.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Barcode=function(){"use strict";var e=function(e,t,i,s){return new(i||(i=Promise))((function(n,o){function r(e){try{l(s.next(e))}catch(e){o(e)}}function a(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){e.done?n(e.value):new i((function(t){t(e.value)})).then(r,a)}l((s=s.apply(e,t||[])).next())}))},t=function(e,t){var i,s,n,o,r={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,s&&(n=2&o[0]?s.return:o[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,o[1])).done)return n;switch(s=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,s=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(n=r.trys,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){r=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){r.label=o[1];break}if(6===o[0]&&r.label<n[1]){r.label=n[1],n=o;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(o);break}n[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],s=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};return{getBarcodeSize:function(e){var t=e.getBoundingClientRect(),i={};return i.Width=t.width,i.Height=t.height,i},createHtmlElement:function(e,t){var i=sf.base.createElement(e);return t&&this.setAttribute(i,t),i},setAttribute:function(e,t){for(var i=Object.keys(t),s=0;s<i.length;s++)e.setAttribute(i[s],t[i[s]])},createMeasureElements:function(){if(window.barcodeMeasureElement)window.barcodeMeasureElement.usageCount+=1;else{var e=this.createHtmlElement("div",{id:"barcodeMeasureElement",class:"barcodeMeasureElement",style:"visibility:hidden ; height: 0px ; width: 0px; overflow: hidden;"}),t=this.createHtmlElement("span",{style:"display:inline-block ; line-height: normal"});e.appendChild(t);var i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("xlink","http://www.w3.org/1999/xlink"),e.appendChild(i);var s=document.createElementNS("http://www.w3.org/2000/svg","text");s.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),i.appendChild(s),window.barcodeMeasureElement=e,window.barcodeMeasureElement.usageCount=1,document.body.appendChild(e)}},measureText:function(e,t,i){window.barcodeMeasureElement.style.visibility="visible";var s=window.barcodeMeasureElement.children[1],n=this.getChildNode(s)[0];n.textContent=e,n.setAttribute("style","font-size:"+t+"px; font-family:"+i+";");var o=n.getBBox(),r={};return r.Width=o.width,r.Height=o.height,window.barcodeMeasureElement.style.visibility="hidden",r},getChildNode:function(e){var t,i=[];if("msie"===sf.base.Browser.info.name||"edge"===sf.base.Browser.info.name)for(var s=0;s<e.childNodes.length;s++)1===(t=e.childNodes[s]).nodeType&&i.push(t);else i=e.children;return i},checkOverlapTextPosition:function(e,t,i,s,n,o,r,a){return(a=a||{}).stringSize=t,s+n-(o+this.measureText(e,t,i).Width)<=r&&t>2&&(a.stringSize-=.2,this.checkOverlapTextPosition(e,a.stringSize,i,s,n,o,r,a)),a.stringSize},triggerDownload:function(e,t,i){var s=document.createElement("a");s.download=t+"."+e.toLocaleLowerCase(),s.href=i,s.click()},exportAsImage:function(i,s,n,o){return e(this,void 0,void 0,(function(){var e;return t(this,(function(t){switch(t.label){case 0:return[4,this.imageExport(i,s,n,o)];case 1:return(e=t.sent())instanceof Promise?(e.then((function(e){return e})),[2,e]):[2,e]}}))}))},imageExport:function(i,s,n,o){return e(this,void 0,void 0,(function(){var e;return t(this,(function(t){return e=this,[2,new Promise((function(t,r){var a="<svg xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink>"+n.children[0].outerHTML+"</svg>",l=window.URL.createObjectURL(new Blob("SVG"===i?[a]:[(new window.XMLSerializer).serializeToString(n)],{type:"image/svg+xml"}));if("SVG"===i)e.triggerDownload(i,s,l),t(null);else{var h=document.createElement("canvas");h.height=n.clientHeight,h.width=n.clientWidth;var d=h.getContext("2d"),c=new Image;c.onload=function(){if(d.drawImage(c,0,0),window.URL.revokeObjectURL(l),o){var n="JPEG"===i?h.toDataURL("image/jpeg"):"PNG"===i?h.toDataURL("image/png"):"";t(n)}else e.triggerDownload(i,s,h.toDataURL("image/png").replace("image/png","image/octet-stream")),t(null)},c.src=l}}))]}))}))}}}()},"./modules/sf-breadcrumb.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Breadcrumb=function(){"use strict";var e=function(){function e(e,t,i,s,n,o,r){this.dataId=e,this.element=t,this.menu=r,this.popup=o,this.overflowMode=s,this.maxItems=n,this.dotnetRef=i,window.sfBlazor.setCompInstance(this),this.calculateMaxItems(),this.wireEvents()}return e.prototype.calculateMaxItems=function(){if(this.prevWidth=this.element.offsetWidth,"Default"===this.overflowMode||"Collapsed"===this.overflowMode||"Menu"===this.overflowMode){var e=-1,t=this.element.offsetWidth,i=[].slice.call(this.element.children[0].children).reverse(),s="Menu"===this.overflowMode?0:i[i.length-1].offsetWidth+(i[i.length-2]?i[i.length-2].offsetWidth:0);if("Menu"===this.overflowMode){var n=this.getMenuElement();this.element.append(n),s+=n.offsetWidth,n.remove()}for(var o=0;o<i.length-2;o++){if(s>t){e=Math.ceil((o-1)/2)+("Menu"===this.overflowMode&&o<=2?0:1);break}if("Menu"===this.overflowMode&&2===o&&(s+=i[i.length-1].offsetWidth+i[i.length-2].offsetWidth)>t){e=1;break}if(("Menu"!==this.overflowMode||!i[o].classList.contains("e-breadcrumb-menu"))&&(s+=i[o].offsetWidth)>t){e=Math.ceil(o/2)+("Menu"===this.overflowMode&&o<=2?0:1);break}}this.dotnetRef.invokeMethodAsync("ChangeMaxItems",e)}else if(("Wrap"===this.overflowMode||"Scroll"===this.overflowMode)&&this.maxItems>0){t=0;if((i=this.element.querySelectorAll(".e-breadcrumb-item,.e-breadcrumb-separator")).length>this.maxItems+this.maxItems-1){for(o="Wrap"===this.overflowMode?1:0;o<this.maxItems+this.maxItems-1;o++)t+=i[o].offsetWidth;t=t+5+2*parseInt(getComputedStyle(this.element.children[0]).paddingLeft,10),"Wrap"===this.overflowMode?this.element.querySelector(".e-breadcrumb-wrapped-ol").style.width=t+"px":this.element.style.width=t+"px"}}},e.prototype.resize=function(){this.element.offsetWidth>0&&this.prevWidth!=this.element.offsetWidth&&this.dotnetRef.invokeMethodAsync("ResizeHandler")},e.prototype.getMenuElement=function(){return sf.base.createElement("li",{className:"e-icons e-breadcrumb-menu"})},e.prototype.openPopup=function(e,t){var i,s;document.body.appendChild(t);var n=e.getBoundingClientRect(),o=t.getBoundingClientRect();i=n.left+pageXOffset,s=n.bottom+pageYOffset,n.bottom+o.height>document.documentElement.clientHeight&&s-n.height-o.height>document.documentElement.clientTop&&(s=s-n.height-o.height),n.left+o.width>document.documentElement.clientWidth&&n.right-o.width>document.documentElement.clientLeft&&(i=i+n.width-o.width),this.addEventListener(),t.style.left=Math.ceil(i)+"px",t.style.top=Math.ceil(s)+"px",t.style.zIndex=sf.popups.getZindexPartial(this.element)+"",t.style.visibility="",t.firstElementChild.focus()},e.prototype.addEventListener=function(){sf.base.EventHandler.add(document,"mousedown",this.mousedownHandler,this),this.popup&&sf.base.EventHandler.add(this.popup,"keydown",this.popupKeyDownHandler,this)},e.prototype.popupKeyDownHandler=function(e){"Escape"===e.key&&this.dotnetRef.invokeMethodAsync("ClosePopup",null)},e.prototype.mousedownHandler=function(e){if(this.popup&&this.popup.parentElement){var t=e.target;sf.base.closest(t,"#"+this.menu.id)||sf.base.closest(e.target,"#"+this.popup.id)||(this.dotnetRef.invokeMethodAsync("ClosePopup",null),this.removeEventListener())}else this.removeEventListener()},e.prototype.removeEventListener=function(){sf.base.EventHandler.remove(document,"mousedown",this.mousedownHandler),this.popup&&sf.base.EventHandler.remove(this.popup,"keydown",this.popupKeyDownHandler)},e.prototype.wireEvents=function(){window.addEventListener("resize",this.resize.bind(this))},e.prototype.unWireEvents=function(){window.removeEventListener("resize",this.resize.bind(this))},e.prototype.destroy=function(){this.unWireEvents()},e}();return{initialize:function(t,i,s,n,o){i&&new e(t,i,s,n,o)},calculateMaxItems:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.overflowMode=t,i.calculateMaxItems())},openPopup:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s)||(s.popup=i,s.menu=t,s.openPopup(t,i))},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.destroy()}}}()},"./modules/sf-bullet-chart.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.BulletChart=function(){"use strict";var e=function(){function e(e,t,i){window.sfBlazor=window.sfBlazor,this.resizeTo=0,this.element=t,this.dotNetRef=i,this.dataId=e,window.sfBlazor.setCompInstance(this)}return e.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"click",this.click.bind(this),this),sf.base.EventHandler.add(this.element,"mousemove",this.mousemove.bind(this),this),window.addEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.resize.bind(this)),new sf.base.KeyboardEvents(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:{enter:"enter"},eventName:"keydown"}),sf.base.EventHandler.add(this.element,"mousedown",this.mouseDown.bind(this),this)},e.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,"mousemove",this.mousemove),sf.base.EventHandler.remove(this.element,"click",this.click),window.removeEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.resize.bind(this)),sf.base.EventHandler.remove(this.element,"mousedown",this.mouseDown);var e=sf.base.getInstance(this.element,this.keyActionHandler);e&&e.destroy(),this.element=null,this.dotNetRef=null},e.prototype.mouseDown=function(e){e.preventDefault()},e.prototype.keyActionHandler=function(e){"enter"===e.action&&this.clickProcess(e)},e.prototype.resize=function(){var e=this;this.dotNetRef&&(this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=window.setTimeout((function(){e.dotNetRef.invokeMethodAsync("TriggerResize")}),500))},e.prototype.click=function(e){this.clickProcess(e)},e.prototype.clickProcess=function(e){this.dotNetRef&&this.dotNetRef.invokeMethodAsync("TriggerClick",e.target.id)},e.prototype.mousemove=function(e){var t,i;this.element&&(t=this.element.getBoundingClientRect());var s=document.getElementById(this.element.id+"_svg");s&&(i=s.getBoundingClientRect());var n=e.clientX-t.left-Math.max(i.left-t.left,0),o=e.clientY-t.top-Math.max(i.top-t.top,0);this.dotNetRef&&this.dotNetRef.invokeMethodAsync("TriggerMouseMove",e.target.id,n,o)},e.prototype.barAnimation=function(e,t,i,s,n){new sf.base.Animation({}).animate(t,{duration:e.duration<=0?1e3:e.duration,delay:e.delay,progress:function(o){if(o.timeStamp>=o.delay){t.style.visibility="visible";var r=-1*Math.cos((o.timeStamp-o.delay)/o.duration*(Math.PI/2))+1;"targetBarAnimation"===i?t.setAttribute("transform","translate("+s.toString()+" "+n.toString()+") scale(1, "+(r/1).toString()+") translate("+-s.toString()+" "+-n.toString()+")"):t.setAttribute("transform","translate("+s.toString()+" "+e.valueY.toString()+") scale("+(r/1).toString()+", 1) translate("+-s.toString()+" "+-e.valueY.toString()+")")}},end:function(){t.setAttribute("transform","translate(0,0)"),t.style.visibility="visible"}})},e}();return{initialize:function(t,i,s,n,o){if(i)return new e(t,i,o).wireEvents(),this.getElementSize(i,s,n)},getElementSize:function(e,t,i){var s,n;return e&&(e.style.height=t,e.style.width=i,s=e.clientWidth||e.offsetWidth,n=e.clientHeight),{width:s,height:n}},updateElementOpacity:function(e,t,i){var s=document.getElementById(e);if(s){if(!sf.base.isNullOrUndefined(i)&&""!==i)document.getElementById(i).setAttribute("opacity","1");!0===t?s.setAttribute("opacity","1"):s.setAttribute("opacity","0.6")}},doBarAnimation:function(e,t,i,s,n,o){for(var r=0;r<i.length;r++){var a=document.getElementById(i[r]),l=window.sfBlazor.getCompInstance(e);a&&("valueBarAnimation"===s?l.barAnimation(t,a,s,n[r]):l.barAnimation(t,a,s,n[r],o[r]))}},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);e&&t&&t.unWireEvents()}}}()},"./modules/sf-calendar.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.CalendarBase=function(){"use strict";return{initialize:function(e,t,i,s,n){var o={controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",altUpArrow:"alt+uparrow",spacebar:"space",altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow"};o=sf.base.extend(o,i),new sf.base.KeyboardEvents(e,{eventName:"keydown",keyAction:this.keyActionHandle.bind(this,s,n,t),keyConfigs:o})},keyActionHandle:function(e,t,i,s){s.preventDefault();var n=sf.base.closest(s.target,".e-calendar").querySelector("tbody");if(n){!1;var o,r=n.querySelector("tr td.e-focused-date");o=n.querySelector("tr td.e-selected"),n.focus();var a=s.target,l={Action:s.action,Key:s.key,Events:s,SelectDate:o?o.id:null,FocusedDate:r?r.id:null,classList:o?o.classList.toString():r?r.classList.toString():"e-cell",Id:r?r.id:o?o.id:null,TargetClassList:a.classList.toString()};i.invokeMethodAsync("OnCalendarKeyboardEvent",l),a.classList.contains("e-today")&&(a.blur(),n.focus())}}}}()},"./modules/sf-chart.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Chart=function(){"use strict";var e=function(){function e(e,t,i,s,l,h,d,c){void 0===l&&(l=!1),void 0===h&&(h=!1),window.sfBlazor=window.sfBlazor,this.mouseY=0,this.mouseX=0,this.isTouch=!1,this.eventInterval=80,this.mouseMoveRef=null,this.mouseMoveThreshold=null,this.chartOnMouseClickRef=null,this.chartRightClickRef=null,this.mouseLeaveRef=null,this.chartKeyDownRef=null,this.chartKeyUpRef=null,this.chartMouseWheelRef=null,this.chartOnMouseDownRef=null,this.mouseEndRef=null,this.chartMouseWheelThreshold=null,this.domMouseMoveRef=null,this.domMouseMoveThreshold=null,this.scrollbarMouseMoveThreshold=null,this.scrollbarMouseWheelThreshold=null,this.domMouseUpRef=null,this.longPressBound=null,this.touchObject=null,this.pinchZoomingEnable=!1,this.crosshairEnable=!1,this.toggleVisibility=!0,this.enableHighlight=!0,this.highlightMode="None",this.selectionMode="None",this.rectSeries=!0,this.isSeriesMode=!1,this.seriesTypes=[],this.selectedDataIndexes=[],this.highlightDataIndexes=[],this.previousSelectedEle=[],this.highlightColor="",this.highlightPattern="None",this.selectionPattern="None",this.legendModule=[],this.allowMultiSelection=!1,this.drawType=[],this.previousHighlightedIndex=-1,this.tooltipBase=new n,this.markerExplodeBase=new o,this.crosshairBase=new r,this.userInteractionBase=new a,this.pinchStyle="opacity: 0; position: absolute; display: block; width: 100px; height: 100px; background: transparent; border: 2px solid blue;",this.pinchtarget=null,this.documentKeyHandler=function(e){e.altKey&&74===e.keyCode&&!sf.base.isNullOrUndefined(this.element)&&this.element.focus()},this.id=t,this.element=i,this.dotnetref=s,this.isZooming=l,this.isScrollbar=h,this.options=d,this.currentLegendIndex=0,this.currentPointIndex=0,this.currentSeriesIndex=0,this.previousTargetId="",this.isZoomed=!1,this.selectionHighlightOptions(c),this.selectedDataIndexes=c.selectedDataIndexes||[],this.unSelected=t+"_ej2_deselected",this.dataId=e,window.sfBlazor.setCompInstance(this),this.getTooltipData(),this.userInteractionBase.svgRenderer=new sf.svgbase.SvgRenderer(this.element.id),this.removeTooltipData()}return e.prototype.render=function(){this.unWireEvents(this.id,this.dotnetref),this.wireEvents(this.id,this.dotnetref)},e.prototype.destroy=function(){this.unWireEvents(this.id,this.dotnetref),this.dotnetref.invokeMethodAsync("DisposeDotNetReference")},e.prototype.selectionHighlightOptions=function(e){this.enableHighlight=e.enableHighlight,this.pinchZoomingEnable=e.pinchZoomingEnable,this.toggleVisibility=e.toggleVisibility,this.highlightMode=e.highlightMode,this.selectionMode=e.selectionMode,this.seriesTypes=e.seriesTypes,this.highlightColor=e.highlightColor,this.highlightPattern=e.highlightPattern,this.selectionPattern=e.selectionPattern,this.allowMultiSelection=e.allowMultiSelection,this.drawType=e.drawType,this.oldMode=this.currentMode},e.prototype.getTooltipData=function(e,t,i,s){var n=document.getElementById(this.element.id+"_tooltip_data");if(n){this.userInteractionBase.chartData=n.getAttributeNames().map((function(e){return n.getAttribute(e)})),this.userInteractionBase.chartData.shift();var o=this.userInteractionBase.chartData.indexOf("display: block;");o>-1&&this.userInteractionBase.chartData.splice(o,1),sf.base.isNullOrUndefined(this.userInteractionBase.visibleSeries)||(this.userInteractionBase.visibleSeries.forEach((function(e){e.visible=!!document.getElementById(e.id)})),this.userInteractionBase.chartData.length>0&&(this.getVisibleSeries(this,e,t,i,s),this.isDataLoaded=!0))}},e.prototype.removeTooltipData=function(){var e=document.getElementById(this.element.id+"_tooltip_data");e&&e.getAttributeNames().length>1&&this.dotnetref.invokeMethodAsync("RemoveTooltipData")},e.prototype.tooltipOptions=function(e,t){this.userInteractionBase.availableSize=t.availableSize,this.userInteractionBase.chartBorderWidth=t.borderWidth,this.userInteractionBase.disableTrackTooltip=t.disableTrackTooltip,this.userInteractionBase.axisClipRect=t.axisClipRect,this.userInteractionBase.isPointMouseDown=t.isPointMouseDown,this.userInteractionBase.isPointDragging=t.isPointDragging,this.userInteractionBase.isInverted=t.isInverted,this.userInteractionBase.chartAreaType=t.chartAreaType,this.tooltipBase.isTooltipMarker=t.isMarkerEnable,this.tooltipBase.tooltipModule=e,this.tooltipBase.tooltipFormat=sf.base.isNullOrUndefined(t.tooltipFormat)?t.tooltipFormat:this.getTooltipFormat(t.tooltipFormat),this.userInteractionBase.enableRTL=t.enableRTL,this.crosshairBase.crosshair=t.crosshair,this.crosshairEnable=t.crosshair.enable,this.markerExplodeBase.markerExploded=t.markerExplode,this.userInteractionBase.chartRadius=t.chartRadius,this.userInteractionBase.theme=t.theme,this.crosshairBase.themeStyleCrosshairLine=t.themeStyleCrosshairLine,this.crosshairBase.themeStyleCrosshairFill=t.themeStyleCrosshairFill,this.crosshairBase.themeStyleCrosshairLabel=t.themeStyleCrosshairLabel,this.tooltipBase.tooltipModule.template=t.templateString?t.templateString:this.tooltipBase.tooltipModule.template,this.userInteractionBase.initialRect=t.initialRect,this.userInteractionBase.secondaryElementOffset=t.secondaryElementOffset,sf.base.isNullOrUndefined(this.tooltipBase.tooltipElementSize)&&this.tooltipBase.tooltipModule.template&&this.getElementSize(this.element.id+"_tooltip"),this.userInteractionBase.isStockChart=this.element.id.indexOf("_stockChart")>-1,this.tooltipBase.tooltipEventCalled=t.tooltipEventCalled,this.tooltipBase.sharedTooltipEventCalled=t.sharedTooltipEventCalled,this.tooltipBase.crosshairMouseMoveEventCalled=t.crosshairMouseMoveEventCalled,this.tooltipBase.seriesTooltipTop=t.seriesTooltipTop,this.tooltipBase.tooltipDuration=0!=this.tooltipBase.tooltipModule.duration?this.tooltipBase.tooltipModule.duration:this.tooltipBase.tooltipModule.shared?100:300,this.crosshairEnable?this.togglePointerEvents(this.element.id,!1):this.pinchZoomingEnable&&this.togglePointerEvents(this.element.id,!0)},e.prototype.getElementSize=function(e){var t=document.getElementById(e);t&&0===t.childNodes.length&&(t.appendChild(document.getElementById("tooltip_template")),this.tooltipBase.tooltipElementSize={width:t.offsetWidth,height:t.offsetHeight},t.removeChild(t.firstChild))},e.prototype.clipPathID=function(e){return this.element.id+"_ChartSeriesClipRect_"+e},e.prototype.markerClipPathId=function(e){return this.element.id+"_ChartMarkerClipRect_"+e},e.prototype.getVisibleSeries=function(e,t,i,s,n){e.userInteractionBase.visibleSeries=[],e.userInteractionBase.axes=n;var o=document.getElementById(e.element.id+"SeriesCollection").querySelectorAll("[id*='SeriesGroup']"),r=document.getElementById(e.element.id+"IndicatorCollection").querySelectorAll("[id*='_Group']"),a=[];o.length>0&&o.forEach((function(e){a.push(e)})),r.length>0&&r.forEach((function(e){a.push(e)}));for(var l,h=function(n){var o=a[n].id,r=document.getElementById(o),h=sf.base.isNullOrUndefined(r)?null:r.getAttribute("data-point").split(",");l={id:o,name:h[15],index:parseInt(h[4]),interior:h[2],visible:"True"===h[8],category:h[10],seriesType:h[11],type:h[3],drawType:h[12],marker:i[n],border:s[n],shape:h[13],points:sf.base.isNullOrUndefined(d.userInteractionBase.chartData[n])||""==d.userInteractionBase.chartData[n]?[]:JSON.parse(e.userInteractionBase.chartData[n]),clipRect:t[n],tooltipFormat:""!==h[14]?d.getTooltipFormat(h[14]):h[14],enableTooltip:"True"===h[16],dataEditSettings:"True"===h[17],chartIsTransposed:"True"===h[18],opacity:parseFloat(h[19]),x_Axis:d.userInteractionBase.axes.filter((function(e){return e.name===h[20]}))[0],y_Axis:d.userInteractionBase.axes.filter((function(e){return e.name===h[21]}))[0],axesCount:d.userInteractionBase.axes.length,volume:h[22],markerDataLabelFormat:h[23]},e.userInteractionBase.visibleSeries.push(l)},d=this,c=0;c<a.length;c++)h(c)},e.prototype.getTooltipFormat=function(e){return e=e.replace("tooltip","tT").replace("text","t").replace("high","h").replace("low","l").replace("open","o").replace("close","c").replace("volume","v").replace("size","sI").replace("percentage","p").replace("minimum","mI").replace("maximum","mX").replace("outliers","oL").replace("upperQuartile","uQ").replace("lowerQuartile","lQ").replace("median","m").replace("average","a")},e.prototype.unWireEvents=function(e,t){var i=document.getElementById(e);if(i){this.dotnetref=t,l.dotnetrefCollection=l.dotnetrefCollection.filter((function(t){return t.id!==e}));
/*! Find the Events type */
var s=sf.base.Browser.isPointer?"pointerleave":"mouseleave";
/*! Bind the Event handler */if(i.removeEventListener("mousemove",this.mouseMoveRef),i.removeEventListener("touchmove",this.mouseMoveRef),sf.base.EventHandler.remove(i,sf.base.Browser.touchStartEvent,this.chartOnMouseDownRef),sf.base.EventHandler.remove(i,sf.base.Browser.touchEndEvent,this.mouseEndRef),sf.base.EventHandler.remove(i,"click",this.chartOnMouseClickRef),sf.base.EventHandler.remove(i,"contextmenu",this.chartRightClickRef),sf.base.EventHandler.remove(i,s,this.mouseLeaveRef),sf.base.EventHandler.remove(i,"keydown",this.chartKeyDownRef),sf.base.EventHandler.remove(document.body,"keydown",this.documentKeyHandler),sf.base.EventHandler.remove(i,"keyup",this.chartKeyUpRef),this.isZooming){var n="mozilla"===sf.base.Browser.info.name?sf.base.Browser.isPointer?"mousewheel":"DOMMouseScroll":"mousewheel";i.removeEventListener(n,this.chartMouseWheelRef)}if(this.isScrollbar&&(window.removeEventListener("mousemove",this.domMouseMoveRef),window.removeEventListener("mouseup",this.domMouseUpRef,!1)),0==document.getElementsByClassName("e-chart").length){var o=sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize";sf.base.EventHandler.remove(window,o,l.resizeBound)}this.touchObject&&(this.touchObject.destroy(),this.touchObject=null)
/*! Apply the style for chart */}},e.prototype.wireEvents=function(e,t){var i=document.getElementById(e);if(i){this.dotnetref=t,l.dotnetrefCollection.push({id:e,dotnetref:t});
/*! Find the Events type */
var s=sf.base.Browser.isPointer?"pointerleave":"mouseleave";if(this.chartOnMouseDownRef=this.chartOnMouseDown.bind(this,t,e),this.mouseEndRef=this.mouseEnd.bind(this,t,e),this.mouseMoveRef=this.mouseMove.bind(this,t,e),this.chartOnMouseClickRef=this.chartOnMouseClick.bind(this,t,e),this.chartRightClickRef=this.chartRightClick.bind(this,t,e),this.chartKeyDownRef=this.chartOnKeyDown.bind(this,this.dotnetref,this.id),this.chartKeyUpRef=this.chartOnKeyUp.bind(this,this.dotnetref,this.id),this.mouseLeaveRef=this.mouseLeave.bind(this,t,e),
/*! Bind the Event handler */
i.addEventListener("mousemove",this.mouseMoveRef),i.addEventListener("touchmove",this.mouseMoveRef),sf.base.EventHandler.add(i,sf.base.Browser.touchStartEvent,this.chartOnMouseDownRef),sf.base.EventHandler.add(i,sf.base.Browser.touchEndEvent,this.mouseEndRef),sf.base.EventHandler.add(i,"click",this.chartOnMouseClickRef),sf.base.EventHandler.add(i,"contextmenu",this.chartRightClickRef),sf.base.EventHandler.add(i,s,this.mouseLeaveRef),sf.base.EventHandler.add(i,"keydown",this.chartKeyDownRef),sf.base.EventHandler.add(document.body,"keydown",this.documentKeyHandler,this),sf.base.EventHandler.add(i,"keyup",this.chartKeyUpRef),this.isZooming){this.chartMouseWheelRef=this.chartMouseWheel.bind(this,t,e);var n="mozilla"===sf.base.Browser.info.name?sf.base.Browser.isPointer?"mousewheel":"DOMMouseScroll":"mousewheel";i.addEventListener(n,this.chartMouseWheelRef)}this.isScrollbar&&(this.domMouseMoveRef=this.domMouseMove.bind(this,t,e),this.domMouseUpRef=this.domMouseUp.bind(this,t,e),window.addEventListener("mousemove",this.domMouseMoveRef),window.addEventListener("mouseup",this.domMouseUpRef,!1)),l.resizeBound=l.chartResize.bind(this,l.dotnetrefCollection);var o=sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize";sf.base.EventHandler.add(window,o,l.resizeBound),this.longPressBound=this.longPress.bind(this,t,e),this.touchObject=new sf.base.Touch(i,{tapHold:this.longPressBound,tapHoldThreshold:500})}},e.prototype.getEventArgs=function(e,t){var i=e.changedTouches?e.changedTouches[0].clientX:e.clientX,s=e.changedTouches?e.changedTouches[0].clientY:e.clientY;this.setMouseXY(i,s,t);var n=e.touches,o=[];if(e.type.indexOf("touch")>-1)for(var r=0,a=n.length;r<a;r++)o.push({pageX:n[r].clientX,pageY:n[r].clientY,pointerId:e.pointerId||0});return{type:e.type,clientX:e.clientX,clientY:e.clientY,mouseX:this.mouseX,mouseY:this.mouseY,pointerType:e.pointerType,target:e.target.id,changedTouches:{clientX:e.changedTouches?e.changedTouches[0].clientX:0,clientY:e.changedTouches?e.changedTouches[0].clientY:0},touches:o,pointerId:e.pointerId}},e.prototype.getWheelArgs=function(e,t){return this.setMouseXY(e.clientX,e.clientY,t),{detail:e.detail,wheelDelta:e.wheelDelta,target:e.currentTarget?e.currentTarget.id:e.srcElement?e.srcElement.id:e.target?e.target.id:"",clientX:e.clientX,clientY:e.clientY,mouseX:this.mouseX,mouseY:this.mouseY,browserName:sf.base.Browser.info.name,isPointer:sf.base.Browser.isPointer}},e.prototype.setMouseXY=function(e,t,i){var s=document.getElementById(i.replace("_stockChart_chart","")+"_svg").getBoundingClientRect(),n=document.getElementById(i).getBoundingClientRect();this.userInteractionBase.secondaryElementOffset&&(this.userInteractionBase.secondaryElementOffset.left=Math.max(s.left-n.left,0),this.userInteractionBase.secondaryElementOffset.top=Math.max(s.top-n.top,0),this.mouseY=t-n.top-this.userInteractionBase.secondaryElementOffset.top,this.mouseX=e-n.left-this.userInteractionBase.secondaryElementOffset.left)},e.prototype.chartOnMouseDown=function(e,t,i){this.dotnetref=e;var s=i.target,n=window.sfBlazor.getCompInstance(this.dataId);if(s.id.indexOf("legend")>0&&(n.previousHighlightedIndex=-1),i.type.indexOf("touch")>-1){var o=i.changedTouches?i.changedTouches[0].clientX:i.clientX,r=i.changedTouches?i.changedTouches[0].clientY:i.clientY,a=i.touches.length>1;n.pinchZoomingEnable?(this.pinchtarget=document.getElementById(t+"_Pinch_target"),this.pinchtarget.setAttribute("style",this.pinchStyle+" top: "+(r-50)+"px; left: "+(o-50)+"px;"),this.togglePointerEvents(t,!n.crosshairEnable||a),i.preventDefault(),"mozilla"!==sf.base.Browser.info.name.toLowerCase()&&a&&i.stopImmediatePropagation()):n.crosshairEnable&&(this.togglePointerEvents(t,!1),i.preventDefault())}return e.invokeMethodAsync("OnZoomingMouseDown",this.getEventArgs(i,t)),!1},e.prototype.togglePointerEvents=function(e,t){t?this.setPointerEvents(e,"none"):this.setPointerEvents(e,"auto")},e.prototype.setPointerEvents=function(e,t){document.getElementById(e+"_sfchart_rect_style").innerHTML="#"+e+"_ChartAreaBorder, #"+e+"_ChartBorder {pointer-events: "+t+"; }"},e.prototype.chartMouseWheel=function(e,t,i){return this.dotnetref=e,e.invokeMethodAsync("OnChartMouseWheel",this.getWheelArgs(i,t)),i.preventDefault(),!1},e.prototype.mouseMove=function(e,t,i,s){void 0===s&&(s=!1);var n=i.target;if(!sf.base.isNullOrUndefined(document.getElementById(n.id))&&("None"!==this.highlightMode||this.enableHighlight)){if((!sf.base.isNullOrUndefined(n)||n.id.indexOf("Point")>-1||n.id.indexOf("Symbol")>-1)&&(n=n.id.indexOf("text")>-1?l.findDOMElement(n.id.replace("text","shape")):l.findDOMElement(n.id),!sf.base.isNullOrUndefined(n)&&n.hasAttribute("class")&&(n.getAttribute("class").indexOf("highlight")>-1||n.getAttribute("class").indexOf("selection")>-1)))return;"None"!==this.highlightMode&&l.calculateSelectedElements(i,this.dataId);for(var o=void 0,r=[this.id+"_chart_legend_text_",this.id+"_chart_legend_shape_marker_",this.id+"_chart_legend_shape_",this.id+"_chart_legend_g_"],a=0;a<r.length;a++)if(!sf.base.isNullOrUndefined(n)&&!n.id.indexOf(r[a])){o=parseInt(n.id.split(r[a])[1]);break}var h=window.sfBlazor.getCompInstance(this.dataId);!sf.base.isNullOrUndefined(n)&&n.id.indexOf("legend")>0&&(l.isTargetChanged(o,h)||"None"!==this.highlightMode)&&(this.legendVisible=!0,l.legendSelection(i,h.dataId)),sf.base.isNullOrUndefined(n)||n.id.indexOf("legend")>0||l.resetPreviousHighlightIndex(h),sf.base.isNullOrUndefined(n)||"None"!=this.highlightMode||n.id.indexOf("legend")>0||!(h.highlightDataIndexes.length>0)||l.removeSelectionStyles(this.dataId)}if(!s&&(null==this.mouseMoveThreshold||(new Date).getTime()-this.mouseMoveThreshold>this.eventInterval)){this.mouseMoveThreshold=(new Date).getTime();var d=void 0,c=void 0,p=void 0;if("touchmove"===i.type){this.isTouch=!0,d=(p=i).changedTouches[0].clientX,c=p.changedTouches[0].clientY;h=window.sfBlazor.getCompInstance(this.dataId);this.pinchtarget&&h.pinchZoomingEnable&&(this.pinchtarget.setAttribute("style",this.pinchStyle+" top: "+(c-50)+"px; left: "+(d-50)+"px;"),i.preventDefault()),h.crosshairBase.crosshair.enable&&i.preventDefault()}else this.isTouch="touch"===i.pointerType||"2"===i.pointerType||this.isTouch,d=i.clientX,c=i.clientY;this.dotnetref=e,document.getElementById(t.replace("_stockChart_chart","")+"_svg")&&(this.setMouseXY(d,c,t),this.userInteractionBase.chartStartMove&&(null!=this.tooltipBase.tooltipModule&&l.tooltipMousemovehandler(this),this.markerExplodeBase.markerExploded&&l.markerMove(this,!1),this.crosshairBase.crosshair&&this.crosshairBase.crosshair.enable&&l.crosshairMousemoveHandler(this)),e.invokeMethodAsync("OnZoomingMouseMove",this.getEventArgs(i,t)),this.isTouch=!1)}},e.prototype.mouseEnd=function(e,t,i){var s,n,o=this;this.dotnetref=e;var r="touchmove"===i.type?i:null;if(s="touchmove"===i.type?r.changedTouches[0].clientX:i.clientX,n="touchmove"===i.type?r.changedTouches[0].clientY:i.clientY,this.isTouch=i.type.indexOf("touch")>-1||("touch"===i.pointerType||"2"===i.pointerType),document.getElementById(t.replace("_stockChart_chart","")+"_svg")&&(this.setMouseXY(s,n,t),this.isTouch&&!this.userInteractionBase.isStockChart&&((this.tooltipBase.tooltipModule.enable&&!this.crosshairBase.crosshair.enable&&!l.isSelected()&&sf.svgbase.withInAreaBounds(this.mouseX,this.mouseY,this.userInteractionBase.axisClipRect)&&this.tooltipBase.tooltipModule.shared||this.tooltipBase.tooltipModule.shared)&&(l.tooltip(this),this.markerExplodeBase.markerExploded&&l.markerMove(this,!1)),this.clearTooltip&&clearTimeout(this.clearTooltip),this.clearTooltip=setTimeout((function(){l.removeTooltip(300,o)}),1e3)),this.userInteractionBase.startMove&&l.removeCrosshair(this,2e3)),"touchend"==i.type)if(this.pinchZoomingEnable){var a=i.touches.length>0;this.togglePointerEvents(t,!this.crosshairEnable||a)}else this.togglePointerEvents(t,!1);return e.invokeMethodAsync("OnZoomingMouseEnd",this.getEventArgs(i,t)),this.isTouch=!1,!1},e.prototype.chartOnMouseClick=function(e,t,i){l.calculateSelectedElements(i,this.dataId);var s=i.target,n=window.sfBlazor.getCompInstance(this.dataId);s.id.indexOf("legend")>0&&!n.toggleVisibility&&(this.legendVisible=!0,l.legendSelection(i,n.dataId))},e.prototype.chartRightClick=function(e,t,i){return this.dotnetref=e,!window.sfBlazor.getCompInstance(this.dataId).crosshairBase.crosshair.enable||2!==i.buttons&&"touch"!==i.pointerType||(i.preventDefault(),i.stopPropagation()),e.invokeMethodAsync("OnChartMouseRightClick",this.getEventArgs(i,t)),!1},e.prototype.chartOnKeyDown=function(e,t,i){this.dotnetref=e;var s="";return(this.isZoomed&&"Tab"==i.code||"Space"==i.code)&&i.preventDefault(),this.options.showTooltip&&("Tab"==i.code&&this.previousTargetId.indexOf("Series")>-1||"Escape"===i.code)&&(s="ESC"),!i.ctrlKey||"+"!==i.key&&"Equal"!==i.code&&"-"!==i.key&&"Minus"!==i.code?82===i.keyCode&&this.isZoomed?(i.preventDefault(),this.isZoomed=!1,s="R"):i.code.indexOf("Arrow")>-1&&(i.preventDefault(),s=this.isZoomed?i.code:""):(i.preventDefault(),this.isZoomed=this.options.enableZoom,l.fadeOut(this.element),s=this.isZoomed?i.code:""),i.ctrlKey&&"p"===i.key&&(i.preventDefault(),s="CtrlP"),""!=s&&e.invokeMethodAsync("OnChartKeyboardNavigations",s,i.target.id),!1},e.prototype.processPointSelection=function(e,t,i,s){var n=document.getElementById(t);sf.base.isNullOrUndefined(n)||("Enter"===s?this.chartOnMouseClick(e,t,{target:document.getElementById(i),type:"click"}):"Tab"!==s&&"ArrowMove"!==s||this.mouseMove(e,t,{target:document.getElementById(i),type:"mousemove"},!0))},e.prototype.chartOnKeyUp=function(e,t,i){this.dotnetref=e;var s,n,o="",r=i.target.id,a=i.target,h=l.getElement(this.element.id+"_ChartTitle"),d=l.getElement(this.element.id+"SeriesCollection"),c=l.getElement(this.element.id+"_chart_legend_translate_g"),p=l.getElement(this.element.id+"_chart_legend_pageup");if(!this.isZoomed&&82!==i.keyCode){var u,f;if(h&&h.setAttribute("class","e-chart-focused"),d&&d.firstElementChild)(f=(u=d.firstElementChild.children[1]).getAttribute("class"))&&-1===f.indexOf("e-chart-focused")?f+=" e-chart-focused":f||(f="e-chart-focused"),u.setAttribute("class",f+" e-chart-focused");if(c)(f=(u=c.firstElementChild).getAttribute("class"))&&-1===f.indexOf("e-chart-focused")?f+=" e-chart-focused":f||(f="e-chart-focused"),u.setAttribute("class",f);if(p&&p.setAttribute("class","e-chart-focused"),"Tab"==i.code){if(""!=this.previousTargetId)if(this.previousTargetId.indexOf("_Series_")>-1&&-1==r.indexOf("_Series_")){if(s=l.getElement(this.element.id+"SeriesCollection"),!sf.base.isNullOrUndefined(s.children[this.currentSeriesIndex])){var g=this.previousTargetId.indexOf("_Symbol")>-1?l.getElement(this.element.id+"SymbolGroup"+this.currentSeriesIndex).children[this.currentPointIndex+1]:this.previousTargetId.indexOf("_Point_")>-1?s.children[this.currentSeriesIndex].children[this.currentPointIndex+1]:s.children[this.currentSeriesIndex];l.setTabIndex(g,s.firstElementChild),this.currentPointIndex=0,this.currentSeriesIndex=0}}else this.previousTargetId.indexOf("_chart_legend_page")>-1&&-1==r.indexOf("_chart_legend_page")&&-1==r.indexOf("_chart_legend_g_")?l.setTabIndex(i.target,l.getElement(this.element.id+"_chart_legend_pageup")):this.previousTargetId.indexOf("_chart_legend_g_")>-1&&-1==r.indexOf("_chart_legend_g_")&&(s=l.getElement(this.element.id+"_chart_legend_translate_g"),l.setTabIndex(s.children[this.currentLegendIndex],s.firstElementChild));this.previousTargetId=r,r.indexOf("SeriesGroup")>-1&&(this.currentSeriesIndex=+r.split("SeriesGroup")[1],a.removeAttribute("tabindex"),a.blur(),-1==a.children[1].id.indexOf("_Point_")&&(n=l.getElement(this.element.id+"SymbolGroup"+r.split("SeriesGroup")[1])),r=l.focusChild(null!=n?n.children[1]:a.children[1])),o=this.options.enableHighlight||this.options.showTooltip?"Tab":""}else if(i.code.indexOf("Arrow")>-1){if(i.preventDefault(),this.previousTargetId=r,r.indexOf("_chart_legend_page")>-1)"ArrowLeft"==i.code?(l.getElement(this.element.id+"_chart_legend_pagedown").removeAttribute("tabindex"),l.focusChild(l.getElement(this.element.id+"_chart_legend_pageup"))):"ArrowRight"==i.code&&(l.getElement(this.element.id+"_chart_legend_pageup").removeAttribute("tabindex"),l.focusChild(l.getElement(this.element.id+"_chart_legend_pagedown")));else if(r.indexOf("_chart_legend_")>-1){var m=a.parentElement.children;m[this.currentLegendIndex].removeAttribute("tabindex"),this.currentLegendIndex+="ArrowUp"==i.code||"ArrowRight"==i.code?1:-1,this.currentLegendIndex=l.getActualIndex(this.currentLegendIndex,m.length);var v=m[this.currentLegendIndex];l.focusChild(v),r=v.children[1].id,o=this.options.enableHighlight?"ArrowMove":""}else if(r.indexOf("_Series_")>-1){s=a.parentElement.parentElement;var b=i.target;if(a.removeAttribute("tabindex"),a.blur(),"ArrowRight"==i.code||"ArrowLeft"==i.code){for(var y=[],M=0;M<s.children.length;M++)s.children[M].id.indexOf("SeriesGroup")>-1&&y.push(+s.children[M].id.split("SeriesGroup")[1]);this.currentSeriesIndex=y.indexOf(this.currentSeriesIndex)+("ArrowRight"==i.code?1:-1),this.currentPointIndex=0,this.currentSeriesIndex=y[l.getActualIndex(this.currentSeriesIndex,y.length)],s=l.getElement(this.element.id+"SeriesGroup"+this.currentSeriesIndex),n=l.getElement(this.element.id+"SymbolGroup"+this.currentSeriesIndex),b=-1==s.children[1].id.indexOf("_Point_")&&n?n.children[1]:s.children[1]}else this.currentPointIndex+="ArrowUp"==i.code?1:-1,r.indexOf("_Symbol")>-1?(this.currentPointIndex=l.getActualIndex(this.currentPointIndex,l.getElement(this.element.id+"SymbolGroup"+this.currentSeriesIndex).childElementCount-1),b=l.getElement(this.element.id+"_Series_"+this.currentSeriesIndex+"_Point_"+this.currentPointIndex+"_Symbol")):r.indexOf("_Point_")>-1&&(this.currentPointIndex=l.getActualIndex(this.currentPointIndex,l.getElement(this.element.id+"SeriesGroup"+this.currentSeriesIndex).childElementCount-1),b=l.getElement(this.element.id+"_Series_"+this.currentSeriesIndex+"_Point_"+this.currentPointIndex));r=l.focusChild(b),o=this.options.showTooltip?"ArrowMove":""}}else"Enter"!=i.code&&"Space"!=i.code||!(r.indexOf("_chart_legend_")>-1||r.indexOf("_Point_")>-1)||(r=r.indexOf("_chart_legend_page")>-1?r:r.indexOf("_chart_legend_")>-1?a.children[1].id:r,o="Enter")}if(""!=o){if("ArrowMove"==o||"Tab"==o)if(r.indexOf("_Point_")>-1){var C,w=parseInt(r.split("_Series_")[1].split("_Point_")[0]),S=parseInt(r.split("_Series_")[1].replace("_Symbol","").split("_Point_")[1]);this.userInteractionBase.visibleSeries.forEach((function(e){e.index===w&&(C=e)}));var N=C.points[S].s[0];this.mouseX=N.x+this.userInteractionBase.initialRect.x,this.mouseY=N.y+this.userInteractionBase.initialRect.y,l.tooltipMousemovehandler(this)}else l.removeTooltip(1,this);"ESC"==o&&l.removeTooltip(1,this),this.processPointSelection(e,t,r,o),e.invokeMethodAsync("OnChartKeyboardNavigations",o,r)}return!1},e.prototype.mouseLeave=function(e,t,i){return null!=this.tooltipBase.tooltipModule&&l.removeTooltip(1e3,this),null!=this.crosshairBase.crosshair&&l.removeCrosshair(this,1e3),this.dotnetref=e,e.invokeMethodAsync("OnChartMouseLeave",this.getEventArgs(i,t)),!1},e.prototype.longPress=function(e,t,i){this.dotnetref=e;var s=i&&i.originalEvent.changedTouches?i.originalEvent.changedTouches[0].clientX:0,n=i&&i.originalEvent.changedTouches?i.originalEvent.changedTouches[0].clientY:0;this.setMouseXY(s,n,t);this.mouseX,this.mouseY;return this.userInteractionBase.startMove=!0,this.tooltipBase.tooltipModule.enable&&this.crosshairBase.crosshair.enable&&sf.svgbase.withInAreaBounds(this.mouseX,this.mouseY,this.userInteractionBase.axisClipRect)&&l.tooltip(this),this.crosshairBase.crosshair.enable&&sf.svgbase.withInAreaBounds(this.mouseX,this.mouseY,this.userInteractionBase.axisClipRect)&&l.createCrosshair(this),!1},e.prototype.domMouseMove=function(e,t,i){if((null==this.domMouseMoveThreshold||(new Date).getTime()-this.domMouseMoveThreshold>this.eventInterval)&&(this.domMouseMoveThreshold=(new Date).getTime(),!sf.base.isNullOrUndefined(l.svgId)&&l.svgId.indexOf(t)>-1)){var s=l.getScrollEventArgs(i,!0);e.invokeMethodAsync("ScrollMouseMove",s)}return!1},e.prototype.domMouseUp=function(e,t,i){if(!sf.base.isNullOrUndefined(l.svgId)&&l.svgId.indexOf(t)>-1){var s=l.getScrollEventArgs(i,!0);e.invokeMethodAsync("ScrollMouseUp",s),l.svgId=null}return!1},e}(),t=function(e,t){this.series=e,this.point=t},i=function(e,t){this.x=e,this.y=t},s=function(e,t,i){this.r=e,this.g=t,this.b=i},n=function(){this.currentPoints=[],this.previousPoints=[],this.valueX=0,this.valueY=0,this.tooltipTempList=[]},o=function(){this.markerCurrentPoints=[],this.markerPreviousPoints=[],this.trackBallClass="EJ2-TrackBall"},r=function(){this.crosshairX=0,this.crosshairY=0,this.rx=2,this.ry=2},a=function(){this.lierIndex=0,this.chartStartMove=!0,this.axes=[],this.isFirstRendered=!0,this.toolbarHeight=43},l={initialize:function(t,i,s,n,o,r,a){new e(t,i.id,i,s,n,o,r,a).render()},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.destroy()},setHighlightSelectionOptions:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.selectionHighlightOptions(t)},setTooltipData:function(e,t,i,s,n,o,r,a){var l=window.sfBlazor.getCompInstance(e);l.tooltipBase.tooltipModule&&(this.removeTooltip(100,l),this.removeCrosshair(l,100)),o&&(null!=l.tooltipBase.tooltipModule.template&&(o.template=l.tooltipBase.tooltipModule.template),l.tooltipBase.tooltipModule=o),l.dateValuePairs=r,l.numberValuePairs=a,l.userInteractionBase.chartStartMove=!1,l.getTooltipData(t,i,s,n),l.userInteractionBase.chartStartMove=!0,l.isDataLoaded&&setTimeout((function(){l.removeTooltipData()}),500)},setTooltipOptions:function(e,t,i,s,n,o,r,a,l){var h=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(h)||(h.dateValuePairs=a,h.numberValuePairs=l,h.userInteractionBase.chartStartMove=!1,h.tooltipOptions(t,i),sf.base.isNullOrUndefined(h.userInteractionBase.visibleSeries)&&h.getVisibleSeries(h,s,n,o,r),h.userInteractionBase.chartStartMove=!0)},setUIBooleanValues:function(e,t,i,s){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||(n.userInteractionBase.isPointDragging=s,n.userInteractionBase.isPointMouseDown=t,n.userInteractionBase.disableTrackTooltip=i)},setTooltipArgsData:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s)||(s.tooltipBase.formattedText=[],s.tooltipBase.argsData.headerText=t,s.tooltipBase.argsData.text=i,this.seriesTooltip(s,s.tooltipBase.currentPoints[0],!0))},setSharedTooltipArgsData:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s)||(s.tooltipBase.sharedArgsData.headerText=t,s.tooltipBase.sharedArgsData.text=i,this.groupedTooltip(s,s.tooltipBase.currentPoints,!0,s.tooltipBase.currentPoints[s.tooltipBase.currentPoints.length-1]))},invokeBlurEffect:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||this.blurEffect(t.element.id,t)},invokeRemoveSelectedElements:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||(t.selectedDataIndexes=[],t.styleId=t.element.id+"_ej2_chart_selection",this.removeSelectedElements(e))},redrawSelection:function(e){var t=window.sfBlazor.getCompInstance(e);t.isSeriesMode="Series"==t.oldMode;var i=t.selectedDataIndexes,s=t.highlightDataIndexes;t.styleId.indexOf("highlight")>-1&&t.highlightDataIndexes.length>0?(t.highlightDataIndexes=[],this.removeSelectedElements(e),i=s):(t.selectedDataIndexes=[],this.removeSelectedElements(e)),this.blurEffect(t.element.id,t),this.selectDataIndex(t.dataId,i)},removeSelectionStyles:function(e){var t=window.sfBlazor.getCompInstance(e);t.highlightDataIndexes=[];for(var i=0;i<t.seriesTypes.length;i++)this.removeLegendSelectionClass(document.getElementsByClassName(t.unSelected),t),this.removeLegendSelectionClass(document.getElementsByClassName(this.generateStyle(t.element.id+"SeriesGroup"+i,t)),t),this.removeLegendSelectionClass(this.getSeriesElements(i,t),t);for(i=0;i<t.seriesTypes.length;i++)this.removeSvgClass(this.findDOMElement(t.element.id+"_chart_legend_shape_"+i),this.findDOMElement(t.element.id+"_chart_legend_shape_"+i).getAttribute("class"))},removeLegendSelectionClass:function(e,t){for(var i=0,s=e;i<s.length;i++){var n=s[i];sf.base.isNullOrUndefined(n)||(this.removeSvgClass(n,n.getAttribute("class")),sf.base.isNullOrUndefined(t.highlightColor)||"None"!=t.highlightPattern||n.setAttribute("fill",t.highlightColor))}},removeSelectedElements:function(e){for(var t=window.sfBlazor.getCompInstance(e),i=0;i<t.seriesTypes.length;i++)this.removeStyles(this.getSeriesElements(i,t),t)},selectionChart:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.currentMode=i.selectionMode,i.styleId=i.element.id+"_ej2_chart_selection",this.selection(i,t,this.findElements(i,"",t)))},selectDataIndex:function(e,t){var i=this,s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s)||(this.isAlreadySelected({type:"click"},s),t.forEach((function(e){var t="#"+s.element.id+"_Series_"+e.series+"_Point_"+e.point;i.performSelection(e,s,s.element.querySelector(t))})))},focusTarget:function(e){var t,i;e.indexOf("_chart_legend_")>-1?(i=(t=this.getElement(e).parentElement).getAttribute("class"),this.setTabIndex(this.getElement(this.id+"_chart_legend_translate_g").firstElementChild,this.getElement(this.id+"SeriesCollection").firstElementChild),t.setAttribute("tabindex","0"),i&&-1===i.indexOf("e-chart-focused")?i+=" e-chart-focused":i||(i="e-chart-focused")):(t=this.getElement(e),i="e-chart-focused"),t.setAttribute("tabindex","0"),t.setAttribute("class",i),t.focus()},focusChild:function(e){e.setAttribute("tabindex","0");var t=e.getAttribute("class");return e.setAttribute("tabindex","0"),t&&-1===t.indexOf("e-chart-focused")?t+=" e-chart-focused":t||(t="e-chart-focused"),e.setAttribute("class",t),e.focus(),e.id},getActualIndex:function(e,t){return e>t-1?0:e<0?t-1:e},setTabIndex:function(e,t){e&&e.removeAttribute("tabindex"),t&&t.setAttribute("tabindex","0")},eventInterval:80,dotnetref:{},getScrollEventArgs:function(e,t){void 0===t&&(t=!1);var i=e.changedTouches?e.changedTouches[0].clientX:e.clientX,s=e.changedTouches?e.changedTouches[0].clientY:e.clientY,n=this.setScrollMouseXY(i,s,e.target.id,t),o=e.touches,r=[];if(e.type.indexOf("touch")>-1)for(var a=0,l=o.length;a<l;a++)r.push({pageX:o[a].clientX,pageY:o[a].clientY,pointerId:e.pointerId||0});var h=e.target.id;return h=h.indexOf("scrollBar")>-1?h:this.svgId,{type:e.type,clientX:e.clientX,clientY:e.clientY,mouseX:n.mouseX,mouseY:n.mouseY,pointerType:e.pointerType,target:h,changedTouches:{clientX:e.changedTouches?e.changedTouches[0].clientX:0,clientY:e.changedTouches?e.changedTouches[0].clientY:0},touches:r,pointerId:e.pointerId}},getScrollWheelArgs:function(e){var t=this.setScrollMouseXY(e.clientX,e.clientY,e.currentTarget.id);return{detail:e.detail,wheelDelta:e.wheelDelta,target:e.currentTarget?e.currentTarget.id:e.srcElement?e.srcElement.id:e.target?e.target.id:"",clientX:e.clientX,clientY:e.clientY,mouseX:t.mouseX,mouseY:t.mouseY,browserName:sf.base.Browser.info.name,isPointer:sf.base.Browser.isPointer}},svgId:null,setScrollMouseXY:function(e,t,i,s){if(void 0===s&&(s=!1),this.svgId=s?this.svgId:i,!s&&-1===i.indexOf("_scrollBar_svg")){var n=i.split("_scrollBar")[0],o=i.split("_");this.svgId=n+"_scrollBar_svg"+o[o.length-1],this.dotnetref=this.dotnetrefCollection.find((function(e){return n===e.id})).dotnetref}var r=e,a=t,l=this.getElement(this.svgId);if(!sf.base.isNullOrUndefined(l)){var h=l.getBoundingClientRect();r=e-Math.max(h.left,0),a=t-Math.max(h.top,0)}return{mouseX:r,mouseY:a}},scrollMouseDown:function(e){var t=this.getScrollEventArgs(e);return sf.base.isNullOrUndefined(this.dotnetref.invokeMethodAsync)||this.dotnetref.invokeMethodAsync("ScrollMouseDown",t),!1},scrollMouseMove:function(e){if(null==this.scrollMouseMoveThreshold||(new Date).getTime()-this.scrollMouseMoveThreshold>this.eventInterval){this.scrollMouseMoveThreshold=(new Date).getTime();var t=this.getScrollEventArgs(e);sf.base.isNullOrUndefined(this.dotnetref.invokeMethodAsync)||this.dotnetref.invokeMethodAsync("ScrollMouseMove",t)}return!1},scrollMouseUp:function(e){var t=this.getScrollEventArgs(e);return sf.base.isNullOrUndefined(this.dotnetref.invokeMethodAsync)||this.dotnetref.invokeMethodAsync("ScrollMouseUp",t),this.svgId=null,!1},scrollMouseWheel:function(e){if(null==this.scrollbarMouseWheelThreshold||(new Date).getTime()-this.scrollbarMouseWheelThreshold>this.eventInterval){this.scrollbarMouseWheelThreshold=(new Date).getTime();var t=this.getScrollWheelArgs(e);this.dotnetref.invokeMethodAsync("ScrollMouseWheel",t)}return!1},dotnetrefCollection:[],tooltipMousemovehandler:function(e){e.userInteractionBase.isPointMouseDown?this.removeTooltip(1e3,e):e.userInteractionBase.disableTrackTooltip||this.isSelected()||!e.tooltipBase.tooltipModule.enable||(!e.tooltipBase.tooltipModule.shared&&(!e.isTouch||e.userInteractionBase.startMove)||sf.svgbase.withInAreaBounds(e.mouseX,e.mouseY,e.userInteractionBase.axisClipRect)&&e.tooltipBase.tooltipModule.shared&&(!e.isTouch||e.userInteractionBase.startMove)?this.tooltip(e):e.tooltipBase.tooltipModule.shared&&e.tooltipBase.isSharedRemove&&this.removeTooltip(1e3,e))},markerMove:function(e,t){var i=this;if(e.userInteractionBase.isPointMouseDown)this.removeMarker(e);else{var s,n,o;if(e.tooltipBase.tooltipModule.shared&&e.tooltipBase.tooltipModule.enable){if(!sf.svgbase.withInAreaBounds(e.mouseX,e.mouseY,e.userInteractionBase.axisClipRect))return;if(e.tooltipBase.tooltipModule.enable){for(var r="PolarAxes"==e.userInteractionBase.chartAreaType?this.getData(e):null,a=0,l=e.userInteractionBase.visibleSeries;a<l.length;a++){var h=l[a];h.enableTooltip&&"Indicator"!=h.category&&h.visible&&("CartesianAxes"==e.userInteractionBase.chartAreaType&&h.visible?s=this.getClosestX(e,h):"PolarAxes"==e.userInteractionBase.chartAreaType&&h.visible&&r.point&&(s={point:h.points[r.point.iX],series:h}),s&&!sf.base.isNullOrUndefined(s.point)&&e.markerExplodeBase.markerCurrentPoints.push(s))}e.markerExplodeBase.markerCurrentPoints=this.getSharedPoints(e,e.markerExplodeBase.markerCurrentPoints)}}else{o=(s=this.getData(e)).series;var d=e.markerExplodeBase.markerPreviousPoints.length>0?e.markerExplodeBase.markerPreviousPoints[0]:null;n=!sf.base.isNullOrUndefined(o)&&("Bubble"==o.type||"Scatter"==o.drawType||"Scatter"==o.type||"Candle"!=o.type&&"Hilo"!=o.type&&"HiloOpenClose"!=o.type&&o.marker.vS&&0!=o.marker.mW&&0!=o.marker.mH),s.lierIndex=e.userInteractionBase.lierIndex,s.point&&n&&(null==d||d.point!=s.point||d.lierIndex>3&&d.lierIndex!=e.userInteractionBase.lierIndex)&&e.markerExplodeBase.markerCurrentPoints.push(s),s.point&&n&&e.userInteractionBase.isPointMouseDown&&e.markerExplodeBase.markerCurrentPoints.push(s)}if(e.markerExplodeBase.markerCurrentPoints.length>0&&(0==e.markerExplodeBase.markerPreviousPoints.length||e.userInteractionBase.isPointMouseDown||e.markerExplodeBase.markerPreviousPoints.length>0&&e.markerExplodeBase.markerPreviousPoints[0].point!=e.markerExplodeBase.markerCurrentPoints[0].point)){e.markerExplodeBase.markerPreviousPoints.length>0&&this.removeMarker(e);for(var c=0;c<e.markerExplodeBase.markerCurrentPoints.length;c++){var p=(r=e.markerExplodeBase.markerCurrentPoints[c]).series,u=r.point;if(u.mK=u.mK?u.mK:{vS:!1},r&&u||o&&"Candle"!=o.type&&"Hilo"!=o.type&&"HiloOpenClose"!=o.type){window.clearTimeout(e.markerExplodeBase.markerExplodeInterval),e.markerExplodeBase.isRemove=!0;for(var f=0;f<u.s.length;f++)this.isRectSeries(p.type)&&!u.mK.vS||this.trackBall(e,p,u,u.s[f],f)}}e.markerExplodeBase.markerPreviousPoints=[],e.markerExplodeBase.markerPreviousPoints=e.markerExplodeBase.markerPreviousPoints.concat(e.markerExplodeBase.markerCurrentPoints)}!e.tooltipBase.tooltipModule.enable&&(0==e.markerExplodeBase.markerCurrentPoints.length&&e.markerExplodeBase.isRemove||t&&e.markerExplodeBase.isRemove||e.userInteractionBase.axisClipRect&&!sf.svgbase.withInAreaBounds(e.mouseX,e.mouseY,e.userInteractionBase.axisClipRect))&&(e.markerExplodeBase.isRemove=!1,e.markerExplodeBase.markerExplodeInterval=+setTimeout((function(){i.removeMarker(e)}),2e3)),e.markerExplodeBase.markerCurrentPoints=[]}},trackBall:function(e,t,i,s,n,o){for(var r=i.mK,a=t.marker,l=e.element.id+"_Series_"+t.index+"_Point_"+i.iX+"_Trackball"+(n&&0!=n?"_"+n:""),h={width:(r.mW?r.mW:a.mW)+3,height:(r.mH?r.mH:a.mH)+3},d=r.b||t.border,c=d.cL&&"transparent"!=d.cL?d.cL:r.f?r.f:i.i?i.i:t.interior,p=this.convertHexToColor(this.colorNameToHex(c)),u=r.b?r.b.wT:a.b.wT,f="rgba("+p.r+","+p.g+","+p.b+",0.2)",g="CartesianAxes"==e.userInteractionBase.chartAreaType?"translate("+t.clipRect.x+","+t.clipRect.y+")":"",m="Bubble"==t.type||"Scatter"==t.type?"url(#"+e.clipPathID(t.index)+")":"url(#"+e.markerClipPathId(t.index)+")",v=r.sH?r.sH:a.sH,b=0;b<2;b++){var y=new sf.svgbase.PathOption(l+"_"+b,b>0?r.f||i.i||(o?t.interior:"#ffffff"):"transparent",u+(b>0?0:8),b>0?c:f,r.oP||a.oP,"",null),M=this.calculateShapes(s,h,v,y,a.iU,!1);this.drawTrackBall(e.element.id+"_svg",M.renderOption,M.functionName,e.markerExplodeBase.trackBallClass,m,g)}},colorNameToHex:function(e){e="transparent"===e?"white":e,document.body.appendChild(sf.base.createElement("text",{id:"chartmeasuretext"}));var t=document.getElementById("chartmeasuretext");t.style.color=e,e=window.getComputedStyle(t).color,sf.base.remove(t);var i=/^(rgb|hsl)(a?)[(]\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*(?:,\s*([\d.]+)\s*)?[)]$/.exec(e);return this.convertToHexCode(new s(parseInt(i[3],10),parseInt(i[4],10),parseInt(i[5],10)))},convertToHexCode:function(e){return"#"+this.componentToHex(e.r)+this.componentToHex(e.g)+this.componentToHex(e.b)},componentToHex:function(e){var t=e.toString(16);return 1===t.length?"0"+t:t},convertHexToColor:function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?new s(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)):new s(255,255,255)},calculateShapes:function(e,t,i,s,n,o){var r,a,l,h="path",d=o,c=d&&"Circle"===i?t.width-2:t.width,p=d&&"Circle"===i?t.height-2:t.height,u=e.x,f=e.y,g=e.y+-p/2,m=e.x+-c/2;switch(i){case"Bubble":case"Circle":h="ellipse",sf.base.merge(s,{rx:c/2,ry:p/2,cx:u,cy:f});break;case"Cross":r="M "+m+" "+f+" L "+(u+c/2)+" "+f+" M "+u+" "+(f+p/2)+" L "+u+" "+(f+-p/2),sf.base.merge(s,{d:r,stroke:s.fill});break;case"Multiply":r="M "+(u-0)+" "+(f-0)+" L "+(u+0)+" "+(f+0)+" M "+(u-0)+" "+(f+0)+" L "+(u+0)+" "+(f-0),sf.base.merge(s,{d:r,stroke:s.fill});break;case"HorizontalLine":r="M "+m+" "+f+" L "+(u+c/2)+" "+f,sf.base.merge(s,{d:r});break;case"VerticalLine":r="M "+u+" "+(f+p/2)+" L "+u+" "+(f+-p/2),sf.base.merge(s,{d:r});break;case"Diamond":r="M "+m+" "+f+" L "+u+" "+(f+-p/2)+" L "+(u+c/2)+" "+f+" L "+u+" "+(f+p/2)+" L "+m+" "+f+" z",sf.base.merge(s,{d:r});break;case"ActualRect":r="M "+m+" "+(f+-p/8)+" L "+(u+0)+" "+(f+-p/8)+" L "+(u+0)+" "+(f+p/8)+" L "+m+" "+(f+p/8)+" L "+m+" "+(f+-p/8)+" z",sf.base.merge(s,{d:r});break;case"TargetRect":r="M "+(m+0)+" "+(f+-p/2)+" L "+(u+0)+" "+(f+-p/2)+" L "+(u+0)+" "+(f+p/2)+" L "+(m+0)+" "+(f+p/2)+" L "+(m+0)+" "+(f+-p/2)+" z",sf.base.merge(s,{d:r});break;case"Rectangle":case"Hilo":case"HiloOpenClose":case"Candle":case"Waterfall":case"BoxAndWhisker":case"StepArea":case"StackingStepArea":case"Square":case"Flag":r="M "+m+" "+(f+-p/2)+" L "+(u+c/2)+" "+(f+-p/2)+" L "+(u+c/2)+" "+(f+p/2)+" L "+m+" "+(f+p/2)+" L "+m+" "+(f+-p/2)+" z",sf.base.merge(s,{d:r});break;case"Pyramid":case"Triangle":r="M "+m+" "+(f+p/2)+" L "+u+" "+(f+-p/2)+" L "+(u+c/2)+" "+(f+p/2)+" L "+m+" "+(f+p/2)+" z",sf.base.merge(s,{d:r});break;case"Funnel":case"InvertedTriangle":r="M "+(u+c/2)+" "+(f-p/2)+" L "+u+" "+(f+p/2)+" L "+(u-c/2)+" "+(f-p/2)+" L "+(u+c/2)+" "+(f-p/2)+" z",sf.base.merge(s,{d:r});break;case"Pentagon":for(var v=0;v<=5;v++)a=c/2*Math.cos(Math.PI/180*(72*v)),l=p/2*Math.sin(Math.PI/180*(72*v)),r=0===v?"M "+(u+a)+" "+(f+l)+" ":r.concat("L "+(u+a)+" "+(f+l)+" ");r=r.concat("Z"),sf.base.merge(s,{d:r});break;case"Image":h="Image",sf.base.merge(s,{href:n,height:p,width:c,x:m,y:g})}return{renderOption:s,functionName:h}},removeMarker:function(e){this.removeHighLightedMarker(e.markerExplodeBase.trackBallClass),e.markerExplodeBase.markerPreviousPoints=[]},crosshairMousemoveHandler:function(e){!e.userInteractionBase.disableTrackTooltip&&e.crosshairBase.crosshair.enable&&(!sf.svgbase.withInAreaBounds(e.mouseX,e.mouseY,e.userInteractionBase.axisClipRect)||e.isTouch&&!e.userInteractionBase.startMove?this.removeCrosshair(e,1e3):this.createCrosshair(e))},removeCrosshair:function(e,t){var i=this.getElement("_UserInteraction"),s=this.getElement("_crosshair_axis");this.stopAnimation(e.crosshairBase.crosshairInterval),!e.userInteractionBase.isFirstRendered&&i&&"0"!==i.getAttribute("opacity")&&(e.crosshairBase.crosshairInterval=+setTimeout((function(){new sf.base.Animation({}).animate(i,{duration:200,progress:function(e){if(i.style.animation="",i.setAttribute("opacity",(1-e.timeStamp/e.duration).toString()),s)for(;s.firstChild;)s.removeChild(s.firstChild)},end:function(){i.setAttribute("opacity","0"),e.tooltipBase.tooltipModule&&(e.tooltipBase.valueX=null,e.tooltipBase.valueY=null)}})}),t))},createCrosshair:function(e){var t,i=e.userInteractionBase.axisClipRect,s="",n="",o=e.crosshairBase.crosshair,r=document.getElementById("_UserInteraction");if(window.clearTimeout(e.crosshairBase.crosshairInterval),(!e.tooltipBase.tooltipModule.enable||sf.svgbase.withInAreaBounds(e.tooltipBase.valueX,e.tooltipBase.valueY,i))&&(e.crosshairBase.crosshairX=e.tooltipBase.tooltipModule.enable?e.tooltipBase.valueX:e.mouseX,e.crosshairBase.crosshairY=e.tooltipBase.tooltipModule.enable?e.tooltipBase.valueY:e.mouseY,e.userInteractionBase.isFirstRendered?(r.setAttribute("opacity","1"),r.setAttribute("style","pointer-events:none"),e.userInteractionBase.isFirstRendered=!1):r.setAttribute("opacity","1"),"Both"!==o.lineType&&"Horizontal"!==o.lineType||(s+="M "+i.x+" "+e.crosshairBase.crosshairY+" L "+(i.x+i.width)+" "+e.crosshairBase.crosshairY),"Both"!==o.lineType&&"Vertical"!==o.lineType||(n+="M "+e.crosshairBase.crosshairX+" "+i.y+" L "+e.crosshairBase.crosshairX+" "+(i.y+i.height)),0!=r.childNodes.length)){t=new sf.svgbase.PathOption("_HorizontalLine","none",o.line.width,o.line.color||e.crosshairBase.themeStyleCrosshairLine,null,o.dashArray,s),this.renderCrosshairLine(t,r.childNodes[0]),t=new sf.svgbase.PathOption("_VerticalLine","none",o.line.width,o.line.color||e.crosshairBase.themeStyleCrosshairLine,null,o.dashArray,n);var a={AxisInfo:[]};this.renderCrosshairLine(t,r.childNodes[3]),this.renderAxisTooltip(e,i,r.childNodes[6],a),e.tooltipBase.crosshairMouseMoveEventCalled&&e.dotnetref.invokeMethodAsync("OnCrosshairMove",a)}},renderAxisTooltip:function(e,t,i,s){var n,o,r,a,l,h,d,c;if(i)for(;i.firstChild;)i.removeChild(i.firstChild);for(var p=e.userInteractionBase.axes.length-1;p>=0;p--)if(c=(n=e.userInteractionBase.axes[p]).placeNextToAxisLine?n.updatedRect:n.rect,n.crosshairTooltip.enable&&(e.crosshairBase.crosshairX<=c.x+c.w&&c.x<=e.crosshairBase.crosshairX&&0!=c.w||e.crosshairBase.crosshairY<=c.y+c.h&&c.y<=e.crosshairBase.crosshairY&&0!=c.h)){if(a=document.getElementById(e.element.id+"_axis_tooltip_"+p),l=document.getElementById(e.element.id+"_axis_tooltip_text_"+p),!(o=this.getAxisText(e,n)))continue;if(sf.base.isNullOrUndefined(s)||s.AxisInfo.push({AxisName:n.name,AxisLabel:o}),r=this.tooltipLocation(e,o,n,t,new sf.svgbase.Rect(c.x,c.y,c.w,c.h)),null===a&&(a=e.userInteractionBase.svgRenderer.drawPath({id:e.element.id+"_axis_tooltip_"+p,fill:n.crosshairTooltip.fill||e.crosshairBase.themeStyleCrosshairFill})),l&&this.removeElement(l.id),i.appendChild(a),h=new sf.svgbase.TextOption(e.element.id+"_axis_tooltip_text_"+p,0,0,"start",o),l=sf.svgbase.textElement(h,n.crosshairTooltip.textStyle,n.crosshairTooltip.textStyle.color||e.crosshairBase.themeStyleCrosshairLabel,i),d=this.findCrosshairDirection(e.crosshairBase.rx,e.crosshairBase.ry,r,e.crosshairBase.arrowLocation,8,e.crosshairBase.isTop,e.crosshairBase.isBottom,e.crosshairBase.isLeft,e.crosshairBase.crosshairX,e.crosshairBase.crosshairY),a.setAttribute("d",d),l.textContent=o,l.setAttribute("x",(r.x+5+(e.userInteractionBase.enableRTL?e.crosshairBase.elementSize.width:0)).toString()),l.setAttribute("y",(r.y+5+3*e.crosshairBase.elementSize.height/4).toString()),"Fluent"===e.userInteractionBase.theme||"FluentDark"===e.userInteractionBase.theme){var u=e.element.id+"_shadow";a.setAttribute("filter",sf.base.Browser.isIE?"":"url(#"+u+")");var f='<filter id="'+u+'" height="130%"><feGaussianBlur in="SourceAlpha" stdDeviation="3"/>';f+='<feOffset dx="3" dy="3" result="offsetblur"/><feComponentTransfer><feFuncA type="linear" slope="0.5"/>',f+='</feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';var g=e.userInteractionBase.svgRenderer.createDefs();g.setAttribute("id",e.element.id+"SVG_tooltip_definition"),i.appendChild(g),g.innerHTML=f,a.setAttribute("stroke","#cccccc"),a.setAttribute("stroke-width","0.5")}}},getAxisText:function(e,t){var i;e.crosshairBase.isBottom=!1,e.crosshairBase.isTop=!1,e.crosshairBase.isLeft=!1,e.crosshairBase.isRight=!1;var s="Category"===t.valueType&&"BetweenTicks"===t.labelPlacement?.5:0,n=t.isAxisOppositePosition;if("Horizontal"===t.orientation?(i=this.getValueByPoint(Math.abs(e.crosshairBase.crosshairX-t.rect.x),t.rect.w,t.orientation,t.visibleRange,t.isAxisInverse)+s,e.crosshairBase.isBottom=!n,e.crosshairBase.isTop=n):(i=this.getValueByPoint(Math.abs(e.crosshairBase.crosshairY-t.rect.y),t.rect.h,t.orientation,t.visibleRange,t.isAxisInverse)+s,e.crosshairBase.isRight=n,e.crosshairBase.isLeft=!n),"DateTime"===t.valueType){var o=(new sf.base.Internationalization).getDateFormat({format:t.format?t.format:t.dateFormat,type:this.firstToLowerCase("DateTime")})(new Date(i));return this.getGlobalizedDate(o,e.dateValuePairs)}if("Category"===t.valueType)return i<t.labels.length?t.labels[Math.floor(i)]:"";if("DateTimeCategory"===t.valueType)return this.getIndexedAxisLabel(t.labels[Math.floor(i)],this.customFormat(t),e.dateValuePairs);if("Logarithmic"===t.valueType){var r=this.formatAxisValue(Math.pow(t.logBase,i),this.getaxisFormat(t).indexOf("{value}")>-1,t.labelFormat).replace(/\,/g,"");return this.getGlobalizedNumber(r,e.numberValuePairs)}var a=t.labelFormat&&null!==t.labelFormat.match("{value}");r=a?t.labelFormat.replace("{value}",this.formatAxisValue(i,a,t.labelFormat,3)).replace(/\,/g,""):this.formatAxisValue(i,a,t.labelFormat,3).replace(/\,/g,"");return this.getGlobalizedNumber(r,e.numberValuePairs)},getGlobalizedDate:function(e,t){return Object.keys(t).forEach((function(i){e=e.replaceAll(i,t[i])})),e},getGlobalizedNumber:function(e,t){for(var i=e.split(""),s=Object.keys(t),n=0,o=e.length;n<o;n++)for(var r=0,a=s.length;r<a;r++)if(i[n]==s[r]){i.splice(n,1,t[s[r]]);break}return i.join("")},firstToLowerCase:function(e){return e.substr(0,1).toLowerCase()+e.substr(1)},getaxisFormat:function(e){return e.labelFormat?0!=e.labelFormat.indexOf("p")||e.labelFormat.indexOf("{value}")>-1||!e.isStack100?e.labelFormat:"{value}%":e.isStack100?"{value}%":""},getIndexedAxisLabel:function(e,t,i){for(var s=e.split(","),n=0;n<s.length;n++)s[n]=this.getGlobalizedDate((new sf.base.Internationalization).getDateFormat({format:t})(new Date(parseInt(s[n],10))),i);return s.join(", ")},customFormat:function(e){return e.labelFormat?e.labelFormat:"Years"===e.actualIntervalType?"yyyy":this.getSkeleton(e)},getSkeleton:function(e){var t=e.rangeIntervalType;return e.format?e.format:"Years"===t||"Quarter"===t?"y":"Months"===t||"Weeks"===t?"MMMM d":"Days"===t?"MM/dd/yyyy":"Hours"===t?"HH:mm tt":"HH:mm:ss tt"},tooltipLocation:function(e,t,s,n,o){var r,a=n.x,l=n.y,h="Inside"===s.labelPosition,d=s.scrollbarSettingsEnable?s.scrollBarHeight:0;e.crosshairBase.elementSize=sf.svgbase.measureText(t,s.crosshairTooltip.textStyle);var c=s.isAxisOppositePosition;if("Horizontal"===s.orientation){var p=h?o.y-e.crosshairBase.elementSize.height-20:o.y+d,u=h?o.y-e.crosshairBase.elementSize.height-10:o.y+10;e.crosshairBase.arrowLocation=new i(e.crosshairBase.crosshairX,p),r=new sf.svgbase.Rect(e.crosshairBase.crosshairX-e.crosshairBase.elementSize.width/2-5,u+(h?0:d),e.crosshairBase.elementSize.width+10,e.crosshairBase.elementSize.height+10),c&&(r.y=h?o.y:o.y-(e.crosshairBase.elementSize.height+20)-d),r.x<a&&(r.x=a),r.x+r.width>a+n.width&&(r.x-=r.x+r.width-(a+n.width)),e.crosshairBase.arrowLocation.x+4>r.x+r.width-e.crosshairBase.rx&&(e.crosshairBase.arrowLocation.x=r.x+r.width-e.crosshairBase.rx-8),e.crosshairBase.arrowLocation.x-8<r.x+e.crosshairBase.rx&&(e.crosshairBase.arrowLocation.x=r.x+e.crosshairBase.rx+8)}else{d*=c?1:-1,e.crosshairBase.arrowLocation=new i(o.x,e.crosshairBase.crosshairY);var f=h?o.x-d:o.x-e.crosshairBase.elementSize.width-20;r=new sf.svgbase.Rect(f+d,e.crosshairBase.crosshairY-e.crosshairBase.elementSize.height/2-5,e.crosshairBase.elementSize.width+10,e.crosshairBase.elementSize.height+10),c?(r.x=h?o.x-e.crosshairBase.elementSize.width-8:o.x+8+d,r.x+r.width>e.userInteractionBase.availableSize.width&&(e.crosshairBase.arrowLocation.x-=r.x+r.width-e.userInteractionBase.availableSize.width,r.x-=r.x+r.width-e.userInteractionBase.availableSize.width)):r.x<0&&(e.crosshairBase.arrowLocation.x-=r.x,r.x=0),r.y<l&&(r.y=l),r.y+r.height>=l+n.height&&(r.y-=r.y+r.height-(l+n.height)),e.crosshairBase.arrowLocation.y+4>r.y+r.height-e.crosshairBase.ry&&(e.crosshairBase.arrowLocation.y=r.y+r.height-e.crosshairBase.ry-4),e.crosshairBase.arrowLocation.y-4<r.y+e.crosshairBase.ry&&(e.crosshairBase.arrowLocation.y=r.y+e.crosshairBase.ry+4)}return r},findCrosshairDirection:function(e,t,i,s,n,o,r,a,l,h){var d="",c=i.x,p=i.y,u=i.x+i.width,f=i.y+i.height;return o?(d=(d=(d=d.concat("M "+c+" "+(p+t)+" Q "+c+" "+p+" "+(c+e)+" "+p)).concat(" L "+(u-e)+" "+p+" Q "+u+" "+p+" "+u+" "+(p+t))).concat(" L "+u+" "+(f-t)+" Q "+u+" "+f+" "+(u-e)+" "+f),0!==n&&(d=(d=d.concat(" L "+(s.x+n/2)+" "+f)).concat(" L "+l+" "+(f+n)+" L "+(s.x-n/2)+" "+f)),d=s.x-n/2>c||0===n?d.concat(" L "+(c+e)+" "+f+" Q "+c+" "+f+" "+c+" "+(f-t)+" z"):d.concat(" L "+c+" "+(f+t)+" z")):d=r?(d=(d=(d=(d=(d=d.concat("M "+c+" "+(p+t)+" Q "+c+" "+p+" "+(c+e)+" "+p+" L "+(s.x-n/2)+" "+p)).concat(" L "+l+" "+s.y)).concat(" L "+(s.x+n/2)+" "+p)).concat(" L "+(u-e)+" "+p+" Q "+u+" "+p+" "+u+" "+(p+t))).concat(" L "+u+" "+(f-t)+" Q "+u+" "+f+" "+(u-e)+" "+f)).concat(" L "+(c+e)+" "+f+" Q "+c+" "+f+" "+c+" "+(f-t)+" z"):a?(d=(d=(d=(d=(d=d.concat("M "+c+" "+(p+t)+" Q "+c+" "+p+" "+(c+e)+" "+p)).concat(" L "+(u-e)+" "+p+" Q "+u+" "+p+" "+u+" "+(p+t)+" L "+u+" "+(s.y-n/2))).concat(" L "+(u+n)+" "+h)).concat(" L "+u+" "+(s.y+n/2))).concat(" L "+u+" "+(f-t)+" Q "+u+" "+f+" "+(u-e)+" "+f)).concat(" L "+(c+e)+" "+f+" Q "+c+" "+f+" "+c+" "+(f-t)+" z"):(d=(d=(d=(d=(d=d.concat("M "+(c+e)+" "+p+" Q "+c+" "+p+" "+c+" "+(p+t)+" L "+c+" "+(s.y-n/2))).concat(" L "+(c-n)+" "+h)).concat(" L "+c+" "+(s.y+n/2))).concat(" L "+c+" "+(f-t)+" Q "+c+" "+f+" "+(c+e)+" "+f)).concat(" L "+(u-e)+" "+f+" Q "+u+" "+f+" "+u+" "+(f-t))).concat(" L "+u+" "+(p+t)+" Q "+u+" "+p+" "+(u-e)+" "+p+" z"),d},renderCrosshairLine:function(e,t){for(var i=Object.keys(e),s="",n=0;n<i.length;n++)"id"!=(s="strokeWidth"===i[n]?"stroke-width":"strokeDashArray"===i[n]?"stroke-dashArray":"direction"===i[n]?"d":i[n])&&t.setAttribute(s,e[i[n]])},isSelected:function(){return!1},getTooltipElement:function(e){e.tooltipBase.header=null===e.tooltipBase.tooltipModule.header?e.tooltipBase.tooltipModule.shared?"<b>${point.x}</b>":"<b>${series.name}</b>":e.getTooltipFormat(e.tooltipBase.tooltipModule.header),e.tooltipBase.formattedText=[]},findData:function(e,t,i){return e.point&&(!t||t.point!==e.point||t.lierIndex>3&&t.lierIndex!=i||t.point===e.point)},renderSeriesTooltip:function(e,t){var i=this.getData(t);if(i.lierIndex=t.userInteractionBase.lierIndex,t.tooltipBase.currentPoints=[],this.findData(i,t.tooltipBase.previousPoints.length>0?t.tooltipBase.previousPoints[0]:null,t.userInteractionBase.lierIndex)){if(window.clearTimeout(t.tooltipBase.toolTipInterval),!i.series.dataEditSettings&&t.tooltipBase.previousPoints[0]&&i.point.iX===t.tooltipBase.previousPoints[0].point.iX&&i.series.index===t.tooltipBase.previousPoints[0].series.index)return t.tooltipBase.isRemove=!0,null;this.pushData(i,t)&&this.triggerTooltipRender(i,e,this.getTooltipText(i,t),this.findHeader(i,t),t)}else if(!i.point&&t.tooltipBase.isRemove)this.removeTooltip(1e3,t),t.tooltipBase.isRemove=!1;else for(var s=0,n=t.userInteractionBase.visibleSeries;s<n.length;s++){var o=n[s];o.visible&&"TrendLine"!==o.category&&(i=this.getClosestX(t,o)||i)}i&&i.point&&this.findMouseValue(i,t)},triggerTooltipRender:function(e,t,i,s,n){n.tooltipBase.argsData={data:{pointX:e.point.x?e.point.x.toString():"",pointY:e.point.y?e.point.y.toString():"",seriesIndex:e.series.index,seriesName:e.series.name,pointIndex:e.point.iX,pointText:e.point.t},headerText:s,point:e.point,series:e.series,text:i},n.tooltipBase.tooltipEventCalled?n.dotnetref.invokeMethodAsync("TooltipEventTriggered",n.tooltipBase.argsData):this.seriesTooltip(n,e,t)},seriesTooltip:function(e,t,s){var n=[];if(null!=t){"BoxAndWhisker"===t.series.type&&(s=!0),e.tooltipBase.header=e.tooltipBase.argsData.headerText,e.tooltipBase.formattedText=e.tooltipBase.formattedText.concat(e.tooltipBase.argsData.text);var o=new i(t.series.clipRect.x,t.series.clipRect.y);if(null!=e.tooltipBase.tooltipModule.template&&e.tooltipBase.currentPoints.length>0){e.tooltipBase.tooltipTempList=[];var r=t.point,a={x:r.x?r.x.toString():"",y:r.y?r.y.toString():"",text:r.t.toString(),high:r.h?r.h.toString():"",low:r.l?r.l.toString():"",open:r.o?r.o.toString():"",close:r.c?r.c.toString():"",volume:r.v?r.v.toString():"",pointX:r.x?r.x.toString():"",pointY:r.y?r.y.toString():"",seriesIndex:t.series.index,seriesName:t.series.name,pointIndex:t.point.iX,pointText:t.point.t};e.tooltipBase.tooltipTempList.push(a);var l=this.getSymbolLocation(t,e),h=this.isRectSeries(t.series.type)&&"Waterfall"!=t.series.type&&t.point&&parseInt(r.y?r.y.toString():"")<0,d=e.userInteractionBase.isInverted&&h,c=this.getTemplateLocation(e.userInteractionBase.axisClipRect,l,e.tooltipBase.tooltipElementSize.width,e.tooltipBase.tooltipElementSize.height,this.findMarkerHeight(e.tooltipBase.currentPoints[0],e),o,d,h);e.dotnetref.invokeMethodAsync("SetTooltipTemplateElementSizeAsync",c.x,c.y,e.tooltipBase.tooltipTempList),this.removeHighlight(e),this.highlightPoints(e),this.updatePreviousPoint(e,n)}else{var p=e.userInteractionBase.chartBorderWidth;this.createTooltipRenderer(e,s,this.getSymbolLocation(t,e),o,t.point,this.findShapes(e),this.findMarkerHeight(e.tooltipBase.currentPoints[0],e),new sf.svgbase.Rect(p,p,e.userInteractionBase.availableSize.width-3-2*p,e.userInteractionBase.availableSize.height-3-2*p),e.crosshairBase.crosshair.enable,n,null,"")}}else this.removeHighlight(e);e.tooltipBase.isRemove=!0},groupedTooltip:function(e,t,s,n){var o=t[t.length-1];if(null!=n&&e.tooltipBase.currentPoints.length>0){var r=[];e.tooltipBase.header=e.tooltipBase.sharedArgsData.headerText,e.tooltipBase.formattedText=e.tooltipBase.sharedArgsData.text,this.findMouseValue(n,e);var a=1==e.tooltipBase.currentPoints.length?new i(e.tooltipBase.currentPoints[0].series.clipRect.x,e.tooltipBase.currentPoints[0].series.clipRect.y):new i(0,0);if(null!=e.tooltipBase.tooltipModule.template&&e.tooltipBase.currentPoints.length>0){e.tooltipBase.tooltipTempList=[];for(var l=0;l<t.length;l++){var h=t[l].point,d={x:h.x?h.x.toString():"",y:h.y?h.y.toString():"",text:h.t.toString(),high:h.h?h.h.toString():"",low:h.l?h.l.toString():"",open:h.o?h.o.toString():"",close:h.c?h.c.toString():"",volume:h.v?h.v.toString():"",pointX:h.x?h.x.toString():"",pointY:h.y?h.x.toString():"",seriesIndex:t[l].series.index,seriesName:t[l].series.name,pointIndex:t[l].point.iX,pointText:t[l].point.t};e.tooltipBase.tooltipTempList.push(d)}var c=this.findSharedLocation(e),p=e.tooltipBase.currentPoints[0].series,u=this.isRectSeries(p.type)&&"Waterfall"!=p.type&&o.point&&parseInt(o.point.y?o.point.y.toString():"")<0,f=e.userInteractionBase.isInverted&&u,g=this.getTemplateLocation(e.userInteractionBase.axisClipRect,c,0,0,this.findMarkerHeight(e.tooltipBase.currentPoints[0],e),a,f,u);e.dotnetref.invokeMethodAsync("SetTooltipTemplateElementSizeAsync",g.x,g.y,e.tooltipBase.tooltipTempList),this.setTooltipTemplateElementSize(e,c,a,f,u),this.removeHighlight(e),this.highlightPoints(e),this.updatePreviousPoint(e,r)}else{var m=e.userInteractionBase.chartBorderWidth;this.createTooltipRenderer(e,s,this.findSharedLocation(e),a,n.point,this.findShapes(e),this.findMarkerHeight(e.tooltipBase.currentPoints[0],e),new sf.svgbase.Rect(m,m,e.userInteractionBase.availableSize.width-3-2*m,e.userInteractionBase.availableSize.height-3-2*m),e.crosshairBase.crosshair.enable,r,null,"")}}else[].push(o);e.tooltipBase.isSharedRemove=!0},setTooltipTemplateElementSize:function(e,t,i,s,n){var o=this.getTemplateSize(e.element.id+"_tooltip");if(o&&e.tooltipBase.currentPoints.length>0){var r=this.getTemplateLocation(e.userInteractionBase.axisClipRect,t,o.width,o.height,this.findMarkerHeight(e.tooltipBase.currentPoints[0],e),i,s,n);r.x+=e.userInteractionBase.secondaryElementOffset.left,r.y+=e.userInteractionBase.secondaryElementOffset.top,document.getElementById(e.element.id+"_tooltip").setAttribute("style","top:"+r.y.toString()+"px;left:"+r.x.toString()+"px;pointer-events:none; position:absolute;z-index: 1;visibility: visible;")}},pushData:function(e,t){return!!e.series.enableTooltip&&(null!=t&&t.tooltipBase.currentPoints.push(e),!0)},renderGroupedTooltip:function(e,t){var i,s,n=this,o="PolarAxes"===t.userInteractionBase.chartAreaType?this.getData(t):null;t.tooltipBase.currentPoints=[];for(var r,a,l=[],h=[],d=[],c=0;c<t.userInteractionBase.visibleSeries.length;c++){var p=t.userInteractionBase.visibleSeries[c];p.enableTooltip&&p.visible&&0!=p.points.length&&("CartesianAxes"==t.userInteractionBase.chartAreaType&&p.visible&&p.points.length>0?i=this.getClosestX(t,p):"PolarAxes"===t.userInteractionBase.chartAreaType&&p.visible&&null!=o.point&&(i={point:p.points[o.point.iX],series:p}),null!=i&&i.point&&l.push(i))}l=this.getSharedPoints(t,l),(l=this.sortPointsInfo(l)).forEach((function(e){a={pointX:e.point.x?e.point.x.toString():"",pointY:e.point.y?e.point.y.toString():"",seriesIndex:e.series.index,seriesName:e.series.name,pointIndex:e.point.iX,pointText:e.point.t},d.push(a),r=n.findHeader(e,t),t.tooltipBase.currentPoints.push(e),h.push(n.getTooltipText(e,t)),s="TrendLine"===e.series.category&&t.tooltipBase.tooltipModule.shared?s:e})),t.userInteractionBase.isStockChart&&h.push(""),t.tooltipBase.sharedArgsData={headerText:r,text:h,data:d},t.tooltipBase.sharedTooltipEventCalled?t.dotnetref.invokeMethodAsync("SharedTooltipEventTriggered",t.tooltipBase.sharedArgsData):this.groupedTooltip(t,l,e,s)},createTooltipRenderer:function(e,t,s,n,o,r,a,l,h,d,c,p){var u,f=e.tooltipBase.currentPoints[0].series,g=this.isRectSeries(f.type);t&&null!=s&&(u=new sf.svgbase.Tooltip({opacity:e.tooltipBase.tooltipModule.opacity,header:e.tooltipBase.header,content:e.tooltipBase.formattedText,fill:e.tooltipBase.tooltipModule.fill,border:e.tooltipBase.tooltipModule.border,enableAnimation:e.tooltipBase.tooltipModule.enableAnimation,location:null!=s?new i(s.x+e.userInteractionBase.secondaryElementOffset.left,s.y+e.userInteractionBase.secondaryElementOffset.top):null,shared:e.tooltipBase.tooltipModule.shared,crosshair:h,shapes:r,clipBounds:"PolarAxes"==e.userInteractionBase.chartAreaType?new i(0,0):n,areaBounds:new sf.svgbase.Rect(l.x+e.userInteractionBase.secondaryElementOffset.left,l.y+(e&&e.userInteractionBase.isStockChart?e.tooltipBase.seriesTooltipTop:0)+e.userInteractionBase.secondaryElementOffset.top,l.width,l.height),palette:this.findPalette(e),controlName:"Chart",controlInstance:e,template:p||e.tooltipBase.tooltipModule.template,data:c,theme:e.userInteractionBase.theme,offset:a,textStyle:e.tooltipBase.tooltipModule.textStyle,isNegative:!!(g&&"Waterfall"!=f.type&&o&&o.y)&&("BoxPlot"!=f.seriesType&&Number(o.y)<0),inverted:e.userInteractionBase.isInverted&&g,arrowPadding:e.tooltipBase.formattedText.length>1?0:7,availableSize:e.userInteractionBase.availableSize,duration:e.tooltipBase.tooltipDuration,isCanvas:!1,rx:4,ry:4,isTextWrap:e.tooltipBase.tooltipModule.enableTextWrap,enableRTL:e.userInteractionBase.enableRTL})),null!=u&&(this.removeHighlight(e),this.highlightPoints(e),this.updatePreviousPoint(e,d),this.renderTooltip(u,e.element.id+"_tooltip",e))},tooltip:function(e){this.getTooltipElement(e),e.tooltipBase.tooltipModule.shared?this.renderGroupedTooltip(!0,e):this.renderSeriesTooltip(!0,e)},getData:function(e){for(var t,i,s,n,o=null,r=null,a=e.userInteractionBase.visibleSeries.length-1;a>=0;a--){if(t="Scatter"===(r=e.userInteractionBase.visibleSeries[a]).type||"Scatter"===r.drawType||r.marker&&r.marker.vS?(r.marker.mH+5)/2:0,i="Scatter"===r.type||"Scatter"===r.drawType||r.marker&&r.marker.vS?(r.marker.mW+5)/2:0,s=e.mouseX,n=e.mouseY,r.dataEditSettings&&this.isRectSeries(r.seriesType))if("Bar"===r.type&&r.chartIsTransposed||!r.chartIsTransposed&&"Bar"!==r.type){var l=r.marker.mH/2;n=r.y_Axis.isAxisInverse?n-l:n+l}else{var h=r.marker.mW/2;s=r.y_Axis.isAxisInverse?s+h:s-h}if(r.visible&&!sf.base.isNullOrUndefined(r.clipRect)&&sf.svgbase.withInAreaBounds(s,n,new sf.svgbase.Rect(r.clipRect.x,r.clipRect.y,r.clipRect.w,r.clipRect.h),t,i)&&(o=this.getRectPoint(r,r.clipRect,s,n,e)),o)return{point:o,series:r}}return{point:o,series:r}},getRectPoint:function(e,t,i,s,n){for(var o,r,a,l,h,d,c=0,p=this.isRectSeries(e.seriesType),u=0,f=e.points;u<f.length;u++){var g=f[u];if(g.rD||g.r&&g.r.length){if(g.rD&&"PolarAxes"===n.userInteractionBase.chartAreaType&&e.drawType.indexOf("Column")>-1&&(o=i-(e.clipRect.w/2+e.clipRect.x),r=s-(e.clipRect.h/2+e.clipRect.y),c=2*Math.PI*(g.rD.cP<0?1+g.rD.cP:g.rD.cP),a=(a=(Math.atan2(r,o)+.5*Math.PI-c)%(2*Math.PI))<0?2*Math.PI+a:a,a+=2*Math.PI*e.x_Axis.startAngle,l=g.rD.sA,l=(l-=c)<0?2*Math.PI+l:l,h=g.rD.eA,h=(h-=c)<0?2*Math.PI+h:h,d=Math.sqrt(Math.pow(Math.abs(o),2)+Math.pow(Math.abs(r),2)),a>=l&&a<=h&&(d>=g.rD.iR&&d<=g.rD.r||d<=g.rD.iR&&d>=g.rD.r)&&d<=n.userInteractionBase.chartRadius))return g;if(e.dataEditSettings&&p&&this.rectRegion(i,s,g,t,e,n))return g;if(this.checkRegionContainsPoint(g.r,t,i,s,n))return g}}return null},rectRegion:function(e,t,i,s,n,o){var r,a="Bar"===n.type,l=n.y_Axis.isAxisInverse,h=n.chartIsTransposed,d=0,c=0,p=r=20;return l&&h?a?(d=i.r[0].h-10,r=i.r[0].w):(c=-10,p=i.r[0].h):l||i.yV<0?a?(c=-10,p=i.r[0].h):(d=i.r[0].h-10,r=i.r[0].w):h?a?(d=-10,r=i.r[0].w):(c=i.r[0].w-10,p=i.r[0].h):a?(c=i.r[0].w-10,p=i.r[0].h):(d=-10,r=i.r[0].w),i.r.some((function(i){return sf.svgbase.withInAreaBounds(e,t,new sf.svgbase.Rect(("CartesianAxes"===o.userInteractionBase.chartAreaType?s.x:0)+i.x+c,("CartesianAxes"===o.userInteractionBase.chartAreaType?s.y:0)+i.y+d,r,p))}))},checkRegionContainsPoint:function(e,t,i,s,n){return e.some((function(e,o){return n.userInteractionBase.lierIndex=o,sf.svgbase.withInAreaBounds(i,s,new sf.svgbase.Rect(("CartesianAxes"===n.userInteractionBase.chartAreaType?t.x:0)+e.x,("CartesianAxes"===n.userInteractionBase.chartAreaType?t.y:0)+e.y,e.w,e.h))}))},getClosestX:function(e,t){if(null==t)return null;var i=this.getPointValue(e,t),s=this.getClosest(t,i);return null!=s&&null==s.y&&"BollingerBand"==t.name?null:{point:s,series:t}},getPointValue:function(e,t){if(null!=t&&null!=t.clipRect){var i=e.userInteractionBase.isInverted?e.mouseY-t.clipRect.y:e.mouseX-t.clipRect.x,s=e.userInteractionBase.isInverted?t.clipRect.h:t.clipRect.w;return this.getValueByPoint(i,s,t.x_Axis.orientation,t.x_Axis.visibleRange,t.x_Axis.isAxisInverse)}return 0},getValueByPoint:function(e,t,i,s,n){return("Horizontal"==i&&!n||"Horizontal"!=i&&n?e/t:1-e/t)*s.delta+s.start},getClosest:function(e,t){var i;if(null==e)return i;var s=e.x_Axis;return null!=s&&t>=s.visibleRange.start-.5&&t<=s.visibleRange.end+.5&&e.points.length>0&&(i=this.findClosest(this.sortPoints(e.points,["xV"]),t)),i},sortPoints:function(e,t,i){for(var s=sf.base.extend([],e,null),n=0;n<s.length;n++)for(var o=0;o<t.length;o++)s[n][t[o]]instanceof Date&&(s[n][t[o]]=s[n][t[o]].getTime());return s.sort((function(e,s){for(var n=0,o=0,r=0;r<t.length;r++)n+=e[t[r]],o+=s[t[r]];return!i&&n<o||i&&n>o?-1:n===o?0:1})),s},findClosest:function(e,t){var i=e.length;if(t<=e[0].xV)return e[0];if(t>=e[i-1].xV)return e[i-1];for(var s=0,n=i,o=0;s<n;){if(e[o=Math.round((s+n)/2)].xV==t)return e[o];if(t<e[o].xV){if(o>0&&t>e[o-1].xV)return this.getClosestValue(e[o-1],e[o],t);n=o}else{if(o<i-1&&t<e[o+1].xV)return this.getClosestValue(e[o],e[o+1],t);s=o+1}}return e[o]},getClosestValue:function(e,t,i){return i-e.xV>=t.xV-i?t:e},getSharedPoints:function(e,t){if(!("CartesianAxes"==e.userInteractionBase.chartAreaType&&null!=t&&t.length>0))return t;for(var i,s,n=0,o=t;n<o.length;n++){var r=o[n];if(i=this.getPointValue(e,r.series),this.isClosest(i,r,s)&&(s=r.point.xV),this.isAxisValue(r.series))return t}return t.filter((function(e){return s==e.point.xV}))},isClosest:function(e,t,i){var s=t.series.x_Axis;return e>=s.visibleRange.start-.5&&e<=s.visibleRange.end+.5&&(isNaN(i)||Math.abs(t.point.xV-e)<Math.abs(i-e))},isAxisValue:function(e){return!sf.base.isNullOrUndefined(e)&&(e.axesCount>2&&"PrimaryXAxis"!=e.x_Axis.name)},sortPointsInfo:function(e){var t=[];return e.forEach((function(e){"Series"===e.series.category&&t.push(e)})),e.forEach((function(e){"Indicator"===e.series.category&&t.push(e)})),t},findHeader:function(e,t){var i=t.tooltipBase.header;return sf.base.isNullOrUndefined(i)?"":""!==(i=this.parseTemplate(e.point,e.series,i,t)).replace(/<b>/g,"").replace(/<\/b>/g,"").trim()?i:""},getTooltipText:function(e,t){return this.parseTemplate(e.point,e.series,this.getFormat(t,e.series),t)},getIndicatorTooltipFormat:function(e,t){return"XY"===e.seriesType?e.name+" : <b>${point.y}</b>":t},parseTemplate:function(e,t,i,s){for(var n,o,r=0,a=Object.keys(e);r<a.length;r++){var l=a[r];n=new RegExp("${point."+l+"}","gm"),i.indexOf(n.source)>-1&&(i=i.replace(n.source,this.formatPointValue(e,l,"${point.x}"===n.source,"${point.h}"===n.source||"${point.o}"===n.source||"${point.c}"===n.source||"${point.l}"===n.source||"${point.y}"===n.source,t,s.userInteractionBase.isStockChart,s)))}for(var h=0,d=Object.keys(t);h<d.length;h++){l=d[h];n=new RegExp("${series."+l+"}","gm"),o=t[l],i.indexOf(n.source)>-1&&(i=i.replace(n.source,o))}return i},getTemplateLocation:function(e,t,s,n,o,r,a,l){var h=new i(t.x,t.y),d=s+10,c=n+10,p=r.x,u=r.y,f=e.x,g=e.y;return a?(((h=new i(h.x+p+o,h.y+u-n/2)).x+d+12>f+e.width||l)&&(h.x=(t.x>e.width?e.width:t.x)+p-o-(d+12)),h.x<f&&(h.x=(t.x<0?0:t.x)+p+o),h.y<=g&&(h.y=g),h.y+c>=g+e.height&&(h.y-=h.y+c-(g+e.height))):(((h=new i(h.x+p-s/2,h.y+u-n-12-o)).y<g||l)&&(h.y=(t.y<0?0:t.y)+u+o),h.y+c+12>g+e.height&&(h.y=(t.y>e.height?e.height:t.y)+u-n-12-o),h.x<f&&(h.x=f),h.x+d>f+e.width&&(h.x-=h.x+d-(f+e.width))),{x:h.x,y:h.y}},formatPointValue:function(e,t,i,s,n,o,r){var a,l,h,d=i?n.x_Axis:n.y_Axis,c=d.format?d.format:d.dateFormat,p=d.labelFormat;if("DateTime"==d.valueType&&i)a=(new sf.base.Internationalization).getDateFormat({format:c||"MM/dd/yyyy",type:this.firstToLowerCase("DateTime")})(new Date(e.xV)),a=this.getGlobalizedDate(a,r.dateValuePairs);else if("DateTimeCategory"===d.valueType&&i)a=(new sf.base.Internationalization).getDateFormat({format:c||p||"MM/dd/yyyy HH:mm:ss tt",type:this.firstToLowerCase("DateTime")})(new Date(e[t])),a=this.getGlobalizedDate(a,r.dateValuePairs);else if("Category"!==d.valueType&&i)a=(l=p&&null!==p.match("{value}"))?p.replace("{value}",this.formatAxisValue(e[t],l,p)).replace(/\,/g,""):this.formatAxisValue(e[t],l,p).replace(/\,/g,"");else if(s&&!sf.base.isNullOrUndefined(e[t])){if(l=p&&null!==p.match("{value}"),"outliers"===t)h=this.formatAxisValue(e[t][this.lierIndex-4],l,p).replace(/\,/g,"");else{var u=e[t],f=n.markerDataLabelFormat?parseInt(n.markerDataLabelFormat.substring(1)):2,g=o?Math.max(2,(u-Math.round(u)).toString().length):f;h=this.formatAxisValue(e[t],l,p,g).replace(/\,/g,"")}o&&"Indicator"===n.category&&"AccumulationDistribution"===n.name&&(h=h.replace(/\B(?=(\d{3})+(?!\d))/g,",")),h=this.getGlobalizedNumber(h,r.numberValuePairs),a=l?p.replace("{value}",h):h}else a=this.getGlobalizedNumber(e[t].toString(),r.numberValuePairs);return a},getFormat:function(e,t){var i=e.tooltipBase.tooltipModule.shared&&!t.name?"":"<br/>";if(t.tooltipFormat)return"XY"===t.seriesType&&"Indicator"===t.category?this.getIndicatorTooltipFormat(t,e,e.tooltipBase.tooltipFormat):t.tooltipFormat;if(!t.tooltipFormat&&(e.userInteractionBase.isStockChart&&"Indicator"===t.category||!e.userInteractionBase.isStockChart)&&e.tooltipBase.tooltipFormat)return"XY"===t.seriesType&&"Indicator"===t.category?this.getIndicatorTooltipFormat(t,e,e.tooltipBase.tooltipFormat):e.tooltipBase.tooltipFormat;var s="Histogram"===e.seriesTypes[t.index]?"${point.mI}-${point.mX}":"${point.x}",n=e.tooltipBase.tooltipModule.shared&&(!e.userInteractionBase.isStockChart||t.seriesType.indexOf("HighLow")>-1)?"${series.name}":s;switch(t.seriesType){case"XY":return"Indicator"===t.category&&this.getIndicatorTooltipFormat(t,e,e.tooltipBase.tooltipFormat),n+" : "+("Bubble"===e.seriesTypes[t.index]?"<b>${point.y}</b>  Size : <b>${point.sI}</b>":"<b>${point.y}</b>");case"HighLow":return n+i+"High : <b>${point.h}</b><br/>Low : <b>${point.l}</b>";case"HighLowOpenClose":return n+i+"High : <b>${point.h}</b><br/>Low : <b>${point.l}</b><br/>Open : <b>${point.o}</b><br/>Close : <b>${point.c}</b>"+(e.userInteractionBase.isStockChart&&t.volume?"<br/>Volume : <b>${point.v}</b>":"");case"BoxPlot":return n+i+(e.userInteractionBase.lierIndex>3?"Outliers : <b>${point.oL}</b>":"Maximum : <b>${point.mX}</b><br/>Q3 : <b>${point.uQ}</b><br/>Median : <b>${point.m}</b><br/>Q1 : <b>${point.lQ}</b><br/>Minimum : <b>${point.mI}</b>");default:return""}},formatAxisValue:function(e,t,i,s,n){void 0===s&&(s=2);var o=Number(e);return(new sf.base.Internationalization).getNumberFormat({format:t?"":i,useGrouping:!1,minimumFractionDigits:2,maximumFractionDigits:s>20?20:s})(o)},findShapes:function(e){if(!e.tooltipBase.tooltipModule.enableMarker)return[];for(var t=[],i=0,s=e.tooltipBase.currentPoints;i<s.length;i++){var n=s[i];t.push(n.series.shape)}return t},findMarkerHeight:function(e,t){var i=e.series;return(i.marker.vS||t.tooltipBase.tooltipModule.shared&&(!this.isRectSeries(i.type)||i.marker.vS)||"Scatter"===i.type||"Scatter"===i.type)&&"Candle"!==i.seriesType&&"Hilo"!==i.seriesType&&"HiloOpenClose"!==i.seriesType?(i.marker.mH+5)/2+2*i.marker.b.wT:0},findSharedLocation:function(e){return e.userInteractionBase.isStockChart?new i(e.userInteractionBase.axisClipRect.x+5,e.userInteractionBase.axisClipRect.y+e.tooltipBase.seriesTooltipTop+5):e.tooltipBase.currentPoints.length>1?new i(e.tooltipBase.valueX,e.tooltipBase.valueY):this.getSymbolLocation(e.tooltipBase.currentPoints[0],e)},valueToCoefficient:function(e,t){var i=(e-t.visibleRange.start)/t.visibleRange.delta;return t.isAxisInverse?1-i:i},valueToPolarCoefficient:function(e,t,i){var s,n,o=i.visibleRange;return"Category"!==t?(s=o.end-("DateTime"===t?i.dataTimeInterval:i.visibleInterval)-o.start,n=i.visibleLabelCount-1,s=0===s?1:s):(s=1===i.visibleLabelCount?1:i.visibleLabelCount-1-0,n=i.visibleLabelCount),i.isAxisInverse?(e-o.start)/s*(1-1/n):1-(e-o.start)/s*(1-1/n)},findMouseValue:function(e,t){var i=e.series.x_Axis;t.userInteractionBase.isInverted?(t.tooltipBase.valueY=(1-this.valueToCoefficient(e.point.xV,i))*i.rect.h+i.rect.y,t.tooltipBase.valueX=t.mouseX):("PolarAxes"===t.userInteractionBase.chartAreaType?t.tooltipBase.valueX=this.valueToPolarCoefficient(e.point.xV,e.series.x_Axis.valueType,i)*i.rect.w+i.rect.x:t.tooltipBase.valueX="TrendLine"===e.series.category&&t.tooltipBase.tooltipModule.shared?t.tooltipBase.valueX:this.valueToCoefficient(e.point.xV,i)*i.rect.w+i.rect.x,t.tooltipBase.valueY=t.mouseY)},getSymbolLocation:function(e,t){var s=t.userInteractionBase.isStockChart?new i(0,t.tooltipBase.seriesTooltipTop):new i(0,0);if("BoxAndWhisker"!==e.series.type){if(0==e.point.s.length)return null;s=new i(e.point.s[0].x,e.point.s[0].y)}switch(e.series.type){case"BoxAndWhisker":return this.getBoxLocation(e,t);case"Waterfall":return this.getWaterfallRegion(e,s,t);case"RangeArea":case"SplineRangeArea":case"RangeColumn":return this.getRangeArea(e,s);default:return s}},getBoxLocation:function(e,t){return t.userInteractionBase.lierIndex>3?e.point.s[t.userInteractionBase.lierIndex-4]:{x:e.point.r[0].x+e.point.r[0].w/2,y:e.point.r[0].y+e.point.r[0].h/2}},getWaterfallRegion:function(e,t){return this.inverted?t.x=Number(e.point.y)<0?t.x+e.point.r[0].w:t.x:t.y=Number(e.point.y)<0?t.y-e.point.r[0].h:t.y,t},getRangeArea:function(e,t){return e.point.r.length>0&&e.point.r[0]&&(this.inverted?t.x=e.point.r[0].x+e.point.r[0].w/2:t.y=e.point.r[0].y+e.point.r[0].h/2),t},findPalette:function(e){for(var t=[],i=0,s=e.tooltipBase.currentPoints;i<s.length;i++){var n=s[i];t.push(this.findColor(n,n.series))}return t},findColor:function(e,t){return!this.isRectSeries(t.seriesType)||"Candle"!==t.seriesType&&"Hilo"!==t.seriesType&&"HiloOpenClose"!==t.seriesType?""!=e.point.i?e.point.i:""!=t.marker.f?t.marker.f:t.interior:e.point.i},renderTooltip:function(e,t,i){var s=document.getElementById(t+"_svg"),n=e,o=i;!(s&&parseInt(s.getAttribute("opacity"),10)>0)&&!sf.base.isNullOrUndefined(o)?(o.tooltip=new sf.svgbase.Tooltip(n),o.tooltip.enableRTL=n.enableRTL,o.tooltip.appendTo("#"+t)):sf.base.isNullOrUndefined(o.tooltip)||(o.tooltip.location=new sf.svgbase.TooltipLocation(n.location.x,n.location.y),o.tooltip.content=n.content,o.tooltip.header=n.header,o.tooltip.offset=n.offset,o.tooltip.palette=n.palette,o.tooltip.shapes=n.shapes,o.tooltip.data=n.data,o.tooltip.template=n.template,o.tooltip.textStyle.color=n.textStyle.color||o.tooltip.textStyle.color,o.tooltip.textStyle.fontFamily=n.textStyle.fontFamily||o.tooltip.textStyle.fontFamily,o.tooltip.textStyle.fontStyle=n.textStyle.fontStyle||o.tooltip.textStyle.fontStyle,o.tooltip.textStyle.fontWeight=n.textStyle.fontWeight||o.tooltip.textStyle.fontWeight,o.tooltip.textStyle.opacity=n.textStyle.opacity||o.tooltip.textStyle.opacity,o.tooltip.textStyle.size=n.textStyle.size||o.tooltip.textStyle.size,o.tooltip.isNegative=n.isNegative,o.tooltip.clipBounds=new sf.svgbase.TooltipLocation(n.clipBounds.x,n.clipBounds.y),o.tooltip.arrowPadding=n.arrowPadding,o.tooltip.dataBind())},removeTooltip:function(e,t){var i=this,s=this.getElement(t.element.id+"_tooltip");this.stopAnimation(t.tooltipBase.toolTipInterval),s&&null==t.tooltipBase.tooltipModule.template&&t.tooltipBase.previousPoints.length>0?t.tooltipBase.toolTipInterval=+setTimeout((function(){t.tooltipBase.tooltipModule&&i.fadeOut(t.dataId)}),e):s&&null!=t.tooltipBase.tooltipModule.template&&t.tooltipBase.previousPoints.length>0&&(t.tooltipBase.toolTipInterval=+setTimeout((function(){null!=t.tooltipBase.tooltipModule.template&&(t.dotnetref.invokeMethodAsync("RemoveTemplateTooltip"),t.tooltipBase.valueX=0,t.tooltipBase.valueY=0,t.tooltipBase.currentPoints=[],i.removeHighlight(t),i.removeMarker(t),t.tooltipBase.previousPoints=[])}),e))},stopAnimation:function(e){this.stopTimer(e)},stopTimer:function(e){window.clearInterval(e)},removeHighlight:function(e){for(var t=0,i=e.tooltipBase.previousPoints;t<i.length;t++){var s=i[t],n="Polar"!=s.series.type?s.series.type:s.series.drawType;this.isRectSeries(n)&&this.highlightPoint(e,s.series,s.point.iX,!1)}},highlightPoint:function(e,t,i,s){var n=this.getElement(e.element.id+"_Series_"+t.index+"_Point_"+i+("BoxPlot"==t.seriesType?"_BoxPath":""));sf.base.isNullOrUndefined(n)||(""===e.highlightColor||sf.base.isNullOrUndefined(e.highlightColor)?n.setAttribute("opacity",(s?t.opacity/1.25:t.opacity).toString()):n.setAttribute("fill",s&&"transparent"!=e.highlightColor?e.highlightColor:t.interior))},highlightPoints:function(e){for(var t=0,i=e.tooltipBase.currentPoints;t<i.length;t++){var s=i[t],n="Polar"!=s.series.type?s.series.type:s.series.drawType;this.isRectSeries(n)&&"Series"==s.series.category&&this.highlightPoint(e,s.series,s.point.iX,!0)}},updatePreviousPoint:function(e,t){t.length>0&&(e.tooltipBase.currentPoints=e.tooltipBase.currentPoints.concat(t)),e.tooltipBase.previousPoints=[],e.tooltipBase.previousPoints=e.tooltipBase.previousPoints.concat(e.tooltipBase.currentPoints)},fadeOut:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||!sf.base.isNullOrUndefined(t)&&sf.base.isNullOrUndefined(t.tooltip)||(this.removeTooltipCommentElement(t),t.tooltipBase.valueX=0,t.tooltipBase.valueY=0,t.tooltipBase.currentPoints=[],this.removeHighlight(t),this.removeMarker(t),t.tooltipBase.previousPoints=[],t.tooltip.fadeOut())},removeTooltipCommentElement:function(e){var t=this.getElement(e.tooltip.element.id);if(t&&!e.isRemoveCommentElement&&t.childNodes.length>1){for(var i=t.childNodes,s=[],n=0;n<i.length;n++)(i[n].nodeName.match("#comment")||i[n].nodeName.match("#text"))&&s.push(i[n]);for(var o=0,r=s;o<r.length;o++){var a=r[o];sf.base.remove(a),e.isRemoveCommentElement=!0}}},getParentElementBoundsById:function(e){var t=document.getElementById(e);if(t){var i=document.getElementById(e+"_svg");i&&(i.style.display="none");var s=document.getElementById(e+"_tooltip_data");s&&(s.style.display="none"),t.style.width="100%",t.style.height="100%";var n=t.getBoundingClientRect(),o=n.width||t.clientWidth||t.offsetWidth,r=n.height||t.clientHeight||t.offsetHeight;return i&&(i.style.display=""),s&&(s.style.display="block"),{width:o,height:r,left:n.left,top:n.top,right:n.right,bottom:n.bottom}}return{width:0,height:0,left:0,top:0,right:0,bottom:0}},getElementBoundsById:function(e,t){void 0===t&&(t=!0),t&&(this.id=e);var i=document.getElementById(e);if(i){var s=i.getBoundingClientRect();return{width:i.clientWidth||i.offsetWidth,height:i.clientHeight||i.offsetHeight,left:s.left,top:s.top,right:s.right,bottom:s.bottom}}return{width:0,height:0,left:0,top:0,right:0,bottom:0}},getRefreshElementBoundsById:function(e){var t=document.getElementById(e);if(t){for(var i=document.getElementsByClassName("e-chart"),s=i.length,n=0;n<s;n++){if((r=i[n]).id.indexOf("_stockChart_")<0)r.querySelector("[id*=_svg]").style.display="none"}t.style.width="100%",t.style.height="100%";var o=t.getBoundingClientRect();for(n=0;n<s;n++){var r;if((r=i[n]).id.indexOf("_stockChart_")<0)r.querySelector("[id*=_svg]").style.display=""}return{width:o.width||t.clientWidth||t.offsetWidth,height:o.height||t.clientHeight||t.offsetHeight,left:o.left,top:o.top,right:o.right,bottom:o.bottom}}return{width:0,height:0,left:0,top:0,right:0,bottom:0}},getBrowserDeviceInfo:function(){return{browserName:sf.base.Browser.info.name,isPointer:sf.base.Browser.isPointer,isDevice:sf.base.Browser.isDevice,isTouch:sf.base.Browser.isTouch,isIos:sf.base.Browser.isIos||sf.base.Browser.isIos7}},setZoomingCipPath:function(e,t,i){var s=document.getElementById(e),n=document.getElementById(t);s&&s.setAttribute("clip-path",i),n&&s.setAttribute("clip-path",i)},setZoomingElementAttributes:function(e,t,i,s,n,o,r,a){"Indicator"===t&&i&&i.parentElement&&i.parentElement.setAttribute("transform",e),i&&i.setAttribute("transform",e),s&&s.setAttribute("transform",e),n&&n.setAttribute("transform",e),o&&o.setAttribute("visibility","hidden"),r&&r.setAttribute("visibility","hidden"),a&&(a.style.visibility="hidden")},measureBreakText:function(e,t,i,s,n,o,r){var a={color:i,size:t,fontFamily:s,fontWeight:n,fontStyle:o,opacity:parseInt(r,10)};return sf.svgbase.measureText(e,a)},getAllCharacters:function(){for(var e=[],t=33;t<591;t++)e.push(String.fromCharCode(t));return e},measureText:function(e,t,i,s){var n=document.getElementById("sfchartmeasuretext");return null===n&&(n=sf.base.createElement("text",{id:"sfchartmeasuretext"}),document.body.appendChild(n))," "===e&&(e="&nbsp;"),n.innerHTML=e,n.style.position="fixed",n.style.fontSize="100px",n.style.fontWeight=t,n.style.fontStyle=i,n.style.fontFamily=s,n.style.visibility="hidden",n.style.top="-100",n.style.left="0",n.style.whiteSpace="nowrap",n.style.lineHeight="normal",{Width:n.clientWidth,Height:n.clientHeight}},getCharCollectionSize:function(e){for(var t=[],i=this.getAllCharacters(),s=i.length,n=e.length,o=0;o<n;o++)for(var r=e[o].split("_"),a=r[0],l=r[1],h=r[2],d=0;d<s;d++)t.push(this.measureText(i[d],a,l,h).Width+"");return JSON.stringify(t)},getCharSizeByFontKeys:function(e){for(var t,i={},s=e.length,n=[],o=0;o<s;o++)n=e[o].split("_"),t=this.measureText(n[0],n[1],n[2],n[3]),i[e[o]]={X:t.Width,Y:t.Height};return JSON.stringify(i)},getElementRect:function(e){var t=document.getElementById(e),i=t.getBoundingClientRect();return sf.base.remove(t),{Left:i.left,Right:i.right,Top:i.top,Bottom:i.bottom,Width:i.width,Height:i.height}},getElement:function(e){return document.getElementById(e)},drawTrackBall:function(e,t,i,s,n,o){var r=this.getElement(e);if(r){for(var a=document.createElementNS("http://www.w3.org/2000/svg",i),l=Object.keys(t),h="",d=0;d<l.length;d++)h="strokeWidth"===l[d]?"stroke-width":"strokeDashArray"===l[d]?"stroke-dashArray":"direction"===l[d]?"d":l[d],a.setAttribute(h,t[l[d]]);a.setAttribute("class",s),a.setAttribute("clip-path",n),a.setAttribute("transform",o),r.appendChild(a)}},removeHighLightedMarker:function(e){for(var t=document.getElementsByClassName(e),i=0,s=t.length;i<s;i++)sf.base.remove(t[0])},setAttribute:function(e,t,i){var s=this.getElement(e);s&&s.setAttribute(t,i)},createTooltip:function(e,t,i,s,n){var o=document.getElementById(e),r="top:"+((window.scrollY||0)+i).toString()+"px;left:"+s.toString()+"px;color:black !important; background:#FFFFFF !important; position:absolute;border:1px solid #707070;font-size:"+n+";border-radius:2px; z-index:1";o?(o.setAttribute("innerHTML","&nbsp;"+t+"&nbsp;"),o.setAttribute("styles",r)):(o=sf.base.createElement("div",{id:e,innerHTML:"&nbsp;"+t+"&nbsp;",styles:r}),document.body.appendChild(o))},removeElement:function(e){if(!e)return null;var t=this.getElement(e);t&&sf.base.remove(t)},applySelection:function(e,t){var i,s=document.getElementById(e);if(s&&s.childNodes)for(var n=1,o=(i=s.childNodes).length;n<o;n++)i[n]&&"rect"!==i[n].tagName&&i[n].setAttribute&&i[n].setAttribute("fill",t)},getAndSetTextContent:function(e,t,i){var s=document.getElementById(e);if(s){if(t)return s.textContent;s.textContent=i}return null},doProgressiveAnimation:function(e,t,i,s,n){var o,r=this.getElement(t),a=this.getElement(e),l=new sf.base.Animation({}),h=a.getTotalLength();a.setAttribute("visibility","hidden"),l.animate(a,{duration:i+s,delay:s,progress:function(e){r.setAttribute("visibility","visible"),e.timeStamp>=e.delay&&(a.setAttribute("visibility","visible"),o=Math.abs(Math.round((e.timeStamp-e.delay)*h/e.duration)),a.setAttribute("stroke-dasharray",o+","+h))},end:function(){a.setAttribute("stroke-dasharray",n)}})},linear:function(e,t,i,s){return-i*Math.cos(e/s*(Math.PI/2))+i+t},doLinearAnimation:function(e,t,i,s){var n,o=this.getElement(e),r=new sf.base.Animation({}),a=this.linear,l=+o.getAttribute("height"),h=+o.getAttribute("width"),d=+o.getAttribute("x"),c=s?+o.getAttribute("height")+ +o.getAttribute("y"):+o.getAttribute("y");r.animate(o,{duration:t,delay:i,progress:function(e){e.timeStamp>=e.delay&&(o.setAttribute("visibility","visible"),s?(n=a(e.timeStamp-e.delay,0,l,e.duration),o.setAttribute("transform","translate("+d+" "+c+") scale(1,"+n/l+") translate("+-d+" "+-c+")")):(n=a(e.timeStamp-e.delay,0,h,e.duration),o.setAttribute("transform","translate("+d+" "+c+") scale("+n/h+", 1) translate("+-d+" "+-c+")")))},end:function(){o.setAttribute("transform","translate(0,0)")}})},filterCommentElement:function(e){var t=this.getElement(e);if(!t)return null;for(var i=t.childNodes,s=[],n=0;n<i.length;n++)i[n].nodeName.match("#comment")||s.push(i[n]);return s},doInitialAnimation:function(e){for(var t=0;t<e.length;t++){switch(e[t].type){case"Rect":for(var i=this.getElement(e[t].clipPathId),s=this.filterCommentElement(e[t].elementId),n=0;n<e[t].pointIndex.length;n++)this.doRectAnimation(s[e[t].pointIndex[n]],i,e[t].duration,e[t].delay,e[t].pointX[n],e[t].pointY[n],e[t].pointWidth[n],e[t].pointHeight[n],e[t].isInvertedAxis);break;case"Progressive":this.doProgressiveAnimation(e[t].elementId,e[t].clipPathId,e[t].duration,e[t].delay,e[t].strokeDashArray);break;case"Linear":this.doLinearAnimation(e[t].elementId,e[t].duration,e[t].delay,e[t].isInvertedAxis);break;case"Marker":var o=this.getElement(e[t].clipPathId),r=this.filterCommentElement(e[t].elementId);for(n=0;n<e[t].pointIndex.length;n++)this.doMarkerAnimate(r[e[t].pointIndex[n]],o,e[t].duration,e[t].delay,e[t].pointX[n],e[t].pointY[n]);break;case"PolarRadar":var a=this.getElement(e[t].clipPathId),l=this.filterCommentElement(e[t].elementId);for(n=0;n<l.length;n++)this.doPolarRadarAnimation(l[n],a,e[t].duration,e[t].delay,e[t].pointX[0],e[t].pointY[0])}if(!sf.base.isNullOrUndefined(e[t].markerInfo))for(o=this.getElement(e[t].markerInfo.markerClipPathId),r=this.filterCommentElement(e[t].markerInfo.markerElementId),n=0;n<e[t].markerInfo.pointIndex.length;n++)this.doMarkerAnimate(r[e[t].markerInfo.pointIndex[n]],o,200,e[t].duration+e[t].delay,e[t].markerInfo.pointX[n],e[t].markerInfo.pointY[n]),e[t].markerInfo.lowPointIndex.length>0&&this.doMarkerAnimate(r[e[t].markerInfo.lowPointIndex[n]],o,200,e[t].duration+e[t].delay,e[t].markerInfo.lowPointX[n],e[t].markerInfo.lowPointY[n]);if(!sf.base.isNullOrUndefined(e[t].dataLabelInfo))if(0===e[t].dataLabelInfo.templateId.length)this.doDataLabelAnimation(e[t].dataLabelInfo.shapeGroupId,e[t].dataLabelInfo.textGroupId,"",e[t].clipPathId,200,e[t].duration+e[t].delay);else for(n=0;n<e[t].dataLabelInfo.templateId.length;n++)this.doDataLabelAnimation("","",e[t].dataLabelInfo.templateId[n],"",200,e[t].duration+e[t].delay);sf.base.isNullOrUndefined(e[t].errorBarInfo)||this.doErrorBarAnimation(e[t].errorBarInfo.errorBarElementId,e[t].errorBarInfo.errorBarClipPathId,e[t].duration+e[t].delay,e[t].isInvertedAxis)}},doDynamicAnimation:function(e,t,i){for(var s=0;s<e.length;s++)sf.base.isNullOrUndefined(e[s].previousDir)||""===e[s].previousDir||sf.base.isNullOrUndefined(e[s].currentDir)||""===e[s].currentDir||this.pathAnimation(e[s].id,e[s].currentDir,!0,e[s].previousDir,300);for(var n=0;n<t.length;n++)this.animateRectElement(t[n].id,0,300,t[n].currentRect,t[n].previousRect);for(var o=0;o<i.length;o++)this.animateRedrawElement(i[o].id,300,i[o].preLocationX,i[o].preLocationY,i[o].curLocationX,i[o].curLocationY,i[o].x,i[o].y)},doRectAnimation:function(e,t,i,s,n,o,r,a,l){var h,d=this.linear;sf.base.isNullOrUndefined(e)||(e.setAttribute("visibility","hidden"),new sf.base.Animation({}).animate(e,{duration:i,delay:s,progress:function(i){t.setAttribute("visibility","visible"),i.timeStamp>=i.delay&&(e.setAttribute("visibility","visible"),l?(r=r||1,h=d(i.timeStamp-i.delay,0,r,i.duration),e.setAttribute("transform","translate("+n+" "+o+") scale("+h/r+", 1) translate("+-n+" "+-o+")")):(a=a||1,h=d(i.timeStamp-i.delay,0,a,i.duration),e.setAttribute("transform","translate("+n+" "+o+") scale(1,"+h/a+") translate("+-n+" "+-o+")")))},end:function(){e.setAttribute("transform","translate(0,0)")}}))},doMarkerAnimate:function(e,t,i,s,n,o){var r=0;e&&(e.setAttribute("visibility","hidden"),new sf.base.Animation({}).animate(e,{duration:i,delay:s,progress:function(i){t.setAttribute("visibility","visible"),i.timeStamp>i.delay&&(e.setAttribute("visibility","visible"),r=(i.timeStamp-i.delay)/i.duration,e.setAttribute("transform","translate("+n+" "+o+") scale("+r+") translate("+-n+" "+-o+")"))},end:function(){e.setAttribute("visibility","")}}))},doPolarRadarAnimation:function(e,t,i,s,n,o){var r=0;e.setAttribute("visibility","hidden"),new sf.base.Animation({}).animate(e,{duration:i,delay:s,progress:function(i){t.setAttribute("visibility","visible"),i.timeStamp>i.delay&&(e.setAttribute("visibility","visible"),r=(i.timeStamp-i.delay)/i.duration,e.setAttribute("transform","translate("+n+" "+o+") scale("+r+") translate("+-n+" "+-o+")"))},end:function(){e.setAttribute("visibility","visible"),e.removeAttribute("transform")}})},templateAnimate:function(e,t,i,s,n,o){new sf.base.Animation({}).animate(e,{duration:i,delay:t,name:s,progress:function(e){o&&o.setAttribute("visibility","visible"),e.element.style.visibility="visible"},end:function(e){n?sf.base.remove(e.element):e.element.style.visibility="visible"}})},doDataLabelAnimation:function(e,t,i,s,n,o){for(var r,a,l,h=this.filterCommentElement(e),d=this.filterCommentElement(t),c=this.getElement(s),p=this.getElement(i),u=p?1:d.length,f=0;f<u;f++)p?(p.style.visibility="hidden",this.templateAnimate(p,o,n,"ZoomIn")):(r=+(l=d[f]).getAttribute("x")+ +l.getAttribute("width")/2,a=+l.getAttribute("y")+ +l.getAttribute("height")/2,this.doMarkerAnimate(d[f],c,n,o,r,a),h[f]&&(r=+(l=h[f]).getAttribute("x")+ +l.getAttribute("width")/2,a=+l.getAttribute("y")+ +l.getAttribute("height")/2,this.doMarkerAnimate(h[f],c,n,o,r,a)))},pathAnimation:function(e,t,i,s,n){var o=this,r=this.getElement(e);if(!i||null==r)return null;var a=300;n&&(a=n);var l,h,d,c=s||r.getAttribute("d"),p=c.split(/(?=[LMCZAQ])/),u=t.split(/(?=[LMCZAQ])/),f=[],g=[];r.setAttribute("d",c),new sf.base.Animation({}).animate(sf.base.createElement("div"),{duration:a,progress:function(e){l="",p.map((function(t,i){if(f=t.split(" "),g=u[i]?u[i].split(" "):f,"Z"===f[0]?l+="Z ":l+=f[0]+" "+o.linear(e.timeStamp,+f[1],+g[1]-+f[1],e.duration)+" "+o.linear(e.timeStamp,+f[2],+g[2]-+f[2],e.duration)+" ","C"===f[0]||"Q"===f[0])for(h=3,d="Q"===f[0]?4:6;h<d;)l+=o.linear(e.timeStamp,+f[h],+g[h]-+f[h],e.duration)+" "+o.linear(e.timeStamp,+f[++h],+g[h]-+f[h],e.duration)+" ",++h;"A"===f[0]&&(l+="0 0 1 "+o.linear(e.timeStamp,+f[6],+g[6]-+f[6],e.duration)+" "+o.linear(e.timeStamp,+f[7],+g[7]-+f[7],e.duration)+" ")})),r.setAttribute("d",l)},end:function(){r.setAttribute("d",t)}})},getPreviousDirection:function(e){var t=this.getElement(e);return t?t.getAttribute("d"):null},getPreviousLocation:function(e,t){var i=this.getElement(e);return{X:i?+i.getAttribute(t+"x"):0,Y:i?+i.getAttribute(t+"y"):0}},animateRectElement:function(e,t,i,s,n){var o=this,r=function(t){e.setAttribute("x",t.x+""),e.setAttribute("y",t.y+""),e.setAttribute("width",t.width+""),e.setAttribute("height",t.height+"")};new sf.base.Animation({}).animate(sf.base.createElement("div"),{duration:i,delay:t,progress:function(e){r(new sf.svgbase.Rect(o.linear(e.timeStamp,n.x,s.x-n.x,e.duration),o.linear(e.timeStamp,n.y,s.y-n.y,e.duration),o.linear(e.timeStamp,n.width,s.width-n.width,e.duration),o.linear(e.timeStamp,n.height,s.height-n.height,e.duration)))},end:function(){r(s)}})},animateRedrawElement:function(e,t,i,s,n,o,r,a){var l=this;void 0===r&&(r="x"),void 0===a&&(a="y");var h=this.getElement(e);if(!h)return null;var d="DIV"===h.tagName,c=function(e,t){d?(h.style[r]=e+"px",h.style[a]=t+"px"):(h.setAttribute(r,e+""),h.setAttribute(a,t+""))};c(i,s),new sf.base.Animation({}).animate(sf.base.createElement("div"),{duration:t,progress:function(e){c(l.linear(e.timeStamp,i,n-i,e.duration),l.linear(e.timeStamp,s,o-s,e.duration))},end:function(){c(n,o)}})},appendChildElement:function(e,t,i,s,n,o,r,a,l,h,d,c){void 0===s&&(s=!1),void 0===n&&(n="x"),void 0===o&&(o="y"),void 0===l&&(l=!1),void 0===h&&(h=!1),void 0===d&&(d=null);var p=e.querySelector("#"+t.id)||this.getElement(t.id),u=t,f=c||300;if(i&&s&&p)if(r=r||("DIV"===p.tagName?new sf.svgbase.TooltipLocation(+p.style[n].split("px")[0],+p.style[o].split("px")[0]):new sf.svgbase.TooltipLocation(+p.getAttribute(n),+p.getAttribute(o))),""!==a&&null!==a)this.pathAnimation(t,t.getAttribute("d"),i,a,f);else if(h&&d)this.animateRectElement(u,0,f,new sf.svgbase.Rect(+p.getAttribute("x"),+p.getAttribute("y"),+p.getAttribute("width"),+p.getAttribute("height")),d);else{var g="DIV"===u.tagName?new sf.svgbase.TooltipLocation(+u.style[n].split("px")[0],+u.style[o].split("px")[0]):new sf.svgbase.TooltipLocation(+u.getAttribute(n),+u.getAttribute(o));this.animateRedrawElement(u,f,r,g,n,o)}else i&&s&&!p&&l&&this.templateAnimate(u,0,600,"FadeIn")},processAppendChild:function(e,t,i,s,n,o,r,a,l,h,d,c,p,u,f,g){void 0===h&&(h=!1),void 0===d&&(d="x"),void 0===c&&(c="y"),void 0===u&&(u=!1),void 0===f&&(f=!1);var m=this.getElement(e),v=this.getElement(t),b=new sf.svgbase.TooltipLocation(i,s),y=new sf.svgbase.Rect(n,o,r,a);this.appendChildElement(m,v,l,h,d,c,b,p,u,f,y,g)},createStyleElement:function(e,t){document.body.appendChild(sf.base.createElement("style",{id:e,innerHTML:t}))},isLassoId:function(e,t){var i=document.elementFromPoint(e,t);return i?i.id:""},doErrorBarAnimation:function(e,t,i,s){var n=this.filterCommentElement(e),o=this.getElement(t);if(!n)return null;for(var r=1;r<n.length;)n[r].style.visibility="hidden",this.templateAnimate(n[r],i,350,s?"SlideLeftIn":"SlideBottomIn",!1,o),r++},getTemplateSize:function(e){var t=this.getElement(e);return t?{width:t.offsetWidth,height:t.offsetHeight}:null},resizeBound:{},resize:{},chartResize:function(e,t){var i=this;return this.tooltipModule&&(l.removeTooltip(100,this),l.removeCrosshair(this,100)),this.tooltipModule=null,this.crosshair=null,this.markerExploded=!1,this.resize&&clearTimeout(this.resize),this.resize=setTimeout((function(){for(var t,s,n,o=e.length,r={},a=0;a<o;a++)t=e[a].dotnetref,(s=e[a].id).indexOf("_stockChart_")<0&&document.getElementById(s+"_svg")&&((n=document.getElementById(s+"_svg")).style.display="none");for(a=0;a<o;a++)t=e[a].dotnetref,(s=e[a].id).indexOf("_stockChart_")<0&&document.getElementById(s)&&(n=document.getElementById(s),r[s]={Dotnetref:t,Width:n.clientWidth||n.offsetWidth,Height:n.clientHeight||n.offsetHeight});for(var l in r)t=r[l].Dotnetref,(n=document.getElementById(l+"_svg")).style.display="",t.invokeMethodAsync("OnChartResize",JSON.stringify({Width:r[l].Width,Height:r[l].Height}));clearTimeout(i.resize)}),500),!1},getDatalabelTemplateSize:function(e){for(var t,i=[],s=e.length,n=0;n<s;n++)t=this.getElementBoundsById(e[n],!1),i.push({X:t.width,Y:t.height});return JSON.stringify(i)},setSvgDimensions:function(e,t,i){e.setAttribute("width",t),e.setAttribute("height",i)},findDOMElement:function(e){return document.getElementById(e)},calculateSelectedElements:function(e,t){if(!sf.base.isNullOrUndefined(e.target)){var i=e.target,s=window.sfBlazor.getCompInstance(t);if(i=this.findDOMElement(this.findDOMElementFromDataLabel(i.id,s)),("None"!==s.selectionMode||"None"!==s.highlightMode&&!s.enableHighlight)&&(sf.base.isNullOrUndefined(i)||-1!==i.id.indexOf(s.element.id+"_"))&&("mousemove"!==e.type&&"pointermove"!==e.type||(null===i&&i.id.indexOf("Trackball")>-1&&(i=this.findDOMElement(i.id.split("_Trackball")[0])),!i.hasAttribute("class")||!(i.getAttribute("class").indexOf("highlight")>-1||i.getAttribute("class").indexOf("selection")>-1)))&&(this.isAlreadySelected(e,s),!sf.base.isNullOrUndefined(i)&&i.id.indexOf("_Series_")>-1)){var n=void 0;if(i.id.indexOf("_Trackball_1")>-1)n=this.findDOMElement(i.id.split("_Trackball_")[0]+"_Symbol"),n=sf.base.isNullOrUndefined(n)?this.findDOMElement(i.id.split("_Trackball_")[0]):n;else if(i.id.indexOf("_Trackball_0")>-1||i.id.indexOf("_ErrorBarGroup_")>-1||i.id.indexOf("_ErrorBarCap_")>-1)return null;this.performSelection(this.indexFinder(i.id),s,n||i)}}},generateStyle:function(e,t){var i,s=sf.base.isNullOrUndefined(this.findDOMElement(e))?null:this.findDOMElement(e).getAttribute("data-point");if(sf.base.isNullOrUndefined(this.findDOMElement(e))||(e.indexOf("SeriesGroup")>-1||e.indexOf("SymbolGroup")>-1)&&(s=(i=document.getElementById(e).querySelectorAll("path,ellipse")).length>0?i[0].getAttribute("data-point"):null),!s)return"undefined";var n=s.split(",");return n[3]?(t.styleId.indexOf("selection")>1&&"None"!==t.selectionMode&&(t.unSelected=n[7]||t.unSelected),t.styleId.indexOf("highlight")>0&&("None"!==t.highlightMode||t.enableHighlight)&&(t.unSelected=n[5]||t.unSelected),n[6]||t.styleId+"_series"+n[4]):"undefined"},findDOMElementFromDataLabel:function(e,t){if(e.indexOf("Text")>-1&&e.indexOf("Series")>-1){var i=e.split("_Text_")[0];return this.isRectSeries(t.seriesTypes[e.split("_Series_")[1].split("_")[0]])||"Bubble"===t.seriesTypes[0]||"Scatter"===t.seriesTypes[0]?i:i.slice(0,i.length)+"_Symbol "}return e},indexFinder:function(e){var i=["NaN","NaN"];return e.indexOf("_Point_")>-1?(i=e.split("_Series_")[1].split("_Point_"))[1].indexOf("Text")>-1&&(i[1]=i[1].split("_Text_")[0]):e.indexOf("_shape_")>-1&&!e.indexOf("_legend_")?(i=e.split("_shape_"))[0]=i[1]:e.indexOf("_text_")>-1&&!e.indexOf("_legend_")?(i=e.split("_text_"),e.indexOf("datalabel")>-1?i[0]=i[0].split("_Series_")[1]:i[0]=i[1]):e.indexOf("Series")>-1&&!(e.indexOf("points")>-1)&&(i[0]=e.split("_Series_")[1].split("_")[0]),new t(parseInt(i[0],10),parseInt(i[1],10))},addOrRemoveIndex:function(e,t,i,s){for(var n=0;n<e.length;n++)this.toEquals(e[n],t,i.isSeriesMode,i)&&(e.splice(n,1),n--);s&&e.push(t)},toEquals:function(e,t,i,s){return(e.series===t.series||"Cluster"===s.currentMode&&!i)&&(i||e.point===t.point)},removeSvgClass:function(e,t){var i=sf.base.isNullOrUndefined(e)||sf.base.isNullOrUndefined(e.getAttribute("class"))?"":e.getAttribute("class");i.indexOf(t)>-1&&e.setAttribute("class",i.replace(t,""))},getSelectionClass:function(e,t){return this.generateStyle(e,t)},removeStyles:function(e,t){for(var i=0,s=e;i<s.length;i++){var n=s[i];if(null!==n){var o=n,r=n.id,a=this.findDOMElement(o.id).getAttribute("data-point"),l=a?a.split(","):[];if(o.id.indexOf("_chart_legend_shape_")>-1&&(r=t.element.id+"SeriesGroup"+t.currentSeriesIndex),this.removeSvgClass(n,this.getSelectionClass(r,t)),"None"===t.highlightPattern&&""!==t.highlightColor&&!sf.base.isNullOrUndefined(t.highlightColor))if(n.id.indexOf("Group")>0)for(var h=0;h<n.children.length;h++)n.children[h].setAttribute("fill",l[2]);else n.setAttribute("fill",l[2])}}},findTrackballElements:function(e,t,i){var s,n;t=t.trim();for(var o=0;o<e.length;o++)if(!sf.base.isNullOrUndefined(e[o])&&(s=sf.base.isNullOrUndefined(e[o].parentNode)?[]:[].slice.call(e[0].parentNode.querySelectorAll("."+t))).length>0){n=[];for(var r=0;r<s.length;r++)s[r].id.indexOf("Trackball")>-1&&n.push(s[r]);this.removeStyles(n,i)}},blurEffect:function(e,t,i){void 0===i&&(i=!1);for(var s=this.checkVisibility(t.highlightDataIndexes,t)||this.checkVisibility(t.selectedDataIndexes,t),n=document.getElementById(t.element.id+"SeriesCollection").querySelectorAll("[id*='SeriesGroup']"),o=0;o<n.length;o++){var r=parseInt(n[o].id.split("SeriesGroup")[1]);this.checkSelectionElements(this.findDOMElement(t.element.id+"SeriesGroup"+r),this.generateStyle(t.element.id+"SeriesGroup"+r,t),s,i,r,t),sf.base.isNullOrUndefined(this.findDOMElement(t.element.id+"SymbolGroup"+r))||this.checkSelectionElements(this.findDOMElement(t.element.id+"SymbolGroup"+r),this.generateStyle(t.element.id+"SymbolGroup"+r,t),s,i,r,t)}},checkVisibility:function(e,t){if(!e)return!1;for(var i=!1,s=[],n=0,o=e;n<o.length;n++){var r=o[n];-1===s.indexOf(r.series)&&s.push(r.series)}for(var a=0,l=s;a<l.length;a++){r=l[a];if(document.getElementById(t.element.id+"SeriesGroup"+r)){i=!0;break}}return i},findElements:function(e,t,i,s,n){return void 0===s&&(s=""),e.isSeriesMode?this.getSeriesElements(i.series.toString(),e):"Cluster"===e.currentMode?this.getClusterElements(e,i):this.findDOMElementByIndex(e,i,s,n)},removeMultiSelectElements:function(e,t,i){this.getSeriesElements(i.series.toString(),e);for(var s,n=0;n<t.length;n++)s=e.seriesTypes[t[n].series],(e.isSeriesMode&&!this.toEquals(t[n],i,e.isSeriesMode,e)||"Cluster"===e.currentMode&&!this.toEquals(t[n],i,!1,e)||!e.isSeriesMode&&this.toEquals(t[n],i,!0,e)&&!this.toEquals(t[n],i,!1,e))&&(this.removeStyles(this.findElements(e,s,t[n],"",!1),e),e.element.id+"SymbolGroup"+t[n].series&&this.removeStyles(this.findElements(e,s,t[n],"",!0),e),t.splice(n,1),n--)},checkSelectionElements:function(e,t,i,s,n,o,r){var a,l,h,d=[];t=t.trim(),e.id.indexOf("Series")>-1&&(this.pointIdRequired(o.seriesTypes[n])?(d=o.isSeriesMode?[e]:e.querySelectorAll("[id*='_Series']"),"Histogram"===o.seriesTypes[n]&&d.push(this.findDOMElement(o.element.id+"_Series_"+n+"_NDLine")),"Waterfall"===o.seriesTypes[n]&&d.push(this.findDOMElement(o.element.id+"_Series_"+n+"_Connector")),"BoxAndWhisker"===o.seriesTypes[n]&&(d=this.findDOMElement(o.element.id+"SymbolGroup"+n).querySelectorAll("path,ellipse"))):d=o.isSeriesMode?[e]:e.querySelectorAll("[id*='_Series']")),("None"!==o.selectionMode||"None"!==o.highlightMode||o.enableHighlight)&&(d=e.querySelectorAll("[id*='_Series']"));for(var c=e,p=this.isRectSeries(o.seriesTypes[n])?null:this.findDOMElement(o.element.id+"_Series_"+n),u=0;u<d.length;u++)a=d[u].getAttribute("class")||"",l=sf.base.isNullOrUndefined(p)?"":p.getAttribute("class"),("None"!==o.selectionMode||"None"!==o.highlightMode||o.enableHighlight)&&(t=!sf.base.isNullOrUndefined(a)&&(a.indexOf("selection")>0||a.indexOf("highlight")>0)?a:t,t=!sf.base.isNullOrUndefined(a)&&(l.indexOf("selection")>0||l.indexOf("highlight")>0)?l:t),sf.base.isNullOrUndefined(a)||sf.base.isNullOrUndefined(l)||-1!==a.indexOf(t)||-1!==l.indexOf(t)||!i?(c=d[u],this.removeSvgClass(d[u],o.unSelected),this.removeSvgClass(p,o.unSelected)):this.addSvgClass(d[u],o.unSelected),d[u].id.indexOf("Trackball")>0&&c.classList[0]===t&&(this.removeSvgClass(d[u],o.unSelected),this.removeSvgClass(p,o.unSelected),this.addSvgClass(d[u],t));if(e.id.indexOf("Symbol")>-1&&e.querySelectorAll("."+t)[0]&&e.querySelectorAll("."+t)[0].getAttribute("class")===t){var f=this.findDOMElement(e.id+"_Series_"+e.id[e.id.length-1]);(f&&f.hasAttribute("class")?f.getAttribute("class"):"").indexOf(o.unSelected)>-1&&this.removeSvgClass(f,o.unSelected)}var g,m=this.findDOMElement(e.id).getAttribute("data-point");if((e.id.indexOf("SeriesGroup")>-1||e.id.indexOf("SymbolGroup")>-1)&&(m=(g=document.getElementById(e.id).querySelectorAll("path,ellipse")).length>0?g[0].getAttribute("data-point"):null),m){var v=m.split(",");(h=this.findDOMElement(o.id+"_chart_legend_shape_"+n))&&(h.hasAttribute("class")&&(this.removeSvgClass(h,h.getAttribute("class")),sf.base.isNullOrUndefined(o.highlightColor&&""!==o.highlightColor)||(h.setAttribute("stroke",v[2]),"None"===o.highlightPattern&&h.setAttribute("fill",v[2]))),a=c.getAttribute("class")||"",l=c.parentNode.getAttribute("class")||"",-1===a.indexOf(t)&&-1===l.indexOf(t)&&i?(this.addSvgClass(h,o.unSelected),this.removeSvgClass(h,t),""===o.highlightColor||sf.base.isNullOrUndefined(o.highlightColor)||(h.setAttribute("stroke",v[2]),"None"===o.highlightPattern&&h.setAttribute("fill",v[2]))):(this.removeSvgClass(h,o.unSelected),sf.base.isNullOrUndefined(o.highlightColor)||""===o.highlightColor||(h.setAttribute("stroke",v[2]),"None"===o.highlightPattern&&h.setAttribute("fill",v[2])),"e-chart-focused"==a.trim()&&(a=""),""===a&&""===l||"EJ2-Trackball"===a.trim()?this.removeSvgClass(h,t):(this.addSvgClass(h,t),t.indexOf("highlight")>0&&""!==o.highlightColor&&!sf.base.isNullOrUndefined(o.highlightColor)&&(h.setAttribute("stroke",o.highlightColor),o.styleId.indexOf("highlight")>0&&"None"===o.highlightPattern&&h.setAttribute("fill",o.highlightColor)))),s&&l.indexOf(t)>-1&&this.addSvgClass(h,t))}},addSvgClass:function(e,t){var i=e.getAttribute("class")||"";-1===(i+=""!==i?" ":"").indexOf(t)&&e.setAttribute("class",i+t)},isRectSeries:function(e){return"Column"===e||"StackingColumn"===e||"StackingColumn100"===e||"Bar"===e||"StackingBar"===e||"StackingBar100"===e||"RangeColumn"===e||"Histogram"===e||"BoxAndWhisker"===e||"Waterfall"===e||"Pareto"===e||"RangeArea"===e||"SplineRangeArea"===e||"Hilo"===e||"HiloOpenClose"===e||"Candle"===e},pointIdRequired:function(e){return!(!this.isRectSeries(e)&&"Bubble"!==e&&"Scatter"!==e)},getSeriesElements:function(e,t){var i,s=[],n=!sf.base.isNullOrUndefined(document.getElementById(t.element.id+"SymbolGroup"+e))&&"Scatter"!==t.seriesTypes[e]&&"Bubble"!==t.seriesTypes[e]&&!this.isRectSeries(t.seriesTypes[e]);if(n?(i=this.findDOMElement(t.element.id+"SymbolGroup"+e).querySelectorAll("#"+t.element.id+"SymbolGroup"+e+" path"),s=this.addSeriesElements(s,i),sf.base.isNullOrUndefined(this.findDOMElement(t.element.id+"SymbolGroup"+e).querySelectorAll("#"+t.element.id+"SymbolGroup"+e+" ellipse"))||(i=this.findDOMElement(t.element.id+"SymbolGroup"+e).querySelectorAll("#"+t.element.id+"SymbolGroup"+e+" ellipse"),s=this.addSeriesElements(s,i))):sf.base.isNullOrUndefined(this.findDOMElement(t.element.id+"SeriesGroup"+e))||(i=this.findDOMElement(t.element.id+"SeriesGroup"+e).querySelectorAll("#"+t.element.id+"SeriesGroup"+e+" path"),s=this.addSeriesElements(s,i),sf.base.isNullOrUndefined(this.findDOMElement(t.element.id+"SeriesGroup"+e).querySelectorAll("#"+t.element.id+"SeriesGroup"+e+" ellipse"))||(i=this.findDOMElement(t.element.id+"SeriesGroup"+e).querySelectorAll("#"+t.element.id+"SeriesGroup"+e+" ellipse"),s=this.addSeriesElements(s,i))),(t.seriesTypes[e].indexOf("Area")>-1||t.seriesTypes[e].toLowerCase().indexOf("line")>-1)&&(n?(i=this.findDOMElement(t.element.id+"SeriesGroup"+e).querySelectorAll("#"+t.element.id+"SeriesGroup"+e+" path"),s.push.apply(s,this.addSeriesElements(s,i))):sf.base.isNullOrUndefined(this.findDOMElement(t.element.id+"SeriesGroup"+e))||(i=this.findDOMElement(t.element.id+"SeriesGroup"+e).querySelectorAll("#"+t.element.id+"SeriesGroup"+e+" path"),s=this.addSeriesElements(s,i))),"Histogram"===t.seriesTypes[e]){var o=this.findDOMElement(t.element.id+"_Series_"+e+"_NDLine");s.push(o)}return"Polar"!==t.seriesTypes[e]||"Scatter"!==t.drawType[e]||sf.base.isNullOrUndefined(this.findDOMElement(t.element.id+"SeriesGroup"+e))||(i=this.findDOMElement(t.element.id+"SeriesGroup"+e).querySelectorAll("#"+t.element.id+"SeriesGroup"+e+" path"),s=this.addSeriesElements(s,i),sf.base.isNullOrUndefined(this.findDOMElement(t.element.id+"SeriesGroup"+e).querySelectorAll("#"+t.element.id+"SeriesGroup"+e+" ellipse"))||(i=this.findDOMElement(t.element.id+"SeriesGroup"+e).querySelectorAll("#"+t.element.id+"SeriesGroup"+e+" ellipse"),s=this.addSeriesElements(s,i))),s},addSeriesElements:function(e,t){for(var i=0;i<t.length;i++){var s=document.getElementById(t[i].id);null!=s&&e.push(s),e=e.filter((function(e,t,i){return t===i.indexOf(e)}))}return e},findDOMElementByIndex:function(e,t,i,s){void 0===i&&(i="");var n=e.element.id+"_Series_"+t.series+"_Point_"+t.point,o=e.seriesTypes[t.series];return n=!this.isRectSeries(o)&&"Scatter"!==o&&"Bubble"!==o&&s?n+"_Symbol"+i:n,"BoxAndWhisker"===o&&(n+="_BoxPath"),[this.findDOMElement(n),"RangeArea"!==o&&"SplineRangeArea"!==o||!s?null:this.findDOMElement(n+"1")]},applyStyles:function(e,t){for(var i=0,s=e;i<s.length;i++){var n=s[i];if(n&&(this.removeSvgClass(n,t.unSelected),this.addSvgClass(n,this.getSelectionClass(n.id,t)),t.styleId.indexOf("highlight")>0&&""!==t.highlightColor&&!sf.base.isNullOrUndefined(t.highlightColor)&&"None"===t.highlightPattern))if(n.id.indexOf("Group")>0)for(var o=0;o<n.children.length;o++)n.children[o].setAttribute("fill",t.highlightColor);else n.setAttribute("fill",t.highlightColor)}},getClusterElements:function(e,i){for(var s,n,o,r,a=[],l=document.getElementById(e.element.id+"SeriesCollection").querySelectorAll("[id*='SeriesGroup']"),h=(document.getElementById(e.element.id+"SeriesCollection").querySelectorAll("[id*='SymbolGroup']"),0);h<l.length;h++){o=l[h].querySelectorAll("#"+l[h].id+" path"),r=Array.prototype.slice.call(o);for(var d=0;d<r.length;d++){var c=r[d].getAttribute("data-point").split(",");i=new t(+c[4],i.point),this.isRectSeries(c[3])&&a.push(this.findDOMElementByIndex(e,i)[0]),a.push(this.findDOMElementByIndex(e,i,"","True"===c[9])[0]),s=this.generateStyle(r[d].id,e),n=document.querySelectorAll("."+s),this.findTrackballElements(n,s);var p="True"===c[9]&&this.isRectSeries(c[3])?2:1;!e.allowMultiSelection&&n.length>0&&n[0].id!==a[a.length-p].id&&this.removeSelection(e,i.series,n,s,!0)}}return a},clusterSelection:function(e,i){this.selection(e,i,this.getClusterElements(e,new t(i.series,i.point)))},removeSelection:function(e,i,s,n,o){var r,a=document.getElementById(e.element.id+"SeriesGroup"+i).querySelectorAll("#"+e.element.id+"SeriesGroup"+i+" path");Array.prototype.slice.call(a);if(s.length>0){for(var l=[],h=0;h<s.length;h++)l.push(s[h]);this.removeStyles(l,e),e.isSeriesMode=!0,this.addOrRemoveIndex(e.selectedDataIndexes,new t(i,NaN),e);for(var d=0;d<s.length;d++)if(r=s[d].id,n=this.generateStyle(r,e),document.querySelectorAll("."+n).length>0){for(var c=0,p=l;c<p.length;c++){var u=p[c];this.checkSelectionElements(u,n,!0,!0,i,e)}o=!1;break}o&&(e.isSeriesMode="Series"===e.selectionMode,this.blurEffect(r,e))}},isAlreadySelected:function(e,t){var i=e.target;if("click"===e.type?(t.currentMode=t.selectionMode,t.styleId=t.element.id+"_ej2_chart_selection"):"mousemove"!==e.type&&"pointermove"!==e.type||(t.currentMode=t.highlightMode,t.highlightDataIndexes=[],t.styleId=t.element.id+"_ej2_chart_highlight"),("None"!==t.highlightMode||t.enableHighlight)&&"None"===t.selectionMode&&"click"===e.type)return!1;if(("None"!==t.highlightMode||t.enableHighlight)&&0!==t.previousSelectedEle.length&&null!==t.previousSelectedEle[0]){t.previousSelectedEle.filter((function(e){return null!==e}));var s=i.parentNode.id,n=void 0;i.parentNode&&(n=s.indexOf("Point")>0||s.indexOf("Symbol")>0);for(var o=0;o<t.previousSelectedEle.length;o++)if(t.previousSelectedEle[o].hasAttribute("class"))if(t.previousSelectedEle[o].getAttribute("class").indexOf("highlight")>-1&&(n||"click"===e.type)){if(t.previousSelectedEle[o].removeAttribute("class"),""!==t.highlightColor&&!sf.base.isNullOrUndefined(t.highlightColor)&&"None"===t.highlightPattern)if(t.previousSelectedEle[o].id.indexOf("Group")>0)for(var r=0;r<t.previousSelectedEle[o].children.length;r++){var a=t.previousSelectedEle[o].children[r];a.setAttribute("fill",a.getAttribute("data-point").split(",")[2])}else t.previousSelectedEle[o].setAttribute("fill",t.previousSelectedEle[o].getAttribute("data-point").split(",")[2]);this.addOrRemoveIndex(t.highlightDataIndexes,this.indexFinder(t.previousSelectedEle[o].id),t)}else!n&&t.previousSelectedEle[o].getAttribute("class").indexOf("highlight")>-1&&this.performSelection(this.indexFinder(t.previousSelectedEle[o].id),t,t.previousSelectedEle[o])}return!0},performSelection:function(e,t,i){if(t.isSeriesMode="Series"===t.currentMode,"BoxAndWhisker"===t.seriesTypes[e.series]&&i&&i.id===t.element.id+"_Series_"+e.series+"_Point_"+e.point+"_BoxPath"&&(i=i.parentNode),"Area"===t.seriesTypes[e.series]&&("Point"===t.currentMode||"Cluster"===t.currentMode)&&i&&i.id===t.element.id+"_Series_"+e.series){var s=this.generateStyle(i.id,t),n=document.querySelectorAll("."+s);sf.base.isNullOrUndefined(n)||(this.findTrackballElements(n,s),this.blurEffect(i.id,t,"True"===i.getAttribute("data-point").split(",")[8]))}switch(t.currentMode){case"Series":this.selection(t,e,this.getSeriesElements(e.series.toString(),t)),this.selectionComplete(t,e,t.selectionMode),this.blurEffect(i.id,t);break;case"Point":if(!isNaN(e.point)&&i){var o=[];o.push(i),this.selection(t,e,o),this.selectionComplete(t,e,t.selectionMode),this.blurEffect(i.id,t)}break;case"Cluster":isNaN(e.point)||(this.clusterSelection(t,e),this.selectionComplete(t,e,t.selectionMode),this.blurEffect(i.id,t))}},selection:function(e,t,i){if(i=i.filter((function(e){return null!==e})),"Lasso"!==e.currentMode&&(e.allowMultiSelection||-1!==e.currentMode.indexOf("Drag")||-1!==e.styleId.indexOf("highlight")||"None"===e.selectionMode||this.removeMultiSelectElements(e,e.selectedDataIndexes,t,i)),!sf.base.isNullOrUndefined(i[0])){this.isRectSeries(e.seriesTypes[t.series])&&"Histogram"!==e.seriesTypes[t.series]&&i[0].id&&(document.getElementById(i[0].id+"_Symbol")?i.push(this.findDOMElement(i[0].id+"_Symbol")):-1!==i[0].id.indexOf("SeriesGroup")&&document.getElementById(i[0].id.replace("SeriesGroup","SymbolGroup"))&&i.push(this.findDOMElement(i[0].id.replace("SeriesGroup","SymbolGroup"))));var s=void 0,n=i[0]&&(i[0].getAttribute("class")||""),o=i[0].parentNode&&(i[0].parentNode.getAttribute("class")||"");""!==n&&"Cluster"!==e.currentMode&&this.findTrackballElements(i,n),i[0]&&n.indexOf(this.getSelectionClass(i[0].id,e))>-1?this.removeStyles(i,e):i[0].parentNode&&o.indexOf(this.getSelectionClass(i[0].id,e))>-1?this.removeStyles([i[0].parentNode],e):(e.previousSelectedEle="None"!==e.highlightMode||e.enableHighlight?i:[],this.applyStyles(i,e),s=!0),e.styleId.indexOf("highlight")>0&&("None"!==e.highlightMode||e.enableHighlight)?this.addOrRemoveIndex(e.highlightDataIndexes,t,e,s):this.addOrRemoveIndex(e.selectedDataIndexes,t,e,s)}},resetPreviousHighlightIndex:function(e){e.previousHighlightedIndex=-1},isTargetChanged:function(e,t){var i=!1,s=!1;return-1==t.previousHighlightedIndex&&(i=!0),t.previousHighlightedIndex==e&&(s=!0),t.previousHighlightedIndex=e,!s||i},legendSelection:function(e,i){for(var s,n,o,r=e.target.id,a=window.sfBlazor.getCompInstance(i),h=[this.id+"_chart_legend_text_",this.id+"_chart_legend_shape_marker_",this.id+"_chart_legend_shape_",this.id+"_chart_legend_g_"],d="None",c=0;c<h.length;c++)if(!r.indexOf(h[c])){n=parseInt(r.split(h[c])[1]);break}if(a.currentSeriesIndex=n,o=r.indexOf("text")<=0?l.findDOMElement(r):null,"mousemove"===e.type){if(r.indexOf("text")&&(o=l.findDOMElement(r.replace("text","shape"))),o.hasAttribute("class")&&!a.enableHighlight&&a.styleId.indexOf("highlight")>0&&("None"!==a.highlightMode||a.enableHighlight)&&a.styleId.indexOf("selection")>1&&"None"!==a.selectionMode)return;"None"==(d=a.highlightMode)&&a.enableHighlight&&(d="Series")}if(this.isAlreadySelected(e,a)&&!sf.base.isNullOrUndefined(this.findDOMElement(a.element.id+"SeriesGroup"+n)))if(this.seriesStyle=this.generateStyle(a.element.id+"SeriesGroup"+n,a),s=document.querySelectorAll("."+this.seriesStyle),this.isSeriesMode="Series"==d,this.isBlurEffectNeeded=!0,s.length>0)this.removeSelection(a,n,s,this.seriesStyle,this.isBlurEffectNeeded);else{for(var p=document.getElementById(a.element.id+"SeriesCollection").querySelectorAll("[id*='SeriesGroup']"),u=0;u<p.length;u++)a.allowMultiSelection||u==n||(this.seriesStyle=this.generateStyle(p[u].id,a),s=document.querySelectorAll("."+this.seriesStyle),this.removeSelection(a,n,s,this.seriesStyle,this.isBlurEffectNeeded));var f=this.getSeriesElements(n.toString(),a);for(c=0;c<f.length;c++)this.checkSelectionElements(f[c],this.seriesStyle,!1,!0,n,a,f);a.isSeriesMode=!0;var g=new t(n,0);this.selection(a,g,f),this.isSeriesMode="Series"==this.selectionMode,this.blurEffect(a.element.id,a,!0)}},selectionComplete:function(e,t,i){var s,n,o,r,a,l,h,d,c,p,u=[],f=this.getSeriesElements(t.series.toString(),e);if("Cluster"===i){for(var g=0;g<f.length;g++)if(c=this.findDOMElement(f[g].id).getAttribute("data-point").split(",")[3],p=this.findDOMElement(f[g].id).getAttribute("data-point").split(",")[11],o=+this.findDOMElement(f[g].id).getAttribute("data-point").split(",")[10],"visible"===this.findDOMElement(f[g].id).getAttribute("visibility"))for(var m=0;m<e.selectedDataIndexes.length;m++)r=e.allowMultiSelection?e.selectedDataIndexes[m].point:t.point,a=+this.findDOMElement(f[g].id).getAttribute("data-point").split(",")[4],s=+this.findDOMElement(f[g].id).getAttribute("data-point").split(",")[0],n=+this.findDOMElement(f[g].id).getAttribute("data-point").split(",")[1],isNaN(r)||(h=n,d=s),"Category"===e.primaryXAxis?d=s.toLocaleString():"DateTime"===e.primaryXAxis&&(d=new Date(s)),"Indicator"!==p&&u.push({x:d,y:h,seriesIndex:a,pointIndex:r}),"RangeArea"!==c&&"SplineRangeArea"!==c||u.push({x:d,y:o,seriesIndex:a,pointIndex:r})}else if("Series"===i)if(e.allowMultiSelection)for(g=0;g<e.selectedDataIndexes.length;g++)a=e.selectedDataIndexes[g].series,u.push({seriesIndex:a});else a=e.selectedDataIndexes.length>0?e.selectedDataIndexes[0].series:0,u.push({seriesIndex:a});else if("Point"===i)for(g=0;g<e.selectedDataIndexes.length;g++)r=e.selectedDataIndexes[g].point,a=e.selectedDataIndexes[g].series,l=e.element.id+"_Series_"+a+"_Point_"+r,s=+this.findDOMElement(l).getAttribute("data-point").split(",")[0],n=+this.findDOMElement(l).getAttribute("data-point").split(",")[1],o=+this.findDOMElement(l).getAttribute("data-point").split(",")[10],isNaN(r)||(d=s,h=n,"Category"===e.primaryXAxis?d=s.toLocaleString():"DateTime"===e.primaryXAxis&&(d=new Date(s)),u.push({x:d,y:h,seriesIndex:a,pointIndex:r}));e.dotnetref.invokeMethodAsync("OnSelectionChange",u)}};return l}()},"./modules/sf-circulargauge.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.CircularGauge=function(){"use strict";var e=function(){function e(e,t,i,s){window.sfBlazor=window.sfBlazor,this.id=e,this.element=t,this.dotNetRef=s,this.options=i,this.dataId=e,window.sfBlazor.setCompInstance(this)}return e.prototype.render=function(){this.wireEvents()},e.prototype.wireEvents=function(){
/*! Bind the Event handler */
sf.base.EventHandler.add(this.element,sf.base.Browser.touchStartEvent,this.gaugeOnMouseDown,this),sf.base.EventHandler.add(this.element,sf.base.Browser.touchMoveEvent,this.gaugeOnMouseMove,this),sf.base.EventHandler.add(this.element,sf.base.Browser.touchEndEvent,this.gaugeOnMouseEnd,this),sf.base.EventHandler.add(this.element,sf.base.Browser.touchCancelEvent,this.gaugeOnMouseEnd,this),sf.base.EventHandler.add(this.element,"click",this.gaugeOnMouseClick,this),window.addEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.gaugeOnResize.bind(this))},e.prototype.destroy=function(){this.dotNetRef=null},e.prototype.gaugeOnMouseClick=function(e){var t=["_Text_","_Shape_"],i=e.target.id;if(-1!==i.indexOf("Legend")&&this.options.legendToggleVisibility)for(var s=0;s<t.length;s++){var n=t[s];if(-1!==i.indexOf(n)){var o=parseInt(i.split(this.element.id+"_Legend_Axis_")[1].split(n)[0]),r=parseInt(i.split(this.element.id+"_Legend_Axis_")[1].split(n)[1]);sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerLegendClick",o,r)}}},e.prototype.gaugeOnResize=function(){var e,t;if(!sf.base.isNullOrUndefined(this.element)){var i=document.getElementById(this.element.id+"_svg");if(!sf.base.isNullOrUndefined(i)){i.style.display="none";var s=this.element.getBoundingClientRect();e=s.width,t=s.height,i.style.removeProperty("display")}}this.previousHeight===t&&this.previousWidth===e||(this.previousHeight=t,this.previousWidth=e,sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerResizeEvent",e,t))},e.prototype.gaugeOnMouseDown=function(e){var t=document.getElementById(this.element.id+"_legend_pagenumber"),i=e.target.id,s=0,n=0;if("touchstart"===e.type?(s=e.touches[0].clientX,n=e.touches[0].clientY):(s=e.pageX,n=e.pageY),sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerMouseDownEvent",s,n),!sf.base.isNullOrUndefined(t)){var o=parseInt(t.textContent.split("/")[0],10);i.indexOf(this.element.id+"_legend_pageup")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)?this.dotNetRef.invokeMethodAsync("TriggerLegendPageClick",o-2,o-1):i.indexOf(this.element.id+"_legend_pagedown")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)&&this.dotNetRef.invokeMethodAsync("TriggerLegendPageClick",o,o+1)}if((this.options.enablePointerDrag||this.options.enableRangeDrag)&&(-1!==event.target.id.indexOf("Pointer")||-1!==event.target.id.indexOf("_Range_"))){e.preventDefault(),this.isMouseDown=!0;var r=i.replace(this.element.id,"").split("_Axis_")[1];this.dragAxisIndex=+r[0],this.dragElementIndex=+r[r.length-1],sf.base.isNullOrUndefined(this.dotNetRef)||(-1!==event.target.id.indexOf("Pointer")?(this.isPointerDrag=!0,this.dotNetRef.invokeMethodAsync("TriggerDragStart",this.dragAxisIndex,this.dragElementIndex,0,"Pointer")):(this.isRangeDrag=!0,this.dotNetRef.invokeMethodAsync("TriggerDragStart",this.dragAxisIndex,0,this.dragElementIndex,"Range")))}},e.prototype.gaugeOnMouseMove=function(e){var t,i,s,n,o,r,a,l,h=e.target.id;if("touchmove"===e.type?(a=e.touches[0].clientX,l=e.touches[0].clientY):(a=e.clientX,l=e.clientY),-1!==h.indexOf("Legend")){var d=document.getElementById(h);this.options.legendToggleVisibility?d.setAttribute("cursor","pointer"):d.setAttribute("cursor","auto")}var c=document.getElementById(this.element.id+"_svg"),p=c.getBoundingClientRect(),u=this.element.getBoundingClientRect(),f=l-u.top-Math.max(p.top-u.top,0),g=a-u.left-Math.max(p.left-u.left,0),m=document.getElementById(this.element.id+"_Tooltip"),v=document.getElementById(this.element.id+"_Tooltip_Group"),b=(e.target.parentElement||e.target.parentNode).id;if(this.options.enableTooltip)if(u={left:Math.abs(u.left-p.left),top:Math.abs(u.top-p.top),width:p.width,height:p.height,x:Math.abs(u.left-p.left),y:Math.abs(u.top-p.top),bottom:0,right:0},-1===h.indexOf("Annotation")&&-1===b.indexOf("Annotation")||sf.base.isNullOrUndefined(this.options.tooltipType)||-1===this.options.tooltipType.indexOf("Annotation"))null!==m&&(m.style.visibility="hidden");else{var y=void 0;if(-1!==b.indexOf("ContentTemplate")){var M=b.split("_ContentTemplate")[0];y=M[M.length-1]}var C=document.getElementById(b);i=+(t=C.id.replace(this.element.id,"").split("_Axis_")[1])[0],s=+(-1===b.indexOf("ContentTemplate")?t[t.length-1]:y),s=isNaN(s)?0:s,n=!1,o=!1,r=!0;var w=void 0;if(null!==v&&(m.style.visibility="visible",null!==m.lastElementChild)){var S=this.element.id+"_Tooltip_Annotation_"+s+"_Content";w=document.getElementById(S),0!==document.querySelectorAll("#"+S).length&&(w.style.visibility="visible")}var N=C.getBoundingClientRect().width;sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerTooltipEvent",a+N/2,l,i,s,n,o,r,u)}if(this.performDragOperation(h,i,s,g,f,event),this.options.enableTooltip){if(-1!==h.indexOf("_Range_")&&!sf.base.isNullOrUndefined(this.options.tooltipType)&&-1!==this.options.tooltipType.indexOf("Range")&&!this.isMouseDown){i=+(t=h.replace(this.element.id,"").split("_Axis_")[1])[0],s=+t[t.length-1],n=!0,o=!1,r=!1;var x=0,O=0;if(this.options.showRangeTooltipAtMousePosition)x=(E=this.getMousePosition(a,l,c)).x,O=E.y;else x=a,O=l;null!==m&&(m.style.visibility="visible"),sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerTooltipEvent",x,O,i,s,n,o,r,u)}if(-1!==h.indexOf("Pointer")||-1!==h.indexOf("_Range_")||-1!==h.indexOf("Annotation")||-1!==b.indexOf("Annotation")&&-1===h.indexOf("Annotation")){if(-1!==h.indexOf("Pointer")&&(sf.base.isNullOrUndefined(this.options.tooltipType)||-1!==this.options.tooltipType.indexOf("Pointer"))){i=+(t=h.replace(this.element.id,"").split("_Axis_")[1])[0],s=+t[t.length-1],n=!1,o=!0,r=!1;var E;x=0,O=0;if(this.options.showPointerTooltipAtMousePosition)x=(E=this.getMousePosition(a,l,c)).x,O=E.y;else x=a,O=l;null!==m&&(m.style.visibility="visible"),sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerTooltipEvent",x,O,i,s,n,o,r,u)}}else(null!==m||v&&v.childElementCount>0)&&!this.isPointerDrag&&(m.style.visibility="hidden")}},e.prototype.performDragOperation=function(e,t,i,s,n,o){if(this.options.enablePointerDrag&&-1!==e.indexOf("Pointer")||this.options.enableRangeDrag&&-1!==e.indexOf("_Range_")||this.isMouseDown)if(this.isMouseDown){o.preventDefault();var r=new Date;if(null!==t&&null!==i&&this.isMouseDown){var a="touchmove"===o.type;this.isRangeDrag&&this.options.enableRangeDrag&&!sf.base.isNullOrUndefined(this.dotNetRef)?(document.getElementById(this.element.id+"_svg").setAttribute("cursor","grabbing"),this.dotNetRef.invokeMethodAsync("TriggerRangeDragEvent",s,n,this.dragAxisIndex,this.dragElementIndex,a)):this.isPointerDrag&&this.options.enablePointerDrag&&(sf.base.isNullOrUndefined(this.dragMilliseconds)||Math.abs(r.getMilliseconds()-this.dragMilliseconds)>100)&&!sf.base.isNullOrUndefined(this.dotNetRef)&&(this.dragMilliseconds=r.getMilliseconds(),document.getElementById(this.element.id+"_svg").setAttribute("cursor","grabbing"),this.dotNetRef.invokeMethodAsync("TriggerDragEvent",s,n,this.dragAxisIndex,this.dragElementIndex,a))}}else document.getElementById(this.element.id+"_svg").setAttribute("cursor","pointer");else document.getElementById(this.element.id+"_svg").setAttribute("cursor","auto")},e.prototype.gaugeOnMouseEnd=function(e){var t,i=0,s=0;if(this.dragMilliseconds=null,"touchend"===e.type){var n=e;i=n.changedTouches[0].pageX,s=n.changedTouches[0].pageY,t=!0}else i=e.clientX,s=e.clientY;sf.base.isNullOrUndefined(this.dotNetRef)||(t||"mouseup"==e.type?this.dotNetRef.invokeMethodAsync("TriggerMouseUpEvent",i,s):this.dotNetRef.invokeMethodAsync("TriggerMouseLeaveEvent",i,s),this.isPointerDrag?this.dotNetRef.invokeMethodAsync("TriggerDragEnd",this.dragAxisIndex,this.dragElementIndex,0,"Pointer"):this.isRangeDrag&&this.dotNetRef.invokeMethodAsync("TriggerDragEnd",this.dragAxisIndex,0,this.dragElementIndex,"Range")),this.isMouseDown=!1,this.isPointerDrag=!1,this.isRangeDrag=!1},e.prototype.animationRangeProcess=function(e,t,i,s){var n,o=this;new sf.base.Animation({}).animate(e,{duration:t.duration,progress:function(i){n=o.animationRangeProgress(n,t,i,e)},end:function(n){if(!t.isClockWise){var r=t.endAngle;t.endAngle=t.minimumAngle,t.minimumAngle=r}if(0!=t.roundRadius&&t.end!=t.minimumAxis){var a=t.roundRadius,l=.25*t.roundRadius;t.end<=l&&(a=t.end<6?8:a,l=.25*(a/=2));var h=((t.radius-t.pointerWidth/2)*(t.minimumAngle*Math.PI/180)-a/l)/(t.radius-t.pointerWidth/2)*180/Math.PI,d=((t.radius-t.pointerWidth/2)*(t.endAngle*Math.PI/180)+a/l)/(t.radius-t.pointerWidth/2)*180/Math.PI,c=t.radius*(t.minimumAngle*Math.PI/180)/t.radius*180/Math.PI,p=t.radius*(t.endAngle*Math.PI/180)/t.radius*180/Math.PI;p=t.end>0?p:p-a/3,c=t.end>0?c:c+a/3,e.setAttribute("d",o.getRoundedPathArc({x:t.midPointX,y:t.midPointY},Math.floor(c),p,Math.floor(h),Math.floor(d),t.radius,t.pointerWidth,t.pointerWidth,Math.abs(t.roundRadius)))}else e.setAttribute("d",o.getCompletePathArc({x:t.midPointX,y:t.midPointY},t.minimumAngle,t.endAngle,t.radius,t.innerRadius,t.isClockWise));o.options.isAnimationEvent&&t.start!=t.end&&!sf.base.isNullOrUndefined(o.dotNetRef)&&o.dotNetRef.invokeMethodAsync("AnimatePointer",i,s,t.end)}})},e.prototype.animationProcess=function(e,t,i,s){var n,o=this;new sf.base.Animation({}).animate(e,{duration:t.duration,progress:function(i){n=o.animationProgress(n,t,i,e)},end:function(n){e.setAttribute("transform","rotate("+t.endAngle+","+t.midPointX+","+t.midPointY+")"),o.options.isAnimationEvent&&t.start!=t.end&&!sf.base.isNullOrUndefined(o.dotNetRef)&&o.dotNetRef.invokeMethodAsync("AnimatePointer",i,s,t.end)}})},e.prototype.animationProgress=function(e,t,i,s){return e=t.start<t.end||Math.round(t.startAngle)===Math.round(t.endAngle)?t.isClockWise||t.start===t.end?t.endAngle-t.startAngle:t.endAngle-t.startAngle-360:t.isClockWise?t.endAngle-t.startAngle-360:t.endAngle-t.startAngle,s.style.animation="None",s.setAttribute("transform","rotate("+(-e*Math.cos(i.timeStamp/i.duration*(Math.PI/2))+e+t.startAngle)+","+t.midPointX+","+t.midPointY+")"),e},e.prototype.animationRangeProgress=function(e,t,i,s){var n,o,r;return e=t.start<t.end||Math.round(t.startAngle)===Math.round(t.endAngle)?t.isClockWise||t.start===t.end?t.endAngle-t.startAngle:t.endAngle-t.startAngle-360:t.isClockWise?t.endAngle-t.startAngle-360:t.endAngle-t.startAngle,s.style.animation="None",t.roundRadius<=0&&(n=-e*Math.cos(i.timeStamp/t.duration*(Math.PI/2))+e+t.startAngle),t.isClockWise?t.roundRadius>0&&t.end!=t.minimumAxis?(o=-e*Math.cos(i.timeStamp/t.duration*(Math.PI/2))+e+Math.floor(t.startAngle),r=-e*Math.cos(i.timeStamp/t.duration*(Math.PI/2))+e+Math.floor(t.startAngle+Math.abs(t.roundRadius)/2),s.setAttribute("d",this.getRoundedPathArc({x:t.midPointX,y:t.midPointY},Math.floor(t.minimumAngle),o+1e-4,Math.floor(t.oldStart),Math.floor(r+1e-4),t.radius,t.pointerWidth,t.pointerWidth,Math.abs(t.roundRadius)))):s.setAttribute("d",this.getCompletePathArc({x:t.midPointX,y:t.midPointY},t.minimumAngle,n+1e-4,t.radius,t.innerRadius,!1)):t.roundRadius>0&&t.end!=t.minimumAxis?(o=-e*Math.cos(i.timeStamp/t.duration*(Math.PI/2))+e+Math.floor(t.startAngle),r=-e*Math.cos(i.timeStamp/t.duration*(Math.PI/2))+e+Math.floor(t.startAngle-Math.abs(t.roundRadius)/2),s.setAttribute("d",this.getRoundedPathArc({x:t.midPointX,y:t.midPointY},o,t.minimumAngle+1e-4,r,Math.floor(t.oldStart+Math.abs(t.roundRadius)),t.radius,t.pointerWidth,t.pointerWidth,Math.abs(t.roundRadius)))):s.setAttribute("d",this.getCompletePathArc({x:t.midPointX,y:t.midPointY},n,t.minimumAngle+1e-4,t.radius,t.innerRadius,!1)),e},e.prototype.pointerAnimation=function(e){for(var t=document.getElementById(e.id),i=t.id.replace(this.element.id,"").split("_Axis_")[1],s=+i[0],n=+i[i.length-1],o=sf.base.Browser.isIE?t.childNodes.length:t.childElementCount,r=0;r<o;r++){var a=sf.base.Browser.isIE?t.childNodes[r]:t.children[r];"#comment"!==a.nodeName&&("RangeBar"===e.pointerType?this.animationRangeProcess(a,e,s,n):e.isMarkerShapeText?this.performTextAnimation(a,e,s,n):this.animationProcess(a,e,s,n))}},e.prototype.performTextAnimation=function(e,t,i,s){var n,o,r,a,l=this,h=Math.abs(t.start-t.end);new sf.base.Animation({}).animate(e,{duration:t.duration,progress:function(i){a=i.timeStamp/t.duration,r=t.end>t.start?t.start+a*h:t.start-a*h,n=l.getAngleFromValue(r,t.maximumAxis,t.minimumAxis,t.axisStartAngle,t.axisEndAngle,t.isClockWise),o=l.getLocationFromAngle(n,t.radius,{x:t.midPointX,y:t.midPointY}),e.setAttribute("transform","rotate("+(n+90)+", "+o.x+", "+o.y+")"),e.setAttribute("x",String(o.x)),e.setAttribute("y",String(o.y)),e.style.visibility="visible"},end:function(r){n=l.getAngleFromValue(t.pointerValue,t.maximumAxis,t.minimumAxis,t.axisStartAngle,t.axisEndAngle,t.isClockWise),o=l.getLocationFromAngle(n,t.radius,{x:t.midPointX,y:t.midPointY}),e.setAttribute("transform","rotate("+(n+90)+","+o.x+","+o.y+")"),e.setAttribute("x",String(o.x)),e.setAttribute("y",String(o.y)),l.options.isAnimationEvent&&t.start!=t.end&&!sf.base.isNullOrUndefined(l.dotNetRef)&&l.dotNetRef.invokeMethodAsync("AnimatePointer",i,s,t.end)}})},e.prototype.getAngleFromValue=function(e,t,i,s,n,o){var r;return n-=this.isCompleteAngle(s,n)?1e-4:0,s-=90,n-=90,r=o?(e-i)*(this.getDegreeValue(s,n)/(t-i))+s:(r=n-(e-i)*(this.getDegreeValue(s,n)/(t-i)))<0?360+r:r,r=Math.round(r)>=360?r-360:Math.round(r)<0?360+r:r},e.prototype.isCompleteAngle=function(e,t){var i=t-e;return i=i<=0?i+360:i,0!=Math.floor(i/360)},e.prototype.getDegreeValue=function(e,t){var i=t-e;return i<0?i+360:i},e.prototype.getLocationFromAngle=function(e,t,i){var s=e*Math.PI/180;return{x:Math.cos(s)*t+i.x,y:Math.sin(s)*t+i.y}},e.prototype.getCompletePath=function(e,t,i,s,n,o,r){return"M "+e.x+" "+e.y+" A "+i+" "+i+" 0 "+r+" 1 "+t.x+" "+t.y+" L "+n.x+" "+n.y+" A "+o+" "+o+" 0 "+r+" 0 "+s.x+" "+s.y+" Z"},e.prototype.getRoundedPath=function(e,t,i,s,n,o,r,a,l,h,d,c){return"M "+e.x+" "+e.y+" A "+l+" "+l+" 0 "+c+" 1 "+t.x+" "+t.y+" C "+i.x+" "+i.y+" "+s.x+" "+s.y+" "+a.x+" "+a.y+" A "+d+" "+h+" 0 "+c+" 0 "+r.x+" "+r.y+" C "+o.x+" "+o.y+" "+n.x+" "+n.y+" "+e.x+" "+e.y+" Z"},e.prototype.getCompletePathArc=function(e,t,i,s,n,o){i-=this.isCompleteAngle(t,i)&&!o&&t!=i?1e-4:0;var r=this.getDegreeValue(t,i),a=r<180&&r>0||r>360&&r<540||t>630?0:1;return this.getCompletePath(this.getLocationFromAngle(t,s,e),this.getLocationFromAngle(i,s,e),s,this.getLocationFromAngle(t,n,e),this.getLocationFromAngle(i,n,e),n,a)},e.prototype.getRoundedPathArc=function(e,t,i,s,n,o,r,a,l){i-=this.isCompleteAngle(t,i)?1e-4:0;var h=this.getDegreeValue(t,i),d=o-(r=o<r?o:r),c=o-(a=o<a?o:a),p=o-(r+a)/2,u=180;l&&(n+=o>=r?l/o:0,s-=o>=r?l/o:0,t+=o>=r?l/2:0,i-=o>=r?l/2:0,u+=l);var f=h<=u&&h>0||h>2*(u-l)&&h<3*(u-l)||t>3*(u-l)+(u-l)/2?0:1;return this.getRoundedPath(this.getLocationFromAngle(t,o,e),this.getLocationFromAngle(i,o,e),this.getLocationFromAngle(n,o,e),this.getLocationFromAngle(n,c,e),this.getLocationFromAngle(s,o,e),this.getLocationFromAngle(s,d,e),this.getLocationFromAngle(t,d,e),this.getLocationFromAngle(i,c,e),o,p,p,f)},e.prototype.getMousePosition=function(e,t,i){var s=i.getBoundingClientRect(),n=i.ownerDocument.defaultView.pageXOffset,o=i.ownerDocument.defaultView.pageYOffset,r=i.ownerDocument.documentElement.clientTop,a=i.ownerDocument.documentElement.clientLeft;return{x:e-(s.left+n-a),y:t-(s.top+o-r)}},e}();return{initialize:function(t,i,s,n){new e(t.id,t,i,s).render();var o={height:0,width:0,isIE:!1};if(n){var r=this.getContainerSize(t.id,s);o.height=r.height,o.width=r.width}return o.isIE=sf.base.Browser.isIE,o},getContainerSize:function(e,t){var i=document.getElementById(e),s=i.clientWidth;return{height:i.clientHeight,width:s}},animationProcess:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);if(s&&s.element)for(var n=JSON.parse(t.pointerAnimation),o=0;o<n.length;o++)s.pointerAnimation(n[o])},setPointerDragStatus:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&(i.options.enablePointerDrag=t)},setRangeDragStatus:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&(i.options.enableRangeDrag=t)},setLegendToggle:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&(i.options.legendToggleVisibility=t)},getElementBounds:function(e){var t=document.getElementById(e);if(t){var i=t.getBoundingClientRect();return{width:i.width,height:i.height,top:i.top,bottom:i.bottom,left:i.left,right:i.right}}return null},dispose:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.destroy()}}}()},"./modules/sf-colorpicker.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.ColorPicker=function(){"use strict";var e=function(){function e(e,t,i,s){this.dataId=e,this.element=t,this.dotnetRef=i,window.sfBlazor.setCompInstance(this),s&&(this.addScrollEvents(!0),this.setPaletteWidth(this.element.querySelector(".e-container"),!1))}return e.prototype.getOffset=function(e){var t=e.querySelector(".e-hsv-container");if(!t)return{IsDevice:sf.base.Browser.isDevice};var i=t.getBoundingClientRect(),s=t.querySelector(".e-hsv-color"),n=t.querySelector(".e-handler");return n&&n.focus(),{Left:i.left,Top:i.top,Width:i.width,Height:i.height,Right:i.right,ClientLeft:s.offsetLeft,ClientTop:s.offsetTop,ClientWidth:s.offsetWidth,ClientHeight:s.offsetHeight,IsDevice:sf.base.Browser.isDevice}},e.prototype.setOffset=function(e,t){var i=this.getOffset(e);t&&!sf.base.Browser.isDevice&&(this.setZIndex(this.element,t,".e-split-colorpicker"),this.setZIndex(this.element,t,".e-dropdown-btn")),i&&this.dotnetRef.invokeMethodAsync("SetOffset",i)},e.prototype.setZIndex=function(e,t,i){var s=e.querySelector(i);s&&(s.style.zIndex=t+1+"")},e.prototype.removeZIndex=function(){var e=this.element.querySelector(".e-split-colorpicker"),t=this.element.querySelector(".e-dropdown-btn");e&&(e.style.zIndex=""),t&&(t.style.zIndex="")},e.prototype.setPaletteWidth=function(e,t,i){if(sf.base.Browser.isDevice&&!sf.base.isNullOrUndefined(i)){var s=e.querySelector(".e-colorpicker.e-modal");s&&(s.style.zIndex=i-1+"",document.body.insertBefore(s,e.parentElement),s.style.display="")}if(e.querySelector(".e-hsv-container"))e.style.width="";else{var n=parseInt(getComputedStyle(e).borderBottomWidth,10);e.style.width=e.children[0].offsetWidth+n+n+"px";var o=e.querySelector(".e-selected-value");o&&(o.style.width="100%",(o=e.querySelector(".e-switch-ctrl-btn"))&&(o.style.width="100%"))}if(t){var r=window.sfBlazor.getCompInstance(this.dataId);r.element.querySelector(".sf-colorpicker")&&r.setPosition(!0)}},e.prototype.scrollHandler=function(e){this.element.parentElement?this.setOffset(this.element):sf.base.EventHandler.remove(e.target,"scroll",this.scrollHandler)},e.prototype.addScrollEvents=function(e){for(var t=0,i=sf.popups.getScrollableParent(this.element);t<i.length;t++){var s=i[t];e?sf.base.EventHandler.add(s,"scroll",this.scrollHandler,this):sf.base.EventHandler.remove(s,"scroll",this.scrollHandler)}},e.prototype.focusIn=function(e,t){if(t){var i=e.querySelector(".e-container");i&&(i.classList.contains("e-color-palette")?this.setFocus(".e-palette"):this.setFocus(".e-handler"))}else this.setFocus(".e-split-colorpicker")},e.prototype.setFocus=function(e){var t=this.element.querySelector(e);t&&t.focus()},e.prototype.paletteKeyDown=function(e,t){var i=e.target;if(i.classList.contains("e-palette")){var s,n,o,r=[].slice.call(sf.base.selectAll(".e-tile",i)),a=r.filter((function(e){return e.classList.contains("e-selected")})).pop(),l=i.parentElement;switch(!e.altKey&&e.keyCode){case 39:e.preventDefault(),o=(s=a?r[this.tilePosition(r,a,t?-1:1)]:r[t?r.length-1:0]).getAttribute("aria-label"),this.keySelectionChanges(s,l,o);break;case 37:e.preventDefault(),o=(s=a?r[this.tilePosition(r,a,t?1:-1)]:r[t?0:r.length-1]).getAttribute("aria-label"),this.keySelectionChanges(s,l,o);break;case 38:e.preventDefault(),o=(s=r[n=a?this.tilePosition(r,a,-10):0]?r[n]:r[n-10]).getAttribute("aria-label"),this.keySelectionChanges(s,l,o);break;case 40:e.preventDefault(),r[n=a?this.tilePosition(r,a,10):r.length-1]?s=r[n]:(n%=r.length,s=r[n+=r[r.length-1].parentElement.childElementCount]),o=s.getAttribute("aria-label"),this.keySelectionChanges(s,l,o);break;case 13:if(e.preventDefault(),a){a.getAttribute("aria-label");this.dotnetRef.invokeMethodAsync("Close")}}}},e.prototype.tilePosition=function(e,t,i){var s=(e=Array.prototype.slice.call(e)).length,n=10-e[s-1].parentElement.childElementCount,o=e.indexOf(t);return(o+=i)<0?o+=s+n:o%=s+n,o},e.prototype.keySelectionChanges=function(e,t,i){this.removeTileSelection(t),this.addTileSelection(e),this.dotnetRef.invokeMethodAsync("Click",i)},e.prototype.removeTileSelection=function(e){[].slice.call(sf.base.selectAll(".e-selected",e.children[0])).forEach((function(e){e.classList.remove("e-selected"),e.setAttribute("aria-selected","false")}))},e.prototype.addTileSelection=function(e){e.classList.add("e-selected"),e.setAttribute("aria-selected","true")},e}();return{initialize:function(t,i,s,n){return sf.base.isNullOrUndefined(i)?null:(new e(t,i,s,n),window.sfBlazor.getCompInstance(t).getOffset(i))},getOffset:function(e,t){var i=window.sfBlazor.getCompInstance(e);return sf.base.isNullOrUndefined(i)?null:(i.setPaletteWidth(t,!0),i.getOffset(t))},focusIn:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s)||s.focusIn(t,i)},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.addScrollEvents(!1)}}}()},"./modules/sf-contextmenu.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.ContextMenu=function(){"use strict";function e(t,i,s,n){void 0===n&&(n=0);var o=t.children[i];return n===t.childElementCount?-1:((o.classList.contains("e-separator")||o.classList.contains("e-disabled")||o.classList.contains("e-menu-hide"))&&(i=s?i===t.childElementCount-1?0:i+1:0===i?t.childElementCount-1:i-1,n++),((o=t.children[i]).classList.contains("e-separator")||o.classList.contains("e-disabled")||o.classList.contains("e-menu-hide"))&&(i=e(t,i,s)),i)}var t="e-menu-parent",i="CloseMenuAsync",s="mousedown touchstart",n=function(){function n(e,t,i,s,n,o,r,a){this.dataId=e,this.element=t,this.target=i,this.filter=s,this.showOn=n,this.closeOn=o,this.dotnetRef=a,this.enableScrolling=r,window.sfBlazor.setCompInstance(this),this.addContextMenuEvent(),this.addEventListener()}return n.prototype.addContextMenuEvent=function(e){var t;if(void 0===e&&(e=!0),this.target){var i=sf.base.selectAll(this.target);if(i.length){for(var s=0,n=i.length;s<n;s++)if(t=i[s],e)sf.base.Browser.isIos?new sf.base.Touch(t,{tapHold:this.touchHandler.bind(this)}):sf.base.EventHandler.add(t,this.showOn,this.cmenuHandler,this);else if(sf.base.Browser.isIos){var o=sf.base.getInstance(t,sf.base.Touch);o&&o.destroy()}else sf.base.EventHandler.remove(t,this.showOn,this.cmenuHandler);if(sf.base.isNullOrUndefined(this.targetElement)&&(this.targetElement=t),e){sf.base.EventHandler.add(this.targetElement,"scroll",this.scrollHandler,this);for(var r=0,a=sf.popups.getScrollableParent(this.targetElement);r<a.length;r++){var l=a[r];sf.base.EventHandler.add(l,"scroll",this.scrollHandler,this)}}else{var h=void 0;this.targetElement.parentElement?(sf.base.EventHandler.remove(this.targetElement,"scroll",this.scrollHandler),h=sf.popups.getScrollableParent(this.targetElement)):h=sf.popups.getScrollableParent(t);for(var d=0,c=h;d<c.length;d++){var p=c[d];sf.base.EventHandler.remove(p,"scroll",this.scrollHandler)}this.targetElement=null}}}},n.prototype.scrollHandler=function(){if(sf.base.select("."+t,this.element)&&(this.dotnetRef.invokeMethodAsync(i,0,!1,!0,!1),this.enableScrolling)){var e=this;setTimeout((function(){e.destroyScroll()}),100)}},n.prototype.vscrollHandler=function(){var e=this.element.querySelector(".e-menu-parent");null!=e&&e.classList.contains("e-transparent")&&e.classList.remove("e-transparent")},n.prototype.touchHandler=function(e){this.cmenuHandler(e.originalEvent)},n.prototype.keyDownHandler=function(i){var s=i.target.classList;(s.contains("e-menu-item")||s.contains(t))&&i.preventDefault(),function(t,i,s,n){if(40===s||38===s){var o=void 0,r=void 0,a=void 0;i.classList.contains("e-menu-parent")?((a=(r=i).querySelector(".e-menu-item.e-focused"))?(o=Array.prototype.indexOf.call(r.children,a),o=40===s?o===r.childElementCount-1?0:o+1:0===o?r.childElementCount-1:o-1):o=0,o=e(r,o,40===s)):i.classList.contains("e-menu-item")&&(a=(r=i.parentElement).querySelector(".e-menu-item.e-focused"),o=Array.prototype.indexOf.call(r.children,a||i),o=e(r,o=40===s?o===r.childElementCount-1?0:o+1:0===o?r.childElementCount-1:o-1,40===s)),r&&-1!==o&&r.children[o].focus()}else if(((t.classList.contains("e-rtl")?39===s:37===s)||27===s||13===s&&sf.base.closest(i,".e-menu-container"))&&(i.classList.contains("e-ul")||i.classList.contains("e-menu-item")&&!i.parentElement.classList.contains("e-contextmenu"))){var l=void 0;n&&(l=sf.base.select(n));r=i.classList.contains("e-ul")?i:i.parentElement;var h=sf.base.closest(r,".e-menu-vscroll"),d=void 0,c=h?h.previousElementSibling:r.previousElementSibling;if(!l||c&&13!==s){var p=sf.base.closest(r,".e-hamburger");d=p?sf.base.select(".e-menu-item.e-selected",p):sf.base.select(".e-menu-item.e-selected",c)}else d=sf.base.select(".e-menu-item.e-selected",l),(h=sf.base.select(".e-menu-vscroll",t))&&l.blazor__instance.destroyScroll("none");d&&d.focus()}}(this.element,i.target,i.keyCode,this.menuId)},n.prototype.cmenuHandler=function(e){if(this.cmTarget=e.target,this.filter){for(var t=!1,i=this.filter.split(" "),n=0,o=i.length;n<o;n++)if(sf.base.closest(e.target,i[n])){t=!0;break}if(!t)return}e.preventDefault(),e.stopPropagation();var r=e.changedTouches?e.changedTouches[0].clientX:e.clientX,a=e.changedTouches?e.changedTouches[0].clientY:e.clientY;if("mouseover"===this.showOn){var l=this.cmTarget.getBoundingClientRect();l.right>r&&r>l.right-5&&(r-=10),l.bottom>a&&a>l.bottom-5&&(a-=10)}this.closeOn!==s&&(sf.base.EventHandler.remove(e.target,this.showOn,this.cmenuHandler),"mouseleave"===this.closeOn?sf.base.EventHandler.add(e.target,this.closeOn,this.mouseLeaveHandler,this):sf.base.EventHandler.add(document,this.closeOn,this.delegateMouseDownHandler,this)),this.dotnetRef.invokeMethodAsync("OpenContextMenuAsync",Math.ceil(r),Math.ceil(a),this.cmTarget.id)},n.prototype.mouseLeaveHandler=function(e,t){var s=this.cmTarget.getBoundingClientRect(),n=s.top<e.clientY&&s.bottom-3>e.clientY;if(!(s.left<e.clientX&&s.right>e.clientX)||!n||t){if(this.dotnetRef.invokeMethodAsync(i,0,!1,!0,!1),this.enableScrolling){var o=this;setTimeout((function(){o.destroyScroll()}),100)}sf.base.EventHandler.remove(this.cmTarget,this.closeOn,this.mouseLeaveHandler),sf.base.EventHandler.add(this.cmTarget,this.showOn,this.cmenuHandler,this)}},n.prototype.clickHandler=function(e){if(e&&(sf.base.EventHandler.add(this.cmTarget,this.showOn,this.cmenuHandler,this),"mouseleave"===this.closeOn?sf.base.EventHandler.remove(this.cmTarget,this.closeOn,this.mouseLeaveHandler):sf.base.EventHandler.remove(document,this.closeOn,this.delegateMouseDownHandler)),this.enableScrolling){var t=this;setTimeout((function(){t.destroyScroll(null,!0)}),100)}},n.prototype.contextMenuPosition=function(e,t,i,s,n,o){var r=this.hideMenu(!0);if(r){this.subMenuOpen=!1,this.setBlankIconStyle(r,i);var a=r.getBoundingClientRect(),l=this.getMenuWidth(r,a.width,i);if(s&&sf.base.Browser.isDevice)return r.style.width=Math.ceil(l)+"px",void(r.style.visibility="");if(n){if(t+a.height>document.documentElement.clientHeight){var h=document.documentElement.clientHeight-a.height-20;h>document.documentElement.clientTop&&(t=h)}if(e+l>document.documentElement.clientWidth){var d=document.documentElement.clientWidth-l-20;d>document.documentElement.clientLeft&&(e=d)}}var c=(r=this.updateScroll(o,r)).classList.contains("e-menu-parent")?r:sf.base.select(".e-menu-parent",r);this.element.style.top=Math.ceil(t+1)+pageYOffset+"px",this.element.style.left=Math.ceil(e+1)+pageXOffset+"px",r.style.width=Math.ceil(l)+"px",this.element.style.zIndex=sf.popups.getZindexPartial(this.element).toString(),r.style.visibility="",c.style.visibility="",r.focus()}},n.prototype.setBlankIconStyle=function(e,t){var i=[].slice.call(e.getElementsByClassName("e-blankicon")),s=t?{padding:"paddingRight",cssSelector:"padding-right",margin:"marginLeft"}:{padding:"paddingLeft",cssSelector:"padding-left",margin:"marginRight"};if([].slice.call(e.querySelectorAll('.e-menu-item[style*="'+s.cssSelector+'"]:not(.e-blankicon)')).forEach((function(e){e.style[s.padding]=""})),i.length){var n=e.querySelector(".e-menu-item:not(.e-blankicon):not(.e-separator)"),o=n.querySelector(".e-menu-icon");if(o){var r=getComputedStyle(o),a=parseInt(r.fontSize,10);parseInt(r.width,10)&&parseInt(r.width,10)>a&&(a=parseInt(r.width,10));var l=a+parseInt(r[s.margin],10)+parseInt(getComputedStyle(n)[s.padding],10)+"px";i.forEach((function(e){e.style[s.padding]=l}))}}},n.prototype.getMenuWidth=function(e,t,i){var s=e.getElementsByClassName("e-caret")[0];return s&&(t+=parseInt(getComputedStyle(s)[i?"marginRight":"marginLeft"],10)),t<120?120:t},n.prototype.addEventListener=function(){this.delegateMouseDownHandler=this.mouseDownHandler.bind(this),this.delegateMouseOverHandler=this.mouseOverHandler.bind(this),this.closeOn===s&&sf.base.EventHandler.add(document,s,this.delegateMouseDownHandler,this),sf.base.EventHandler.add(document,"mouseover",this.delegateMouseOverHandler,this),sf.base.EventHandler.add(this.element,"keydown",this.keyDownHandler,this)},n.prototype.removeEventListener=function(){sf.base.EventHandler.remove(document,s,this.delegateMouseDownHandler),sf.base.EventHandler.remove(document,"mouseover",this.delegateMouseOverHandler),sf.base.EventHandler.remove(this.element,"keydown",this.keyDownHandler)},n.prototype.mouseDownHandler=function(e){var n=e.target;if("DIV"!==n.tagName&&"SPAN"!==n.tagName||!(n.className.indexOf("scroll")>-1||n.className.indexOf("arrow")>-1))if(document.getElementById(this.element.id)){if(!sf.base.closest(e.target,"#"+this.element.id)&&(sf.base.isNullOrUndefined(this.menuId)||!sf.base.closest(e.target,this.menuId))&&sf.base.select("."+t,this.element)){if(sf.base.closest(sf.base.select("."+t,this.element),".e-dropdown-popup")||this.dotnetRef.invokeMethodAsync(i,0,!1,!0,!1),this.enableScrolling){var o=this;setTimeout((function(){o.destroyScroll()}),100)}this.closeOn!==s&&(sf.base.EventHandler.remove(document,this.closeOn,this.delegateMouseDownHandler),sf.base.EventHandler.add(this.cmTarget,this.showOn,this.cmenuHandler,this))}}else this.removeEventListener()},n.prototype.isHavingChild=function(e){return e&&"LI"===e.tagName&&e.className.indexOf("e-menu-item")<0&&(e=e.closest(".e-menu-item")),!!(e&&"LI"===e.tagName&&e.className.indexOf("e-menu-item")>-1&&e.className.indexOf("e-menu-caret-icon")>-1)},n.prototype.mouseOverHandler=function(e){var s=e.target;if("DIV"!==s.tagName&&"SPAN"!==s.tagName||!(s.className.indexOf("scroll")>-1||s.className.indexOf("arrow")>-1))if(document.getElementById(this.element.id)){var n=[].slice.call(sf.base.selectAll("."+t,this.element));if(n.length){var o=sf.base.closest(s,".e-scroll-nav");if(this.enableScrolling&&!this.isHavingChild(s)){var r=this;setTimeout((function(){for(var e=[].slice.call(sf.base.selectAll(".e-menu-vscroll",this.element)),t=0;t<e.length;t++)s&&"LI"===s.tagName&&s.className.indexOf("e-menu-item")<0&&(s=s.closest(".e-menu-item")),s&&s.parentElement!=e[t].querySelectorAll(".e-menu-parent")[0]&&t==e.length-1&&r.destroyScroll(e[t])}),100)}if(this.subMenuOpen&&(n.length>1||!sf.base.isNullOrUndefined(this.menuId)&&!o)){if(!sf.base.closest(s,"#"+this.element.id)&&(sf.base.isNullOrUndefined(this.menuId)||!sf.base.closest(s,this.menuId))||o){var a=1;if(!sf.base.isNullOrUndefined(this.menuId)&&(a=0,o&&(a=n.indexOf(sf.base.select("."+t,o.parentElement))+1)===n.length))return;if(this.dotnetRef.invokeMethodAsync(i,a,!1,!0,!1),this.enableScrolling){var l=this;setTimeout((function(){for(var e=a;e<n.length;e++)l.destroyScroll(n[e])}),100)}"mouseleave"===this.closeOn&&(this.mouseLeaveHandler(e),sf.base.EventHandler.remove(this.menuTarget,this.closeOn,this.menuMouseLeave)),sf.base.isNullOrUndefined(this.menuId)||sf.base.closest(s,".e-scroll-nav")||this.destroyMenuScroll(null)}sf.base.isNullOrUndefined(this.menuId)||!sf.base.closest(s,"#"+this.element.id)&&!sf.base.closest(s,this.menuId)||!sf.base.closest(s,".e-menu-item")||sf.base.closest(s,".e-selected")||this.destroyMenuScroll(sf.base.closest(s,"."+t))}else"mouseleave"===this.closeOn&&s.classList.contains("e-menu-item")&&(this.menuTarget=s.parentElement,sf.base.EventHandler.add(this.menuTarget,this.closeOn,this.menuMouseLeave,this));if(!this.openAsMenu){var h=document.activeElement;if(!sf.base.closest(h,"#"+this.element.id)&&n.length&&"BODY"==h.tagName){var d=this.getLastMenu();d&&d.focus()}}}}else this.removeEventListener()},n.prototype.menuMouseLeave=function(e){var t=this.menuTarget.getBoundingClientRect(),i=t.top<e.clientY&&t.bottom>e.clientY;t.left<e.clientX&&t.right>e.clientX&&i||(this.mouseLeaveHandler(e,!0),sf.base.EventHandler.remove(this.menuTarget,this.closeOn,this.menuMouseLeave))},n.prototype.destroyMenuScroll=function(e){if(sf.base.select(".e-menu-vscroll",this.element)){var t=window.sfBlazor.getCompInstance(this.dataId);sf.base.isNullOrUndefined(t)||t.destroyScroll("none",e)}},n.prototype.hideMenu=function(e){var i;if(e){if(!(i=sf.base.select("."+t,this.element))||sf.base.isNullOrUndefined(this.element.parentElement))return null;this.element.parentElement!==document.body&&document.body.appendChild(this.element)}else{var s=sf.base.selectAll("."+t,this.element);if(s.length<2)return null;i=s[s.length-1]}return i.style.width="",i.style.visibility="hidden",i.classList.remove("e-transparent"),i},n.prototype.subMenuPosition=function(e,i,s,n,o,r,a){if(e){var l=sf.base.selectAll("."+t,this.element),h=l[l.length-2].querySelector(".e-menu-item.e-selected").getBoundingClientRect(),d=this.element.getBoundingClientRect(),c=e.classList.contains(t)?e:sf.base.select("."+t,e);this.setBlankIconStyle(c,i);var p,u,f=c.getBoundingClientRect(),g=this.getMenuWidth(c,f.width,i);i?(u=parseInt(getComputedStyle(c).borderWidth,10),p=h.left-g-d.left):p="mouseleave"==this.closeOn?h.right-d.left-10:h.right-d.left;var m=h.top-d.top;if(i)h.left-u-g<document.documentElement.clientLeft&&h.right+g<document.documentElement.clientWidth&&(p=h.right-d.left);else if(h.right+g>document.documentElement.clientWidth){var v=h.left-g;v>document.documentElement.clientLeft&&(p=v-d.left,"mouseleave"==this.closeOn&&(p=v-d.left+10))}var b=o||f.height;if(h.top+b>document.documentElement.clientHeight){var y=document.documentElement.clientHeight-b-20;y>document.documentElement.clientTop&&(m=y-d.top)}r&&(e=this.updateScroll(o,e)).className.indexOf("scroll")>-1&&(c.style.left="0px",c.style.top="0px"),this.subMenuOpen=!s,e.style.left=Math.ceil(p)+"px",e.style.top=Math.ceil(m)+"px",e.style.width=Math.ceil(g)+"px",c.style.visibility="";var M=c.querySelector(".e-menu-item.e-focused");M?M.focus():a&&c.focus(),n&&(this.openAsMenu=!0)}},n.prototype.updateScroll=function(e,t){if(this.enableScrolling){this.destroyScroll(t),e>0&&t&&(t=sf.navigations.addScrolling(sf.base.createElement,this.element,t,"vscroll",!1,e));var i=this.element.querySelector(".e-vscroll-bar");i&&sf.base.EventHandler.add(i,"scroll",this.vscrollHandler,this)}return t},n.prototype.destroyScroll=function(e,t){sf.base.selectAll(".e-menu-vscroll",this.element).forEach((function(i){(t&&!i.querySelector("ul")||!t)&&sf.navigations.destroyScroll(sf.base.getInstance(i,sf.navigations.VScroll),i,e)}))},n.prototype.getLastMenu=function(){var e=sf.base.selectAll("."+t,this.element);return e.length?e[e.length-1]:null},n.prototype.onPropertyChanged=function(e,t){switch(e){case"Target":this.addContextMenuEvent(!1),this.target=t,this.addContextMenuEvent();break;case"Filter":this.filter=t;break;case"ShowOn":this.addContextMenuEvent(!1),this.showOn=t,this.addContextMenuEvent()}},n.prototype.destroy=function(e){this.removeEventListener(),this.addContextMenuEvent(!1),e&&e.parentElement&&e.previousElementSibling!==this.element&&e.parentElement.insertBefore(this.element,e),e&&e.parentElement||!this.element.parentElement||this.element.parentElement!==document.body||document.body.removeChild(this.element)},n.prototype.updateProperty=function(e,t){t&&(this.menuId="#"+t.id),this.subMenuOpen=!e},n}();return{initialize:function(e,t,i,s,o,r,a,l){sf.base.isNullOrUndefined(t)||new n(e,t,i,s,o,r,a,l)},contextMenuPosition:function(e,t,i,s,n,o,r){var a=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(a)||a.contextMenuPosition(t,i,s,n,o,r)},subMenuPosition:function(e,t,i,s,n){var o=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(o)){var r=o.hideMenu();o.subMenuPosition(r,t,i,s,n,!0)}},onPropertyChanged:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s)||s.onPropertyChanged(t,i)},click:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.clickHandler(t)},destroy:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.destroy(t)}}}()},"./modules/sf-dashboard-layout.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.DashboardLayout=function(){"use strict";var e=function(){function e(e,t,i){this.cellAspectRatio=1,this.mOffX=0,this.mOffY=0,this.maxTop=9999,this.maxRows=100,this.mouseX=0,this.mouseY=0,this.minTop=0,this.minLeft=0,this.allowPushing=!0,this.allowResizing=!1,this.panelElements=[],this.renderedElement=[],this.allowDragging=!1,this.isRenderComplete=!1,this.allowFloating=!1,this.overlapElement=[],this.panelsSizeY=0,this.shouldRestrict=!1,this.overlapElementClone=[],this.addPanelCalled=!1,this.rows=0,this.cellSpacing=[],this.resizeCalled=!1,this.movePanelCalled=!1,this.isResizing=!1,this.resizeTimeCount=0,this.isChanged=!1,this.isDragged=!1,this.isRefreshCalled=!1,this.changedId=[],this.panelMove=!1,this.element=t,this.dataId=e,window.sfBlazor.setCompInstance(this),this.dotnetRef=i}return e.prototype.preRender=function(e){this.dragCollection=[],this.renderedElement=[],this.overlapSubElementClone=[],this.panels=[],this.sortedArray=[],this.allItems=[],this.oldRowCol={},this.cellSpacing=[],this.checkCollision=[],this.cloneObject={},this.maxColumnValue=this.columns,this.mainElement=null,e&&this.getProperty(e),this.isMediaQuery=this.checkMediaQuery(),this.calculateCellSizeValue()},e.prototype.initialize=function(e){this.preRender(e),sf.base.isNullOrUndefined(this.panels)&&(this.panels=[]);for(var t=0;t<this.element.querySelectorAll(".e-panel").length;t++)this.panelElements.push(this.element.querySelectorAll(".e-panel")[t]);this.panelsInitialModel=this.cloneModels(this.panels),this.renderDashBoardCells(this.panels),!this.allowDragging||this.mediaQuery&&window.matchMedia("("+this.mediaQuery+")").matches||this.enableDraggingContent(this.panelElements),this.checkColumnValue=this.maxColumnValue,this.isRenderComplete=!0,this.bindEvents();var i=this.calculateCellSize(),s=this.contentHeight();return JSON.stringify({parentOffset:i,enableMediaQuery:this.isMediaQuery,panelHeaderModel:s})},e.prototype.clearPanelElements=function(){this.panelElements=[]},e.prototype.calculateCellSize=function(){return this.cellSizeValue=[],this.cellSizeValue[0]=this.element.parentElement&&this.element.parentElement.offsetWidth,this.cellSizeValue},e.prototype.checkMediaQuery=function(){return this.mediaQuery&&window.matchMedia("("+this.mediaQuery+")").matches},e.prototype.getProperty=function(e){this.mediaQuery=e.MediaQuery,this.allowDragging=e.AllowDragging,this.columns=e.Columns,this.allowFloating=e.AllowFloating,this.rows=e.MaxRow+1,this.cellSpacing=e.CellSpacing,this.cellAspectRatio=e.CellAspectRatio,this.allowResizing=e.AllowResizing,this.panels=e.Panels,this.draggableHandle=e.DraggableHandle},e.prototype.movePanel=function(e,t,i){this.panelMove=!0,this.movePanelCalled=!0,this.panelsInitialModel=this.cloneModels(this.panels);var s=this.getCellInstance(e),n=document.getElementById(e),o=this.getCellInstance(n.id);this.mainElement=n,this.startRow=this.dragRow=o.row,this.startCol=this.dragColumn=o.col,this.updatePanelPosition(o.id,i,t),this.updateOldRowColumn(),this.updatePanelLayout(n,s),this.updatePanels(),this.updateCloneArrayObject(),this.mainElement=null,this.allowFloating&&this.moveItemsUpwards(),this.movePanelCalled=!1,this.panelMove||this.dotnetRef.invokeMethodAsync("UpdatedPanelsValues",this.panels)},e.prototype.removePanel=function(e){this.panelsSizeY=0;for(var t=this.renderedElement.length-1;t>=0;t--)if(this.renderedElement[t].id===e){this.renderedElement.splice(t,1);break}for(t=0;t<this.panelElements.length;t++)this.panelElements[t].id===e&&this.panelElements.splice(t,1),this.panels[t].id===e&&(this.panels.splice(t,1),this.updateOldRowColumn(),this.sortedPanel());this.updatePanels(),this.updateCloneArrayObject(),this.panelsInitialModel=this.cloneModels(this.panels)},e.prototype.renderDashBoardCells=function(e){if(this.element.querySelectorAll(".e-panel").length>0||this.panels.length>0){this.updateOldRowColumn();for(var t=0;t<this.panels.length;t++){if(this.columns<this.panels[t].col||this.columns<this.panels[t].col+this.panels[t].sizeX){var i=this.columns-this.panels[t].sizeX;this.updatePanelPosition(this.panels[t].id,i<0?0:i,this.panels[t].row)}this.renderedElement.push(this.panelElements[t]);var s=this.renderCell(e[t]);this.updatePanelLayout(s,this.panels[t])}this.updatePanels(),this.updateCloneArrayObject();var n=this.checkForChanges();n.length>0&&this.dotnetRef.invokeMethodAsync("UpdatedPanelsValues",n)}},e.prototype.resizePanel=function(e,t,i){var s=this.getCellInstance(e);this.resizeCalled=!0;var n=document.getElementById(e);this.updatePanelSize(s.id,t,i),this.mainElement=n,this.updatePanelLayout(n,s),this.updatePanels(),this.resizeCalled=!1,this.dotnetRef.invokeMethodAsync("UpdatedPanelsValues",this.panels)},e.prototype.removeAll=function(){this.removeAllCalled=!0;for(var e=0;e<this.panelElements.length;e++)this.panelElements.splice(e,1);for(e=this.renderedElement.length-1;e>=0;e--)this.renderedElement.splice(e,1);this.rows=0,this.sortedPanel(),this.sortedArray=[],this.overlapElementClone=[],this.overlapElement=[],this.overlapSubElementClone=[],this.panelElements=[],this.oldRowCol={},this.cloneObject={},this.panels=[],this.updateCloneArrayObject(),this.removeAllCalled=!1},e.prototype.onPropertyChange=function(e){if(e.AllowDragging===this.allowDragging&&e.DraggableHandle==this.draggableHandle||(this.allowDragging=e.AllowDragging,this.draggableHandle=e.DraggableHandle,this.checkDragging(this.dragCollection)),e.AllowResizing!==this.allowResizing&&(this.allowResizing=e.AllowResizing),e.AllowFloating!==this.allowFloating)this.allowFloating=e.AllowFloating,this.moveItemsUpwards(),this.updatePanels(),this.updateOldRowColumn(),this.updateCloneArrayObject();else if(e.Columns!==this.columns){this.columns=e.Columns,this.calculateCellSizeValue();for(var t=0;t<this.panels.length;t++){if(this.columns<this.panels[t].col||this.columns<this.panels[t].col+this.panels[t].sizeX){var i=this.columns-this.panels[t].sizeX;this.updatePanelPosition(this.panels[t].id,i<0?0:i,this.panels[t].row)}this.updatePanelLayout(document.getElementById(this.panels[t].id),this.panels[t])}this.renderDashBoardCells(this.panels),this.updatePanels(),this.dotnetRef.invokeMethodAsync("UpdatedPanelsValues",this.panels)}this.getProperty(e)},e.prototype.updatePanelLayout=function(e,t){var i=this;this.collisionChecker={};var s=[],n=[];if((s=this.mainElement&&this.isRenderComplete?this.resetLayout(t):this.collisions(t.row,t.col,t.sizeX,t.sizeY,e)).length>0)if(s=this.sortCollisionItems(s),s=this.updatedModels(s,t,e),!sf.base.isNullOrUndefined(this.startRow)&&this.checkForSwapping(s,e))this.swapItems(s,e,t);else for(var o=0;o<s.length;o++){var r=this.getCellInstance(s[o].id);if(this.checkingElement=s[o],this.spacedRowValue=null,this.spacedColumnValue=null,this.adjustmentAvailable(r.row,r.col,r.sizeY,r.sizeX,e)&&!sf.base.isNullOrUndefined(this.spacedColumnValue)){if(this.updatePanelPosition(r.id,this.spacedColumnValue,this.spacedRowValue),this.oldRowCol[s[o].id]={row:this.spacedRowValue,col:this.spacedColumnValue},s[o].setAttribute("data-row",this.spacedRowValue.toString()),s[o].setAttribute("data-col",this.spacedColumnValue.toString()),this.topAdjustable&&this.allowFloating&&(this.updatePanels(),this.updateCloneArrayObject()),this.spacedRowValue=null,o<s.length)continue}else n.push(s[o])}n.length>0&&(n.forEach((function(e){-1===i.overlapElement.indexOf(e)&&i.overlapElement.push(e)})),this.overlapElement&&-1!==this.overlapElement.indexOf(e)&&this.overlapElement.splice(this.overlapElement.indexOf(e),1),n.length>0&&(this.updateRowColumn(t.row,this.overlapElement,e),this.checkForCompletePushing())),this.isSubValue||this.sortedPanel()},e.prototype.addPanel=function(e){this.panelsSizeY=0,e.minSizeX||(e.minSizeX=1),e.minSizeY||(e.minSizeY=1),this.panels.push(e);var t=this.renderCell(e);if(this.panelElements.push(t),this.renderedElement.push(t),this.panelsInitialModel=this.cloneModels(this.panels),this.oldRowCol[e.id]={row:e.row,col:e.col},this.cloneObject[e.id]={row:e.row,col:e.col},this.updateOldRowColumn(),this.element.insertAdjacentElement("afterbegin",t),this.addPanelCalled=!0,this.checkMediaQuery()||(this.mainElement=t,this.checkCollision||(this.checkCollision=[]),this.updatePanelLayout(t,e)),this.addPanelCalled=!1,this.allowDragging&&this.mediaQuery&&!this.checkMediaQuery()&&this.enableDraggingContent([document.getElementById(e.id)]),this.allowFloating&&(this.mainElement=null,this.moveItemsUpwards()),this.updateOldRowColumn(),this.sortedPanel(),this.updateCloneArrayObject(),this.allowResizing)for(var i=0;i<t.querySelectorAll(".e-resize").length;i++){var s="msie"===sf.base.Browser.info.name?"mousedown pointerdown":"mousedown";sf.base.EventHandler.add(t.querySelectorAll(".e-resize")[i],s,this.downResizeHandler,this),"msie"!==sf.base.Browser.info.name&&sf.base.EventHandler.add(t.querySelectorAll(".e-resize")[i],"touchstart",this.touchDownResizeHandler,this)}this.dotnetRef.invokeMethodAsync("UpdatePanelContentHeight",this.panels,this.contentHeight())},e.prototype.checkForSwapping=function(e,t){if(!this.mainElement||0===e.length)return!1;var i,s=parseInt(e[0].getAttribute("data-row"),10);if(this.startRow<s?i=1:this.startRow>s&&(i=0),!this.swapAvailability(e,t))return!1;for(var n=!1,o=0;o<e.length;o++)if(e.length>=1&&this.cloneObject[this.mainElement.id].row===this.oldRowCol[this.mainElement.id].row)return!1;for(var r=0===i?this.getCellInstance(this.mainElement.id).row+this.getCellInstance(this.mainElement.id).sizeY:this.startRow,a=0;a<e.length;a++){var l=this.getCellInstance(e[a].id),h=this.getCellInstance(t.id),d=[];if(1===l.sizeY&&-1===d.indexOf(e[a]))d.push(e[a]);else if(l.sizeY>1&&-1===d.indexOf(e[a]))if(1===i&&h.row===this.cloneObject[l.id].row+l.sizeY-1)d.push(e[a]);else{if(0!==i||h.row!==this.cloneObject[l.id].row)return!1;d.push(e[a])}if(l.sizeY<=h.sizeY&&-1===d.indexOf(e[a])&&d.push(e[a]),d.push(this.mainElement),this.collisions(r,l.col,l.sizeX,l.sizeY,d).length>0)return n=!1;a===e.length-1&&(n=!0)}return n},e.prototype.swapAvailability=function(e,t){for(var i=!0,s=this.getCellInstance(t.id),n=0;n<e.length;n++)for(var o=this.getCellInstance(e[n].id),r=1;r<s.sizeY;r++){var a=[];if(a.push(t),a.push(e[n]),this.collisions(s.row+r,o.col,o.sizeX,o.sizeY,a).length>0)return i=!1,!1}return i},e.prototype.swapItems=function(e,t,i){var s,n=this,o=[];o.push(t);var r=this.getCellInstance(e[0].id).row;this.startRow<r?s=1:this.startRow>r&&(s=0);var a=0===s?r+i.sizeY:this.startRow;if(!this.movePanelCalled){var l=this.getCellInstance(e[0].id);this.updatePanelPosition(i.id,i.col,0===s?r:a+l.sizeY)}for(var h=0;h<e.length;h++)o.push(e[h]),this.updatePanelPosition(e[h].id,this.getCellInstance(e[h].id).col,a);this.updatePanelPosition(t.id,this.getCellInstance(t.id).col,i.row),this.setPanelPosition(this.shadowEle,i.row,i.col);for(var d=0;d<this.panels.length;d++)this.oldRowCol[this.panels[d].id]={row:this.panels[d].row,col:this.panels[d].col};this.startRow=this.dragRow=i.row,this.updateOldRowColumn(),o.forEach((function(e){n.cloneObject[e.id]=n.oldRowCol[e.id];for(var t=n.getCellInstance(e.id),i=0;i<n.sortedArray.length;i++)if(n.sortedArray[i])for(var s=0;s<n.sortedArray[i].length;s++)n.sortedArray[i][s]===e&&(n.sortedArray[i][s]=void 0);n.sortedArray[t.row]||(n.sortedArray[t.row]=[]),n.sortedArray[t.row][t.col]=e,n.cloneArray=n.sortedArray}))},e.prototype.resetLayout=function(e){var t=this.collisions(e.row,e.col,e.sizeX,e.sizeY,this.mainElement);if(!this.mainElement||this.addPanelCalled||this.resizeCalled||this.movePanelCalled)return t;if(this.mainElement&&this.oldRowCol!==this.cloneObject)for(var i=0;i<this.panels.length;i++){var s=document.getElementById(this.panels[i].id);if(s!==this.mainElement){var n=this.cloneObject[s.id].row,o=this.cloneObject[s.id].col;this.updatePanelPosition(s.id,o,n),s.setAttribute("data-col",o.toString()),s.setAttribute("data-row",n.toString()),this.updateOldRowColumn()}}return this.sortedArray=this.cloneArray,t=this.collisions(e.row,e.col,e.sizeX,e.sizeY,this.mainElement),this.sortedPanel(),this.updateOldRowColumn(),this.checkCollision&&this.checkCollision.length>0&&-1===t.indexOf(this.checkCollision[0])&&this.cloneObject[this.checkCollision[0].id].row===e.row&&t.push(this.checkCollision[0]),t},e.prototype.sortCollisionItems=function(e){for(var t,i=[],s=function(s){t=[],e.forEach((function(e){e&&e.getAttribute("data-row")===s.toString()&&t.push(e)}));for(var o=function(e){t.forEach((function(t){t&&t.getAttribute("data-col")===e.toString()&&i.push(t)}))},r=n.columns-1;r>=0;r--)o(r)},n=this,o=this.rows-1;o>=0;o--)s(o);return i},e.prototype.updatedModels=function(e,t,i){var s=this,n=[];return this.mainElement||this.sortedPanel(),e.forEach((function(o){s.checkingElement=o;var r=s.getCellInstance(o.id),a=!s.adjustmentAvailable(r.row,r.col,r.sizeY,r.sizeX,i);if(r.sizeX>1&&a)for(var l=r.row;l<t.row+t.sizeY;l++){s.collisions(l,r.col,r.sizeX,r.sizeY,o).forEach((function(t){e.indexOf(t)>=0&&-1===n.indexOf(t)&&n.push(t)}))}})),n.forEach((function(t){n.indexOf(t)>=0&&e.splice(e.indexOf(t),1)})),e},e.prototype.checkForCompletePushing=function(){for(var e=0;e<this.panels.length;e++)if(this.collisionChecker[this.panels[e].id]&&null!==this.collisionChecker[this.panels[e].id]){this.overlapElement=[this.collisionChecker[this.panels[e].id].ele];var t=this.panels[e].id;this.updateRowColumn(this.collisionChecker[t].row,this.overlapElement,this.collisionChecker[t].srcEle)}},e.prototype.updateRowColumn=function(e,t,i){if(i){var s=this.getCellInstance(i.id),n=s.sizeY,o=s.row;this.overlapElementClone=(this.overlapElement&&this.shouldRestrict,this.overlapElement);for(var r=0;r<this.overlapElementClone.length;r++){if(0===this.overlapElementClone.length)return;for(var a=0;a<this.overlapElementClone.length;a++)this.collisionChecker[this.overlapElementClone[a].id]={ele:this.overlapElementClone[a],row:e,srcEle:i};var l=o+n,h=this.getCellInstance(this.overlapElementClone[r].id),d=h.sizeY,c=h.col,p=h.sizeX,u=void 0,f=void 0;if(-1===this.overlapSubElementClone.indexOf(i)&&this.overlapSubElementClone.push(i),-1===this.overlapSubElementClone.indexOf(this.overlapElementClone[r])&&this.overlapSubElementClone.push(this.overlapElementClone[r]),d>1||p>1){var g=this.getCellInstance(this.overlapElementClone[r].id);u=g.col;for(var m=document.getElementById(g.id),v=g.row;v<o+n;v++){this.isSubValue=!0;var b=this.getCellInstance(g.id);m.setAttribute("data-row",(o+n).toString()),this.updatePanelPosition(b.id,b.col,g.row+1),this.updateCollisionChecked(m),this.oldRowCol[m.id]={row:g.row,col:u};var y=this.getCellInstance(m.id),M=y.row,C=y.col,w=y.sizeX,S=y.sizeY,N=[];N.push(m),N.push(i),f=this.collisions(M,C,w,S,N),this.mainElement&&-1!==f.indexOf(this.mainElement)&&f.splice(f.indexOf(this.mainElement),1),this.collisionPanel(f,C,M,m)}this.isSubValue=!1}else{this.addPanelCalled&&(this.addPanelCalled=!1);var x=[];x.push(this.overlapElementClone[r]),x.push(i),f=this.collisions(l,c,p,d,x),this.mainElement&&-1!==f.indexOf(this.mainElement)&&f.splice(f.indexOf(this.mainElement),1);var O=this.getCellInstance(this.overlapElementClone[r].id);u=O.col,this.updatePanelPosition(O.id,u,l),this.updateCollisionChecked(this.overlapElementClone[r]),this.oldRowCol[this.overlapElementClone[r].id]={row:l,col:u},this.collisionPanel(f,u,l,this.overlapElementClone[r])}}}},e.prototype.updateCollisionChecked=function(e){for(var t=0;t<Object.keys(this.collisionChecker).length;t++)this.collisionChecker[e.id]=null},e.prototype.collisionPanel=function(e,t,i,s){var n=this;if(e.length>0){this.overlapElement=[],this.shouldRestrict=!0,e.forEach((function(e){n.overlapElement.push(e)}));for(var o=this.getCellInstance(s.id).row,r=0;r<this.overlapElement.length;r++)this.updateRowColumn(o,this.overlapElement,s);this.shouldRestrict=!1}else{if(this.addPanelCalled||this.sortedPanel(),this.overlapSubElementClone.length>0)for(var a=0;a<this.overlapSubElementClone.length;a++){var l=this.getCellInstance(this.overlapSubElementClone[a].id),h=l.row,d=l.col,c=l.sizeX,p=l.sizeY,u=this.collisions(h,d,c,p,this.overlapSubElementClone);this.mainElement&&-1!==u.indexOf(this.mainElement)&&u.splice(u.indexOf(this.mainElement),1),u.forEach((function(e){n.overlapElement.push(e)})),u.length>0&&this.updateRowColumn(h,this.overlapElement,this.overlapSubElementClone[a])}this.overlapSubElementClone=[]}},e.prototype.collisions=function(e,t,i,s,n){var o,r=[];i&&s||(i=s=1),!n||n instanceof Array||(n=[n]);for(var a=0;a<s;++a)for(var l=0;l<i;++l)!(o=this.getPanel(e+a,t+l,n))||n&&-1!==n.indexOf(document.getElementById(o.id))||-1!==r.indexOf(document.getElementById(o.id))||r.push(document.getElementById(o.id));return r},e.prototype.getPanel=function(e,t,i){!i||i instanceof Array||(i=[i]);for(var s=1;e>-1;){for(var n=1,o=t;o>-1;){var r=this.sortedArray[e];if(r){var a=r[o];if(!sf.base.isNullOrUndefined(a)){var l=this.getCellInstance(a.id);if(a&&(!i||-1===i.indexOf(a))&&l.sizeX>=n&&l.sizeY>=s)return a}}++n,--o}--e,++s}return null},e.prototype.renderCell=function(e){return document.getElementById(e.id)},e.prototype.sortedPanel=function(){this.sortedArray=[];for(var e=0,t=this.renderedElement.length;e<t;++e)this.sortItem(this.renderedElement[e])},e.prototype.updatePanels=function(){this.moveItemsUpwards(),this.updateOldRowColumn(),this.sortedPanel()},e.prototype.setRootHeight=function(e){this.element.style.height=e+"px"},e.prototype.sortItem=function(e,t,i){this.overlapElement=[];var s=this.getCellInstance(e.id),n=s.col,o=s.row;if(this.sortedArray[o]||(this.sortedArray[o]=[]),this.sortedArray[o][n]=e,void 0!==e&&void 0!==t&&void 0!==i){if(void 0!==this.oldRowCol[e.id]&&null!==this.oldRowCol[e.id].row&&void 0!==this.oldRowCol[e.id].col){var r=this.sortedArray[this.oldRowCol[e.id].row];sf.base.isNullOrUndefined(r)||this.oldRowCol[e.id]&&r[this.oldRowCol[e.id].col]===e&&(delete r[this.oldRowCol[e.id].col],this.updateOldRowColumn(),this.sortedPanel())}this.oldRowCol[e.id].row=t,this.oldRowCol[e.id].row=i,this.sortedArray[o]||(this.sortedArray[o]=[]),this.sortedArray[o][n]=e,-1===this.allItems.indexOf(e)&&this.allItems.push(e);var a=this.getCellInstance(e.id);this.updatePanelPosition(a.id,i,t),this.sortedPanel()}},e.prototype.updateOldRowColumn=function(){this.oldRowCol={};for(var e=0;e<this.panels.length;e++){var t=this.panels[e].id;if(document.getElementById(t)){var i=this.panels[e].row,s=this.panels[e].col;this.oldRowCol[this.panels[e].id]={row:i,col:s}}}},e.prototype.getCellInstance=function(e){for(var t,i=0;i<this.panels.length;i++)if(this.panels[i].id===e){t=this.panels[i];break}return t},e.prototype.getRowElements=function(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i]);return t},e.prototype.adjustmentAvailable=function(e,t,i,s,n){this.leftAdjustable=void 0,this.rightAdjustable=void 0;var o,r=!1,a=[],l=[];this.topAdjustable=void 0;var h=this.getCellInstance(n.id),d=h.sizeX,c=h.col;if(-1===(l=this.getRowElements(this.collisions(e,0,this.columns,i,[]))).indexOf(n)&&l.push(n),(o=this.leftWardsSpaceChecking(l,t,n)).length>0?(this.leftAdjustable=this.isLeftAdjustable(o,n,e,t,s,i),this.spacedColumnValue!==c-this.getCellInstance(this.checkingElement.id).sizeX&&(this.leftAdjustable=!1),this.leftAdjustable?this.rightAdjustable=!1:(this.leftAdjustable=!1,a=this.rightWardsSpaceChecking(l,t,n),this.rightAdjustable=a.length>0&&this.isRightAdjustable(a,n,e,t,s,i),this.spacedColumnValue!==d+c&&(this.rightAdjustable=!1))):(a=this.rightWardsSpaceChecking(l,t,n),this.rightAdjustable=a.length>0&&this.isRightAdjustable(a,n,e,t,s,i),this.spacedColumnValue!==d+c&&(this.rightAdjustable=!1),this.rightAdjustable&&(this.leftAdjustable=!1)),!this.rightAdjustable&&!this.leftAdjustable&&e>0){var p=this.getCellInstance(n.id).row,u=!1;this.startRow!==p&&(u=!0);for(var f=e;f>=0;f--){var g=this.getCellInstance(n.id).sizeY>1&&u?this.checkingElement:n;f!==p&&f===p-i&&0===this.collisions(f,t,s,i,g).length&&(u=!1,this.topAdjustable=!0,this.spacedRowValue=sf.base.isNullOrUndefined(this.spacedRowValue)?f:this.spacedRowValue,this.spacedColumnValue=t)}}return(this.rightAdjustable||this.leftAdjustable||this.topAdjustable)&&(r=!0,sf.base.isNullOrUndefined(this.spacedRowValue)&&(this.spacedRowValue=e)),r},e.prototype.updatePanelPosition=function(e,t,i){if(this.panels.length>0)for(var s=0;s<this.panels.length;s++)this.panels[s].id===e&&(sf.base.isNullOrUndefined(t)||(this.panels[s].col=t,this.panels[s].column=t),sf.base.isNullOrUndefined(i)||(this.panels[s].row=i));this.isDragged||this.isRefreshCalled||this.updatePanelProps(e)},e.prototype.rightWardsSpaceChecking=function(e,t,i){var s=this,n=[],o=[];if(e.forEach((function(e){var i=s.getCellInstance(e.id),o=i.col,r=i.sizeX;if(t<s.columns&&o>=t)if(r>1)for(var a=o;a<o+r;a++)n.push(a);else n.push(o)})),n.length>0)for(var r=t+1;r<=this.columns-1;r++)-1===n.indexOf(r)&&r!==t&&-1===o.indexOf(r)&&o.push(r);var a=this.getOccupiedColumns(i);return a.forEach((function(e){e>t&&-1!==o.indexOf(e)&&o.splice(o.indexOf(e),1)})),this.getOccupiedColumns(this.checkingElement).forEach((function(e){e>s.getCellInstance(i.id).col&&-1===a.indexOf(e)&&-1===o.indexOf(e)&&o.push(e)})),o=o.sort((function(e,t){return e-t}))},e.prototype.isRightAdjustable=function(e,t,i,s,n,o){var r;if(1===n&&1===o&&e.length>0)this.spacedColumnValue=e[0],r=!0;else if(n>1&&1===o)r=this.isXSpacingAvailable(e,n);else if(o>1)if(1===n){var a=void 0;if(e.length>=1&&(a=!0),a)for(var l=0;l<e.length;l++){for(var h=this.collisions(i,e[l],n,o,this.checkingElement),d=0;d<h.length;d++){this.getCellInstance(t.id).col!==e[l]&&h.splice(h.indexOf(h[d]),1)}if(0===h.length)return r=!0,this.spacedColumnValue=e[l],r;r=!1}}else r=this.replacable(e,n,i,o,t);return r},e.prototype.isXSpacingAvailable=function(e,t){for(var i=!1,s=[],n=0;n<e.length;n++)if(e[n+1]-e[n]==1||e[n+1]-e[n]==-1){if(s.push(e[n]),2===t&&s.push(e[n+1]),n===e.length-2&&(s.push(e[n+1]),s.length>t&&s.splice(-1)),s.length===t)return i=!0,this.spacedColumnValue=s.sort((function(e,t){return e-t}))[0],this.spacedColumnValue<0&&(this.spacedColumnValue=1),i}else s=[];return i},e.prototype.leftWardsSpaceChecking=function(e,t,i){var s=this,n=[],o=[];if(e.forEach((function(e){var i=s.getCellInstance(e.id),n=i.col,r=i.sizeX;if(t<=s.columns&&n<=t)if(r>1)for(var a=n;a<n+r;a++)o.push(a);else o.push(n)})),o.length>0)for(var r=0;r<=t;r++)-1===o.indexOf(r)&&r!==t&&-1===n.indexOf(r)&&n.push(r);var a=this.getOccupiedColumns(i);return a.forEach((function(e){e<t&&-1!==n.indexOf(e)&&n.splice(n.indexOf(e),1)})),this.getOccupiedColumns(this.checkingElement).forEach((function(e){e<s.getCellInstance(i.id).col&&-1===a.indexOf(e)&&-1===n.indexOf(e)&&n.push(e)})),n=(n=n.sort((function(e,t){return e-t}))).reverse()},e.prototype.isLeftAdjustable=function(e,t,i,s,n,o){var r;if(1===n&&1===o&&e.length>0)this.spacedColumnValue=e[0],r=!0;else if(n>1&&1===o)r=this.isXSpacingAvailable(e,n);else if(o>1)if(1===n){var a=void 0;if(e.length>=1&&(a=!0),a)for(var l=0;l<e.length;l++){if(0===this.collisions(i,e[l],n,o,this.checkingElement).length)return this.spacedColumnValue=e[l],r=!0;r=!1}}else r=this.replacable(e,n,i,o,t);return r},e.prototype.replacable=function(e,t,i,s,n){for(var o,r=[],a=0;a<e.length;a++){if(this.isXSpacingAvailable(e,t)){var l=[];if(l.push(this.checkingElement),l.push(n),0===r.length)return o=!0,this.spacedColumnValue=this.spacedColumnValue,o;o=!1}}return o},e.prototype.getOccupiedColumns=function(e){for(var t=[],i=this.getCellInstance(e.id),s=i.sizeX,n=i.col,o=n;o<n+s&&o<=this.columns;o++)t.push(o);return t},e.prototype.moveItemsUpwards=function(){if(this.allowFloating)for(var e=0,t=this.sortedArray.length;e<t;++e){var i=this.sortedArray[e];if(i)for(var s=0,n=i.length;s<n;++s){var o=i[s];o&&this.moveItemUpwards(o)}}},e.prototype.moveItemUpwards=function(e){if(this.allowFloating&&e!==this.mainElement){var t=this.getCellInstance(e.id).col,i=parseInt(e.getAttribute("data-sizeY"),10),s=parseInt(e.getAttribute("data-sizeX"),10),n=null,o=null,r=parseInt(e.getAttribute("data-row"),10)-1;if(!this.panelMove){var a=this.getCellInstance(e.id);r+1!=a.row&&(r=a.row)}for(;r>-1;){if(0!==this.collisions(r,t,s,i,e).length)break;n=r,o=t,--r}null!==n&&this.sortItem(e,n,o)}},e.prototype.updatePanelProps=function(e){if(this.isRenderComplete){var t=this.checkForChanges();this.panelsInitialModel=this.cloneModels(this.panels),t.length>0&&(this.isChanged&&-1===this.changedId.indexOf(e)&&this.changedId.push(e),this.dotnetRef.invokeMethodAsync("UpdatedPanelsValues",t))}},e.prototype.enableDraggingContent=function(e){for(var t=this,i=0;i<e.length;i++){var s=[".e-resize",".e-drag-restrict"],n=e[i];this.dragobj=new sf.base.Draggable(n,{preventDefault:!1,clone:!1,dragArea:this.element,isDragScroll:!0,handle:this.draggableHandle?this.draggableHandle:".e-panel",abort:s,dragStart:this.onDraggingStart.bind(this),dragStop:function(e){var i=t.getCellInstance(t.mainElement.id);t.allowPushing&&t.collisions(i.row,i.col,i.sizeX,i.sizeY,t.mainElement).length>0?(t.setHolderPosition(e),t.updatePanelPosition(i.id,i.col,i.row),t.updatePanelLayout(t.mainElement,i)):t.updatePanelPosition(i.id,i.col,i.row),t.mainElement=null;var s=t.getPanelBase(e);t.shadowEle&&sf.base.detach(t.shadowEle),sf.base.removeClass([t.element],["e-prevent"]),sf.base.removeClass([e.element],["e-dragging"]),t.shadowEle=null,e.element.classList.remove("e-dragging");var n=t.getRowColumnDragValues(e)[0],o=t.getRowColumnDragValues(e)[1],r=t.getCellInstance(e.element.id);if(t.allowPushing&&0===t.collisions(n,o,r.sizeX,r.sizeY,document.getElementById(s.id)).length)t.oldRowCol[e.element.id].row=n,t.oldRowCol[e.element.id].col=o,t.updatePanelPosition(e.element.id,o,n),t.sortedPanel();else{var a=t.getCellInstance(e.element.id);t.updatePanelPosition(a.id,a.col,a.row),t.sortedPanel()}var l=t.getCellInstance(e.element.id);t.setPanelPosition(e.element,l.row,l.col),t.updatePanels(),t.updateCloneArrayObject(),t.updatePanelProps(i.id),t.isDragged=!1,t.dragStopEventArgs={event:e.event,element:e.element},t.dotnetRef.invokeMethodAsync("UpdateMaximumRow",e.element.id,t.changedId),t.isChanged=!1,t.changedId=[],t.resizeEvents(),t.updateDragArea()},drag:function(e){t.draggedEventArgs={event:e.event,element:e.element,target:sf.base.closest(e.target,".e-panel")},t.onDragStart(e)}}),-1===this.dragCollection.indexOf(this.dragobj)&&this.dragCollection.push(this.dragobj)}},e.prototype.getPanelBase=function(e){for(var t,i=0;i<this.panelElements.length;i++)this.panelElements[i].id===(e.element&&e.element.id||e)&&(t=this.panelElements[i]);return t},e.prototype.updateCloneArrayObject=function(){this.cloneArray=this.sortedArray,this.cloneObject=JSON.parse(JSON.stringify(this.oldRowCol))},e.prototype.getRowColumnDragValues=function(e){var t=parseFloat(e.element.style.top),i=parseFloat(e.element.style.left);return[Math.round(t/(this.getCellSize()[1]+this.cellSpacing[1])),Math.round(i/(this.getCellSize()[0]+ +this.cellSpacing[0]))]},e.prototype.onDragStart=function(e){var t,i,s,n=s=this.getRowColumnDragValues(e)[1],o=this.getRowColumnDragValues(e)[0];if(!(n<0||o<0)){var r=this.getCellInstance(e.element.id);if(this.dotnetRef.invokeMethodAsync("SetDragPanelHeight",r.row,r.sizeY,1),this.updateDragArea(),this.allowPushing&&(this.updatePanelPosition(r.id,n,o),t=this.oldRowCol[e.element.id].col,i=this.oldRowCol[e.element.id].row,this.oldRowCol[e.element.id]={row:o,col:n},this.updateOldRowColumn(),(this.dragColumn!==t||this.dragRow!==i)&&(e.element.setAttribute("data-row",o.toString()),e.element.setAttribute("data-col",n.toString()),this.setHolderPosition(e),this.dragRow=i,this.dragColumn=t,this.startCol!==t&&(this.startRow=i),this.startRow!==i&&(this.startCol=t),this.allowPushing))){this.mainElement=e.element;var a=r;this.checkCollision=this.collisions(a.row,a.col,a.sizeX,a.sizeY,e.element),r.col>=this.checkColumnValue&&(this.checkCollision=[]),this.updatePanelLayout(e.element,r),this.moveItemsUpwards(),this.updatePanelProps(r.id)}this.oldRowCol[e.element.id].row===o&&this.oldRowCol[e.element.id].col===n||(this.updatePanelPosition(r.id,n,o),this.updatePanelProps(r.id)),this.startCol!==s&&(this.startCol=this.dragColumn=t,this.moveItemsUpwards()),this.allowPushing||this.setHolderPosition(e)}},e.prototype.bindEvents=function(){this.refreshListener=this.refresh.bind(this,!0),sf.base.EventHandler.add(window,"resize",this.refreshListener),this.resizeEvents()},e.prototype.refresh=function(e){if(this.dotnetRef&&document.getElementById(this.element.id)){if(this.panelsSizeY=0,this.updateDragArea(),this.isRefreshCalled=!0,this.isMediaQuery=this.checkMediaQuery(),!this.checkMediaQuery()){if(this.element.classList.contains("e-responsive")){sf.base.removeClass([this.element],["e-responsive"]);for(var t=0;t<this.element.querySelectorAll(".e-panel").length;t++){var i=this.element.querySelectorAll(".e-panel")[t];if(0!=this.panels.length){var s=this.getCellInstance(i.id),n=s.row,o=s.col;this.updatePanelPosition(s.id,o,n)}}}this.element.classList.add("e-responsive"),this.calculateCellSizeValue()}this.dotnetRef.invokeMethodAsync("CalculateSize",this.calculateCellSize(),this.isMediaQuery,e,this.contentHeight()),this.resizeEvents(),this.checkDragging(this.dragCollection),this.isRefreshCalled=!1}},e.prototype.checkDragging=function(e){for(var t=0;t<e.length;t++)e[t].destroy();!this.checkMediaQuery()&&this.allowDragging&&this.enableDraggingContent(this.panelElements)},e.prototype.resizeEvents=function(){if(this.allowResizing)for(var e=this.element.querySelectorAll(".e-panel .e-resize"),t=0;t<e.length;t++){var i="msie"===sf.base.Browser.info.name?"mousedown pointerdown":"mousedown";sf.base.EventHandler.add(e[t],i,this.downResizeHandler,this),"msie"!==sf.base.Browser.info.name&&sf.base.EventHandler.add(e[t],"touchstart",this.touchDownResizeHandler,this)}},e.prototype.touchDownResizeHandler=function(e){this.downHandler(e),this.lastMouseX=e.changedTouches[0].pageX,this.lastMouseY=e.changedTouches[0].pageY,this.isMouseMoveBound||(sf.base.EventHandler.add(document,"touchmove",this.touchMoveResizeHandler,this),this.isMouseMoveBound=!0),this.isMouseUpBound||(sf.base.EventHandler.add(document,"touchend",this.upResizeHandler,this),this.isMouseUpBound=!0)},e.prototype.upResizeHandler=function(e){if(!sf.base.isNullOrUndefined(this.downTarget)){this.upTarget=this.downTarget;var t=sf.base.closest(this.upTarget,".e-panel"),i=!0;if(t){sf.base.addClass([t],"e-panel-transition");var s="msie"===sf.base.Browser.info.name?"mousemove pointermove":"mousemove",n="msie"===sf.base.Browser.info.name?"mouseup pointerup":"mouseup";sf.base.EventHandler.remove(document,s,this.moveResizeHandler),sf.base.EventHandler.remove(document,n,this.upResizeHandler),"msie"!==sf.base.Browser.info.name&&(sf.base.EventHandler.remove(document,"touchmove",this.touchMoveResizeHandler),sf.base.EventHandler.remove(document,"touchend",this.upResizeHandler)),this.isMouseUpBound=!1,this.isMouseMoveBound=!1,this.shadowEle&&sf.base.detach(this.shadowEle),this.shadowEle=null;var o=this.getCellInstance(t.getAttribute("id"));this.updatePanelPosition(o.id,o.col,o.row)}sf.base.removeClass([t],["e-dragging"]),this.isResizing=!1,this.dotnetRef.invokeMethodAsync("TriggerResizeStart",i,t.id,"ResizeStop"),this.resizeCalled=!1,this.lastMouseX=this.lastMouseY=void 0,this.mOffX=this.mOffY=0,this.mainElement=null,this.allowFloating&&this.moveItemsUpwards(),this.isChanged=!1,this.updatePanels(),this.updateCloneArrayObject(),this.changedId.length>0&&this.dotnetRef.invokeMethodAsync("TriggerChange",i,this.changedId),this.changedId=[]}},e.prototype.moveResizeHandler=function(e){this.updateMaxTopLeft(e);var t=sf.base.closest(this.moveTarget,".e-panel");if(this.lastMouseX!==e.pageX&&this.lastMouseY!==e.pageY){this.updateResizeElement(t);var i=this.getCellInstance(t.getAttribute("id"));this.mouseX=e.pageX,this.mouseY=e.pageY;var s=this.mouseY-this.lastMouseY+this.mOffY,n=this.mouseX-this.lastMouseX+this.mOffX;this.mOffX=this.mOffY=0,this.lastMouseY=this.mouseY,this.lastMouseX=this.mouseX,this.resizingPanel(t,i,n,s)}},e.prototype.getMinWidth=function(e){return e.minSizeX*this.getCellSize()[0]},e.prototype.getMaxWidth=function(e){return e.maxSizeX*this.getCellSize()[0]},e.prototype.getMinHeight=function(e){return e.minSizeY*this.getCellSize()[1]},e.prototype.getMaxHeight=function(e){return e.maxSizeY*this.getCellSize()[1]},e.prototype.resizingPanel=function(e,t,i,s){var n=this.getCellInstance(e.id).sizeX,o=this.getCellInstance(e.id).sizeY,r=s,a=i;this.handleClass.indexOf("north")>=0&&(this.elementHeight-r<this.getMinHeight(t)?(s=this.elementHeight-this.getMinHeight(t),this.mOffY=r-s):t.maxSizeY&&this.elementHeight-r>this.getMaxHeight(t)?(s=this.elementHeight-this.getMaxHeight(t),this.mOffY=r-s):this.elementY+r<this.minTop&&(s=this.minTop-this.elementY,this.mOffY=r-s),this.elementY+=s,this.elementHeight-=s),this.handleClass.indexOf("south")>=0&&(this.elementHeight+r<this.getMinHeight(t)?(s=this.getMinHeight(t)-this.elementHeight,this.mOffY=r-s):t.maxSizeY&&this.elementHeight+r>this.getMaxHeight(t)?(s=this.getMaxHeight(t)-this.elementHeight,this.mOffY=r-s):this.elementY+this.elementHeight+r>this.maxTop&&(s=this.maxTop-this.elementY-this.elementHeight,this.mOffY=r-s),this.elementHeight+=s),this.handleClass.indexOf("west")>=0&&(this.elementWidth-a<this.getMinWidth(t)?(i=this.elementWidth-this.getMinWidth(t),this.mOffX=a-i):t.maxSizeX&&this.elementWidth-a>this.getMaxWidth(t)?(i=this.elementWidth-this.getMaxWidth(t),this.mOffX=a-i):this.elementX+a<this.minLeft&&(i=this.minLeft-this.elementX,this.mOffX=a-i),this.elementX+=i,this.elementWidth-=i),this.handleClass.indexOf("east")>=0&&(this.elementWidth+a<this.getMinWidth(t)?(i=this.getMinWidth(t)-this.elementWidth,this.mOffX=a-i):t.maxSizeX&&this.elementWidth+a>this.getMaxWidth(t)?(i=this.getMaxWidth(t)-this.elementWidth,this.mOffX=a-i):this.elementX+this.elementWidth+a>this.maxLeft&&(i=this.maxLeft-this.elementX-this.elementWidth,this.mOffX=a-i),this.elementWidth+=i);var l=this.getResizeRowColumn(t);if(l.col+l.sizeX>this.columns&&this.updatePanelSize(l.id,l.sizeX-1,null),this.shadowEle.style.top=l.row*this.getCellSize()[1]+l.row*this.cellSpacing[1]+"px",this.shadowEle.style.left=l.col*this.getCellSize()[0]+l.col*this.cellSpacing[0]+"px",this.shadowEle.style.height=l.sizeY*(this.getCellSize()[1]+this.cellSpacing[1])+"px",this.shadowEle.style.width=l.sizeX*(this.getCellSize()[0]+this.cellSpacing[0])+"px",n!==l.sizeX||o!==l.sizeY){n=l.sizeX,o=l.sizeY;var h=this.getCellInstance(e.id);this.updatePanelSize(e.id,h.sizeX,h.sizeY),this.updatePanelPosition(e.id,h.col,h.row),this.mainElement=e,this.updatePanelLayout(e,this.getCellInstance(e.id)),this.updateOldRowColumn(),this.sortedPanel()}},e.prototype.pixelsToColumns=function(e,t){var i=this.cellSize[0];return t?Math.ceil(e/i):Math.floor(e/i)},e.prototype.pixelsToRows=function(e,t){return t?Math.round(e/this.cellSize[1]):Math.round(e/(this.cellSize[1]+this.cellSpacing[0]))},e.prototype.getResizeRowColumn=function(e){var t=!1,i=e.col;-1!==["e-west","e-south-west"].indexOf(this.handleClass)&&(i=this.pixelsToColumns(this.elementX,!1));var s=e.row;-1!==["e-north"].indexOf(this.handleClass)&&(s=this.pixelsToRows(this.elementY,!1),this.previousRow!==s&&(this.previousRow=s,t=!0));var n=e.sizeX;-1===["e-north","e-south"].indexOf(this.handleClass)&&(n=this.pixelsToColumns(this.elementWidth-n*this.cellSpacing[1],!0));var o=e.sizeY;return-1===["e-east","e-west"].indexOf(this.handleClass)&&("e-north"!==this.handleClass||t)&&(o=this.pixelsToRows(this.elementHeight-o*this.cellSpacing[0],!0)),e.col+e.sizeX>this.columns&&(e.sizeX=e.sizeX-1),(s>-1&&i>-1&&n+i<=this.columns&&o+s<=this.rows&&0===this.collisions(s,i,n,o,this.getPanelBase(e.id)).length||this.allowPushing)&&(this.updatePanelSize(e.id,n,o),this.updatePanelPosition(e.id,i,s)),e},e.prototype.touchMoveResizeHandler=function(e){this.updateMaxTopLeft(e);var t=sf.base.closest(this.moveTarget,".e-panel");if(this.lastMouseX!==e.changedTouches[0].pageX&&this.lastMouseY!==e.changedTouches[0].pageY){this.updateResizeElement(t);var i=this.getCellInstance(t.getAttribute("id"));this.mouseX=e.changedTouches[0].pageX,this.mouseY=e.changedTouches[0].pageY;var s=this.mouseX-this.lastMouseX+this.mOffX,n=this.mouseY-this.lastMouseY+this.mOffY;this.mOffX=this.mOffY=0,this.lastMouseX=this.mouseX,this.lastMouseY=this.mouseY,this.resizingPanel(t,i,s,n)}},e.prototype.updateResizeElement=function(e){this.maxLeft=this.element.offsetWidth-1,this.maxTop=this.cellSize[1]*this.maxRows-1,sf.base.removeClass([e],"e-panel-transition"),sf.base.addClass([e],["e-dragging"]);for(var t=["e-east","e-west","e-north","e-south","e-south-east","e-north-east","e-north-west","e-south-west"],i=0;i<this.moveTarget.classList.length;i++)-1!==t.indexOf(this.moveTarget.classList[i])&&(this.handleClass=this.moveTarget.classList[i])},e.prototype.updateMaxTopLeft=function(e){var t=this;this.moveTarget=this.downTarget;var i=sf.base.closest(this.moveTarget,".e-panel"),s=!0;this.resizeTimeCount=setTimeout((function(){return t.resizeCall(s,i.id,"Resizing")}),100)},e.prototype.resizeCall=function(e,t,i){(this.isResizing&&this.resizeTimeCount>100||void 0===this.resizeTimeCount)&&(this.dotnetRef.invokeMethodAsync("TriggerResizeStart",e,t,i),this.resizeTimeCount=1)},e.prototype.downResizeHandler=function(e){this.downHandler(e),this.lastMouseX=e.pageX,this.lastMouseY=e.pageY;var t="msie"===sf.base.Browser.info.name?"mousemove pointermove":"mousemove",i="msie"===sf.base.Browser.info.name?"mouseup pointerup":"mouseup";this.isMouseMoveBound||(sf.base.EventHandler.add(document,t,this.moveResizeHandler,this),this.isMouseMoveBound=!0),this.isMouseUpBound||(sf.base.EventHandler.add(document,i,this.upResizeHandler,this),this.isMouseUpBound=!0)},e.prototype.downHandler=function(e){this.resizeCalled=!1,this.panelsInitialModel=this.cloneModels(this.panels);var t=sf.base.closest(e.currentTarget,".e-panel");this.isChanged=!0;var i=!0;this.dotnetRef.invokeMethodAsync("TriggerResizeStart",i,t.id,"ResizeStart"),this.isResizing=!0,this.downTarget=e.currentTarget,this.shadowEle=document.createElement("div"),this.shadowEle.classList.add("e-holder"),sf.base.addClass([this.element],["e-prevent"]),this.element.appendChild(this.shadowEle),this.elementX=parseFloat(t.style.left),this.elementY=parseFloat(t.style.top),this.elementWidth=t.offsetWidth,this.elementHeight=t.offsetHeight,this.originalWidth=this.getCellInstance(t.id).sizeX,this.originalHeight=this.getCellInstance(t.id).sizeY,this.previousRow=this.getCellInstance(t.id).row},e.prototype.onDraggingStart=function(e){this.isDragged=!0;var t=e;this.isChanged=!0,t.bindEvents(e.element),this.panelsInitialModel=this.cloneModels(this.panels),this.mainElement=e.element;var i=this.getCellInstance(e.element.id);this.startCol=this.dragColumn=i.col;var s=this.startRow=this.dragRow=parseInt(e.element.getAttribute("data-row"),10),n=parseInt(e.element.getAttribute("data-sizeY"),10);this.dotnetRef.invokeMethodAsync("TriggerDragStart",e.element.id,s,n,n),this.updateDragArea(),this.shadowEle=document.createElement("div"),this.shadowEle.classList.add("e-holder"),this.shadowEle.classList.add("e-holder-transition"),sf.base.setStyleAttribute(this.shadowEle,{position:"absolute"}),sf.base.addClass([this.element],["e-prevent"]),sf.base.addClass([e.element],["e-dragging"]),this.element.appendChild(this.shadowEle),this.shadowEle=document.querySelector(".e-holder"),this.shadowEle.style.height=this.getCellInstance(e.element.id).sizeY*this.cellSize[1]+"px",this.shadowEle.style.width=this.getCellInstance(e.element.id).sizeX*this.cellSize[0]+"px";var o=this.getCellInstance(e.element.id);this.updatePanelPosition(o.id,o.col,o.row),this.setPanelPosition(this.shadowEle,o.row,o.col)},e.prototype.updatePanelSize=function(e,t,i){if(this.panels.length>0)for(var s=0;s<this.panels.length;s++)this.panels[s].id===e&&(sf.base.isNullOrUndefined(t)||(this.panels[s].sizeX=t),sf.base.isNullOrUndefined(i)||(this.panels[s].sizeY=i))},e.prototype.updateDragArea=function(){this.dragCollection.forEach((function(e){e.setDragArea()}))},e.prototype.setPanelPosition=function(e,t,i){if(e){var s=this.getCellSize()[1],n=this.getCellSize()[0],o=0===i?0:i*(n+this.cellSpacing[0]),r=0===t?0:t*(s+this.cellSpacing[1]);sf.base.setStyleAttribute(e,{left:o+"px",top:r+"px"})}},e.prototype.calculateCellSizeValue=function(){this.cellSize=[],this.checkMediaQuery()?this.cellSize[1]=this.element.parentElement&&this.element.parentElement.offsetWidth/this.cellAspectRatio:(this.cellSize[0]=this.element.parentElement&&this.element.parentElement.offsetWidth,this.cellSize[0]=this.element.parentElement&&(this.element.parentElement.offsetWidth-(this.columns-1)*this.cellSpacing[0])/this.columns,this.cellSize[1]=this.cellSize[0]/this.cellAspectRatio)},e.prototype.cloneModels=function(e,t){void 0===t&&(t=[]);for(var i=0;i<e.length;i++)for(var s in t[i]||(t[i]={}),e[i])t[i][s]=e[i][s];return t},e.prototype.checkForChanges=function(){for(var e=[],t=0;t<this.panels.length;t++)this.panels[t].row===this.panelsInitialModel[t].row&&this.panels[t].col===this.panelsInitialModel[t].col&&this.panels[t].sizeX===this.panelsInitialModel[t].sizeX&&this.panels[t].sizeY===this.panelsInitialModel[t].sizeY||(e.push(this.panels[t]),this.panels[t].sizeY=this.panels[t].sizeY<this.panels[t].minSizeY?this.panels[t].minSizeY:this.panels[t].sizeY);return e},e.prototype.getCellSize=function(){return[this.cellSize[0],this.cellSize[1]]},e.prototype.destroy=function(){sf.base.EventHandler.remove(window,"resize",this.refreshListener),this.element.removeAttribute("style");for(var e=0;e<this.dragCollection.length;e++)this.dragCollection[e].destroy();this.removeAll()},e.prototype.setHolderPosition=function(e){var t=parseInt(e.element.getAttribute("data-sizeY"),10),i=parseInt(e.element.getAttribute("data-col"),10),s=parseInt(e.element.getAttribute("data-row"),10),n=parseInt(e.element.getAttribute("data-sizeX"),10),o=this.getCellSize()[0],r=this.getCellSize()[1],a=0===s?0:s*(r+this.cellSpacing[1]),l=0===i?0:i*(o+this.cellSpacing[0]),h=this.getCellSize()[1],d=this.getCellSize()[0];this.shadowEle.style.top=a+"px",this.shadowEle.style.left=l+"px",this.shadowEle.style.height=t*h+(t-1)*this.cellSpacing[1]+"px",this.shadowEle.style.width=n*d+(n-1)*this.cellSpacing[0]+"px"},e.prototype.contentHeight=function(){for(var e=[],t=0;t<this.element.querySelectorAll(".e-panel").length;t++){var i=this.element.querySelectorAll(".e-panel")[t];if(i.querySelector(".e-panel-header")){var s=window.getComputedStyle(i.querySelector(".e-panel-header")).height,n={id:i.id,height:s||"0px"};e.push(n)}}return e},e}();return{initialize:function(t,i,s,n){new e(t,i,s);var o=window.sfBlazor.getCompInstance(t);return sf.base.isNullOrUndefined(o)?null:o.initialize(n)},movePanel:function(e,t,i,s){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.movePanel(t,i,s)},removePanel:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.removePanel(t)},resizePanel:function(e,t,i,s){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.resizePanel(t,i,s)},removeAll:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.removeAll()},addPanel:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.addPanel(t)},onPropertyChange:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.onPropertyChange(t)},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.destroy()},refresh:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.refresh(!1)},resizeEvents:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.resizeEvents()},updatePanelModels:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.clearPanelElements(),i.getProperty(t),i.initialize(t))},setRootHeight:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.setRootHeight(t)}}}()},"./modules/sf-datepicker.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.DatePicker=function(){"use strict";var e="Tab",t=function(){function t(){this.mask="",this.hiddenMask="",this.validCharacters="dMyhmHts",this.isDayPart=!1,this.isMonthPart=!1,this.isYearPart=!1,this.isHourPart=!1,this.isMinutePart=!1,this.isSecondsPart=!1,this.isMilliSecondsPart=!1,this.monthCharacter="",this.periodCharacter="",this.isHiddenMask=!1,this.isComplete=!1,this.isNavigate=!1,this.navigated=!1,this.formatRegex=/E{3,4}|d{1,4}|M{1,4}|y{1,4}|H{1,2}|h{1,2}|m{1,2}|f{1,7}|FF|t{1,2}|s{1,2}|z{1,4}|'[^']*'|'[^']*'/g,this.isDeletion=!1,this.isShortYear=!1,this.isDeleteKey=!1,this.isDateZero=!1,this.isMonthZero=!1,this.isYearZero=!1,this.dayTypeCount=0,this.monthTypeCount=0,this.hourTypeCount=0,this.minuteTypeCount=0,this.secondTypeCount=0}return t.prototype.keydownHandler=function(t){switch(t.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":case"Home":case"End":case"Delete":"Delete"!==t.code&&t.preventDefault(),this.isPopupOpen||this.maskKeydownHandler(t);break;case e:case"shiftTab":this.maskKeydownHandler(t)}},t.prototype.clearHandler=function(){this.isDayPart=this.isMonthPart=this.isYearPart=this.isHourPart=this.isMinutePart=this.isSecondsPart=!1,this.updateValue()},t.prototype.updateValue=function(){this.monthCharacter=this.periodCharacter="";var e=this.dateformat.replace(this.formatRegex,this.formatCheck());this.isHiddenMask=!0,this.hiddenMask=this.dateformat.replace(this.formatRegex,this.formatCheck()),this.isHiddenMask=!1,this.previousHiddenMask=this.hiddenMask,this.previousValue=e},t.prototype.zeroCheck=function(e,t,i){var s=i;return e&&!t&&(s="0"),s},t.prototype.roundOff=function(e,t){for(var i=e.toString(),s=t-i.length,n="",o=0;o<s;o++)n+="0";return n+i},t.prototype.formatCheck=function(){var e=this;return function(t){var i,s,n=e.dayAbbreviatedName,o=Object.keys(n),r=e.dayName,a=Object.keys(r),l=e.monthAbbreviatedName,h=e.monthName,d=e.dayPeriod,c=Object.keys(d);switch(t){case"d":i=e.isDayPart?e.maskDateValue.getDate().toString():e.maskPlaceholderDictionary.Day.toString(),i=e.zeroCheck(e.isDateZero,e.isDayPart,i),2==e.dayTypeCount&&(e.isNavigate=!0,e.dayTypeCount=0);break;case"dd":i=e.isDayPart?e.roundOff(e.maskDateValue.getDate(),2):e.maskPlaceholderDictionary.Day.toString(),i=e.zeroCheck(e.isDateZero,e.isDayPart,i),2==e.dayTypeCount&&(e.isNavigate=!0,e.dayTypeCount=0);break;case"ddd":i=e.isDayPart&&e.isMonthPart&&e.isYearPart?n[o[e.maskDateValue.getDay()]].toString():e.maskPlaceholderDictionary.DayOfWeek.toString();break;case"dddd":i=e.isDayPart&&e.isMonthPart&&e.isYearPart?r[a[e.maskDateValue.getDay()]].toString():e.maskPlaceholderDictionary.DayOfWeek.toString();break;case"M":i=e.isMonthPart?(e.maskDateValue.getMonth()+1).toString():e.maskPlaceholderDictionary.Month.toString(),i=e.zeroCheck(e.isMonthZero,e.isMonthPart,i),2==e.monthTypeCount&&(e.isNavigate=!0,e.monthTypeCount=0);break;case"MM":i=e.isMonthPart?e.roundOff(e.maskDateValue.getMonth()+1,2):e.maskPlaceholderDictionary.Month.toString(),i=e.zeroCheck(e.isMonthZero,e.isMonthPart,i),2==e.monthTypeCount&&(e.isNavigate=!0,e.monthTypeCount=0);break;case"MMM":i=e.isMonthPart?l[e.maskDateValue.getMonth()]:e.maskPlaceholderDictionary.Month.toString();break;case"MMMM":i=e.isMonthPart?h[e.maskDateValue.getMonth()]:e.maskPlaceholderDictionary.Month.toString();break;case"yy":i=e.isYearPart?e.roundOff(e.maskDateValue.getFullYear()%100,2):e.maskPlaceholderDictionary.Year.toString(),i=e.zeroCheck(e.isYearZero,e.isYearPart,i),e.isYearPart&&(e.isNavigate=e.isShortYear=2===(e.maskDateValue.getFullYear()%100).toString().length);break;case"y":case"yyyy":i=e.isYearPart?e.roundOff(e.maskDateValue.getFullYear(),4):e.maskPlaceholderDictionary.Year.toString(),i=e.zeroCheck(e.isYearZero,e.isYearPart,i);break;case"h":i=e.isHourPart?(e.maskDateValue.getHours()%12||12).toString():e.maskPlaceholderDictionary.Hour.toString(),2==e.hourTypeCount&&(e.isNavigate=!0,e.hourTypeCount=0);break;case"hh":i=e.isHourPart?e.roundOff(e.maskDateValue.getHours()%12||12,2):e.maskPlaceholderDictionary.Hour.toString(),2==e.hourTypeCount&&(e.isNavigate=!0,e.hourTypeCount=0);break;case"H":i=e.isHourPart?e.maskDateValue.getHours().toString():e.maskPlaceholderDictionary.Hour.toString(),2==e.hourTypeCount&&(e.isNavigate=!0,e.hourTypeCount=0);break;case"HH":i=e.isHourPart?e.roundOff(e.maskDateValue.getHours(),2):e.maskPlaceholderDictionary.Hour.toString(),2==e.hourTypeCount&&(e.isNavigate=!0,e.hourTypeCount=0);break;case"m":i=e.isMinutePart?e.maskDateValue.getMinutes().toString():e.maskPlaceholderDictionary.Minute.toString(),2==e.minuteTypeCount&&(e.isNavigate=!0,e.minuteTypeCount=0);break;case"mm":i=e.isMinutePart?e.roundOff(e.maskDateValue.getMinutes(),2):e.maskPlaceholderDictionary.Minute.toString(),2==e.minuteTypeCount&&(e.isNavigate=!0,e.minuteTypeCount=0);break;case"s":i=e.isSecondsPart?e.maskDateValue.getSeconds().toString():e.maskPlaceholderDictionary.Second.toString(),2==e.secondTypeCount&&(e.isNavigate=!0,e.secondTypeCount=0);break;case"ss":i=e.isSecondsPart?e.roundOff(e.maskDateValue.getSeconds(),2):e.maskPlaceholderDictionary.Second.toString(),2==e.secondTypeCount&&(e.isNavigate=!0,e.secondTypeCount=0);break;case"f":i=Math.floor(e.maskDateValue.getMilliseconds()/100).toString();break;case"FF":case"ff":s=e.maskDateValue.getMilliseconds(),e.maskDateValue.getMilliseconds()>99&&(s=Math.floor(e.maskDateValue.getMilliseconds()/10)),i=e.roundOff(s,2);break;case"fff":i=e.roundOff(e.maskDateValue.getMilliseconds(),3);break;case"ffff":i=e.roundOff(e.maskDateValue.getMilliseconds(),4);break;case"fffff":i=e.roundOff(e.maskDateValue.getMilliseconds(),5);break;case"ffffff":i=e.roundOff(e.maskDateValue.getMilliseconds(),6);break;case"t":case"tt":i=e.maskDateValue.getHours()<12?d[c[0]]:d[c[1]];break;case"z":case"zz":i=e.offset.substring(0,3);break;case"zzz":case"zzzz":i=e.offset}if("ddd"===t&&(t="EEE"),"dddd"===t&&(t="EEEE"),i=void 0!==i?i:t.slice(1,t.length-1),e.isHiddenMask){for(var p="",u=0;u<i.length;u++)p+=t[0];return p}return i}},t.prototype.differenceCheck=function(){var e=this.element,t=e.selectionStart,i=e.value,s=this.previousValue.substring(0,t+this.previousValue.length-i.length),n=i.substring(0,t),o=!sf.base.isNullOrUndefined(n)&&n.length>0?new Date(+this.maskDateValue):new Date(this.options.valueString),r=new Date(o.getFullYear(),o.getMonth()+1,0).getDate();if(0===s.indexOf(n)&&(0===n.length||this.previousHiddenMask[n.length-1]!==this.previousHiddenMask[n.length])){for(var a=n.length;a<s.length;a++)""!==this.previousHiddenMask[a]&&this.validCharacters.indexOf(this.previousHiddenMask[a])>=0&&(this.isDeletion=this.handleDeletion(this.previousHiddenMask[a],!1));if(this.isDeletion)return}switch(this.previousHiddenMask[t-1]){case"d":var l=(this.isDayPart&&o.getDate().toString().length<2&&!this.isPersist()?10*o.getDate():0)+parseInt(n[t-1],10);if(this.isDateZero="0"==n[t-1],this.isFocused=!this.isFocused&&this.isFocused,this.navigated=!this.navigated&&this.navigated,isNaN(l))return;for(a=0;l>r;a++)l=parseInt(l.toString().slice(1),10);if(l>=1){if(o.setDate(l),this.isNavigate=2===l.toString().length,this.previousDate=new Date(o.getFullYear(),o.getMonth(),o.getDate()),o.getMonth()!==this.maskDateValue.getMonth())return;this.isDayPart=!0,this.dayTypeCount=this.dayTypeCount+1}else this.isDayPart=!1,this.dayTypeCount=this.isDateZero?this.dayTypeCount+1:this.dayTypeCount;break;case"M":var h=void 0;if(h=o.getMonth().toString().length<2&&!this.isPersist()?(this.isMonthPart?10*(o.getMonth()+1):0)+parseInt(n[t-1],10):parseInt(n[t-1],10),this.isFocused=!this.isFocused&&this.isFocused,this.navigated=!this.navigated&&this.navigated,this.isMonthZero="0"==n[t-1],isNaN(h)){var d=this.monthName,c=Object.keys(d);for(this.monthCharacter+=n[t-1].toLowerCase();this.monthCharacter.length>0;){a=0;for(var p=0,u=c;p<u.length;p++){u[p];if(0===d[a].toLowerCase().indexOf(this.monthCharacter))return o.setMonth(a),this.isMonthPart=!0,void(this.maskDateValue=o);a++}this.monthCharacter=this.monthCharacter.substring(1,this.monthCharacter.length)}}else{for(;h>12;){var f=h;0===(h=parseInt(h.toString().slice(1),10))&&(h=parseInt(f.toString().slice(0,1),10))}if(h>=1){if(o.setMonth(h-1),this.isNavigate=2===h.toString().length,o.getMonth()!==h-1&&(o.setDate(1),o.setMonth(h-1)),this.isDayPart){var g=new Date(this.previousDate.getFullYear(),this.previousDate.getMonth()+1,0).getDate(),m=new Date(o.getFullYear(),o.getMonth()+1,0).getDate();this.previousDate.getDate()==g&&m<=g&&o.setDate(m)}this.previousDate=new Date(o.getFullYear(),o.getMonth(),o.getDate()),this.isMonthPart=!0,this.monthTypeCount=this.monthTypeCount+1}else o.setMonth(0),this.isMonthPart=!1,this.monthTypeCount=this.isMonthZero?this.monthTypeCount+1:this.monthTypeCount}break;case"y":var v=(this.isYearPart&&o.getFullYear().toString().length<4&&!this.isShortYear?10*o.getFullYear():0)+parseInt(n[t-1],10);if(this.isShortYear=!1,this.isYearZero="0"==n[t-1],isNaN(v))return;for(;v>9999;)v=parseInt(v.toString().slice(1),10);v<1?this.isYearPart=!1:(o.setFullYear(v),4===v.toString().length&&(this.isNavigate=!0),this.previousDate=new Date(o.getFullYear(),o.getMonth(),o.getDate()),this.isYearPart=!0);break;case"h":if(this.hour=(this.isHourPart&&(o.getHours()%12||12).toString().length<2&&!this.isPersist()?10*(o.getHours()%12||12):0)+parseInt(n[t-1],10),this.isFocused=!this.isFocused&&this.isFocused,this.navigated=!this.navigated&&this.navigated,isNaN(this.hour))return;for(;this.hour>12;)this.hour=parseInt(this.hour.toString().slice(1),10);o.setHours(12*Math.floor(o.getHours()/12)+this.hour%12),this.isNavigate=2===this.hour.toString().length,this.isHourPart=!0,this.hourTypeCount=this.hourTypeCount+1;break;case"H":if(this.hour=(this.isHourPart&&o.getHours().toString().length<2&&!this.isPersist()?10*o.getHours():0)+parseInt(n[t-1],10),this.isFocused=!this.isFocused&&this.isFocused,this.navigated=!this.navigated&&this.navigated,isNaN(this.hour))return;for(a=0;this.hour>23;a++)this.hour=parseInt(this.hour.toString().slice(1),10);o.setHours(this.hour),this.isNavigate=2===this.hour.toString().length,this.isHourPart=!0,this.hourTypeCount=this.hourTypeCount+1;break;case"m":var b=(this.isMinutePart&&o.getMinutes().toString().length<2&&!this.isPersist()?10*o.getMinutes():0)+parseInt(n[t-1],10);if(this.isFocused=!this.isFocused&&this.isFocused,this.navigated=!this.navigated&&this.navigated,isNaN(b))return;for(a=0;b>59;a++)b=parseInt(b.toString().slice(1),10);o.setMinutes(b),this.isNavigate=2===b.toString().length,this.isMinutePart=!0,this.minuteTypeCount=this.minuteTypeCount+1;break;case"s":var y=(this.isSecondsPart&&o.getSeconds().toString().length<2&&!this.isPersist()?10*o.getSeconds():0)+parseInt(n[t-1],10);if(this.isFocused=!this.isFocused&&this.isFocused,this.navigated=!this.navigated&&this.navigated,isNaN(y))return;for(a=0;y>59;a++)y=parseInt(y.toString().slice(1),10);o.setSeconds(y),this.isNavigate=2===y.toString().length,this.isSecondsPart=!0,this.secondTypeCount=this.secondTypeCount+1;break;case"t":this.periodCharacter+=n[t-1].toLowerCase();var M=this.dayPeriod,C=Object.keys(M);for(a=0;this.periodCharacter.length>0;a++)(0===M[C[0]].toLowerCase().indexOf(this.periodCharacter)&&o.getHours()>=12||0===M[C[1]].toLowerCase().indexOf(this.periodCharacter)&&o.getHours()<12)&&(o.setHours((o.getHours()+12)%24),this.maskDateValue=o),this.periodCharacter=this.periodCharacter.substring(1,this.periodCharacter.length)}this.maskDateValue=o},t.prototype.maskKeydownHandler=function(t){var i=this.element;if(this.dayTypeCount=this.monthTypeCount=this.hourTypeCount=this.minuteTypeCount=this.secondTypeCount=0,"Delete"!==t.key){if(!(t.altKey||t.ctrlKey||"ArrowLeft"!==t.key&&"ArrowRight"!==t.key&&"shiftTab"!==t.key&&t.key!==e&&"shiftTab"!==t.action&&"End"!==t.key&&"Home"!==t.key)){var s=i.selectionStart,n=i.selectionEnd,o=i.value.length;if(0==s&&n==o&&(t.key===e&&!t.shiftKey||t.key===e&&t.shiftKey)){var r=t.key===e&&t.shiftKey?n:0;i.selectionStart=i.selectionEnd=r}if("End"===t.key||"Home"===t.key){var a="End"===t.key?o:0;i.selectionStart=i.selectionEnd=a}if(("ArrowLeft"===t.key||"ArrowRight"===t.key)&&0===s&&n===o){if("ArrowLeft"===t.key)for(var l=i.selectionEnd,h=l,d=l-1;h<this.hiddenMask.length||d>=0;h++,d--){if(h<this.hiddenMask.length&&-1!==this.validCharacters.indexOf(this.hiddenMask[h]))return void this.setSelection(this.hiddenMask[h]);if(d>=0&&-1!==this.validCharacters.indexOf(this.hiddenMask[d]))return void this.setSelection(this.hiddenMask[d])}else this.validCharacterCheck();return}this.navigateSelection(!!("ArrowLeft"===t.key||t.shiftKey&&t.key===e||"End"===t.key))}if(!(t.altKey||t.ctrlKey||"ArrowUp"!==t.key&&"ArrowDown"!==t.key)){s=i.selectionStart;var c="";-1!==this.validCharacters.indexOf(this.hiddenMask[s])&&(c=this.hiddenMask[s]),this.dateAlteration("ArrowDown"===t.key);var p=this.dateformat.replace(this.formatRegex,this.formatCheck());this.isHiddenMask=!0,this.hiddenMask=this.dateformat.replace(this.formatRegex,this.formatCheck()),this.isHiddenMask=!1,this.previousHiddenMask=this.hiddenMask,this.previousValue=p,i.value=p;for(h=0;h<this.hiddenMask.length;h++)if(c===this.hiddenMask[h]){s=h;break}i.selectionStart=s,this.validCharacterCheck()}}else this.isDeleteKey=!0},t.prototype.dateAlteration=function(e){var t=this.element.selectionStart,i="";if(-1!==this.validCharacters.indexOf(this.hiddenMask[t])){i=this.hiddenMask[t];var s=new Date(this.maskDateValue.getFullYear(),this.maskDateValue.getMonth(),this.maskDateValue.getDate(),this.maskDateValue.getHours(),this.maskDateValue.getMinutes(),this.maskDateValue.getSeconds());this.previousDate=new Date(this.maskDateValue.getFullYear(),this.maskDateValue.getMonth(),this.maskDateValue.getDate(),this.maskDateValue.getHours(),this.maskDateValue.getMinutes(),this.maskDateValue.getSeconds());var n=e?-1:1;switch(i){case"d":s.setDate(s.getDate()+n);break;case"M":var o=s.getMonth()+n;if(s.setDate(1),s.setMonth(o),this.isDayPart){var r=new Date(this.previousDate.getFullYear(),this.previousDate.getMonth()+1,0).getDate(),a=new Date(s.getFullYear(),s.getMonth()+1,0).getDate();this.previousDate.getDate()==r&&a<=r?s.setDate(a):s.setDate(this.previousDate.getDate())}else s.setDate(this.previousDate.getDate());this.previousDate=new Date(s.getFullYear(),s.getMonth(),s.getDate());break;case"y":s.setFullYear(s.getFullYear()+n);break;case"H":case"h":s.setHours(s.getHours()+n);break;case"m":s.setMinutes(s.getMinutes()+n);break;case"s":s.setSeconds(s.getSeconds()+n);break;case"t":s.setHours((s.getHours()+12)%24)}this.maskDateValue=s.getFullYear()>0?s:this.maskDateValue,-1!==this.validCharacters.indexOf(this.hiddenMask[t])&&this.handleDeletion(this.hiddenMask[t],!0)}},t.prototype.handleDeletion=function(e,t){switch(e){case"d":this.isDayPart=t;break;case"M":this.isMonthPart=t,t||(this.maskDateValue.setMonth(0),this.monthCharacter="");break;case"y":this.isYearPart=t;break;case"H":case"h":this.isHourPart=t,t||(this.periodCharacter="");break;case"m":this.isMinutePart=t;break;case"s":this.isSecondsPart=t;break;default:return!1}return!0},t.prototype.isPersist=function(){return this.isFocused||this.navigated},t.prototype.setDynamicValue=function(){this.maskDateValue=new Date(this.options.valueString),this.isDayPart=this.isMonthPart=this.isYearPart=this.isHourPart=this.isMinutePart=this.isSecondsPart=!0,this.updateValue(),this.validCharacterCheck()},t.prototype.validCharacterCheck=function(){var e=this.element,t=e.selectionStart;if("TimePicker"!==this.componentName&&t===this.hiddenMask.length&&this.mask===e.value&&(t=0),"TimePicker"===this.componentName){if(t===this.hiddenMask.length)return void e.setSelectionRange(0,t);if(this.isPopupOpen)return void e.setSelectionRange(0,this.hiddenMask.length)}for(var i=t,s=t-1;i<this.hiddenMask.length||s>=0;i++,s--){if(i<this.hiddenMask.length&&-1!==this.validCharacters.indexOf(this.hiddenMask[i]))return void this.setSelection(this.hiddenMask[i]);if(s>=0&&-1!==this.validCharacters.indexOf(this.hiddenMask[s]))return void this.setSelection(this.hiddenMask[s])}},t.prototype.setSelection=function(e){for(var t=this.element,i=-1,s=0,n=0;n<this.hiddenMask.length;n++)this.hiddenMask[n]===e&&(s=n+1,-1===i&&(i=n));i<0&&(i=0),t.setSelectionRange(i,s)},t.prototype.maskInputHandler=function(){var e,t=this.element,i=t.selectionStart,s="";-1!==this.validCharacters.indexOf(this.hiddenMask[i])&&(s=this.hiddenMask[i]),this.differenceCheck(),e=this.dateformat.replace(this.formatRegex,this.formatCheck()),this.isHiddenMask=!0,this.hiddenMask=this.dateformat.replace(this.formatRegex,this.formatCheck()),this.isDateZero=this.isMonthZero=this.isYearZero=!1,this.isHiddenMask=!1,this.previousHiddenMask=this.hiddenMask,this.previousValue=e,t.value=e;for(var n=0;n<this.hiddenMask.length;n++)if(s===this.hiddenMask[n]){i=n;break}if(t.selectionStart=i,this.validCharacterCheck(),(this.isNavigate||this.isDeletion)&&!this.isDeleteKey){var o=!this.isNavigate;this.isNavigate=this.isDeletion=!1,this.navigateSelection(o)}this.isDeleteKey&&(this.isDeletion=!1),this.isDeleteKey=!1},t.prototype.navigateSelection=function(e){var t=this.element,i=t.selectionStart,s=t.selectionEnd,n=e?i-1:s;for(this.navigated=!0;n<this.hiddenMask.length&&n>=0;){if(this.validCharacters.indexOf(this.hiddenMask[n])>=0){this.setSelection(this.hiddenMask[n]);break}n+=e?-1:1}},t.prototype.createMask=function(e){this.options=e;this.element;this.isDayPart=this.isMonthPart=this.isYearPart=this.isHourPart=this.isMinutePart=this.isSecondsPart=!1,this.dateformat=this.options.format;var t=this.dateformat.replace(this.formatRegex,this.formatCheck());return this.isHiddenMask=!0,this.hiddenMask=this.dateformat.replace(this.formatRegex,this.formatCheck()),this.isHiddenMask=!1,this.previousHiddenMask=this.hiddenMask,this.mask=this.previousValue=t,this.options.value&&(this.value=this.options.value,this.navigated=this.options.navigated,this.setDynamicValue()),t=this.dateformat.replace(this.formatRegex,this.formatCheck()),{currentMaskFormat:this.mask,inputElementValue:t}},t.prototype.updateCurrentValue=function(e){this.element.value=e},t}(),i="e-datepicker",s=function(){function e(e,i,s,n,o){window.sfBlazor=window.sfBlazor,this.maskObj=new t,this.componentName="DatePicker",this.dataId=e,this.containerElement=i,this.element=s,this.options=o,window.sfBlazor.setCompInstance(this),this.dotNetRef=n,this.maskObj.element=this.element,this.enableMask=this.options.enableMask,this.enableMask&&(this.maskObj.dateformat=this.options.format,this.maskObj.isRendered=this.options.isRendered,this.maskObj.componentName=this.componentName,this.maskObj.offset=this.options.offset,this.maskObj.floatLabelType=this.options.floatLabelType,this.maskObj.maskPlaceholderDictionary=this.options.maskPlaceholderDictionary,this.maskObj.dayAbbreviatedName=this.options.dayAbbreviatedName,this.maskObj.dayName=this.options.dayName,this.maskObj.dayPeriod=this.options.dayPeriod,this.maskObj.monthAbbreviatedName=this.options.monthAbbreviatedName,this.maskObj.monthName=this.options.monthName,this.maskObj.maskDateValue=sf.base.isNullOrUndefined(this.options.value)?new Date:new Date(this.options.value.toString()),this.maskObj.maskDateValue.setMonth(0),this.maskObj.maskDateValue.setHours(0),this.maskObj.maskDateValue.setMinutes(0),this.maskObj.maskDateValue.setSeconds(0),this.maskObj.previousDate=new Date(this.maskObj.maskDateValue.getFullYear(),this.maskObj.maskDateValue.getMonth(),this.maskObj.maskDateValue.getDate(),this.maskObj.maskDateValue.getHours(),this.maskObj.maskDateValue.getMinutes(),this.maskObj.maskDateValue.getSeconds()),this.removeEventListener(),this.addEventListener())}return e.prototype.initialize=function(){this.defaultKeyConfigs={altUpArrow:"alt+uparrow",altDownArrow:"alt+downarrow",escape:"escape",enter:"enter",controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",shiftTab:"shift+tab",tab:"tab"},this.defaultKeyConfigs=sf.base.extend(this.defaultKeyConfigs,this.options.keyConfigs),new sf.base.KeyboardEvents(this.element,{eventName:"keydown",keyAction:this.inputKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs}),this.index=this.options.showClearButton?2:1,sf.base.EventHandler.add(this.element,"blur",this.inputBlurHandler,this)},e.prototype.bindInputEvent=function(){this.enableMask?sf.base.EventHandler.add(this.element,"input",this.inputHandler,this):sf.base.EventHandler.remove(this.element,"input",this.inputHandler)},e.prototype.addEventListener=function(){sf.base.EventHandler.add(this.element,"mouseup",this.mouseUpHandler,this),sf.base.EventHandler.add(this.element,"keydown",this.keydownHandler,this),sf.base.EventHandler.add(this.element,"focus",this.focusHandler,this),this.bindInputEvent()},e.prototype.removeEventListener=function(){sf.base.EventHandler.remove(this.element,"mouseup",this.mouseUpHandler),sf.base.EventHandler.remove(this.element,"keydown",this.keydownHandler),sf.base.EventHandler.remove(this.element,"focus",this.focusHandler)},e.prototype.mouseUpHandler=function(e){this.enableMask&&(this.maskObj.element=this.element,e.preventDefault(),this.maskObj.validCharacterCheck())},e.prototype.focusHandler=function(){if(this.enableMask){var e=this.element;this.options.value||!this.options.placeholder||this.maskObj.mask!==e.value&&""!==e.value||("Auto"===this.options.floatLabelType||"Never"===this.options.floatLabelType||this.options.placeholder)&&(this.maskObj.updateCurrentValue(this.maskObj.mask),e.selectionStart=0,e.selectionEnd=e.value.length)}},e.prototype.inputHandler=function(){this.enableMask&&(this.maskObj.element=this.element,this.maskObj.maskInputHandler())},e.prototype.keydownHandler=function(e){this.enableMask&&(this.maskObj.element=this.element,this.maskObj.keydownHandler(e))},e.prototype.inputKeyActionHandle=function(e){var t,i=this.element;if(this.popupObj&&this.popupObj.element.classList.contains("e-popup")&&this.options.isDatePopup){var s=this.tableBodyElement.querySelector("tr td.e-focused-date"),n=this.tableBodyElement.querySelector("tr td.e-selected");this.tableBodyElement.focus(),t={Action:e.action,Key:e.key,Events:e,SelectDate:n?n.id:null,FocusedDate:s?s.id:null,classList:n?n.classList.toString():s?s.classList.toString():"e-cell",Id:s?s.id:n?n.id:null,TargetClassList:this.calendarElement.classList.toString()}}else t={Action:e.action,Key:e.key,Events:e};this.options.isDatePopup&&this.maskObj.isPopupOpen&&"Enter"==e.key&&(i.value=null),this.isDisposed||this.dotNetRef.invokeMethodAsync("InputKeyActionHandle",t,i.value),"select"!==e.action&&this.popupObj&&document.body.contains(this.popupObj.element)&&e.preventDefault()},e.prototype.inputBlurHandler=function(e){this.isCalendar()&&document.activeElement===this.element&&this.dotNetRef.invokeMethodAsync("HidePopup",e)},e.prototype.renderPopup=function(e,t,i,s){if(this.options=s,this.maskObj.isPopupOpen=!0,this.popupHolder=t,e){var n=document.getElementById(e.id);n&&sf.base.remove(n)}this.createCalendar(e,s),sf.base.Browser.isDevice&&(this.mobilePopupContainer=sf.base.createElement("div",{className:"e-datepick-mob-popup-wrap"}),document.body.appendChild(this.mobilePopupContainer)),("model"===i.appendTo&&this.mobilePopupContainer?this.mobilePopupContainer:document.body).appendChild(this.popupContainer),this.popupObj.refreshPosition(this.element),s.isDatePopup||this.setScrollPosition();var o={name:"FadeIn",duration:sf.base.Browser.isDevice?0:300};1e3===this.options.zIndex?this.popupObj.show(new sf.base.Animation(o),this.element):this.popupObj.show(new sf.base.Animation(o),null),this.setOverlayIndex(this.mobilePopupContainer,this.popupObj.element,this.modal,sf.base.Browser.isDevice),sf.base.EventHandler.add(document,"mousedown touchstart",this.documentHandler,this)},e.prototype.setOverlayIndex=function(e,t,i,s){if(s&&!sf.base.isNullOrUndefined(t)&&!sf.base.isNullOrUndefined(i)&&!sf.base.isNullOrUndefined(e)){var n=parseInt(t.style.zIndex,10)?parseInt(t.style.zIndex,10):1e3;i.style.zIndex=(n-1).toString(),e.style.zIndex=n.toString()}},e.prototype.closePopup=function(e,t){this.options=t,this.maskObj.isPopupOpen=!1,this.closeEventCallback(e)},e.prototype.CalendarScrollHandler=function(e){var t="Up"===e.scrollDirection||"Down"===e.scrollDirection;this.isTouchstart&&t&&(this.dotNetRef.invokeMethodAsync("ScrollToNextSection","Up"==e.scrollDirection),this.isTouchstart=!1)},e.prototype.TouchStartHandler=function(e){this.isTouchstart=!0},e.prototype.createCalendar=function(e,t){var s=this;this.popupContainer=e,this.calendarElement=this.popupContainer.firstElementChild,this.tableBodyElement=sf.base.select("tbody",this.calendarElement);var n=i+" e-date-modal",o="e-date-overflow";t.isDatePopup?this.calendarElement.querySelector("table tbody").className="":(n="e-datetimepicker e-time-modal",o="e-time-overflow"),sf.base.Browser.isDevice&&(this.modal=sf.base.createElement("div"),this.modal.className=n,document.body.classList.add(o),this.modal.style.display="block",document.body.appendChild(this.modal)),this.popupObj=new sf.popups.Popup(this.popupContainer,{width:t.isDatePopup?"auto":this.setPopupWidth(this.options.width),relateTo:sf.base.Browser.isDevice?document.body:this.containerElement,position:sf.base.Browser.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},offsetY:4,targetType:"container",enableRtl:t.enableRtl,zIndex:t.zIndex,collision:sf.base.Browser.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},open:function(){sf.base.Browser.isDevice&&(s.touchModule=new sf.base.Touch(s.calendarElement.children[1].querySelector(".e-content.e-month"),{scroll:s.CalendarScrollHandler.bind(s)}),sf.base.EventHandler.add(s.calendarElement.children[1].querySelector(".e-content.e-month"),"touchstart",s.TouchStartHandler,s)),document.activeElement!==s.element&&t.isDatePopup&&(s.defaultKeyConfigs=sf.base.extend(s.defaultKeyConfigs,t.keyConfigs),s.calendarElement.children[1].firstElementChild.focus(),new sf.base.KeyboardEvents(s.calendarElement.children[1].firstElementChild,{eventName:"keydown",keyAction:s.CalendarKeyActionHandle.bind(s),keyConfigs:s.defaultKeyConfigs}),new sf.base.KeyboardEvents(s.containerElement.children[s.index],{eventName:"keydown",keyAction:s.CalendarKeyActionHandle.bind(s),keyConfigs:s.defaultKeyConfigs}))},close:function(){s.popupHolder.appendChild(s.popupContainer),s.popupObj&&s.popupObj.destroy(),s.isDisposed||s.dotNetRef.invokeMethodAsync("ClosePopup").catch((function(){})),s.popupObj=null},targetExitViewport:function(){sf.base.Browser.isDevice||s.isDisposed||s.dotNetRef.invokeMethodAsync("HidePopup",null)}}),t.isDatePopup||(this.popupObj.element.style.maxHeight="240px")},e.prototype.getPopupHeight=function(){var e=parseInt("240px",10),t=this.popupContainer.getBoundingClientRect().height;return t>e?e:t},e.prototype.setScrollPosition=function(){if((this.popupContainer&&this.popupContainer.querySelector(".e-navigation")||this.popupContainer.querySelector(".e-active"))&&!this.options.isDatePopup){var e=this.popupContainer.querySelector(".e-navigation")||this.popupContainer.querySelector(".e-active");this.findScrollTop(e)}},e.prototype.findScrollTop=function(e){var t=this.getPopupHeight(),i=e.nextElementSibling,s=i?i.offsetTop:e.offsetTop,n=e.getBoundingClientRect().height;s+e.offsetTop>t?this.popupContainer.scrollTop=i?s-(t/2+n/2):s:this.popupContainer.scrollTop=0},e.prototype.closeEventCallback=function(e){var t=e;this.isCalendar()&&!t.cancel&&this.popupObj&&this.popupObj.hide(),sf.base.Browser.isDevice&&this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null),sf.base.Browser.isDevice&&(sf.base.removeClass([document.body],"e-date-overflow"),sf.base.removeClass([document.body],"e-time-overflow"),sf.base.isNullOrUndefined(this.mobilePopupContainer)||(this.mobilePopupContainer.remove(),this.mobilePopupContainer=null)),sf.base.EventHandler.remove(document,"mousedown touchstart",this.documentHandler),sf.base.Browser.isDevice&&this.options.allowEdit&&!this.options.readonly&&this.element.removeAttribute("readonly")},e.prototype.documentHandler=function(e){!sf.base.isNullOrUndefined(this.popupObj)&&(this.containerElement.contains(e.target)||this.popupObj.element&&this.popupObj.element.contains(e.target))&&"touchstart"!==e.type&&e.preventDefault();var t=this.containerElement.querySelector(".e-clear-icon"),s=this.tableBodyElement?this.tableBodyElement.querySelector(".e-selected"):null,n=this.options.value?this.options.value.toString():null,o=e.target;o==t&&s&&sf.base.removeClass([this.tableBodyElement.querySelector(".e-selected")],"e-selected"),sf.base.closest(o,"."+i+".e-popup-wrapper")||sf.base.closest(o,".e-datetimepicker.e-popup-wrapper")||sf.base.closest(o,".e-input-group")===this.containerElement||o.classList.contains("e-day")||this.isDisposed?sf.base.closest(o,"."+i+".e-popup-wrapper")&&(o.classList.contains("e-day")&&!sf.base.isNullOrUndefined(e.target.parentElement)&&e.target.parentElement.classList.contains("e-selected")&&sf.base.closest(o,".e-content")&&sf.base.closest(o,".e-content").classList.contains("e-"+this.options.depth.toLowerCase())&&!this.isDisposed||sf.base.closest(o,".e-footer-container")&&o.classList.contains("e-today")&&o.classList.contains("e-btn")&&+new Date(n)==+this.generateTodayVal(new Date(n))&&!this.isDisposed)&&this.dotNetRef.invokeMethodAsync("HidePopup",e):(this.dotNetRef.invokeMethodAsync("HidePopup",e),this.element.focus())},e.prototype.generateTodayVal=function(e){var t=new Date;return e?(t.setHours(e.getHours()),t.setMinutes(e.getMinutes()),t.setSeconds(e.getSeconds()),t.setMilliseconds(e.getMilliseconds())):t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0),t},e.prototype.isCalendar=function(){return this.popupContainer&&this.popupContainer.classList.contains("e-popup-wrapper")},e.prototype.CalendarKeyActionHandle=function(e){switch(e.action){case this.defaultKeyConfigs.escape:this.isCalendar()?this.dotNetRef.invokeMethodAsync("HidePopup",e):this.element.blur();break;case this.defaultKeyConfigs.enter:this.isCalendar()||this.dotNetRef.invokeMethodAsync("ShowPopup",e);break;case this.defaultKeyConfigs.tab:this.dotNetRef.invokeMethodAsync("HidePopup",e)}},e.prototype.setWidth=function(e){return e="number"==typeof e?sf.base.formatUnit(e):"string"==typeof e?e.match(/px|%|em/)?e:sf.base.formatUnit(e):"100%"},e.prototype.setPopupWidth=function(e){(e=this.setWidth(e)).indexOf("%")>-1&&(e=(this.containerElement.getBoundingClientRect().width*parseFloat(e)/100).toString()+"px");return e},e.prototype.updateAriaActiveDescendant=function(e){this.element.setAttribute("aria-activedescendant",e)},e}();return{initialize:function(e,t,i,n,o){if(i&&e){var r=new s(e,t,i,n,o);if(r.initialize(),o.enableMask)return r.maskObj.createMask(o)}return{currentMaskFormat:null,inputElementValue:o.value}},createMask:function(e,t){return e&&t.enableMask?window.sfBlazor.getCompInstance(e).maskObj.createMask(t):{currentMaskFormat:null,inputElementValue:t.value}},updateCurrentValue:function(e,t){window.sfBlazor.getCompInstance(e).maskObj.updateCurrentValue(t)},renderPopup:function(e,t,i,s,n){var o=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(o)&&t&&i&&o.renderPopup(t,i,s,n)},updateScrollPosition:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.setScrollPosition()},closePopup:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(s)&&t&&s.closePopup(t,i)},focusIn:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.element.focus()},updateAriaActiveDescendant:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.updateAriaActiveDescendant(t)},focusOut:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.element.blur()},destroy:function(e,t,i,s,n){var o=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(o)&&t&&t instanceof HTMLElement&&i&&(o.isDisposed=!0,o.closePopup(s,n))}}}()},"./modules/sf-daterangepicker.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.DateRangePicker=function(){"use strict";var e="e-left-calendar",t="e-right-calendar",i="e-calendar",s="e-header",n="e-focused-date",o=function(){function o(e,t,i,s,n){window.sfBlazor=window.sfBlazor,this.dataId=e,this.containerElement=t,this.element=i,this.options=n,window.sfBlazor.setCompInstance(this),this.dotNetRef=s}return o.prototype.initialize=function(){this.isMobile=window.matchMedia("(max-width:550px)").matches,this.defaultKeyConfigs={altUpArrow:"alt+uparrow",altDownArrow:"alt+downarrow",altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow",escape:"escape",enter:"enter",controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",shiftTab:"shift+tab"},new sf.base.KeyboardEvents(this.element,{eventName:"keydown",keyAction:this.keyInputHandler.bind(this),keyConfigs:this.defaultKeyConfigs})},o.prototype.keyInputHandler=function(i){var s;if(this.popupObj&&this.popupObj.element.classList.contains("e-popup")){var o=sf.base.closest(i.target,"."+t),r=(o=sf.base.isNullOrUndefined(o)?this.tableElement.querySelector("."+e):o).classList.contains(e),a=this.tableElement.querySelector("tr td."+n),l=this.tableElement.querySelectorAll("tr td.e-selected"),h=l[l.length-1],d=a&&sf.base.closest(a,"tbody")||h&&sf.base.closest(h,"tbody");!r&&this.leftCalendar.querySelectorAll("tr td."+n).length>0&&sf.base.removeClass(this.leftCalendar.querySelectorAll("tr td."+n),n),d&&d.focus(),s={Action:i.action,Key:i.key,Events:i,SelectDate:h?h.id:null,FocusedDate:a?a.id:null,classList:h?h.classList.toString():a?a.classList.toString():"e-cell",Id:a?a.id:h?h.id:null,TargetClassList:this.calendarElement.classList.toString(),IsLeftCalendar:r,FocusedDateClassList:a?a.classList.toString():null}}else s={Action:i.action,Key:i.key,Events:i};this.isDisposed||this.dotNetRef.invokeMethodAsync("InputKeyActionHandle",s),"select"!==i.action&&this.popupObj&&document.body.contains(this.popupObj.element)&&i.preventDefault()},o.prototype.getAppendToElement=function(e){var t=document.body;return"model"===e&&this.mobilePopupContainer?t=this.mobilePopupContainer:"body"===e||sf.base.isNullOrUndefined(e)||0===e.length||(t=sf.base.select(e,document)||t),t},o.prototype.renderPopup=function(e,t,i,s){this.options=s,this.popupHolder=t;var n=document.body.querySelector(".e-daterangepicker.e-popup-open");n&&sf.base.remove(n),this.createCalendar(e,s,i.appendTo),sf.base.Browser.isDevice&&(this.mobilePopupContainer=this.popupHolder.querySelector(".e-daterangepick-mob-popup-wrap"),document.body.appendChild(this.mobilePopupContainer)),this.getAppendToElement(i.appendTo).appendChild(this.popupContainer),this.presetHeight(),1e3===this.options.zIndex?this.popupObj.show(null,this.element):this.popupObj.show(null,null),this.setOverlayIndex(this.mobilePopupContainer,this.popupObj.element,this.modal,sf.base.Browser.isDevice),sf.base.Browser.isDevice&&(document.body.className+=" e-range-overflow",this.popupHolder.style.display="block",this.popupHolder.style.visibility="visible"),sf.base.EventHandler.add(document,"mousedown touchstart",this.documentHandler,this)},o.prototype.setOverlayIndex=function(e,t,i,s){if(s&&!sf.base.isNullOrUndefined(t)&&!sf.base.isNullOrUndefined(i)&&!sf.base.isNullOrUndefined(e)){var n=parseInt(t.style.zIndex,10)?parseInt(t.style.zIndex,10):1e3;i.style.zIndex=(n-1).toString(),e.style.zIndex=n.toString()}},o.prototype.closePopup=function(e,t){this.options=t,this.closeEventCallback(e)},o.prototype.refreshPopup=function(){this.isPopupOpen()&&this.popupObj.refreshPosition()},o.prototype.CalendarScrollHandler=function(e){var t="Right"===e.scrollDirection||"Left"===e.scrollDirection;this.isTouchstart&&t&&(this.dotNetRef.invokeMethodAsync("ScrollToNextSection","Left"==e.scrollDirection),this.isTouchstart=!1)},o.prototype.TouchStartHandler=function(e){this.isTouchstart=!0},o.prototype.createCalendar=function(n,o,r){var a=this;this.popupContainer=n,o.isCustomWindow&&(this.calendarElement=this.popupContainer.firstElementChild,this.tableElement=this.calendarElement,this.calendarElement.querySelector("table tbody").className="");var l=this.popupContainer.getBoundingClientRect().width;sf.base.Browser.isDevice&&(this.modal=this.popupHolder.querySelector(".e-range-modal"),this.modal.style.display="block",document.body.appendChild(this.modal)),o.isCustomWindow&&(sf.base.Browser.isDevice?(this.deviceCalPrevIcon=this.calendarElement.querySelector("."+i+" .e-prev"),this.deviceCalNextIcon=this.calendarElement.querySelector("."+i+" .e-next"),this.calendarElement.querySelector("."+i+" .e-icon-container")&&sf.base.remove(this.calendarElement.querySelector("."+i+" .e-icon-container")),this.calendarElement.querySelector("table").setAttribute("tabindex","-1"),this.calendarElement.querySelector("."+i+" ."+s).appendChild(this.deviceCalNextIcon),this.calendarElement.querySelector("."+i+" ."+s).appendChild(this.deviceCalPrevIcon),sf.base.prepend([this.deviceCalPrevIcon],this.calendarElement.querySelector("."+i+" ."+s)),this.calendarElement.querySelector("."+i+" .e-footer-container")&&sf.base.remove(this.calendarElement.querySelector("."+i+" .e-footer-container"))):(this.leftCalPrevIcon=this.calendarElement.querySelector("."+e+" .e-prev"),this.leftCalNextIcon=this.calendarElement.querySelector("."+e+" .e-next"),this.leftTitle=this.calendarElement.querySelector("."+e+" .e-title"),this.calendarElement.querySelector("."+e+" .e-icon-container")&&sf.base.remove(this.calendarElement.querySelector("."+e+" .e-icon-container")),this.calendarElement.querySelector("."+e+" ."+s).appendChild(this.leftCalNextIcon),this.calendarElement.querySelector("."+e+" ."+s).appendChild(this.leftCalPrevIcon),sf.base.prepend([this.leftCalPrevIcon],this.calendarElement.querySelector("."+e+" ."+s)),this.rightCalPrevIcon=this.calendarElement.querySelector("."+t+" .e-prev"),this.rightCalNextIcon=this.calendarElement.querySelector("."+t+" .e-next"),this.rightTitle=this.calendarElement.querySelector("."+t+" .e-title"),this.calendarElement.querySelector("."+t+" .e-icon-container")&&sf.base.remove(this.calendarElement.querySelector("."+t+" .e-icon-container")),this.calendarElement.querySelector("table").setAttribute("tabindex","-1"),this.calendarElement.querySelector("."+t+" ."+s).appendChild(this.rightCalNextIcon),this.calendarElement.querySelector("."+t+" ."+s).appendChild(this.rightCalPrevIcon),sf.base.prepend([this.rightCalPrevIcon],this.calendarElement.querySelector("."+t+" ."+s)),this.calendarElement.querySelector("."+e+" .e-footer-container")&&sf.base.remove(this.calendarElement.querySelector("."+e+" .e-footer-container")),this.calendarElement.querySelector("."+t+" .e-footer-container")&&sf.base.remove(this.calendarElement.querySelector("."+t+" .e-footer-container")))),this.popupObj=new sf.popups.Popup(this.popupContainer,{relateTo:this.isMobile?document.body:this.containerElement,position:this.isMobile?sf.base.isUndefined(o.presets&&o.presets[0]&&o.presets[0].start&&o.presets[0].end&&o.presets[0].label)?{X:"center",Y:"center"}:{X:"left",Y:"bottom"}:o.enableRtl?{X:"left",Y:"bottom"}:{X:"right",Y:"bottom"},offsetX:this.isMobile||o.enableRtl?0:-l,offsetY:4,collision:this.isMobile?sf.base.isUndefined(o.presets&&o.presets[0]&&o.presets[0].start&&o.presets[0].end&&o.presets[0].label)?{X:"fit",Y:"fit"}:{X:"fit"}:{X:"fit",Y:"flip"},targetType:this.isMobile?"container":"relative",enableRtl:o.enableRtl,zIndex:o.zIndex,open:function(){sf.base.Browser.isDevice&&(a.touchModule=new sf.base.Touch(a.calendarElement.children[1].querySelector(".e-content.e-month"),{scroll:a.CalendarScrollHandler.bind(a)}),sf.base.EventHandler.add(a.calendarElement.children[1].querySelector(".e-content.e-month"),"touchstart",a.TouchStartHandler,a)),a.leftCalendar=a.calendarElement.querySelector("."+e),a.rightCalendar=a.calendarElement.querySelector("."+t);var i=a.popupObj&&a.popupObj.element.querySelector(".e-date-range-container");if(!a.isMobile&&i){new sf.base.KeyboardEvents(a.leftCalendar,{eventName:"keydown",keyAction:a.keyInputHandler.bind(a),keyConfigs:a.defaultKeyConfigs}),new sf.base.KeyboardEvents(a.rightCalendar,{eventName:"keydown",keyAction:a.keyInputHandler.bind(a),keyConfigs:a.defaultKeyConfigs});var s=a.popupContainer.querySelector(".e-cancel.e-btn"),n=a.popupContainer.querySelector(".e-apply.e-btn");new sf.base.KeyboardEvents(s,{eventName:"keydown",keyAction:a.keyInputHandler.bind(a),keyConfigs:{tab:"tab",altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow"}}),new sf.base.KeyboardEvents(n,{eventName:"keydown",keyAction:a.keyInputHandler.bind(a),keyConfigs:{altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow"}}),a.leftCalendar.querySelector("table").focus()}},close:function(){a.popupHolder.appendChild(a.popupContainer),a.popupObj&&a.popupObj.destroy(),a.isDisposed||a.dotNetRef.invokeMethodAsync("ClosePopup").catch((function(){})),a.popupObj=null},targetExitViewport:function(){sf.base.Browser.isDevice||a.isDisposed||a.dotNetRef.invokeMethodAsync("HidePopup",null)}})},o.prototype.closeEventCallback=function(e){!e.cancel&&this.popupObj&&this.popupObj.hide(),sf.base.Browser.isDevice&&this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null),sf.base.Browser.isDevice&&(sf.base.removeClass([document.body],"e-range-overflow"),sf.base.isNullOrUndefined(this.mobilePopupContainer)||(this.mobilePopupContainer.remove(),this.mobilePopupContainer=null)),sf.base.EventHandler.remove(document,"mousedown touchstart",this.documentHandler)},o.prototype.documentHandler=function(e){if(!sf.base.isNullOrUndefined(this.popupObj)){var t=e.target;this.containerElement.contains(t)&&(sf.base.isNullOrUndefined(this.popupObj)||sf.base.closest(t,".e-daterangepicker.e-popup"))||"touchstart"!==e.type&&"mousedown"===e.type&&e.preventDefault(),sf.base.closest(t,".e-daterangepicker.e-popup")||sf.base.closest(t,".e-input-group")===this.containerElement||sf.base.closest(t,".e-daterangepicker.e-popup")&&!t.classList.contains("e-day")||this.isPopupOpen()&&document.body.contains(this.popupObj.element)&&this.applyFunction(e)}},o.prototype.applyFunction=function(e){"touchstart"!==e.type&&e.preventDefault(),document.activeElement!==this.element&&(this.element.focus(),sf.base.addClass([this.containerElement],["e-input-focus"])),this.dotNetRef.invokeMethodAsync("HidePopup",null),sf.base.closest(e.target,".e-input-group")||document.activeElement===this.element&&(sf.base.removeClass([this.containerElement],["e-input-focus"]),this.element.blur())},o.prototype.presetHeight=function(){var e=this.popupObj&&this.popupObj.element.querySelector(".e-presets"),t=this.popupObj&&this.popupObj.element.querySelector(".e-date-range-container");sf.base.isNullOrUndefined(e)||sf.base.isNullOrUndefined(t)||(e.style.height=t.getBoundingClientRect().height+"px")},o.prototype.getPopupHeight=function(){var e=parseInt("240px",10),t=this.popupContainer.getBoundingClientRect().height;return t>e?e:t},o.prototype.setScrollPosition=function(){if(!sf.base.isNullOrUndefined(this.popupContainer.querySelector(".e-active"))&&this.options.presets){var e=this.popupContainer.querySelector(".e-active");this.findScrollTop(e)}},o.prototype.findScrollTop=function(e){var t=this.getPopupHeight(),i=e.nextElementSibling,s=i?i.offsetTop:e.offsetTop,n=e.getBoundingClientRect().height;s+e.offsetTop>t?this.popupContainer.scrollTop=i?s-(t/2+n/2):s:this.popupContainer.scrollTop=0},o.prototype.isPopupOpen=function(){return!(sf.base.isNullOrUndefined(this.popupObj)||!this.popupObj.element.classList.contains("e-popup"))},o.prototype.updateAriaActiveDescendant=function(e){this.element.setAttribute("aria-activedescendant",e)},o.prototype.removeFocusDate=function(e,t){var i=e.querySelectorAll("tr td.e-focused-date");i.length>0&&sf.base.removeClass(i,n);for(var s=e.querySelectorAll("tr td"),o=0;o<s.length;o++)s[o].getAttribute("id").split("_")[0]==t&&(s[o].classList.contains("e-disabled")?sf.base.addClass(i,n):(sf.base.removeClass(s,n),sf.base.addClass([s[o]],n),sf.base.closest(s[o],"table").focus()))},o}();return{initialize:function(e,t,i,s,n){i&&new o(e,t,i,s,n).initialize()},renderPopup:function(e,t,i,s,n){var o=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(o)&&t&&i&&o.renderPopup(t,i,s,n)},updateScrollPosition:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.setScrollPosition()},updateAriaActiveDescendant:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.updateAriaActiveDescendant(t)},removeFocusDate:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(s)&&t&&s.removeFocusDate(t,i)},closePopup:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(s)&&t&&s.closePopup(t,i)},refreshPopup:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.refreshPopup()},focusIn:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.element.focus()},focusOut:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.element.blur()},destroy:function(e,t,i,s,n){var o=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(o)&&t&&t instanceof HTMLElement&&i&&(o.isDisposed=!0,o.closePopup(s,n))}}}()},"./modules/sf-diagramcomponent.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Diagram=function(){"use strict";var e=function(){function e(e,t,i,s){this.x=Number.MAX_VALUE,this.y=Number.MAX_VALUE,this.width=0,this.height=0,void 0===e||void 0===t?(e=t=Number.MAX_VALUE,i=s=0):(void 0===i&&(i=0),void 0===s&&(s=0)),this.x=e,this.y=t,this.width=i,this.height=s}return e.empty=new e(Number.MAX_VALUE,Number.MIN_VALUE,0,0),e}(),t=function(e,t){this.width=e,this.height=t};function s(e,t){for(var i=t.split(";"),s=0;s<i.length;s++){var n=i[s].split(":");2===n.length&&(e.style[n[0].trim()]=n[1].trim())}}function n(e,t){for(var i=Object.keys(t),n=0;n<i.length;n++)"style"!==i[n]?e.setAttribute(i[n],t[i[n]]):s(e,t[i[n]])}function o(e,t,i){for(var s=e;s&&!(i?s.id===t:r(s,t));)s=s.parentNode;return s}function r(e,t){return(" "+("object"===i(e.className)?e.className.animVal:e.className)+" ").indexOf(" "+t+" ")>-1}var a=function(){function e(e,t){var i=this;this.over=function(e){for(var t,s=document.getElementById("clonedNode"),n=i.symbolPaletteInstance.length-1;n>=0;n--)if(e.dragData.draggable.id===i.symbolPaletteInstance[n].id){t=i.symbolPaletteInstance[n].componentInstance;break}if(t&&t.invokeMethodAsync("SymbolPaletteDragEnter",e.target.id.split("_")[0]),s){sf.base.remove(s);var o=document.getElementsByClassName("e-cloneproperties e-draganddrop e-dragclone");o[0].style.width="1px",o[0].style.height="1px"}},this.drop=function(e){for(var t,s=i.symbolPaletteInstance.length-1;s>=0;s--)if(e.dragData.draggable.id===i.symbolPaletteInstance[s].id){t=i.symbolPaletteInstance[s].componentInstance;break}var n=o(e.target,"e-diagram");if(n&&e.event.changedTouches&&e.event.changedTouches.length>0){var r=void 0;for(s=i.symbolPaletteInstance.length-1;s>=0;s--){r=i.symbolPaletteInstance[s].componentInstance;break}r&&window.sfBlazor.Diagram.invokeDiagramEvents(e.event,r,void 0,e),t&&t.invokeMethodAsync("SymbolPaletteDrop",n.id,!0)}else t&&t.invokeMethodAsync("SymbolPaletteDrop",n.id,!1);sf.base.remove(e.droppedElement)},this.out=function(e){for(var t,s=i.symbolPaletteInstance.length-1;s>=0;s--)if(e.target&&e.target.children[0].id===i.symbolPaletteInstance[s].id||e.target&&e.target.parentNode&&e.target.parentNode.parentNode&&e.target.parentNode.parentNode.parentElement&&e.target.parentNode.parentNode.parentElement.id===i.symbolPaletteInstance[s].id||i.draggable.target&&i.draggable.target.id==i.symbolPaletteInstance[s].id){t=i.symbolPaletteInstance[s].componentInstance;break}t&&(e.evt.changedTouches&&e.evt.changedTouches.length>0&&window.sfBlazor.Diagram.invokeDiagramEvents(e.evt,t,void 0,e),t.invokeMethodAsync("SymbolPaletteDragLeave"))},this.helper=function(e){var t=document.getElementsByClassName("e-control e-accordion")[0],i=sf.base.createElement("div",{className:"e-cloneproperties e-draganddrop e-dragclone",styles:'color:"transparent" height:"auto",  width:'+t.offsetWidth}),s=document.getElementById("previewID");return null===s&&(s=e.sender.target),s?(i.setAttribute("id","helperElement"),document.body.appendChild(i),i):null},this.dragStart=function(e){e.bindEvents(e.dragElement)},this.drag=function(e){if(o(e.target,"e-diagram")){if(e.event.touches&&e.event.touches.length>0){var t=void 0;for(r=i.symbolPaletteInstance.length-1;r>=0;r--)if(e.element.id===i.symbolPaletteInstance[r].id){t=i.symbolPaletteInstance[r].componentInstance;break}t&&window.sfBlazor.Diagram.invokeDiagramEvents(e.event,t,void 0,e)}}else{for(var s=document.getElementById("previewID"),n=void 0,r=i.symbolPaletteInstance.length-1;r>=0;r--)if(e.element.id===i.symbolPaletteInstance[r].id){n=i.symbolPaletteInstance[r].allowDrag;break}if(s){s.style.visibility="";var a=s.cloneNode(!0);a.style.display="Block",a.style.visibility=!0,a.setAttribute("class","e-cloneproperties e-draganddrop e-dragclone"),a.setAttribute("id","clonedNode");var l=document.getElementById("helperElement");l&&l.children[0]&&l.removeChild(l.children[0]),n||(l.style.opacity="0"),l.appendChild(a)}}},this.dragStop=function(e){var t=document.getElementsByClassName("e-cloneproperties e-draganddrop e-dragclone");if(t.length>0&&(t[0].style.width="1px",t[0].style.height="1px"),t.length>1)for(var s=t.length-1;s>0;s--)"helperElement"==t[s].id&&t[s].remove();if(!o(e.target,"e-diagram")){var n=document.getElementById("helperElement");n&&n.remove();for(var r=void 0,a=i.symbolPaletteInstance.length-1;a>=0;a--)if(e.element.id===i.symbolPaletteInstance[a].id){r=i.symbolPaletteInstance[a].componentInstance;break}r&&r.invokeMethodAsync("ElementDropToOutSideDiagram")}},this.symbolPaletteInstance=t,e&&this.initializeDrag(e)}return e.prototype.initializeDrag=function(e){var t=e.children[0];this.draggable=new sf.base.Draggable(t,{dragTarget:".e-symbol-draggable",helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,preventDefault:!1});for(var i=document.getElementsByClassName("e-control e-diagram e-lib e-droppable e-tooltip"),s=0;s<i.length;s++)this.droppable=new sf.base.Droppable(i[s],{accept:".e-dragclone",drop:this.drop,over:this.over,out:this.out});for(var n=document.getElementsByClassName("e-acrdn-header-content"),o=0;o<n.length;o++)n[o].style.textDecoration="inherit"},e.prototype.destroy=function(){this.draggable.destroy()},e}(),l=function(e,t,i,s){return new(i||(i=Promise))((function(n,o){function r(e){try{l(s.next(e))}catch(e){o(e)}}function a(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){e.done?n(e.value):new i((function(t){t(e.value)})).then(r,a)}l((s=s.apply(e,t||[])).next())}))},h=function(e,t){var i,s,n,o,r={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,s&&(n=2&o[0]?s.return:o[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,o[1])).done)return n;switch(s=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,s=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(n=r.trys,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){r=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){r.label=o[1];break}if(6===o[0]&&r.label<n[1]){r.label=n[1],n=o;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(o);break}n[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],s=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},d=!1,c=!1,p=!1,u=!1,f=!1,g=!1,m=!1,v="",b={},y=!1,M=!1,C="Arial",w="black",S="Center",N=12,x="None",O="Wrap",E="WrapWithOverflow",I="CollapseSpace";return{createHtmlElement:function(e,t){var i=sf.base.createElement(e);return t&&this.setAttribute(i,t),i},setAttributeSvg:function(e,t){for(var i=Object.keys(t),s=0;s<i.length;s++)"style"!==i[s]?e.setAttribute(i[s],t[i[s]]):this.applyStyleAgainstCsp(e,t[i[s]])},applyStyleAgainstCsp:function(e,t){for(var i=t.split(";"),s=0;s<i.length;s++){var n=i[s].split(":");2===n.length&&(e.style[n[0].trim()]=n[1].trim())}},setCanvasSize:function(e,t,i){e&&(e.setAttribute("width",t.toString()),e.setAttribute("height",i.toString()))},getHTMLLayer:function(e){var t=null;window[e+"_htmlLayer"]?t=window[e+"_htmlLayer"]:(t=this.getDiagramElement(e).getElementsByClassName("e-html-layer")[0],window[e+"_htmlLayer"]=t);return t},getDiagramElement:function(e,t){var i;return t&&(i=document.getElementById(t)),"msie"===sf.base.Browser.info.name||"edge"===sf.base.Browser.info.name?i?i.querySelector("#"+e):document.getElementById(e):i?i.querySelector("#"+CSS.escape(e)):document.getElementById(e)},createCanvas:function(e,t,i){var s=this.createHtmlElement("canvas",{id:e});return this.setCanvasSize(s,t,i),s},setAttribute:function(e,t){for(var i=Object.keys(t),s=0;s<i.length;s++)e.setAttribute(i[s],t[i[s]])},createMeasureElements:function(e,t,i,s,n,o,r,a,l,h){this.updateZoomPanTool(e),this.updateInnerLayerSize(t,i,s,void 0,r,a,l,h),n&&o&&this.onAddWireEvents(n,o);if(window.measureElement)window.measureElement.usageCount+=1;else{var d=this.createHtmlElement("div",{id:"measureElement",style:"visibility:hidden ; height: 0px ; width: 0px; overflow: hidden;"}),c=this.createHtmlElement("span",{style:"display:inline-block ; line-height: normal"});d.appendChild(c);var p;p=this.createHtmlElement("img",{}),d.appendChild(p);var u=document.createElementNS("http://www.w3.org/2000/svg","svg");u.setAttribute("xlink","http://www.w3.org/1999/xlink"),d.appendChild(u);var f=document.createElementNS("http://www.w3.org/2000/svg","path");u.appendChild(f);var g=document.createElementNS("http://www.w3.org/2000/svg","text");g.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),u.appendChild(g),window.measureElement=d,window.measureElement.usageCount=1,document.body.appendChild(d);window.measureElementCount?window.measureElementCount++:window.measureElementCount=1}},updateZoomPanTool:function(e){m=e},updateGridlines:function(e,t,i,s){var n=document.getElementById(e);if(n&&(n.setAttribute("width",t.width.toString()),n.setAttribute("height",t.height.toString()),n.children.length>0))for(var o=0;o<n.children.length;o++)i&&i.length?n.children[o].setAttribute("d",i[o]):s&&s.length&&(n.children[o].setAttribute("cx",s[o].x.toString()),n.children[o].setAttribute("cy",s[o].y.toString()))},updatePageBreaks:function(e,t,i,s,n,o,r,a,l,h,d,c){var p=document.getElementById(e),u=document.getElementById(t);if(p.children.length>0)for(var f=0;f<p.children.length;f++)p.children[f].setAttribute("x",i),p.children[f].setAttribute("y",s),p.children[f].setAttribute("width",n),p.children[f].setAttribute("height",o);if(u&&u.children.length>0){var g=0;for(f=0;f<u.children.length;f++)if(-1!=u.children[f].id.indexOf("_backgroundLayerrect"))u.children[f].setAttribute("x",i),u.children[f].setAttribute("y",s),u.children[f].setAttribute("width",n),u.children[f].setAttribute("height",o),u.children[f].setAttribute("transform",r);else if(c){var m=(a[0+g]+l)*d,v=(a[1+g]+h)*d,b=(a[2+g]+l)*d,y=(a[3+g]+h)*d;u.children[f].setAttribute("x1",m),u.children[f].setAttribute("y1",v),u.children[f].setAttribute("x2",b),u.children[f].setAttribute("y2",y),g+=4}}},updateInnerLayerSize:function(e,t,i,s,n,o,r,a,l,h){var d;if(h&&(t=(d=this.measureScrollValues(h)).width,i=d.height),null!=e&&null!=t&&null!=i&&e.length>0)for(var c=void 0,p=0;p<e.length-1;p++)if(c=document.getElementById(e[p]),p>=e.length-6){if(-1!=e[p].indexOf("_pattern"))this.updateGridlines(e[p],o,r,a);else if(-1!=e[p].indexOf("gridline")&&n&&c){var u=n.scale,f=-n.tx*u,m=-n.ty*u,v="translate("+n.tx*u+","+n.ty*u+")";c.setAttribute("transform",v),c.children[0].setAttribute("x",f.toString()),c.children[0].setAttribute("y",m.toString())}else if(n&&c){u=n.scale;var b="translate("+n.tx*u+","+n.ty*u+"),scale("+u+")";c.setAttribute("transform",b);var y=e[p].split("_")[0],M=document.getElementById(y+"_diagram_PolygonHelper");M&&M.setAttribute("transform",b);var C=document.getElementById(y+"_diagram_ConnectorHelper");C&&C.setAttribute("transform",b);var w=document.getElementById(y+"_htmlLayer_div"),S="position: absolute; top: 0px; left: 0px; pointer-events: all; transform: translate("+n.tx*u+"px,"+n.ty*u+"px) scale("+u+")";w.setAttribute("style",S);var N=document.getElementById(y+"_SelectorElement");if(l&&N&&N.children.length>0&&N.children.length==l.length)for(var x=0;x<N.children.length;x++)if("line"==N.children[x].tagName){var O=l[x],E=O.startPoint.x+O.x,I=O.startPoint.y+O.y,D=O.endPoint.x+O.x,T=O.endPoint.y+O.y;N.children[x].setAttribute("x1",E.toString()),N.children[x].setAttribute("y1",I.toString()),N.children[x].setAttribute("x2",D.toString()),N.children[x].setAttribute("y2",T.toString()),N.children[x].setAttribute("transform","rotate("+O.angle+" "+(O.x+O.width*O.pivotX)+" "+(O.y+O.height*O.pivotY)+")")}else if("path"==N.children[x].tagName){var j=l[x];N.children[x].setAttribute("transform","rotate("+j.angle+","+(j.x+j.width*j.pivotX)+","+(j.y+j.height*j.pivotY)+")translate("+j.x+","+j.y+")")}else if("rect"==N.children[x].tagName){var A=l[x];N.children[x].setAttribute("x",A.x),N.children[x].setAttribute("y",A.y),N.children[x].setAttribute("width",A.width),N.children[x].setAttribute("height",A.height),N.children[x].setAttribute("transform","rotate("+A.angle+","+(A.x+A.width*A.pivotX)+","+(A.y+A.height*A.pivotY)+")")}else"circle"==N.children[x].tagName&&(N.children[x].setAttribute("cx",l[x].cx),N.children[x].setAttribute("cy",l[x].cy),N.children[x].setAttribute("visibility",l[x].visible?"visible":"hidden"))}}else c&&(c.style.width=t,c.style.height=i);if(g&&(g=!1),!h&&null!=e&&e.length>0){var z=document.getElementById(e[e.length-1]);return this.onChangeScrollValues(z,s)}return d},onChangeScrollValues:function(e,t){return d&&(d=!1),null!=e&&null!=t&&null!=t.x&&null!=t.y?(c&&(c=!1,p=!0),e.scrollLeft=t.x,e.scrollTop=t.y,this.measureScrollValues(e.id)):null},measureScrollValues:function(t){var i=document.getElementById(t);return new e(i.scrollLeft,i.scrollTop,i.scrollWidth,i.scrollHeight)},measurePath:function(t){if(t){window.measureElement.style.visibility="visible";var i=window.measureElement.children[2],s=this.getChildNode(i)[0];s.setAttribute("d",t);var n=s.getBBox(),o=new e(n.x,n.y,n.width,n.height);return window.measureElement.style.visibility="hidden",o}return new e(0,0,0,0)},openUrl:function(e){return l(this,void 0,void 0,(function(){return h(this,(function(t){return window.open(e,"_blank"),[2]}))}))},textEdit:function(e,t,i,s,o,r,a,l){var h=this,d=document.getElementById("diagram_editTextBoxDiv");e.id=l;var c=document.getElementById("diagram_editBox"),p=e.content;if(!d&&!c){d=this.createHtmlElement("div",{}),c=this.createHtmlElement("textarea",{});var u=document.getElementsByClassName("e-control e-diagram e-lib e-droppable e-tooltip"),f=0;if(u.length>0)for(var g=0;g<u.length;g++){u[g].children[0].id.split("_")[0]==i&&(f=g)}u[f].children[0].appendChild(d),d.appendChild(c),c.appendChild(document.createTextNode(p)),this.diagram_editTextBoxDiv=d,this.diagram_editBox=c}var m=e.bounds.width<o.width?e.bounds.width:o.width;m=90>m?90:m;var v=this.measureHtmlText(e.style,t,p,void 0,void 0,m);0==v.width&&0==v.height&&(v.width=50,v.height=12);var b=a?r.scale:1;v.width=Math.max(v.width,50),n(d,{id:"diagram_editTextBoxDiv",style:"position: absolute;left:"+((s.x+r.tx)*r.scale-v.width/2*b-2.5)+"px;top:"+((s.y+r.ty)*r.scale-v.height/2*b-3)+"px;width:"+(v.width+1)*b+"px;height:"+v.height*b+"px; containerName:temp;"});var y=e.style;n(c,{id:"diagram_editBox",style:"width:"+(v.width+1)*b+"px;height:"+v.height*b+"px;line-height: normal;resize: none;outline: none;overflow: hidden;;font-family:"+y.fontFamily+";font-size:"+y.fontSize*b+"px;text-align:"+e.style.textAlign.toLocaleLowerCase()+";",class:"e-diagram-text-edit"}),c.style.fontWeight=y.bold?"bold":"",c.style.fontStyle=y.italic?"italic":"",c.style.lineHeight=(1.2*y.fontSize+"px;").toString();var M=document.getElementById(e.id+"_text");M&&M.setAttribute("visibility","hidden"),c.style.textDecoration=y.textDecoration?y.textDecoration:"",c.addEventListener("input",(function(i){h.inputChange(i,e,t,o,s,r,a)})),c.select(),window.annotation=e},inputChange:function(e,t,i,s,n,o,r){var a,l,h,d,c,p=this.diagram_editBox,u=this.diagram_editTextBoxDiv,f=p.value,g=f.split("\n");a=(a=s.width<t.bounds.width?s.width:t.bounds.width)>90?a:90,c=this.measureHtmlText(t.style,i,f,void 0,void 0,a),l=Number(p.style.fontSize.split("px")[0]),g.length>1&&""===g[g.length-1]&&(c.height=c.height+l);var m=r?o.scale:1;d=(90>(d=c.width)?90:d)*m,h=(12>c.height?12:c.height)*m,u.style.left=(n.x+o.tx)*o.scale-d/2-2.5+"px",u.style.top=(n.y+o.ty)*o.scale-h/2-3+"px",u.style.width=d+"px",u.style.height=h+"px",p.style.minHeight="12px",p.style.minWidth="90px",p.style.width=d+"px",p.style.height=h+"px"},measureHtmlText:function(e,t,i,s,n,o){var r={},a=this.createHtmlElement("span",{style:"display:inline-block; line-height: normal"});return e.bold&&(a.style.fontWeight="bold"),e.italic&&(a.style.fontStyle="italic"),void 0!==s&&(a.style.width=s.toString()+"px"),void 0!==n&&(a.style.height=n.toString()+"px"),void 0!==o&&(a.style.maxWidth=o.toString()+"px"),a.style.fontFamily=e.fontFamily,a.style.fontSize=e.fontSize+"px",a.style.color=e.color,a.textContent=i,a.style.whiteSpace=this.whiteSpaceToString(t,e.textWrapping),a.style.wordBreak=void 0!==o?"break-word":this.wordBreakToString(e.textWrapping),document.body.appendChild(a),r.width=a.offsetWidth,r.height=a.offsetHeight,document.body.removeChild(a),r},getChildNode:function(e){var t,i=[];if("msie"===sf.base.Browser.info.name||"edge"===sf.base.Browser.info.name)for(var s=0;s<e.childNodes.length;s++)1===(t=e.childNodes[s]).nodeType&&i.push(t);else i=e.children;return i},measureBounds:function(e,t,i,s){return l(this,void 0,void 0,(function(){var n,o,r,a,l,d,c,p,u,f,g,m,b,y,M,C,w,S,N,x,O,E,I,D,T,j,A,z;return h(this,(function(h){switch(h.label){case 0:if(null!=s)for(o=document.getElementsByClassName("e-acrdn-panel e-content-hide"),n=[],z=0;z<o.length;z++)n[z]=o[z].style.display,o[z].style.display="block";if(r={},a={},l={},d={},c={},p="measureElement",e)for(S=Object.keys(e).map((function(t){return[e[t],t]})),window[p].style.visibility="visible",N=window[p].children[2],u=this.getChildNode(N)[0],E=0;E<S.length;E++)"Path"==S[E][0]?(m=S[E][1],u.setAttribute("d",m),g=u.getBBox(),A={x:g.x,y:g.y,width:g.width,height:g.height},a[m]=A):-1!=S[E][0].indexOf("GetBoundingClientRect")&&((f=document.getElementById(S[E][1]))&&(g=f.getBoundingClientRect(),a[S[E][0]]={x:g.x,y:g.y,width:g.width,height:g.height}),"GetBoundingClientRect"==S[E][0]&&(v=S[E][1],a.GetScrollerBounds=this.measureScrollValues(S[E][1])));if(t)for(S=Object.keys(t).map((function(e){return[t[e],e]})),E=0;E<S.length;E++)m=S[E][1],b=t[m].content,y=t[m].style,M=t[m].bounds,C=t[m].nodeSize,M.width=null==M.width?void 0:M.width,M.height=null==M.height?void 0:M.height,C.width=null==C.width?void 0:C.width,C.height=null==C.height?void 0:C.height,l[m]=this.measureText(M,y,b,M.width||C.width);return i&&(w=Object.keys(i).map((function(e){return[i[e],e]}))).length>0?(0,S={},[4,this.loadImage(w,0,S)]):[3,2];case 1:h.sent(),d=S,h.label=2;case 2:if(s&&(S=Object.keys(s).map((function(e){return[s[e],e]})),window[p].style.visibility="visible",N=window[p].children[2],S.length>0)){for(x={},O={},E=0;E<S.length;E++)I=S[E][0],D=document.getElementById(I),(T=D.cloneNode(!0)).id=T.id+"_copy",N.appendChild(T),j=T.getBoundingClientRect(),A=N.getBoundingClientRect(),O={x:j.left-A.left,y:j.top-A.top,width:j.width,height:j.height},x[S[E][1]]=O,N.removeChild(T);c=x}if(a.GetScrollerWidth=this.getScrollerWidth(),r.Path=a,r.Text=l,r.Image=d,r.Native=c,null!=n)for(z=0;z<o.length;z++)o[z].style.display=n[z].toString();return window[p].style.visibility="hidden",[2,r]}}))}))},measureText:function(e,t,i,s,n){var o,r,a={},l={width:0,height:0},h=this.getTextOptions(i,e,t,s);return o=this.wrapSvgText(h,n,s),r=this.wrapSvgTextAlign(h,o),l.width=r.width,r.width>=s&&"Wrap"!==h.textOverflow&&(l.width=s),l.height=o.length*h.fontSize*1.2,r.width>h.width&&"Wrap"!==h.textOverflow&&"NoWrap"===h.textWrapping&&(o[0].text=this.overFlow(h.content,h)),a.Bounds=l,a.WrapBounds=r,a.ChildNodes=o,a},getTextOptions:function(e,t,i,s){var n={fill:i.fill,stroke:i.strokeColor,strokeWidth:i.strokeWidth,dashArray:i.strokeDashArray,opacity:i.opacity,gradient:i.gradient,width:s||t.width,height:t.height};return n.fontSize=i.fontSize||N,n.fontFamily=i.fontFamily||C,n.textOverflow=i.textOverflow||O,n.textDecoration=i.textDecoration||x,n.doWrap=i.doWrap,n.whiteSpace=this.whiteSpaceToString(i.whiteSpace||I,i.textWrapping||E),n.content=e,n.textWrapping=i.textWrapping||E,n.breakWord=this.wordBreakToString(i.textWrapping||E),n.textAlign=this.textAlignToString(i.textAlign||S),n.color=i.color||w,n.italic=i.italic||M,n.bold=i.bold||y,n.dashArray="",n.strokeWidth=0,n.fill="",n},whiteSpaceToString:function(e,t){if("NoWrap"===t&&"PreserveAll"===e)return"pre";var i="";switch(e){case"CollapseAll":i="nowrap";break;case"CollapseSpace":i="pre-line";break;case"PreserveAll":i="pre-wrap"}return i},wordBreakToString:function(e){var t="";switch(e){case"Wrap":t="breakall";break;case"NoWrap":t="keepall";break;case"WrapWithOverflow":t="normal";break;case"LineThrough":t="line-through"}return t},textAlignToString:function(e){var t="";switch(e){case"Center":t="center";break;case"Left":t="left";break;case"Right":t="right"}return t},wrapSvgText:function(e,t,i){var s,n,o=[],r=0,a=t||e.content;if("nowrap"!==e.whiteSpace&&"pre"!==e.whiteSpace)if("breakall"===e.breakWord)for(s="",s+=a[0],r=0;r<a.length;r++)if((n=this.bBoxText(s,e))>=e.width&&s.length>0)o[o.length]={text:s,x:0,dy:0,width:n},s="";else{(s+=a[r+1]||"").indexOf("\n")>-1&&(o[o.length]={text:s,x:0,dy:0,width:this.bBoxText(s,e)},s="");var l=this.bBoxText(s,e);Math.ceil(l)+2>=e.width&&s.length>0&&(o[o.length]={text:s,x:0,dy:0,width:l},s=""),r===a.length-1&&s.length>0&&(o[o.length]={text:s,x:0,dy:0,width:l},s="")}else o=this.wordWrapping(e,t,i);else o[o.length]={text:a,x:0,dy:0,width:this.bBoxText(a,e)};return o},wordWrapping:function(e,t,i){var s=[],n="",o=0,r=0,a="nowrap"!==e.whiteSpace,l=t||e.content;if(null!=l){var h=l.split("\n"),d=void 0,c=void 0,p=void 0,u=void 0;for(o=0;o<h.length;o++)for(d="NoWrap"!==e.textWrapping?h[o].split(" "):"NoWrap"===e.textWrapping?[h[o]]:h,r=0;r<d.length;r++){c=(n+=((0!==r||1===d.length)&&a&&n.length>0?" ":"")+d[r])+" "+(d[r+1]||"");var f=this.bBoxText(c,e);Math.floor(f)>(i||e.width)-2&&n.length>0?(s[s.length]={text:n,x:0,dy:0,width:c===n?f:n===u?p:this.bBoxText(n,e)},n=""):r===d.length-1&&(s[s.length]={text:n,x:0,dy:0,width:f},n=""),u=c,p=f}}return s},wrapSvgTextAlign:function(e,t){var i,s,n={x:0,width:0},o=0;for(o=0;o<t.length;o++)s=i=t[o].width,i="left"===e.textAlign?0:"center"===e.textAlign?i>e.width&&("Ellipsis"===e.textOverflow||"Clip"===e.textOverflow)?0:-i/2:"right"===e.textAlign?-i:t.length>1?0:-i/2,t[o].dy=1.2*e.fontSize,t[o].x=i,n?(n.x=Math.min(n.x,i),n.width=Math.max(n.width,s)):n={x:i,width:s};return n},overFlow:function(e,t){var i,s=0,n=0,o=0,r="";i=e.length;var a=0;do{o>0&&(s=n),n=Math.floor(this.middleElement(s,i)),r+=e.substr(s,n),o=this.bBoxText(r,t)}while(o<=t.width);for(r=r.substr(0,s),a=s;a<i;a++)if(r+=e[a],(o=this.bBoxText(r,t))>=t.width){e=e.substr(0,r.length-1);break}return"Ellipsis"===t.textOverflow?(e=e.substr(0,e.length-3),e+="..."):e=e.substr(0,e.length),e},middleElement:function(e,t){return(e+t)/2},getScrollerWidth:function(){var e=this.createHtmlElement("div",{style:"visibility:hidden; width: 100px"});document.body.appendChild(e);var t=e.getBoundingClientRect().width;e.style.overflow="scroll";var i=this.createHtmlElement("div",{style:"width:100%"});e.appendChild(i);var s=i.getBoundingClientRect().width;return e.parentNode.removeChild(e),{x:0,y:0,width:t-s,height:0}},pathPoints:function(e){return l(this,void 0,void 0,(function(){var t,i,s,n;return h(this,(function(o){if(t={},e)for(i=Object.keys(e).map((function(t){return[e[t],t]})),s=0;s<i.length;s++)i.length>0&&(n=i[s][1],t[i[s][0]]=this.findSegmentPoints(n));return[2,t]}))}))},findSegmentPoints:function(e){var t,i,s=[];window.measureElement.style.visibility="visible";var n=window.measureElement.children[2],o=this.getChildNode(n)[0];o.setAttributeNS(null,"d",e);var r=o.getTotalLength();for(i=0;i<=r;i+=10)t=o.getPointAtLength(i),s.push({x:t.x,y:t.y});return window.measureElement.style.visibility="hidden",s},loadImage:function(e,t,i){return l(this,void 0,void 0,(function(){var s,o,r;return h(this,(function(a){switch(a.label){case 0:return s=new Promise((function(i,s){var o={};window.measureElement.style.visibility="visible",window.measureElement.children[1].setAttribute("src",e[t][0]),window.measureElement.style.visibility="hidden";var r=document.createElement("img");r.setAttribute("src",e[t][0]),n(r,{id:"imagesf"+t+"imageNode",style:"display: none;"}),document.body.appendChild(r),r.onload=function(e){var t=e.currentTarget;o={width:t.width,height:t.height},i(o)}})),o=i,r=e[t][1],[4,s];case 1:return o[r]=a.sent(),t!=e.length-1?[3,2]:[2,i];case 2:return t++,[4,this.loadImage(e,t,i)];case 3:a.sent(),a.label=4;case 4:return[2]}}))}))},bBoxText:function(e,t){window.measureElement.style.visibility="visible";var i=window.measureElement.children[2],n=this.getChildNode(i)[1];n.textContent=e,s(n,"font-size:"+t.fontSize+"px; font-family:"+t.fontFamily+";font-weight:"+(t.bold?"bold":"normal"));var o=n.getBBox().width;return window.measureElement.style.visibility="hidden",o},endEdit:function(e){setTimeout((function(){var e=document.getElementById(i.id+"_text");e&&e.setAttribute("visibility","visible")}),100);var t=this.diagram_editBox,i=window.annotation,s=t.value,n=i.style,o=i.bounds,r=i.nodeSize;r.width=null==r.width?void 0:r.width,r.height=null==r.height?void 0:r.height;var a={},l={};return a[i.id]=this.measureText(o,n,s,o.width||r.width),a[i.id].Content=s,l.Text=a,this.diagram_editTextBoxDiv.remove(),l},onAddWireEvents:function(e,t){var i=this,s=document.getElementById(e);b[e]=t;var n=this;s.addEventListener("mousedown",(function(e){"Mac68K"!==window.navigator.platform&&"MacPPC"!==window.navigator.platform&&"MacIntel"!==window.navigator.platform||e.preventDefault(),i.invokeDiagramEvents(e,t)})),window.addEventListener("resize",(function(e){setTimeout((function(){n.invokeDiagramEvents(e,null,v)}),800)})),s.addEventListener("mousemove",(function(e){"Mac68K"!==window.navigator.platform&&"MacPPC"!==window.navigator.platform&&"MacIntel"!==window.navigator.platform||e.preventDefault(),i.invokeDiagramEvents(e,t)})),s.addEventListener("mouseup",(function(e){i.invokeDiagramEvents(e,t)})),s.addEventListener("mouseleave",(function(e){i.invokeDiagramEvents(e,t)})),s.addEventListener("touchstart",(function(e){"Mac68K"!==window.navigator.platform&&"MacPPC"!==window.navigator.platform&&"MacIntel"!==window.navigator.platform||e.preventDefault(),i.invokeDiagramEvents(e,t)})),s.addEventListener("touchmove",(function(e){"Mac68K"!==window.navigator.platform&&"MacPPC"!==window.navigator.platform&&"MacIntel"!==window.navigator.platform||e.preventDefault(),i.invokeDiagramEvents(e,t)})),s.addEventListener("touchend",(function(e){i.invokeDiagramEvents(e,t)})),s.addEventListener("scroll",(function(e){i.invokeDiagramEvents(e,t)})),s.addEventListener("mousewheel",(function(e){i.invokeDiagramEvents(e,t)})),s.addEventListener("keydown",(function(e){i.invokeDiagramEvents(e,t)})),s.addEventListener("keyup",(function(e){i.invokeDiagramEvents(e,t)}))},invokeDiagramEvents:function(e,t,i,s){var n,o="diagram_editTextBoxDiv",r=this[o],a={};if("resize"==e.type){var l=document.getElementById(i);if(!l){if(document.getElementsByClassName("e-diagram").length>0){var h=document.getElementsByClassName("e-diagram").length;i=document.getElementsByClassName("e-diagram")[h-1].id+"_content",l=document.getElementById(i),v=i}if(!l)return}t=b[i]}if("mousedown"!=e.type&&"touchstart"!=e.type||(f=!0),"mouseup"!=e.type&&"touchend"!=e.type&&"mouseleave"!=e.type||(f=!1),"mouseleave"!=e.type&&"Escape"!=e.key&&("mousedown"!=e.type&&"touchstart"!=e.type||"diagram_editBox"==e.target.id)||!r||(window.isEscape="Escape"==e.key,n=this.endEdit(e,this),this[o]=r=document.getElementById("diagram_editTextBoxDiv"),e.currentTarget.focus()),a=this.getMouseEvents(e,i,s),"Escape"==e.key){var y=document.getElementById("helperElement");y&&(sf.base.remove(y),y.remove())}"mousewheel"==e.type&&e.ctrlKey?c?setTimeout((function(){c=!1}),1e3):(c=!0,t.invokeMethodAsync("InvokeDiagramEvents",a,n)):r||("mousemove"!=e.type&&"touchmove"!=e.type||d)&&("mousemove"==e.type||"touchmove"==e.type)&&u||(("mousemove"==e.type||"touchmove"==e.type&&!g)&&f&&m&&(d=!0,a.isPan=!0),s?t.invokeMethodAsync("InvokeDiagramEvents",a):("keydown"==e.type||"keyup"==e.type||"scroll"!=e.type||"scroll"==e.type&&!g)&&("scroll"!=e.type||"scroll"==e.type&&!p?t.invokeMethodAsync("InvokeDiagramEvents",a,n):"scroll"==e.type&&p&&(p=!1))),"mouseup"!=e.type&&"mousemove"!=e.type&&"touchend"!=e.type&&"touchmove"!=e.type||!e.currentTarget||!e.currentTarget.id||this[o]||this.isForeignObject(e.target)||e.currentTarget.focus()},isForeignObject:function(e,t){var i=e;if(i)for(;null!==i.parentNode;){if("string"==typeof i.className&&(!t&&-1!==i.className.indexOf("foreign-object")||t&&-1!==i.className.indexOf("e-diagram-text-edit")))return i;i=i.parentNode}return null},getTouches:function(e){var t=[];if(e&&e.touches&&e.touches.length>0)for(var i=0;i<e.touches.length;i++)t.push({pageX:e.touches[i].pageX,pageY:e.touches[i].pageY,screenX:e.touches[i].screenX,screenY:e.touches[i].screenY,clientX:e.touches[i].clientX,clientY:e.touches[i].clientY});return t},getMouseEvents:function(e,t,i){var s={};if(-1!=e.type.indexOf("touch")?((s={altKey:e.altKey,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,type:e.type}).touches=this.getTouches(e),e.changedTouches&&e.changedTouches[0]&&(s.offsetX=e.changedTouches[0].clientX,s.offsetY=e.changedTouches[0].clientY),i&&"out"==i.name&&(s.type="mouseleave"),"touchmove"==e.type&&e.preventDefault()):s={altKey:e.altKey,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,offsetX:e.offsetX,offsetY:e.offsetY,type:e.type,key:e.key,keyCode:e.keyCode,button:e.button},t&&"resize"==e.type){var n=this.measureScrollValues(t),r=document.getElementById(t);s.diagramCanvasScrollBounds=n,s.diagramGetBoundingClientRect=r.getBoundingClientRect()}else if(i){if(i.target.id&&""!=i.target.id){var a=o(i.target,"e-diagram");if(a&&a.id&&""!=a.id){var l=a.id;n=this.measureScrollValues(l);s.diagramCanvasScrollBounds=n,s.diagramGetBoundingClientRect=document.getElementById(l+"_content").getBoundingClientRect()}}}else if(e.currentTarget&&e.currentTarget.id){n=this.measureScrollValues(e.currentTarget.id);s.diagramCanvasScrollBounds=n,s.diagramGetBoundingClientRect=e.currentTarget.getBoundingClientRect()}else if(e.target){n=this.measureScrollValues(e.target.id);s.diagramCanvasScrollBounds=n,s.diagramGetBoundingClientRect=e.target.getBoundingClientRect()}return"mousewheel"==e.type&&(e.ctrlKey&&e.preventDefault(),e.currentTarget.focus(),s.wheelDelta=e.wheelDelta,g=!0),"touchmove"==e.type&&e.touches.length>1&&(g=!0),"mousedown"!=e.type&&"touchstart"!=e.type||(u=!0),"mouseup"!=e.type&&"touchend"!=e.type||(u=!1),t||this.isForeignObject(e.target,!0)||"mousemove"!=e.type&&"mouseleave"!=e.type&&"mouseup"!=e.type&&(this.isForeignObject(e.target)||"mousedown"!=e.type&&"keydown"!=e.type&&"keyup"!=e.type)&&(!this.isForeignObject(e.target)||"mousedown"!=e.type||"keydown"!=e.type||"keyup"!=e.type)||g||e.preventDefault(),s},initialiseModule:function(e,t,i){return l(this,void 0,void 0,(function(){var s,n=this;return h(this,(function(o){return"symbolPaletteInstance",window.symbolPaletteInstance?(s={id:e.children[0].id,componentInstance:t,allowDrag:i},window.symbolPaletteInstance.push(s)):(s={id:e.children[0].id,componentInstance:t,allowDrag:i},window.symbolPaletteInstance=[],window.symbolPaletteInstance.push(s)),e.addEventListener("mousedown",(function(e){"Mac68K"!==window.navigator.platform&&"MacPPC"!==window.navigator.platform&&"MacIntel"!==window.navigator.platform||e.preventDefault(),n.invokePaletteEvents(e,t)})),e.addEventListener("mousemove",(function(e){"Mac68K"!==window.navigator.platform&&"MacPPC"!==window.navigator.platform&&"MacIntel"!==window.navigator.platform||e.preventDefault(),n.invokePaletteEvents(e,t)})),e.addEventListener("mouseup",(function(e){n.invokePaletteEvents(e,t)})),e.addEventListener("mouseleave",(function(e){n.invokePaletteEvents(e,t)})),e.addEventListener("touchstart",(function(e){"Mac68K"!==window.navigator.platform&&"MacPPC"!==window.navigator.platform&&"MacIntel"!==window.navigator.platform||e.preventDefault(),n.invokePaletteEvents(e,t)})),e.addEventListener("touchmove",(function(e){"Mac68K"!==window.navigator.platform&&"MacPPC"!==window.navigator.platform&&"MacIntel"!==window.navigator.platform||e.preventDefault(),n.invokePaletteEvents(e,t)})),e.addEventListener("touchend",(function(e){n.invokePaletteEvents(e,t)})),setTimeout((function(){this.symbolPaletteDragAndDropModule=new a(e,window.symbolPaletteInstance)}),100),[2]}))}))},invokePaletteEvents:function(e,t){var i;"touchstart"!=e.type&&"touchend"!=e.type&&e.target&&o(e.target,"e-acrdn-header")&&e.preventDefault();var s=this.palettegetMouseEvents(e);if(i=2===e.target.id.split("_").length?e.target.id.split("_")[0]:function(e,t,i){for(var s,n=e;n&&!r(n,i);){if(n.id&&-1!=n.id.indexOf(t)){s=n.id.split(t)[0];break}n=n.parentNode}return s}(e.target,"_Container","e-symbolpalette"),"mousemove"==e.type&&!d||"mousemove"!=e.type||!u){if(e&&e.target&&e.type){var n=document.getElementById(e.target.id),a=void 0;if(n){for(var l=0;l<n.classList.length;l++)if("e-symbol-draggable"==n.classList[l]){(a=e.target).classList.add("e-symbol-hover");break}var h=document.getElementsByClassName("e-symbol-hover");if(h&&h.length>0)for(var c=0;c<h.length;c++){var p=h[c];(a&&a!=p||null==a)&&p.classList.remove("e-symbol-hover")}}}t.invokeMethodAsync("InvokePaletteEvents",s,i)}},palettegetMouseEvents:function(e){var t={};return-1!=e.type.indexOf("touch")?((t={altKey:e.altKey,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,type:e.type}).touches=this.getTouches(e),e.changedTouches&&e.changedTouches[0]&&(t.offsetX=e.changedTouches[0].clientX,t.offsetY=e.changedTouches[0].clientY),"touchmove"==e.type&&e.preventDefault()):t={altKey:e.altKey,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,offsetX:e.offsetX,offsetY:e.offsetY,type:e.type},t},exportDiagram:function(t,i,s,n,o,r,a,d){return l(this,void 0,void 0,(function(){var c,p=this;return h(this,(function(u){return c=this,[2,new Promise((function(u,f){return l(p,void 0,void 0,(function(){var l,p,f,g,m,v,b,y;return h(this,(function(h){switch(h.label){case 0:return l="data",i=i,n=n,p=t.margin||{},t.region=t&&0==t.region?"PageSettings":1==t.region?"Content":"ClipBounds",t.fileName=r,t.mode=d?"Download":"Data",t.format=0===a?"JPEG":1===a?"PNG":2===a?"SVG":a,t.orientation=t&&0===t.orientation?"Landscape":"Portrait",f=s,g=new e(s.x,s.y,s.width,s.height),(m=t.clipBounds)&&(f.x=m.x?m.x:f.x,f.y=m.y?m.y:f.y,f.width=m.width||f.width,f.height=m.height||f.height),p={top:p.top,bottom:p.bottom,right:p.right,left:p.left},"PageSettings"!==t.region&&(f.x-=p.left,f.y-=p.top,f.width+=p.left+p.right,f.height+=p.top+p.bottom),v=t.fileName||"diagram",[4,c.setCanvas(t,f,g,p,v,n,i)];case 1:return null!==(l=h.sent())&&(o||"Data"===t.mode&&"SVG"===t.format?u(l):(b={id:i+"_ExportImage",src:l},t.margin={top:0,bottom:0,right:0,left:0},(y=c.createHtmlElement("img",b)).onload=function(){var e=c.getMultipleImage(y,t,i,!0,n);u(JSON.stringify(e))})),[2]}}))}))}))]}))}))},setCanvas:function(t,i,s,n,o,r,a){return l(this,void 0,void 0,(function(){var l,d,c,p,u;return h(this,(function(h){switch(h.label){case 0:return t.clipBounds=i,d=new e(s.x,s.y,s.width,s.height),"scaleX","scaleY","scaleOffsetX","scaleOffsetY",c=new e(i.x,i.y,i.width,i.height),this.setScaleValueforCanvas(t,i,r),[4,this.exportAsImage({clipBounds:i,margin:n,region:t.region,scaleX:t.scaleX,scaleY:t.scaleY,scaleOffsetX:t.scaleOffsetX,scaleOffsetY:t.scaleOffsetY},o,a,t,d,c,r,"Download"===t.mode)];case 1:return p=h.sent(),"SVG"!==t.format&&(u=l="JPEG"===t.format?p.toDataURL("image/jpeg"):"PNG"===t.format?p.toDataURL("image/png"):"BMP"===t.format?p.toDataURL("image/bmp"):p.toDataURL()),"Data"===t.mode?"SVG"===t.format?[2,p]:[2,l]:(this.canvasMultiplePage(t,p,n,u,o),[2,null])}}))}))},exportAsImage:function(e,t,i,s,n,o,r,a){return l(this,void 0,void 0,(function(){var l;return h(this,(function(h){switch(h.label){case 0:return[4,this.imageExport(e,t,i,s,n,o,r,a)];case 1:return(l=h.sent())instanceof Promise?(l.then((function(e){return e})),[2,l]):[2,l]}}))}))},imageExport:function(e,t,i,s,n,o,r,a){return l(this,void 0,void 0,(function(){var a;return h(this,(function(l){return a=this,document.getElementById(i),[2,new Promise((function(l,h){e.clipBounds;var d=e.margin,c=n.x,p=n.y,u=n.width,f=n.height,g=document.createElementNS("http://www.w3.org/2000/svg","svg"),m={x:String(o.x),y:String(o.y),width:String(o.width),height:String(o.height)};a.setAttributeSvg(g,m),m={x:String(c),y:String(p),width:String(u+d.left+d.right),height:String(f+d.top+d.bottom)};var v,b,y=document.getElementById(i+"_backgroundLayer_svg").cloneNode(!0),M=document.getElementById(i+"_diagramLayer_svg").cloneNode(!0);if(y){for(var C=0;C<y.childNodes.length;C++){if((N=y.childNodes[C]).id===i+"_backgroundImageLayer"&&(b=!0),N.id===i+"_backgroundLayer"){v=N;for(var w=N.childNodes.length-1;w>=0;w--){(S=N.childNodes[w]).id!==i+"_backgroundLayerrect"&&N.removeChild(S)}}}if(v&&y.removeChild(v),"PageSettings"!==s.region&&a.setAttributeSvg(y,m),g.appendChild(y),v){for(w=v.childNodes.length-1;w>=0;w--){var S=v.childNodes[w];b||S.setAttribute("fill","transparent"===r.background.background?"white":r.background.background)}g.appendChild(v)}if("PageSettings"!==s.region){a.setTransform(y,o,d);for(C=0;C<y.childNodes.length;C++){(N=y.childNodes[C]).id!==i+"_backgroundImageLayer"&&N.id!==i+"_backgroundLayer"||a.setTransform(N,o,d)}}}g.appendChild(M),a.setTransform(M,o,d);for(C=0;C<M.childNodes.length;C++){var N;(N=M.childNodes[C]).id===i+"_diagramlayer"&&a.setTransform(N,o,d)}var x=window.URL.createObjectURL(new Blob([(new window.XMLSerializer).serializeToString(g)],{type:"image/svg+xml"}));if("SVG"===s.format){var O;"Data"===s.mode&&"SVG"===s.format&&(O=(new window.XMLSerializer).serializeToString(g),l(O));var E=[],I=(new window.XMLSerializer).serializeToString(g);E.push(I);var D,T=0;if("Download"===s.mode)for(T=0;T<E.length;T++)D=new Blob([E[T]],{type:"application/octet-stream"}),"msie"===sf.base.Browser.info.name?window.navigator.msSaveOrOpenBlob(D,t+".svg"):a.triggerDownload("SVG",t,x)}else{var j=document.createElement("canvas"),A=j.getContext("2d"),z=new Image;z.onload=function(){j.height=z.height,j.width=z.width,r.background.imageSource?A.fillStyle="transparent":A.fillStyle="transparent"===r.background.background?"white":r.background.background,A.fillRect(0,0,j.width,j.height),A.drawImage(z,0,0),window.URL.revokeObjectURL(x),l(j)},z.src=x}}))]}))}))},triggerDownload:function(e,t,i){var s=document.createElement("a");s.download=t+"."+e.toLocaleLowerCase(),s.href=i,s.click()},canvasMultiplePage:function(e,t,i,s,n){var o=this,r=[],a=s.substring(s.indexOf(":")+1,s.indexOf(";")),l=a.substring(a.indexOf("/")+1),h=(l="jpeg"===l?void 0:l.toUpperCase())||"JPG";if(e.fitToPage)r=[s],this.exportImage(r,n,h,s);else{if(e.pageHeight=e.pageHeight?e.pageHeight:(void 0).height,e.pageWidth=e.pageWidth?e.pageWidth:(void 0).width,e.pageHeight=e.pageHeight?e.pageHeight:t.width,e.pageWidth=e.pageWidth?e.pageWidth:t.height,i=e.margin||{},e.orientation&&("Landscape"===e.orientation&&e.pageHeight>e.pageWidth||"Portrait"===e.orientation&&e.pageWidth>e.pageHeight)){var d=e.pageWidth;e.pageWidth=e.pageHeight,e.pageHeight=d}e.margin={top:isNaN(i.top)?0:i.top,bottom:isNaN(i.bottom)?0:i.bottom,left:isNaN(i.left)?0:i.left,right:isNaN(i.right)?0:i.right};var c={id:void 0+"_printImage",src:s},p=this.createHtmlElement("img",c);p.onload=function(){r=o.getMultipleImage(p,e,!0),o.exportImage(r,n,h,s)}}},exportImage:function(e,t,i,s){for(var n=[],o=e instanceof HTMLElement?0:e.length,r=0;r<o;r++){for(var a=e[r].replace(/^data:[a-z]*;,/,"").split(","),l=atob(a[1]),h=new ArrayBuffer(l.length),d=new Uint8Array(h),c=0;c<l.length;c++)d[c]=l.charCodeAt(c);n.push(h)}for(var p=0;p<n.length;p++){var u=new Blob([n[p]],{type:"application/octet-stream"});if("msie"===sf.base.Browser.info.name)window.navigator.msSaveOrOpenBlob(u,t+"."+i);else{var f=window.URL.createObjectURL(u),g=document.createElement("a");g.download=t+"."+i.toLocaleLowerCase(),g.href=f,g.click()}}},setScaleValueforCanvas:function(e,t,i){var s="scaleX";e[s]=1,e.scaleY=1,e.scaleOffsetX=0,e.scaleOffsetY=0,e.pageHeight=e.pageHeight||i.height,e.pageWidth=e.pageWidth||i.width;var n=e.orientation||i.orientation;if(n||(n="Portrait"),"Portrait"===n){if(e.pageWidth>e.pageHeight){var o=e.pageHeight;e.pageHeight=e.pageWidth,e.pageWidth=o}}else if(e.pageHeight>e.pageWidth){o=e.pageWidth;e.pageWidth=e.pageHeight,e.pageHeight=o}e.pageWidth&&e.pageHeight&&e.fitToPage&&(e.stretch="Meet");var r=e.pageHeight||t.height,a=e.pageWidth||t.width;"Stretch"!==e.stretch&&"Meet"!==e.stretch&&"Slice"!==e.stretch||(e[s]=a/t.width,e.scaleY=r/t.height,"Meet"===e.stretch?(e[s]=e.scaleY=Math.min(e[s],e.scaleY),e.scaleOffsetY=(e.pageHeight-t.height*e[s])/2,e.scaleOffsetX=(e.pageWidth-t.width*e[s])/2):"Slice"===e.stretch&&(e[s]=e.scaleY=Math.max(e[s],e.scaleY)),t.width=a,t.height=r),t.x*=e[s],t.y*=e.scaleY},setTransform:function(e,t,i){e.setAttribute("transform","translate("+(-t.x+i.left)+", "+(-t.y+i.top)+")")},getPrintCanvasStyle:function(e,i){var s=0,n=0,o=new t;if(s=e.width,n=e.height,(i.pageHeight||i.pageWidth)&&(n=i.pageHeight?i.pageHeight:n,s=i.pageWidth?i.pageWidth:s),i.orientation&&("Landscape"===i.orientation&&n>s||"Portrait"===i.orientation&&s>n)){var r=s;s=n,n=r}return o.height=n,o.width=s,o},getMultipleImage:function(e,t,i){var s=[],n=this.createHtmlElement("div",{}),o=this.getPrintCanvasStyle(e,t),r=t.margin,a=r.left,l=r.top,h=r.right,d=r.bottom,c=0,p=o.width+c,u=o.height+0,f=0,g=0;if(t&&!t.fitToPage){n.style.height="auto",n.style.width="auto";var m=e.height,v=e.width,b=0,y=0,M=void 0,C=0,w=0,S=void 0,N=void 0;do{do{C=o.width,w=o.height,f+o.width>=v&&(C=v-f),g+o.height>=m&&(w=m-g),(S=(N=this.createCanvas(void 0+"_multiplePrint",o.width,o.height)).getContext("2d")).drawImage(e,c+f+a,0+g+l,C-h-a,w-d-l,0+a,0+l,C-h-a,w-d-l),f+o.width>=v&&(f-=f-v),M="PNG"===t.format?N.toDataURL("image/png"):"JPEG"===t.format?N.toDataURL("image/jpeg"):N.toDataURL(),S.restore(),f+=p,i?s.push(M):this.printImage(n,M,b+""+y,p+"px;",u+"px;"),b++}while(f<v);y++,b=c=f=0,g+o.height>=m&&(g-=g-m),g+=u}while(g<m)}else{var x=this.getPrintCanvasStyle(e,t),O=x.width,E=x.height;(S=(N=this.createCanvas(void 0+"_diagram",O,E)).getContext("2d")).drawImage(e,0+a,0+l,e.width-(h+a),e.height-(l+d),0+a,0+l,O-(h+a),E-(l+d));M="PNG"===t.format?N.toDataURL("image/png"):"JPEG"===t.format?N.toDataURL("image/jpeg"):N.toDataURL();S.restore(),i?s.push(M):this.printImage(n,M,0)}return i?s:n},printImage:function(e,t,i,s,o){var r={class:"e-diagram-print-page",style:"width:"+s+"height:"+o},a=this.createHtmlElement("img",r),l=this.createHtmlElement("div",r);n(a,r={id:void 0+"_multiplePrint_img"+i,style:"float:left",src:t}),l.appendChild(a),e.appendChild(l)},print:function(e,t,i,s){return l(this,void 0,void 0,(function(){var n,o;return h(this,(function(r){switch(r.label){case 0:return n={width:i.width,height:i.height},e.mode="Data",s=s,t=t,[4,this.exportDiagram(e,t,i,s,!0,void 0,void 0,!1)];case 1:return o=r.sent(),e.fitToPage&&(e.pageWidth=n.width,e.pageHeight=n.height),this.printImages(o,e),[2,o]}}))}))},printImages:function(e,t){var i=this,s={id:void 0+"_printImage",src:e};t.margin={top:0,bottom:0,right:0,left:0};var n=this.createHtmlElement("img",s);n.onload=function(){var e=i.getMultipleImage(n,t),s=window.open("");null!=s&&e instanceof HTMLElement&&(s.document.write("<html><head><style> body{margin:0px;}  @media print { .e-diagram-print-page{page-break-after: left; }.e-diagram-print-page:last-child {page-break-after: avoid;}}</style><title></title></head>"),s.addEventListener("load",(function(e){setTimeout((function(){s.window.print()}),3e3)})),s.document.write("<center>"+e.innerHTML+"</center>"),s.document.close())}},exportImages:function(e,t){var i=this,s=t&&t.region?t.region:"Content",o=t.margin||{};o={top:isNaN(o.top)?0:o.top,bottom:isNaN(o.bottom)?0:o.bottom,left:isNaN(o.left)?0:o.left,right:isNaN(o.right)?0:o.right};var r=this.getDiagramBounds(s,{});t.clipBounds&&(r.x=isNaN(t.clipBounds.x)?r.x:t.clipBounds.x,r.y=isNaN(t.clipBounds.y)?r.y:t.clipBounds.y,r.width=t.clipBounds.width||r.width,r.height=t.clipBounds.height||r.height);var a=document.createElement("img");n(a,{src:e});var l=this;a.onload=function(){var s=i.createCanvas(l.Diagram.id+"innerImage",r.width+(o.left+o.right),r.height+(o.top+o.bottom)),n=s.getContext("2d");if(n.fillStyle=l.diagram.pageSettings.background.color,n.fillRect(0,0,r.width+(o.left+o.right),r.height+(o.top+o.bottom)),n.drawImage(a,0,0,r.width,r.height,o.left,o.top,r.width,r.height),e=s.toDataURL(),t.printOptions)l.printImages(e,t);else{n.restore();var h=t.fileName||"diagram";i.canvasMultiplePage(t,s,o,e,h)}}},overviewModelBounds:function(){var e,t,i=document.getElementById("overview"),s=i.clientWidth,n=i.clientHeight,o=i.getBoundingClientRect(),r=window.screenX<0?-1*window.screenX:window.screenX,a=window.screenY<0?-1*window.screenY:window.screenY;if(0===s){var l=Math.floor(window.innerWidth-r-Math.floor(o.left));s=l>0?l:Math.floor(window.innerWidth)}if(0===n){var h=Math.floor(window.innerHeight-a-Math.floor(o.top));n=h>0?h:Math.floor(window.innerHeight)}return s>0&&(e=n),n>0&&(t=s),{height:e,width:t}},invokeOverviewEvents:function(e){var t=document.getElementById("overview"),i=this;t&&(t.addEventListener("mousedown",(function(t){i.overviewMouseEventArgs(t,e)})),t.addEventListener("mouseup",(function(t){i.overviewMouseEventArgs(t,e)})),t.addEventListener("mousemove",(function(t){i.overviewMouseEventArgs(t,e)})),t.addEventListener("mouseleave",(function(t){i.overviewMouseEventArgs(t,e)})),t.addEventListener("touchstart",(function(t){i.overviewMouseEventArgs(t,e)})),t.addEventListener("touchmove",(function(t){i.overviewMouseEventArgs(t,e)})),t.addEventListener("touchend",(function(t){i.overviewMouseEventArgs(t,e)})))},diagramOverview:function(e,t,i,s,n){var o=document.getElementById(e+"_diagramLayer_svg").cloneNode(!0),r=document.createElementNS("http://www.w3.org/2000/svg","svg");s.scale=1;var a=document.getElementById(e).clientHeight,l=document.getElementById(e).clientWidth,h=Math.max(Number(t.width),l),d=Math.max(Number(t.height),a).toString(),c=h.toString();i>=1&&(o.setAttribute("style","pointer-events: all;height:"+d+"px;width:"+c+"px;"),o.children[0].setAttribute("transform","translate("+-t.x+","+-t.y+"),scale("+s.scale+")")),r.setAttribute("height",d),r.setAttribute("width",c),r.appendChild(o);var p=window.URL.createObjectURL(new Blob([(new window.XMLSerializer).serializeToString(r)],{type:"image/svg+xml"})),u=document.getElementById("overview_diagramlayer"),f=u.getContext("2d"),g=new Image;g.onload=function(){f.fillStyle="transparent",f.setTransform(1,0,0,1,0,0),f.clearRect(0,0,u.width,u.height),f.setTransform(n,0,0,n,0,0),f.drawImage(g,0,0),window.URL.revokeObjectURL(p)},g.src=p;for(var m=document.getElementById(e+"_htmlLayer_div").cloneNode(!0),v=document.getElementById("overview_htmllayer_div");v.firstChild;)v.firstChild.remove();for(var b=0;b<m.children.length;b++){var y=m.children[b].cloneNode(!0);v.appendChild(y)}},overviewMouseEventArgs:function(e,t){var i=document.getElementById("overview"),s={altKey:e.altKey,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,offsetX:e.offsetX,offsetY:e.offsetY,type:e.type,key:e.key,keyCode:e.keyCode,button:e.button,targetId:e.target.id,overviewGetBoundingClientRect:i.getBoundingClientRect(),targetCssClass:e.target.classList.value,touches:this.getTouches(e),offsetLeft:i.offsetLeft,offsetTop:i.offsetTop};t.invokeMethodAsync("InvokeOverviewEvents",s)}}}()},"./modules/sf-dialog.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Dialog=function(){"use strict";var e="e-dlg-target",t=function(){function t(e){this.popupObj=null,this.zIndex=1e3,this.height="auto",this.width="100%",this.resizeIconDirection="SouthEast",this.visible=!0,this.isModal=!1,this.enableRtl=!1,this.enableResize=!1,this.closeOnEscape=!0,this.allowDragging=!1,this.allowMaxHeight=!0,this.allowPrerender=!1,this.hasFocusableNode=!1,this.openedEnabled=!1,this.closedEnabled=!1,this.onDragEnabled=!1,this.onDragStartEnabled=!1,this.onDragStopEnabled=!1,this.resizingEnabled=!1,this.onResizeStartEnabled=!1,this.onResizeStopEnabled=!1,this.isOpenFullScreen=!1,this.enablePersistence=!1,this.dlgContainer=void 0,this.animationSettings={delay:0,duration:400,effect:"Fade"},this.position={X:"center",Y:"center"},window.sfBlazor=window.sfBlazor,this.updateContext(e),this.isInitialLoad=e.isInitial,window.sfBlazor.setCompInstance(this),this.initialize()}return t.prototype.updateContext=function(e){sf.base.extend(this,this,e)},t.prototype.initialize=function(){this.calculatezIndex=1e3===this.zIndex,this.render(),this.element.classList.remove("e-blazor-hidden"),this.setWidth(),this.setMinHeight(),this.enableResize&&(this.setResize(!0),("None"===this.animationSettings.effect&&"Enable"!==sf.base.animationMode||"Disable"===sf.base.animationMode)&&this.getMinHeight()),this.bindEvent(this.element)},t.prototype.setWidth=function(){"100%"===this.width?this.element.style.width="":(sf.base.setStyleAttribute(this.element,{width:sf.base.formatUnit(this.width)}),"auto"===this.width&&this.refreshPosition())},t.prototype.setHeight=function(){sf.base.setStyleAttribute(this.element,{height:sf.base.formatUnit(this.height)})},t.prototype.setMinHeight=function(){""!==this.minHeight&&sf.base.setStyleAttribute(this.element,{minHeight:sf.base.formatUnit(this.minHeight)})},t.prototype.render=function(){var e=this;if(this.checkPositionData(),this.targetEle=this.getTargetEle(this.target),sf.base.Browser.isDevice&&sf.base.addClass([this.element],"e-device"),sf.base.isNullOrUndefined(this.headerContent)&&(this.headerContent=this.element.querySelector(".e-dlg-header-content")),sf.base.isNullOrUndefined(this.contentEle)&&(this.contentEle=this.element.querySelector(".e-dlg-content")),this.setMaxHeight(),1e3===this.zIndex&&this.setzIndex(this.element,!1),this.allowDragging&&!sf.base.isNullOrUndefined(this.headerContent)&&this.setAllowDragging(),this.isModal&&sf.base.isNullOrUndefined(this.dlgContainer)&&(this.dlgContainer=this.element.parentElement,this.dlgOverlay=this.element.parentElement.getElementsByClassName("e-dlg-overlay")[0]),!sf.base.isNullOrUndefined(this.element.parentElement)&&(this.allowPrerender||!this.allowPrerender&&(!this.isInitialLoad||this.visible&&this.isInitialLoad))){var t=this.isModal?this.dlgContainer.parentElement:this.element.parentElement;this.refElement=sf.base.createElement("div",{className:"e-dlg-ref-element"}),t.insertBefore(this.refElement,this.isModal?this.dlgContainer:this.element)}sf.base.isNullOrUndefined(this.targetEle)||(this.isModal?this.targetEle.appendChild(this.dlgContainer):this.targetEle.appendChild(this.element)),this.popupObj=new sf.popups.Popup(this.element,{height:this.height,width:this.width,zIndex:this.zIndex,relateTo:this.targetEle,actionOnScroll:"none",enableRtl:this.enableRtl,position:{X:this.position.X,Y:this.position.Y},open:function(){e.enableResize&&e.resetResizeIcon(),e.openedEnabled?e.dotNetRef.invokeMethodAsync("OpenEvent",e.element.classList.toString()):e.focusContent()},close:function(){e.isModal&&(sf.base.addClass([e.dlgOverlay],"e-fade"),e.dlgContainer.style.display="none"),e.hasFocusableNode=!1,e.closedEnabled?e.dotNetRef.invokeMethodAsync("CloseEvent",e.element.classList.toString()):e.popupCloseHandler()}}),this.isModal&&this.positionChange()},t.prototype.checkPositionData=function(){sf.base.isNullOrUndefined(this.position)||(this.isNumberString(this.position.X)&&(this.position.X=parseFloat(this.position.X)),this.isNumberString(this.position.Y)&&(this.position.Y=parseFloat(this.position.Y)))},t.prototype.isNumberString=function(e){return!sf.base.isNullOrUndefined(e)&&"number"!=typeof e&&/^[-+]?\d*\.?\d+$/.test(e)},t.prototype.getTargetEle=function(e){var t;return sf.base.isNullOrUndefined(e)||"string"!=typeof e||(t=document.querySelector(e)),sf.base.isNullOrUndefined(t)?document.body:t},t.prototype.setMaxHeight=function(){if(this.allowMaxHeight){var e=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=!sf.base.isNullOrUndefined(this.target)&&this.targetEle.offsetHeight<window.innerHeight?this.targetEle.offsetHeight-20+"px":window.innerHeight-20+"px",this.element.style.display=e,sf.base.Browser.isIE&&"auto"===this.height&&!sf.base.isNullOrUndefined(this.contentEle)&&this.element.offsetHeight<this.contentEle.offsetHeight&&(this.element.style.height="inherit")}},t.prototype.setzIndex=function(e,t){this.zIndex=sf.popups.getZindexPartial(e),t&&(this.popupObj.zIndex=this.zIndex)},t.prototype.updatezIndex=function(){this.popupObj.zIndex=this.zIndex,this.isModal&&this.setOverlayZindex(this.zIndex),this.calculatezIndex=this.element.style.zIndex===this.zIndex.toString()},t.prototype.updateTarget=function(){this.targetEle=this.getTargetEle(this.target),this.popupObj.relateTo=this.targetEle,this.dragObj&&(this.dragObj.dragArea=this.targetEle),this.setMaxHeight(),this.isModal&&this.targetEle.appendChild(this.dlgContainer),this.enableResize&&this.setResize(!1)},t.prototype.resetResizeIcon=function(){var e=this.getMinHeight();if(this.targetEle.offsetHeight<e){var t=this.element.querySelector("."+this.resizeIconDirection);sf.base.isNullOrUndefined(t)||(t.style.bottom="-"+e.toString()+"px")}},t.prototype.getMouseEvtArgs=function(e){return{altKey:e.altKey,button:e.button,buttons:e.buttons,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,screenX:e.screenX,screenY:e.screenY,shiftKey:e.shiftKey,type:e.type}},t.prototype.setAllowDragging=function(){var e=this,t=this;this.dragObj=new sf.base.Draggable(this.element,{clone:!1,isDragScroll:!0,abort:".e-dlg-closeicon-btn",handle:".e-dlg-header-content",dragStart:function(i){e.onDragStartEnabled&&t.dotNetRef.invokeMethodAsync("DragStartEvent",{target:{ID:i.target.id},event:t.getMouseEvtArgs(i.event)}),i.bindEvents(i.dragElement)},drag:function(i){e.onDragEnabled&&t.dotNetRef.invokeMethodAsync("DragEvent",{target:{ID:i.target.id},event:t.getMouseEvtArgs(i.event)})},dragStop:function(i){if(t.isModal){sf.base.isNullOrUndefined(t.position)||t.dlgContainer.classList.remove("e-dlg-"+t.position.X+"-"+t.position.Y);var s=document.querySelector("html").getAttribute("dir");t.element.style.position=sf.base.isNullOrUndefined(s)||"rtl"!==s?"relative":t.element.style.position}e.onDragStopEnabled&&t.dotNetRef.invokeMethodAsync("DragStopEvent",{target:{ID:i.target.id},event:t.getMouseEvtArgs(i.event)}),t.element.classList.remove("e-restrict-left"),e.updatePersistData()}}),sf.base.isNullOrUndefined(this.targetEle)||(this.dragObj.dragArea=this.targetEle)},t.prototype.positionChange=function(){this.isModal&&(isNaN(parseFloat(this.position.X))||isNaN(parseFloat(this.position.Y)))?!isNaN(parseFloat(this.position.X))&&isNaN(parseFloat(this.position.Y))||isNaN(parseFloat(this.position.X))&&!isNaN(parseFloat(this.position.Y))?this.setPopupPosition():(this.element.style.top="0px",this.element.style.left="0px",this.dlgContainer.classList.add("e-dlg-"+this.position.X+"-"+this.position.Y)):this.setPopupPosition()},t.prototype.setPopupPosition=function(){this.popupObj.setProperties({position:{X:this.position.X,Y:this.position.Y}})},t.prototype.setEnableRTL=function(){var e=this.element.querySelector(".e-resize-handle");sf.base.isNullOrUndefined(e)||e.parentElement!==this.element||(sf.popups.removeResize(),this.setResize(!1))},t.prototype.setResize=function(e){if(this.enableResize){if(!sf.base.isNullOrUndefined(this.element.querySelector(".e-icons.e-resize-handle")))return;var t=getComputedStyle(this.element).minHeight,i=getComputedStyle(this.element).minWidth;this.isModal&&this.enableRtl?this.element.classList.add("e-restrict-left"):!this.isModal||this.target!==document.body&&"body"!==this.target||this.element.classList.add("e-resize-viewport"),sf.popups.createResize({element:this.element,direction:this.resizeIconDirection,minHeight:parseInt(t.slice(0,i.indexOf("p")),10),maxHeight:this.targetEle.clientHeight,minWidth:parseInt(i.slice(0,i.indexOf("p")),10),maxWidth:this.targetEle.clientWidth,boundary:"body"===this.target||"document.body"===this.target?null:this.targetEle,resizeBegin:this.onResizeStart.bind(this),resizeComplete:this.onResizeComplete.bind(this),resizing:this.onResizing.bind(this),proxy:this}),this.wireWindowResizeEvent()}else{if(e)return;sf.popups.removeResize(),this.unWireWindowResizeEvent(),this.isModal?this.element.classList.remove("e-restrict-left"):this.element.classList.remove("e-resize-viewport")}},t.prototype.getMinHeight=function(){var e="0px",t="0px";sf.base.isNullOrUndefined(this.element.querySelector(".e-dlg-header-content"))||(e=getComputedStyle(this.headerContent).height);var i=sf.base.select(".e-footer-content",this.element);sf.base.isNullOrUndefined(i)||(t=getComputedStyle(i).height);var s=parseInt(e.slice(0,e.indexOf("p")),10),n=parseInt(t.slice(0,t.indexOf("p")),10);return sf.popups.setMinHeight(s+30+(isNaN(n)?0:n)),s+30+n},t.prototype.changePosition=function(e){this.isModal&&this.dlgContainer.classList.contains("e-dlg-"+this.position.X+"-"+this.position.Y)&&this.dlgContainer.classList.remove("e-dlg-"+this.position.X+"-"+this.position.Y),this.updateContext(e),this.checkPositionData(),this.positionChange(),this.updatePersistData()},t.prototype.setOverlayZindex=function(e){var t;t=sf.base.isNullOrUndefined(e)?parseInt(this.element.style.zIndex,10)?parseInt(this.element.style.zIndex,10):this.zIndex:e,this.dlgOverlay.style.zIndex=(t-1).toString(),this.dlgContainer.style.zIndex=t.toString()},t.prototype.focusContent=function(){var e=this.getAutoFocusNode(this.element);(sf.base.isNullOrUndefined(e)?this.element:e).focus(),this.hasFocusableNode=!0},t.prototype.getAutoFocusNode=function(e){var t=e.querySelector(".e-dlg-closeicon-btn"),i=e.querySelectorAll("[autofocus]"),s=this.getValidFocusNode(i);if(this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0],sf.base.isNullOrUndefined(s)){if(s=this.focusableElements(this.contentEle),!sf.base.isNullOrUndefined(s))return s;if(!sf.base.isNullOrUndefined(this.primaryButtonEle))return this.element.querySelector(".e-primary")}else t=s;return t},t.prototype.getValidFocusNode=function(e){for(var t,i=0;i<e.length;i++){if(((t=e[i]).clientHeight>0||"a"===t.tagName.toLowerCase()&&t.hasAttribute("href"))&&t.tabIndex>-1&&!t.disabled&&!this.disableElement(t,'[disabled],[aria-disabled="true"],[type="hidden"]'))return t;t=null}return t},t.prototype.disableElement=function(e,t){var i=e?e.matches||e.webkitMatchesSelector||e.msGetRegionContent:null;if(i)for(;e;e=e.parentNode)if(e instanceof Element&&i.call(e,t))return e;return null},t.prototype.focusableElements=function(e){if(!sf.base.isNullOrUndefined(e)){var t=e.querySelectorAll('input,select,textarea,button,a,[contenteditable="true"],[tabindex]');return this.getValidFocusNode(t)}return null},t.prototype.getMaxHeight=function(){return this.element.style.maxHeight},t.prototype.OnPropertyChanged=function(e){this.updateContext(e);for(var t=0,i=Object.keys(e);t<i.length;t++){switch(i[t]){case"width":sf.base.setStyleAttribute(this.element,{width:sf.base.formatUnit(this.width)}),this.refreshPosition(),this.updatePersistData();break;case"height":this.setHeight(),this.refreshPosition(),this.updatePersistData();break;case"minHeight":this.setMinHeight();break;case"target":this.updateTarget();break;case"zIndex":this.updatezIndex();break;case"allowDragging":this.allowDragging?this.setAllowDragging():this.destroyDraggable();break;case"enableRtl":this.setEnableRTL();break;case"enableResize":this.setResize(!1)}}},t.prototype.fullScreen=function(t){if(t){sf.base.addClass([this.element],"e-dlg-fullscreen"),this.element.style.top=document.scrollingElement.scrollTop+"px";var i=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=sf.base.isNullOrUndefined(this.target)?window.innerHeight+"px":this.targetEle.offsetHeight+"px",this.element.style.display=i,sf.base.addClass([document.body],[e,"e-scroll-disabled"]),this.allowDragging&&!sf.base.isNullOrUndefined(this.dragObj)&&(this.dragObj.destroy(),this.dragObj=void 0)}else sf.base.removeClass([this.element],"e-dlg-fullscreen"),sf.base.removeClass([document.body],[e,"e-scroll-disabled"]),this.allowDragging&&!sf.base.isNullOrUndefined(this.headerContent)&&sf.base.isNullOrUndefined(this.dragObj)&&this.setAllowDragging()},t.prototype.show=function(t,i){if(this.isOpenFullScreen=t,!this.element.classList.contains("e-popup-open")||!sf.base.isNullOrUndefined(t)){sf.base.isNullOrUndefined(t)||this.fullScreen(t),this.element.style.maxHeight!==i&&(this.allowMaxHeight=!1,this.element.style.maxHeight=i),this.storeActiveElement=document.activeElement,this.element.tabIndex=-1,this.isModal&&sf.base.isNullOrUndefined(this.dlgOverlay)&&(this.dlgOverlay=this.element.parentElement.querySelector(".e-dlg-overlay")),this.isModal&&!sf.base.isNullOrUndefined(this.dlgOverlay)&&(this.dlgOverlay.style.display="block",this.dlgContainer.style.display="flex",sf.base.removeClass([this.dlgOverlay],"e-fade"),sf.base.isNullOrUndefined(this.targetEle)?sf.base.addClass([document.body],[e,"e-scroll-disabled"]):(this.targetEle===document.body?this.dlgContainer.style.position="fixed":this.dlgContainer.style.position="absolute",this.dlgOverlay.style.position="absolute",this.element.style.position="relative",sf.base.addClass([this.targetEle],[e,"e-scroll-disabled"])));var s={name:"None"===this.animationSettings.effect&&"Enable"===sf.base.animationMode?"Fade":this.animationSettings.effect+"In",duration:this.animationSettings.duration,delay:this.animationSettings.delay},n=this.isModal?this.element.parentElement:this.element;this.calculatezIndex&&(this.setzIndex(n,!0),sf.base.setStyleAttribute(this.element,{zIndex:this.zIndex}),this.isModal&&this.setOverlayZindex(this.zIndex)),"None"===this.animationSettings.effect&&"Enable"!==sf.base.animationMode||"Disable"===sf.base.animationMode?this.popupObj.show():this.popupObj.show(s)}},t.prototype.hide=function(){(this.isModal||this.isOpenFullScreen)&&sf.base.removeClass([this.targetEle,document.body],[e,"e-scroll-disabled"]);var t={name:"None"===this.animationSettings.effect&&"Enable"===sf.base.animationMode?"Fade":this.animationSettings.effect+"Out",duration:this.animationSettings.duration,delay:this.animationSettings.delay};return"None"===this.animationSettings.effect&&"Enable"!==sf.base.animationMode||"Disable"===sf.base.animationMode?this.popupObj.hide():this.popupObj.hide(t),this.allowPrerender||this.destroyRefElement(),this.element.classList.toString()},t.prototype.refreshPosition=function(){this.isModal&&isNaN(parseFloat(this.position.X))&&isNaN(parseFloat(this.position.Y))?(this.element.style.top=this.element.style.left="0px",this.dlgContainer.classList.add("e-dlg-"+this.position.X+"-"+this.position.Y)):this.popupObj.refreshPosition()},t.prototype.getDimension=function(){return{width:this.element.offsetWidth,height:this.element.offsetHeight}},t.prototype.destroyDraggable=function(){sf.base.isNullOrUndefined(this.dragObj)||(this.dragObj.destroy(),this.dragObj=void 0)},t.prototype.destroyRefElement=function(){sf.base.isNullOrUndefined(this.refElement)||sf.base.isNullOrUndefined(this.refElement.parentElement)||(this.refElement.parentElement.insertBefore(this.isModal?this.dlgContainer:this.element,this.refElement),sf.base.detach(this.refElement),this.refElement=void 0)},t.prototype.destroy=function(t,i){this.updateContext(t);var s=["role","aria-modal","aria-labelledby","aria-describedby","aria-grabbed","tabindex","style"];if(!sf.base.isNullOrUndefined(this.cssClass)&&""!==this.cssClass){var n=this.cssClass.split(" ");sf.base.removeClass([this.element],n)}if(sf.base.Browser.isDevice&&sf.base.removeClass([this.element],"e-device"),sf.base.removeClass([this.getTargetEle(this.target)],[e,"e-scroll-disabled"]),this.unBindEvent(this.element),this.element.classList.contains("e-dlg-fullscreen")&&sf.base.removeClass([document.body],[e,"e-scroll-disabled"]),this.isModal&&sf.base.removeClass([sf.base.isNullOrUndefined(this.targetEle)?document.body:this.targetEle],"e-scroll-disabled"),this.element.classList.contains("e-dlg-resizable")&&this.element.classList.remove("e-dlg-resizable"),this.element.classList.contains("e-draggable")&&(this.dragObj.destroy(),this.dragObj=void 0),this.element.classList.contains("e-popup")&&(this.popupObj.destroy(),this.popupObj=void 0),this.destroyRefElement(),i)for(var o=0;o<this.element.children.length;o++)this.element.children[o].classList.add("e-hide");else if(!sf.base.isNullOrUndefined(this.element.children))for(o=0;o<=this.element.children.length;o++)o-=o,sf.base.detach(this.element.children[o]);for(o=0;o<s.length;o++)this.element.removeAttribute(s[o]);if(this.isModal){sf.base.detach(this.element.nextElementSibling);var r=this.element.parentElement;r.removeAttribute("class"),r.removeAttribute("style"),this.element.classList.remove("e-dlg-modal")}this.element.classList.remove("e-dialog")},t.prototype.bindEvent=function(e){sf.base.EventHandler.add(e,"keydown",this.keyDown,this),sf.base.Browser.isDevice&&sf.base.EventHandler.add(window,"orientationchange",this.orientationOnChange,this)},t.prototype.unBindEvent=function(e){sf.base.EventHandler.remove(e,"keydown",this.keyDown),sf.base.Browser.isDevice&&sf.base.EventHandler.remove(window,"orientationchange",this.orientationOnChange)},t.prototype.wireWindowResizeEvent=function(){window.addEventListener("resize",this.windowResizeHandler.bind(this))},t.prototype.unWireWindowResizeEvent=function(){window.removeEventListener("resize",this.windowResizeHandler.bind(this))},t.prototype.orientationOnChange=function(){var e=this;this.element.style.display="none",setTimeout((function(){sf.popups.setMaxWidth(e.targetEle.clientWidth),sf.popups.setMaxHeight(e.targetEle.clientHeight),e.setMaxHeight(),e.refreshPosition(),e.element.style.display=""}),250)},t.prototype.popupCloseHandler=function(){var e=document.activeElement;sf.base.isNullOrUndefined(e)||sf.base.isNullOrUndefined(e.blur)||e.blur(),sf.base.isNullOrUndefined(this.storeActiveElement)||sf.base.isNullOrUndefined(this.storeActiveElement.focus)||this.storeActiveElement.focus()},t.prototype.windowResizeHandler=function(){sf.popups.setMaxWidth(this.targetEle.clientWidth),sf.popups.setMaxHeight(this.targetEle.clientHeight),this.setMaxHeight()},t.prototype.onResizeStart=function(e,t){var i=this.getMouseEvtArgs(e);this.onResizeStartEnabled&&this.dotNetRef.invokeMethodAsync("ResizeStartEvent",i)},t.prototype.onResizing=function(e,t){this.resizingEnabled&&this.dotNetRef.invokeMethodAsync("ResizingEvent",this.getMouseEvtArgs(e))},t.prototype.onResizeComplete=function(e,t){this.onResizeStopEnabled&&this.dotNetRef.invokeMethodAsync("ResizeStopEvent",this.getMouseEvtArgs(e)),this.updatePersistData()},t.prototype.updatePersistData=function(){this.enablePersistence&&window.localStorage.setItem(this.dataId,JSON.stringify({width:parseFloat(this.element.style.width),height:parseFloat(this.element.style.height),X:parseFloat(this.element.style.left),Y:parseFloat(this.element.style.top)}))},t.prototype.getFocusElement=function(e){var t=e.querySelectorAll('input,select,textarea,button:enabled,a,[contenteditable="true"],[tabindex]');return t[t.length-1]},t.prototype.keyDown=function(e){var t=this;if(9===e.keyCode&&this.isModal){var i=void 0,s=void 0,n=this.element.querySelector(".e-footer-content");sf.base.isNullOrUndefined(n)||(s=n.querySelectorAll("button"),!sf.base.isNullOrUndefined(i)&&s.length>0&&(i=s[s.length-1]),sf.base.isNullOrUndefined(i)&&n.childNodes.length>0&&(i=this.getFocusElement(n))),sf.base.isNullOrUndefined(n)&&!sf.base.isNullOrUndefined(this.contentEle)&&(i=this.getFocusElement(this.contentEle)),sf.base.isNullOrUndefined(i)||document.activeElement!==i||e.shiftKey||(e.preventDefault(),this.focusableElements(this.element).focus()),document.activeElement===this.focusableElements(this.element)&&e.shiftKey&&(e.preventDefault(),sf.base.isNullOrUndefined(i)||i.focus())}if(27===e.keyCode&&this.closeOnEscape&&(document.querySelector(".e-popup-open:not(.e-dialog, .e-tooltip-wrap, .e-toolbar-pop)")||this.dotNetRef.invokeMethodAsync("CloseDialog",{altKey:e.altKey,ctrlKey:e.ctrlKey,code:e.code,key:e.key,location:e.location,repeat:e.repeat,shiftKey:e.shiftKey,metaKey:e.metaKey,type:e.type})),this.hasFocusableNode){var o=document.activeElement,r=["input","textarea"].indexOf(o.tagName.toLowerCase())>-1,a=!1;r||(a=o.hasAttribute("contenteditable")&&"true"===o.getAttribute("contenteditable")),(13===e.keyCode&&!e.ctrlKey&&"textarea"!==o.tagName.toLowerCase()&&r&&!sf.base.isNullOrUndefined(this.primaryButtonEle)||13===e.keyCode&&e.ctrlKey&&("textarea"===o.tagName.toLowerCase()||a)&&!sf.base.isNullOrUndefined(this.primaryButtonEle))&&setTimeout((function(){t.element.querySelector(".e-footer-content button.e-btn.e-primary").click()}))}},t}();return{initialize:function(e){e.dataId&&new t(e)},getClassList:function(e){return e&&e.classList.toString()},getMaxHeight:function(e){return e&&window.sfBlazor.getCompInstance(e).getMaxHeight()},changePosition:function(e){e.dataId&&window.sfBlazor.getCompInstance(e.dataId).changePosition(e)},updateAnimation:function(e){e.dataId&&window.sfBlazor.getCompInstance(e.dataId).updateContext(e)},focusContent:function(e){e&&window.sfBlazor.getCompInstance(e).focusContent()},refreshPosition:function(e){e&&window.sfBlazor.getCompInstance(e).refreshPosition()},getDimension:function(e){return e&&window.sfBlazor.getCompInstance(e).getDimension()},popupCloseHandler:function(e){e&&window.sfBlazor.getCompInstance(e).popupCloseHandler()},propertyChanged:function(e){e.dataId&&window.sfBlazor.getCompInstance(e.dataId).OnPropertyChanged(e)},show:function(e){e.dataId&&window.sfBlazor.getCompInstance(e.dataId).show(e.fullScreen,e.maxHeight)},hide:function(e){return e&&window.sfBlazor.getCompInstance(e).hide()},destroy:function(e){e.dataId&&window.sfBlazor.getCompInstance(e.dataId).destroy(e,e.isClient)}}}()},"./modules/sf-drop-down-button.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.DropDownButton=function(){"use strict";var e="e-colorpicker-container",t=".e-colorpicker.e-modal",i="mousedown touchstart",s=function(){function s(e,t,i,s,n){this.isPopupClick=!1,this.dataId=s,this.cp_dataId=n,this.element=e,this.dotNetRef=i,this.popup=t,window.sfBlazor.setCompInstance(this),this.addScrollEvents(!0)}return s.prototype.openPopup=function(t){this.popup.style.visibility="hidden",document.body.appendChild(this.popup),t&&sf.splitbuttons.setBlankIconStyle(this.popup),this.popup.classList.remove("e-transparent");var s=sf.popups.getZindexPartial(this.element),n=this.element.parentElement.classList.contains(e);n&&window.sfBlazor.getCompInstance(this.cp_dataId).setPaletteWidth(this.popup.querySelector(".e-container"),!1,s);(this.setPosition(n),sf.base.EventHandler.remove(document,i,this.mouseDownHandler),this.addEventListener(),this.popup.style.zIndex=s+"",this.popup.style.visibility="",n)&&window.sfBlazor.getCompInstance(this.cp_dataId).setOffset(this.popup,s);if(this.popup.firstElementChild)if(this.popup.firstElementChild.firstElementChild&&n)this.popup.firstElementChild.firstElementChild.focus();else{var o=this.popup.firstElementChild.querySelector(".e-palette");o?o.focus():this.popup.firstElementChild.focus()}},s.prototype.setPosition=function(e){var t,i,s=this.element.getBoundingClientRect(),n=this.popup.getBoundingClientRect();e&&sf.base.Browser.isDevice?(t=document.documentElement.clientWidth/2-n.width/2+pageXOffset,i=document.documentElement.clientHeight/2-n.height/2+pageYOffset):(t=s.left+pageXOffset,i=s.bottom+pageYOffset,s.bottom+n.height>document.documentElement.clientHeight&&i-s.height-n.height>document.documentElement.clientTop&&(i=i-s.height-n.height),s.left+n.width>document.documentElement.clientWidth&&s.right-n.width>document.documentElement.clientLeft&&(t=t+s.width-n.width)),this.popup.style.left=Math.ceil(t)+"px",this.popup.style.top=Math.ceil(i)+"px"},s.prototype.mouseDownHandler=function(i){if(this.popup.parentElement){var s=i.target,n=!0,o=this.element.parentElement.classList.contains(e);if(o){var r=window.sfBlazor.getCompInstance(this.cp_dataId);(sf.base.closest(s,".e-apply")||sf.base.closest(s,".e-cancel"))&&r.removeZIndex()}if(!sf.base.Browser.isDevice&&s.classList.contains("e-hsv-model")){var a=s.parentElement.getBoundingClientRect(),l=this.element.getBoundingClientRect();n=i.clientX>=a.left&&i.clientX<=a.right&&i.clientY>=a.top&&i.clientY<=a.bottom||i.clientX>=l.left&&i.clientX<=l.right&&i.clientY>=l.top&&i.clientY<=l.bottom}if(!n||!sf.base.closest(s,"#"+this.getDropDownButton().id)&&!sf.base.closest(i.target,"#"+this.popup.id)&&!sf.base.closest(i.target,t)){if(o)(r=window.sfBlazor.getCompInstance(this.cp_dataId)).removeZIndex();this.dotNetRef.invokeMethodAsync("ButtonClickAsync",null),this.removeEventListener()}}else this.removeEventListener()},s.prototype.keydownHandler=function(t){var i=this.getElement(),s=this.element.parentElement.classList.contains(e),n=this.element.parentElement.classList.contains("e-rtl");s&&window.sfBlazor.getCompInstance(this.cp_dataId).paletteKeyDown(t,n);if(t.altKey)38===t.keyCode&&(t.stopPropagation(),t.preventDefault(),this.dotNetRef.invokeMethodAsync("ButtonClickAsync",null),i.focus(),this.removeEventListener());else{var o=this.popup.firstElementChild;if((27===t.keyCode||9===t.keyCode&&!s)&&(t.stopPropagation(),this.dotNetRef.invokeMethodAsync("ButtonClickAsync",null),27===t.keyCode&&t.preventDefault(),i.focus(),this.removeEventListener()),!o||!o.classList.contains("e-dropdown-menu"))return;if(13===t.keyCode)return t.preventDefault(),void(t.target.classList.contains("e-item")&&t.target.classList.contains("e-focused")?(i.focus(),this.removeEventListener()):t.stopPropagation());38!==t.keyCode&&40!==t.keyCode||(t.target.classList.contains("e-dropdown-menu")&&t.stopPropagation(),t.preventDefault(),sf.splitbuttons.upDownKeyHandler(o,t.keyCode))}},s.prototype.getElement=function(){return this.element.classList.contains("e-split-btn-wrapper")?this.element.firstElementChild:this.element},s.prototype.getDropDownButton=function(){return this.element.classList.contains("e-split-btn-wrapper")?this.element.getElementsByClassName("e-dropdown-btn")[0]:this.element},s.prototype.closePopup=function(){if(this.removeEventListener(),this.isPopupClick&&(this.getElement().focus(),this.isPopupClick=!1),this.element.parentElement.classList.contains(e)&&sf.base.Browser.isDevice){var i=document.querySelector(t);i&&i.remove()}},s.prototype.dropDownClickHandler=function(t){if(this.element.parentElement.classList.contains(e)){var i=window.sfBlazor.getCompInstance(this.cp_dataId);sf.base.closest(t.target,".e-dropdown-btn")&&i.removeZIndex()}},s.prototype.scrollHandler=function(t){if(this.popup&&document.getElementById(this.popup.id)){var i=this.element.parentElement.classList.contains(e);if(this.setPosition(i),i)window.sfBlazor.getCompInstance(this.cp_dataId).setOffset(this.popup)}else{var s=this.getDropDownButton();s&&document.getElementById(s.id)||sf.base.EventHandler.remove(t.target,"scroll",this.scrollHandler)}},s.prototype.clickHandler=function(e){this.isPopupClick=!0},s.prototype.addEventListener=function(e){if(sf.base.EventHandler.add(document,i,this.mouseDownHandler,this),sf.base.EventHandler.add(this.popup,"click",this.clickHandler,this),sf.base.EventHandler.add(this.popup,"keydown",this.keydownHandler,this),sf.base.EventHandler.add(this.element,"click",this.dropDownClickHandler,this),e&&this.popup.firstElementChild){var t=this.popup.querySelector(".e-focused");t?t.focus():this.popup.firstElementChild.focus()}},s.prototype.removeEventListener=function(e){if(sf.base.EventHandler.remove(document,i,this.mouseDownHandler),sf.base.EventHandler.remove(this.element,"click",this.dropDownClickHandler),this.popup.parentElement&&(sf.base.EventHandler.remove(this.popup,"click",this.clickHandler),sf.base.EventHandler.remove(this.popup,"keydown",this.keydownHandler),e)){var t=this.getDropDownButton();t&&document.getElementById(t.id)&&(this.addScrollEvents(!1),this.element.appendChild(this.popup))}},s.prototype.addScrollEvents=function(e){for(var t=0,i=sf.popups.getScrollableParent(this.element);t<i.length;t++){var s=i[t];e?sf.base.EventHandler.add(s,"scroll",this.scrollHandler,this):sf.base.EventHandler.remove(s,"scroll",this.scrollHandler)}},s}();return{openPopup:function(e,t,i,n,o,r){var a=window.sfBlazor.getCompInstance(o);sf.base.isNullOrUndefined(e)||(sf.base.isNullOrUndefined(a)?(new s(e,t,i,o,r),a=window.sfBlazor.getCompInstance(o)):a.popup=t,a.openPopup(n))},addEventListener:function(e){var t=window.sfBlazor.getCompInstance(e);t.removeEventListener(),t.addEventListener(!0)},removeEventListener:function(e){window.sfBlazor.getCompInstance(e).removeEventListener(!0)},closePopup:function(e){window.sfBlazor.getCompInstance(e).closePopup()},setIconStyle:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.splitbuttons.setBlankIconStyle(i.popup,t)}}}()},"./modules/sf-dropdownlist.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.DropDownList=function(){"use strict";var e=function(){return(e=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},t="e-list-group-item",i=function(){function i(e,t,i,s,n){var o=this;this.activeIndex=null,this.prevSelectPoints={},window.sfBlazor=window.sfBlazor,this.preStartIndex=0,this.startIndex=0,this.currentPage=0,this.virtualPopupHeight=0,this.isKeyBoardAction=!1,this.scrollPreStartIndex=0,this.isScrollActionMade=!1,this.preventScrollAction=!1,this.bindScrollEvent=function(){o.observe((function(e){return o.scrollListener(e)}))},this.sentinelInfo={up:{check:function(e,t){var i=e.top-o.containerRect.top;return t.entered=i>=0,i+o.listHeight*o.options.virtualizedItemsCount/2>=0},axis:"Y"},down:{check:function(e,t){o.popupContentEle.clientHeight;var i=e.bottom;return t.entered=e.bottom<=o.containerRect.bottom,i-o.listHeight*o.options.virtualizedItemsCount/2<=o.listHeight*o.options.virtualizedItemsCount/2},axis:"Y"}},this.dataId=e,this.containerElement=t,this.element=i,this.options=n,window.sfBlazor.setCompInstance(this),this.dotNetRef=s}return i.prototype.initialize=function(){this.keyConfigure={tab:"tab",enter:"13",escape:"27",end:"35",home:"36",down:"40",up:"38",pageUp:"33",pageDown:"34",open:"alt+40",close:"shift+tab",hide:"alt+38",space:"32"},sf.base.Browser.isDevice||new sf.base.KeyboardEvents(this.containerElement,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),"SfComboBox"===this.options.moduleName&&sf.base.EventHandler.add(this.element,"keydown",this.onFilterDown,this)},i.prototype.findListElement=function(e,t,i,s){var n=null;if(e)for(var o=[].slice.call(e.querySelectorAll(t)),r=0;r<o.length;r++)if(o[r].getAttribute(i)===s+""){n=o[r];break}return n},i.prototype.updateSelectionList=function(){if(!this.list.querySelector(".e-active")&&this.options.value){var e=this.findListElement(this.list,"li","data-value",this.options.value);e&&e.classList.add("e-active")}},i.prototype.scrollListener=function(t){var i=this;if(!this.preventScrollAction){var s=t.sentinel,n=this.preStartIndex;if(this.viewInfo=this.getInfoFromView(t.direction,s,t.offset,!1),this.preStartIndex===n||this.isKeyBoardAction){if(this.isScrollActionMade){var o=this.list.querySelectorAll(".e-virtual-list").length,r=this.list.querySelector(".e-list-item"),a=t.offset.top-r.offsetHeight*o;this.list.getElementsByClassName("e-virtual-ddl-content")[0].style.transform="translate(0px,"+a+"px)"}}else this.isScrollActionMade=!1,this.currentPage=this.viewInfo.currentPage,this.virtualInfo=e({},this.viewInfo),setTimeout((function(){i.dotNetRef.invokeMethodAsync("VirtualScrollRefreshAsync",{virtualItemStartIndex:i.viewInfo.startIndex,virtualItemEndIndex:i.viewInfo.endIndex,listItemHeight:i.getRowHeight(),scrollTop:i.viewInfo.offsets.top}).then((function(){i.popupObj&&(i.list=i.popupObj.element.querySelector(".e-content")||sf.base.select(".e-content"),i.updateSelectionList(),i.liCollections=i.getItems())}))}),10);this.prevInfo=this.viewInfo,this.isKeyBoardAction=!1}},i.prototype.getRowHeight=function(){return sf.base.isNullOrUndefined(this.liCollections)||0==this.liCollections.length?0:Math.ceil(this.liCollections[0].getBoundingClientRect().height)},i.prototype.getInfoFromView=function(e,t,i,s){var n={direction:e,sentinelInfo:t,offsets:i,startIndex:this.preStartIndex,endIndex:this.preEndIndex},o=this.popupContentEle.getBoundingClientRect().height,r=this.listHeight,a=i.top/r,l=o/r,h=a+l,d=this.options.virtualizedItemsCount/4,c=this.options.totalCount;if("down"===n.direction){var p=Math.round(h)-Math.round(d);if(sf.base.isNullOrUndefined(n.startIndex)||h>n.startIndex+Math.round(this.options.virtualizedItemsCount/2+d)&&n.endIndex!==c){n.startIndex=p>=0?Math.round(p):0,n.startIndex=n.startIndex>a?Math.floor(a):n.startIndex;var u=n.startIndex+this.options.virtualizedItemsCount;n.startIndex=u<h?Math.ceil(h)-this.options.virtualizedItemsCount:n.startIndex,n.endIndex=u<c?u:c,n.startIndex=u>=c?n.endIndex-this.options.virtualizedItemsCount>0?n.endIndex-this.options.virtualizedItemsCount:0:n.startIndex,n.currentPage=Math.ceil(n.endIndex/this.options.virtualizedItemsCount)}}else if("up"===n.direction){if(n.startIndex&&n.endIndex)if(a<Math.round((n.startIndex*r+d*r)/r)){var f=d>l?d:l+l/4;u=Math.round(a+f);n.endIndex=u<c?u:c;p=n.endIndex-this.options.virtualizedItemsCount;n.startIndex=p>0?p:0,n.endIndex=p<0?this.options.virtualizedItemsCount:n.endIndex,n.currentPage=Math.ceil(n.startIndex/this.options.virtualizedItemsCount)}}return s?this.scrollPreStartIndex=n.startIndex:(this.preStartIndex=n.startIndex,this.startIndex=n.startIndex,this.preEndIndex=n.endIndex),n},i.prototype.observe=function(e){this.containerRect=this.popupContentEle.getBoundingClientRect(),sf.base.EventHandler.add(this.popupContentEle,"wheel mousedown",this.popupScrollHandler,this),this.touchModule=new sf.base.Touch(this.popupContentEle,{scroll:this.popupScrollHandler.bind(this)}),sf.base.EventHandler.add(this.popupContentEle,"scroll",this.virtualScrollHandler(e),this)},i.prototype.popupScrollHandler=function(e){this.preventScrollAction=!1},i.prototype.virtualScrollHandler=function(e){var t=this,i="chrome"===sf.base.Browser.info.name?200:100,s=0,n=sf.base.debounce(e,i),o=sf.base.debounce(e,50);return function(e){var i=e.target.scrollTop,r=e.target.scrollLeft,a=s<i?"down":"up";s=i;var l=t.sentinelInfo[a],h=t.scrollPreStartIndex,d={top:i,left:r};if(t.list.querySelectorAll(".e-virtual-list").length>0){t.getInfoFromView(a,l,d,!0);if(t.scrollPreStartIndex!=h&&!t.preventScrollAction)t.isScrollActionMade=!0,t.list.querySelector(".e-virtual-ddl-content").style.transform="translate(0px,"+i+"px)"}var c=n;"X"===l.axis&&(c=o),c({direction:a,sentinel:l,offset:{top:i,left:r},focusElement:document.activeElement})}},i.prototype.setAutoFillSelection=function(e){this.isAndroidAutoFill(e)||this.autoFillSelection(e)},i.prototype.onFilterDown=function(e){13!==e.keyCode&&40!==e.keyCode&&38!==e.keyCode&&9!==e.keyCode&&(this.prevSelectPoints=this.getSelectionPoints())},i.prototype.getSelectionPoints=function(){var e=this.element;return{start:Math.abs(e.selectionStart),end:Math.abs(e.selectionEnd)}},i.prototype.autoFillSelection=function(e){var t=this.getSelectionPoints(),i=this.element.value.substr(0,t.start);if(i&&i.toLowerCase()===e.substr(0,t.start).toLowerCase()){var s=i+e.substr(i.length,e.length);this.element.value=s,this.element.setSelectionRange(t.start,this.element.value.length)}else this.element.value=e,this.element.setSelectionRange(0,this.element.value.length)},i.prototype.isAndroidAutoFill=function(e){if(sf.base.Browser.isAndroid){var t=this.getSelectionPoints(),i=this.prevSelectPoints.end,s=t.end,n=this.prevSelectPoints.start,o=t.start;return 0!==i&&(i===e.length&&n===e.length||n>o&&i>s||i===s&&n===o)}return!1},i.prototype.removeFillSelection=function(){var e=this.getSelectionPoints();this.element.setSelectionRange(e.end,e.end)},i.prototype.keyActionHandler=function(e){var t={Action:e.action,Key:e.key,Events:e,Type:e.type};this.isDisposed||("space"===e.action&&"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&e.preventDefault(),this.dotNetRef.invokeMethodAsync("KeyActionHandler",t)),("tab"!==e.action&&"close"!==e.action&&"space"!==e.action&&"enter"!==e.action&&"open"!==e.action&&("SfDropDownList"===this.options.moduleName||"home"!==e.action&&"end"!==e.action)||"enter"===e.action&&!sf.base.isNullOrUndefined(this.isPopupOpen()))&&e.preventDefault()},i.prototype.getOffsetValue=function(e){var t=getComputedStyle(e),i=parseInt(t.borderTopWidth,10),s=parseInt(t.borderBottomWidth,10);return this.setPopupPosition(i+s)},i.prototype.setPopupPosition=function(e){var t,i=e,s=this.list.querySelector(".e-item-focus")||this.list.querySelector(".e-active"),n=this.isEmptyList()?this.list:this.liCollections[0],o=this.isEmptyList()?this.list:this.liCollections[this.getItems().length-1],r=n.getBoundingClientRect().height,a=this.list.offsetHeight/2,l=sf.base.isNullOrUndefined(s)?n.offsetTop:s.offsetTop;if(o.offsetTop-a<l&&!sf.base.isNullOrUndefined(this.liCollections)&&this.liCollections.length>0&&!sf.base.isNullOrUndefined(s)){var h=this.list.offsetHeight/r,d=parseInt(getComputedStyle(this.list).paddingBottom,10);t=(h-(this.liCollections.length-this.activeIndex))*r-i+d,this.list.scrollTop=s.offsetTop}else l>a?(t=a-r/2,this.list.scrollTop=l-a+r/2):t=l;return-(t=t+r+i-(r-this.containerElement.offsetHeight)/2)},i.prototype.getItems=function(){return this.list?this.list.querySelectorAll(".e-list-item"):[]},i.prototype.getListHeight=function(){var e=sf.base.createElement("div",{className:"e-dropdownbase"}),t=sf.base.createElement("li",{className:"e-list-item"}),i=sf.base.formatUnit(this.options.popupHeight);e.style.height=parseInt(i,10).toString()+"px",e.appendChild(t),document.body.appendChild(e),this.virtualPopupHeight=e.getBoundingClientRect().height;var s=Math.ceil(t.getBoundingClientRect().height);return e.remove(),s},i.prototype.renderPopup=function(e,t,i,s,n,o){var r=this;this.options=n,this.popupHolder=t,this.popupContentEle=e.querySelector(".e-content"),this.list=t.querySelector(".e-content")||sf.base.select(".e-content",this.popupContainer),this.liCollections=this.getItems();var a,l=0;this.preventScrollAction=!0;var h,d=sf.base.formatUnit(this.options.popupHeight);if(this.wireListEvents(),e){var c=document.getElementById(e.id);c&&sf.base.remove(c)}if(document.body.appendChild(e),e.style.visibility="hidden",this.options.allowFiltering&&("SfDropDownList"===this.options.moduleName?(this.filterInput=e.querySelector("input.e-input"),h=this.filterInput.parentElement,new sf.base.KeyboardEvents(this.filterInput,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"})):this.filterInput=this.element),"auto"!==this.options.popupHeight){var p=0;if(sf.base.isNullOrUndefined(h)||(p=h.parentElement.getBoundingClientRect().height,d=(parseInt(d,10)-p).toString()+"px"),e.querySelector(".e-ddl-header")){var u=e.querySelector(".e-ddl-header"),f=Math.round(u.getBoundingClientRect().height);d=(parseInt(d,10)-(f+p)).toString()+"px"}if(e.querySelector(".e-ddl-footer")){var g=e.querySelector(".e-ddl-footer");f=Math.round(g.getBoundingClientRect().height);d=(parseInt(d,10)-(f+p)).toString()+"px"}this.list.style.maxHeight=(parseInt(d,10)-2).toString()+"px",e.style.maxHeight=sf.base.formatUnit(this.options.popupHeight)}else e.style.height="auto";if(this.list&&"SfAutoComplete"!==this.options.moduleName&&!this.list.classList.contains("e-nodata")&&this.setScrollPosition(),sf.base.Browser.isDevice&&!this.options.allowFiltering&&("SfDropDownList"===this.options.moduleName||"SfComboBox"===this.options.moduleName)){l=this.getOffsetValue(e);var m=this.isEmptyList()?this.list:this.liCollections[0];a=-(parseInt(getComputedStyle(m).textIndent,10)-parseInt(getComputedStyle(this.element).paddingLeft,10)+parseInt(getComputedStyle(this.element.parentElement).borderLeftWidth,10))}this.popupCreation(e,l,a);var v=e.querySelectorAll("li.e-list-item");this.listHeight=v.length>0?Math.ceil(v[0].getBoundingClientRect().height):0,this.checkCollision(e),sf.base.Browser.isDevice&&(this.popupObj.element.classList.add("e-ddl-device"),("SfDropDownList"===this.options.moduleName||"SfComboBox"===this.options.moduleName&&!this.options.allowFiltering)&&(this.popupObj.collision={X:"fit",Y:"fit"}),this.options.allowFiltering&&"SfDropDownList"===this.options.moduleName&&(this.popupObj.element.classList.add("e-ddl-device-filter"),this.popupObj.position={X:0,Y:0},this.popupObj.dataBind(),sf.base.attributes(this.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;z-index:"+this.options.zIndex.toString()+";"}),sf.base.addClass([document.body,this.popupObj.element],"e-popup-full-page"),this.setSearchBoxPosition())),e.style.visibility="visible";var b=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);if(this.options.allowFiltering&&"SfDropDownList"===this.options.moduleName&&sf.base.Browser.isDevice&&b&&(e.style.position="fixed"),sf.base.addClass([e],"e-popup-close"),sf.base.Browser.isDevice){if("SfDropDownList"===this.options.moduleName&&!this.options.allowFiltering||"SfComboBox"===this.options.moduleName&&!this.options.allowFiltering)for(var y=0,M=this.popupObj.getScrollableParent(this.containerElement);y<M.length;y++){var C=M[y];sf.base.EventHandler.add(C,"scroll",this.scrollHandler,this)}this.isFilterLayout()&&sf.base.EventHandler.add(this.list,"scroll",this.listScroll,this)}if(null!==i&&null!==i.popup&&s){for(var w=0,S=Object.keys(i.popup);w<S.length;w++){switch(S[w]){case"collision":!i.popup.collision||this.popupObj.collision.X===i.popup.collision.X.toLowerCase()&&this.popupObj.collision.Y===i.popup.collision.Y.toLowerCase()||(this.popupObj.collision={X:i.popup.collision.X.toLowerCase(),Y:i.popup.collision.Y.toLowerCase()});break;case"position":!this.popupObj.position||this.popupObj.position.X===i.popup.position.X&&this.popupObj.position.Y===i.popup.position.Y||(this.popupObj.position={X:i.popup.position.X,Y:i.popup.position.Y});break;case"relateTo":this.popupObj.relateTo!==i.popup.relateTo&&(this.popupObj.relateTo=i.popup.relateTo);break;case"targetType":this.popupObj.targetType!==i.popup.targetType.toLowerCase()&&(this.popupObj.targetType=i.popup.targetType);break;case"offsetX":this.popupObj.offsetX!==i.popup.offsetX&&(this.popupObj.offsetX=i.popup.offsetX);break;case"offsetY":this.popupObj.offsetY!==i.popup.offsetY&&(this.popupObj.offsetY=i.popup.offsetY)}}this.popupObj.dataBind(),this.popupObj.refreshPosition(this.popupObj.relateTo,!0)}this.options.enableVirtualization&&(this.bindScrollEvent(),setTimeout((function(){r.updateSelectionList(),r.options.scrollTop&&r.options.value&&(r.list.scrollTop=r.options.scrollTop)}),10)),"SfDropDownList"!==this.options.moduleName&&sf.base.attributes(this.element,{"aria-expanded":"true"}),sf.base.attributes(this.element,{"aria-owns":this.element.id+"_popup"});var N=this.options.allowFiltering?this.filterInput.parentElement:this.containerElement;sf.base.addClass([N],["e-input-focus"]);this.popupObj.show(new sf.base.Animation({name:"FadeIn",duration:100}),1e3===this.options.zIndex?this.element:null)},i.prototype.wireListEvents=function(){sf.base.EventHandler.add(this.list,"mouseover",this.onMouseOver,this),sf.base.EventHandler.add(this.list,"mouseout",this.onMouseLeave,this)},i.prototype.unWireListEvents=function(){sf.base.EventHandler.remove(this.list,"mouseover",this.onMouseOver),sf.base.EventHandler.remove(this.list,"mouseout",this.onMouseLeave)},i.prototype.onMouseOver=function(e){var t=sf.base.closest(e.target,".e-list-item");this.setHover(t)},i.prototype.onMouseLeave=function(e){this.removeHover()},i.prototype.listScroll=function(){this.filterInput.blur()},i.prototype.scrollHandler=function(){this.isDisposed||this.dotNetRef.invokeMethodAsync("Hide")},i.prototype.setFloatingHeader=function(e){var i=this.popupContainer&&this.popupContainer.querySelector(".e-content");i&&i.classList.contains("e-nodata")&&this.fixedHeaderElement?(sf.base.remove(this.fixedHeaderElement),this.fixedHeaderElement=null):this.list&&this.list.querySelector("li")&&(sf.base.isNullOrUndefined(this.fixedHeaderElement)&&(this.fixedHeaderElement=sf.base.createElement("div",{className:"e-fixed-head"}),this.list.querySelector("li").classList.contains(t)||(this.fixedHeaderElement.style.display="none"),sf.base.prepend([this.fixedHeaderElement],this.list),this.setFixedHeader()),this.scrollStop(e))},i.prototype.setFixedHeader=function(){this.list.parentElement.style.display="block";var e=0;this.list&&this.list.parentElement&&(e=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-width"),10));var i=(this.list?this.list.querySelectorAll(".e-list-item")[0].offsetWidth:0)-e;this.fixedHeaderElement.style.width=i.toString()+"px",sf.base.setStyleAttribute(this.fixedHeaderElement,{zIndex:10});var s=this.list.querySelector("."+t);this.fixedHeaderElement.innerHTML=s.innerHTML},i.prototype.scrollStop=function(e){for(var i=e.target,s=this.list.querySelectorAll("li"),n=parseInt(getComputedStyle(s[0],null).getPropertyValue("height"),10),o=Math.round(i.scrollTop/n);o>-1;o--){if(!sf.base.isNullOrUndefined(s[o])&&s[o].classList.contains(t)){var r=s[o];this.fixedHeaderElement.innerHTML=r.innerHTML,this.fixedHeaderElement.style.top=e.target.scrollTop+"px",this.fixedHeaderElement.style.display="block";break}this.fixedHeaderElement.style.display="none",this.fixedHeaderElement.style.top="none"}},i.prototype.isFilterLayout=function(){return"SfDropDownList"===this.options.moduleName&&this.options.allowFiltering},i.prototype.setSearchBoxPosition=function(){var e=this.popupObj.element.querySelector("span.e-filter-parent").getBoundingClientRect().height,t=this.popupObj.element.querySelector(".e-ddl-footer"),i=this.popupObj.element.querySelector(".e-ddl-header");this.popupObj.element.style.maxHeight="100%",this.popupObj.element.style.width="100%";var s=t?t.getBoundingClientRect().height:0,n=i?i.getBoundingClientRect().height:0;this.list.style.maxHeight=this.list.style.height=window.innerHeight-(s+n+e+4)+"px"},i.prototype.checkCollision=function(e){(!sf.base.Browser.isDevice||sf.base.Browser.isDevice&&"SfDropDownList"!==this.options.moduleName)&&(sf.popups.isCollide(e).length>0&&(e.style.marginTop=-parseInt(getComputedStyle(e).marginTop,10)+"px"))},i.prototype.destroy=function(){sf.base.EventHandler.remove(document,"mousedown",this.onDocumentClick)},i.prototype.refreshPopup=function(e,t){this.isPopupOpen()&&(this.options.enableVirtualization&&e&&(this.preventScrollAction=!0,this.list.scrollTop=0,this.preStartIndex=0,this.virtualInfo=null,this.preStartIndex=0),this.options.totalCount=t.totalCount,this.popupObj.refreshPosition(this.containerElement),this.popupObj.element.querySelector(".e-content").classList.contains("e-nodata")&&this.fixedHeaderElement&&(sf.base.remove(this.fixedHeaderElement),this.fixedHeaderElement=null))},i.prototype.popupCreation=function(e,i,s){var n=this;this.popupContainer=e,this.popupObj=new sf.popups.Popup(this.popupContainer,{width:this.setWidth(),targetType:"relative",relateTo:this.containerElement,collision:{X:"flip",Y:"flip"},offsetY:i,enableRtl:this.options.enableRtl,offsetX:s,position:{X:"left",Y:"bottom"},zIndex:this.options.zIndex,close:function(){sf.base.EventHandler.remove(n.list,"scroll",n.setFloatingHeader),sf.base.removeClass([n.containerElement],"e-icon-anim"),null==n.options.value&&"SfAutoComplete"===n.options.moduleName&&(n.preStartIndex=0),n.fixedHeaderElement=null,n.popupHolder.appendChild(n.popupContainer),n.unWireListEvents();for(var e=0,t=n.popupObj.getScrollableParent(n.containerElement);e<t.length;e++){var i=t[e];sf.base.EventHandler.remove(i,"scroll",n.scrollHandler)}sf.base.Browser.isDevice&&n.isFilterLayout()&&(sf.base.removeClass([document.body,n.popupObj.element],"e-popup-full-page"),sf.base.EventHandler.remove(n.list,"scroll",n.listScroll)),n.options.enableVirtualization&&sf.base.EventHandler.remove(n.popupContentEle,"scroll",n.virtualScrollHandler()),n.popupObj&&n.popupObj.destroy(),!n.isDisposed&&document.body.contains(n.element)&&n.dotNetRef.invokeMethodAsync("ClosePopup").catch((function(){}))},open:function(){null==n.options.value&&"SfAutoComplete"===n.options.moduleName&&(n.preStartIndex=0);var e=n.list.querySelector("li")&&n.list.querySelector("li").classList.contains(t);!sf.base.isNullOrUndefined(n.list)&&n.list.classList.contains("e-nodata");sf.base.EventHandler.add(document,"mousedown",n.onDocumentClick,n),n.options.allowFiltering&&n.filterInput&&n.filterInput.focus(),e&&sf.base.EventHandler.add(n.list,"scroll",n.setFloatingHeader,n)},targetExitViewport:function(){sf.base.Browser.isDevice||n.isDisposed||n.dotNetRef.invokeMethodAsync("Hide")}})},i.prototype.isEmptyList=function(){return!sf.base.isNullOrUndefined(this.liCollections)&&0===this.liCollections.length},i.prototype.setWidth=function(){var e=sf.base.formatUnit(this.options.popupWidth);e.indexOf("%")>-1&&(e=(this.containerElement.offsetWidth*parseFloat(e)/100).toString()+"px");if(sf.base.Browser.isDevice&&!this.options.allowFiltering&&("SfDropDownList"===this.options.moduleName||"SfComboBox"===this.options.moduleName)){var t=this.isEmptyList()?this.list:this.liCollections[0];e=parseInt(e,10)+2*(parseInt(getComputedStyle(t).textIndent,10)-parseInt(getComputedStyle(this.element).paddingLeft,10)+parseInt(getComputedStyle(this.element.parentElement).borderLeftWidth,10))+"px"}return e},i.prototype.onDocumentClick=function(e){var t=e.target;!sf.base.isNullOrUndefined(this.popupObj)&&sf.base.closest(t,"[id='"+this.popupObj.element.id+"']")||this.containerElement.contains(e.target)?t===this.element||this.options.allowFiltering&&t===this.filterInput||"SfComboBox"===this.options.moduleName&&!this.options.allowFiltering&&sf.base.Browser.isDevice&&t===this.containerElement.querySelector(".e-ddl-icon")||e.preventDefault():!this.containerElement.classList.contains("e-input-focus")&&!this.isPopupOpen()||this.isDisposed||this.dotNetRef.invokeMethodAsync("Hide")},i.prototype.closePopup=function(e,t){if(this.options=t,this.options.refreshVirtualIndices&&(this.virtualInfo=null,this.preStartIndex=0),this.isPopupOpen()&&!e.cancel&&this.popupObj){"SfDropDownList"!==this.options.moduleName&&sf.base.attributes(this.element,{"aria-expanded":"false"}),this.element.removeAttribute("aria-owns"),this.popupObj.hide(new sf.base.Animation({name:"FadeOut",duration:20,delay:0}))}},i.prototype.setScrollPosition=function(e){if(sf.base.isNullOrUndefined(e))this.scrollBottom(!0);else switch(e.action){case"pageDown":case"down":case"end":this.isKeyBoardAction=!0,this.scrollBottom();break;default:this.isKeyBoardAction="up"==e.action||"pageUp"==e.action||"open"==e.action,this.scrollTop()}},i.prototype.scrollBottom=function(e){if(this.list&&(this.list.querySelector(".e-item-focus")||this.list.querySelector(".e-active"))||this.options.enableVirtualization){var i=this.list.querySelector(".e-item-focus")||this.list.querySelector(".e-active");null==i&&this.options.enableVirtualization&&(i=this.list.querySelector(".e-list-item"));var s=this.list.querySelectorAll(".e-virtual-list").length,n=this.list.offsetHeight,o=this.list.querySelector("li")?this.list.querySelector("li").classList.contains(t):null,r=this.virtualInfo&&this.virtualInfo.startIndex?i.offsetTop+this.virtualInfo.startIndex*i.offsetHeight:i.offsetTop,a=r-s*i.offsetHeight+i.offsetHeight-this.list.scrollTop,l=this.list.scrollTop+a-n,h=!1;l=e?l+2*parseInt(getComputedStyle(this.list).paddingTop,10):l+parseInt(getComputedStyle(this.list).paddingTop,10);var d=r-s*i.offsetHeight+i.offsetHeight-this.list.scrollTop;d=o&&!sf.base.isNullOrUndefined(this.fixedHeaderElement)?d-this.fixedHeaderElement.offsetHeight:d,0===this.activeIndex?(this.list.scrollTop=0,h=this.isKeyBoardAction):(a>n||!(d>0&&this.list.offsetHeight>d))&&(!this.options.enableVirtualization||this.isKeyBoardAction?this.list.scrollTop=l:this.list.scrollTop=this.virtualInfo&&this.virtualInfo.startIndex?this.virtualInfo.startIndex*this.listHeight:0,h=this.isKeyBoardAction),this.isKeyBoardAction=h}},i.prototype.scrollTop=function(){if(this.list&&(this.list.querySelector(".e-item-focus")||this.list.querySelector(".e-active"))){var e=this.list.querySelectorAll(".e-virtual-list").length,i=this.list.querySelector(".e-item-focus")||this.list.querySelector(".e-active"),s=this.virtualInfo&&this.virtualInfo.startIndex?i.offsetTop+this.virtualInfo.startIndex*i.offsetHeight:i.offsetTop,n=s-e*i.offsetHeight-this.list.scrollTop,o=this.list.querySelector("li").classList.contains(t);n=o&&!sf.base.isNullOrUndefined(this.fixedHeaderElement)?n-this.fixedHeaderElement.offsetHeight:n;var r=s-e*i.offsetHeight+i.offsetHeight-this.list.scrollTop;0===this.activeIndex?this.list.scrollTop=0:n<0?this.list.scrollTop=this.list.scrollTop+n:r>0&&this.list.offsetHeight>r||(this.list.scrollTop=s-(o&&!sf.base.isNullOrUndefined(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))}},i.prototype.setHover=function(e){!e||e.classList.contains("e-hover")||e.classList.contains("e-virtual-list")||(this.removeHover(),sf.base.addClass([e],"e-hover"))},i.prototype.removeHover=function(){if(this.list){var e=this.list.querySelectorAll(".e-hover");e&&e.length&&sf.base.removeClass(e,"e-hover")}},i.prototype.isPopupOpen=function(){return this.popupObj&&document.body.contains(this.popupObj.element)},i}();return{initialize:function(e,t,s,n,o){if(s){var r=new i(e,t,s,n,o);if(r.initialize(),o.enableVirtualization)return{itemSize:r.getListHeight(),fullPopupHeight:window.outerHeight,virtualPopupHeight:r.virtualPopupHeight}}return{itemSize:0,fullPopupHeight:0,virtualPopupHeight:0}},renderPopup:function(e,t,i,s,n,o,r){var a=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(a)&&t&&i&&a.renderPopup(t,i,s,n,o,r)},refreshPopup:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s)||s.refreshPopup(t,i)},closePopup:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s)||s.closePopup(t,i)},updateScrollPosition:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.setScrollPosition(t)},getPageCount:function(e){var t=e&&e.querySelector(".e-content");if(t){var i=t.classList.contains("e-nodata")?null:getComputedStyle(t.querySelectorAll(".e-list-item")[0],null).getPropertyValue("height");return Math.round(t.getBoundingClientRect().height/parseInt(i,10))}return 0},setAutoFillSelection:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.setAutoFillSelection(t)},removeFillSelection:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.removeFillSelection()},focusIn:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(t?i.containerElement.focus():i.element.focus())},focusOut:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(t?i.containerElement.blur():i.element.blur())},destroy:function(e,t,i,s,n){var o=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(o)||(t&&t instanceof HTMLElement&&i&&(o.isDisposed=!0,o.closePopup(s,n)),o.destroy())}}}()},"./modules/sf-filemanager.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.FileManager=function(){"use strict";var e="e-blur",t=function(){function t(e,t,i,s){this.element=t,this.properties=s,this.dataId=e,this.treeviewEle=t.querySelector(".e-navigation .e-treeview"),this.dotnetRef=i,this.isMac=navigator.platform.toUpperCase().indexOf("MAC")>=0,sf.base.isNullOrUndefined(this.element)||(this.ctrlId=this.element.id,window.sfBlazor.setCompInstance(this)),this.bindKeyboardEvent(),this.bindTreeViewKeyBoardEvent(),this.wireEvents()}return t.prototype.fmDialogOpen=function(){this.dotnetRef.invokeMethodAsync("FileManagerShowDialog")},t.prototype.unWireMobileEvents=function(){this.clickObj.destroy()},t.prototype.wireMobileEvents=function(){var e,t=this;e="Details"===this.properties.view?this.element.querySelector(".e-view-container .e-grid .e-gridcontent"):this.element.querySelector(".e-view-container .e-large-icons"),this.clickObj=new sf.base.Touch(e,{tapHold:function(e){var i,s;s="Details"===t.properties.view?(i=sf.base.closest(e.originalEvent.target,".e-row"))?i.getAttribute("data-rowindex"):null:(i=sf.base.closest(e.originalEvent.target,"li.e-list-item"))?i.getAttribute("data-uid"):null,null!=i&&null!=s&&t.dotnetRef.invokeMethodAsync("ChangeMobileMultiSelection",s)}})},t.prototype.wireEvents=function(){var e=this.element.querySelector("#"+this.properties.id+"_grid");e&&sf.base.EventHandler.add(e,"dblclick",this.gridBlur,this)},t.prototype.unWireEvents=function(){var e=this.element.querySelector("#"+this.properties.id+"_grid");e&&sf.base.EventHandler.remove(e,"dblclick",this.gridBlur)},t.prototype.adjustHeight=function(){var e=sf.base.select("#"+this.element.id+"_toolbar",this.element),t=e?e.offsetHeight:0,i=this.element.querySelector(".e-address").offsetHeight,s=this.element.clientHeight-t-i;return sf.base.formatUnit(this.element.clientHeight-t)+" "+sf.base.formatUnit(s)},t.prototype.createDragObj=function(e){var t,i;"LargeIcons"===this.properties.view?(t=this.element.querySelector(".e-large-icons ul"),i=".e-large-icon"):(t=this.element.querySelector(".e-grid.e-control"),i=".e-row"),this.properties.draggable||e?(this.dragObj&&this.dragObj.destroy(),t&&this.dragObjProperty(this.dragObj,t,".e-fullrow")):this.properties.draggable||this.dragObj.destroy(),this.treeviewEle?(this.treeDragObj&&this.treeDragObj.destroy(),this.dragObjProperty(this.treeDragObj,this.treeviewEle,i)):this.properties.draggable||this.treeDragObj.destroy()},t.prototype.dragObjProperty=function(e,t,i){var s=this;new sf.base.Draggable(t,{cursorAt:{left:44,top:18},enableTailMode:!0,dragArea:this.element,dragTarget:i,drag:this.draggingHandler.bind(this),dragStart:function(e){s.dragStartHandler(e)},dragStop:this.dragStopHandler.bind(this),enableAutoScroll:!0,helper:this.dragHelper.bind(this)})},t.prototype.dragHelper=function(e){var t=e.sender.target;return this.getModule(t),"largeiconsview"===this.activeModule||"navigationpane"===this.activeModule?this.dragLi=sf.base.closest(t,".e-list-item"):"detailsview"===this.activeModule&&(this.dragLi=sf.base.closest(t,"tr.e-row"),"false"==this.dragLi.getAttribute("aria-selected")&&t.click()),this.dragLi?(this.createVirtualDragElement(),this.virtualDragElement):null},t.prototype.createVirtualDragElement=function(){this.updateViewElement(),this.updateDragValues(),this.cloneIcon=sf.base.createElement("div",{className:"e-fe-icon "+this.dragType}),this.cloneName=sf.base.createElement("div",{className:"e-fe-name",innerHTML:this.dragName});var e=sf.base.createElement("div",{className:"e-fe-content"});e.appendChild(this.cloneIcon),e.appendChild(this.cloneName);var t=sf.base.createElement("div",{className:"e-fe-clone"});if(t.appendChild(e),this.dragCount>1){var i=sf.base.createElement("span",{className:"e-fe-count",innerHTML:this.dragCount.toString(10)});t.appendChild(i)}this.virtualDragElement=t,this.element.appendChild(this.virtualDragElement)},t.prototype.getModule=function(e){e&&(sf.base.closest(e,".e-row")?this.activeModule="detailsview":sf.base.closest(e,".e-large-icon")?this.activeModule="largeiconsview":this.activeModule="navigationpane")},t.prototype.getXYValue=function(e,t){var i,s=e.changedTouches;if(!(i="X"===t?s?s[0].clientX:e.clientX:s?s[0].clientY:e.clientY)&&"focus"===e.type&&e.target){var n=e.target.getBoundingClientRect();i=n?"X"===t?n.left:n.top:null}return Math.ceil(i)},t.prototype.removeDestroyElement=function(){this.dragObj.intDestroy(this.dragStartArgs.event),this.dragCancel()},t.prototype.TriggerDragEvent=function(e){e&&this.removeDestroyElement()},t.prototype.UpdateGridFocus=function(e){if("Details"==this.properties.view){this.updateViewElement();var t=this.viewElem.querySelectorAll(".e-focused"),i=this.viewElem.querySelector('[data-rowindex="'+e.toString()+'"]');if(t)for(var s=0;s<t.length;s++)sf.base.closest(t[s],"tr").getAttribute("data-rowindex")!=e.toString()&&(sf.base.closest(t[s],"tr").removeAttribute("tabindex"),sf.base.removeClass([t[s]],["e-focus","e-focused"]));sf.base.isNullOrUndefined(i)||(this.viewElem.setAttribute("tabindex","-1"),i.setAttribute("tabindex","0"),sf.base.addClass([i],["e-focus","e-focused"]))}},t.prototype.TriggerDragStartEvent=function(e){if(e)this.removeDestroyElement();else{this.dragStartArgs.bindEvents(this.dragStartArgs.dragElement);var t=this.dragStartArgs;t.cancel=!1,this.getModule(this.dragStartArgs.target);var i=this.element.querySelector(".e-navigation .e-treeview ul li").getAttribute("data-uid");(!this.properties.draggable||"navigationpane"===this.activeModule&&sf.base.closest(this.dragStartArgs.target,"li").getAttribute("data-uid")===i)&&(t.cancel=!0),this.removeBlur(),t.cancel?this.removeDestroyElement():t.cancel||(this.updateViewElement(),this.blurActive(),this.updateDragValues())}},t.prototype.dragStartHandler=function(e){this.dragStartArgs=e,window.sfBlazor.setCompInstance(this),this.UpdateXY(e),this.dotnetRef.invokeMethodAsync("DragStartCall",this.dragLeft,this.dragTop)},t.prototype.blurActive=function(){for(var t=0,i=this.viewElem.querySelectorAll(".e-active");t<i.length;)i[t].classList.add(e),t++},t.prototype.updateViewElement=function(){"LargeIcons"===this.properties.view?this.viewElem=this.element.querySelector(".e-large-icons"):this.viewElem=this.element.querySelector(".e-gridcontent")},t.prototype.getIconClass=function(e){return e.querySelector(".e-list-img")?"e-fe-image":e.querySelector(".e-list-icon").classList[1]},t.prototype.updateDragValues=function(){var e;"largeiconsview"===this.activeModule?(e=this.viewElem.querySelectorAll(".e-active"),this.dragName=e.length>0?e[0].querySelector(".e-list-text").textContent:"",this.dragType=e.length>0?this.getIconClass(e[0]):""):"detailsview"===this.activeModule?null!=(e=this.viewElem.querySelectorAll('tr[aria-selected="true"]'))&&e.length>0&&(this.dragName=e.length>0?e[0].querySelector(".e-fe-text").textContent:"",this.dragType=e.length>0?e[0].querySelector(".e-fe-icon").classList[1]:""):"navigationpane"===this.activeModule&&(this.dragName=this.dragLi.querySelector(".e-list-text").textContent,this.dragType="e-fe-folder"),null!=e&&(this.dragCount=e.length)},t.prototype.getTargetModule=function(e){e&&(sf.base.closest(e,".e-gridcontent")?this.targetModule="detailsview":sf.base.closest(e,".e-large-icons")?this.targetModule="largeiconsview":e.classList.contains("e-fullrow")||e.classList.contains("e-icon-expandable")?this.targetModule="navigationpane":sf.base.closest(e,".e-address-list-item")?this.targetModule="breadcrumbbar":this.targetModule="")},t.prototype.draggingHandler=function(t){var i=!1;this.updateDragValues(),this.cloneIcon.setAttribute("class","e-fe-icon "+this.dragType),this.cloneName.innerHTML=this.dragName;var s=null;this.blurActive(),this.getTargetModule(t.target),this.removeDropTarget(),this.removeBlur("hover"),"navigationpane"===this.targetModule?((s=sf.base.closest(t.target,"li")).classList.add("e-hover","e-fe-drop-folder"),i=!0):"detailsview"===this.targetModule?((s=sf.base.closest(t.target,"tr"))&&s.querySelector(".e-fe-folder")&&!s.classList.contains(e)?s.classList.add("e-fe-drop-folder"):!s||s.querySelector(".e-fe-folder")||s.classList.contains(e)||s.classList.add("e-fe-drop-file"),i=!0):"largeiconsview"===this.targetModule?((s=sf.base.closest(t.target,"li"))&&s.querySelector(".e-fe-folder")&&!s.classList.contains(e)&&s.classList.add("e-hover","e-fe-drop-folder"),i=!0):"breadcrumbbar"===this.targetModule&&(i=!0),this.element.classList.remove("e-fe-drop","e-no-drop"),this.element.classList.add(i?"e-fe-drop":"e-no-drop"),this.UpdateXY(t),this.dotnetRef.invokeMethodAsync("DraggingCall",this.dragLeft,this.dragTop)},t.prototype.UpdateXY=function(e){this.dragLeft=this.getXYValue(e.event,"X"),this.dragTop=this.getXYValue(e.event,"Y")},t.prototype.dragStopHandler=function(e){var t,i,s=!1;if(e.cancel=!1,this.removeDropTarget(),this.element.classList.remove("e-fe-drop","e-no-drop"),this.dragCancel(),this.getTargetModule(e.target),""===this.targetModule&&e.target&&e.target.classList.contains("e-view-container")&&(s=!0),this.removeBlur("hover"),"largeiconsview"!==this.targetModule&&"navigationpane"!==this.targetModule&&"breadcrumbbar"!==this.targetModule||!e.target)"detailsview"===this.targetModule&&e.target&&(i=(t=sf.base.closest(e.target,"tr"))?t.getAttribute("data-rowindex"):null);else{t=sf.base.closest(e.target,"li");var n="breadcrumbbar"===this.targetModule?"data-utext":"data-uid";i=t?t.getAttribute(n):null}null==i&&(s=!0);var o=this.treeviewEle?this.dragLi.getAttribute("data-uid"):null;"detailsview"===this.activeModule&&(o=this.dragLi.getAttribute("data-rowindex")),this.UpdateXY(e),this.dotnetRef.invokeMethodAsync("DragStopCall",o,i,this.targetModule,this.activeModule,s,this.dragLeft,this.dragTop),this.dragCount=0,this.dragName="",this.dragType=""},t.prototype.dragCancel=function(){this.removeBlur();var e=sf.base.select(".e-fe-clone",this.element);e&&sf.base.detach(e)},t.prototype.gridBlur=function(e){var t=e.target;"TD"===t.tagName&&t.blur()},t.prototype.removeItemClass=function(e){for(var t=this.element.querySelectorAll("."+e),i=0;i<t.length;i++)t[i].classList.remove(e)},t.prototype.removeDropTarget=function(){this.removeItemClass("e-fe-drop-folder"),this.removeItemClass("e-fe-drop-file")},t.prototype.removeBlur=function(t){for(var i=t?this.element.querySelectorAll(".e-hover"):this.element.querySelectorAll("."+e),s=0;s<i.length;)i[s].classList.remove(t?"e-hover":e),s++},t.prototype.bindTreeViewKeyBoardEvent=function(){var e=this.element.querySelector(".e-navigation"),t={altEnter:"alt+enter",esc:"escape",del:"delete",ctrlX:this.isMac?"cmd+x":"ctrl+x",ctrlC:this.isMac?"cmd+c":"ctrl+c",ctrlV:this.isMac?"cmd+v":"ctrl+v",f2:"f2",shiftF10:"shift+f10"};if(e)new sf.base.KeyboardEvents(e,{keyAction:this.treeviewKeydownHandler.bind(this),keyConfigs:t,eventName:"keydown"})},t.prototype.bindKeyboardEvent=function(){if("Details"===this.properties.view){var e={altEnter:"alt+enter",esc:"escape",tab:"tab",moveDown:"downarrow",ctrlEnd:"ctrl+end",ctrlHome:"ctrl+home",ctrlDown:"ctrl+downarrow",ctrlLeft:"ctrl+leftarrow",ctrlRight:"ctrl+rightarrow",shiftEnd:"shift+end",shiftHome:"shift+home",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",ctrlUp:"ctrl+uparrow",csEnd:"ctrl+shift+end",csHome:"ctrl+shift+home",csDown:"ctrl+shift+downarrow",csUp:"ctrl+shift+uparrow",space:"space",ctrlSpace:"ctrl+space",shiftSpace:"shift+space",csSpace:"ctrl+shift+space",end:"end",home:"home",moveUp:"uparrow",del:"delete",ctrlX:this.isMac?"cmd+x":"ctrl+x",ctrlC:this.isMac?"cmd+c":"ctrl+c",ctrlV:this.isMac?"cmd+v":"ctrl+v",ctrlShiftN:"ctrl+shift+n",shiftdel:"shift+delete",ctrlD:"ctrl+d",f2:"f2",ctrlA:this.isMac?"cmd+a":"ctrl+a",enter:"enter"},t=this.element.querySelector("#"+this.properties.id+"_grid");t&&this.bindKeyboardEvents(e,t)}else if("LargeIcons"===this.properties.view){e={altN:"alt+n",f5:"f5",ctrlShift1:"ctrl+shift+1",ctrlShift2:"ctrl+shift+2",ctrlU:"ctrl+u",end:"end",home:"home",tab:"tab",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlEnd:"ctrl+end",ctrlHome:"ctrl+home",ctrlDown:"ctrl+downarrow",ctrlLeft:"ctrl+leftarrow",ctrlRight:"ctrl+rightarrow",ctrlUp:"ctrl+uparrow",shiftEnd:"shift+end",shiftHome:"shift+home",shiftDown:"shift+downarrow",shiftLeft:"shift+leftarrow",shiftRight:"shift+rightarrow",shiftUp:"shift+uparrow",csEnd:"ctrl+shift+end",csHome:"ctrl+shift+home",csDown:"ctrl+shift+downarrow",csLeft:"ctrl+shift+leftarrow",csRight:"ctrl+shift+rightarrow",csUp:"ctrl+shift+uparrow",space:"space",ctrlSpace:"ctrl+space",shiftSpace:"shift+space",csSpace:"ctrl+shift+space",ctrlA:this.isMac?"cmd+a":"ctrl+a",enter:"enter",altEnter:"alt+enter",esc:"escape",del:"delete",ctrlX:this.isMac?"cmd+x":"ctrl+x",ctrlC:this.isMac?"cmd+c":"ctrl+c",ctrlV:this.isMac?"cmd+v":"ctrl+v",f2:"f2",shiftdel:"shift+delete",back:"backspace",ctrlD:"ctrl+d"};var i=this.element.querySelector("#"+this.properties.id+"_largeicons");i&&this.bindKeyboardEvents(e,i)}},t.prototype.bindKeyboardEvents=function(e,t){this.keyboardModule=new sf.base.KeyboardEvents(t,{keyAction:this.keyupHandler.bind(this),keyConfigs:e,eventName:"keyup"}),this.keyboardDownModule=new sf.base.KeyboardEvents(t,{keyAction:this.keydownHandler.bind(this),keyConfigs:e,eventName:"keydown"})},t.prototype.getRowValue=function(){var e=this.element.querySelector("#"+this.element.id+"_largeicons").querySelectorAll(".e-list-item"),t=1;if(e)for(var i=0,s=e.length-1;i<s&&e[i].getBoundingClientRect().top===e[i+1].getBoundingClientRect().top;i++)t++;return t},t.prototype.keyupHandler=function(e){e.preventDefault();var t=0;"LargeIcons"===this.properties.view&&(t=this.getRowValue());var i=null;switch(e.action){case"altN":i="NewFolder";break;case"f5":i="Refresh";break;case"ctrlShift1":i="DetailsView";break;case"ctrlShift2":i="LargeIconsView";break;case"ctrlU":i="Upload";break;case"altEnter":i="Details";break;case"del":case"shiftdel":i="Delete";break;case"enter":i="Open";break;case"ctrlC":i="Copy";break;case"ctrlV":i="Paste";break;case"ctrlX":i="Cut";break;case"ctrlD":i="Download";break;case"f2":i="Rename";break;case"ctrlA":i="SelectAll";break;case"home":i="Home";break;case"end":i="End";break;case"moveDown":i="MoveDown_"+t.toString();break;case"moveLeft":i="MoveLeft";break;case"moveRight":i="MoveRight";break;case"moveUp":i="MoveUp_"+t.toString();break;case"esc":i="Esc";break;case"ctrlLeft":i="ControlLeft";break;case"ctrlRight":i="ControlRight";break;case"ctrlEnd":i="ControlEnd";break;case"ctrlHome":i="ControlHome";break;case"shiftHome":i="ShiftHome";break;case"shiftEnd":i="ShiftEnd";break;case"shiftLeft":i="ShiftLeft";break;case"shiftRight":i="ShiftRight";break;case"csHome":i="ControlShiftHome";break;case"csEnd":i="ControlShiftEnd";break;case"csLeft":i="ControlShiftLeft";break;case"csRight":i="ControlShiftRight";break;case"ctrlUp":i="ControlUp_"+t.toString();break;case"shiftUp":i="ShiftUp_"+t.toString();break;case"csUp":i="ControlShiftUp_"+t.toString();break;case"ctrlDown":i="ControlDown_"+t.toString();break;case"shiftDown":i="ShiftDown_"+t.toString();break;case"csDown":i="ControlShiftDown_"+t.toString();break;case"space":i="Space";break;case"csSpace":i="ControlShiftSpace";break;case"shiftSpace":i="ShiftSpace";break;case"ctrlSpace":i="ControlSpace";break;case"tab":i="Tab"}i&&this.dotnetRef.invokeMethodAsync("PerformKeyboardAction",i)},t.prototype.treeviewKeydownHandler=function(e){if(e.preventDefault(),null==this.element.querySelector(".e-dialog.e-popup-open")){var t=null;switch(e.action){case"altEnter":t="Details";break;case"esc":t="Esc";break;case"del":t="Delete";break;case"ctrlC":t="Copy";break;case"ctrlV":t="Paste";break;case"ctrlX":t="Cut";break;case"shiftF10":t="Download";break;case"f2":t="Rename"}t&&this.dotnetRef.invokeMethodAsync("PerformTreeViewKeyboardAction",t)}},t.prototype.keydownHandler=function(e){if(null==this.element.querySelector(".e-dialog.e-popup-open"))switch(e.action){case"end":case"home":case"space":case"ctrlSpace":case"shiftSpace":case"csSpace":case"ctrlA":case"enter":case"altEnter":case"ctrlEnd":case"shiftEnd":case"csEnd":case"ctrlHome":case"shiftHome":case"csHome":case"ctrlDown":case"shiftDown":case"csDown":case"ctrlLeft":case"shiftLeft":case"csLeft":case"esc":case"del":case"shiftdel":case"ctrlC":case"ctrlV":case"ctrlX":case"f2":case"moveDown":case"moveUp":case"ctrlD":case"altN":case"f5":case"ctrlShift1":case"ctrlShift2":case"ctrlU":e.preventDefault()}},t}();return{initialize:function(e,i,s,n,o){new t(e,i,s,n);var r=window.sfBlazor.getCompInstance(e),a=i.getElementsByClassName("e-content");return sf.base.isNullOrUndefined(a[0])||"flex"!=a[0].style.display||a[0].style.removeProperty("display"),!sf.base.isNullOrUndefined(r)&&n.draggable&&r.createDragObj(),r.isMobile=o,r.adjustHeight()},dragStartActionContinue:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.TriggerDragStartEvent(t)},wireMobileEvents:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||(t.wireMobileEvents(),t.createDragObj(!0))},dragActionContinue:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.TriggerDragEvent(t)},focusItem:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i)&&"LargeIcons"===i.properties.view){var s=i.element.querySelector('.e-list-item.e-large-icon[data-uid="'+t+'"]');s&&s.focus()}},updateProperties:function(e,t){var i=window.sfBlazor.getCompInstance(e);return i.properties=t,i.unWireEvents(),i.wireEvents(),i.isMobile&&(i.unWireMobileEvents(),i.wireMobileEvents()),i.adjustHeight()},uploadOpen:function(e,t,i){var s=window.sfBlazor.getCompInstance(e),n=(sf.base.isNullOrUndefined(i)?s.element:document.querySelector(i)).querySelector("#"+t);n&&!sf.base.Browser.isIos?n.click():s.fmDialogOpen()},triggerBlur:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||"TD"!==document.activeElement.tagName||document.activeElement.blur()},updateFocus:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.UpdateGridFocus(t)},updateView:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.properties.view=t,i.keyboardDownModule.destroy(),i.keyboardModule.destroy(),i.bindKeyboardEvent(),i.isMobile&&(i.unWireMobileEvents(),i.wireMobileEvents())),i.properties.draggable&&i.createDragObj()},updateGridRow:function(e,t){if(e){for(var i=e.querySelectorAll('tr.e-row[tabindex="0"]'),s=0;s<i.length;s++)i[s].removeAttribute("tabindex");var n=e.querySelector('[data-rowindex="'+t+'"]');n&&(n.setAttribute("tabindex","0"),n.focus())}},focusToolbar:function(e,t){var i=window.sfBlazor.getCompInstance(e),s=i.element.querySelector(t);!sf.base.isNullOrUndefined(i)&&s&&s.children[0].focus()},saveFile:function(e,t,i){var s=window.sfBlazor.getCompInstance(i),n={action:"download",path:e.path,names:e.names,data:e.data},o=sf.base.createElement("form",{id:s.element.id+"_downloadForm",attrs:{action:t,method:"post",name:"downloadForm",download:""}}),r=sf.base.createElement("input",{id:s.element.id+"_hiddenForm",attrs:{name:"downloadInput",value:JSON.stringify(n),type:"hidden"}});o.appendChild(r),document.body.appendChild(o),document.forms.namedItem("downloadForm").submit(),document.body.removeChild(o)},getTargetElement:function(e,t,i){var s,n,o=document.elementFromPoint(t,i),r=sf.base.closest(o,'li[role="treeitem"]');if(o)if(o.classList.contains("e-yscroll")&&o.classList.contains("e-content")||o.classList.contains("e-list-parent")&&o.classList.contains("e-ul")||o.classList.contains("e-view-container")||o.classList.contains("e-large-icons")||sf.base.closest(o,".e-empty.e-view-container"))n={IsFile:!1,RowIndex:null,IsFolder:!1,IsLayout:!0,IsTree:!1};else if(r){n={IsFile:!1,RowIndex:parseInt(r.getAttribute("data-uid"),10),IsFolder:!0,IsLayout:!1,IsTree:!0}}else{if("Details"===e)n={IsFile:a=!(s=sf.base.closest(o,"tr")).querySelector(".e-fe-grid-icon .e-fe-icon").classList.contains("e-fe-folder"),RowIndex:parseInt(s.getAttribute("data-rowindex"),10),IsFolder:!a,IsLayout:!1,IsTree:!1};else if("LargeIcons"===e){var a,l=(s=sf.base.closest(o,"li")).querySelector(".e-list-icon");n={IsFile:a=!l||!l.classList.contains("e-fe-folder"),RowIndex:parseInt(s.getAttribute("data-uid"),10),IsFolder:!a,IsLayout:!1,IsTree:!1}}}else n={IsFile:!1,RowIndex:null,IsFolder:!1,IsLayout:!1,IsTree:!1};return n},removeRefElement:function(e){var t=window.sfBlazor.getCompInstance(e),i=sf.base.select(".e-dlg-ref-element",t.element);sf.base.detach(i.parentElement)}}}()},"./modules/sf-floating-action-button.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Fab=function(){"use strict";var e=function(){function e(e){this.sfBlazor=window.sfBlazor,this.updateContext(e),this.sfBlazor.setCompInstance(this),this.initialize()}return e.prototype.updateContext=function(e){sf.base.extend(this,this,e)},e.prototype.initialize=function(){this.checkTarget(),this.setClientProps(!0),this.bindEvent(),this.visible&&this.element.classList.remove("e-fab-hidden")},e.prototype.checkTarget=function(){this.targetEle=null,sf.base.isNullOrUndefined(this.target)||"string"!=typeof this.target||(this.targetEle=document.querySelector(this.target)),this.isFixed=sf.base.isNullOrUndefined(this.targetEle),!this.isFixed&&this.targetEle.appendChild(this.element),this.isFixed?this.element.classList.add("e-fab-fixed"):this.element.classList.remove("e-fab-fixed")},e.prototype.bindEvent=function(){sf.base.EventHandler.add(window,"resize",this.resizeHandler,this)},e.prototype.unBindEvent=function(){sf.base.EventHandler.remove(window,"resize",this.resizeHandler)},e.prototype.resizeHandler=function(){this.getOffset(),(this.isMiddle||this.isCenter)&&this.dotNetRef.invokeMethodAsync("UpdatePosition",this.yOffset,this.xOffset)},e.prototype.setClientProps=function(e){this.getOffset();var t={yOffset:this.isMiddle?this.yOffset:"",xOffset:this.isCenter?this.xOffset:""};e&&(t.isFixed=this.isFixed?"Fixed":"Absolute"),this.clientProps=JSON.stringify(t)},e.prototype.getOffset=function(){this.isMiddle&&(this.yOffset=((this.targetEle?this.targetEle.clientHeight:window.innerHeight)-this.element.offsetHeight)/2+"px",this.element.style.setProperty("--fabVertDist",this.yOffset)),this.isCenter&&(this.xOffset=((this.targetEle?this.targetEle.clientWidth:window.innerWidth)-this.element.offsetWidth)/2+"px",this.element.style.setProperty("--fabHorzDist",this.xOffset))},e.prototype.destroy=function(){this.unBindEvent()},e.prototype.validateTarget=function(e){this.updateContext(e),this.checkTarget(),this.setClientProps(!0)},e.prototype.setPosition=function(e){this.updateContext(e),this.setClientProps(!1)},e}();return{initialize:function(t){return t.dataId?new e(t).clientProps:{}},validateTarget:function(e){if(e.dataId){var t=window.sfBlazor.getCompInstance(e.dataId);return t.validateTarget(e),t.clientProps}return{}},setPosition:function(e){if(e.dataId){var t=window.sfBlazor.getCompInstance(e.dataId);return t.setPosition(e),t.clientProps}return{}},destroy:function(e){e&&window.sfBlazor.getCompInstance(e).destroy()}}}()},"./modules/sf-gantt.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Gantt=function(){"use strict";var e=function(){function e(e,t){this.previousCount=-1,this.timelineScrollLeft=0,this.parent=e,this.chartRootElement=t.querySelector(".e-chart-root-container"),this.chartElement=t.querySelector(".e-gantt-chart-pane"),this.element=t.querySelector(".e-chart-scroll-container"),this.timelineHeaderElement=t.querySelector(".e-timeline-header-container"),this.chartVirtualTable=this.element.querySelector(".e-virtualtable"),this.timelineVirtualTrack=this.timelineHeaderElement.querySelector(".e-virtualtrack"),this.dependencyViewContainer=t.querySelector(".e-gantt-dependency-view-container"),this.addEventListeners(),this.ChartHeight(t,this.chartRootElement)}return e.prototype.addEventListeners=function(){sf.base.EventHandler.add(this.element,"scroll",this.onScroll,this),sf.base.EventHandler.add(this.chartElement,sf.base.Browser.touchStartEvent,this.mouseDownHandler,this)},e.prototype.removeEventListeners=function(e){var t=e.element.querySelector(".e-gantt-chart-pane"),i=e.element.querySelector(".e-chart-scroll-container");sf.base.EventHandler.remove(i,"scroll",this.onScroll),sf.base.EventHandler.remove(t,sf.base.Browser.touchStartEvent,this.mouseDownHandler)},e.prototype.gridScrollHandler=function(e){this.element.scrollTop=e,this.parent.isFromTreeGrid=!0},e.prototype.showHideSpinner=function(e){var t=this.parent;e&&!this.parent.spinnerShown?(this.parent.dotNetRef.invokeMethodAsync("ShowSpinner"),this.parent.spinnerShown=!0):!e&&this.parent.spinnerShown&&(t.dotNetRef.invokeMethodAsync("HideSpinner"),t.spinnerShown=!1)},e.prototype.getTimelineLeft=function(){var e=this.parent.element,t=this.timelineVirtualTrack.offsetWidth-3*e.offsetWidth;return this.timelineScrollLeft==(this.parent.enableRTL?-t:t)?this.timelineScrollLeft:this.parent.enableRTL?this.timelineScrollLeft+e.offsetWidth:this.timelineScrollLeft>e.offsetWidth?this.timelineScrollLeft-e.offsetWidth:0},e.prototype.updateSpinner=function(e){var t,i=this;this.showHideSpinner(!0),window.clearTimeout(this.isScrolling),this.isScrolling=setTimeout((function(){e&&(t=i.getTimelineLeft(),i.parent.dotNetRef.invokeMethodAsync("VirtualRefresh",t,i.parent.element.offsetWidth).then((function(){i.updateChartElementStyle()}))),i.element.querySelector(".e-chart-rows-container").style.visibility="visible",i.showHideSpinner(!1),window.clearTimeout(this.isScrolling)}),1e3)},e.prototype.onScroll=function(){var e=this.parent;if(e.scrollbarUpdate=!0,this.element.scrollLeft!==this.parent.chartPreviousScroll.left&&(sf.base.isNullOrUndefined(this.parent.taskbarEditModule)||(this.parent.taskbarEditModule.LongPress=!1)),this.element.scrollTop!==e.chartPreviousScroll.top&&this.parent.options.enableRowVirtualization&&(this.element.scrollTop-e.chartPreviousScroll.top>40||e.chartPreviousScroll.top-this.element.scrollTop>40)&&this.updateSpinner(!1),this.element.scrollLeft!==this.parent.chartPreviousScroll.left){if(this.timelineHeaderElement.scrollLeft=this.element.scrollLeft,e.options.enableTimelineVirtualization){var t=this.parent.chartPreviousScroll.left,i=this.element.scrollLeft;!this.parent.enableRTL&&(this.element.scrollLeft-this.parent.chartPreviousScroll.left>50||this.parent.chartPreviousScroll.left-this.element.scrollLeft>50)||this.parent.enableRTL&&(Math.abs(i)-Math.abs(t)>50||Math.abs(t)-Math.abs(i)>50)?(this.appendDummyTable(),this.updateSpinner(!0)):this.updateVirtualContent()}this.parent.chartPreviousScroll.left=this.element.scrollLeft}this.element.scrollTop!==this.parent.chartPreviousScroll.top&&(this.parent.isFromTreeGrid||this.parent.treeGridModule.updateScrollTop(this.element.scrollTop),this.parent.chartPreviousScroll.top=this.element.scrollTop,this.parent.isFromTreeGrid=!1)},e.prototype.updateContent=function(){var e=this;this.timelineScrollLeft=this.timelineHeaderElement.scrollLeft;var t=this.parent.element,i=Math.round(this.timelineScrollLeft/(2*t.offsetWidth));if(this.previousCount!=i){this.calculateScrollLeft();var s=this.getTimelineLeft();e.parent.dotNetRef.invokeMethodAsync("VirtualRefresh",s,t.offsetWidth).then((function(){e.updateChartElementStyle()}))}this.previousCount=i},e.prototype.updateVirtualContent=function(){this.timelineScrollLeft=this.timelineHeaderElement.scrollLeft;var e=this.parent.element,t=Math.round(this.timelineScrollLeft/e.offsetWidth);this.previousCount!=t&&(this.appendDummyTable(),this.timelineScrollLeft-=e.offsetWidth,this.updateSpinner(!0)),this.previousCount=t},e.prototype.updateChartElementStyle=function(){var e=this.getTimelineLeft(),t=3*this.parent.element.offsetWidth;if(this.timelineVirtualTrack.offsetWidth>t){var i=new DOMMatrixReadOnly(this.chartVirtualTable.style.transform).m42;this.chartVirtualTable.style.transform="translate("+e+"px,"+i+"px)";var s=this.parent.enableRTL?t+Math.abs(e):t+e,n=this.parent.enableRTL?e:-e;sf.base.isNullOrUndefined(this.chartTaskTable)||(this.chartTaskTable.style.setProperty(this.parent.enableRTL?"right":"left",n+"px"),this.chartTaskTable.style.width=s+"px"),sf.base.isNullOrUndefined(this.dependencyViewContainer)||(this.dependencyViewContainer.style.left=-e+"px")}else this.timelineVirtualTrack.offsetWidth<t&&!sf.base.isNullOrUndefined(this.chartTaskTable)&&(this.chartTaskTable.style.width=this.timelineVirtualTrack.offsetWidth+"px")},e.prototype.calculateScrollLeft=function(){var e=this.parent.element,t=3*e.offsetWidth,i=this.timelineVirtualTrack.offsetWidth>t?this.timelineVirtualTrack.offsetWidth-t:t,s=Math.abs(this.timelineScrollLeft);this.timelineScrollLeft>=i?this.timelineScrollLeft=i:s>=i&&this.parent.enableRTL?this.timelineScrollLeft=-i:this.element.scrollLeft<this.parent.chartPreviousScroll.left&&!this.parent.enableRTL?this.timelineScrollLeft<=e.offsetWidth&&(this.timelineScrollLeft=0):this.timelineScrollLeft<0&&!this.parent.enableRTL&&(this.timelineScrollLeft=0)},e.prototype.appendDummyTable=function(){this.timelineScrollLeft=this.timelineHeaderElement.scrollLeft;var e=this.timelineHeaderElement.querySelectorAll(".e-virtualtable");this.element.querySelector(".e-chart-rows-container").style.visibility="hidden",this.calculateScrollLeft();for(var t=this.getTimelineLeft(),i=0;i<e.length;i++){var s=e[i],n=new DOMMatrixReadOnly(s.style.transform).m42;s.style.transform="translate("+t+"px,"+n+"px)"}},e.prototype.mouseDownHandler=function(e){var t=e.target,i=!1,s=this.parent.getParentElement(t,"e-gantt-chart"),n=this.parent.getParentElement(t,"e-chart-row");if(null!=n&&(i=!!n.querySelector(".e-chart-empty-row")),null!=s){var o=null,r=null;this.parent.getParentElement(t,"e-timeline-header-container")?o="Header":this.parent.getParentElement(t,"e-content")&&(o="Content",r=this.parent.getParentElement(t,"e-chart-row-cell")?this.parent.getParentElement(e.target,"e-chart-row-cell").getAttribute("data-uid"):null),"Header"!=o&&"Content"!=o||this.parent.dotNetRef.invokeMethodAsync("ChartMouseDownHandler",o,r,i)}},e.prototype.setScrollLeft=function(e,t){e=-1==t&&this.parent.enableRTL?-e:e,this.element.scrollLeft=e,this.timelineHeaderElement.scrollLeft=this.element.scrollLeft,this.parent.chartPreviousScroll.left=this.element.scrollLeft},e.prototype.setScrollTop=function(e){this.element.scrollTop=e,this.parent.treeGrid.element.querySelector(".e-content").scrollTop=e},e.prototype.ChartHeight=function(e,t){this.toolbarElement=e.querySelector("#"+e.id+"_Gantt_Toolbar"),this.viewPortHeight=this.parent.height-this.parent.toolbarHeight-this.timelineHeaderElement.offsetHeight,t.style.height="calc(100% - "+this.timelineHeaderElement.offsetHeight+"px)"},e.prototype.destroy=function(e){this.removeEventListeners(e)},e}(),t=function(){function e(e,t){this.parent=e,this.content=t,this.treegridPane=this.parent.element.querySelector(".e-grid"),this.addEventListeners()}return e.prototype.addEventListeners=function(){sf.base.EventHandler.add(this.content,"scroll",this.scrollHandler,this),sf.base.EventHandler.add(this.treegridPane,sf.base.Browser.touchStartEvent,this.treeMouseDownHandler,this),sf.base.EventHandler.add(window,"resize",this.windowResize,this)},e.prototype.removeEventListeners=function(e){var t=e.element.querySelector(".e-gridcontent");sf.base.EventHandler.remove(this.treegridPane,sf.base.Browser.touchStartEvent,this.treeMouseDownHandler),sf.base.EventHandler.remove(t,"scroll",this.scrollHandler),sf.base.EventHandler.remove(window,"resize",this.windowResize)},e.prototype.scrollHandler=function(e){this.content.scrollTop!==this.parent.treegridPreviousScroll.top&&this.parent.chartScrollModule.gridScrollHandler(this.content.scrollTop),this.parent.treegridPreviousScroll.top=this.content.scrollTop},e.prototype.treeMouseDownHandler=function(e){if(null!=this.parent.getParentElement(e.target,"e-grid")){var t=null,i=null;if(this.parent.getParentElement(e.target,"e-content"))t="GridContent",i=this.parent.getParentElement(e.target,"e-row")?this.parent.getParentElement(e.target,"e-row").getAttribute("data-uid"):null;else if(this.parent.getParentElement(e.target,"e-headercontent")){t="Header";var s=!0}"Header"!=t&&"GridContent"!=t||this.parent.dotNetRef.invokeMethodAsync("TreeMouseDownHandler",t,i,s)}},e.prototype.windowResize=function(){if(sf.base.Browser.isDevice&&this.parent.dotNetRef.invokeMethodAsync("WindowResize"),this.parent.options.enableTimelineVirtualization){var e=this.parent.chartScrollModule.timelineHeaderElement;e&&(e.style.width=this.parent.chartScrollModule.element.offsetWidth-this.parent.scrollWidth+"px"),this.parent.chartScrollModule.updateContent()}},e.prototype.updateScrollTop=function(e){this.content.scrollTop=e,this.parent.treegridPreviousScroll.top=this.content.scrollTop},e.prototype.destroy=function(e){this.removeEventListeners(e)},e}(),i="e-taskbar-main-container",s="e-chart-row",n="e-active-container",o=function(){return(o=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},r=function(){function e(e){this.elementOffsetLeft=0,this.elementOffsetTop=0,this.elementOffsetWidth=0,this.elementOffsetHeight=0,this.restrictTaskbarEdit=!1,this.parent=e,this.initPublicProp(),this.ganttChartTableBody=this.parent.element.querySelector("#"+this.parent.element.id+"_chartContentBody"),this.chartPane=this.parent.element.querySelector(".e-gantt-chart-pane"),this.chartBodyContainer=this.parent.element.querySelector(".e-chart-root-container"),this.addEventListeners()}return e.prototype.initPublicProp=function(){this.taskBarEditElement=null,this.taskBarEditRecord=null,this.taskBarEditAction=null,this.dragMouseLeave=!1,this.isMouseDragging=!1,this.isTaskbarHold=!1,this.taskbarTouchEditing=!1,this.connectorPointWidth=null,this.connectorSecondAction=null,this.toPredecessorText=null,this.highlightedSecondElement=null,this.falseLine=null},e.prototype.addEventListeners=function(){sf.base.EventHandler.add(this.chartPane,sf.base.Browser.touchStartEvent,this.ganttMouseDown,this),sf.base.EventHandler.add(this.chartPane,sf.base.Browser.touchMoveEvent,this.ganttMouseMove,this),sf.base.EventHandler.add(this.chartPane,sf.base.Browser.touchCancelEvent,this.ganttMouseLeave,this),sf.base.EventHandler.add(document,sf.base.Browser.touchEndEvent,this.ganttChartMouseUp,this),sf.base.EventHandler.add(this.chartBodyContainer,"click",this.click,this)},e.prototype.removeEventListeners=function(e){var t=e.element.querySelector(".e-gantt-chart-pane"),i=e.element.querySelector(".e-chart-root-container");sf.base.EventHandler.remove(t,sf.base.Browser.touchStartEvent,this.ganttMouseDown),sf.base.EventHandler.remove(t,sf.base.Browser.touchMoveEvent,this.ganttMouseMove),sf.base.EventHandler.remove(t,sf.base.Browser.touchCancelEvent,this.ganttMouseLeave),sf.base.EventHandler.remove(document,sf.base.Browser.touchEndEvent,this.ganttChartMouseUp),sf.base.EventHandler.remove(i,"click",this.click)},e.prototype.checkPointerType=function(e){return-1!==e.type.indexOf("pointer")&&"safari"===sf.base.Browser.info.name&&parseInt(sf.base.Browser.info.version)>12},e.prototype.ganttMouseDown=function(e){this.taskbarCanDrag=!1;var t=this.parent.getOffsetRect(this.chartBodyContainer);this.event=this.getCoordinate(e),this.parent.enableRTL?this.mouseDownX=Math.abs(e.pageX-(t.left+Math.abs(this.parent.chartPreviousScroll.left))):this.mouseDownX=this.event.pageX-t.left+this.parent.chartPreviousScroll.left;var n=e.target,o=n.classList.contains("e-chart-row-cell"),r=this.getElementByPosition(e),a=this.parent.getParentElement(r,"e-chart-row-cell"),l=null;if(sf.base.isNullOrUndefined(a)||(l=a.querySelector(".e-taskbar-main-container")),this.taskBarRow=this.parent.getParentElement(r,s),this.updateTaskBarEditElement(e),!this.taskBarEditAction&&null==l&&this.parent.options.allowSchedulingOnDrag){if(this.chartEmptyRowElement=sf.base.createElement("div",{className:"e-chart-empty-row"}),sf.base.isNullOrUndefined(this.taskBarRow)||(this.taskBarRow.appendChild(this.chartEmptyRowElement),this.emptyRow=this.taskBarRow.querySelector(".e-chart-empty-row")),this.emptyRow){var h=document.querySelectorAll(".e-row");this.dataGuid=this.taskBarRow.getAttribute("data-rowindex");var d=h[this.dataGuid].querySelector(".e-treegridexpand");this.parentRow=!!d,this.parentRow?this.taskBarRow.style.cursor="no-drop":(this.taskBarRow.style.position="relative",this.taskBarRow.style.cursor="crosshair",this.emptyRow.style.left="0px",this.emptyRow.style.backgroundColor="transparent",this.emptyRow.style.top=(n.offsetHeight-(Math.floor(.62*n.offsetHeight)-2))/2-1+"px",this.emptyRow.style.height=Math.floor(.62*n.offsetHeight)+"px",this.parent.dotNetRef.invokeMethodAsync("ChartRowMouseDownHandler",this.dataGuid),this.isDown=!0)}this.longPress(!0)}else!this.taskBarEditAction&&this.taskBarRow&&o&&this.parent.options.allowSchedulingOnDrag&&(this.taskBarRow.style.cursor="no-drop");var c=this.parent.getParentElement(r,i);sf.base.isNullOrUndefined(c)||sf.base.isNullOrUndefined(this.taskbarCurrentEditElement)||c!=this.taskbarCurrentEditElement||(this.taskbarCanDrag=!0,this.checkPointerType(e)&&(e.stopPropagation(),this.parent.element.querySelector(".e-chart-scroll-container").style.overflow="hidden"))},e.prototype.click=function(e){var t=this.getElementByPosition(e);this.taskbarCurrentEditElement=this.parent.getParentElement(t,i)},e.prototype.ganttMouseLeave=function(e){this.dragMouseLeave=!0},e.prototype.ganttChartMouseUp=function(e){var t=this;(this.isTaskbarHold=!1,this.taskBarRow&&(this.isDown=!1,this.taskBarRow.style.cursor=""),this.taskBarEditAction&&this.isMouseDragging)?(this.dragMouseLeave?(this.parent.dotNetRef.invokeMethodAsync("UpdateResizedData",null,null,null),this.taskBarEditRecord=this.previousItem,this.updateItemPosition()):this.parent.dotNetRef.invokeMethodAsync("UpdateResizedData",this.dataGuid,this.taskBarEditAction,this.taskBarEditRecord).then((function(e){null!=t.taskBarEditRecord&&null!=e&&(t.taskBarEditRecord.left=e.left,t.taskBarEditRecord.width=e.width),t.updateItemPosition()})),this.checkPointerType(e)&&(this.parent.element.querySelector(".e-chart-scroll-container").style.overflow="scroll auto")):this.taskBarEditElement&&this.taskbarTouchEditing||this.taskBarEditAction?(this.parent.dotNetRef.invokeMethodAsync("UpdateResizedData",null,null,null),this.falseLine&&this.removeFalseLine(!0),this.initPublicProp()):this.tappedPoint?this.taskbarCurrentEditElement=null:!this.taskBarEditAction&&this.emptyRow&&!this.parentRow&&this.parent.options.allowSchedulingOnDrag&&(this.emptyRow.style.border="none",sf.base.isNullOrUndefined(this.chartEmptyRowElement)||sf.base.remove(this.chartEmptyRowElement),this.parent.dotNetRef.invokeMethodAsync("UpdateTaskbarResizedData",this.dataGuid),this.taskBarRow=null,this.emptyRow=null);this.stopScrollTimer(),this.longPress(!1)},e.prototype.updateItemPosition=function(){this.setItemPosition(),this.falseLine&&this.removeFalseLine(!0),this.initPublicProp()},e.prototype.updateTaskBarEditElement=function(e){var t=this,s=this.getElementByPosition(e),n=this.parent.getParentElement(s,i);if(this.taskBarEditElement=n,this.taskBarEditElement&&!this.tappedPoint){var o=n.style.cursor;("mousedown"===e.type||"touchstart"===e.type||"click"===e.type||this.checkPointerType(e))&&(this.dataGuid=this.taskBarEditElement.getAttribute("rowuniqueid"),this.parent.dotNetRef.invokeMethodAsync("GetConnectorValues").then((function(e){t.connectorPointWidth=e})),this.taskBarEditAction=this.getTaskBarAction(e,o),this.parent.isTaskbarEditingEventMapped&&this.parent.dotNetRef.invokeMethodAsync("OnTaskbarEditing",this.dataGuid,this.taskBarEditAction).then((function(e){t.restrictTaskbarEdit=e})),this.parent.dotNetRef.invokeMethodAsync("GetEditedRecord",this.dataGuid,this.taskBarEditAction).then((function(i){t.taskBarEditRecord=i,t.updateMouseDownProperties(e)})),this.isTaskbarHold=!0)}else if(this.taskBarEditElement&&this.tappedPoint){var r=n.getAttribute("rowuniqueid");this.parent.dotNetRef.invokeMethodAsync("RenderConnectorLine",this.tappedPoint,this.dataGuid,r),this.initPublicProp()}},e.prototype.updateMouseDownProperties=function(e){var t=this.getCoordinate(e);if(t.pageX||t.pageY){var i=this.parent.getOffsetRect(this.chartBodyContainer);this.parent.enableRTL?this.mouseDownX=Math.abs(t.pageX-(i.left+Math.abs(this.parent.chartPreviousScroll.left))):this.mouseDownX=t.pageX-i.left+Math.abs(this.parent.chartPreviousScroll.left),this.mouseDownY=t.pageY-i.top+this.parent.chartPreviousScroll.top}},e.prototype.getTaskBarAction=function(e,t){var i=this.getElementByPosition(e),s=(this.taskBarEditRecord,"");return i.classList.contains("e-taskbar-left-resizer")?s="LeftResizing":i.classList.contains("e-taskbar-right-resizer")?s="RightResizing":i.classList.contains("e-child-progress-resizer")||sf.base.closest(i,".e-child-progress-resizer")?s="ProgressResizing":i.classList.contains("e-connectorpoint-left-hover")?(s="ConnectorPointLeftDrag",("touchstart"===e.type||"click"===e.type||this.checkPointerType(e))&&(this.tappedPoint="ConnectorPointLeftDrag")):i.classList.contains("e-connectorpoint-right-hover")?(s="ConnectorPointRightDrag",("touchstart"===e.type||"click"===e.type||this.checkPointerType(e))&&(this.tappedPoint="ConnectorPointRightDrag")):"Auto"===this.parent.options.taskMode&&(sf.base.closest(i,".e-gantt-parent-taskbar")||sf.base.closest(i,".e-gantt-parent-milestone"))&&"default"!=t?s="ParentDrag":sf.base.closest(i,".e-gantt-child-taskbar")&&"default"!=t?s="ChildDrag":sf.base.closest(i,".e-gantt-milestone")&&"default"!=t&&(s="MilestoneDrag"),s},e.prototype.getElementByPosition=function(e){var t=this.getCoordinate(e);return t.pageX=null!=t.pageX?t.pageX:0,t.pageY=null!=t.pageY?t.pageY:0,document.elementFromPoint(t.pageX-window.pageXOffset,t.pageY-window.pageYOffset)},e.prototype.getCoordinate=function(e){var t={};if("touchstart"===e.type||"touchmove"===e.type||"touchend"===e.type||"touchleave"===e.type){var i=e;t.pageX=i.changedTouches[0].pageX,t.pageY=i.changedTouches[0].pageY}else{i=e;t.pageX=i.pageX,t.pageY=i.pageY}return t},e.prototype.ganttMouseMove=function(e){if("touchmove"!==e.type&&"click"!==e.type&&!this.checkPointerType(e)||this.taskbarCanDrag){if(this.isDown&&!this.taskBarEditAction&&!this.parentRow&&"mousemove"==e.type||this.LongPress&&this.isDown){var t=e.target,i=this.parent.getParentElement(t,"e-chart-scroll-container");this.parent.chartPreviousScroll.left>0&&i.scrollWidth-this.chartBodyContainer.offsetWidth>this.parent.chartPreviousScroll.left&&e.preventDefault();var s=this.parent.getOffsetRect(this.chartBodyContainer),n=this.getCoordinate(e);if(this.parent.enableRTL?this.mouseMoveX=Math.abs(n.pageX-(s.left+Math.abs(this.parent.chartPreviousScroll.left))):this.mouseMoveX=n.pageX-s.left+this.parent.chartPreviousScroll.left,this.emptyRow){var o=document.getElementById(this.parent.element.id+"_editingtooltip_content");if(!sf.base.isNullOrUndefined(o))o.style.left=this.event.pageX-10+"px",o.style.top=this.event.pageY-80+"px",sf.base.select(".e-arrow-tip",o).style.left="2px";(this.mouseMoveX-this.mouseDownX>2||this.mouseDownX-this.mouseMoveX>2)&&(this.mouseMoveX>this.mouseDownX?(this.taskBarWidth=this.mouseMoveX-this.mouseDownX,this.taskBarRight=this.mouseDownX+this.taskBarWidth,this.parent.dotNetRef.invokeMethodAsync("UpdateTaskbarResizingData",this.dataGuid,this.mouseDownX,this.taskBarRight)):(this.taskBarWidth=this.mouseDownX-this.mouseMoveX,this.taskBarRight=this.mouseDownX-this.taskBarWidth,this.parent.dotNetRef.invokeMethodAsync("UpdateTaskbarResizingData",this.dataGuid,this.taskBarRight,this.mouseDownX))),this.emptyRow.style.width=this.taskBarWidth+"px",this.parent.enableRTL?this.emptyRow.style.left=this.mouseMoveX<this.mouseDownX?i.scrollWidth-this.mouseDownX+"px":i.scrollWidth-this.taskBarRight+"px":this.emptyRow.style.left=this.mouseMoveX>this.mouseDownX?this.mouseDownX+"px":this.taskBarRight+"px",this.emptyRow.style.backgroundColor="";var r=0;(r=this.parent.enableRTL?Math.abs(Math.abs(this.mouseMoveX)-Math.abs(this.parent.chartPreviousScroll.left)+s.left):this.mouseMoveX-this.parent.chartPreviousScroll.left+s.left)+20>s.left+this.chartBodyContainer.offsetWidth?(this.timerCount=this.parent.chartPreviousScroll.left,this.startScrollTimer("right")):r+40>s.left+this.chartBodyContainer.offsetWidth&&this.parent.enableRTL&&0==this.parent.chartPreviousScroll.left?(this.parent.chartPreviousScroll.left=-1,this.timerCount=this.parent.chartPreviousScroll.left,this.startScrollTimer("right")):r-10<s.left?(this.timerCount=this.parent.chartPreviousScroll.left,this.startScrollTimer("left")):null!=this.scrollTimer&&this.stopScrollTimer()}}if(this.taskBarEditAction&&this.taskBarEditRecord&&this.isTaskbarHold){s=this.parent.getOffsetRect(this.chartBodyContainer),n=this.getCoordinate(e);this.parent.enableRTL?this.mouseMoveX=Math.abs(n.pageX-(s.left+Math.abs(this.parent.chartPreviousScroll.left))):this.mouseMoveX=n.pageX-s.left+this.parent.chartPreviousScroll.left,this.mouseMoveY=n.pageY-s.top+this.parent.chartPreviousScroll.top,this.dragMouseLeave=!1,this.isMouseDragCheck(),this.isMouseDragging&&this.taskBarEditingAction(e,!1)}var a=sf.base.closest(e.target,".e-taskbar-main-container");a&&"default"!=a.style.cursor&&(this.parent.options.allowTaskbarEditing&&"ConnectorPointLeftDrag"!==this.taskBarEditAction&&"ConnectorPointRightDrag"!==this.taskBarEditAction?a.style.cursor="move":a.style.cursor="auto")}},e.prototype.isMouseDragCheck=function(){if(!this.isMouseDragging&&this.taskBarEditAction&&(this.mouseDownX!==this.mouseMoveX&&(this.mouseDownX+3<this.mouseMoveX||this.mouseDownX-3>this.mouseMoveX)||this.mouseDownY!==this.mouseMoveY&&(this.mouseDownY+3<this.mouseMoveY||this.mouseDownY-3>this.mouseMoveY))){this.isMouseDragging=!0;var e=this.taskBarEditRecord;this.previousItem=o({},e),this.taskBarEditElement.setAttribute("aria-grabbed","true")}},e.prototype.updateMouseMoveProperties=function(e){var t=this.parent.getOffsetRect(this.chartBodyContainer),i=this.getCoordinate(e),s="ConnectorPointLeftDrag"===this.taskBarEditAction||"ConnectorPointRightDrag"===this.taskBarEditAction;if((i.pageX||i.pageY)&&(this.parent.enableRTL?this.mouseMoveX=Math.abs(i.pageX-(t.left+Math.abs(this.parent.chartPreviousScroll.left))):this.mouseMoveX=i.pageX-t.left+this.parent.chartPreviousScroll.left,this.mouseMoveY=i.pageY-t.top+this.parent.chartPreviousScroll.top),this.taskBarEditRecord.width>3&&("ProgressResizing"!==this.taskBarEditAction||0!==this.taskBarEditRecord.progress&&100!==this.taskBarEditRecord.progress)||s){var n=0;n=this.parent.enableRTL?Math.abs(Math.abs(this.mouseMoveX)-Math.abs(this.parent.chartPreviousScroll.left)+t.left):this.mouseMoveX-this.parent.chartPreviousScroll.left+t.left;var o=this.mouseMoveY-this.parent.chartPreviousScroll.top+t.top;n+20>t.left+this.chartBodyContainer.offsetWidth?(this.timerCount=this.parent.chartPreviousScroll.left,this.startScrollTimer("right")):n+40>t.left+this.chartBodyContainer.offsetWidth&&this.parent.enableRTL&&0==this.parent.chartPreviousScroll.left?(this.parent.chartPreviousScroll.left=-1,this.timerCount=this.parent.chartPreviousScroll.left,this.startScrollTimer("right")):n-10<t.left?(this.timerCount=this.parent.chartPreviousScroll.left,this.startScrollTimer("left")):s&&o>t.top+this.chartBodyContainer.offsetHeight-80?(this.timerCount=this.parent.chartPreviousScroll.top,this.startScrollTimer("bottom")):s&&o-25<t.top?(this.timerCount=this.parent.chartPreviousScroll.top,this.startScrollTimer("top")):null!=this.scrollTimer&&this.stopScrollTimer()}e.preventDefault()},e.prototype.longPress=function(e){var t=this;e?t.longPressTimer=window.setTimeout((function(){t.LongPress=!0}),1e3):(t.LongPress=!1,window.clearTimeout(t.longPressTimer))},e.prototype.startScrollTimer=function(e){var t=this;this.parent.chartScrollModule.previousCount=0,this.stopScrollTimer();var i=0,s=this.parent.element.querySelector(".e-chart-root-container");this.scrollTimer=window.setInterval((function(){if(-1==Math.sign(t.timerCount)&&(i=-1,t.timerCount=Math.abs(t.timerCount)),"right"===e)t.timerCount=t.timerCount+1>=t.parent.totalTimelineWidth?t.parent.totalTimelineWidth:t.timerCount+1;else if("bottom"!==e||sf.base.isNullOrUndefined(s))t.timerCount=t.timerCount-1<0?0:t.timerCount-1;else{var n=t.parent.options.enableRowVirtualization?parseFloat(s.querySelector(".e-virtualtrack").style.height):parseFloat(s.querySelector(".e-chart-rows-container").style.height);t.timerCount=t.timerCount+1>=n?n:t.timerCount+1}"bottom"===e||"top"===e?t.parent.chartScrollModule.setScrollTop(t.timerCount):(t.parent.chartScrollModule.setScrollLeft(t.timerCount,i),t.parent.options.enableTimelineVirtualization&&t.parent.chartScrollModule.updateContent()),"ConnectorPointLeftDrag"!==t.taskBarEditAction&&"ConnectorPointRightDrag"!==t.taskBarEditAction||t.drawFalseLine()}),0)},e.prototype.stopScrollTimer=function(){window.clearInterval(this.scrollTimer),this.scrollTimer=null},e.prototype.taskBarEditingAction=function(e,t){this.restrictTaskbarEdit||this.updateMouseMoveProperties(e),"ProgressResizing"!==this.taskBarEditAction||this.restrictTaskbarEdit?"LeftResizing"!==this.taskBarEditAction||this.restrictTaskbarEdit?"RightResizing"!==this.taskBarEditAction&&"ParentResizing"!==this.taskBarEditAction||this.restrictTaskbarEdit?"ParentDrag"!==this.taskBarEditAction&&"ChildDrag"!==this.taskBarEditAction&&"MilestoneDrag"!==this.taskBarEditAction||this.restrictTaskbarEdit?"ConnectorPointLeftDrag"!==this.taskBarEditAction&&"ConnectorPointRightDrag"!==this.taskBarEditAction||"touchmove"==e.type&&!this.checkPointerType(e)||this.restrictTaskbarEdit||(this.updateConnectorLineSecondProperties(e),this.triggerDependencyEvent(e),this.drawFalseLine()):this.enableDragging(e):this.enableRightResizing(e):this.enableLeftResizing(e):this.performProgressResize(e),this.restrictTaskbarEdit||this.setItemPosition(),"ConnectorPointLeftDrag"!==this.taskBarEditAction&&"ConnectorPointRightDrag"!==this.taskBarEditAction&&this.parent.dotNetRef.invokeMethodAsync("UpdateResizingData",this.dataGuid,this.taskBarEditAction,this.taskBarEditRecord),this.taskbarTouchEditing=!0,this.updateTooltip(e)},e.prototype.updateTooltip=function(e){var t=document.getElementById(this.parent.element.id+"_editingtooltip_content");if(!sf.base.isNullOrUndefined(t)){var i=this.taskBarEditRecord,s=i.width,n=i.progressWidth,o=this.parent.getOffsetRect(this.taskBarEditElement),r=this.parent.tooltipModule.getPointerPosition(e),a=sf.base.select(".e-arrow-tip",t),l=a.offsetWidth/2+(t.offsetWidth-t.clientWidth);if(a.style.left="2px","ConnectorPointLeftDrag"===this.taskBarEditAction||"ConnectorPointRightDrag"===this.taskBarEditAction)return;"LeftResizing"===this.taskBarEditAction?t.style.left=o.left-l+"px":"RightResizing"===this.taskBarEditAction||"ParentResizing"===this.taskBarEditAction?t.style.left=(this.parent.enableRTL?o.left-s-l:o.left+s-l)+"px":"ProgressResizing"===this.taskBarEditAction?t.style.left=(this.parent.enableRTL?o.left-n-l:o.left+n-l)+"px":t.style.left=r.x-l+"px"}},e.prototype.setItemPosition=function(){var e=this.taskBarEditRecord,t=this.parent.enableRTL?"right":"left";if(null!=e&&null!=this.taskBarEditElement&&null!=sf.base.closest(this.taskBarEditElement,"tr."+s)){var n="MilestoneDrag"===this.taskBarEditAction||e.isMilestone?this.milestoneHeight:e.width,o=n-10,r=n-2,a=e.progress/100*e.width,l=this.taskBarEditElement.classList.contains(i)?this.taskBarEditElement:sf.base.closest(this.taskBarEditElement,"tr."+s).querySelector("."+i),h=sf.base.closest(this.taskBarEditElement,"tr."+s).querySelector(".e-left-label-container"),d=sf.base.closest(this.taskBarEditElement,"tr."+s).querySelector(".e-right-label-container"),c=this.taskBarEditElement.querySelector(".e-gantt-child-progressbar"),p=this.taskBarEditElement.querySelector(".e-gantt-child-taskbar"),u=this.taskBarEditElement.querySelector(".e-child-progress-resizer"),f=this.taskBarEditElement.querySelector(".e-taskbar-right-resizer"),g=(this.taskBarEditElement.querySelector(".e-gantt-parent-taskbar"),this.taskBarEditElement.querySelector(".e-gantt-parent-progressbar")),m=this.taskBarEditElement.querySelector(".e-right-connectorpoint-outer-div");this.parent.biggerMode&&(o=n-24,r=n+10),"ParentResizing"!==this.taskBarEditAction&&(l.style.width=n+"px",h.style.width=e.left+"px",l.style.setProperty(t,e.left+"px"),sf.base.isNullOrUndefined(d)||d.style.setProperty(t,e.left+n+"px")),m&&m.style.setProperty(t,r+"px"),f&&f.style.setProperty(t,o+"px"),"MilestoneDrag"===this.taskBarEditAction||e.isMilestone?(l.style.setProperty(t,e.left-n/2+"px"),h.style.width=e.left-n/2+"px",sf.base.isNullOrUndefined(d)||d.style.setProperty(t,e.left+n/2+"px")):"ProgressResizing"===this.taskBarEditAction?(p.style.setProperty(t,e.left+e.progressWidth-10+"px"),sf.base.isNullOrUndefined(c)||(c.style.width=e.progressWidth+"px",c.style.borderBottomRightRadius=this.progressBorderRadius+"px",c.style.borderTopRightRadius=this.progressBorderRadius+"px",u.style.setProperty(t,e.progressWidth-8+"px"))):"RightResizing"!==this.taskBarEditAction||sf.base.isNullOrUndefined(p)?"ParentDrag"===this.taskBarEditAction?sf.base.isNullOrUndefined(c)||(g.style.width=e.progressWidth+"px"):(sf.base.isNullOrUndefined(p)||(p.style.width=n+"px"),sf.base.isNullOrUndefined(c)||(f.style.setProperty(t,o+"px"),c.style.width=a+"px",u.style.setProperty(t,a-8+"px"))):(p.style.width=n+"px",sf.base.isNullOrUndefined(c)||(c.style.width=a+"px",f.style.setProperty(t,o+"px"),u.style.setProperty(t,a-8+"px")))}},e.prototype.enableLeftResizing=function(e){var t=this.taskBarEditRecord,i=0;this.mouseDownX>this.mouseMoveX?this.mouseMoveX<t.left+t.width?(i=this.mouseDownX-this.mouseMoveX,t.left>0&&(t.left=this.previousItem.left-i,t.width=this.previousItem.width+i)):this.mouseMoveX>t.left+t.width&&(i=this.mouseDownX-this.mouseMoveX,t.left=this.previousItem.left-i,t.width=3):this.mouseMoveX<t.left+t.width?(i=this.mouseMoveX-this.mouseDownX,t.left<t.left+t.width&&this.previousItem.left+i<=this.previousItem.left+this.previousItem.width&&(t.left=this.previousItem.left+i,t.width=this.previousItem.width-i)):(i=this.mouseMoveX-this.mouseDownX,t.left=this.previousItem.left+i,t.width=3),this.updateEditPosition(e,t),t.left=this.previousItem.left+this.previousItem.width-t.width},e.prototype.enableRightResizing=function(e){var t=this.taskBarEditRecord,i=0;this.mouseDownX>this.mouseMoveX?this.mouseMoveX>t.left&&this.mouseDownX-this.mouseMoveX>3?(i=this.mouseDownX-this.mouseMoveX,t.width=this.previousItem.width-i):this.mouseMoveX<t.left&&(t.width=3):this.mouseMoveX>t.left&&(i=this.mouseMoveX-this.mouseDownX,t.width=this.previousItem.width+i),this.updateEditPosition(e,t)},e.prototype.enableDragging=function(e){var t=this.taskBarEditRecord,i=0;this.mouseDownX>this.mouseMoveX?(i=this.mouseDownX-this.mouseMoveX)>0&&(t.left=this.previousItem.left-i):(i=this.mouseMoveX-this.mouseDownX,t.left=this.previousItem.left+i);var s=this.chartBodyContainer.querySelector(".e-task-table"),n=t.left<0?0:t.left+t.width>=s.offsetWidth?s.offsetWidth-t.width:t.left;t.left=n},e.prototype.performProgressResize=function(e){var t=this.taskBarEditRecord,i=0;this.mouseDownX>this.mouseMoveX?this.mouseMoveX>t.left&&this.mouseMoveX<t.left+t.width&&t.left>0?(i=this.mouseMoveX-t.left,t.progressWidth=i):this.mouseMoveX>=t.left+t.width?t.progressWidth=t.width:t.progressWidth=0:this.mouseMoveX>t.left&&this.mouseMoveX<t.left+t.width?(i=this.mouseMoveX-t.left,t.progressWidth=i):this.mouseMoveX<=t.left?t.progressWidth=0:t.progressWidth=t.width;var s=t.progressWidth>t.width?t.width:t.progressWidth;s=t.progressWidth<0?0:t.progressWidth,t.progressWidth=s;var n=t.width-t.progressWidth;this.progressBorderRadius=n<=4?4-n:0},e.prototype.updateEditPosition=function(e,t){this.updateIsMilestone(t)},e.prototype.updateIsMilestone=function(e){e.width<=3?(e.width=3,e.isMilestone=!0):e.isMilestone=!1},e.prototype.updateConnectorLineSecondProperties=function(e){var t=this.getElementByPosition(e),s=this.parent.getParentElement(t,i);this.connectorSecondAction=null;var n=0;this.parent.getParentElement(t,"e-connectorpoint-left")?(this.connectorSecondAction="ConnectorPointLeftDrag",this.toPredecessorText="Start"):this.parent.getParentElement(t,"e-connectorpoint-right")?(this.connectorSecondAction="ConnectorPointRightDrag",this.toPredecessorText="Finish"):(this.connectorSecondAction=null,this.toPredecessorText=null),this.taskBarEditElement!==s&&this.taskBarEditElement!==this.highlightedSecondElement&&(this.parent.options.enableRowVirtualization&&(n=this.getTopPosition(this.parent.element)),(this.parent.options.enableRowVirtualization&&0==this.elementOffsetLeft||!this.parent.options.enableRowVirtualization)&&(this.elementOffsetLeft=this.taskBarEditElement.offsetLeft,this.elementOffsetTop=this.taskBarEditElement.offsetTop+n,this.elementOffsetWidth=this.taskBarEditElement.offsetWidth,this.elementOffsetHeight=this.taskBarEditElement.offsetHeight,this.showHideTaskBarEditingElements(s,this.highlightedSecondElement))),sf.base.isNullOrUndefined(this.connectorSecondAction)&&!sf.base.isNullOrUndefined(this.connectorSecondElement)&&(this.connectorSecondElement.querySelector(".e-connectorpoint-left").classList.remove("e-connectorpoint-allow-block"),this.connectorSecondElement.querySelector(".e-connectorpoint-right").classList.remove("e-connectorpoint-allow-block")),this.connectorSecondElement=this.connectorSecondAction?s:null,this.toDataGuid=sf.base.isNullOrUndefined(this.connectorSecondElement)?null:this.connectorSecondElement.getAttribute("rowuniqueid")},e.prototype.getTopPosition=function(e){var t,i=e.querySelector(".e-virtualtable"),s=i.style.transform.split(",");if(s.length>1)t=s[1].trim().split(")")[0];else{var n=i.style.transform;t=n.substring(n.lastIndexOf("(")+1,n.lastIndexOf(")"))}return parseFloat(t)},e.prototype.showHideTaskBarEditingElements=function(e,t){if((t=t||this.taskBarEditElement)&&e!==t&&(t.querySelector(".e-taskbar-left-resizer")&&(t.querySelector(".e-taskbar-left-resizer").classList.remove("e-left-resize-gripper"),t.querySelector(".e-taskbar-right-resizer").classList.remove("e-right-resize-gripper"),t.querySelector(".e-child-progress-resizer")&&t.querySelector(".e-child-progress-resizer").classList.remove("e-progress-resize-gripper")),t.querySelector(".e-connectorpoint-left")||t.parentElement.querySelector(".e-connectorpoint-left"))){var i=sf.base.isNullOrUndefined(t.querySelector(".e-connectorpoint-left"))?t.parentElement:t;i.querySelector(".e-connectorpoint-left").classList.remove("e-connectorpoint-left-hover"),i.querySelector(".e-connectorpoint-right").classList.remove("e-connectorpoint-right-hover")}},e.prototype.triggerDependencyEvent=function(e,t){var i=this;this.parent.dotNetRef.invokeMethodAsync("DrawConnectorLine",this.taskBarEditAction,this.connectorSecondAction,this.toDataGuid).then((function(t){if(t){var s=document.getElementById(i.parent.element.id+"_editingtooltip_content");if(!sf.base.isNullOrUndefined(s)){var n=i.parent.tooltipModule.getPointerPosition(e),o=sf.base.select(".e-arrow-tip",s).offsetWidth/2+(s.offsetWidth-s.clientWidth);s.style.left=n.x-o+"px",s.style.visibility="visible"}}else{var r=i.getElementByPosition(e);(r.classList.contains("e-connectorpoint-left")||r.classList.contains("e-connectorpoint-right"))&&r.classList.add("e-connectorpoint-allow-block")}}))},e.prototype.drawFalseLine=function(){var e,t=this.mouseDownX,i=this.mouseDownY,s=this.mouseMoveX,n=this.mouseMoveY,o=Math.sqrt((t-s)*(t-s)+(i-n)*(i-n)),r=180*Math.atan2(n-i,s-t)/Math.PI,a="rotate("+(this.parent.enableRTL?-r:r)+"deg)",l=0;sf.base.isNullOrUndefined(document.querySelectorAll(".e-chart-row")[0])||(l=document.querySelectorAll(".e-chart-row")[0].offsetWidth),"ConnectorPointLeftDrag"===this.taskBarEditAction&&(e=this.parent.enableRTL?l-(this.elementOffsetLeft+this.elementOffsetWidth+this.connectorPointWidth/2)-Math.abs(this.parent.chartPreviousScroll.left):this.elementOffsetLeft-this.connectorPointWidth/2-Math.abs(this.parent.chartPreviousScroll.left)),"ConnectorPointRightDrag"===this.taskBarEditAction&&(e=this.parent.enableRTL?l-(this.elementOffsetLeft-this.connectorPointWidth/2)-Math.abs(this.parent.chartPreviousScroll.left):this.elementOffsetLeft+this.elementOffsetWidth+this.connectorPointWidth/2-Math.abs(this.parent.chartPreviousScroll.left));var h=this.elementOffsetTop+this.elementOffsetHeight/2+this.chartBodyContainer.offsetTop-this.parent.chartPreviousScroll.top;this.removeFalseLine(!1),this.falseLine=document.createElement("div"),this.falseLine.className="e-gantt-false-line",this.falseLine.id="ganttfalseline"+this.parent.element.id,this.falseLine.style.position="absolute",this.falseLine.style.transform=a,this.falseLine.style.borderTopWidth="1px",this.falseLine.style.borderTopStyle="dashed",this.falseLine.style.zIndex="5",this.falseLine.style.width=o-3+"px",this.falseLine.style.top=h+"px",this.parent.enableRTL?(this.falseLine.style.left="auto",this.falseLine.style.right=e+"px",this.falseLine.style.transformOrigin="100% 0%"):(this.falseLine.style.right="auto",this.falseLine.style.left=e+"px",this.falseLine.style.transformOrigin="0% 100%"),this.chartBodyContainer.appendChild(this.falseLine)},e.prototype.removeFalseLine=function(e){this.falseLine&&(sf.base.remove(this.falseLine),this.falseLine=null,e&&(this.elementOffsetLeft=0,this.elementOffsetTop=0,this.elementOffsetWidth=0,this.elementOffsetHeight=0))},e.prototype.destroy=function(e){this.stopScrollTimer(),this.removeEventListeners(e)},e}(),a=function(){function e(e){this.parent=e,this.chartPane=this.parent.element.querySelector(".e-gantt-chart-pane"),this.addEventListeners()}return e.prototype.addEventListeners=function(){sf.base.EventHandler.add(this.chartPane,sf.base.Browser.touchStartEvent,this.ganttMouseMove,this),sf.base.EventHandler.add(this.chartPane,sf.base.Browser.touchMoveEvent,this.ganttMouseMove,this)},e.prototype.removeEventListeners=function(e){var t=e.element.querySelector(".e-gantt-chart-pane");sf.base.EventHandler.remove(t,sf.base.Browser.touchStartEvent,this.ganttMouseMove),sf.base.EventHandler.remove(t,sf.base.Browser.touchMoveEvent,this.ganttMouseMove)},e.prototype.ganttMouseMove=function(e){this.tooltipMouseEvent=e},e.prototype.tooltipOpened=function(e){var t=document.getElementById(e.element.id);if(!sf.base.isNullOrUndefined(this.tooltipMouseEvent)){var i=this.getPointerPosition(this.tooltipMouseEvent),s=this.parent.getOffsetRect(this.chartPane),n=s.top+this.chartPane.offsetHeight,o=s.left+this.chartPane.offsetWidth,r=i.x,a=i.y;if(o<r+t.offsetWidth+10)for(;o<r+t.offsetWidth+10;)r=o-t.offsetWidth-10,t.style.left=r+"px";else r+=10,t.style.left=r+"px";window.innerHeight<t.offsetHeight+a&&(a=a-t.offsetHeight-10),n<a+t.offsetHeight+20?a=a-t.offsetHeight-10:a+=10,t.style.top=a+"px",t.style.visibility="visible"}},e.prototype.predecessorTooltipOpened=function(e){var t=document.getElementById(e.element.id);if(!sf.base.isNullOrUndefined(this.tooltipMouseEvent)){var i=this.getPointerPosition(this.tooltipMouseEvent),s=this.parent.getOffsetRect(this.chartPane),n=s.top+this.chartPane.offsetHeight,o=s.left+this.chartPane.offsetWidth,r=i.x,a=i.y;if(o<r+t.offsetWidth+10)for(;o<r+t.offsetWidth+10;)r=o-t.offsetWidth-10,t.style.left=r+"px";else r=r,t.style.left=r+"px";if(window.innerHeight<t.offsetHeight+a&&(a=a-t.offsetHeight-10),n<a+t.offsetHeight+20?a=a-t.offsetHeight-10:a+=10,document.getElementsByClassName("e-arrow-tip e-tip-bottom").length>0)document.getElementsByClassName("e-arrow-tip e-tip-bottom")[0].style.left=i.x-t.offsetLeft+"px";t.style.visibility="visible"}},e.prototype.getPointerPosition=function(e){var t,i;return sf.base.isNullOrUndefined(sf.base.getValue("pageX",e))&&sf.base.isNullOrUndefined(sf.base.getValue("pageY",e))?sf.base.isNullOrUndefined(sf.base.getValue("touches[0].pageX",e))&&sf.base.isNullOrUndefined(sf.base.getValue("touches[0].pageY",e))?sf.base.isNullOrUndefined(sf.base.getValue("clientX",e))&&sf.base.isNullOrUndefined(sf.base.getValue("clientY",e))||(t=sf.base.getValue("clientX",e)+document.body.scrollLeft+document.documentElement.scrollLeft,i=sf.base.getValue("clientY",e)+document.body.scrollTop+document.documentElement.scrollTop):(t=sf.base.getValue("touches[0].pageX",e),i=sf.base.getValue("touches[0].pageY",e)):(t=sf.base.getValue("pageX",e),i=sf.base.getValue("pageY",e)),{x:t,y:i}},e.prototype.destroy=function(e){this.removeEventListeners(e)},e}(),l=function(){function i(e,t,i,s){this.toolbarHeight=0,this.chartPreviousScroll={top:0,left:0},this.treegridPreviousScroll={top:0,left:0},window.sfBlazor=window.sfBlazor,this.element=t,this.dotNetRef=s,this.isFromTreeGrid=!1,this.options=i,this.dataId=e,window.sfBlazor.setCompInstance(this),this.enableRTL=i.enableRtl}return i.prototype.getOffsetRect=function(e){var t=e.getBoundingClientRect(),i=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,s=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,n=document.documentElement.clientTop||document.body.clientTop||0,o=document.documentElement.clientLeft||document.body.clientLeft||0,r=t.top+i-n,a=this.enableRTL?t.right+s-o:t.left+s-o;return{top:Math.round(r),left:Math.round(a),width:t.width,height:t.height}},i.prototype.getParentElement=function(e,t,i){for(var s=e;s&&!(i?s.id===t:s.classList.contains(t));)s=s.parentElement;return s},i.prototype.destroy=function(){e.prototype.destroy(this),r.prototype.destroy(this),a.prototype.destroy(this),t.prototype.destroy(this)},i}(),h=function(){function e(e){this.activeElementName=null,this.activeElement=null,this.parent=e}return e.prototype.taskbarFocus=function(e){var t=e.querySelector(".e-gantt-child-taskbar"),s=e.querySelector(".e-gantt-parent-taskbar"),o=e.querySelector(".e-gantt-milestone"),r=e.querySelector(".e-gantt-parent-milestone");return this.activeElementName=i,o?(this.activeElement=o,o.focus(),e.querySelector("."+i).querySelector(".e-gantt-milestone").classList.add(n)):r?(this.activeElement=r,r.focus(),e.querySelector("."+i).querySelector(".e-gantt-parent-milestone").classList.add(n)):t?(this.activeElement=t,t.focus(),e.querySelector("."+i).querySelector(".e-gantt-child-taskbar").classList.add(n)):(this.activeElement=s,s.focus(),e.querySelector("."+i).querySelector(".e-gantt-parent-taskbar").classList.add(n)),"isNextTaskbar"},e.prototype.RightLabelFocus=function(e){var t=e.querySelector(".e-right-label-container");return this.activeElementName="e-right-label-container",this.activeElement=t,t.focus(),t.querySelector(".e-label").classList.add(n),"isNextRightLabel"},e.prototype.LeftLabelFocus=function(e){var t=e.querySelector(".e-left-label-container");return this.activeElementName="e-left-label-container",this.activeElement=t,t.focus(),t.querySelector(".e-label").classList.add(n),"isNextLeftLabel"},e}();return{initialize:function(e,t,i,s,n,o){var r={taskMode:i.taskMode,allowTaskbarEditing:i.allowTaskbarEditing,enableRowVirtualization:i.enableRowVirtualization,enableTimelineVirtualization:i.enableTimelineVirtualization,allowSchedulingOnDrag:i.allowSchedulingOnDrag,enableRtl:i.enableRtl},a=new l(e,t,r,s);this.dotnetRef=s;var h={};this.instance=window.sfBlazor.getCompInstance(e);var d=a.element.querySelector("#"+a.element.id+"_Gantt_Splitter");return a.height=h.height=t.offsetHeight,a.width=h.width=t.offsetWidth,a.isMobileDevice=sf.base.Browser.isDevice,a.toolbarElement=t.querySelector("#"+t.id+"_Gantt_Toolbar"),sf.base.isNullOrUndefined(a.toolbarElement)||(a.toolbarHeight=h.toolbarHeight=a.toolbarElement.offsetHeight),document.body.classList.contains("e-bigger")&&(a.biggerMode=h.biggerMode=!0),d.style.height="calc(100% - "+a.toolbarHeight+"px)",h.ganttOffsetSize=this.ChartInitialize(i.timelineWidth,i.milestoneHeight,i.taskbarEvent),this.getTreeGrid(e,n,o),h},refreshGantt:function(e){var t=window.sfBlazor.getCompInstance(e);return document.body.classList.contains("e-bigger")?t.biggerMode=!0:t.biggerMode=!1,t.biggerMode},adjustTable:function(e,t,i,s){var n,o=e.chartScrollModule,r=o.chartVirtualTable,a=o.chartRootElement.querySelector(".e-virtualtrack");if(e.options.enableRowVirtualization){var l=document.getElementById("treeGrid"+e.element.id+"_gridcontrol").querySelector(".e-gridcontent"),h=void 0,d=void 0;i?(d=l.querySelectorAll(".e-virtualtrack")[1],h=l.querySelectorAll(".e-virtualtable")[0]):(h=l.querySelector(".e-virtualtable"),d=l.querySelector(".e-virtualtrack")),n=new DOMMatrixReadOnly(r.style.transform);var c=new DOMMatrixReadOnly(h.style.transform);sf.base.isNullOrUndefined(h)||sf.base.isNullOrUndefined(r)||(a.style.height=d.style.height,""==r.style.transform?r.style.transform=h.style.transform:r.style.transform="translate("+n.m41+"px,"+c.m42+"px)")}if(e.options.enableTimelineVirtualization){var p=3*e.element.offsetWidth;n=new DOMMatrixReadOnly(r.style.transform);var u=t<p?0:t<n.m41?t-p:n.m41;a.style.width=o.timelineVirtualTrack.offsetWidth+"px",r.style.transform="translate("+u+"px,"+n.m42+"px)",sf.base.isNullOrUndefined(o.dependencyViewContainer)||(o.dependencyViewContainer.style.left=-u+"px")}},setChartHeight:function(e,t,i,s){var n,o=window.sfBlazor.getCompInstance(e),r=0,a={chartHeight:0,viewPortHeight:0},l=o.chartScrollModule,h=o.element.querySelector(".e-gridcontent");i?(o.element.querySelector(".e-frozenheader")?h.querySelector(".e-content").classList.add("e-gantt-frozen"):sf.base.removeClass(h.querySelectorAll(".e-content"),"e-gantt-frozen"),s&&(n=h.querySelectorAll(".e-virtualtrack")[1])):n=h.querySelector(".e-virtualtrack");var d=o.element.querySelector(".e-gridcontent").querySelector(".e-content");if(sf.base.isNullOrUndefined(n)&&(n=o.element.querySelector("#treeGrid"+o.element.id+"_gridcontrol_content_table")),n&&n.clientHeight){var c=o.element.querySelector("#treeGrid"+o.element.id+"_gridcontrol"),p=n.clientHeight+1+"px",u=l.chartRootElement;l.chartTaskTable=u.querySelector(".e-task-table");var f=l.chartTaskTable.clientHeight,g=u.getElementsByClassName("e-chart-rows-container")[0],m=c.querySelectorAll(".e-content")[0].clientHeight,v=l.timelineHeaderElement;m<n.clientHeight?(r=n.clientHeight,g.style.height=o.options.enableRowVirtualization?f+"px":p,v.style.width="calc(100% - "+(o.isMobileDevice?0:o.scrollWidth)+"px)",d.style.cssText+="width: calc(100% + "+(o.scrollWidth+1)+"px);"):(r=m,g.style.height=m-1+"px",v.style.width="100%",d.style.cssText+="width: calc(100% + 1px);"),this.viewPortHeight=m,a.chartHeight=o.options.enableRowVirtualization?r-f:r,a.viewPortHeight=m}return!sf.base.isNullOrUndefined(o)&&o.enableRTL&&(o.element.querySelector(".e-gridheader").style.paddingLeft="0"),this.adjustTable(o,t,i,s),a},treegridHeaderAlign:function(e,t){if(t){sf.base.addClass(e.treeGridElement.querySelectorAll(".e-headercell"),"e-timeline-single-header-outer-div"),sf.base.addClass(e.treeGridElement.querySelectorAll(".e-columnheader"),"e-timeline-single-header-outer-div");var i=e.element.querySelector(".e-gridheader").offsetHeight;e.element.querySelector(".e-gridcontent").style.height="calc(100% - "+i+"px)"}else sf.base.removeClass(e.treeGridElement.querySelectorAll(".e-headercell"),"e-timeline-single-header-outer-div"),sf.base.removeClass(e.treeGridElement.querySelectorAll(".e-columnheader"),"e-timeline-single-header-outer-div")},getTreeGrid:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);this.hideTreeGridScrollBar(s,i),sf.base.isNullOrUndefined(s.treeGridElement)||(this.instance.treeGrid=s.treeGridElement.blazor_instance),this.treegridHeaderAlign(s,t)},hideTreeGridScrollBar:function(e,i){e.treeGridElement=e.element.querySelector("#treeGrid"+e.element.id);var s=e.treeGridElement.querySelector(".e-content"),n=s.querySelector(".e-table"),o=e.treeGridElement.querySelector(".e-headercontent");if(i){e.treeGridModule=new t(e,s),e.scrollWidth=this.getScrollbarWidth(e.element),s.clientHeight>n.clientHeight?s.style.cssText+="width: calc(100% + 1px);":s.clientHeight<n.clientHeight?(e.scrollWidth=e.isMobileDevice?16:e.scrollWidth,s.style.cssText+="width: calc(100% + "+(e.scrollWidth+1)+"px);"):s.classList.add("e-gantt-scroll-padding"),e.element.querySelector(".e-gridcontent").querySelector(".e-content").classList.add("e-gantt-frozen"),e.options.enableRowVirtualization&&(s.style.height="calc(100% - 17px)");var r=e.element.querySelector(".e-frozen-left-scrollbar");if(null!=r){var a=parseFloat(r.style.width)-3;r.style.width=a+"px"}var l=e.element.querySelector(".e-frozen-right-scrollbar");if(null!=l){a=parseFloat(l.style.width)-19;l.style.width=a+"px"}}else s&&(s.style.height="100%",e.element.querySelector(".e-gridcontent").style.height="calc(100% - "+e.element.querySelector(".e-gridheader").offsetHeight+"px)",e.treeGridModule=new t(e,s)),e.scrollWidth=this.getScrollbarWidth(e.element),s.clientHeight>n.clientHeight?s.style.cssText+="width: calc(100% + 1px);":s.clientHeight<n.clientHeight?(e.scrollWidth=e.isMobileDevice?16:e.scrollWidth,s.style.cssText+="width: calc(100% + "+(e.scrollWidth+1)+"px);"):s.classList.add("e-gantt-scroll-padding"),s.style.cssText+="overflow: auto;",o.style.width="calc(100% + 1px)"},getScrollbarWidth:function(e){var t=e,i=document.createElement("div");i.style.visibility="hidden",i.style.overflow="scroll",i.style.msOverflowStyle="scrollbar";var s=document.createElement("div");i.appendChild(s),t.appendChild(i);var n=i.offsetWidth-s.offsetWidth;return i.parentNode.removeChild(i),n},getOffsetLeft:function(e){var t=this.instance.element.getBoundingClientRect(),i=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,s=document.documentElement.clientLeft||document.body.clientLeft||0,n=t.left+i-s;return Math.round(n)},tooltipOpened:function(e,t){this.instance.tooltipModule.tooltipOpened(t)},predecessorTooltipOpened:function(e,t){this.instance.tooltipModule.predecessorTooltipOpened(t)},setTooltipVisibility:function(){var e=document.getElementById(this.instance.element.id+"_editingtooltip_content");sf.base.isNullOrUndefined(e)||(e.style.visibility="visible")},removeEmptyRowElement:function(){sf.base.isNullOrUndefined(this.instance.taskbarEditModule.chartEmptyRowElement)||(sf.base.remove(this.instance.taskbarEditModule.chartEmptyRowElement),this.instance.taskbarEditModule.chartEmptyRowElement=null)},ChartInitialize:function(t,i,s){return this.instance.totalTimelineWidth=t,this.instance.isTaskbarEditingEventMapped=s,this.instance.keyboardModule=new h(this.instance),this.instance.options.allowTaskbarEditing&&(this.instance.taskbarEditModule=new r(this.instance),this.instance.taskbarEditModule.milestoneHeight=i),this.instance.tooltipModule=new a(this.instance),this.instance.chartScrollModule=new e(this.instance,this.instance.element),this.instance.spinnerShown=!1,{viewPortHeight:this.instance.element.querySelector(".e-gridcontent").querySelector(".e-content").clientHeight,chartWidth:this.instance.element.querySelector(".e-gantt-chart-pane").offsetWidth}},UpdateScroll:function(e,t){this.scrollBarElement=this.instance.element.querySelector(".e-chart-scroll-container"),this.instance.chartScrollModule.previousCount=-1;var i=this.scrollBarElement.scrollLeft;i=this.instance.enableRTL&&-1==Math.sign(i)?-i:i,(this.scrollBarElement.offsetWidth<t||i>t)&&(this.scrollBarElement.scrollLeft=this.instance.enableRTL?-t:t)},chartFocusOutHandler:function(e,t){var i=this.instance.element.querySelector(".e-chart-row-cell[data-uid="+e+"]"),s=i.querySelector("."+n)?i.querySelector("."+n).parentElement:null;s&&(s.querySelector(".e-label").classList.remove(n),s.blur())},focusOutHandler:function(e){sf.base.isNullOrUndefined(e.classList)||e.classList.remove(n)},resetPrivateProperties:function(e){this.instance.taskbarEditModule.tappedPoint=null},setActiveElement:function(e,t){this.instance.keyboardModule.activeElement=e,this.instance.keyboardModule.activeElementName=t},tabFocusHandler:function(e,t,s,o){var r=this.instance.element.querySelector(".e-chart-row-cell[data-uid="+e+"]"),a="isNextLeftLabel",l=r.querySelector("."+n)?r.querySelector("."+n).parentElement:null;if("ArrowDown"!=o&&"ArrowUp"!=o||null!=l){if(l){if(null==l&&null!=this.instance.keyboardModule.activeElement){if("Tab"==o||"ArrowRight"==o){switch(this.instance.keyboardModule.activeElementName){case"e-left-label-container":a=this.instance.keyboardModule.taskbarFocus(r);break;case i:a=this.instance.keyboardModule.RightLabelFocus(r);break;default:this.instance.keyboardModule.activeElement=null,this.instance.keyboardModule.activeElementName=null,a="isFirstGridCell"}return a}switch(this.instance.keyboardModule.activeElementName){case"e-left-label-container":this.instance.keyboardModule.activeElement=null,this.instance.keyboardModule.activeElementName=null,a="isLastGridCell";break;case i:a=this.instance.keyboardModule.LeftLabelFocus(r);break;default:a=this.instance.keyboardModule.taskbarFocus(r)}return a}return l.classList.contains("e-left-label-inner-div")?s?(l.querySelector(".e-label").classList.remove(n),l.blur(),this.instance.keyboardModule.activeElement=null,this.instance.keyboardModule.activeElementName=null,"isLastGridCell"):this.instance.keyboardModule.taskbarFocus(r):l.classList.length?l.classList.contains("e-right-label-inner-div")?s?this.instance.keyboardModule.taskbarFocus(r):"ArrowRight"==o||"Tab"==o?(this.instance.keyboardModule.activeElement=null,this.instance.keyboardModule.activeElementName=null,"isFirstGridCell"):(this.instance.keyboardModule.activeElement=null,this.instance.keyboardModule.activeElementName=null,"isLastGridCell"):"":s?r.querySelector(".e-left-label-inner-div")?this.instance.keyboardModule.LeftLabelFocus(r):(this.instance.keyboardModule.activeElement=null,this.instance.keyboardModule.activeElementName=null,"isLastGridCell"):r.querySelector(".e-right-label-inner-div")?this.instance.keyboardModule.RightLabelFocus(r):"ArrowRight"==o||"Tab"==o?(this.instance.keyboardModule.activeElement=null,this.instance.keyboardModule.activeElementName=null,"isFirstGridCell"):(this.instance.keyboardModule.activeElement=null,this.instance.keyboardModule.activeElementName=null,"isLastGridCell")}return a=!s&&"ArrowLeft"!=o&&r.querySelector(".e-left-label-inner-div")?this.instance.keyboardModule.LeftLabelFocus(r):s&&r.querySelector(".e-right-label-inner-div")?this.instance.keyboardModule.RightLabelFocus(r):this.instance.keyboardModule.taskbarFocus(r)}switch(this.focusOutHandler(this.instance.keyboardModule.activeElement),this.instance.keyboardModule.activeElementName){case i:this.instance.keyboardModule.taskbarFocus(r);break;case"e-left-label-container":this.instance.keyboardModule.LeftLabelFocus(r);break;default:this.instance.keyboardModule.RightLabelFocus(r)}return""},updateScrollLeft:function(e,t,i){var s=this.instance.element.querySelector(".e-chart-scroll-container");if(null!=i){var n=this.instance.element.querySelector(".e-row").offsetHeight,o=i*n;(s.offsetHeight-n/2+s.scrollTop<o||s.scrollTop>o)&&(s.scrollTop=o)}if(t=t>0?t:0,t=s.scrollWidth<=t?s.scrollWidth:t,s.offsetWidth+s.scrollLeft<t||s.scrollLeft>t){var r=t-50;s.scrollLeft=this.instance.enableRTL?-r:r}},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);null!=t&&null!=t.dotNetRef&&t.destroy()}}}()},"./modules/sf-grid.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Grid=function(){"use strict";var e,t,s=null;function n(){if(null!==s)return s;var e,t=document.createElement("div");return t.style.cssText="width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(t),e=t.offsetWidth-t.clientWidth|0,document.body.removeChild(t),s=e}function o(e,t){for(var i=e[t+"ElementSibling"],s=0,n=["e-gridheader","e-gridfooter","e-groupdroparea","e-gridpager","e-toolbar"];i;)n.some((function(e){return i.classList.contains(e)}))&&(s+=i.offsetHeight),i=i[t+"ElementSibling"];return s}function r(e,t,i){for(var s=e;s&&!(i?s.id===t:s.classList.contains(t));)s=s.parentElement;return s}function a(e,t){for(var i=-1,s=0,n=t.length;s<n;s++)if(t[s].isEqualNode(e)){i=s;break}return i}function l(e,t){for(var i=0,s=t.length;i<s;i++)if(t[i]===e)return i;return-1}function h(e){var t={};return t.x=sf.base.isNullOrUndefined(e.clientX)?e.changedTouches[0].clientX:e.clientX,t.y=sf.base.isNullOrUndefined(e.clientY)?e.changedTouches[0].clientY:e.clientY,t}function d(e,t){for(var i=[],s=0,n=e.length;s<n;s++){var o=t(e[s],s);sf.base.isNullOrUndefined(o)||i.push(o)}return i}function c(e){var t=e.querySelector("#"+e.id+"EditConfirm");return e.querySelectorAll(".e-updatedtd").length&&(!t||t.classList.contains("e-popup-close"))}function p(e){return e.options.enableVirtualization&&e.options.groupCount>0&&(e.options.offline||""===e.options.url)}function u(e,t){for(var i=[].slice.call(e.querySelectorAll(t)),s=0;s<i.length;s++)sf.base.remove(i[s])}function f(e,t){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];for(var n=0,o=e.length;n<o;n++)t?(sf.base.classList(e[n],i.slice(),[]),e[n].setAttribute("aria-selected","true")):(sf.base.classList(e[n],[],i.slice()),e[n].removeAttribute("aria-selected"))}!function(e){e.timer=null}(e||(e={}));var g=function(){function e(e){this.previousValues={top:0,left:0},this.oneTimeReady=!0,this.parent=e,this.addEventListener(),this.setHeight(),this.setPadding()}return e.prototype.setHeight=function(){var e=0,t=this.parent.element.querySelector(".e-content");if(this.parent.options.frozenRows&&"auto"!==this.parent.options.height&&!this.parent.options.height.match(/%/g)){var i=this.parent.element.querySelector(".e-headercontent").querySelector("tbody");e=i?i.offsetHeight:0,t.style.height=sf.base.formatUnit(parseInt(this.parent.options.height)-e)}},e.prototype.removeUnwantedScroll=function(e,t){void 0===t&&(t=0);var i=!1,s=this.parent.content.offsetWidth>=this.parent.getContentTable().offsetWidth,n=0!=this.parent.options.frozenRows&&0==this.parent.options.frozenColumns,o=this.parent.element.querySelector(".e-movablescrollbar");o&&o.offsetHeight;0==this.parent.options.frozenColumns||sf.base.isNullOrUndefined(this.getMovableContent())||(i=this.getMovableContent().offsetWidth>=this.getMovableContentTable().offsetWidth+t-2||0==this.getMovableContent().offsetWidth);var r=this.parent.content.scrollWidth>this.parent.content.offsetWidth?this.parent.content.scrollHeight+17:this.parent.content.scrollHeight;return"Height"===e&&this.parent.content.offsetHeight>=r||!("Width"!==e||!(i||n&&s))&&("100%"==this.parent.options.height&&(this.frozenContentElement().style.borderBottom="none"),!0)},e.prototype.getMovableContent=function(){return this.parent.element.querySelector(".e-movablecontent")},e.prototype.getMovableContentTable=function(){return this.parent.element.querySelector(".e-movablecontent .e-table")},e.prototype.frozenContentElement=function(){return this.parent.element.querySelector(".e-frozencontent")},e.prototype.getScrollbar=function(){return this.parent.element.querySelector(".e-scrollbar")},e.prototype.setPadding=function(){var t=this.parent.element.querySelector(".e-gridheader");if(!sf.base.isNullOrUndefined(t)&&("auto"!=this.parent.options.height||"None"!=this.parent.options.frozenName||0!=this.parent.options.frozenColumns)){if(this.removeUnwantedScroll("Height"))return this.content.style.overflow=this.parent.options.frozenColumns?"hidden auto":"auto",t.querySelector(".e-headercontent").style.borderRightWidth="",void(t.style.paddingRight="");var i=e.getScrollBarWidth()-this.getThreshold(),s=this.getCssProperties();this.parent.options.enableRtl?t.style["padding-right"]="":t.style["padding-left"]="";var n=this.parent.element.querySelector(".e-content");!this.parent.options.enableVirtualization&&"auto"==n.style.overflowY&&this.parent.options.frozenColumns>0&&"auto"==this.parent.options.height&&(i=0),t.style[s.padding]=i>0?i+"px":"0px",t.querySelector(".e-headercontent").style[s.border]=i>0?"1px":"0px";var o=this.parent.element.querySelector(".e-gridfooter");if(o)o.querySelector(".e-summarycontent").style[s.border]=i>0?"1px":"0px",o.style[s.padding]=i>0?i+"px":"0px"}},e.prototype.removePadding=function(e){var t=this.getCssProperties(e),i=this.parent.getHeaderContent().querySelector(".e-headercontent");i.style[t.border]="",i.parentElement.style[t.padding]="";this.parent.getFooterContent()},e.prototype.refresh=function(){if("100%"===this.parent.options.height){var e,t=this.parent.element.querySelector(".e-gridcontent"),i=o(e=t,"previous")+o(e,"next");t.style.height="calc(100% - "+i+"px)"}},e.prototype.getThreshold=function(){return"mozilla"===sf.base.Browser.info.name?.5:1},e.prototype.addEventListener=function(){this.wireEvents()},e.prototype.onContentScroll=function(e){var t=this,i=e,s=i.classList.contains("e-headercontent");return function(e){if(null!==t.content.querySelector("tbody")){var n=e.target,o=n.scrollLeft,r=(n.scrollWidth,n.classList.contains("e-summarycontent"));if(t.previousValues.left!==o){i.scrollLeft=o;var a=0!=t.parent.options.frozenColumns?t.parent.element.querySelector(".e-movablefootercontent"):t.parent.element.querySelector(".e-summarycontent");a&&(a.scrollLeft=o),r&&(t.header.scrollLeft=o),t.previousValues.left=o}else t.previousValues.top=s?n.scrollTop:t.previousValues.top}}},e.prototype.onFreezeContentScroll=function(e){var t=this,i=e;return function(e){if(null!==t.content.querySelector("tbody")){var s=e.target.scrollTop;t.previousValues.top!==s&&(i.scrollTop=s,t.previousValues.top=s)}}},e.prototype.onCustomScrollbar=function(e,t){var i,s=this,n=e,o=t;return function(e){if(null!==s.content.querySelector("tbody")){var t=e.target.scrollLeft;s.previousValues.left!==t&&(s.parent.options.aggregatesCount&&(i=s.parent.element.querySelector(".e-movablefootercontent")),n.scrollLeft=t,o.scrollLeft=t,i&&(i.scrollLeft=t),s.previousValues.left=t)}}},e.prototype.onWheelScroll=function(e){var t=this,i=e;return function(e){if(null!==t.content.querySelector("tbody")){var s=i.scrollTop+(1===e.deltaMode?30*e.deltaY:e.deltaY);t.previousValues.top!==s&&(e.preventDefault(),t.parent.getContent().querySelector(".e-frozencontent").scrollTop=s,i.scrollTop=s,t.previousValues.top=s)}}},e.prototype.onTouchScroll=function(e){var t=this,i=e;return function(e){if("mouse"!==e.pointerType){var s=t.parent.options.frozenColumns>0,n=t.getPointXY(e),o=i.scrollLeft+(t.pageXY.x-n.x),r=s?t.parent.getHeaderContent().querySelector(".e-movableheader"):t.parent.getHeaderContent().querySelector(".e-headercontent"),a=s?t.parent.getContent().querySelector(".e-movablecontent"):t.parent.getContent().querySelector(".e-content");if(!(t.previousValues.left===o||o<0||r.scrollWidth-r.clientWidth<o)){if(event.cancelable&&e.preventDefault(),r.scrollLeft=o,a.scrollLeft=o,s)t.parent.element.querySelector(".e-movablescrollbar").scrollLeft=o;t.pageXY.x=n.x,t.previousValues.left=o}}}},e.prototype.setPageXY=function(){var e=this;return function(t){"mouse"!==t.pointerType&&(e.pageXY=e.getPointXY(t))}},e.prototype.getPointXY=function(e){var t={x:0,y:0};return e.touches&&e.touches.length?(t.x=e.touches[0].pageX,t.y=e.touches[0].pageY):(t.x=e.pageX,t.y=e.pageY),t},e.prototype.wireEvents=function(){var e=this;if(this.oneTimeReady){var t=this.parent.options.frozenColumns;this.content=this.parent.getContent(),this.header=this.parent.getHeaderContent();var i=this.content.querySelector(".e-movablecontent"),s=this.content.querySelector(".e-frozencontent"),n=this.header.querySelector(".e-movableheader"),o=this.content.parentElement.querySelector(".e-movablescrollbar");if(this.parent.options.frozenColumns&&sf.base.EventHandler.add(t?n:this.header,"touchstart pointerdown",this.setPageXY(),this),t?(sf.base.EventHandler.add(o,"scroll",this.onCustomScrollbar(i,n),this),sf.base.EventHandler.add(i,"scroll",this.onCustomScrollbar(o,n),this),sf.base.EventHandler.add(n,"scroll",this.onCustomScrollbar(o,i),this),sf.base.EventHandler.add(i,"scroll",this.onFreezeContentScroll(s),this),sf.base.EventHandler.add(s,"scroll",this.onFreezeContentScroll(i),this),sf.base.EventHandler.add(n,"scroll",this.onContentScroll(i),this),sf.base.EventHandler.add(s,"wheel",this.onWheelScroll(i),this),sf.base.EventHandler.add(n,"touchstart pointerdown",this.setPageXY(),this),sf.base.EventHandler.add(i,"touchstart pointerdown",this.setPageXY(),this),sf.base.EventHandler.add(i,"touchmove pointermove",this.onTouchScroll(n),this)):(sf.base.EventHandler.add(this.content,"scroll",this.onContentScroll(this.header),this),sf.base.EventHandler.add(this.header,"scroll",this.onContentScroll(this.content),this)),this.parent.options.aggregatesCount){var r=this.parent.options.frozenColumns?this.parent.element.querySelector(".e-movablefootercontent"):this.parent.element.querySelector(".e-summarycontent");sf.base.isNullOrUndefined(r)||sf.base.EventHandler.add(r,"scroll",this.onContentScroll(this.content),this)}this.parent.options.enableStickyHeader&&this.addStickyListener(!0),this.refresh(),this.oneTimeReady=!1}var a,l,h,d,c,p=this.parent.getContent().querySelector(".e-table");d=function(){a=e.header.scrollLeft,l=p.scrollHeight,h=e.parent.getContent().clientHeight},c=function(){e.parent.options.enableVirtualization||(l<h&&(sf.base.addClass(p.querySelectorAll("tr:last-child td"),"e-lastrowcell"),e.parent.options.frozenColumns&&sf.base.addClass(e.parent.getContent().querySelector(".e-movablecontent").querySelectorAll("tr:last-child td"),"e-lastrowcell")),(e.parent.options.frozenColumns>0||e.parent.options.frozenColumns>0)&&e.header.querySelector(".e-movableheader")?e.header.querySelector(".e-movableheader").scrollLeft=e.previousValues.left:e.header.scrollLeft=e.previousValues.left,e.content.scrollLeft=e.previousValues.left,e.content.scrollTop=e.previousValues.top),e.parent.options.enableColumnVirtualization||(e.content.scrollLeft=a),e.parent.options.frozenColumns&&e.header.querySelector(".e-movableheader")&&(e.header.querySelector(".e-movableheader").scrollLeft=e.content.querySelector(".e-movablecontent").scrollLeft)},requestAnimationFrame((function(){try{c(null,d())}catch(e){c(e)}}))},e.prototype.getCssProperties=function(e){var t={},i=sf.base.isNullOrUndefined(e)?this.parent.options.enableRtl:e;return t.border=i?"borderLeftWidth":"borderRightWidth",t.padding=i?"paddingLeft":"paddingRight",t},e.prototype.getScrollableParent=function(e){if(null===e)return null;var t=sf.base.isNullOrUndefined(e.tagName)?e.scrollingElement:e,i=document.defaultView.getComputedStyle(t,null).overflowY;return t.scrollHeight>t.clientHeight&&"hidden"!==i&&"visible"!==i||"HTML"===e.tagName||"ARTICLE"===e.tagName?e:this.getScrollableParent(e.parentNode)},e.prototype.addStickyListener=function(e){this.gridParentElement=this.getScrollableParent(this.parent.element.parentElement),e&&(this.gridParentElement?sf.base.EventHandler.add("HTML"===this.gridParentElement.tagName||"ARTICLE"===this.gridParentElement.tagName?document:this.gridParentElement,"scroll",this.makeStickyHeader,this):sf.base.EventHandler.remove(this.gridParentElement,"scroll",this.makeStickyHeader))},e.prototype.makeStickyHeader=function(){if(this.parent.options.enableStickyHeader&&this.parent.element&&!sf.base.isNullOrUndefined(this.gridParentElement)&&this.parent.getContent()){var e=this.parent.getContent().parentElement.getBoundingClientRect();if(e){var t=this.parent.getHeaderContent().parentElement,i=this.parent.element.querySelector(".e-toolbar"),s=this.parent.element.querySelector(".e-groupdroparea"),n=this.parent.element.querySelector(".e-ccdlg"),o=this.parent.element.querySelector(".e-cc-toolbar"),r=t.offsetHeight+(i?i.offsetHeight:0)+(s?s.offsetHeight:0),a=this.gridParentElement.getBoundingClientRect().top,l=e.top-(a<0?0:a),h=e.left;if(l<r&&e.bottom>0){t.classList.add("e-sticky");var d=0;s&&(this.setSticky(s,d,e.width,h,!0),d+=s.getBoundingClientRect().height-2),i&&(this.setSticky(i,d,e.width,h,!0),d+=i.getBoundingClientRect().height-2),this.setSticky(t,d,e.width,h,!0)}else if(t.classList.contains("e-sticky")&&this.setSticky(t,null,null,null,!1),s&&this.setSticky(s,null,null,null,!1),i&&this.setSticky(i,null,null,null,!1),n){var c=sf.popups.calculateRelativeBasedPosition(o,n).top+o.getBoundingClientRect().height,p=n.style.display;n.style.display="block";var u=n.getBoundingClientRect(),f=o.getBoundingClientRect().left-e.left-u.width+o.clientWidth+2;n.style.display=p,this.setSticky(n,c,u.width,f,!1)}}}},e.prototype.setSticky=function(e,t,i,s,n){n?(e.style.width=i+"px",e.classList.add("e-sticky")):e.classList.remove("e-sticky"),e.style.top=null!=t?t-2+"px":"",e.style.left=null!==s?parseInt(e.style.left,10)!==s?s+"px":e.style.left:""},e.prototype.destroy=function(){var e=this.parent.element;e&&(e.querySelector(".e-gridheader")||e.querySelector(".e-gridcontent"))&&(this.parent.options.enableStickyHeader&&this.addStickyListener(!1),this.removePadding(),sf.base.EventHandler.remove(this.parent.getContent(),"scroll",this.onContentScroll))},e.getScrollBarWidth=function(){return n()},e}(),m=function(){function e(e){this.parent=e,this.frozenHeader=e.element.querySelector(".e-frozenheader"),this.movableHeader=e.element.querySelector(".e-movableheader"),this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.options.frozenColumns&&(this.setFrozenHeight(),this.refreshFreeze({case:"textwrap"}),this.refreshFreeze({case:"refreshHeight"}))},e.prototype.refreshFreeze=function(e){if("textwrap"===e.case||"refreshHeight"===e.case){var t=void 0,i=void 0,s=void 0,n=this.getFrozenHeader(),o=this.getMovableHeader(),r=this.parent.getContent(),a=this.parent.options.wrapMode;"textwrap"===e.case?(("Header"!==a||e.isModeChg)&&(t=r.querySelector(".e-frozencontent").querySelectorAll("tr"),"LeftRight"===this.parent.options.frozenName&&(s=r.querySelector(".e-frozen-right-content").querySelectorAll("tr")),i=r.querySelector(".e-movablecontent").querySelectorAll("tr"),this.setWrapHeight(t,i,e.isModeChg,!0,!1,s)),"Both"===a||e.isModeChg?(t=n.querySelectorAll("tr"),i=o.querySelectorAll("tr"),"LeftRight"==this.parent.options.frozenName&&(s=this.parent.element.querySelectorAll(".e-frozenheader")[1].querySelectorAll("tr"))):(t=n.querySelector("Content"===a?"tbody":"thead").querySelectorAll("tr"),i=o.querySelector("Content"===a?"tbody":"thead").querySelectorAll("tr")),this.parent.getHeaderContent().querySelectorAll(".e-stackedheadercell").length||this.setWrapHeight(t,i,e.isModeChg,!1,!1,s),this.refreshStackedHdrHgt()):"refreshHeight"===e.case&&("LeftRight"===this.parent.options.frozenName&&(s=r.querySelector(".e-frozen-right-content").querySelectorAll("tr")),this.setWrapHeight(r.querySelector(".e-frozencontent").querySelectorAll("tr"),r.querySelector(".e-movablecontent").querySelectorAll("tr"),e.isModeChg,!1,!1,s),this.parent.getHeaderContent().querySelectorAll(".e-stackedheadercell").length||("LeftRight"==this.parent.options.frozenName&&(s=this.parent.element.querySelectorAll(".e-frozenheader")[1].querySelectorAll("tr")),this.setWrapHeight(n.querySelectorAll("tr"),o.querySelectorAll("tr"),e.isModeChg,!1,!1,s)))}},e.prototype.updateResizeHandler=function(){for(var e=[].slice.call(this.parent.getHeaderContent().querySelectorAll(".e-rhandler")),t=0;t<e.length;t++)e[t].style.height=e[t].parentElement.offsetHeight+"px"},e.prototype.setWrapHeight=function(e,t,i,s,n,o){for(var r,a,l,h=this.parent.options.allowTextWrap,d=this.parent.options.wrapMode,c=this.parent.getHeaderContent().querySelector("thead"),p=this.parent.getHeaderContent().querySelector("tbody"),u=[],f=[],g=[],m=0,v=e.length;m<v;m++)sf.base.isNullOrUndefined(e[m])||sf.base.isNullOrUndefined(t[m])||(o&&(g[m]=o[m].getBoundingClientRect().height),u[m]=e[m].getBoundingClientRect().height,f[m]=t[m].getBoundingClientRect().height);for(m=0,v=e.length;m<v;m++){(i&&("Header"===d&&s||"Content"===d&&c.contains(e[m])||"Header"===d&&p.contains(e[m]))||n)&&(o[m]&&(o[m].style.height=null),e[m].style.height=null,t[m].style.height=null),r=u[m],a=f[m],l=g[m]?g[m]:0;var b=Math.max(r,a,l);t[m].style.height=b+"px",e[m].style.height=b+"px",o&&(o[m].style.height=b+"px")}h&&this.setFrozenHeight()},e.prototype.setFrozenHeight=function(e){if(!this.parent.options.isPreventScrollEvent){var t=sf.base.isNullOrUndefined(this.parent.element.querySelector(".e-frozencontent"))?0:this.parent.element.querySelector(".e-frozencontent").getElementsByClassName("e-table")[0].offsetHeight,i=this.parent.element.querySelector(".e-movablecontent"),s=this.parent.element.querySelectorAll(".e-frozencontent"),o=this.parent.element.querySelectorAll(".e-frozenscrollbar"),r=this.parent.element.querySelector(".e-movablescrollbar"),a=this.parent.element.querySelector(".e-movablechild"),l=this.parent.element.querySelector(".e-content"),h=0;if(sf.base.isNullOrUndefined(i)||(e=Array.from(i.getElementsByClassName("e-table")[0].querySelectorAll("col")).filter((function(e){return"width: auto"==e.getAttribute("style")})).length>0&&e?e:0),r&&"100%"!==this.parent.options.height&&"auto"!==this.parent.options.height){var d=parseInt(this.parent.options.height.split?this.parent.options.height.split("px")[0]:this.parent.options.height,10)-r.offsetHeight;l.style.height=d+"px",t<d&&(t=d-1)}if(s.length>0){if("100%"===this.parent.options.height){var c=this.parent.element.querySelector(".e-scrollbar");c.style.display=this.parent.scrollModule.removeUnwantedScroll("Width")?"none":"flex";var p=c.offsetHeight;this.parent.getContent().style.height="calc(100% - "+p+"px)"}for(var u=0;u<s.length;u++)if(s[u].style.height=t+1+"px",s[u].style.borderBottom="",o[u].classList.contains("e-frozen-right-scrollbar")){var f=this.parent.scrollModule.removeUnwantedScroll("Height")?0:n();l.classList.contains("e-gantt-frozen")&&!this.parent.options.enableVirtualization&&"scroll"!=this.parent.element.querySelector(".e-content").style.overflowY&&(f=0),o[u].style.width=s[u].offsetWidth+f+"px",h+=s[u].offsetWidth+f}else o[u].style.width=s[u].offsetWidth+"px",h+=s[u].offsetWidth}if(this.parent.options.enableVirtualization&&this.parent.options.enableColumnVirtualization&&o){for(var g=this.parent.options.columns,m=0,v=0;v<g.length;v++)g[v].visible&&!sf.base.isNullOrUndefined(g[v].width)&&(m+=parseFloat(g[v].width.split?g[v].width.split("px")[0]:g[v].width.toString()));a.style.width=m-h+n()+"px"}else{sf.base.isNullOrUndefined(i)||(i.style.height=t+1+"px");var b=this.parent.getColumns();if(this.parent.getRowHeight()<=20&&b.filter((function(e){return"CheckBox"==e.type})))i.getElementsByClassName("e-table")[0].style.height=t-1+"px";sf.base.isNullOrUndefined(r)||sf.base.isNullOrUndefined(a)||(r.style.width=i.offsetWidth+"px",a.style.width=i.getElementsByClassName("e-table")[0].offsetWidth+e+n()+"px")}sf.base.isNullOrUndefined(i)||(this.parent.options.enableVirtualization&&!this.parent.options.enableColumnVirtualization&&(i.style.width=this.parent.element.querySelector(".e-movableheader").offsetWidth+"px"),this.parent.scrollModule.getScrollbar().style.display=this.parent.scrollModule.removeUnwantedScroll("Width",e)?"none":"flex",this.parent.scrollModule.setPadding())}},e.prototype.updateStackedFrozenHeight=function(e,t){for(var i,s,n=0,o=e.length;n<o;n++)i=this.getRowSpan(e[n]),s=this.getRowSpan(t[n]),i.min>1?this.updateStackedHdrRowHgt(n,i.max,e[n],t):s.min>1&&this.updateStackedHdrRowHgt(n,s.max,t[n],e)},e.prototype.refreshStackedHdrHgt=function(){var e,t,i,s=this.getFrozenHeader().querySelectorAll(".e-columnheader"),n=this.getMovableHeader().querySelectorAll(".e-columnheader");"LeftRight"==this.parent.options.frozenName?(t=this.parent.element.querySelectorAll(".e-frozenheader")[0].querySelectorAll(".e-columnheader"),e=this.parent.element.querySelectorAll(".e-frozenheader")[1].querySelectorAll(".e-columnheader"),(i=n.length>t.length?n.length>e.length?n:e:t.length>e.length?t:e)==e?(this.updateStackedFrozenHeight(t,i),this.updateStackedFrozenHeight(e,n)):i==t?(this.updateStackedFrozenHeight(t,n),this.updateStackedFrozenHeight(e,i)):(this.updateStackedFrozenHeight(t,i),this.updateStackedFrozenHeight(e,n))):this.updateStackedFrozenHeight(s,n),this.parent.options.allowResizing&&this.updateResizeHandler()},e.prototype.getRowSpan=function(e){for(var t,i,s,n=0,o=e.childElementCount;n<o;n++)0===n&&(i=e.children[0].rowSpan),t=e.children[n].rowSpan,i=Math.min(t,i),s=Math.max(t,i);return{min:i,max:s}},e.prototype.updateStackedHdrRowHgt=function(e,t,i,s){for(var n=0,o=0;o<t;o++)n+=s[e+o].style.height?parseInt(s[e+o].style.height,10):s[e+o].offsetHeight;i.style.height=n+"px"},e.prototype.getFrozenHeader=function(){return this.frozenHeader},e.prototype.getMovableHeader=function(){return this.movableHeader},e.prototype.refreshRowHeight=function(){0==this.parent.options.rowHeight&&(this.parent.options.frozenColumns||this.parent.options.frozenRows)&&(this.clearWrapHeight(),this.refreshStackedHdrHgt(),this.refreshFreeze({case:"refreshHeight"}),this.parent.options.allowResizing&&this.updateResizeHandler())},e.prototype.clearWrapHeight=function(){var e=function(e,t){for(var i=0,s=e.length;i<s;i++)sf.base.isNullOrUndefined(e[i])||sf.base.isNullOrUndefined(t[i])||(e[i].style.height=null,t[i].style.height=null)};this.parent.options.frozenColumns&&((this.parent.options.frozenRows||"Both"==this.parent.options.wrapMode||"Header"==this.parent.options.wrapMode)&&e(this.parent.element.querySelector(".e-frozenheader").querySelectorAll("tr"),this.parent.element.querySelector(".e-movableheader").querySelectorAll("tr")),e(this.parent.element.querySelector(".e-frozencontent").querySelectorAll("tr"),this.parent.element.querySelector(".e-movablecontent").querySelectorAll("tr"))),this.parent.options.frozenRows&&0==this.parent.options.frozenColumns&&e(this.parent.element.querySelector(".e-headercontent").querySelectorAll("tr"),this.parent.element.querySelector(".e-content").querySelectorAll("tr"))},e}(),v=function(){function e(e){this.parent=e}return e.prototype.setMinwidthBycalculation=function(e){var t=0,i=this.parent.getColumns().filter((function(e){return sf.base.isNullOrUndefined(e.width)||"auto"===e.width||""===e.width}));if(i.length){t=sf.base.isNullOrUndefined(this.parent.options.width)||"auto"===this.parent.options.width?this.parent.element.getBoundingClientRect().width-e:("string"==typeof this.parent.options.width?parseInt(this.parent.options.width,10):this.parent.options.width)-e;for(var s=0,n=0,o=0,r=i;o<r.length;o++){var a=r[o];s+=sf.base.isNullOrUndefined(a.minWidth)?0:"string"==typeof a.minWidth?parseInt(a.minWidth,10):a.minWidth}for(var l={},h=0;h<i.length;h++)0===e&&this.parent.options.allowResizing&&this.isWidthUndefined()&&h!==i.length-1&&this.setUndefinedColumnWidth(i),0!==e&&t<s?(l[i[h].field]=i[h].minWidth+"px",n+=parseInt(i[h].minWidth.toString(),10)):0!==e&&t>s&&(l[i[h].field]="",n+=0);this.parent.dotNetRef.invokeMethodAsync("SetMinWidth",l),this.parent.options.frozenColumns&&this.parent.freezeModule.setFrozenHeight(n)}},e.prototype.setUndefinedColumnWidth=function(e){for(var t=0;t<e.length;t++)t!==e.length-1&&(e[t].width=200,this.setWidth(200,this.parent.getColumnIndexByField(e[t].field)))},e.prototype.setColumnWidth=function(e,t,i,s,n){if(void 0===s&&(s=!0),void 0===n&&(n=!1),!(this.parent.getColumns(n).length<1)){var o;o=this.parent.options.enableColumnVirtualization?this.parent.options.virtualizedColumns.findIndex((function(t){return t.uid==e.uid}))+this.parent.getIndentCount():sf.base.isNullOrUndefined(t)?this.parent.getNormalizedColumnIndex(e.uid):t;var r=this.getWidth(e),a=this.getTableWidth(this.parent.getColumns(n));null!==r&&(this.setWidth(r,o),"auto"!==this.parent.options.width&&-1===this.parent.options.width.toString().indexOf("%")&&this.setMinwidthBycalculation(a),this.parent.options.enableColumnVirtualization&&"resize"===i?(this.parent.options.virtualizedColumns.filter((function(t){return t.uid==e.uid}))[0].width=r,this.parent.virtualContentModule.refreshOffsets(),this.parent.virtualContentModule.setVirtualHeight()):this.parent.options.enableColumnVirtualization&&n&&(this.parent.options.columns.filter((function(t){return t.uid==e.uid}))[0].width=r,this.parent.virtualContentModule.refreshOffsets()),(this.parent.options.allowResizing&&"resize"===i||this.parent.options.frozenColumns&&this.parent.options.allowResizing)&&this.setWidthToTable(null,!1,"resize"),s&&(r.toString().indexOf("px")>0&&(r=r.toString().replace("px","")),this.parent.dotNetRef.invokeMethodAsync("ColumnWidthChanged",{index:o,width:r,columnUid:e.uid})))}},e.prototype.setWidth=function(e,t,i){var s=this;if("string"==typeof e&&-1!==e.indexOf("%")&&(!Boolean(window.chrome)||!Boolean(window.chrome.webstore))&&this.parent.options.allowGrouping){var n=this.parent.element.offsetWidth;e=parseInt(e,10)/100*n}var o,a,l=this.parent.getHeaderTable(),h=this.parent.getContentTable(),d=sf.base.formatUnit(e),c=this.parent.options.frozenColumns,p=this.parent.getHeaderContent().querySelector(".e-movableheader"),u=this.parent.getContent().querySelector(".e-movablecontent"),f=0;if(0!=this.parent.options.frozenRightCount||0!=this.parent.options.frozenLeftCount){this.parent.updateColumnLevelFrozen();var g=this.parent.options.enableColumnVirtualization?t:this.parent.frozenColumnModel.findIndex((function(e){return e.uid==s.parent.columnModel[t].uid}));if("Left"==this.parent.options.frozenName&&(v=g<this.parent.options.frozenLeftCount?l:p),"Right"==this.parent.options.frozenName)v=g>=(f=this.parent.options.columns.length-this.parent.options.frozenRightCount)?l:p;else if("LeftRight"==this.parent.options.frozenName){f=this.parent.options.columns.length-this.parent.options.frozenRightCount-this.parent.options.frozenLeftCount;var m=this.parent.getHeaderContent().querySelector(".e-frozen-right-header");v=g<this.parent.options.frozenLeftCount?l:g<this.parent.options.frozenLeftCount+f?p:m}if(!(o=this.getColumnLevelFrozenColgroup(g,this.parent.options.frozenLeftCount,f,v)))return}else if(c&&t>=c&&p&&p.querySelector("colgroup"))o=p.querySelector("colgroup").children[t-c];else if(this.parent.options.enableColumnVirtualization&&c&&p.scrollLeft>0){o=(y=p.querySelector("colgroup")).children[y.children.length-1-t]}else o=l.querySelector("colgroup").children[t];if(o&&!i?o.style.width=d:o&&i&&(o.style.width=" "),0!=this.parent.options.frozenRightCount||0!=this.parent.options.frozenLeftCount){var v;g=this.parent.options.enableColumnVirtualization?t:this.parent.frozenColumnModel.findIndex((function(e){return e.uid==s.parent.columnModel[t].uid}));if("Left"==this.parent.options.frozenName&&(v=g<this.parent.options.frozenLeftCount?h:u),"Right"==this.parent.options.frozenName&&(v=g>=(f=this.parent.options.columns.length-this.parent.options.frozenRightCount)?h:u),"LeftRight"==this.parent.options.frozenName){var b=this.parent.getContent().querySelector(".e-frozen-right-content");v=g<this.parent.options.frozenLeftCount?h:g<this.parent.options.frozenLeftCount+f?u:b}a=this.getColumnLevelFrozenColgroup(g,this.parent.options.frozenLeftCount,f,v)}else if(c&&t>=c)a=this.parent.getContent().querySelector(".e-movablecontent").querySelector("colgroup").children[t-c];else if(this.parent.options.enableColumnVirtualization&&c&&u.scrollLeft>0){var y;a=(y=this.parent.getContent().querySelector(".e-movablecontent").querySelector("colgroup")).children[y.children.length-1-t]}else a=h.querySelector("colgroup").children[t];if(a&&!i?a.style.width=d:a&&i&&(a.style.width=" "),0!=this.parent.options.aggregatesCount){var M=void 0;if(c&&t>=c){var C=this.parent.getFooterContent().querySelector(".e-movablefootercontent"),w=sf.base.isNullOrUndefined(C)?null:C.querySelector("colgroup");M=sf.base.isNullOrUndefined(w)?null:w.children[t-c]}else{var S=this.parent.getFooterContent().querySelector("colgroup");M=sf.base.isNullOrUndefined(S)?null:S.children[t]}a&&M&&!i?M.style.width=d:a&&M&&i&&(M.style.width=" ")}for(var N=this.parent.element.querySelectorAll(".e-table.e-inline-edit"),x=[],O=0;O<N.length;O++)if(r(N[O],"e-grid").id===this.parent.element.id)for(var E=0;E<N[O].querySelector("colgroup").children.length;E++)x.push(N[O].querySelector("colgroup").children[E]);N.length&&x.length&&(x[t].style.width=d),0==this.parent.options.frozenColumns||this.parent.options.enableColumnVirtualization||this.parent.freezeModule.setFrozenHeight()},e.prototype.getColumnLevelFrozenColgroup=function(e,t,i,s){if(!s||!s.querySelector("colgroup"))return null;var n=this.parent.options.enableColumnVirtualization?this.parent.options.virtualizedColumns:this.parent.frozenColumnModel,o=[].slice.call(s.querySelector("colgroup").children);return"Left"===n[e].freeze&&n[e].isFrozen?o[e]:"Right"===n[e].freeze&&n[e].isFrozen?o[e-(t+i)]:o[e-t]},e.prototype.isWidthUndefined=function(){var e=this.parent.getColumns().filter((function(e){return sf.base.isNullOrUndefined(e.width)&&sf.base.isNullOrUndefined(e.minWidth)})).length;return this.parent.getColumns().length===e},e.prototype.getWidth=function(e){if(!e.width)return null;var t=parseInt(e.width.toString(),10);return e.minWidth&&t<parseInt(e.minWidth.toString(),10)?e.minWidth:e.maxWidth&&t>parseInt(e.maxWidth.toString(),10)?e.maxWidth:e.width},e.prototype.getTableWidth=function(e){for(var t=0,i=0,s=e;i<s.length;i++){var n=s[i],o=this.getWidth(n);"auto"===n.width&&(o=0),!1!==n.visible&&null!==o&&(t+=parseInt(o.toString(),10))}return t},e.prototype.calcMovableOrFreezeColWidth=function(e){var t=0!=this.parent.frozenColumnModel.length?this.parent.frozenColumnModel.slice():this.parent.getColumns().slice(),i=0;if(!this.parent.options.frozenLeftColumnsCount&&!this.parent.options.frozenRightColumnsCount){for(var s=0;s<t.length;s++)t[s].index<this.parent.options.actualFrozenColumns&&!t[s].isFrozen&&i++;this.parent.options.actualFrozenColumns=i}var n=this.parent.options.frozenLeftColumnsCount||this.parent.options.actualFrozenColumns,o=t.length-this.parent.options.frozenColumns;return"movable"===e?(this.parent.options.frozenRightColumnsCount&&t.splice(n+o,t.length),n&&t.splice(0,n)):"freeze-left"===e?t.splice(n,t.length):"freeze-right"===e&&t.splice(0,n+o),sf.base.formatUnit(this.getTableWidth(t))},e.prototype.setWidthToFrozenLeftTable=function(e){var t=sf.base.isNullOrUndefined(e)?this.calcMovableOrFreezeColWidth("freeze-left"):e;t=this.parent.getContent().querySelector(".e-frozen-left-content").classList.contains("e-frozenborderdisabled")?"0":t,this.parent.getHeaderTable().style.width=t,this.parent.getContentTable().style.width=t,this.parent.resizeModule.leftFrozenTableWidth=t,this.parent.getFooterContent()&&!sf.base.isNullOrUndefined(this.parent.getFooterContent().querySelector(".e-frozen-left-footercontent"))&&(this.parent.getFooterContent().querySelector(".e-frozen-left-footercontent").style.width=t)},e.prototype.setWidthToFrozenRightTable=function(e){var t=sf.base.isNullOrUndefined(e)?this.calcMovableOrFreezeColWidth("freeze-right"):e;t=this.parent.getContent().querySelector(".e-frozen-right-content").classList.contains("e-frozenborderdisabled")?"0":t,this.parent.options.enableColumnVirtualization||(this.parent.getHeaderContent().querySelector(".e-frozen-right-header").querySelector(".e-table").style.width=t,this.parent.getContent().querySelector(".e-frozen-right-content").querySelector(".e-table").style.width=t,this.parent.resizeModule.rightFrozenTableWidth=t,this.parent.getFooterContent()&&!sf.base.isNullOrUndefined(this.parent.getFooterContent().querySelector(".e-frozen-right-footercontent"))&&(this.parent.getFooterContent().querySelector(".e-frozen-right-footercontent").style.width=t))},e.prototype.setWidthToMovableTable=function(e){var t="";if(sf.base.isNullOrUndefined(e)){var i=this.parent.getColumns().filter((function(e){return sf.base.isNullOrUndefined(e.width)})).length>=1,s=this.parent.getColumns().filter((function(e){return"auto"===e.width})).length>=1;"number"!=typeof this.parent.options.width||i||s?i||s||(t=this.calcMovableOrFreezeColWidth("movable")):t=sf.base.formatUnit(this.parent.options.width-parseInt(this.calcMovableOrFreezeColWidth("freeze").split("px")[0],10)-5)}else t=e;this.parent.getHeaderContent().querySelector(".e-movableheader").firstElementChild&&!this.parent.options.enableColumnVirtualization&&(this.parent.getHeaderContent().querySelector(".e-movableheader").firstElementChild.style.width=t),this.parent.getFooterContent()&&this.parent.getFooterContent().querySelector(".e-movablefootercontent").firstElementChild&&!this.parent.options.enableColumnVirtualization&&(this.parent.getFooterContent().querySelector(".e-movablefootercontent").firstElementChild.style.width=t),this.parent.options.enableColumnVirtualization||(this.parent.getContent().querySelector(".e-movablecontent").firstElementChild.style.width=t,this.parent.resizeModule.tableWidth=t)},e.prototype.setWidthToFrozenEditTable=function(){var e=this.calcMovableOrFreezeColWidth("freeze");this.parent.element.querySelectorAll(".e-table.e-inline-edit")[0].style.width=e},e.prototype.setWidthToMovableEditTable=function(){var e=this.calcMovableOrFreezeColWidth("movable");this.parent.element.querySelectorAll(".e-table.e-inline-edit")[1].style.width=e},e.prototype.setPersistedWidth=function(e){this.parent.options.frozenColumns?0!=this.parent.options.frozenRightColumnsCount||0!=this.parent.options.frozenLeftColumnsCount?(0!=this.parent.options.frozenLeftColumnsCount&&this.setWidthToFrozenLeftTable(e.leftFrozenTableWidth),0!=this.parent.options.frozenRightColumnsCount&&this.setWidthToFrozenRightTable(e.rightFrozenTableWidth),this.setWidthToMovableTable(e.tableWidth)):(this.setWidthToFrozenLeftTable(e.leftFrozenTableWidth),this.setWidthToMovableTable(e.tableWidth)):(this.parent.getHeaderTable().style.width=e.tableWidth,this.parent.getContentTable().style.width=e.tableWidth,0!=this.parent.options.aggregatesCount&&(this.parent.getFooterContent().querySelector(".e-table").style.width=e.tableWidth))},e.prototype.setWidthToTable=function(e,t,i){var s;void 0===e&&(e=null),void 0===t&&(t=!1),void 0===i&&(i=""),s=this.parent.options.enableColumnVirtualization&&"resize"===i?sf.base.formatUnit(this.getTableWidth(this.parent.options.virtualizedColumns)):sf.base.formatUnit(this.getTableWidth(null!=e?e:this.parent.getColumns())),this.parent.options.frozenColumns?0!=this.parent.options.frozenRightColumnsCount||0!=this.parent.options.frozenLeftColumnsCount?(0!=this.parent.options.frozenLeftColumnsCount&&this.setWidthToFrozenLeftTable(),0!=this.parent.options.frozenRightColumnsCount&&this.setWidthToFrozenRightTable(),this.setWidthToMovableTable()):(this.setWidthToFrozenLeftTable(),this.setWidthToMovableTable()):(this.parent.options.hasDetailTemplate&&this.setWidth("30",0),t&&(s=""),this.parent.resizeModule.tableWidth=s,this.parent.getHeaderTable().style.width=s,this.parent.getContentTable().style.width=s,0!=this.parent.options.aggregatesCount&&(this.parent.getFooterContent().querySelector(".e-table").style.width=s));var n=this.parent.element.querySelector(".e-table.e-inline-edit");n&&this.parent.options.frozenColumns?(this.setWidthToFrozenEditTable(),this.setWidthToMovableEditTable()):n&&(n.style.width=s)},e}(),b=function(){function e(e){var t=this;this.dragStart=function(e){var i=t.parent;document.body.classList.add("e-prevent-select");var s=i.element.querySelector(".e-gridpopup");s&&(s.style.display="none"),t.parent.reorderModule.dragStart({target:e.target,column:t.column,event:e.event}),t.parent.groupModule.columnDragStart({target:e.target,column:t.column,event:e.event}),e.bindEvents(e.dragElement)},this.drag=function(e){var i=t.parent,s=e.target;if(s){var n=sf.base.closest(s,".e-grid"),o=sf.base.closest(s,".e-gridcontent"),r=sf.base.closest(s,".e-gridpager"),a=t.parent.element.querySelector(".e-cloneproperties");if((!n||n.getAttribute("id")!==i.element.getAttribute("id")||o||r)&&(sf.base.classList(a,["e-notallowedcur"],["e-defaultcur"]),i.options.allowReordering&&(i.options.enableColumnVirtualization?(i.element.querySelector(".e-reorderuparrow-virtual").style.display="none",i.element.querySelector(".e-reorderdownarrow-virtual").style.display="none"):(i.element.querySelector(".e-reorderuparrow").style.display="none",i.element.querySelector(".e-reorderdownarrow").style.display="none")),!i.options.groupReordering))return;i.options.allowReordering&&t.parent.reorderModule.drag({target:e.target,column:t.column,event:e.event}),i.options.allowGrouping&&t.parent.groupModule.columnDrag({target:e.target})}},this.dragStop=function(e){var i,s=t.parent;document.body.classList.remove("e-prevent-select");var n=s.element.querySelector(".e-gridpopup");n&&(n.style.display="none"),(!r(e.target,"e-headercell")&&!r(e.target,"e-groupdroparea")||!s.options.allowReordering&&r(e.target,"e-headercell")||!e.helper.getAttribute("e-mappinguid")&&r(e.target,"e-groupdroparea"))&&(sf.base.remove(e.helper),i=!0),s.options.allowReordering&&t.parent.reorderModule.dragStop({target:e.target,event:e.event,column:t.column,cancel:i})},this.drop=function(e){var i=t.parent,s=(e.droppedElement.getAttribute("e-mappinguid"),sf.base.closest(e.target,".e-grid"));sf.base.remove(e.droppedElement),s&&s.getAttribute("id")!==i.element.getAttribute("id")||!i.options.allowReordering&&!i.options.allowGrouping||(i.options.allowReordering&&t.parent.reorderModule.headerDrop({target:e.target}),i.options.allowGrouping&&i.options.showDropArea&&t.parent.groupModule.columnDrop({target:e.target,droppedElement:e.droppedElement}))},this.helper=function(e){var i=t.parent,s=e.sender.target,n=sf.base.closest(s,".e-headercell:not(.e-stackedHeaderCell)");if(n){var o=(n.querySelector(".e-headercelldiv")||n.querySelector(".e-stackedheadercelldiv")).getAttribute("e-mappinguid"),a=i.getColumnByUid(o);if(!sf.base.isNullOrUndefined(a)&&!a.allowGrouping&&!a.allowReordering)return!1}var l=r(s,"e-headercell");if(i.getContent().classList.contains("e-freezeline-moving")||!i.options.allowReordering&&!i.options.allowGrouping||!sf.base.isNullOrUndefined(l)&&l.querySelectorAll(".e-checkselectall").length>0)return!1;var h=sf.base.createElement("div",{className:"e-cloneproperties e-dragclone e-headerclone"}),d=s.classList.contains("e-headercell")?s:l;if(!d||!i.options.allowReordering&&d.classList.contains("e-stackedheadercell"))return!1;var c,p=d.offsetHeight,u=d.querySelector(".e-headercelldiv")||d.querySelector(".e-stackedheadercelldiv");if(u){if(c=d.querySelector(".e-stackedheadercelldiv")?i.getStackedHeaderColumnByHeaderText(u.innerText.trim(),i.options.columns):i.getColumnByUid(u.getAttribute("e-mappinguid")),t.column=c,t.column.lockColumn)return!1;h.setAttribute("e-mappinguid",u.getAttribute("e-mappinguid"))}return h.innerText=u?sf.base.isNullOrUndefined(c.headerText)?c.field:c.headerText:d.innerText,h.style.width=d.offsetWidth+"px",h.style.height=d.offsetHeight+"px",h.style.lineHeight=(p-6).toString()+"px",i.element.appendChild(h),h},this.parent=e,(this.parent.options.allowGrouping||this.parent.options.allowReordering)&&(this.initializeHeaderDrag(),this.initializeHeaderDrop())}return e.prototype.initializeHeaderDrag=function(){var e=this.parent;if(this.parent.options.allowReordering||this.parent.options.allowGrouping&&this.parent.options.showDropArea)for(var t=[].slice.call(e.getHeaderContent().querySelectorAll(".e-columnheader")),i=0,s=t.length;i<s;i++)this.draggable=new sf.base.Draggable(t[i],{dragTarget:".e-headercell",distance:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,abort:".e-rhandler",isPreventSelect:!1})},e.prototype.initializeHeaderDrop=function(){var e=this.parent;this.droppable=new sf.base.Droppable(e.getHeaderContent(),{accept:".e-dragclone",drop:this.drop})},e.prototype.destroy=function(){sf.base.isNullOrUndefined(this.draggable)||this.draggable.destroy(),sf.base.isNullOrUndefined(this.droppable)||this.droppable.destroy()},e}(),y=function(){function e(e){var t=this;this.drop=function(e){t.parent.groupModule.columnDrop({target:e.target,droppedElement:e.droppedElement}),sf.base.remove(e.droppedElement)},this.parent=e,this.parent.options.allowGrouping&&this.initializeContentDrop()}return e.prototype.initializeContentDrop=function(){var e=this.parent;new sf.base.Droppable(e.getContent(),{accept:".e-dragclone",drop:this.drop})},e}(),M=function(){function e(e){this.parent=e,e.options.allowReordering&&this.createReorderElement()}return e.prototype.chkDropPosition=function(e,t){var i=this.parent.getColumnByUid(t.firstElementChild.getAttribute("e-mappinguid")),s=!i||!i.lockColumn;return(e.parentElement.isEqualNode(t.parentElement)||this.parent.options.frozenColumns&&Array.prototype.indexOf.call(sf.base.closest(e,"thead").children,e.parentElement)===Array.prototype.indexOf.call(sf.base.closest(t,"thead").children,t.parentElement))&&this.targetParentContainerIndex(e,t)>-1&&s},e.prototype.chkDropAllCols=function(e,t){for(var i,s=this.getHeaderCells();!i&&s.length>0;)i=e!==s.pop()&&this.targetParentContainerIndex(e,t)>-1;return i},e.prototype.findColParent=function(e,t,i){i=i;for(var s=0,n=t.length;s<n;s++){if(e===t[s])return!0;if(t[s].columns){var o=i.length;if(i.push(t[s]),this.findColParent(e,t[s].columns,i))return!0;i.splice(o,i.length-o)}}return!1},e.prototype.getColumnsModel=function(e){for(var t=[],i=[],s=0,n=e.length;s<n;s++)t.push(e[s]),e[s].columns&&(i=i.concat(e[s].columns));return i.length&&(t=t.concat(this.getColumnsModel(i))),t},e.prototype.headerDrop=function(e){var t=this.parent,i=this.element.querySelector(".e-headercelldiv")||this.element.querySelector(".e-stackedheadercelldiv");this.parent.options.enableColumnVirtualization&&(i=this.draggedHeader.querySelector(".e-headercelldiv")||this.draggedHeader.querySelector(".e-stackedheadercelldiv"));var s=i.getAttribute("e-mappinguid"),n=t.getColumnByUid(s);if(sf.base.closest(e.target,"th")&&(sf.base.isNullOrUndefined(n)||n.allowReordering&&!n.lockColumn)){var o=sf.base.closest(e.target,".e-headercell"),r=(o.querySelector(".e-headercelldiv")||o.querySelector(".e-stackedheadercelldiv")).getAttribute("e-mappinguid");if(!sf.base.isNullOrUndefined(r)){var l=t.getColumnByUid(r);if(sf.base.isNullOrUndefined(l)||!l.allowReordering||l.lockColumn)return}if(o&&this.chkDropPosition(this.element,o)&&this.chkDropAllCols(this.element,o))if(this.parent.options.enableColumnVirtualization){var h=this.parent.options.columns,d=this.draggedHeader.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"),c=this.parent.getColumns(!1,!0).filter((function(e){return e.uid===d})),p=null,u=c[0],f=o.querySelector(".e-headercelldiv").getAttribute("e-mappinguid");h.some((function(e,t){return e.uid===f&&(p=t,e.uid===f)}));sf.base.isNullOrUndefined(p)||this.moveColumns(p,u)}else{var g=this.targetParentContainerIndex(this.element,o),m=this.element.firstElementChild.getAttribute("e-mappinguid");if(this.destElement=o,m)this.moveColumns(g,this.parent.getColumnByUid(m));else{var v=this.getHeaderCells(),b=a(this.element,v),y=(h=this.getColumnsModel(this.parent.options.columns))[b];this.moveColumns(g,y)}}}},e.prototype.isActionPrevent=function(e){return c(e.element)},e.prototype.moveColumns=function(e,t,i,s){var n=this.parent;if(!this.isActionPrevent(n)){var o=this.getColParent(t,this.parent.options.columns),r=o?o.columns:this.parent.options.columns,a=l(t,r);if(this.parent.options.frozenColumns&&o&&!i){for(var h=0;h<r.length;h++)if(r[h].field===t.field){a=h;break}var d=this.parent.getColumnByUid(this.destElement.firstElementChild.getAttribute("e-mappinguid"));if(d){for(h=0;h<r.length;h++)if(r[h].field===d.field){e=h;break}}else for(h=0;h<r.length;h++)r[h].headerText===this.destElement.innerText.trim()&&(e=h)}n.options.allowReordering&&a!==e&&-1!==a&&-1!==e&&(r.splice(e,0,r.splice(a,1)[0]),n.getColumns(!0),!1!==s&&setTimeout((function(){n.dotNetRef.invokeMethodAsync("ColumnReordered",{requestType:"reorder",fromIndex:e,toIndex:a,toColumnUid:t.uid})}),10))}},e.prototype.targetParentContainerIndex=function(e,t){var i=this.getHeaderCells();"None"!==this.parent.options.frozenName&&this.parent.updateColumnLevelFrozen();var s=this.parent.options.columns,n="None"==this.parent.options.frozenName?this.getColumnsModel(s):this.parent.frozenColumnModel.slice(),o=this.getColParent(n[a(e,i)],s);return s=o?o.columns:s,l(n[a(t,i)],s)},e.prototype.getHeaderCells=function(){var e=this.parent.options.frozenColumns;if(e&&"None"===this.parent.options.frozenName){var t=void 0,i=void 0,s=[],n=[].slice.call(this.parent.element.querySelector(".e-frozenheader").querySelectorAll(".e-columnheader"));if(e&&"None"===this.parent.options.frozenName)for(var o=[].slice.call(this.parent.getHeaderContent().querySelector(".e-movableheader").querySelectorAll(".e-columnheader")),r=0;r<n.length;r++){t=[].slice.call(n[r].getElementsByClassName("e-headercell")),i=[].slice.call(o[r].getElementsByClassName("e-headercell"));for(var a=void 0,l=0;l<t.length;l++){for(var h=0;h<i.length;h++)if(i[h].innerText===t[l].innerText){a=!0;break}a||(s=s.concat([t[l]]))}for(h=0;h<i.length;h++)s.push(i[h])}else for(r=0;r<n.length;r++){i=[].slice.call(n[r].getElementsByClassName("e-headercell"));for(l=0;l<i.length;l++){for(a=void 0,h=l+1;h<i.length;h++)if(i[h].innerText===i[l].innerText){a=!0;break}a||(s=s.concat([i[l]]))}}return s}return[].slice.call(this.parent.element.getElementsByClassName("e-headercell"))},e.prototype.getColParent=function(e,t){var i=[];return this.findColParent(e,t,i),i[i.length-1]},e.prototype.reorderSingleColumn=function(e,t){var i=this.parent.getColumnByField(e),s=this.parent.getColumnByField(t);if((sf.base.isNullOrUndefined(i)||i.allowReordering&&!i.lockColumn)&&(sf.base.isNullOrUndefined(s)||s.allowReordering&&!i.lockColumn)){var n=this.parent.getColumnByField(t),o=this.getColParent(n,this.parent.options.columns),r=l(n,o?o.columns:this.parent.options.columns);r>-1&&this.moveColumns(r,this.parent.getColumnByField(e),!0)}},e.prototype.reorderMultipleColumns=function(e,t){var i=this.parent.getColumnIndexByField(t),s=this.parent.getColumnByField(t);if(!(i<0)&&(sf.base.isNullOrUndefined(s)||s.allowReordering&&!s.lockColumn)){for(var n=0;n<e.length;n++){var o=this.parent.getColumnByField(e[n]);if(!sf.base.isNullOrUndefined(o)&&(!o.allowReordering||o.lockColumn))return}for(n=0;n<e.length;n++){o=this.parent.getColumnByIndex(i);var r=this.getColParent(o,this.parent.options.columns),a=l(o,r?r.columns:this.parent.options.columns);a>-1&&this.moveColumns(a,this.parent.getColumnByField(e[n]),!0,!1),this.parent.getColumnIndexByField(e[n+1])>=a&&i++}var h=this.parent.getColumns();this.parent.dotNetRef.invokeMethodAsync("ColumnReordered",{fromColumnUid:e.map((function(e){return h.filter((function(t){return t.field===e}))[0].uid})),toColumnUid:s.uid,isMultipleReorder:!0,requestType:"reorder",type:"actionBegin"})}},e.prototype.moveTargetColumn=function(e,t){t>-1&&this.moveColumns(t,e,!0)},e.prototype.reorderSingleColumnByTarget=function(e,t){var i=this.parent.getColumnByField(e);this.moveTargetColumn(i,t)},e.prototype.reorderMultipleColumnByTarget=function(e,t){for(var i=0;i<e.length;i++)this.reorderSingleColumnByTarget(e[i],t)},e.prototype.reorderColumns=function(e,t){"string"==typeof e?(this.reorderSingleColumn(e,t),this.fromCol=e):(this.reorderMultipleColumns(e,t),this.fromCol=e[0])},e.prototype.reorderColumnByIndex=function(e,t){var i=this.parent.getColumnByIndex(e);this.moveTargetColumn(i,t)},e.prototype.reorderColumnByTargetIndex=function(e,t){"string"==typeof e?this.reorderSingleColumnByTarget(e,t):this.reorderMultipleColumnByTarget(e,t)},e.prototype.createReorderElement=function(){var e=this.parent.element.querySelector(".e-headercontent");this.upArrow=e.appendChild(sf.base.createElement("div",{className:"e-icons e-icon-reorderuparrow e-reorderuparrow",attrs:{style:"display:none"}})),this.downArrow=e.appendChild(sf.base.createElement("div",{className:"e-icons e-icon-reorderdownarrow e-reorderdownarrow",attrs:{style:"display:none"}})),this.parent.options.enableColumnVirtualization&&(this.upArrow.classList.replace("e-reorderuparrow","e-reorderuparrow-virtual"),this.downArrow.classList.replace("e-reorderdownarrow","e-reorderdownarrow-virtual"))},e.prototype.destroy=function(){this.parent.element;this.upArrow&&sf.base.remove(this.upArrow),this.downArrow&&sf.base.remove(this.downArrow)},e.prototype.keyPressHandler=function(e){this.parent;e.action},e.prototype.drag=function(e){var t=this.parent,i=e.target,s=t.element.querySelector(".e-cloneproperties");if(e.column.allowReordering&&!e.column.lockColumn){var n=sf.base.closest(i,".e-headercell:not(.e-stackedHeaderCell)"),o=this.x>h(e.event).x+t.getContent().firstElementChild.scrollLeft;if(sf.base.removeClass(t.element.querySelector(".e-headercontent").querySelectorAll(".e-reorderindicate"),["e-reorderindicate"]),this.setDisplay("none"),this.stopTimer(),sf.base.classList(s,["e-defaultcur"],["e-notallowedcur"]),this.updateScrollPostion(e.event),n&&!n.isEqualNode(this.element)){i=n;var a=(n.querySelector(".e-headercelldiv")||n.querySelector(".e-stackedheadercelldiv")).getAttribute("e-mappinguid"),l=t.getColumnByUid(a);this.chkDropPosition(this.element,i)&&this.chkDropAllCols(this.element,i)&&l.allowReordering?(this.updateArrowPosition(i,o),sf.base.classList(i,["e-allowDrop","e-reorderindicate"],[])):t.options.allowGrouping&&r(e.target,"e-groupdroparea")||sf.base.classList(s,["e-notallowedcur"],["e-defaultcur"])}}else sf.base.classList(s,["e-notallowedcur"],["e-defaultcur"])},e.prototype.updateScrollPostion=function(e){var t=this,i=this.parent.options.frozenColumns,s=h(e).x,n=this.parent.element.getBoundingClientRect(),o=i?this.parent.element.querySelector(".e-movableheader").getBoundingClientRect().left:n.left,r=n.right,a=i?this.parent.getContent().querySelector(".e-movablecontent"):this.parent.getContent();"None"!==this.parent.options.frozenName?this.updateFrozenScrollPosition(s,n):s>o&&s<o+35?this.timer=window.setInterval((function(){t.setScrollLeft(a,!0)}),50):s<r&&s>r-35&&(this.timer=window.setInterval((function(){t.setScrollLeft(a,!1)}),50))},e.prototype.updateFrozenScrollPosition=function(e,t){var i=this,s=this.parent.getContent().querySelector(".e-movablecontent"),n=this.parent.element.querySelector(".e-movableheader").getBoundingClientRect(),o=this.parent.options.frozenLeftCount||this.parent.options.actualFrozenColumns,r=this.parent.options.frozenRightCount?n.right:t.right,a=o?n.left:t.left;e>a&&e<a+35?this.timer=window.setInterval((function(){i.setScrollLeft(s,!0)}),50):e<r&&e>r-35&&(this.timer=window.setInterval((function(){i.setScrollLeft(s,!1)}),50))},e.prototype.setScrollLeft=function(e,t){var i=e.scrollLeft;e.scrollLeft=e.scrollLeft+(t?-5:5),i!==e.scrollLeft&&this.setDisplay("none")},e.prototype.stopTimer=function(){window.clearInterval(this.timer)},e.prototype.updateArrowPosition=function(e,t){var i=e.getBoundingClientRect(),s=this.parent.element.getBoundingClientRect();t&&i.left<s.left||!t&&i.right>s.right||(this.upArrow.style.top=i.top+i.height-s.top-7+"px",this.downArrow.style.top=i.top-s.top-2+"px",this.upArrow.style.left=this.downArrow.style.left=(t?i.left:i.right)-s.left-4+"px",this.parent.options.enableColumnVirtualization&&(this.upArrow.style.left=this.downArrow.style.left=Number(this.upArrow.style.left.replace("px",""))+this.parent.getContent().scrollLeft+"px"),this.setDisplay(""))},e.prototype.dragStart=function(e){var t=this.parent;document.body.classList.add("e-prevent-select");var i=e.target;this.element=i.classList.contains("e-headercell")?i:r(i,"e-headercell"),sf.base.isNullOrUndefined(this.element)&&(this.element=e.event.target.classList.contains("e-headercell")?e.event.target:r(e.event.target,"e-headercell")),this.draggedHeader=this.element.cloneNode(!0),e.column.allowReordering&&!e.column.lockColumn&&(this.x=h(e.event).x+t.getContent().firstElementChild.scrollLeft)},e.prototype.dragStop=function(e){var t=this.parent;document.body.classList.remove("e-prevent-select"),this.setDisplay("none"),this.stopTimer(),e.cancel,sf.base.removeClass(t.element.querySelector(".e-headercontent").querySelectorAll(".e-reorderindicate"),["e-reorderindicate"])},e.prototype.setDisplay=function(e){this.upArrow.style.display=e,this.downArrow.style.display=e},e.prototype.getModuleName=function(){return"reorder"},e}(),C="e-rhandler",w="e-rsuppress",S="e-ricon",N="e-rhelper",x="th.e-headercell",O="e-rcursor",E=function(){function e(e){this.tapped=!1,this.isDblClk=!0,this.parent=e,this.widthService=new v(this.parent)}return e.prototype.autoFitColumns=function(e){var t=!!this.parent.options.enableColumnVirtualization,i=[];i=null==e||e.length<=0?this.parent.options.frozenColumns>0?this.parent.autofitFrozenColumns(!0):this.parent.getColumns(t).map((function(e){return e.field||e.uid})):"string"==typeof e?[e]:e,this.findColumn(i),this.parent.options.frozenColumns>0&&this.widthService.setWidthToTable()},e.prototype.autoFit=function(){var e;(e=this.parent.options.frozenColumns||this.parent.options.actualFrozenColumns>0?this.parent.autofitFrozenColumns():this.parent.getColumns().filter((function(e){return!0===e.autoFit})).map((function(e){return e.field||e.uid}))).length>0&&this.autoFitColumns(e)},e.prototype.resizeColumn=function(e,t,i){var s,n,o,r=this.parent,a=0,l=0,h=!!this.parent.options.enableColumnVirtualization,d=i||this.parent.getUidByColumnField(e,h);d=d||e;var c,p,u,f=this.parent.getNormalizedColumnIndex(d,h),g=this.parent.getColumnIndexByField(e,h);g=-1===g?this.parent.getColumnIndexByUid(e,h):g;var m=this.parent.getColumnByIndex(g,h),v=r.options.frozenColumns;if(sf.base.isNullOrUndefined(r.getFooterContent())||(o=r.getFooterContent().querySelector(".e-table")),v)if(m.isFrozen||this.parent.options.actualFrozenColumns>0&&t<v){m.isFrozen&&"Right"==m.freeze?(s=r.getHeaderContent().querySelector(".e-frozen-right-header"),n=r.getContent().querySelector(".e-frozen-right-content")):(s=r.getHeaderTable(),n=r.getContentTable());var b=(c=s.querySelector('[e-mappinguid="'+d+'"]').parentElement.cloneNode(!0)).getAttribute("aria-colindex");p=n.querySelectorAll('[aria-colindex="'+b+'"]'),o&&(u=o.querySelectorAll("td:nth-child("+(f+1)+")"))}else{s=r.getHeaderContent().querySelector(".e-movableheader").children[0],n=r.getContent().querySelector(".e-movablecontent").children[0];b=(c=s.querySelector('[e-mappinguid="'+d+'"]').parentElement.cloneNode(!0)).getAttribute("aria-colindex");p=n.querySelectorAll('[aria-colindex="'+b+'"]'),o&&(u=(o=r.getFooterContent().querySelector(".e-movablefootercontent").children[0]).querySelectorAll("td:nth-child("+(f-v+1)+")"))}else s=r.getHeaderTable(),n=r.getContentTable(),c=s.querySelector('[e-mappinguid="'+d+'"]').parentElement.cloneNode(!0),p=n.querySelectorAll("td:nth-child("+(f+1)+"):not(.e-groupcaption)"),o&&(u=o.querySelectorAll("td:nth-child("+(f+1)+"):not(.e-groupcaption)"));var y=s.querySelector("tr").querySelectorAll(".e-grouptopleftcell");if(y.length>0)for(var M=0;M<y.length;M++)l+=y[M].offsetWidth;var C=n.querySelector(".e-detailrowcollapse")||n.querySelector(".e-detailrowexpand");this.parent.options.hasDetailTemplate&&C&&(l+=C.offsetWidth);var w=[c],S=[],N=[];if(o)for(M=0;M<u.length;M++)N[M]=u[M].cloneNode(!0);for(M=0;M<p.length;M++)S[M]=p[M].cloneNode(!0);var x=this.createTable(s,w,"e-gridheader"),O=this.createTable(n,S,"e-gridcontent"),E=null;N.length&&(E=this.createTable(o,N,"e-gridfooter"));var I=r.getColumns(h)[g].width=sf.base.formatUnit(Math.max(x,O,E));if(this.widthService.setColumnWidth(r.getColumns(h)[g]),!1===r.getColumns(h).some((function(e){return(null===e.width||void 0===e.width||e.width.length<=0)&&e.visible}))){var D=r.getColumns(h);for(M=0;M<D.length;M++)D[M].visible&&(a+=parseFloat(D[M].width))}var T=a+l;a>0&&!r.options.frozenColumns&&(this.parent.options.hasDetailTemplate&&this.widthService.setWidth("30",0),s.style.width=sf.base.formatUnit(T),n.style.width=sf.base.formatUnit(T),sf.base.isNullOrUndefined(o)||(o.style.width=sf.base.formatUnit(T)));var j=s.offsetWidth;r.getContent().scrollWidth>j?(s.classList.add("e-tableborder"),n.classList.add("e-tableborder")):(s.classList.remove("e-tableborder"),n.classList.remove("e-tableborder")),sf.base.isNullOrUndefined(o)||o.classList.add("e-tableborder"),this.parent.freezeModule.refreshRowHeight(),I.toString().indexOf("px")>0&&(I=I.replace("px","")),this.parent.options.isResizedGrid=!0,this.parent.dotNetRef.invokeMethodAsync("ColumnWidthChanged",{width:I,columnUid:d})},e.prototype.destroy=function(){var e=this.parent.element;e&&(e.querySelector(".e-gridheader")||e.querySelector(".e-gridcontent"))&&(this.widthService=null,this.unwireEvents())},e.prototype.getModuleName=function(){return"resize"},e.prototype.findColumn=function(e){for(var t=function(t){var s=e[t],n=!!i.parent.options.enableColumnVirtualization,o=i.parent.getColumnIndexByField(s,n);o=-1===o?i.parent.getColumnIndexByUid(s,n):o;var r=i.parent.getColumns(n)[o];o>-1&&!sf.base.isNullOrUndefined(r)&&!0===r.visible&&(i.parent.options.allowGrouping&&!sf.base.isNullOrUndefined(i.parent.options.initGroupingField)&&i.parent.options.initGroupingField.some((function(e){return e==r.field}))&&!i.parent.options.showGroupedColumn||i.resizeColumn(s,o))},i=this,s=0;s<e.length;s++)t(s)},e.prototype.createTable=function(e,t,i){var s=sf.base.createElement("div");s.className=this.parent.element.className,s.style.cssText="display: inline-block;visibility:hidden;position:absolute";var n=sf.base.createElement("div");n.className=i;var o=sf.base.createElement("table");o.className=e.className,o.classList.add("e-resizetable"),o.style.cssText="table-layout: auto;width: auto";for(var r=sf.base.createElement("tr"),a=0;a<t.length;a++){var l=r.cloneNode();l.className=e.querySelector("tr").className,l.appendChild(t[a]),o.appendChild(l)}n.appendChild(o),s.appendChild(n),document.body.appendChild(s);var h=o.getBoundingClientRect().width;return document.body.removeChild(s),Math.ceil(h)},e.prototype.render=function(){this.unwireEvents(),this.wireEvents(),this.setHandlerHeight()},e.prototype.refreshHeight=function(){for(var e=this.getResizeHandlers(),t=0;t<e.length;t++)e[t].parentElement.offsetHeight>0&&(e[t].style.height=e[t].parentElement.offsetHeight+"px");this.setHandlerHeight()},e.prototype.wireEvents=function(){sf.base.EventHandler.add(this.parent.getHeaderContent(),sf.base.Browser.touchStartEvent,this.resizeStart,this),sf.base.EventHandler.add(this.parent.getHeaderContent(),"dblclick",this.callAutoFit,this)},e.prototype.unwireEvents=function(){sf.base.EventHandler.remove(this.parent.getHeaderContent(),sf.base.Browser.touchStartEvent,this.resizeStart),sf.base.EventHandler.remove(this.parent.getHeaderContent(),"dblclick",this.callAutoFit)},e.prototype.getResizeHandlers=function(){return this.parent.options.frozenColumns?[].slice.call(this.parent.getHeaderContent().querySelectorAll("."+C)):[].slice.call(this.parent.getHeaderContent().querySelector(".e-table").querySelectorAll("."+C))},e.prototype.setHandlerHeight=function(){for(var e=[].slice.call(this.parent.getHeaderContent().querySelector(".e-table").querySelectorAll("."+w)),t=0;t<e.length;t++)e[t].style.height=e[t].parentElement.offsetHeight+"px"},e.prototype.callAutoFit=function(e){if(e.target.classList.contains("e-rhandler")){var t=this.getTargetColumn(e);if(t.columns)return;this.resizeColumn(t.field,this.parent.getNormalizedColumnIndex(t.uid),t.uid),sf.base.closest(e.target,x).classList.add("e-resized")}},e.prototype.resizeStart=function(e){if(e.target.classList.contains("e-rhandler")){var t=[],i={};if(!this.helper){if(0===this.getScrollBarWidth()){if(this.parent.options.allowGrouping)for(var s=0;s<this.parent.options.groupCount;s++)this.widthService.setWidth("30px",s);for(var n=0,o=this.refreshColumnWidth();n<o.length;n++){var r=o[n];this.widthService.setColumnWidth(r,null,null,!1),i={width:""==r.width?0:r.width,columnUid:r.uid},t.push(i)}this.widthService.setWidthToTable()}this.refreshStackedColumnWidth(),this.element=e.target,this.parentElementWidth=this.parent.element.getBoundingClientRect().width,this.appendHelper(),this.column=this.getTargetColumn(e),this.pageX=this.getPointX(e),"Right"===this.column.freeze?this.parent.options.enableRtl?this.minMove=(this.column.minWidth?parseFloat(this.column.minWidth.toString()):0)-parseFloat(sf.base.isNullOrUndefined(this.column.width)?"":this.column.width.toString()):this.minMove=parseFloat(sf.base.isNullOrUndefined(this.column.width)?"":this.column.width.toString())-(this.column.minWidth?parseFloat(this.column.minWidth.toString()):0):this.parent.options.enableRtl?this.minMove=parseFloat(this.column.width.toString())-(this.column.minWidth?parseFloat(this.column.minWidth.toString()):0):this.minMove=(this.column.minWidth?parseFloat(this.column.minWidth.toString()):0)-parseFloat(sf.base.isNullOrUndefined(this.column.width)?"":this.column.width.toString()),this.minMove+=this.pageX}sf.base.Browser.isDevice&&!this.helper.classList.contains(S)?(this.helper.classList.add(S),sf.base.EventHandler.add(document,sf.base.Browser.touchStartEvent,this.removeHelper,this),sf.base.EventHandler.add(this.helper,sf.base.Browser.touchStartEvent,this.resizeStart,this)):(sf.base.EventHandler.add(document,sf.base.Browser.touchEndEvent,this.resizeEnd,this),this.parent.dotNetRef.invokeMethodAsync("ResizeStarted",{columnUid:this.column.uid,columnList:t}))}},e.prototype.preventResizeAction=function(e){e?this.cancelResizeAction():(sf.base.EventHandler.add(this.parent.element,sf.base.Browser.touchMoveEvent,this.resizing,this),this.updateCursor("add"))},e.prototype.cancelResizeAction=function(e){e&&(sf.base.EventHandler.remove(this.parent.element,sf.base.Browser.touchMoveEvent,this.resizing),sf.base.EventHandler.remove(document,sf.base.Browser.touchEndEvent,this.resizeEnd),this.updateCursor("remove")),sf.base.Browser.isDevice&&(sf.base.EventHandler.remove(document,sf.base.Browser.touchStartEvent,this.removeHelper),sf.base.EventHandler.remove(this.helper,sf.base.Browser.touchStartEvent,this.resizeStart)),sf.base.detach(this.helper),this.refresh()},e.prototype.getWidth=function(e,t,i){return t&&e<t?t:i&&e>i?i:e},e.prototype.updateResizeEleHeight=function(){for(var e=[].slice.call(this.parent.getHeaderContent().querySelectorAll(".e-rhandler")),t=0;t<e.length;t++)e[t].style.height=e[t].parentElement.offsetHeight+"px"},e.prototype.getColData=function(e,t){return{width:parseFloat(sf.base.isNullOrUndefined(this.widthService.getWidth(e))||"auto"===this.widthService.getWidth(e)?"0":this.widthService.getWidth(e).toString())+t,minWidth:e.minWidth?parseFloat(e.minWidth.toString()):null,maxWidth:e.maxWidth?parseFloat(e.maxWidth.toString()):null}},e.prototype.resizing=function(e){if(!sf.base.isNullOrUndefined(this.column)){var t=0;sf.base.isNullOrUndefined(this.column)&&(t=r(this.element,"th").offsetWidth),this.parent.options.allowTextWrap&&(this.updateResizeEleHeight(),this.setHelperHeight());var i=this.getPointX(e),s=this.parent.options.enableRtl?-(i-this.pageX):i-this.pageX;"Right"===this.column.freeze&&this.column.isFrozen&&(s=this.parent.options.enableRtl?i-this.pageX:this.pageX-i);var n=this.getColData(this.column,s);n.width||(n.width=sf.base.closest(this.element,"th").offsetWidth);var o=this.getWidth(n.width,n.minWidth,n.maxWidth);if(("Right"!==this.column.freeze&&(!this.parent.options.enableRtl&&this.minMove>=i-10||this.parent.options.enableRtl&&this.minMove<=i+10)||"Right"==this.column.freeze&&(this.parent.options.enableRtl&&this.minMove>=i-10||!this.parent.options.enableRtl&&this.minMove<=i+10))&&(o=this.column.minWidth?parseFloat(this.column.minWidth.toString()):10,this.pageX=i=this.minMove),o!==parseFloat(sf.base.isNullOrUndefined(this.column.width)||"auto"===this.column.width?t.toString():this.column.width.toString())){this.pageX=i,this.column.width=sf.base.formatUnit(o);var a=[this.column],l=[this.column];this.column.columns&&(a=this.getSubColumns(this.column,[]),a=this.calulateColumnsWidth(a,!1,s),l=this.calulateColumnsWidth(a,!0,s));for(var h=0,d=l;h<d.length;h++){var c=d[h];this.widthService.setColumnWidth(c,null,"resize")}this.updateHelper()}this.isDblClk=!1}},e.prototype.calulateColumnsWidth=function(e,t,i){for(var s=[],n=0,o=e;n<o.length;n++){for(var r=o[n],a=0,l=0;l<e.length;l++)a+=parseFloat(e[l].width.toString());var h=this.getColData(r,parseFloat(r.width)*i/a),d=this.getWidth(h.width,h.minWidth,h.maxWidth);d!==parseFloat(r.width.toString())&&(t&&(r.width=sf.base.formatUnit(d<1?1:d)),s.push(r))}return s},e.prototype.getSubColumns=function(e,t){for(var i=0,s=e.columns;i<s.length;i++){var n=s[i];!1!==n.visible&&n.allowResizing&&(n.columns?this.getSubColumns(n,t):t.push(n))}return t},e.prototype.resizeEnd=function(e){if(this.helper){sf.base.EventHandler.remove(this.parent.element,sf.base.Browser.touchMoveEvent,this.resizing),sf.base.EventHandler.remove(document,sf.base.Browser.touchEndEvent,this.resizeEnd),this.updateCursor("remove"),sf.base.detach(this.helper);this.parent.getContent();sf.base.closest(this.element,".e-headercell").classList.add("e-resized"),r(this.element,"e-frozenheader")?this.isFrozenColResized=!0:this.isFrozenColResized=!1,this.parent.options.frozenColumns&&(this.parent.freezeModule.refreshRowHeight(),this.parent.freezeModule.setFrozenHeight()),this.parent.options.allowTextWrap&&this.updateResizeEleHeight();var t=this.column.width.toString();t=t.replace("px",""),this.parent.dotNetRef.invokeMethodAsync("ColumnWidthChanged",{width:t,columnUid:this.column.uid,allowStopEvent:!0,tableWidth:this.tableWidth,leftFrozenTableWidth:this.leftFrozenTableWidth,rightFrozenTableWidth:this.rightFrozenTableWidth}),this.parent.options.enableColumnVirtualization||this.parent.updateColumnWidth(this.parent.columnModel),this.refresh(),this.doubleTapEvent(e),this.isDblClk=!0}},e.prototype.getPointX=function(e){return e.touches&&e.touches.length?e.touches[0].pageX:e.pageX},e.prototype.refreshColumnWidth=function(){for(var e=this.parent.getColumns(),t=0,i=[].slice.apply(this.parent.getHeaderContent().querySelectorAll("th.e-headercell"));t<i.length;t++)for(var s=i[t],n=0,o=e;n<o.length;n++){var r=o[n];if(s.querySelector("[e-mappinguid]")&&s.querySelector("[e-mappinguid]").getAttribute("e-mappinguid")===r.uid&&r.visible){r.width=s.getBoundingClientRect().width?s.getBoundingClientRect().width:r.width;break}}return e},e.prototype.refreshStackedColumnWidth=function(){for(var e=0,t=this.parent.getStackedColumns(this.parent.options.columns);e<t.length;e++){var i=t[e];i.width=this.getStackedWidth(i,0)}},e.prototype.getStackedWidth=function(e,t){for(var i=0,s=e.columns;i<s.length;i++){var n=s[i];!1!==n.visible&&(n.columns?this.getStackedWidth(n,t):t+=n.width)}return t},e.prototype.getTargetColumn=function(e){var t=sf.base.closest(e.target,x),i=(t=t.querySelector(".e-headercelldiv")||t.querySelector(".e-stackedheadercelldiv")).getAttribute("e-mappinguid");return this.parent.getColumnByUid(i)},e.prototype.updateCursor=function(e){var t=[].slice.call(this.parent.getHeaderContent().querySelectorAll("th"));t.push(this.parent.element);for(var i=0,s=t;i<s.length;i++){s[i].classList[e](O)}},e.prototype.refresh=function(){this.column=null,this.pageX=null,this.element=null,this.helper=null},e.prototype.appendHelper=function(){this.helper=sf.base.createElement("div",{className:N}),this.parent.element.appendChild(this.helper),this.setHelperHeight()},e.prototype.setHelperHeight=function(){var e=this.parent.getContent().offsetHeight-(this.parent.options.frozenColumns?0:this.getScrollBarWidth()),t=sf.base.closest(this.element,x),i=[].slice.call(this.parent.getHeaderContent().querySelectorAll("tr"));this.parent.options.frozenColumns&&t.parentElement.children.length&&!t.parentElement.children[0].classList.contains("e-stackedheadercell")&&(i=r(t,"e-movableheader")?[].slice.call(this.parent.getHeaderContent().querySelector(".e-movableheader").querySelectorAll("tr")):r(t,"e-frozen-right-header")?[].slice.call(this.parent.getHeaderContent().querySelector(".e-frozen-right-header").querySelectorAll("tr")):[].slice.call(this.parent.getHeaderContent().querySelector(".e-frozen-left-header").querySelectorAll("tr")));for(var s=i.indexOf(t.parentElement);s<i.length;s++)e+=i[s].offsetHeight;var n=this.calcPos(t);r(t,"e-frozen-right-header")?n.left+=this.parent.options.enableRtl?t.offsetWidth-2:-1:n.left+=this.parent.options.enableRtl?-1:t.offsetWidth-2,this.helper.style.cssText="height: "+e+"px; top: "+n.top+"px; left:"+Math.floor(n.left)+"px;"},e.prototype.getScrollBarWidth=function(e){var t=this.parent.options.frozenColumns?this.parent.getContent().querySelector(".e-movablecontent"):this.parent.getContent();return t.scrollHeight>t.clientHeight&&e||t.scrollWidth>t.clientWidth?n():0},e.prototype.removeHelper=function(e){var t=e.target.classList;t.contains(C)||t.contains(S)||!this.helper||(sf.base.EventHandler.remove(document,sf.base.Browser.touchStartEvent,this.removeHelper),sf.base.EventHandler.remove(this.helper,sf.base.Browser.touchStartEvent,this.resizeStart),sf.base.detach(this.helper),this.refresh())},e.prototype.updateHelper=function(){var e=sf.base.closest(this.element,x),t=Math.floor(this.calcPos(e).left+(this.parent.options.enableRtl?-1:e.offsetWidth-2));if(r(e,"e-frozen-right-header")&&(t=Math.floor(this.calcPos(e).left+(this.parent.options.enableRtl?e.offsetWidth-2:-1))),t>this.parentElementWidth&&(t=this.parentElementWidth-2),this.parent.options.frozenColumns){var i=sf.base.closest(e,".e-table").offsetLeft;t<i&&(t=i)}this.helper.style.left=t+"px"},e.prototype.calcPos=function(e){for(var t={top:0,left:0},i=e.getBoundingClientRect(),s=e.ownerDocument,n=r(e,"e-grid")||s.documentElement;n&&(n===s.body||n===s.documentElement)&&"static"===n.style.position;)n=n.parentNode;return n&&n!==e&&1===n.nodeType&&(t=n.getBoundingClientRect()),{top:i.top-t.top,left:i.left-t.left}},e.prototype.doubleTapEvent=function(e){this.getUserAgent()&&this.isDblClk&&(this.tapped?(clearTimeout(this.tapped),this.callAutoFit(e),this.tapped=null):this.tapped=setTimeout(this.timeoutHandler(),300))},e.prototype.getUserAgent=function(){var e=sf.base.Browser.userAgent.toLowerCase();return/iphone|ipod|ipad/.test(e)},e.prototype.timeoutHandler=function(){this.tapped=null},e}(),I=function(){function e(e){var t=this;this.visualElement=sf.base.createElement("div",{className:"e-cloneproperties e-dragclone e-gdclone",styles:"line-height:23px",attrs:{action:"grouping"}}),this.helper=function(e){var i=t.parent,s=e.sender.target,n=s.classList.contains("e-groupheadercell")?s:r(s,"e-groupheadercell");return!(!n||!s.classList.contains("e-drag")&&t.parent.options.groupReordering)&&(t.column=i.getColumnByField(n.firstElementChild.getAttribute("ej-mappingname")),t.visualElement.textContent=n.textContent,t.visualElement.style.width=n.offsetWidth+2+"px",t.visualElement.style.height=n.offsetHeight+2+"px",t.visualElement.setAttribute("e-mappinguid",t.column.uid),i.element.appendChild(t.visualElement),t.visualElement)},this.dragStart=function(e){t.parent.element.classList.add("e-ungroupdrag"),document.body.classList.add("e-prevent-select"),e.bindEvents(e.dragElement)},this.drag=function(e){var i=e.target,s=t.parent.element.querySelector(".e-cloneproperties");t.parent.options.groupReordering||(sf.base.classList(s,["e-defaultcur"],["e-notallowedcur"]),r(i,"e-gridcontent")||r(i,"e-headercell")||sf.base.classList(s,["e-notallowedcur"],["e-defaultcur"]))},this.dragStop=function(e){document.body.classList.remove("e-prevent-select"),t.parent.element.classList.remove("e-ungroupdrag"),!(r(e.target,"e-gridcontent")||r(e.target,"e-gridheader"))&&sf.base.remove(e.helper)},this.preventTouchOnWindow=function(e){e.preventDefault()},this.drop=function(e){var i=t.parent,s=i.getColumnByUid(e.droppedElement.getAttribute("e-mappinguid"));i.element.querySelector(".e-groupdroparea").classList.remove("e-hover"),sf.base.remove(e.droppedElement),i.options.allowGrouping&&sf.base.EventHandler.remove(window,"touchmove",t.preventTouchOnWindow),t.parent.element.querySelector(".e-groupdroparea").removeAttribute("aria-dropeffect"),t.parent.element.querySelector("[aria-grabbed=true]").setAttribute("aria-grabbed","false"),sf.base.isNullOrUndefined(s)||!1===s.allowGrouping||r(i.getColumnHeaderByUid(s.uid),"e-grid").getAttribute("id")!==i.element.getAttribute("id")||i.dotNetRef.invokeMethodAsync("GroupColumn",s.field,"Group")},this.parent=e,this.parent.options.allowGrouping&&this.parent.options.showDropArea&&this.initDragAndDrop()}return e.prototype.columnDrag=function(e){this.parent.options.groupReordering;var t=this.parent,i=t.element.querySelector(".e-cloneproperties"),s=t.getColumnByUid(i.getAttribute("e-mappinguid"));r(e.target,"e-groupdroparea")&&sf.base.classList(i,["e-defaultcur"],["e-notallowedcur"]),sf.base.EventHandler.add(window,"touchmove",this.preventTouchOnWindow),(r(e.target,"e-groupdroparea")||t.options.allowReordering&&r(e.target,"e-headercell"))&&(s.allowGrouping||!r(e.target,"e-groupdroparea"))||sf.base.classList(i,["e-notallowedcur"],["e-defaultcur"]),t.options.showDropArea&&(e.target.classList.contains("e-groupdroparea")?t.element.querySelector(".e-groupdroparea").classList.add("e-hover"):t.element.querySelector(".e-groupdroparea").classList.remove("e-hover"))},e.prototype.columnDragStart=function(e){if(!e.target.classList.contains("e-stackedheadercell")){var t=this.parent.element.querySelector(".e-groupdroparea");t&&t.setAttribute("aria-dropeffect","copy");var i=e.target.classList.contains("e-headercell")?e.target:r(e.target,"e-headercell");sf.base.isNullOrUndefined(i)&&(i=e.event.target.classList.contains("e-headercell")?e.event.target:r(e.event.target,"e-headercell")),i.setAttribute("aria-grabbed","true")}},e.prototype.columnDrop=function(e){var t=this.parent;if("grouping"===e.droppedElement.getAttribute("action")){var i=t.getColumnByUid(e.droppedElement.getAttribute("e-mappinguid"));if(sf.base.isNullOrUndefined(i)||!1===i.allowGrouping||r(t.getColumnHeaderByUid(i.uid),"e-grid").getAttribute("id")!==t.element.getAttribute("id"))return;t.dotNetRef.invokeMethodAsync("GroupColumn",i.field,"Ungroup")}},e.prototype.initDragAndDrop=function(){this.initializeGHeaderDrop(),this.initializeGHeaderDrag()},e.prototype.initializeGHeaderDrag=function(){var e=this.parent.element.querySelector(".e-groupdroparea");if(e)new sf.base.Draggable(e,{dragTarget:this.parent.options.groupReordering?".e-drag":".e-groupheadercell",distance:this.parent.options.groupReordering?-10:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,isPreventSelect:!1})},e.prototype.initializeGHeaderDrop=function(){this.parent;var e=this.parent.element.querySelector(".e-groupdroparea");if(e)new sf.base.Droppable(e,{accept:".e-dragclone",drop:this.drop})},e.prototype.getModuleName=function(){return"group"},e.prototype.getGHeaderCell=function(e){return this.element&&this.element.querySelector('[ej-mappingname="'+e+'"]')?this.element.querySelector('[ej-mappingname="'+e+'"]').parentElement:null},e}(),D=function(){function e(e){this.mediaCol=[],this.media={},this.mediaBindInstance={},this.mediaColVisibility={},this.noOfTimesInvokedByMedia=0,this.mediaChange=!0,this.mediaColumnList=[],this.parent=e}return e.prototype.renderColumnChooser=function(){var e=this.parent.element.querySelector("#"+this.parent.element.id+"_ccdlg");e.style.maxHeight="430px";var t=e.style.display;e.style.display="block";var i,s=this.parent.element.querySelector(".e-cc-toolbar");this.parent.getHeaderContent().parentElement.classList.contains("e-sticky")?(i=s.getBoundingClientRect(),e.classList.add("e-sticky")):i=sf.popups.calculateRelativeBasedPosition(s,e),e.style.display=t;var n,o=i.top+s.getBoundingClientRect().height;n=this.parent.options.enableRtl?this.parent.element.querySelector(".e-columnchooser-btn").offsetLeft:i.left-250+s.clientWidth+2,this.parent.dotNetRef.invokeMethodAsync("GetChooserPosition",n.toString(),o.toString())},e.prototype.setMediaColumns=function(e){var t=this.parent.getColumns();if(!sf.base.isNullOrUndefined(t)){for(var i=0;i<t.length;i++)""!==t[i].hideAtMedia&&(sf.base.isNullOrUndefined(t[i].visible)||t[i].visible||e)&&this.pushMediaColumn(t[i],i);this.parent.dotNetRef.invokeMethodAsync("SetMediaColumnVisibility",{mediaColVisibility:this.mediaColVisibility}),this.mediaColVisibility={}}},e.prototype.pushMediaColumn=function(e,t){this.mediaCol.push(e),this.media[e.uid]=window.matchMedia(e.hideAtMedia),this.mediaQueryUpdate(t,this.media[e.uid],!0),this.mediaBindInstance[t]=this.mediaQueryUpdate.bind(this,t),this.media[e.uid].addListener(this.mediaBindInstance[t])},e.prototype.mediaQueryUpdate=function(e,t,i){var s=this.parent.getColumns()[e],n=this.parent.getColumns();if(this.mediaCol.some((function(e){return e.uid===s.uid}))&&(this.mediaColVisibility[s.uid]=t.matches,!i)){if(this.noOfTimesInvokedByMedia++,this.mediaChange=0===this.mediaColumnList.length,this.mediaChange)for(var o=0;o<n.length;o++)n[o].hideAtMedia.split(" ").slice(-1).toLocaleString()===t.media.split(" ").slice(-1).toLocaleString()&&this.mediaColumnList.push(n[o]);(this.mediaColumnList.length>0&&this.noOfTimesInvokedByMedia===this.mediaColumnList.length||this.mediaCol.length>0&&0===this.mediaColumnList.length)&&(this.parent.dotNetRef.invokeMethodAsync("SetMediaColumnVisibility",{mediaColVisibility:this.mediaColVisibility,invokedByMedia:!0}),this.noOfTimesInvokedByMedia=0,this.mediaColVisibility={},this.mediaColumnList=[])}},e.prototype.updateMediaColumns=function(e){for(var t=Object.keys(e),i=function(e){var i=-1;s.mediaCol.some((function(s){return i++,s.uid===t[e]}))?s.mediaCol.splice(i,1):s.pushMediaColumn(s.parent.getColumnByUid(t[e]),s.parent.getColumnIndexByUid(t[e]))},s=this,n=0;n<t.length;n++)i(n)},e.prototype.removeMediaListener=function(){for(var e=0;e<this.mediaCol.length;e++)this.media[this.mediaCol[e].uid].removeListener(this.mediaBindInstance[this.mediaCol[e].index])},e}(),T=function(){function e(e){this.key=null,this.uid=null,this.parent=e}return e.prototype.renderColumnMenu=function(e,t,i){this.key=i,this.uid=e;var s=this.parent.getColumnHeaderByUid(e).querySelector(".e-columnmenu"),n=document.getElementsByClassName("e-"+this.parent.element.id+"-column-menu")[0];n.style.position="absolute";var o=n.getElementsByTagName("ul")[0];if(sf.base.isNullOrUndefined(o))return{Left:1,Top:1};var r={top:0,left:0};o.style.visibility="hidden",n.style.display="block";var a=o.getBoundingClientRect();o.classList.add("e-transparent"),o.style.visibility="",n.style.display="";var l=this.getHeaderCell(s);return this.parent.options.enableRtl?r=sf.popups.calculatePosition(l,"left","bottom"):(r=sf.popups.calculatePosition(l,"right","bottom")).left-=a.width,r.left-=pageXOffset,r.top-=pageYOffset,t&&(sf.base.EventHandler.add(o,"mouseover",this.appendFilter,this),sf.base.EventHandler.add(o,"keydown",this.appendFilter,this)),{Left:-1!==Math.sign(r.left)?Math.ceil(r.left):0,Top:Math.ceil(r.top)}},e.prototype.setPosition=function(){var e=document.getElementsByClassName("e-"+this.parent.element.id+"-column-menu")[0],t=sf.base.isNullOrUndefined(e)?null:e.getElementsByTagName("ul")[0];if(!sf.base.isNullOrUndefined(t)&&!sf.base.isNullOrUndefined(this.uid)&&!sf.base.Browser.isDevice){var i=this.parent.getColumnHeaderByUid(this.uid).querySelector(".e-columnmenu"),s=this.getHeaderCell(i).getBoundingClientRect(),n=s.left+pageXOffset,o=s.bottom+pageYOffset,r=t.getBoundingClientRect(),a=document.documentElement;s.bottom+r.height>a.clientHeight&&o-s.height-r.height>a.clientTop&&(o=o-s.height-r.height),s.left+r.width>a.clientWidth&&s.right-r.width>a.clientLeft&&(n=n+s.width-r.width),n=n-t.getBoundingClientRect().width+s.width,e.style.left=Math.ceil(n+1)+"px",e.style.top=Math.ceil(o+1)+"px"}},e.prototype.appendFilter=function(e){var t=this,i=!1;setTimeout((function(){sf.base.closest(e.target,"#"+t.key)&&(t.parent.element.querySelector(".e-filter-popup")||!t.parent.element.querySelector(".e-filter-popup"))||e.target.parentElement.id==t.key&&(t.parent.element.querySelector(".e-filter-popup")||!t.parent.element.querySelector(".e-filter-popup"))?i=!0:!sf.base.closest(e.target,"#"+t.key)&&t.parent.element.querySelector(".e-filter-popup")&&(i=!1),t.parent.dotNetRef.invokeMethodAsync("FilterMouseOverHandler",t.uid,i)}),10)},e.prototype.getHeaderCell=function(e){return sf.base.closest(e,"th.e-headercell")},e}(),j=function(){function e(e){this.parent=e}return e.prototype.filterPopupRender=function(e,t,i,s){var n=this.parent.element.querySelector("#"+e);if(!sf.base.isNullOrUndefined(n))if(s){sf.base.EventHandler.add(n,"mousedown",this.mouseDownHandler,this),n.style.maxHeight="excel"==i?"800px":"350px";var o=document.getElementsByClassName("e-"+this.parent.element.id+"-column-menu")[0].getElementsByTagName("ul")[0].querySelector(".e-icon-filter").parentElement,a=this.parent.element.querySelector(".e-filter-popup"),l=this.parent.element.getBoundingClientRect(),h=o.getBoundingClientRect(),d=h.left-l.left,c=h.top-l.top,p=n.style.display;n.style.display="block",l.height<c?c=c-a.offsetHeight+h.height:l.height<c+a.offsetHeight&&(c=l.height-a.offsetHeight),window.innerHeight<a.offsetHeight+c+l.top&&(c=window.innerHeight-a.offsetHeight-l.top),d+=this.parent.options.enableRtl?-a.offsetWidth:h.width,l.width<=d+a.offsetWidth?d-=h.width+a.offsetWidth:d<0&&(d+=a.offsetWidth+h.width),n.style.display=p,this.parent.dotNetRef.invokeMethodAsync("GetFilterIconPosition",d.toString(),c.toString())}else{var u=[].slice.call(this.parent.element.querySelector(".e-headercontent").querySelectorAll("div[e-mappinguid="+t+"]"))[1];n.style.maxHeight="excel"==i?"800px":"350px";p=n.style.display;n.style.display="block";var f=sf.popups.calculateRelativeBasedPosition(u,n);this.parent.options.enableColumnVirtualization&&this.parent.virtualContentModule.virtualEle.filterTranslateX&&!r(u,"e-frozenheader")&&(f.left+=this.parent.virtualContentModule.virtualEle.filterTranslateX),n.style.display=p;d=f.left-250+u.clientWidth;var g=f.top+u.getBoundingClientRect().height-5;d<1?d=250+d-16:d-=4;var m=this.parent.element.offsetWidth;if(m-d<250)d-=250-(m-d);this.parent.dotNetRef.invokeMethodAsync("GetFilterIconPosition",d.toString(),g.toString())}},e.prototype.mouseDownHandler=function(e){(e&&sf.base.closest(e.target,".e-filter-popup")||e.currentTarget&&e.currentTarget.activeElement&&r(e.currentTarget.activeElement,"e-filter-popup")||r(e.target,"e-popup")||r(e.target,"e-popup-wrapper"))&&!sf.base.Browser.isDevice&&this.parent.dotNetRef.invokeMethodAsync("PreventColumnMenuClose",!0)},e}(),A=function(){function e(e){this.parent=e}return e.prototype.createTooltip=function(e,t){for(var s,o,r={},a=function(){var i=l.parent.getContent();l.parent.options.frozenColumns&&(i=l.parent.getContent().querySelector(".e-movablecontent"));var a=e[h].fieldName,d=e[h].uid,c=e[h].message;if(a=a.replace(/[.]/g,"___"),o=l.parent.options.hasTemplateInEditSettings||sf.base.isNullOrUndefined(d)?l.parent.element.querySelector("#"+a)||document.querySelector("#"+a):l.parent.getContent().querySelectorAll("[e-mappinguid="+d+"]")[0]||document.querySelectorAll("[e-mappinguid="+d+"_Dialog]")[0],sf.base.isNullOrUndefined(o)){var p=l.parent.columnModel.filter((function(e){return e.field.split(a).length>1}));sf.base.isNullOrUndefined(p)||0==p.length||(a=p[0].field.replace(/[.]/g,"___"),o=l.parent.getContent().querySelectorAll("[e-mappinguid="+d+"]")[0]||document.querySelectorAll("[e-mappinguid="+d+"_Dialog]")[0])}var u=i.scrollHeight>i.clientHeight||i.scrollWidth>i.clientWidth,f="Dialog"!==l.parent.options.editMode;if(!o)return{value:void 0};var g=sf.base.closest(o,".e-rowcell"),m=sf.base.closest(o,".e-row"),v=l.parent.getContent().querySelector(".e-frozencontent"),b=void 0,y=!1,M=Math.round(l.parent.getContent().clientHeight/l.parent.getRowHeight())-1,C=[].slice.call(l.parent.getContent().querySelectorAll(".e-row"));l.parent.options.enableVirtualization&&l.parent.options.allowGrouping&&l.parent.options.groupCount>0&&t&&(C=[].slice.call(l.parent.getContent().querySelectorAll("tr"))).pop(),"Batch"===l.parent.options.editMode&&M>1&&C.length>=M&&C[C.length-1].getAttribute("data-rowindex")===m.getAttribute("data-rowindex")&&(y=!0),f&&(l.parent.options.frozenRows,(M>1&&C.length>=M&&("Bottom"===l.parent.options.newRowPosition&&t||!sf.base.isNullOrUndefined(g)&&g.classList.contains("e-lastrowcell")&&!m.classList.contains("e-addedrow"))||y)&&(b=!0));var w=f?l.parent.getContentTable():document.querySelector("#"+l.parent.element.id+"_dialogEdit_wrapper").querySelector(".e-dlg-content"),S=w.getBoundingClientRect(),N=f?l.parent.element.getBoundingClientRect().left:S.left,x=sf.base.closest(o,"td"),O=x?x.getBoundingClientRect():o.parentElement.getBoundingClientRect(),E=d+"_Error",I=void 0;(I=l.parent.options.hasTemplateInEditSettings||sf.base.isNullOrUndefined(d)?l.parent.element.querySelector("#"+a+"_Error")||document.querySelector("#"+a+"_Error"):l.parent.getContent().querySelectorAll("[e-mappinguid="+E+"]")[0]||document.querySelectorAll("[e-mappinguid="+E+"]")[0]).style.top=O.bottom-S.top-(l.parent.options.frozenColumns?v.scrollTop:0)+w.scrollTop+9+"px",I.style.left=O.left-N+w.scrollLeft+O.width/2+"px",I.style.maxWidth=O.width-4+"px",f&&S.left<N&&(I.style.left=parseInt(I.style.left,10)-S.left+N+"px");var D=void 0;(D=b?I.querySelector(".e-tip-bottom"):I.querySelector(".e-tip-top"),(l.parent.options.frozenColumns||l.parent.options.frozenRows)&&"Dialog"!==l.parent.options.editMode)&&(("Normal"===l.parent.options.editMode?sf.base.closest(o,".e-editcell"):sf.base.closest(o,".e-table")).style.position="relative",I.style.position="absolute");I.style.display="block",I.querySelector(".e-error").innerText=c,!b&&f&&i.getBoundingClientRect().bottom<O.bottom+O.height&&(i.scrollTop=i.scrollTop+I.offsetHeight+D.scrollHeight);var T=parseInt(document.defaultView.getComputedStyle(I,null).getPropertyValue("font-size"),10);if(I.getBoundingClientRect().width<O.width&&I.querySelector("label").getBoundingClientRect().height/(1.2*T)>=2&&(I.style.width=I.style.maxWidth),!l.parent.options.frozenColumns&&!l.parent.options.frozenRows||"Normal"!==l.parent.options.editMode&&"Batch"!==l.parent.options.editMode?I.style.left=parseInt(I.style.left,10)-I.offsetWidth/2+"px":I.style.left=x.offsetLeft+(x.offsetWidth/2-I.offsetWidth/2)+"px",f&&!u&&!l.parent.options.allowPaging||l.parent.options.frozenColumns||l.parent.options.frozenRows){i.style.position="static";var j=sf.popups.calculateRelativeBasedPosition(x,I);I.style.top=j.top+O.height+9+"px"}if(b){if(!u||l.parent.options.frozenColumns||"auto"===l.parent.options.height||l.parent.options.frozenRows||l.parent.options.enableVirtualization)I.style.bottom=O.height+9+"px";else{var A=i.scrollWidth>i.offsetWidth?n():0;I.style.bottom=parseInt(l.parent.options.height)-i.querySelector("table").offsetHeight-A+O.height+9+"px"}I.style.top=null}s=b?"bottom":"top",a.includes("___")&&sf.base.isNullOrUndefined(d)&&(a=a.replace("___","."));var z=sf.base.isNullOrUndefined(d)?l.parent.getColumnByField(a).uid:d;r[z]="top: "+I.style.top+"; bottom: "+I.style.bottom+"; left: "+I.style.left+"; \n            max-width: "+I.style.maxWidth+"; width: "+I.style.width+"; text-align: center; position: "+I.style.position+";"},l=this,h=0;h<e.length;h++){var d=a();if("object"===i(d))return d.value}this.parent.dotNetRef.invokeMethodAsync("ShowValidationPopup",r,s)},e}(),z=function(){function e(e){this.copyContent="",this.isSelect=!1,this.parent=e,this.clipBoardTextArea=sf.base.createElement("textarea",{className:"e-clipboard",styles:"opacity: 0",attrs:{tabindex:"-1","aria-label":"clipboard","aria-hidden":"true"}}),this.parent.element.appendChild(this.clipBoardTextArea)}return e.prototype.pasteHandler=function(){var e=this,t=this.parent,i=sf.base.closest(document.activeElement,".e-rowcell");if(i&&t.options.allowEditing&&"Batch"===t.options.editMode&&"Cell"===t.options.selectionMode&&"Flow"!==t.options.cellSelectionMode&&(!i.classList.contains("e-editedbatchcell")||"Box"!==t.options.cellSelectionMode)){this.activeElement=document.activeElement,this.clipBoardTextArea.value="";var s=window.scrollX,n=window.scrollY;this.clipBoardTextArea.focus(),setTimeout((function(){e.activeElement.focus(),window.scrollTo(s,n);t.dotNetRef.invokeMethodAsync("InvokeCopyPasteAction",{clipboardText:e.clipBoardTextArea.value},"Paste")}),10)}},e.prototype.pasteAction=function(e,t,i,s){s||""==e||this.paste(e,t,i)},e.prototype.paste=function(e,t,i){var s,n,o,r=this.parent,a=i,l=t;if(r.options.allowEditing&&"Batch"===r.options.editMode&&"Cell"===r.options.selectionMode&&"Flow"!==r.options.cellSelectionMode){var h,d,c=e.split("\n"),p=r.getDataRows(),u=this.parent.options.frozenColumns;u&&(d=r.getMovableDataRows());for(var f=0;f<c.length;f++){if(h=c[f].split("\t"),a=i,f===c.length-1&&""===c[f]||sf.base.isUndefined(r.getRowByIndex(l))){a++;break}for(var g=0;g<h.length;g++){if(o=r.getCellFromIndex(l,a),u){var m=p[l],v=d[l];o=!!m.querySelector('[data-colindex="'+a+'"]')||v.querySelector('[data-colindex="'+a+'"]')}if(!o){a++;break}s=r.getColumnByIndex(a),n=h[g],!s.allowEditing||s.isPrimaryKey||s.template||r.dotNetRef.invokeMethodAsync("InvokePasteAction",{cellValue:n},l,a,s.field),a++}l++}}},e.prototype.pasteData=function(e,t,i,s,n){if(!n){this.parent.editModule&&this.parent.dotNetRef.invokeMethodAsync("UpdateCell",e,t,i);var o=this.parent.getCellFromIndex(e,s);o&&sf.base.classList(o,["e-focus","e-focused"],[])}},e.prototype.setCopyData=function(e){if(""===window.getSelection().toString()){var t=this.parent.options.frozenColumns;this.clipBoardTextArea.value=this.copyContent="";var i=void 0,s=this.parent.getRows();if(t&&(i=this.parent.getMovableDataRows()),"Cell"!==this.parent.options.selectionMode){var n=this.parent.getSelectedRowIndexes();if(e){for(var o=[],a=0;a<this.parent.getVisibleColumns().length;a++)o[a]=this.parent.getVisibleColumns()[a].headerText;this.getCopyData(o,!1,"\t",e),this.copyContent+="\n"}for(a=0;a<n.length;a++){a>0&&(this.copyContent+="\n"),1!=parseInt(s[0].getAttribute("aria-rowindex"))&&"Both"!==this.parent.options.selectionMode&&(n[a]=n[a]-parseInt(s[0].getAttribute("aria-rowindex"))+1);var l=[].slice.call(s[n[a]].querySelectorAll(".e-rowcell:not(.e-hide)"));t&&l.push.apply(l,[].slice.call(i[n[a]].querySelectorAll(".e-rowcell:not(.e-hide)"))),this.getCopyData(l,!1,"\t",e)}}else{var h=this.checkBoxSelection();if(h.status){if(e){var d=[];for(a=0;a<h.colIndexes.length;a++)d.push(this.parent.getColumnHeaderByIndex(h.colIndexes[a]));this.getCopyData(d,!1,"\t",e),this.copyContent+="\n"}for(a=0;a<h.rowIndexes.length;a++){a>0&&(this.copyContent+="\n");l=[].slice.call(s[h.rowIndexes[a]].querySelectorAll(".e-cellselectionbackground"));t&&l.push.apply(l,[].slice.call(i[h.rowIndexes[a]].querySelectorAll(".e-cellselectionbackground"))),this.getCopyData(l,!1,"\t",e)}}else this.getCopyData([].slice.call(this.parent.element.querySelectorAll(".e-cellselectionbackground")),!0,"\n",e)}this.parent.dotNetRef.invokeMethodAsync("InvokeCopyPasteAction",{clipboardText:this.copyContent},"Copy")}else if(r(document.activeElement,"e-grid")){var c=document.activeElement;document.execCommand("copy"),this.clipBoardTextArea.blur(),c.focus()}},e.prototype.clipBoardData=function(e,t){var i=document.activeElement;this.copyContent=""!=t?t:this.copyContent,e||(this.clipBoardTextArea.value=this.copyContent,sf.base.Browser.userAgent.match(/ipad|ipod|iphone/i)?this.clipBoardTextArea.setSelectionRange(0,this.clipBoardTextArea.value.length):this.clipBoardTextArea.select(),this.isSelect=!0,document.queryCommandSupported("copy")&&(document.execCommand("copy"),this.clipBoardTextArea.blur(),i.focus()),this.isSelect&&(window.getSelection().removeAllRanges(),this.isSelect=!1))},e.prototype.getCopyData=function(e,t,i,s){for(var n="string"!=typeof e[0],o=0;o<e.length;o++)s&&t&&(this.copyContent+=this.parent.getColumns()[parseInt(e[o].getAttribute("data-colindex"),10)].headerText+"\n"),n?e[o].classList.contains("e-hide")||(!e[o].classList.contains("e-gridchkbox")&&Object.keys(e[o].querySelectorAll(".e-check")).length?this.copyContent+=!0:!e[o].classList.contains("e-gridchkbox")&&Object.keys(e[o].querySelectorAll(".e-uncheck")).length?this.copyContent+=!1:this.copyContent+=e[o].innerText):this.copyContent+=e[o],o<e.length-1&&(this.copyContent+=i)},e.prototype.copy=function(e){if(document.queryCommandSupported("copy")){document.activeElement;this.setCopyData(e)}},e.prototype.getSelectedRowCellIndexes=function(){var e,t=this.parent,i=[],s=t.getRows();t.options.frozenColumns&&(e=t.getMovableDataRows());for(var n=function(n){var o=s[n].querySelectorAll(".e-cellselectionbackground");if(t.options.frozenColumns&&!o.length&&(o=e[n].querySelectorAll(".e-cellselectionbackground")),o.length){var r=[];o.forEach((function(e){r.push(parseInt(e.getAttribute("data-colindex")))})),i.push({rowIndex:n,cellIndexes:r})}},o=0;o<s.length;o++)n(o);return i},e.prototype.checkBoxSelection=function(){var e,t={status:!1};if("Cell"===this.parent.options.selectionMode){e=this.getSelectedRowCellIndexes();var i=void 0,s=[],n=void 0;for(n=0;n<e.length&&(e[n].cellIndexes.length&&s.push(e[n].rowIndex),!e[n].cellIndexes.length||(i||(i=JSON.stringify(e[n].cellIndexes.sort())),i===JSON.stringify(e[n].cellIndexes.sort())));n++);s.sort((function(e,t){return e-t})),n===e.length&&s[s.length-1]-s[0]==s.length-1&&(t={status:!0,rowIndexes:s,colIndexes:e[0].cellIndexes})}return t},e}(),L=function(){function e(e){this.parent=e,this.wireEvents()}return e.prototype.wireEvents=function(){sf.base.EventHandler.add(this.parent.getContent(),"scroll",this.scrollHandler,this),sf.base.EventHandler.add(this.parent.element,"mousemove",this.mouseMoveHandler,this),sf.base.EventHandler.add(this.parent.element,"mouseout",this.mouseMoveHandler,this),sf.base.EventHandler.add(this.parent.element,"keydown",this.onKeyPressed,this)},e.prototype.unWireevents=function(){sf.base.EventHandler.remove(this.parent.getContent(),"scroll",this.scrollHandler),sf.base.EventHandler.remove(this.parent.element,"mousemove",this.mouseMoveHandler),sf.base.EventHandler.remove(this.parent.element,"mouseout",this.mouseMoveHandler),sf.base.EventHandler.remove(this.parent.element,"keydown",this.onKeyPressed)},e.prototype.open=function(e){this.close(),this.ctrlId=sf.base.getUniqueID(this.parent.element.getAttribute("id")),sf.base.isNullOrUndefined(this.toolTipElement)&&(this.toolTipElement=sf.base.createElement("div",{className:"e-tooltip-wrap e-popup e-lib e-control e-popup-open",styles:'width: "auto", height: "auto", position: "absolute"',attrs:{role:"tooltip","aria-hidden":"false",id:this.ctrlId+"_content"}})),sf.base.attributes(e,{"aria-describedby":this.ctrlId+"_content","data-tooltip-id":this.ctrlId+"_content"}),this.renderToolTip(),this.setPosition(e)},e.prototype.renderToolTip=function(){var e=sf.base.createElement("div",{className:"e-tip-content"});e.innerHTML=this.content,this.toolTipElement.appendChild(e);var t=sf.base.createElement("div",{className:"e-arrow-tip e-tip-bottom",styles:"top: 99.9%"});t.appendChild(sf.base.createElement("div",{className:"e-arrow-tip-outer e-tip-bottom"})),t.appendChild(sf.base.createElement("div",{className:"e-arrow-tip-inner e-tip-bottom",styles:"top: -6px"})),this.toolTipElement.appendChild(t),document.body.appendChild(this.toolTipElement)},e.prototype.setPosition=function(e){var t={top:0,left:0},i=this.toolTipElement.querySelector(".e-arrow-tip"),s=sf.popups.calculatePosition(e,"Center","Top");t.top-=this.toolTipElement.offsetHeight+i.offsetHeight,t.left-=this.toolTipElement.offsetWidth/2,this.toolTipElement.style.top=s.top+t.top+"px",this.toolTipElement.style.left=s.left+t.left+"px"},e.prototype.close=function(){if(this.toolTipElement){var e=this.parent.element.querySelector('[aria-describedby="'+this.ctrlId+'_content"]');sf.base.isNullOrUndefined(e)?sf.base.isNullOrUndefined(this.parent.element.querySelector("form"))||(sf.base.isNullOrUndefined(document.getElementById(this.ctrlId+"_content"))||document.getElementById(this.ctrlId+"_content").remove(),this.toolTipElement=null):(e.removeAttribute("aria-describedby"),e.removeAttribute("data-tooltip-id"),this.toolTipElement=null),sf.base.isNullOrUndefined(document.getElementById(this.ctrlId+"_content"))||(document.getElementById(this.ctrlId+"_content").remove(),this.toolTipElement=null)}},e.prototype.getTooltipStatus=function(e){var t,i=this.parent.getHeaderTable(),s=this.parent.getContentTable(),n=this.createTable(i,"e-gridheader","header"),o=this.createTable(s,"e-gridcontent","content"),r=e.classList.contains("e-headercell")?n:o,a=e.classList.contains("e-headercell")?"th":"tr";return r.querySelector(a).className=e.className,r.querySelector(a).innerText=e.innerText,t=r.querySelector(a).getBoundingClientRect().width,document.body.removeChild(n),document.body.removeChild(o),e.firstElementChild?t>e.getBoundingClientRect().width||e.firstElementChild.offsetWidth<e.firstElementChild.scrollWidth:t>e.getBoundingClientRect().width||e.offsetWidth<e.scrollWidth},e.prototype.mouseMoveHandler=function(e){if(this.isEllipsisTooltip()){if(this.parent.options.allowTextWrap){var t=this.parent.options.wrapMode;if("Header"==t&&r(e.target,"e-gridheader")||"Content"==t&&r(e.target,"e-gridcontent")||"Both"==t)return}var i=r(e.target,"e-ellipsistooltip");this.prevElement===i&&"mouseout"!==e.type||this.close();var s=e.target.tagName;if(i&&"mouseout"!==e.type&&(!sf.base.Browser.isDevice||-1===["A","BUTTON","INPUT"].indexOf(s))){if(i.getAttribute("aria-describedby"))return;this.getTooltipStatus(i)&&(i.getElementsByClassName("e-headertext").length?this.content=i.getElementsByClassName("e-headertext")[0].innerText:this.content=i.innerText,this.prevElement=i,this.open(i))}}this.hoverFrozenRows(e)},e.prototype.hoverFrozenRows=function(e){if(this.parent.options.frozenColumns){var t=r(e.target,"e-row"),i=[].slice.call(this.parent.element.querySelectorAll(".e-frozenhover"));if(i.length&&"mouseout"===e.type)for(var s=0;s<i.length;s++)i[s].classList.remove("e-frozenhover");else if(t){var n=[].slice.call(this.parent.element.querySelectorAll('tr[data-rowindex="'+t.getAttribute("data-rowindex")+'"]'));if(n.splice(n.indexOf(t),1),"true"!=t.getAttribute("aria-selected"))for(s=0;s<n.length;s++)n[s].classList.add("e-frozenhover");else for(s=0;s<n.length;s++)n[s].classList.remove("e-frozenhover")}}},e.prototype.isEllipsisTooltip=function(){var e=this.parent.getColumns();if("EllipsisWithTooltip"===this.parent.options.clipMode)return!0;for(var t=0;t<e.length;t++)if("EllipsisWithTooltip"===e[t].clipMode)return!0;return!1},e.prototype.scrollHandler=function(){this.isEllipsisTooltip()&&this.close()},e.prototype.createTable=function(e,t,i){var s=sf.base.createElement("div");s.className=this.parent.element.className,s.style.cssText="display: inline-block;visibility:hidden;position:absolute";var n=sf.base.createElement("div");n.className=t;var o=sf.base.createElement("table");o.className=e.className,o.style.cssText="table-layout: auto;width: auto";var r="header"===i?"th":"td",a=sf.base.createElement("tr"),l=sf.base.createElement(r);return a.appendChild(l),o.appendChild(a),n.appendChild(o),s.appendChild(n),document.body.appendChild(s),s},e.prototype.onKeyPressed=function(e){"Tab"!==e.key&&"ShiftTab"!==e.key||this.close()},e.prototype.destroy=function(){this.close(),this.unWireevents()},e}(),k=function(){function e(e){var t=this;this.isOverflowBorder=!0,this.istargetGrid=!1,this.helper=function(e){var i=t.parent,s=t.draggable.currentStateTarget;t.draggable.queryPositionInfo=function(e){return i.options.enableRtl&&(e.left=this.position.left-(this.parentClientRect.left+this.borderWidth.left)-i.element.querySelector(".e-cloneproperties").clientWidth+i.element.querySelector(".e-rowdragdrop").clientWidth/2+"px"),e},e.sender.target.classList.contains("e-input")||"INPUT"==e.sender.target.tagName||"TEXTAREA"==e.sender.target.tagName||e.sender.target.blur();var n=sf.base.createElement("div",{className:"e-cloneproperties e-draganddrop e-grid e-dragclone",styles:'height:"auto", z-index:2, width:'+i.element.offsetWidth}),o=sf.base.createElement("table",{styles:"width:"+i.element.offsetWidth}),a=sf.base.createElement("tbody");if(document.getElementsByClassName("e-griddragarea").length||i.options.rowDropTarget&&!e.sender.target.classList.contains("e-selectionbackground")&&"Single"!==i.options.selectionType||!i.options.rowDropTarget&&!r(e.sender.target,"e-rowdragdrop")||i.options.rowDropTarget&&"Single"===i.options.selectionType&&null===t.draggable.currentStateTarget.parentElement.getAttribute("data-rowindex"))return!1;i.options.rowDropTarget&&"Row"===i.options.selectionMode&&"Single"===i.options.selectionType&&null!==t.draggable.currentStateTarget.parentElement.getAttribute("data-rowindex")&&i.dotNetRef.invokeMethodAsync("SelectRow",parseInt(t.draggable.currentStateTarget.parentElement.getAttribute("data-rowindex"),10)),t.startedRow=sf.base.closest(s,"tr").cloneNode(!0),sf.base.isNullOrUndefined(t.startedRow.querySelector(".e-rowcell.e-focus"))||sf.base.removeClass([t.startedRow.querySelector(".e-rowcell.e-focus")],["e-focus","e-focused"]);var l=i.getSelectedRows();u(t.startedRow,".e-indentcell"),u(t.startedRow,".e-detailrowcollapse"),u(t.startedRow,".e-detailrowexpand"),t.removeCell(t.startedRow,"e-gridchkbox");var h=new RegExp("e-active","g");if(t.startedRow.innerHTML=t.startedRow.innerHTML.replace(h,""),a.appendChild(t.startedRow),i.getSelectedRows().length>1&&t.startedRow.hasAttribute("aria-selected")){var d=sf.base.createElement("span",{className:"e-dropitemscount",innerHTML:""+l.length});n.appendChild(d)}var c=sf.base.closest(s,"tr").querySelector(".e-icon-rowdragicon");return c&&c.classList.add("e-dragstartrow"),o.appendChild(a),n.appendChild(o),i.element.appendChild(n),n},this.dragStart=function(e){var i=t.parent;if(document.body.classList.add("e-prevent-select"),!document.getElementsByClassName("e-griddragarea").length){var s=t.parent.element.querySelector(".e-dropitemscount");t.parent.getSelectedRows().length>1&&s&&(s.style.left=t.parent.element.querySelector(".e-cloneproperties table").offsetWidth-5+"px");var n=parseInt(t.startedRow.getAttribute("data-rowindex"),10);t.parent.dotNetRef.invokeMethodAsync("RowDragStartEvent",n),e.bindEvents(e.dragElement),t.dragStartData=t.rowData;var o=document.getElementById(i.options.rowDropTarget);i.options.rowDropTarget&&o&&o.blazor__instance&&"function"==typeof o.blazor__instance.getModuleName&&"grid"===o.blazor__instance.getModuleName()&&o.blazor__instance.getContent().classList.add("e-allowRowDrop")}},this.drag=function(e){var i=t.parent;if(t.istargetGrid=!1,t.destinationGrid=t.parent,t.parent.options.rowDropTarget){var s=document.getElementById(i.options.rowDropTarget);t.destinationGrid=sf.base.isNullOrUndefined(s.blazor__instance)?t.parent:s.blazor__instance,r(e.target,"e-grid")&&(t.istargetGrid=t.parent.options.rowDropTarget===r(e.target,"e-grid").id)}var n=t.parent.element.querySelector(".e-cloneproperties"),o=t.getElementFromPosition(n,e.event);sf.base.classList(n,["e-defaultcur"],["e-notallowedcur","e-movecur"]),t.isOverflowBorder=!0;var a=r(o,"e-grid")?sf.base.closest(e.target,"tr"):null;if(e.target){if(t.stopTimer(),i.element.classList.add("e-rowdrag"),t.dragTarget=a&&r(o,"e-grid").id===n.parentElement.id?a.rowIndex:parseInt(t.startedRow.getAttribute("data-rowindex"),10),i.options.rowDropTarget)r(o,"e-gridcontent")?r(n.parentElement,"e-grid").id===r(o,"e-grid").id?sf.base.classList(n,["e-notallowedcur"],["e-defaultcur"]):sf.base.classList(n,["e-defaultcur"],["e-notallowedcur"]):r(o,"e-droppable")?sf.base.classList(n,["e-defaultcur"],["e-notallowedcur"]):sf.base.classList(n,["e-notallowedcur"],["e-defaultcur"]);else{var l=r(o,"e-grid");l&&l.id===n.parentElement.id?sf.base.classList(n,["e-movecur"],["e-defaultcur"]):sf.base.classList(n,["e-notallowedcur"],["e-movecur"])}if(!i.options.rowDropTarget&&(!i.options.groupCount||e.target.classList.contains("e-selectionbackground")))if(r(o,"e-grid")&&t.updateScrollPostion(e.event,o),t.isOverflowBorder&&parseInt(t.startedRow.getAttribute("data-rowindex"),10)!==t.dragTarget)t.moveDragRows(e,t.startedRow,a);else{if(a&&t.parent.getRowByIndex(t.parent.getRows().length-1).getAttribute("data-uid")===a.getAttribute("data-uid")){var h=sf.base.createElement("div",{className:"e-lastrow-dragborder"}),d=t.parent.getContent();h.style.width=t.parent.getContent().offsetWidth-t.getScrollWidth()+"px",t.borderIndex=Number(r(a,"e-row").getAttribute("data-rowindex")),d.parentElement.querySelectorAll(".e-lastrow-dragborder").length||(d.classList.add("e-grid-relative"),d.parentElement.appendChild(h),h.style.bottom=t.parent.options.allowPaging?t.parent.element.querySelector(".e-pager").offsetHeight+t.getScrollWidth()+"px":t.getScrollWidth()+"px")}t.removeBorder(a)}i.options.rowDropTarget&&t.istargetGrid&&(t.updateScrollPostion(e.event,o),t.moveDragRows(e,t.startedRow,a))}},this.dragStop=function(e){document.body.classList.remove("e-prevent-select"),c(t.parent.element)||t.processDragStop(e)},this.processDragStop=function(e){var i=t.parent,s=t.getElementFromPosition(e.helper,e.event),n=s&&!s.classList.contains("e-dlg-overlay")?s:e.target;i.element.classList.remove("e-rowdrag");var o=document.getElementById(i.options.rowDropTarget),a=i.element.querySelector(".e-dragstartrow");if(t.parent.options.allowRowDragAndDrop&&t.parent.options.rowDropTarget&&!r(n,"e-grid")){var l=t.getElementXPath(n),h=n.id,d=parseInt(t.startedRow.getAttribute("data-rowindex"),10),c=n.getBoundingClientRect();i.dotNetRef.invokeMethodAsync("ReorderRows",d,0,"add",!1,l,h,c,null,!0,!1)}if(i.options.rowDropTarget&&o&&o.blazor__instance&&"function"==typeof o.blazor__instance.getModuleName&&"grid"===o.blazor__instance.getModuleName()&&o.blazor__instance.getContent().classList.remove("e-allowRowDrop"),!r(n,"e-gridcontent")||n.classList.contains("e-lastrow-dragborder"))return t.dragTarget=null,sf.base.remove(e.helper),t.removeBorder(s),void(a&&a.classList.remove("e-dragstartrow"));if(t.parent.options.allowRowDragAndDrop&&!t.parent.options.rowDropTarget){t.stopTimer(),t.parent.getContent().classList.remove("e-grid-relative"),t.removeBorder(s),a&&a.classList.remove("e-dragstartrow");var p=t.getElementXPath(e.target),u=n.id,f=parseInt(t.startedRow.getAttribute("data-rowindex"),10),g=f<t.borderIndex?t.borderIndex:t.borderIndex+1;if(Number.isNaN(g))return;setTimeout((function(){i.dotNetRef.invokeMethodAsync("ReorderRows",f,g,"delete",!0,p,u,null,null,!1,!1)}),10),t.dragTarget=null}},this.removeCell=function(e,t){return[].slice.call(e.querySelectorAll("td")).filter((function(i){i.classList.contains(t)&&e.deleteCell(i.cellIndex)}))},this.drop=function(e){t.columnDrop({target:e.target,droppedElement:e.droppedElement}),sf.base.remove(e.droppedElement)},this.parent=e,this.parent.options.allowRowDragAndDrop&&this.initializeDrag()}return e.prototype.stopTimer=function(){window.clearInterval(this.timer)},e.prototype.initializeDrag=function(){var e=this.parent;this.draggable=new sf.base.Draggable(e.getContent(),{dragTarget:".e-rowcelldrag, .e-rowdragdrop, .e-rowcell",distance:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,isPreventSelect:!1}),this.droppable=new sf.base.Droppable(e.getContent(),{accept:".e-dragclone",drop:this.drop})},e.prototype.updateScrollPostion=function(e,t){var i=this,s=this.destinationGrid.options.frozenColumns,n=h(e).y,o=this.destinationGrid.getContent().getBoundingClientRect(),r=this.destinationGrid.getRowHeight()-15,a=s?this.destinationGrid.getContent().querySelector(".e-movablecontent"):this.destinationGrid.getContent();if(o.top+r>=n){var l=-this.destinationGrid.getRowHeight();this.isOverflowBorder=!1,this.timer=window.setInterval((function(){i.setScrollDown(a,l,!0)}),200)}else if(o.top+this.destinationGrid.getContent().clientHeight-r-20<=n){var d=this.destinationGrid.getRowHeight();this.isOverflowBorder=!1,this.timer=window.setInterval((function(){i.setScrollDown(a,d,!0)}),200)}},e.prototype.setScrollDown=function(e,t,i){e.scrollTop=e.scrollTop+t},e.prototype.moveDragRows=function(e,t,i){var s=this.parent.element.querySelector(".e-cloneproperties"),n=sf.base.closest(e.target,"tr");if(r(n,"e-gridcontent")&&(!this.parent.options.rowDropTarget&&r(s.parentElement,"e-grid").id===r(n,"e-grid").id||this.istargetGrid)){var o=n||this.startedRow;this.setBorder(o,e.event,t,i)}},e.prototype.setBorder=function(e,t,i,s){var n=this.parent.element;this.istargetGrid&&(n=this.destinationGrid.element);var o=this.parent.element.querySelector(".e-cloneproperties");if(this.removeFirstRowBorder(e),this.removeLastRowBorder(e),r(e,"e-gridcontent")&&(r(o.parentElement,"e-grid").id===r(e,"e-grid").id||this.istargetGrid)){sf.base.removeClass(n.querySelectorAll(".e-rowcell,.e-rowdragdrop"),["e-dragborder"]);var a=[];if(s&&0===s.rowIndex){var l=sf.base.createElement("div",{className:"e-firstrow-dragborder"}),h=this.destinationGrid.getHeaderContent();h.classList.add("e-grid-relative"),l.style.width=n.offsetWidth-this.getScrollWidth()+"px",h.querySelectorAll(".e-firstrow-dragborder").length||h.appendChild(l),this.borderIndex=-1}else s&&parseInt(i.getAttribute("data-rowindex"),10)>s.rowIndex||this.parent.options.rowDropTarget?(e=this.destinationGrid.getRowByIndex(s.rowIndex-1),a=[].slice.call(e.querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse"))):a=[].slice.call(e.querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse"));a.length>0&&(this.borderIndex=Number(r(a[0],"e-row").getAttribute("data-rowindex")),f(a,!0,"e-dragborder"))}},e.prototype.getScrollWidth=function(){var e=this.parent.getContent();return e.scrollWidth>e.offsetWidth?n():0},e.prototype.removeFirstRowBorder=function(e){this.destinationGrid.element.getElementsByClassName("e-firstrow-dragborder").length>0&&e&&0!==e.rowIndex&&this.destinationGrid.element.getElementsByClassName("e-firstrow-dragborder")[0].remove()},e.prototype.removeLastRowBorder=function(e){var t=e&&!sf.base.isNullOrUndefined(this.destinationGrid.getRowByIndex(this.destinationGrid.getRows().length-1))&&this.destinationGrid.getRowByIndex(this.destinationGrid.getRows().length-1).getAttribute("data-uid")!==e.getAttribute("data-uid");this.destinationGrid.element.getElementsByClassName("e-lastrow-dragborder").length>0&&e&&t&&this.destinationGrid.element.getElementsByClassName("e-lastrow-dragborder")[0].remove()},e.prototype.removeBorder=function(e){(this.removeFirstRowBorder(e),this.removeLastRowBorder(e),e=this.destinationGrid.getRows().filter((function(e){return e.querySelector("td.e-dragborder")}))[0])&&f([].slice.call(e.querySelectorAll(".e-dragborder")),!1,"e-dragborder")},e.prototype.getElementFromPosition=function(e,t){var i,s=h(t);return e.style.display="none",i=document.elementFromPoint(s.x,s.y),e.style.display="",i},e.prototype.getElementXPath=function(e){if(!e)return null;if(e.id)return"//[@id="+e.id+"]"+(""!=e.className?"."+e.className.toLowerCase():"");if("BODY"===e.tagName)return"/html/body";var t=[].slice.call(e.parentElement.childNodes).filter((function(t){return t.nodeName===e.nodeName})),i=t.indexOf(e);return this.getElementXPath(e.parentNode)+"/"+e.tagName.toLowerCase()+(""!=e.className?"."+e.className.toLowerCase():"")+(t.length>1?"["+(i+1)+"]":"")},e.prototype.getTargetIdx=function(e){return e?parseInt(e.getAttribute("data-rowindex"),10):0},e.prototype.columnDrop=function(e){var t=this.parent;if("grouping"!==e.droppedElement.getAttribute("action")){var i=sf.base.closest(e.target,"tr"),s=void 0;if("true"!==e.droppedElement.querySelector("tr").getAttribute("single-dragrow")&&e.droppedElement.parentElement.id===t.element.id||"true"===e.droppedElement.querySelector("tr").getAttribute("single-dragrow")&&e.droppedElement.parentElement.id!==t.element.id)return this.removeTargetGridBorder(this.parent),void this.removeTargetGridBorder(this.destinationGrid);if(e.droppedElement.parentElement.id!==t.element.id&&(s=e.droppedElement.parentElement.blazor__instance),s.element.id!==t.element.id&&s.options.rowDropTarget!==t.element.id)return;var n=this.getTargetIdx(i);isNaN(n)&&(n=0),t.options.allowPaging&&(n=n+t.options.currentPage*t.options.pageSize-t.options.pageSize);var o=this.getElementXPath(e.target),r=e.target.id,a=e.target.getBoundingClientRect();this.removeTargetGridBorder(this.parent),t.options.tValue==s.options.tValue?(t.dotNetRef.invokeMethodAsync("ReorderRows",0,n,"add",!1,o,r,a,s.dotNetRef,!1,!1),s.dotNetRef.invokeMethodAsync("ReorderRows",0,n,"delete",!1,o,r,a,null,!1,!1)):s.dotNetRef.invokeMethodAsync("ReorderRows",0,n,"delete",!1,o,r,a,null,!1,!0)}},e.prototype.removeTargetGridBorder=function(e){sf.base.isNullOrUndefined(e)||(e.element.getElementsByClassName("e-firstrow-dragborder").length>0&&e.element.getElementsByClassName("e-firstrow-dragborder")[0].remove(),e.element.getElementsByClassName("e-lastrow-dragborder").length>0&&e.element.getElementsByClassName("e-lastrow-dragborder")[0].remove(),sf.base.removeClass(e.element.querySelectorAll(".e-rowcell.e-dragborder"),["e-dragborder"]))},e.prototype.destroy=function(){var e=this.parent.element;e&&(e.querySelector(".e-gridheader")||e.querySelector(".e-gridcontent"))&&(sf.base.isNullOrUndefined(this.draggable)||this.draggable.destroy(),sf.base.isNullOrUndefined(this.droppable)||this.droppable.destroy())},e}(),P=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){sf.base.EventHandler.add(this.parent.getContent().parentElement,"mousedown",this.mouseDownHandler,this),this.parent.options.allowDragSelection&&sf.base.EventHandler.add(this.parent.getContent().parentElement,"touchstart",this.mouseDownHandler,this)},e.prototype.removeEventListener=function(){sf.base.EventHandler.remove(this.parent.getContent().parentElement,"mousedown",this.mouseDownHandler),this.parent.options.allowDragSelection&&sf.base.EventHandler.remove(this.parent.getContent().parentElement,"touchstart",this.mouseDownHandler)},e.prototype.mouseDownHandler=function(e){var t,i=e.target,s=this.parent,n=r(i,"e-grid");if(!(n&&n.id!==s.element.id||r(i,"e-headercontent")&&!this.parent.options.frozenRows)){if((e.shiftKey||e.ctrlKey)&&e.preventDefault(),r(i,"e-rowcell")&&!e.shiftKey&&!e.ctrlKey){if(!(s.options.cellSelectionMode.indexOf("Box")>-1||(s.options.allowDragSelection&&!s.options.enableAutoFill&&s.options.cellSelectionMode.indexOf("Flow"))>-1)||this.isRowType()||this.isSingleSel()?this.isCellDrag=!1:(this.isCellDrag=!0,t=!0),(s.options.allowRowDragAndDrop||s.options.allowDragSelection&&!s.options.enableAutoFill)&&!s.options.isEdit){if(!s.options.allowDragSelection&&(!this.isRowType()||sf.base.closest(i,"td").classList.contains("e-selectionbackground"))||this.isSingleSel())return s.options.allowDragSelection&&document.body.classList.add("e-disableuserselect"),void(this.isDragged=!1);t=!0,this.element=sf.base.createElement("div",{className:"e-griddragarea"}),this.element.style.left="0px",this.element.style.top="0px",s.getContent().appendChild(this.element)}t&&(this.isAutoFillSel=!1,this.enableDrag(e,!0))}this.updateStartEndCells(),(i.classList.contains("e-autofill")||i.classList.contains("e-xlsel"))&&(this.isCellDrag=!0,this.isAutoFillSel=!0,this.enableDrag(e),document.body.style.cursor="crosshair")}},e.prototype.mouseUpHandler=function(e){if(document.body.classList.remove("e-disableuserselect"),sf.base.isNullOrUndefined(this.element)||sf.base.isNullOrUndefined(this.element.parentNode)||sf.base.remove(this.element),this.isCellDrag||sf.base.isNullOrUndefined(this.prevStartDIndex)&&sf.base.isNullOrUndefined(this.prevEndIndex)?!this.parent.options.allowDragSelection||this.parent.options.enableAutoFill||!this.isDragged||this.isAutoFillSel||sf.base.isNullOrUndefined(this.startDragIndex)||sf.base.isNullOrUndefined(this.endDragIndex)||sf.base.isNullOrUndefined(this.endDragCellIndex)||(this.isDragged=!1,this.parent.dotNetRef.invokeMethodAsync("DragCellSelection",this.startDragIndex,this.startDragCellIndex,this.endDragIndex,this.endDragCellIndex,!1)):this.parent.dotNetRef.invokeMethodAsync("DragSelection",this.prevStartDIndex,this.prevEndIndex,!1),this.isDragged=!1,document.body.style.cursor="default",this.prevStartDIndex=void 0,this.prevEndIndex=void 0,this.startDragIndex=void 0,this.startDragCellIndex=void 0,this.endDragIndex=void 0,this.endDragCellIndex=void 0,"Batch"==this.parent.options.editMode&&this.parent.options.enableAutoFill&&0===this.parent.options.frozenColumns&&0===this.parent.options.frozenRows){if(!sf.base.isNullOrUndefined(this.endRowIndex)&&!sf.base.isNullOrUndefined(this.endColIndex)&&!this.isAutoFillSel&&this.isInitialSelect){this.parent.dotNetRef.invokeMethodAsync("ClearSelection");var t=this.updateAutofillPosition(this.endColIndex,this.endRowIndex,!0);this.parent.dotNetRef.invokeMethodAsync("UpdateAutofillPositions",t,"UpdateAutofillBox"),this.assignCells(),this.selectCellByRow(),this.isInitialSelect=!1}if(this.isAutoFillSel){var i=this;this.assignCells(),setTimeout((function(){i.selectCellByRow()}),10),this.expandAFBorder(e,!0);var s=this.createBorder(this.startRowIndex,this.startColIndex,this.endRowIndex,this.endColIndex,!0);this.parent.dotNetRef.invokeMethodAsync("UpdateAutofillPositions",s,"UpdateAutofillBorder");t=this.updateAutofillPosition(this.endColIndex,this.endRowIndex,!0);this.parent.dotNetRef.invokeMethodAsync("UpdateAutofillPositions",t,"UpdateAutofillBox")}}sf.base.EventHandler.remove(this.parent.getContent(),"mousemove",this.mouseMoveHandler),this.parent.options.allowDragSelection&&sf.base.EventHandler.remove(this.parent.getContent(),"touchmove",this.mouseMoveHandler),this.parent.options.frozenRows&&(sf.base.EventHandler.remove(this.parent.getHeaderContent(),"mousemove",this.mouseMoveHandler),this.parent.options.allowDragSelection&&sf.base.EventHandler.remove(this.parent.getHeaderContent(),"touchmove",this.mouseMoveHandler)),sf.base.EventHandler.remove(document.body,"mouseup",this.mouseUpHandler),this.parent.options.allowDragSelection&&sf.base.EventHandler.remove(document.body,"touchend",this.mouseUpHandler)},e.prototype.enableDrag=function(e,t){var i=this.parent;if(t){var s=sf.base.closest(e.target,"tr");this.startDragIndex=parseInt(s.getAttribute("data-rowindex"),10),this.startDragCellIndex=parseInt(r(e.target,"e-rowcell").getAttribute("data-colindex"),10)}document.body.classList.add("e-disableuserselect");var n=i.element.getBoundingClientRect(),o=h(e);this.x=o.x-n.left,this.y=o.y-n.top,sf.base.EventHandler.add(i.getContent(),"mousemove",this.mouseMoveHandler,this),this.parent.options.allowDragSelection&&sf.base.EventHandler.add(i.getContent(),"touchmove",this.mouseMoveHandler,this),this.parent.options.frozenRows&&(sf.base.EventHandler.add(i.getHeaderContent(),"mousemove",this.mouseMoveHandler,this),this.parent.options.allowDragSelection&&sf.base.EventHandler.add(i.getHeaderContent(),"touchmove",this.mouseMoveHandler,this)),sf.base.EventHandler.add(document.body,"mouseup",this.mouseUpHandler,this),this.parent.options.allowDragSelection&&sf.base.EventHandler.add(document.body,"touchend",this.mouseUpHandler,this)},e.prototype.mouseMoveHandler=function(e){this.parent.options.allowDragSelection||"touchmove"==e.type||e.preventDefault();var t,i,s=this.parent.element.getBoundingClientRect(),n=this.x,o=this.y,a=h(e),l=a.x-s.left,d=a.y-s.top,c="touchmove"==e.type?e.touches[0].pageX:e.pageX,p="touchmove"==e.type?e.touches[0].pageY:e.pageY,u=p+2;if(i=sf.base.isNullOrUndefined(e.touches)||sf.base.isNullOrUndefined(document.elementFromPoint(e.touches[0].clientX,e.touches[0].clientY))?sf.base.closest(e.target,"tr"):sf.base.closest(document.elementFromPoint(e.touches[0].clientX,e.touches[0].clientY),"tr"),this.isDragged=!0,!this.isCellDrag||this.parent.options.allowDragSelection&&!this.parent.options.enableAutoFill&&this.isCellDrag){i||(i=sf.base.closest(document.elementFromPoint(this.parent.element.offsetLeft+2,sf.base.isNullOrUndefined(e.touches)?e.clientY:e.touches[0].clientY),"tr")),n>l&&(t=l,l=n,n=t),o>d&&(t=d,d=o,o=t,u=p-2);for(var f=[".e-gridheader",".e-groupdroparea",".e-toolbar"],g=0,m=0;m<f.length;m++){var v=this.parent.element.querySelector(f[m]);v&&(g+=v.offsetHeight)}var b=this.parent.element.querySelector(".e-yscroll"),y=0;b&&(y+=b.scrollTop),this.element.style.left=n+"px",this.element.style.top=o-g+y+"px",this.element.style.width=l-n+"px",this.element.style.height=d-o+"px"}if(i&&!e.ctrlKey&&!e.shiftKey){var M=parseInt(i.getAttribute("data-rowindex"),10);if(this.isCellDrag||!sf.base.isNullOrUndefined(this.prevStartDIndex)&&this.prevStartDIndex==this.startDragIndex&&this.prevEndIndex==M){if(this.parent.options.allowDragSelection&&!this.parent.options.enableAutoFill&&this.isCellDrag){var C;x=!1;(C=sf.base.isNullOrUndefined(e.touches)||sf.base.isNullOrUndefined(document.elementFromPoint(e.touches[0].clientX,e.touches[0].clientY))?sf.base.closest(e.target,"td"):sf.base.closest(document.elementFromPoint(e.touches[0].clientX,e.touches[0].clientY),"td"))||(C=document.elementFromPoint(c,u)),C&&(sf.base.isNullOrUndefined(this.prevStartDIndex)&&(x=!0),this.prevStartDIndex=this.startDragIndex,this.endDragIndex=M,this.endDragCellIndex=parseInt(C.getAttribute("data-colindex"),10),this.isAutoFillSel||(!x||isNaN(M)||isNaN(parseInt(C.getAttribute("data-colindex"),10))?this.performDragCellSelection(this.startDragIndex,this.startDragCellIndex,M,parseInt(C.getAttribute("data-colindex"),10)):this.parent.dotNetRef.invokeMethodAsync("DragCellSelection",this.startDragIndex,this.startDragCellIndex,M,parseInt(C.getAttribute("data-colindex"),10),!0)))}else if("Batch"==this.parent.options.editMode&&this.parent.options.enableAutoFill&&this.startCell){var w=r(e.target,"e-rowcell");if(w&&!w.classList.contains("e-editedbatchcell"))if(this.startAFCell=this.startCell,this.endAFCell=w,this.endCell=w,this.isAutoFillSel)this.expandAFBorder(e,!1);else{this.assignCells();var S=this.createBorder(this.startRowIndex,this.startColIndex,this.endRowIndex,this.endColIndex,!0);this.parent.dotNetRef.invokeMethodAsync("UpdateAutofillPositions",S,"UpdateAutofillBorder"),this.isInitialSelect=!0}}}else{var N=-1,x=!1,O=this.parent.getSelectedRowIndexes();sf.base.isNullOrUndefined(this.prevStartDIndex)?(N=-1,x=!0):(M>=this.prevStartDIndex&&O.indexOf(M)>=0||this.prevStartDIndex>M&&O.indexOf(this.startDragIndex)>=0)&&(N=this.prevEndIndex),this.prevStartDIndex=this.startDragIndex,this.prevEndIndex=M,x&&!isNaN(M)?this.parent.dotNetRef.invokeMethodAsync("DragSelection",this.startDragIndex,M,!0):this.performDragSelection(this.startDragIndex,M,N)}}},e.prototype.performDragCellSelection=function(e,t,i,s){var n=e,o=i;e>i&&(n=i,o=e),this.selectCellsByRange(n,o,t,s)},e.prototype.selectCellsByRange=function(e,t,i,s){for(var n,o,r=this.parent.getRows(),a=0;a<r.length;a++){var l=[].slice.call(r[a].querySelectorAll(".e-rowcell"));r[a].removeAttribute("aria-selected"),f.apply(void 0,[l,!1].concat(["e-aria-selected","e-active"]))}if(this.parent.options.frozenColumns){var h=this.parent.getMovableDataRows();for(a=0;a<h.length;a++){var d=[].slice.call(h[a].querySelectorAll(".e-rowcell"));h[a].removeAttribute("aria-selected"),f.apply(void 0,[d,!1].concat(["e-aria-selected","e-active"]))}if("LeftRight"==this.parent.options.frozenName){var c=this.parent.getFrozenRightDataRows();for(a=0;a<c.length;a++){var p=[].slice.call(c[a].querySelectorAll(".e-rowcell"));c[a].removeAttribute("aria-selected"),f.apply(void 0,[p,!1].concat(["e-aria-selected","e-active"]))}}}var u=[];if(e>t){var g=e;e=t,t=g}if(i>s){var m=i;i=s,s=m}for(a=e;a<=t;a++){this.parent.options.cellSelectionMode.indexOf("Box")<0?(n=a===e?i:0,o=a===t?s:this.getLastColIndex(a)):(n=i,o=s);for(var v=n<o?n:o,b=n>o?n:o;v<=b;v++)u.push(this.getCellIndex(a,v));f.apply(void 0,[u,!0].concat(["e-aria-selected","e-active"]))}},e.prototype.getCellIndex=function(e,t){var i=!!this.parent.options.frozenColumns,s=this.parent.getColumnByIndex(t,i),n=this.parent.getOrderedFrozenColumns().filter((function(e){return!e.isFrozen})),o=this.parent.isMovableGrid(s.index,i);return t=o?t-this.parent.options.frozenLeftColumnsCount:"Right"==s.freeze?t-(this.parent.options.frozenLeftColumnsCount+n.length):t,this.parent.options.frozenColumns?this.parent.options.actualFrozenColumns>0?o?this.parent.getMovableDataRows()[e]&&this.parent.getMovableDataRows()[e].querySelectorAll(".e-rowcell")[t-this.parent.options.frozenColumns]:this.parent.getDataRows()[e]&&this.parent.getDataRows()[e].querySelectorAll(".e-rowcell")[t]:"LeftRight"==this.parent.options.frozenName?o?this.parent.getMovableDataRows()[e]&&this.parent.getMovableDataRows()[e].querySelectorAll(".e-rowcell")[t]:"Left"==s.freeze?this.parent.getDataRows()[e]&&this.parent.getDataRows()[e].querySelectorAll(".e-rowcell")[t]:this.parent.getFrozenRightDataRows()[e]&&this.parent.getFrozenRightDataRows()[e].querySelectorAll(".e-rowcell")[t]:o?this.parent.getMovableDataRows()[e]&&this.parent.getMovableDataRows()[e].querySelectorAll(".e-rowcell")[t]:this.parent.getDataRows()[e]&&this.parent.getDataRows()[e].querySelectorAll(".e-rowcell")[t]:this.parent.getRows()[e]&&this.parent.getRows()[e].querySelectorAll(".e-rowcell")[t]},e.prototype.getLastColIndex=function(e){var t=this.parent.options.frozenColumns?this.parent.getMovableDataRows()[e].querySelectorAll("td.e-rowcell"):this.parent.getDataRows()[e].querySelectorAll("td.e-rowcell");return"Right"==this.parent.options.frozenName||"LeftRight"==this.parent.options.frozenName?parseInt(t[t.length-1].getAttribute("aria-colindex"),10):parseInt(t[t.length-1].getAttribute("data-colindex"),10)},e.prototype.updateAutofillPosition=function(e,t,i){void 0===i&&(i=!1);var s=this.parent.getRowByIndex(t).querySelector('[data-colindex="'+e+'"]'),n=[].slice.call(this.parent.element.querySelectorAll(".e-cellselectionbackground")),o="",r="",a="";if(n&&!i&&(s=n[n.length-1]),s&&s.offsetParent){var l=s.getBoundingClientRect(),h=s.offsetParent.getBoundingClientRect(),d=this.isLastCell(s)?4:0,c=this.isLastRow(s)?3:0;this.parent.options.enableRtl?r=h.right-l.right+l.width-4-d+"px":o=l.left-h.left+l.width-4-d+"px",a=l.top-h.top+l.height-5-c+"px"}return{Left:o,Right:r,Top:a}},e.prototype.createBorder=function(e,t,i,s,n){void 0===i&&(i=null),void 0===s&&(s=null),void 0===n&&(n=!1);var o,r,a,l=[].slice.call(this.parent.element.querySelectorAll(".e-cellselectionbackground")),h=this.parent.getRowByIndex(e),d=h.querySelector('[data-colindex="'+t+'"]'),c=[].slice.call(d.parentElement.querySelectorAll('[data-colindex="'+t+'"]')),p="",u="",f="";null!=i&&null!=s?(o=this.parent.getRowByIndex(i).querySelector('[data-colindex="'+s+'"]'),r=[].slice.call(o.parentElement.querySelectorAll('[data-colindex="'+s+'"]'))):(h,o=d,r=c),l&&!n&&(c=[].slice.call(l[0].parentElement.querySelectorAll('[data-colindex="'+(l[0].cellIndex-this.parent.getIndentCount())+'"]')),r=[].slice.call(l[l.length-1].parentElement.querySelectorAll('[data-colindex="'+(l[l.length-1].cellIndex-this.parent.getIndentCount())+'"]'))),this.startCell||(this.startCell=c[0]),this.endCells=r[0];var g=c[0],m=r[0],v=g.getBoundingClientRect(),b=m.getBoundingClientRect(),y=g.offsetParent.getBoundingClientRect(),M=this.isLastRow(m)?2:0,C=this.parent.options.frozenRows&&this.isFirstRow(g)?1.5:0,w=this.parent.options.frozenColumns&&this.isFirstCell(g)?1:0;return this.parent.options.enableRtl?(p=y.right-v.right-w+"px",f=v.right-b.left+w+1+"px"):(u=v.left-y.left-w+"px",f=b.right-v.left+w+1+"px"),a=v.top-y.top-C+"px","2px",{Right:p,Width:f,BorderWidth:"2px",Left:u,Height:b.top-v.top>0?b.top-y.top+b.height+1-(v.top-y.top)-M+C+"px":b.height+C-M+1+"px",Top:a}},e.prototype.expandAFBorder=function(e,t){for(var i=[].slice.call(this.parent.element.querySelectorAll(".e-cellselectionbackground")),s=parseInt(r(this.startCell,"e-row").getAttribute("data-rowindex"),10),n=parseInt(this.startCell.getAttribute("data-colindex"),10),o=parseInt(r(this.endCell,"e-row").getAttribute("data-rowindex"),10),a=parseInt(this.endCell.getAttribute("data-colindex"),10),l=parseInt(r(i[i.length-1],"e-row").getAttribute("data-rowindex"),10)-parseInt(r(i[0],"e-row").getAttribute("data-rowindex"),10),h=parseInt(r(i[0],"e-row").getAttribute("data-rowindex"),10),d=this.parent.getRowByIndex(h),c=0,p=0,u=d.cells.length;p<u;p++)d.cells[p].classList.contains("e-cellselectionbackground")&&c++;switch(c=(c-=1)>=0?c:0,!0){case!t&&this.endAFCell.classList.contains("e-cellselectionbackground")&&!!r(e.target,"e-rowcell"):this.startAFCell=this.parent.getCellFromIndex(s,n),this.endAFCell=this.parent.getCellFromIndex(s+l,n+c),this.drawAFBorders();break;case n+c<a&&a-n-c+1>o-s-l&&a-n-c+1>s-o:if(this.endAFCell=this.parent.getCellFromIndex(s+l,a),o=parseInt(r(this.endAFCell,"e-row").getAttribute("data-rowindex"),10),a=parseInt(this.endAFCell.getAttribute("data-colindex"),10),t){var f=parseInt(this.endCells.getAttribute("data-colindex"),10);for(p=s;p<=o;p++)for(var g=this.getAutoFillCells(p,n),m=0,v=f+1;v<=a;v++)m>c&&(m=0),this.updateValue(p,v,g[m]),m++}else this.drawAFBorders();break;case n>a&&n-a+1>o-s-l&&n-a+1>s-o:if(this.startAFCell=this.parent.getCellFromIndex(s,a),this.endAFCell=this.endCells,t)for(p=s;p<=s+l;p++){(g=this.getAutoFillCells(p,n)).reverse();for(m=0,v=this.startCellIndex-1;v>=a;v--)m>c&&(m=0),this.updateValue(p,v,g[m]),m++}else this.drawAFBorders();break;case s>o:if(this.startAFCell=this.parent.getCellFromIndex(o,n),this.endAFCell=this.endCells,t){var b=y=parseInt(this.endCells.parentElement.getAttribute("data-rowindex"),10);for(p=s-1;p>=o;p--){b===this.startIndex-1&&(b=y);g=this.getAutoFillCells(b,n),m=0;b--;for(v=this.startCellIndex;v<=this.startCellIndex+c;v++)this.updateValue(p,v,g[m]),m++}}else this.drawAFBorders();break;default:if(this.endAFCell=this.parent.getCellFromIndex(o,n+c),t){var y=parseInt(this.endCells.parentElement.getAttribute("data-rowindex"),10);for(b=this.startIndex,p=y+1;p<=o;p++){b===y+1&&(b=this.startIndex);g=this.getAutoFillCells(b,n);b++;m=0;for(var M=this.startCellIndex;M<=this.startCellIndex+c;M++)this.updateValue(p,M,g[m]),m++}}else this.drawAFBorders()}},e.prototype.drawAFBorders=function(){if(this.startCell){var e=this.startAFCell.getBoundingClientRect(),t=this.endAFCell.getBoundingClientRect(),i=t.top-e.top>0?1:0,s=t.top-e.top>=0&&(r(this.startAFCell,"e-movablecontent")||r(this.startAFCell,"e-frozencontent"))&&this.isFirstRow(this.startAFCell)?1.5:0,n=(r(this.startAFCell,"e-movablecontent")||r(this.startAFCell,"e-movableheader"))&&this.isFirstCell(this.startAFCell)?1:0,o=this.isLastRow(this.endAFCell)&&(r(this.endAFCell,"e-movablecontent")||r(this.endAFCell,"e-frozencontent"))?2:1,a=this.startAFCell.offsetParent.getBoundingClientRect(),l=this.parent.element.getBoundingClientRect(),h=this.startAFCell.offsetParent.parentElement.scrollTop,d=this.startAFCell.offsetParent.parentElement.scrollLeft,c=h-this.startAFCell.offsetTop,p=d-this.startAFCell.offsetLeft;c=c>0?Math.floor(c)-1:0,p=p>0?p:0;var u,f,g,m=e.left-l.left,v="",b="",y="",M="",C="",w="";if(this.parent.options.enableRtl){var S=r(this.startAFCell,"e-movablecontent")||r(this.startAFCell,"e-movableheader")?e.right-this.startAFCell.offsetParent.parentElement.getBoundingClientRect().width-l.left:0;b=l.right-t.right-2+t.width+"px",M=l.right-e.right-n+S-1+"px",C=t.left-l.left-.5+"px",w=parseInt(b,10)-parseInt(M,10)-n+1+"px"}else v=m-n+p-1+d+"px",y=t.left-l.left-2+t.width+d+"px",C=m+p-.5+d+"px",w=parseInt(y,10)-parseInt(v,10)-n+1+"px";g=f=e.top-a.top-s+"px";var N={BorderLeftAutofillLeft:v,BorderLeftAutofillTop:f,BorderLeftAutofillHeight:u=t.top-e.top>0?t.top-a.top+t.height+1-(e.top-a.top)+s-o-c+"px":t.height+s-o-c+"px",BorderLeftAutofillRight:b,BorderRightAutofillLeft:y,BorderRightAutofillHeight:parseInt(u,10)+"px",BorderRightAutofillRight:M,BorderRightAutofillTop:g,BorderTopAutofillLeft:C,BorderTopAutofillTop:g,BorderTopAutofillWidth:w,BorderBottomAutofillLeft:C,BorderBottomAutofillTop:parseFloat(f)+parseFloat(u)-i-1+"px",BorderBottomAutofillWidth:w};this.parent.dotNetRef.invokeMethodAsync("UpdateAutofillPositions",N,"UpdateAutofillPosition")}},e.prototype.updateValue=function(e,t,i){var s=this.parent.getColumnByIndex(t),n=parseInt(r(i,"e-row").getAttribute("data-rowindex"),10),o=this.parent.getColumnByIndex(i.cellIndex-this.parent.getIndentCount()),a=i.innerText;this.parent.dotNetRef.invokeMethodAsync("UpdateAutofillCell",e,s.field,o.field,n,a)},e.prototype.getAutoFillCells=function(e,t){return[].slice.call(this.parent.getDataRows()[e].querySelectorAll(".e-cellselectionbackground"))},e.prototype.updateStartEndCells=function(){var e=[].slice.call(this.parent.element.querySelectorAll(".e-cellselectionbackground"));this.startCell=e[0],this.endCell=e[e.length-1],this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute("data-rowindex"),10),this.startCellIndex=parseInt(r(this.startCell,"e-rowcell").getAttribute("data-colindex"),10))},e.prototype.assignCells=function(){this.startRowIndex=parseInt(this.startAFCell.parentElement.getAttribute("data-rowindex"),10),this.endRowIndex=parseInt(this.endAFCell.parentElement.getAttribute("data-rowindex"),10),this.startColIndex=parseInt(this.startAFCell.getAttribute("data-colindex"),10),this.endColIndex=parseInt(this.endAFCell.getAttribute("data-colindex"),10),this.startRowIndex>this.endRowIndex&&(this.startRowIndex=this.endRowIndex,this.endRowIndex=parseInt(this.startAFCell.parentElement.getAttribute("data-rowindex"),10)),this.endColIndex<this.startColIndex&&(this.startColIndex=this.endColIndex,this.endColIndex=parseInt(this.startAFCell.getAttribute("data-colindex"),10))},e.prototype.selectCellByRow=function(){for(var e=this.startRowIndex;e<=this.endRowIndex;e++)for(var t=this.startColIndex;t<=this.endColIndex;t++)this.parent.dotNetRef.invokeMethodAsync("SelectCellByRow",e,t)},e.prototype.isLastCell=function(e){var t=[].slice.call(e.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"));return t[t.length-1]==e},e.prototype.isLastRow=function(e){var t=[].slice.call(sf.base.closest(e,"tbody").querySelectorAll(".e-row:not(.e-hiddenrow)"));return t[t.length-1]==e.parentElement},e.prototype.isFirstRow=function(e){var t=[].slice.call(sf.base.closest(e,"tbody").querySelectorAll(".e-row:not(.e-hiddenrow)"));return e.parentElement===t[0]},e.prototype.isFirstCell=function(e){return[].slice.call(e.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"))[0]===e},e.prototype.performDragSelection=function(e,t,i){var s=e,n=t;e>t&&(s=t,n=e),-1!=i&&this.clearSelectionExceptDragIndexes(s,n),this.selectRangeOfRows(s,n)},e.prototype.selectRangeOfRows=function(e,t){var i=this.parent.getRows(),s=null;this.parent.options.frozenColumns&&(s=this.parent.getMovableDataRows());for(var n=function(e){if(!sf.base.isNullOrUndefined(s)&&s.length>0){var t=o.parent.options.enableVirtualization?s.filter((function(t){return parseInt(t.getAttribute("data-rowindex"),10)==e}))[0]:s[e];o.selectRow(t,!0)}var n=o.parent.options.enableVirtualization?i.filter((function(t){return parseInt(t.getAttribute("data-rowindex"),10)==e}))[0]:i[e];o.selectRow(n,!1)},o=this,r=e;r<=t;r++)n(r)},e.prototype.selectRow=function(e,t){if(!sf.base.isNullOrUndefined(e)){e.setAttribute("aria-selected","true");var i=[].slice.call(e.querySelectorAll(".e-rowcell"));f.apply(void 0,[i,!0].concat(["e-aria-selected","e-active"])),t||i[0].classList.contains("e-gridchkbox")&&i[0].querySelector(".e-frame").classList.replace("e-uncheck","e-check")}},e.prototype.clearSelectionByRow=function(e){var t=[].slice.call(e.querySelectorAll(".e-rowcell"));e.removeAttribute("aria-selected"),f.apply(void 0,[t,!1].concat(["e-aria-selected","e-active"])),t[0].classList.contains("e-gridchkbox")&&t[0].querySelector(".e-frame").classList.replace("e-check","e-uncheck")},e.prototype.clearSelectionExceptDragIndexes=function(e,t){var i=this.parent.getRows(),s=null;this.parent.options.frozenColumns&&(s=this.parent.getMovableDataRows());for(var n=0;n<i.length;n++){var o=this.parent.options.enableVirtualization?parseInt(i[n].getAttribute("data-rowindex"),10):n;if(o<e||o>t){if(!sf.base.isNullOrUndefined(s)&&s.length>0){var r=this.parent.options.enableVirtualization?s.filter((function(e){return parseInt(e.getAttribute("data-rowindex"),10)==o}))[0]:s[o];this.clearSelectionByRow(r)}var a=this.parent.options.enableVirtualization?i.filter((function(e){return parseInt(e.getAttribute("data-rowindex"),10)==o}))[0]:i[o];this.clearSelectionByRow(a)}}},e.prototype.isRowType=function(){return"Row"===this.parent.options.selectionMode||"Both"===this.parent.options.selectionMode},e.prototype.isSingleSel=function(){return"Single"===this.parent.options.selectionType},e}(),B=function(){function e(e,t){var i=this;this.fromWheel=!1,this.touchMove=!1,this.options={},this.sentinelInfo={up:{check:function(e,t){var s=e.top-i.containerRect.top;return t.entered=s>=0,s+i.options.pageHeight/2>=0},axis:"Y"},down:{check:function(e,t){i.options.container.clientHeight;var s=e.bottom;return t.entered=e.bottom<=i.containerRect.bottom,s-i.containerRect.top-i.options.pageHeight/2<=i.options.pageHeight/2},axis:"Y"},right:{check:function(e,t){var s=e.right;return t.entered=s<i.containerRect.right,s-i.containerRect.width<=i.containerRect.right},axis:"X"},left:{check:function(e,t){var s=e.left;return t.entered=s>0,s+i.containerRect.width>=i.containerRect.left},axis:"X"}},this.element=e,this.options=t}return e.prototype.observe=function(e,t){var i=this;this.options.virtualScrollHandler=this.virtualScrollHandler(e,t),this.containerRect=this.options.container.getBoundingClientRect(),sf.base.EventHandler.add(this.options.container,"wheel",(function(){return i.fromWheel=!0}),this),sf.base.EventHandler.add(this.options.container,"scroll",this.options.virtualScrollHandler,this),sf.base.isNullOrUndefined(r(this.element,"e-gridcontent"))||sf.base.isNullOrUndefined(r(this.element,"e-gridcontent").querySelector(".e-movablescrollbar"))||sf.base.EventHandler.add(r(this.element,"e-gridcontent").querySelector(".e-movablescrollbar"),"scroll",this.options.virtualScrollHandler,this)},e.prototype.disconnect=function(){var e=this;this.containerRect=this.options.container.getBoundingClientRect(),sf.base.EventHandler.remove(this.options.container,"wheel",(function(){return e.fromWheel=!0})),sf.base.EventHandler.remove(this.options.container,"scroll",this.options.virtualScrollHandler),sf.base.isNullOrUndefined(r(this.element,"e-gridcontent"))||sf.base.isNullOrUndefined(r(this.element,"e-gridcontent").querySelector(".e-movablescrollbar"))||sf.base.EventHandler.remove(r(this.element,"e-gridcontent").querySelector(".e-movablescrollbar"),"scroll",this.options.virtualScrollHandler)},e.prototype.check=function(e){var t=this.sentinelInfo[e];return t.check(this.element.getBoundingClientRect(),t)},e.prototype.virtualScrollHandler=function(e,t){var i=this,s="chrome"===sf.base.Browser.info.name?200:100,n=0,o=0,r=sf.base.debounce(e,s),a=sf.base.debounce(e,50);return function(e){var s=e.target.scrollTop,l=e.target.scrollLeft,h=n<s?"down":"up",d=e.target.classList.contains("e-movablescrollbar"),c=!0,p=i.options.container.querySelectorAll(".e-masked-row").length>0;h=o===l?h:o<l?"right":"left",d&&(h=o<l?"right":"left"),"down"==h?c=!!(p&&i.options.totalItems<100)||s-n<30:"up"==h?c=n-s<30:"right"==h?c=l-o<20:"left"==h&&(c=o-l<20),n=s,o=l;var u=i.sentinelInfo[h];if(-1!==i.options.axes.indexOf(u.axis)){var f=i.check(h),g=i.options.container.querySelectorAll(".e-masked-row").length&&"X"!=u.axis;if((u.entered||(sf.base.isNullOrUndefined(i.blazorActiveKey)||""==i.blazorActiveKey)&&!i.fromWheel&&g)&&t(i.element,u,c,h,{top:s,left:l},i.fromWheel,f),f||g){var m=r;"X"===u.axis&&(m=a),m({direction:h,sentinel:u,offset:{top:s,left:l},focusElement:document.activeElement})}g||(i.fromWheel=!1)}}},e.prototype.setPageHeight=function(e){this.options.pageHeight=e},e}(),U=function(){function e(e){var t=this;this.prevHeight=0,this.preStartIndex=0,this.preventEvent=!1,this.actions=["filtering","searching","grouping","ungrouping","Filtering","Searching","Grouping","Ungrouping","UnGrouping"],this.offsets={},this.tmpOffsets={},this.offsetKeys=[],this.currentInfo={},this.blazorActiveKey="",this.nextRowToNavigate=0,this.startIndex=0,this.selectedCellNavigation=-1,this.selectedRowNavigation=-1,this.bindScrollEvent=function(){t.observer.observe((function(e){t.parent.options.enableVirtualization&&t.scrollListener(e)}),t.onEntered());var e=t.parent;if(e.options.enablePersistence&&e.scrollPosition){t.content.scrollTop=e.scrollPosition.top;var i={direction:"down",sentinel:t.observer.sentinelInfo.down,offset:e.scrollPosition,focusElement:e.element};t.scrollListener(i),e.options.enableColumnVirtualization&&(t.content.scrollLeft=e.scrollPosition.left)}},this.parent=e,this.contentPanel=this.parent.element.querySelector(".e-gridcontent"),this.vHelper=new Y(e),this.virtualEle=new H(e),this.addEventListener()}return e.prototype.getPanel=function(){return this.contentPanel},e.prototype.getTable=function(){return this.contentPanel.querySelector(".e-table")},e.prototype.renderTable=function(){this.header=this.parent.virtualHeaderModule,this.virtualEle.table=this.getTable(),this.virtualEle.content=this.content=this.getPanel().querySelector(".e-content"),this.virtualEle.renderWrapper(Number(this.parent.options.height)),this.virtualEle.renderPlaceHolder();var e={container:this.content,pageHeight:2*this.getBlockHeight(),debounceEvent:!0,axes:this.parent.options.enableColumnVirtualization?["X","Y"]:["Y"],totalItems:this.parent.options.totalItemCount};this.observer=new B(this.virtualEle.wrapper,e),this.parent.dotNetRef.invokeMethodAsync("SetRowHeight",this.parent.getRowHeight())},e.prototype.addEventListener=function(){sf.base.EventHandler.add(this.parent.element,"keydown",this.keyDownHandler,this)},e.prototype.removeEventListener=function(){sf.base.isNullOrUndefined(this.observer)||this.observer.disconnect(),this.getPanel().firstElementChild.scrollTop=0,this.getPanel().firstElementChild.scrollLeft=0,sf.base.EventHandler.remove(this.parent.element,"keydown",this.keyDownHandler)},e.prototype.ensurePageSize=function(){var e=this.parent.getRowHeight(),t=2*~~((this.parent.options.height.toString().indexOf("%")<0?this.content.getBoundingClientRect().height:this.parent.element.getBoundingClientRect().height)/e),i=this.parent.options.pageSize,s=i<t?t:i;this.parent.dotNetRef.invokeMethodAsync("SetPageSizeAndCIndex",{pageSize:s,startColumnIndex:this.startColIndex,endColumnIndex:this.endColIndex,VTableWidth:this.getColumnOffset(this.endColIndex)-this.getColumnOffset(this.startColIndex-1)+""}),this.parent.options.pageSize=s,this.observer.options.pageHeight=2*this.getBlockHeight()},e.prototype.scrollListener=function(e){var t=this;if(this.parent.options.enablePersistence&&(this.parent.scrollPosition=e.offset),this.preventEvent)this.preventEvent=!1;else{var i=e.sentinel,s=this.preStartIndex,n=this.parent.getColumnIndexesInView(),o=this.currentInfo=this.getInfoFromView(e.direction,i,e.offset),r=this.parent.options.enableColumnVirtualization&&this.parent.options.enableRtl?-1*this.getColumnOffset(o.columnIndexes[0]-1,!0):this.getColumnOffset(o.columnIndexes[0]-1,!0);if(this.parent.options.enableColumnVirtualization&&JSON.stringify(n)!==JSON.stringify(o.columnIndexes)){for(var a=this.parent.options.virtualizedColumns,l=0;l<a.length;l++)a[l].autoFit&&this.parent.resizeModule.autoFitColumns(a[l].field);var h=this.parent.options.enableColumnVirtualization&&this.parent.options.enableRtl?-1*this.getColumnOffset(this.startColIndex-1,!0):this.getColumnOffset(this.startColIndex-1,!0),d=this.parent.options.enableColumnVirtualization&&this.parent.options.enableRtl?-1*this.getColumnOffset(this.endColIndex,!0)+h+"":this.getColumnOffset(this.endColIndex,!0)-h+"",c=sf.base.isNullOrUndefined(o.endIndex)?0:(o.endIndex-this.parent.options.pageSize)*(this.parent.options.rowHeight?this.parent.options.rowHeight:this.parent.getRowHeight());this.movableTranslateY=sf.base.isNullOrUndefined(this.movableTranslateY)?0:this.movableTranslateY,setTimeout((function(){t.parent.dotNetRef.invokeMethodAsync("RemoveValidationPopup"),t.parent.dotNetRef.invokeMethodAsync("VirtualRefresh",{requestType:"virtualscroll",isHeaderNavigated:t.isHeaderNavigated,selectedRowNavigation:t.selectedRowNavigation,selectedCellNavigation:t.selectedCellNavigation,isScrollByFocus:t.isScrollByFocus,startColumnIndex:o.columnIndexes[0],endColumnIndex:o.columnIndexes[o.columnIndexes.length-1],axis:"X",VTablewidth:d,translateX:r,translateY:t.parent.options.enableVirtualMaskRow?t.parent.options.frozenColumns?t.movableTranslateY:t.translateMaskY+t.movableTranslateY:0},c),t.isScrollByFocus=!1}),0)}else"left"!==this.currentInfo.direction&&"right"!==this.currentInfo.direction||!this.parent.options.enableVirtualMaskRow||0!==this.parent.options.frozenColumns||this.virtualEle.adjustTable(r,this.translateMaskY),this.virtualEle.movableAdjustTable(r,0),this.header.virtualEle.movableAdjustTable(r,0);this.parent.setColumnIndexesInView(this.parent.options.enableColumnVirtualization?o.columnIndexes:[]),this.nextRowToNavigate=""!=this.blazorActiveKey?this.nextRowToNavigate:0,this.preStartIndex!==s&&(this.parent.options.currentPage=o.currentPage,setTimeout((function(){t.parent.dotNetRef.invokeMethodAsync("VirtualRefresh",{requestType:"virtualscroll",nextRowToNavigate:t.nextRowToNavigate,virtualStartIndex:o.endIndex-t.parent.options.pageSize,virtualEndIndex:o.endIndex,axis:"Y",RHeight:t.parent.getRowHeight()},(o.endIndex-t.parent.options.pageSize)*(t.parent.options.rowHeight?t.parent.options.rowHeight:t.parent.getRowHeight()))}),0)),this.prevInfo=o,this.blazorActiveKey=""}},e.prototype.setColVTableWidthAndTranslate=function(e){if(this.parent.options.enableColumnVirtualization&&this.prevInfo&&JSON.stringify(this.currentInfo.columnIndexes)!==JSON.stringify(this.prevInfo.columnIndexes)||e&&e.refresh){var t=this.getColumnOffset(this.startColIndex-1),i=this.getColumnOffset(this.endColIndex)-t+"";0!=this.parent.options.frozenColumns?(this.virtualEle.movableContentWrapper.style.width=i,this.header.virtualEle.movableHeaderWrapper.style.width=i,this.header.virtualEle.movableAdjustTable(this.movableTranslateX,this.movableTranslateY),this.virtualEle.movableAdjustTable(this.movableTranslateX,this.movableTranslateY)):(this.header.virtualEle.setWrapperWidth(i),this.virtualEle.setWrapperWidth(i),this.header.virtualEle.adjustTable(this.movableTranslateX,0),this.parent.getContentTable().parentElement.style.width=i+"px")}},e.prototype.refreshOnDataChange=function(){this.getPanel().firstElementChild.scrollTop=0,this.getPanel().firstElementChild.scrollLeft=0,this.parent.options.enableColumnVirtualization&&this.header.virtualEle.adjustTable(0,0),this.virtualEle.adjustTable(0,0),this.refreshOffsets(),this.refreshVirtualElement()},e.prototype.keyDownHandler=function(e){this.blazorActiveKey="ArrowDown"===e.key||"ArrowUp"===e.key?e.key:"",sf.base.isNullOrUndefined(this.observer)||(this.observer.blazorActiveKey=this.blazorActiveKey)},e.prototype.focusCell=function(e,t){var i=this.parent.getRowHeight(),s=this.parent.getContent(),o=e.getBoundingClientRect(),a=s.getBoundingClientRect();"MoveRightCell"==t?-1==this.selectedCellNavigation?this.selectedCellNavigation=Number(e.getAttribute("data-colindex")):this.selectedCellNavigation+1==Number(e.getAttribute("data-colindex"))&&this.selectedCellNavigation++:"MoveLeftCell"==t&&(-1==this.selectedCellNavigation?this.selectedCellNavigation=Number(e.getAttribute("data-colindex")):this.selectedCellNavigation-1==Number(e.getAttribute("data-colindex"))&&this.selectedCellNavigation--),"MoveDownCell"==t||"MoveUpCell"==t?e.focus({preventScroll:!0}):"MoveRightCell"!=t&&"MoveLeftCell"!=t||(sf.base.isNullOrUndefined(r(e,"e-row"))?this.isHeaderNavigated=!0:(this.isHeaderNavigated=!1,this.selectedRowNavigation=Number(r(e,"e-row").getAttribute("data-rowindex"))),this.isScrollByFocus=!0,e.focus()),"MoveDownCell"==t&&o.bottom>a.top+a.height-n()?s.scrollTop=s.scrollTop+i:"MoveUpCell"==t&&o.bottom<a.top+i&&(this.isScrollFromFocus=!0,s.scrollTop=s.scrollTop-i)},e.prototype.getInfoFromView=function(e,t,i){var s={direction:e,sentinelInfo:t,offsets:i,startIndex:this.preStartIndex,endIndex:this.preEndIndex},n=this.parent.options.height.toString().indexOf("%")<0?this.content.getBoundingClientRect().height:this.parent.element.getBoundingClientRect().height;s.page=this.getPageFromTop(i.top+n,s),s.blockIndexes=this.vHelper.getBlockIndexes(s.page),s.columnIndexes="X"===t.axis?this.vHelper.getColumnIndexes():this.parent.getColumnIndexesInView();var o=this.parent.getRowHeight(),r=i.top/o,a=n/o,l=r+a,h=this.parent.options.pageSize/4,d=this.parent.options.groupCount?this.getVisibleGroupedRowCount():this.count;if("down"!==s.direction||this.isScrollFromFocus){if("up"===s.direction&&(s.startIndex&&s.endIndex||this.parent.options.enableVirtualMaskRow)){var c=Math.round((s.startIndex*o+h*o)/o);if(this.parent.options.enableVirtualMaskRow)if(a=Math.ceil(a),r<c||Math.ceil(r)>this.preStartIndex){var p=Math.ceil(r)>0?Math.ceil(r):0,u=d-this.parent.options.pageSize-this.parent.options.pageSize/2,f=d-this.parent.options.pageSize;s.startIndex=r<d&&u<=r&&!(f<=l&&l<=d)?p>0?p-this.parent.options.pageSize/2:0:p>0?p+this.parent.options.pageSize>d?d-this.parent.options.pageSize:p:0,s.startIndex=s.startIndex>0?s.startIndex-1:s.startIndex;v=s.startIndex+this.parent.options.pageSize;s.endIndex=s.startIndex<=0?this.parent.options.pageSize:v<d?v:d,s.startIndex=s.startIndex<0||this.parent.options.totalItemCount<=this.parent.options.pageSize?0:s.startIndex,s.currentPage=Math.ceil(s.startIndex/this.parent.options.pageSize),this.isScrollFromFocus=!1,this.preStartIndex=this.startIndex=s.startIndex,this.preEndIndex=s.endIndex}else this.isScrollFromFocus=!1,this.preStartIndex=this.preStartIndex,this.preEndIndex=this.preEndIndex;if(r<c&&!this.parent.options.enableVirtualMaskRow){var g=h>a?h:a+a/4;v=Math.round(r+g);s.endIndex=v<d?v:d;m=s.endIndex-this.parent.options.pageSize;s.startIndex=m>0?m:0,s.endIndex=m<0?this.parent.options.pageSize:s.endIndex,s.currentPage=Math.ceil(s.startIndex/this.parent.options.pageSize)}b=this.parent.getSelectedRowIndexes(!0);this.nextRowToNavigate=b.length>0?b[0]+1:-1}}else{var m=Math.round(l)-Math.round(h);if(this.parent.options.enableVirtualMaskRow)if(a=Math.ceil(a)-1,Math.ceil(r)-this.preStartIndex>=a){s.startIndex=Math.ceil(r)>=0?Math.ceil(r):0;var v=s.startIndex+this.parent.options.pageSize;s.endIndex=v<d?v:d,s.startIndex=v>=d?s.endIndex-this.parent.options.pageSize<0?0:s.endIndex-this.parent.options.pageSize:s.startIndex,s.currentPage=Math.ceil(s.endIndex/this.parent.options.pageSize),this.isScrollFromFocus=!1,this.preStartIndex=this.startIndex=s.startIndex,this.preEndIndex=s.endIndex}else this.isScrollFromFocus=!1,this.preStartIndex=this.preStartIndex,this.preEndIndex=this.preEndIndex;if(!this.parent.options.enableVirtualMaskRow&&sf.base.isNullOrUndefined(s.startIndex)||l>s.startIndex+Math.round(this.parent.options.pageSize/2+h)&&s.endIndex!==d){s.startIndex=m>=0?Math.round(m):0,s.startIndex=s.startIndex>r?Math.floor(r):s.startIndex;var v=s.startIndex+this.parent.options.pageSize;s.startIndex=v<l?Math.ceil(l)-this.parent.options.pageSize:s.startIndex,s.endIndex=v<d?v:d,s.startIndex=v>=d?s.endIndex-this.parent.options.pageSize>0?s.endIndex-this.parent.options.pageSize:0:s.startIndex,s.currentPage=Math.ceil(s.endIndex/this.parent.options.pageSize)}var b=this.parent.getSelectedRowIndexes(!0);this.nextRowToNavigate=b.length>0?b[0]-1:-1}return this.parent.options.enableVirtualMaskRow||(this.isScrollFromFocus=!1,this.preStartIndex=this.startIndex=s.startIndex,this.preEndIndex=s.endIndex),s},e.prototype.onDataReady=function(){var e=this,t=this;if(!this.movableColumnIndex&&this.parent.options.frozenColumns&&(this.movableColumnIndex=parseInt(this.parent.scrollModule.getMovableContent().querySelector("td").getAttribute("data-colindex"))),this.observer.options.totalItems=this.parent.options.totalItemCount,this.bindScrollEvent(),this.count=this.parent.options.totalItemCount,this.maxPage=Math.ceil(this.count/this.parent.options.pageSize),["Refresh","Filtering","Searching","Grouping","UnGrouping","Reorder","RowDragAndDrop","refresh","filtering","searching","grouping","ungrouping","reorder","GroupExpandCollapse",null].some((function(t){return e.parent.options.requestType===t}))&&this.refreshOffsets(),this.setVirtualHeight(),this.parent.scrollModule.refresh(),this.resetScrollPosition(this.parent.options.requestType),this.setColVTableWidthAndTranslate(),(this.parent.options.enableVirtualMaskRow||this.parent.options.enableLazyLoading)&&"GroupExpandCollapse"!=this.parent.options.requestType){var i=this.parent.options.rowHeight,s=(this.currentInfo.endIndex-this.parent.options.pageSize)*(i||this.parent.getRowHeight());s="NaN"==s.toString()?0:s,s-=this.parent.options.pageSize*(i||this.parent.getRowHeight()),0==this.count&&(s=0),sf.base.isNullOrUndefined(this.currentInfo.startIndex)||0==this.currentInfo.startIndex||sf.base.isNullOrUndefined(this.currentInfo.endIndex)||this.currentInfo.endIndex===this.parent.options.totalItemCount||(s-=20),setTimeout((function(){t.translateMaskY=s,t.translateMaskX=sf.base.isNullOrUndefined(t.translateMaskX)?0:t.translateMaskX,0==t.parent.options.frozenColumns?t.virtualEle.wrapper.style.transform="translate("+t.translateMaskX+"px,"+s+"px)":t.virtualEle.wrapper.style.transform="translate(0px,"+s+"px)"}),0)}this.prevInfo=this.prevInfo?this.prevInfo:this.vHelper.getData()},e.prototype.setVirtualHeight=function(){var e=this.parent.options.columns.filter((function(e){return e.visible})),t=this.parent.options.enableColumnVirtualization?this.getColumnOffset(e.length+this.parent.options.groupCount-1)+"px":"100%",i=0,s=this.parent.options.totalItemCount*this.parent.getRowHeight(),n=this.parent.options.pageSize*this.parent.getRowHeight();this.parent.options.enableVirtualMaskRow?i=this.parent.options.frozenColumns&&this.parent.options.enableColumnVirtualization?s-2*n:s:this.parent.options.groupCount?i=this.parent.options.visibleGroupedRowsCount*this.parent.getRowHeight():this.parent.options.enableVirtualization&&(i=this.parent.options.frozenColumns&&this.parent.options.enableColumnVirtualization?s-n:s),this.virtualEle.setVirtualHeight(i,t),this.parent.options.enableColumnVirtualization&&this.header.virtualEle.setVirtualHeight(1,t)},e.prototype.getPageFromTop=function(e,t){var i=this,s=p(this.parent)?this.getGroupedTotalBlocks():this.getTotalBlocks(),n=0;this.offsets[s],this.prevHeight;return this.offsetKeys.some((function(o){var r=Number(o),a=e<=i.offsets[o]||r===s&&e>i.offsets[o];return a&&(t.block=r%2==0?1:0,n=Math.max(1,Math.min(i.vHelper.getPage(r),i.maxPage))),a})),n},e.prototype.getTranslateY=function(e,t,i,s){void 0===i&&((i={page:this.getPageFromTop(e+t,{})}).blockIndexes=this.vHelper.getBlockIndexes(i.page));var n=(i.blockIndexes[0]||1)-1,o=this.getOffset(n),r=this.getOffset(i.blockIndexes[i.blockIndexes.length-1]);s&&(i=this.prevInfo);var a=o>e?this.getOffset(n-1):r<e+t?this.getOffset(n+1):o,l=this.offsets[i.blockIndexes[i.blockIndexes.length-1]]-this.tmpOffsets[i.blockIndexes[0]];return a+l>this.offsets[p(this.parent)?this.getGroupedTotalBlocks():this.getTotalBlocks()]&&0==this.parent.options.groupCount&&(a-=a+l-this.offsets[this.getTotalBlocks()]),a},e.prototype.getOffset=function(e){return Math.min(0|this.offsets[e],0|this.offsets[this.maxBlock])},e.prototype.onEntered=function(){var e=this;return function(t,i,s,n,o,r,a){var l=e;sf.base.Browser.isIE&&!r&&a&&e.preventEvent;var h="X"===i.axis,d=e.prevInfo.offsets?e.prevInfo.offsets.top:null,c=e.content.getBoundingClientRect().height,p=h?e.getColumnOffset(e.vHelper.getColumnIndexes()[0]-1,!0):e.getColumnOffset(e.prevInfo.columnIndexes[0]-1);p=e.parent.options.enableColumnVirtualization&&e.parent.options.enableRtl?-1*p:p;var u=e.getTranslateY(o.top,c,h&&d===o.top?e.prevInfo:void 0,!0);if(e.currentInfo&&e.currentInfo.startIndex&&h){var f=sf.base.isNullOrUndefined(e.currentInfo.endIndex)?0:e.currentInfo.endIndex;u=(f-e.parent.options.pageSize)*e.parent.getRowHeight()}if(e.movableTranslateX=e.vHelper.cOffsets[e.startColIndex-1]?e.vHelper.cOffsets[e.startColIndex-1]:p,e.movableTranslateX=e.parent.options.enableColumnVirtualization&&e.parent.options.enableRtl?-1*e.movableTranslateX:e.movableTranslateX,e.movableTranslateX=e.parent.options.enableColumnVirtualization&&e.parent.options.frozenColumns&&e.vHelper.mOffsets[e.startColIndex-1]?e.vHelper.mOffsets[e.startColIndex-1]:e.movableTranslateX,e.movableTranslateY=e.parent.options.pageSize*e.parent.options.rowHeight,e.parent.options.enableVirtualMaskRow){if(e.offsets[e.maxBlock]>=u&&e.currentInfo.endIndex!=e.parent.options.totalItemCount)if("right"==n||"left"==n){var g=e.parent.getColumnIndexesInView(),m=e.getInfoFromView(n,i,o);e.header.virtualEle.movableAdjustTable(e.movableTranslateX,0),e.virtualEle.movableAdjustTable(e.movableTranslateX,e.movableTranslateY),e.parent.options.frozenColumns||JSON.stringify(g)===JSON.stringify(m.columnIndexes)||e.virtualEle.adjustTable(e.movableTranslateX,e.translateMaskY+e.movableTranslateY)}else{var v=e.parent.options.enableColumnVirtualization?e.parent.options.enableVirtualMaskRow?4:2:0;setTimeout((function(){var e=u;l.parent.options.enableVirtualMaskRow&&"down"==n&&(e=l.content.scrollTop-2*l.parent.options.pageSize*(0!=l.parent.options.rowHeight?l.parent.options.rowHeight:l.parent.getRowHeight())),l.virtualEle.adjustTable(p,Math.min(s?l.translateMaskY:"down"==n?e:u,l.offsets[l.maxBlock-v]))}),0)}}else e.parent.options.frozenColumns&&(e.virtualEle.movableAdjustTable(e.movableTranslateX,Math.min(u,e.offsets[e.maxBlock])),e.header.virtualEle.movableAdjustTable(e.movableTranslateX,Math.min(u,e.offsets[e.maxBlock]))),!h&&!sf.base.isNullOrUndefined(e.currentInfo.endIndex)&&e.currentInfo.endIndex!=e.parent.options.totalItemCount||"up"==n?e.virtualEle.adjustTable(e.movableTranslateX,Math.min(u,e.offsets[e.maxBlock])):e.currentInfo.endIndex==e.parent.options.totalItemCount&&"down"==n&&(u=0!=e.parent.options.rowHeight?e.parent.options.rowHeight*e.currentInfo.startIndex:e.parent.getRowHeight()*e.currentInfo.startIndex,e.virtualEle.adjustTable(e.movableTranslateX,Math.min(u,e.offsets[e.maxBlock])));h&&!e.parent.options.frozenColumns&&e.setColVTableWidthAndTranslate({refresh:!0})}},e.prototype.getBlockSize=function(){return this.parent.options.pageSize>>1},e.prototype.getBlockHeight=function(){return this.getBlockSize()*this.parent.getRowHeight()},e.prototype.getGroupedTotalBlocks=function(){if(this.parent.options.enableLazyLoading&&this.parent.options.enableVirtualization)return this.getTotalBlocks();var e=this.getVisibleGroupedRowCount();return Math.floor(e/this.getBlockSize()<1?1:e/this.getBlockSize())},e.prototype.getVisibleGroupedRowCount=function(){return Number(this.virtualEle.placeholder.style.height.substring(0,this.virtualEle.placeholder.style.height.indexOf("p")))/this.parent.getRowHeight()},e.prototype.getTotalBlocks=function(){return Math.ceil(sf.base.isNullOrUndefined(this.count)?0:this.count/this.getBlockSize())},e.prototype.getColumnOffset=function(e,t){return this.parent.options.frozenColumns&&this.parent.options.enableColumnVirtualization&&t?0|this.vHelper.mOffsets[e]:0|this.vHelper.cOffsets[e]},e.prototype.resetScrollPosition=function(e){var t=sf.base.isNullOrUndefined(e)?e:e.toLowerCase();if(this.actions.some((function(t){return t===e}))||this.parent.options.filterCount>0&&!sf.base.isNullOrUndefined(t)&&("save"==t||"delete"==t)||!sf.base.isNullOrUndefined(this.parent.options.initGroupingField)&&this.parent.options.initGroupingField.length>0&&!sf.base.isNullOrUndefined(t)&&("sorting"==t||"save"==t||"delete"==t)){var i=this.content;this.preventEvent=0!==i.scrollTop,i.scrollTop=0}},e.prototype.refreshOffsets=function(){this.parent;var e=0,t=this.getBlockSize(),i=p(this.parent)?this.getGroupedTotalBlocks():this.getTotalBlocks();this.prevHeight=this.offsets[i],this.maxBlock=i%2==0?i-2:i-1,this.offsets={};for(var s=[],n={},o=Array.apply(null,Array(i)).map((function(){return++e})),r=0;r<o.length;r++){var a=(n[o[r]]||[]).length,l=p(this.parent)?s.length%t:this.count%t,h=!p(this.parent)&&o[r]in n?a*this.parent.getRowHeight():l&&o[r]===i?l*this.parent.getRowHeight():this.getBlockHeight();this.offsets[o[r]]=(0|this.offsets[o[r]-1])+h,this.tmpOffsets[o[r]]=0|this.offsets[o[r]-1]}this.offsetKeys=Object.keys(this.offsets),this.parent.options.enableColumnVirtualization&&this.vHelper.refreshColOffsets()},e.prototype.updateTransform=function(e,t){var i=this;setTimeout((function(){i.translateMaskX=e,i.virtualEle.adjustTable(e,i.translateMaskY),i.virtualEle.movableAdjustTable(i.translateMaskX,0),i.header.virtualEle.movableAdjustTable(i.translateMaskX,0)}),500)},e.prototype.refreshColumnIndexes=function(){this.vHelper.refreshColOffsets();var e=this.vHelper.getColumnIndexes();this.parent.setColumnIndexesInView(e),this.parent.dotNetRef.invokeMethodAsync("SetColumnIndexes",e[0],e[e.length-1])},e.prototype.refreshVirtualElement=function(){this.vHelper.refreshColOffsets(),this.setVirtualHeight()},e}(),R=function(){function e(e){this.parent=e,this.vHelper=new Y(this.parent),this.virtualEle=new H(this.parent),this.headerPanel=this.parent.element.querySelector(".e-gridheader")}return e.prototype.getPanel=function(){return this.headerPanel},e.prototype.getTable=function(){return this.headerPanel.querySelector(".e-table")},e.prototype.renderTable=function(){this.vHelper.refreshColOffsets(),this.parent.setColumnIndexesInView(this.vHelper.getColumnIndexes(this.getPanel().querySelector(".e-headercontent"))),this.virtualEle.table=this.getTable(),this.virtualEle.content=this.getPanel().querySelector(".e-headercontent"),this.virtualEle.content.style.position="relative",this.virtualEle.renderWrapper(),this.virtualEle.renderPlaceHolder()},e}(),H=function(){function e(e){this.parent=e}return e.prototype.renderWrapper=function(e){this.wrapper=this.content.querySelector(".e-virtualtable"),this.wrapper.setAttribute("styles","min-height:"+sf.base.formatUnit(e)),this.content.querySelector(".e-movableheader")&&(this.movableHeaderWrapper=this.content.querySelector(".e-movableheader").querySelector(".e-virtualtable")),null!=this.content.querySelector(".e-movablecontent")&&(this.movableContentWrapper=this.content.querySelector(".e-movablecontent").querySelector(".e-virtualtable"))},e.prototype.renderPlaceHolder=function(){this.placeholder=this.content.lastElementChild},e.prototype.movableAdjustTable=function(e,t){this.filterTranslateX=e,this.movableHeaderWrapper&&(this.movableHeaderWrapper.style.transform="translate("+e+"px, 0px)"),this.parent.options.enableVirtualMaskRow&&this.movableContentWrapper?this.movableContentWrapper.style.transform="translate("+e+"px, "+t+"px)":this.movableContentWrapper&&(this.movableContentWrapper.style.transform="translate("+e+"px, 0px)")},e.prototype.adjustTable=function(e,t){this.filterTranslateX=e,0!=this.parent.options.frozenColumns?this.wrapper.style.transform="translate(0px, "+t+"px)":this.wrapper.style.transform="translate("+e+"px, "+t+"px)"},e.prototype.setWrapperWidth=function(e,t){this.wrapper.style.width=e?e+"px":t?"100%":""},e.prototype.setVirtualHeight=function(e,t){this.placeholder.style.height=e+"px",this.parent.options.frozenColumns?this.placeholder.style.width="100%":this.placeholder.style.width=t},e}(),Y=function(){function e(e){this.cOffsets={},this.mOffsets={},this.data={},this.groups={},this.parent=e}return e.prototype.getBlockIndexes=function(e){return[e+(e-1),2*e]},e.prototype.getPage=function(e){return e%2==0?e/2:(e+1)/2},e.prototype.getData=function(){return{page:this.parent.options.currentPage,blockIndexes:this.getBlockIndexes(this.parent.options.currentPage),direction:"down",columnIndexes:this.parent.getColumnIndexesInView()}},e.prototype.getColumnIndexes=function(e){var t=this;void 0===e&&(e=this.parent.getHeaderContent()),sf.base.isNullOrUndefined(this.parent.element.querySelector(".e-movablecontent"))||(e=this.parent.element.querySelector(".e-movablecontent"));var i=[],s=this.parent.options.enableColumnVirtualization&&this.parent.options.enableRtl?-1*e.scrollLeft|0:0|e.scrollLeft,n=Object.keys(this.cOffsets),o=this.parent.options.needClientAction?this.parent.options.frozenColumns&&this.parent.options.enableColumnVirtualization?this.parent.getHeaderContent().offsetWidth:e.getBoundingClientRect().width:parseInt(this.parent.options.width);s=Math.min(this.cOffsets[n.length-1]-o,s);var r=sf.base.Browser.isDevice?2*o:o/2,a=s+o+(0===s?r:0);return n.some((function(e,n,o){var l=Number(e),h=t.cOffsets[e];return s-r<=h&&a+r>=h&&i.push(l),a+r<h})),i.length||this.parent.options.frozenColumns||(i=[],a+=this.cOffsets[this.getColumnIndexes()[0]],n.some((function(e,n,o){var l=Number(e),h=t.cOffsets[e];return s-r<=h&&a+r>=h&&i.push(l),a+r<h}))),1!=i.length||this.parent.options.frozenColumns?(this.parent.virtualContentModule.startColIndex=i[0],this.parent.virtualContentModule.endColIndex=i[i.length-1]):(this.parent.virtualContentModule.startColIndex=i[0],this.parent.virtualContentModule.endColIndex=i[0]+1,i.push(i[0]+1)),i},e.prototype.refreshColOffsets=function(){var e=0;this.cOffsets={},this.mOffsets={};var t=this.parent.options.groupCount,i=this.parent.options.columns;this.parent.options.enableColumnVirtualization&&(i=i.filter((function(e){return e.visible})));for(var s=i.length,n=Array.apply(null,Array(s)).map((function(){return e++})),o=0;o<n.length;o++)n[o]=n[o]+t,this.cOffsets[n[o]]=(0|this.cOffsets[n[o]-1])+(i[o].visible?parseInt(i[o].width,10):0);if(this.parent.options.frozenColumns){var r=0;if(this.parent.options.actualFrozenColumns){for(var a=0,l=0;l<i.length&&(!i[l].isFrozen&&i[l].index<this.parent.options.frozenColumns);l++)a++;d=i.slice(a,s)}else var h=i.filter((function(e){return e.isFrozen&&("Left"===e.freeze||"Right"===e.freeze)})),d=i.filter((function(e){return!h.some((function(t){return t===e}))}));for(var c=d.length,p=Array.apply(null,Array(c)).map((function(){return r++})),u=0;u<p.length;u++)p[u]=p[u]+t,this.mOffsets[p[u]]=(0|this.mOffsets[p[u]-1])+(d[u].visible?parseInt(d[u].width,10):0)}},e}(),F="th.e-headercell",q=".e-rowcell",V=".e-filterbarcell",W="e-frozen-helper",_="e-frozen-cursor",Q="data-colindex",X=function(){function e(e){this.currentBorderIndex=-1,this.originalBorderIndex=-1,this.visibleLtoROrderedColumns=[],this.visibleRtoLOrderedColumns=[],this.widthCollection=[],this.visibleFrozenColumns=[],this.visibleFrozenLeftColumns=[],this.domRtoLOrderedColumns=[],this.domLtoROrderedColumns=[],this.parent=e,this.parent.options.allowFreezeLineMoving&&this.wireEvents()}return e.prototype.wireEvents=function(){sf.base.EventHandler.add(this.parent.getContent(),sf.base.Browser.touchStartEvent,this.dragStart,this),sf.base.EventHandler.add(this.parent.getHeaderContent(),sf.base.Browser.touchStartEvent,this.dragStart,this)},e.prototype.unwireEvents=function(){sf.base.EventHandler.remove(this.parent.getContent(),sf.base.Browser.touchStartEvent,this.dragStart),sf.base.EventHandler.remove(this.parent.getHeaderContent(),sf.base.Browser.touchStartEvent,this.dragStart)},e.prototype.dragStart=function(e){if(e.target.classList.contains(_)){this.currentCursorElement=e.target,this.parent.getContent().classList.add("e-freezeline-moving"),this.isLeftCursorDragging=!!(this.currentCursorElement.classList.contains("e-frozen-left-cursor")&&!this.currentCursorElement.classList.contains("e-frozen-default-cursor")||this.currentCursorElement.classList.contains("e-frozen-default-cursor")&&this.currentCursorElement.classList.contains("e-frozen-right-cursor")),this.appendHelper();var t,i=sf.base.closest(this.currentCursorElement,F);if(sf.base.isNullOrUndefined(i))if(i=sf.base.closest(this.currentCursorElement,q),sf.base.isNullOrUndefined(i))t=sf.base.closest(this.currentCursorElement,V).getAttribute("e-mappinguid");else{var s=i.getAttribute(Q);t=this.parent.getHeaderContent().querySelector("["+Q+'="'+s+'"]').firstElementChild.getAttribute("e-mappinguid")}else t=i.firstElementChild.getAttribute("e-mappinguid");var n=this.parent.getColumns().filter((function(e){return e.uid==t}))[0].index;this.setColumnsForBorderUpdate(),sf.base.EventHandler.add(document,sf.base.Browser.touchEndEvent,this.dragEnd,this),this.parent.dotNetRef.invokeMethodAsync("InvokeFreezeLineMoving",{fromIndex:n})}},e.prototype.appendHelper=function(){this.helperElement=sf.base.createElement("div",{className:W}),this.setHelperHeight(),this.parent.element.appendChild(this.helperElement)},e.prototype.setHelperHeight=function(){var e=this.parent.getContent().offsetHeight,t=sf.base.closest(this.currentCursorElement,F);if(sf.base.isNullOrUndefined(t)){var i=sf.base.closest(this.currentCursorElement,q);if(sf.base.isNullOrUndefined(i)){var s=sf.base.closest(this.currentCursorElement,V).getAttribute("e-mappinguid");t=this.parent.getHeaderContent().querySelectorAll("[e-mappinguid="+s+"]")[0].parentElement}else{var n=i.getAttribute(Q);t=this.parent.getHeaderContent().querySelector("["+Q+'="'+n+'"]')}}var o=[].slice.call(this.parent.getHeaderContent().querySelectorAll("tr"));this.parent.options.frozenColumns&&t.parentElement.children.length&&!t.parentElement.children[0].classList.contains("e-stackedheadercell")&&(o=r(t,"e-movableheader")?[].slice.call(this.parent.getHeaderContent().querySelector(".e-movableheader").querySelectorAll("tr")):r(t,"e-frozen-right-header")?[].slice.call(this.parent.getHeaderContent().querySelector(".e-frozen-right-header").querySelectorAll("tr")):[].slice.call(this.parent.getHeaderContent().querySelector(".e-frozen-left-header").querySelectorAll("tr")));for(var a=o.indexOf(t.parentElement);a<o.length;a++)e+=o[a].offsetHeight;var l=this.calcPos(t),h=this.calcPos(this.parent.getHeaderContent()).top;this.currentCursorElement.classList.contains("e-frozen-default-cursor")?l.left=this.isLeftCursorDragging?l.left:l.left+t.offsetWidth-2:r(t,"e-frozen-right-content")||r(t,"e-frozen-right-header")?l.left+=this.parent.options.enableRtl?t.offsetWidth-2:-1:l.left+=this.parent.options.enableRtl?-1:t.offsetWidth-2,this.helperElement.style.cssText="height: "+e+"px; top: "+h+"px; left:"+Math.floor(l.left)+"px;"},e.prototype.calcPos=function(e){for(var t={top:0,left:0,right:0},i=e.getBoundingClientRect(),s=e.ownerDocument,n=r(e,"e-grid")||s.documentElement;n&&(n===s.body||n===s.documentElement)&&"static"===n.style.position;)n=n.parentNode;return n&&n!==e&&1===n.nodeType&&(t=n.getBoundingClientRect()),{top:i.top-t.top,left:i.left-t.left,right:i.right-t.right}},e.prototype.preventFreezeLineMoving=function(e){e?this.cancelFreezeLineMoving():sf.base.EventHandler.add(this.parent.element,sf.base.Browser.touchMoveEvent,this.freezeLineDragging,this)},e.prototype.cancelFreezeLineMoving=function(){this.unwireEvents(),sf.base.detach(this.helperElement),this.setDefaultValue()},e.prototype.setDefaultValue=function(){this.parent.getContent().classList.remove("e-freezeline-moving"),this.addOrRemoveClasses("remove"),this.helperElement=null,this.currentBorderIndex=-1,this.currentCursorElement=null,this.borderCells=null,this.widthCollection=[]},e.prototype.freezeLineDragging=function(e){this.helperElement&&(this.scrollHorizontally(),this.updateHelper(e),this.updateBorder())},e.prototype.setColumnsForBorderUpdate=function(){var e=this,t=this.parent.getColumns(),i=t.filter((function(e){return"Left"==e.freeze&&e.isFrozen}));this.visibleFrozenLeftColumns=i.filter((function(e){return e.visible}));var s=t.filter((function(e){return"Right"==e.freeze&&e.isFrozen})),n=s.filter((function(e){return e.visible}));if(this.parent.options.actualFrozenColumns>0){var o=t.slice(0,this.parent.options.actualFrozenColumns);this.visibleFrozenColumns=o.filter((function(e){return e.visible}));var r=(a=t.filter((function(t){return t.index>e.parent.options.actualFrozenColumns-1&&!t.isFrozen}))).filter((function(e){return e.visible}));this.isLeftCursorDragging?(this.visibleLtoROrderedColumns=[].concat(this.visibleFrozenColumns,this.visibleFrozenLeftColumns,r,n),this.domLtoROrderedColumns=[].concat(o,i,a,s),this.widthCollection=this.pushColumnWidth(this.visibleLtoROrderedColumns,this.widthCollection)):(this.visibleRtoLOrderedColumns=[].concat(n.reverse(),r.reverse(),this.visibleFrozenLeftColumns.reverse(),this.visibleFrozenColumns.reverse()),this.domRtoLOrderedColumns=[].concat(s.reverse(),a.reverse(),i.reverse(),o.reverse()),this.widthCollection=this.pushColumnWidth(this.visibleRtoLOrderedColumns,this.widthCollection))}else{var a;r=(a=t.filter((function(e){return!e.isFrozen}))).filter((function(e){return e.visible}));this.isLeftCursorDragging?(this.domLtoROrderedColumns=[].concat(i,a,s),this.visibleLtoROrderedColumns=[].concat(this.visibleFrozenLeftColumns,r,n),this.widthCollection=this.pushColumnWidth(this.visibleLtoROrderedColumns,this.widthCollection)):(this.domRtoLOrderedColumns=[].concat(s.reverse(),a.reverse(),i.reverse()),this.visibleRtoLOrderedColumns=[].concat(n.reverse(),r.reverse(),this.visibleFrozenLeftColumns.reverse()),this.widthCollection=this.pushColumnWidth(this.visibleRtoLOrderedColumns,this.widthCollection))}},e.prototype.updateBorder=function(){var e;if(-1==this.currentBorderIndex)if(sf.base.isNullOrUndefined(r(this.currentCursorElement,"e-rowcell")))if(sf.base.isNullOrUndefined(r(this.currentCursorElement,"e-filterbarcell")))this.currentBorderIndex=Number(r(this.currentCursorElement,"e-headercell").getAttribute(Q));else{var t=r(this.currentCursorElement,"e-filterbarcell").getAttribute("e-mappinguid"),i=this.parent.getHeaderContent().querySelectorAll("[e-mappinguid="+t+"]")[0].parentElement;this.currentBorderIndex=Number(i.getAttribute(Q))}else this.currentBorderIndex=Number(r(this.currentCursorElement,"e-rowcell").getAttribute(Q));var s=this.isLeftCursorDragging?this.convertWidthToNumber(this.helperElement.style.left):-this.calcPos(this.helperElement).right;if(s<this.widthCollection[0]/2)e=0,this.frozenDefaultBorderClass=this.isLeftCursorDragging?"e-frozen-left-border":"e-frozen-right-border";else if(s>this.widthCollection[0]/2&&s<this.widthCollection[0])e=0,this.frozenDefaultBorderClass=this.isLeftCursorDragging?"e-frozen-right-border":"e-frozen-left-border";else{this.frozenDefaultBorderClass="default";for(var n=0;n<this.widthCollection.length&&n+1!=this.widthCollection.length;n++)if(s>this.widthCollection[n]&&s<this.widthCollection[n+1]){var o=(this.widthCollection[n+1]-this.widthCollection[n])/2;e=s<this.widthCollection[n]+o?n:n+1;break}}if(!sf.base.isNullOrUndefined(e)&&this.currentBorderIndex!=e||"default"!=this.frozenDefaultBorderClass&&e==this.currentBorderIndex){this.addOrRemoveClasses("remove"),this.currentBorderIndex=e;var a=this.isLeftCursorDragging?this.visibleLtoROrderedColumns[this.currentBorderIndex].uid:this.visibleRtoLOrderedColumns[this.currentBorderIndex].uid,l=this.parent.getHeaderContent().querySelectorAll("[e-mappinguid="+a+"]");if(l.length)for(n=0;n<l.length;n++)l[n].classList.contains("e-headercelldiv")&&(this.borderHeaderCell=l[n].parentElement);if(this.parent.getHeaderContent().querySelector(".e-filterbar")){var h=this.parent.getHeaderContent().querySelectorAll(".e-filterbarcell");for(n=0;n<h.length;n++)h[n].getAttribute("e-mappinguid")==a&&(this.filterBarCell=h[n])}this.originalBorderIndex=Number(this.borderHeaderCell.getAttribute(Q)),this.borderCells=this.parent.getContent().querySelectorAll("["+Q+'="'+this.originalBorderIndex+'"]'),this.addOrRemoveClasses("add")}},e.prototype.addOrRemoveClasses=function(e){var t=this.isLeftCursorDragging?"e-frozen-right-border":"e-frozen-left-border";sf.base.isNullOrUndefined(this.borderCells)||("add"==e?(t="default"==this.frozenDefaultBorderClass?t:this.frozenDefaultBorderClass,sf.base.addClass(this.borderCells,t),this.borderHeaderCell.classList.add(t),sf.base.isNullOrUndefined(this.filterBarCell)||this.filterBarCell.classList.add(t)):"default"!=this.frozenDefaultBorderClass?(sf.base.removeClass(this.borderCells,["e-frozen-left-border","e-frozen-right-border"]),this.borderHeaderCell.classList.remove("e-frozen-right-border"),this.borderHeaderCell.classList.remove("e-frozen-left-border"),sf.base.isNullOrUndefined(this.filterBarCell)||(this.filterBarCell.classList.remove("e-frozen-right-border"),this.filterBarCell.classList.remove("e-frozen-left-border"))):(sf.base.removeClass(this.borderCells,t),this.borderHeaderCell.classList.remove(t),sf.base.isNullOrUndefined(this.filterBarCell)||this.filterBarCell.classList.remove(t)))},e.prototype.convertWidthToNumber=function(e){return Number(e.toString().replace("px",""))},e.prototype.pushColumnWidth=function(e,t){for(var i=0,s=0;s<e.length;s++){var n=this.convertWidthToNumber(e[s].width);t.push(i+n),i=t[t.length-1]}return t},e.prototype.scrollHorizontally=function(){if(0!=this.parent.options.frozenColumns){var e=this.parent.getContent().querySelector(".e-movablecontent");if(e.scrollWidth>e.clientWidth){var t=this.parent.element.querySelector(".e-movablescrollbar"),i=this.parent.element.querySelector(".e-movablechild");e.scrollLeft=this.isLeftCursorDragging?0:i.scrollWidth-t.offsetWidth}}},e.prototype.updateHelper=function(e){var t=this.getCurrentScreenX(e),i=this.calcPos(this.currentCursorElement).left,s=t-(this.parent.element.getBoundingClientRect().left+i),o=this.parent.getContent().offsetWidth,r=i+s,a=this.parent.getContent().querySelector(".e-movablecontent");if(a||(a=this.parent.getContent()),this.isLeftCursorDragging){var l=this.calcPos(a).right;r=r>o+l?o+l-1:r}else{var h=this.calcPos(a).left;r=(r=r<h?h+1:r)>o-n()?o-n()-1:r}this.helperElement.style.left=r+"px"},e.prototype.getCurrentScreenX=function(e){return e.touches&&e.touches.length?e.touches[0].screenX:e.screenX},e.prototype.dragEnd=function(e){if(this.helperElement){sf.base.EventHandler.remove(this.parent.element,sf.base.Browser.touchMoveEvent,this.freezeLineDragging),sf.base.EventHandler.remove(document,sf.base.Browser.touchEndEvent,this.dragEnd);var t=this.getServerParams(),i=this.parent.options.actualFrozenColumns;if(this.parent.options.actualFrozenColumns>0&&!t.isFrozen)for(var s=0;s<t.frozenColumnsUidCollection.length;s++)for(var n=0;n<this.visibleFrozenColumns.length;n++)this.visibleFrozenColumns[n].uid==t.frozenColumnsUidCollection[s]&&i--;var o=!!(this.currentCursorElement.classList.contains("e-frozen-default-cursor")||this.isLeftCursorDragging&&"e-frozen-left-border"==this.frozenDefaultBorderClass||!this.isLeftCursorDragging&&"e-frozen-right-border"==this.frozenDefaultBorderClass);sf.base.detach(this.helperElement),this.setDefaultValue(),this.checkForServerCall(t.isFrozen,t.frozenColumnsUidCollection,t.endIndex,t.freezeDirection,t.freezeLineMovingDirection)&&this.parent.dotNetRef.invokeMethodAsync("InvokeFreezeLineMoved",{frozenColumnsUidCollection:t.frozenColumnsUidCollection,freezeDirection:t.freezeDirection,freezeLineMovingDirection:t.freezeLineMovingDirection,isFrozen:t.isFrozen,fromIndex:t.startIndex,toIndex:t.endIndex,frozenColumnsCount:i,hasGridStructureChanges:o})}},e.prototype.getServerParams=function(){var e,t,i,s=[],n=-1,o=-1;if(!sf.base.isNullOrUndefined(this.borderCells)){var a=this.convertWidthToNumber(this.helperElement.style.left),l=this.calcPos(this.currentCursorElement).left,h=sf.base.closest(this.currentCursorElement,q);if(sf.base.isNullOrUndefined(h)&&(h=sf.base.closest(this.currentCursorElement,F),sf.base.isNullOrUndefined(h))){var d=r(this.currentCursorElement,"e-filterbarcell").getAttribute("e-mappinguid");h=this.parent.getHeaderContent().querySelectorAll("[e-mappinguid="+d+"]")[0].parentElement}if(n=Number(h.getAttribute(Q)),o=Number(this.borderCells[0].getAttribute(Q)),this.isLeftCursorDragging)if(e="Left",a>l){t=!0,i="Right";for(var c=0==this.parent.options.frozenColumns||0==this.parent.options.actualFrozenColumns&&0==this.visibleFrozenLeftColumns.length?0:n+1,p=this.currentCursorElement.classList.contains("e-frozen-default-cursor")&&"e-frozen-left-border"==this.frozenDefaultBorderClass?-1:o,u=c;u<=p;u++)this.domLtoROrderedColumns[u].visible&&s.push(this.domLtoROrderedColumns[u].uid)}else if(t=!1,i="Left","e-frozen-left-border"!=this.frozenDefaultBorderClass)for(u=n;u>o;u--)this.domLtoROrderedColumns[u].visible&&s.push(this.domLtoROrderedColumns[u].uid);else for(u=n;-1!=u;u--)this.domLtoROrderedColumns[u].visible&&s.push(this.domLtoROrderedColumns[u].uid);else{var f=this.domRtoLOrderedColumns.reverse();if(a<l){if(t=!0,e="Right",i="Left","e-frozen-right-border"!=this.frozenDefaultBorderClass){n=this.currentCursorElement.classList.contains("e-frozen-default-cursor")?n+1:n;for(u=o;u<n;u++)f[u].visible&&s.push(f[u].uid)}}else if(t=!1,e="Left",i="Right","e-frozen-right-border"==this.frozenDefaultBorderClass)for(u=n;u<=o;u++)f[u].visible&&s.push(f[u].uid);else for(u=n;u<o;u++)f[u].visible&&s.push(f[u].uid)}}return{startIndex:n,endIndex:o,freezeDirection:e,isFrozen:t,freezeLineMovingDirection:i,frozenColumnsUidCollection:s}},e.prototype.checkForServerCall=function(e,t,i,s,n){var o=!0,r=this.parent.columnModel.slice(0,this.parent.options.actualFrozenColumns);if(r=(r=r.filter((function(e){return e.visible}))).concat(this.parent.columnModel.filter((function(e){return e.isFrozen&&e.visible}))),e)for(var a=0;a<this.parent.columnModel.length;a++)for(var l=0;l<t.length;l++)t[l]==this.parent.columnModel[a].uid&&r.push(this.parent.columnModel[a]);for(var h=0,d=0;d<r.length;d++)h+=+r[d].width;if(this.parent.element.offsetWidth<=h&&(o=!1),!sf.base.isNullOrUndefined(this.parent.getContent().querySelector(".e-movablecontent"))){var c=this.parent.getMovableDataRows()[0].getElementsByTagName("td"),p=this.parent.getFrozenDataRows()[0].getElementsByTagName("td"),u=i.toString();("Right"==n&&c[c.length-1].getAttribute("data-colindex")==u||"Left"==n&&c[0].getAttribute("data-colindex")==u||p[0].getAttribute("data-colindex")==u&&"Right"==s&&"Left"==n)&&(o=!1)}return o},e}(),G=function(){function i(t,i,s,n){var o=this;if(this.columnModel=[],this.frozenColumnModel=[],window.sfBlazor=window.sfBlazor,this.editedCellIndex=null,this.firstFocusableTemplateElement=null,this.lastFocusableTemplateElement=null,this.inViewIndexes=[],this.isRendered=!1,this.isGridFirstRender=!1,this.nColumnOffsets=[],this.tapEvent=function(t){if(this.resizeModule.getUserAgent())if(e.timer){clearTimeout(e.timer),e.timer=null;var i=document.createEvent("MouseEvents");i.initEvent("dblclick",!0,!0),t.target.dispatchEvent(i)}else e.timer=setTimeout((function(){e.timer=null}),300)},this.element=i,!sf.base.isNullOrUndefined(this.element)){if(this.dotNetRef=n,this.dataId=t,this.options=s,this.header=this.element.querySelector(".e-headercontent"),this.content=this.element.querySelector(".e-gridcontent .e-content"),this.footer=this.element.querySelector(".e-summarycontent"),this.element.offsetWidth<=0)var r=setInterval((function(){o.element.offsetWidth>0&&(o.initModules(),clearInterval(r))}),500);else this.initModules();this.addScrollEvents(!0),sf.base.isNullOrUndefined(this.element)||(this.element.blazor__instance=this,window.sfBlazor.setCompInstance(this))}}return i.prototype.initModules=function(){this.scrollModule=new g(this),this.freezeModule=new m(this),this.headerDragDrop=new b(this),this.contentDragDrop=new y(this),this.reorderModule=new M(this),this.groupModule=new I(this),this.resizeModule=new E(this),this.frozenDragDropModule=new X(this),this.editModule=new A(this),this.columnChooserModule=new D(this),this.clipboardModule=new z(this),this.columnMenuModule=new T(this),this.filterModule=new j(this),this.virtualContentModule=new U(this),this.virtualHeaderModule=new R(this),this.toolTipModule=new L(this),this.rowDragAndDropModule=new k(this),this.selectionModule=new P(this),this.widthService=new v(this),this.isRendered=this.options.isPrerendered,this.keyModule=new sf.base.KeyboardEvents(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:K,eventName:"keydown"}),this.options.enableColumnVirtualization&&this.virtualHeaderModule.renderTable(),this.options.enableVirtualization&&this.virtualContentModule.renderTable(),this.options.allowResizing&&this.resizeModule.render(),this.options.isFreezeLineMoved&&this.freezeLineMovedAction(),this.options.needClientAction?this.clientActions():this.contentReady(),this.lastRowBorderCheck(),this.wireEvents(),this.options.enableColumnVirtualization||this.updateColumnWidth(this.options.columns)},i.prototype.getHeaderContent=function(){return this.header},i.prototype.getHeaderTable=function(){return this.header.querySelector(".e-table")},i.prototype.getContent=function(){return this.content},i.prototype.getContentTable=function(){return this.content.querySelector(".e-table")},i.prototype.getFooterContent=function(){return this.footer},i.prototype.getColumns=function(e,t){void 0===e&&(e=!1),this.columnModel=[];var i=this.options.enableColumnVirtualization&&e?this.options.virtualizedColumns:e&&this.options.frozenColumns>0?this.getOrderedFrozenColumns():this.options.columns;return this.updateColumnModel(i),this.columnModel},i.prototype.getOrderedFrozenColumns=function(){var e=[],t=this.getColumns();return t.filter((function(e){return e.isFrozen&&"Left"===e.freeze})).map((function(t){return e.push(t)})),t.filter((function(e){return!e.isFrozen})).map((function(t){return e.push(t)})),t.filter((function(e){return e.isFrozen&&"Right"===e.freeze})).map((function(t){return e.push(t)})),e},i.prototype.autofitFrozenColumns=function(e){var t=[],i=this.getColumns();i.filter((function(t){return(e||t.autoFit)&&t.isFrozen&&"Left"===t.freeze})).map((function(e){return t.push(e.field||e.uid)})),i.filter((function(t){return(e||t.autoFit)&&!t.isFrozen})).map((function(e){return t.push(e.field||e.uid)})),i.filter((function(t){return(e||t.autoFit)&&t.isFrozen&&"Right"===t.freeze})).map((function(e){return t.push(e.field||e.uid)}));return t},i.prototype.freezeLineMovedAction=function(){this.options.isFreezeLineMoved=!1;var e=this.getContent().querySelector(".e-movablecontent");(sf.base.isNullOrUndefined(e)&&(e=this.getContent()),""!=e.querySelector("table").style.width)&&(0==this.options.frozenLeftColumnsCount&&0==this.options.frozenRightColumnsCount||this.updateColumnLevelFrozen(),new v(this).setWidthToTable());e.scrollLeft=0,sf.base.isNullOrUndefined(this.element.querySelector(".e-movablescrollbar"))||(this.element.querySelector(".e-movablescrollbar").scrollLeft=0)},i.prototype.addScrollEvents=function(e){if(this.options.showColumnMenu){for(var t=sf.popups.getScrollableParent(this.element),i=0;i<t.length;i++)t[i]instanceof HTMLElement&&(e?sf.base.EventHandler.add(t[i],"scroll",this.scrollHandler,this):sf.base.EventHandler.remove(t[i],"scroll",this.scrollHandler));e?sf.base.EventHandler.add(this.content,"scroll",this.scrollHandler,this):sf.base.EventHandler.remove(this.content,"scroll",this.scrollHandler)}},i.prototype.scrollHandler=function(e){if(!sf.base.isNullOrUndefined(this.element)&&!sf.base.isNullOrUndefined(this.element.blazor__instance))return this.columnMenuModule.setPosition()},i.prototype.updateColumnLevelFrozen=function(){var e=this.columnModel;this.options.enableColumnVirtualization&&(e=e.filter((function(e){return e.visible})));var t=[],i=[],s=[];if(0!=this.options.frozenRightCount||0!=this.options.frozenLeftCount||0!=this.options.frozenColumns){for(var n=0,o=e.length;n<o;n++){var r=e[n];"Left"===r.freeze&&r.isFrozen||r.index<this.options.frozenColumns?t.push(r):"Right"===r.freeze&&r.isFrozen?i.push(r):s.push(r)}this.frozenColumnModel=t.concat(s).concat(i)}},i.prototype.updateColumnModel=function(e){if(!sf.base.isNullOrUndefined(e))for(var t=0,i=e.length;t<i;t++)null!=e[t].columns&&e[t].columns.length>0?this.updateColumnModel(e[t].columns):this.columnModel.push(e[t])},i.prototype.updateColumnWidth=function(e){this.nColumnOffsets=[];var t=0;if(!this.options.enableColumnVirtualization)for(var i=0,s=e.length;i<s;i++)t=parseInt(t.toString())+(e[i].visible?parseInt(e[i].width):0),this.nColumnOffsets.push(t)},i.prototype.getColumnByIndex=function(e,t){var i;return void 0===t&&(t=!1),this.getColumns(t).some((function(t,s){return i=t,s===e})),i},i.prototype.getDataRows=function(){if(sf.base.isNullOrUndefined(this.getContentTable().querySelector("tbody")))return[];var e=[].slice.call(this.getContentTable().querySelector("tbody").children);if(this.options.frozenRows){var t=[].slice.call(this.getHeaderTable().querySelector("tbody").children);e=this.addMovableRows(t,e)}return this.generateDataRows(e)},i.prototype.addMovableRows=function(e,t){for(var i=0,s=t.length;i<s;i++)e.push(t[i]);return e},i.prototype.generateDataRows=function(e){for(var t=[],i=0,s=e.length;i<s;i++)e[i].classList.contains("e-row")&&!e[i].classList.contains("e-hiddenrow")&&t.push(e[i]);return t},i.prototype.getMovableDataRows=function(){var e=[].slice.call(this.getContent().querySelector(".e-movablecontent").querySelector("tbody").children);if(this.options.frozenRows){var t=[].slice.call(this.getHeaderContent().querySelector(".e-movableheader").querySelector("tbody").children);e=this.addMovableRows(t,e)}return this.generateDataRows(e)},i.prototype.getFrozenDataRows=function(){var e=[].slice.call(this.getContent().querySelector(".e-frozencontent").querySelector("tbody").children);if(this.options.frozenRows){var t=[].slice.call(this.getHeaderContent().querySelector(".e-frozenheader").querySelector("tbody").children);e=this.addMovableRows(t,e)}return this.generateDataRows(e)},i.prototype.getFrozenRightDataRows=function(){var e=[].slice.call(this.getContent().querySelector(".e-frozen-right-content").querySelector("tbody").children);if(this.options.frozenRows){var t=[].slice.call(this.getHeaderContent().querySelector(".e-frozenheader").querySelector("tbody").children);e=this.addMovableRows(t,e)}return this.generateDataRows(e)},i.prototype.getRowByIndex=function(e){return this.getDataRows()[e]},i.prototype.getCellFromIndex=function(e,t){var i=this.options.frozenColumns;return i&&t>=i?this.getMovableDataRows()[e]&&this.getMovableDataRows()[e].querySelectorAll(".e-rowcell")[t-i]:this.getDataRows()[e]&&this.getDataRows()[e].querySelectorAll(".e-rowcell")[t]},i.prototype.isMovableGrid=function(e,t){var i=this.getColumns(t);if(this.options.actualFrozenColumns>0)return e>=this.options.actualFrozenColumns;var s=[];return i.forEach((function(e){e.isFrozen&&s.push(e.index)})),-1==s.indexOf(e)},i.prototype.getColumnHeaderByIndex=function(e){return this.getHeaderTable().querySelectorAll(".e-headercell")[e]},i.prototype.getRows=function(){return this.options.frozenColumns?this.getFrozenDataRows():[].slice.call(this.getContentTable().querySelectorAll("tr.e-row[data-uid]"))},i.prototype.getSelectedRows=function(){return this.getRows().filter((function(e){return"true"===e.getAttribute("aria-selected")}))},i.prototype.getSelectedRowIndexes=function(e){for(var t=[],i=this.getRows(),s=0;s<i.length;s++)if(i[s].hasAttribute("aria-selected")&&"true"===i[s].getAttribute("aria-selected")){var n=this.options.allowDragSelection&&this.options.enableVirtualization||e?parseInt(i[s].getAttribute("data-rowindex"),10):s;t.push(n)}return t},i.prototype.getVisibleColumns=function(){for(var e=[],t=0,i=this.columnModel;t<i.length;t++){var s=i[t];s.visible&&e.push(s)}return e},i.prototype.getColumnByField=function(e){return d(this.getColumns(),(function(t,i){if(t.field===e)return t}))[0]},i.prototype.getColumnIndexByField=function(e,t){void 0===t&&(t=!1);for(var i=this.getColumns(t),s=0;s<i.length;s++)if(i[s].field===e)return s;return-1},i.prototype.getColumnByUid=function(e){return d(this.getColumns().concat(this.getStackedColumns(this.options.columns)),(function(t,i){if(t.uid===e)return t}))[0]},i.prototype.getStackedColumns=function(e,t){void 0===t&&(t=[]);for(var i=0,s=e;i<s.length;i++){var n=s[i];n.columns&&(t.push(n),this.getStackedColumns(n.columns,t))}return t},i.prototype.getColumnIndexByUid=function(e,t){void 0===t&&(t=!1);var i=d(this.getColumns(t),(function(t,i){if(t.uid===e)return i}))[0];return sf.base.isNullOrUndefined(i)?-1:i},i.prototype.getColumnHeaderByUid=function(e){return this.getHeaderContent().querySelector("[e-mappinguid="+e+"]").parentElement},i.prototype.getUidByColumnField=function(e,t){return void 0===t&&(t=!1),d(this.getColumns(t),(function(t,i){if(t.field===e)return t.uid}))[0]},i.prototype.getStackedHeaderColumnByHeaderText=function(e,t){for(var i=0;i<t.length;i++){var s=t[i];if(s.field===e||s.headerText===e){this.stackedColumn=s;break}s.columns&&this.getStackedHeaderColumnByHeaderText(e,s.columns)}return this.stackedColumn},i.prototype.getNormalizedColumnIndex=function(e,t){return void 0===t&&(t=!1),this.getColumnIndexByUid(e,t)+this.getIndentCount()},i.prototype.getIndentCount=function(){var e=0;return this.options.allowGrouping&&(e+=this.options.groupCount),this.options.hasDetailTemplate&&e++,this.options.allowRowDragAndDrop&&!this.options.hasDropTarget&&e++,e},i.prototype.isPercentageWidth=function(){for(var e=this.getVisibleColumns(),t=0,i=0,s=0;s<e.length;s++)sf.base.isNullOrUndefined(e[s].width)?i++:-1!==e[s].width.toString().indexOf("%")&&t++;return t===e.length&&!i},i.prototype.recalcIndentWidth=function(){if(this.isRendered&&this.getHeaderTable().querySelector(".e-emptycell")&&(this.options.groupCount||this.options.hasDetailTemplate||!this.options.allowRowDragAndDrop||!this.options.hasDropTarget)&&this.getContentTable()&&!this.getHeaderTable().querySelector(".e-emptycell").getAttribute("indentRefreshed")){var e=this.getHeaderTable().querySelector(".e-emptycell").parentElement.offsetWidth,t=e/30;if(t>=1&&(e=30/t),this.getHeaderTable().querySelector(".e-emptycell").setAttribute("indentRefreshed","true"),this.isPercentageWidth()){var i=e/30;i>=1&&(e=(e=30/i)>5?3.5:e),this.dotNetRef.invokeMethodAsync("SetIndentWidth",e+"%")}else this.dotNetRef.invokeMethodAsync("SetIndentWidth",e+"px")}},i.prototype.resetColumnWidth=function(){if(("auto"===this.options.width||"string"==typeof this.options.width)&&this.getColumns().filter((function(e){return(!e.width||"auto"===e.width)&&e.minWidth})).length>0){var e=this.widthService.getTableWidth(this.getColumns());this.widthService.setMinwidthBycalculation(e)}},i.prototype.contentReady=function(e){void 0===e&&(e=null);var t=document.getElementsByTagName("main")[0];(!sf.base.isNullOrUndefined(t)&&t.parentElement.classList.contains("page")&&(this.element.style.width,1)&&(t.style.width="100%"),this.getColumns().some((function(e){return e.autoFit}))&&this.resizeModule.autoFit(),this.options.allowResizing&&this.isGridFirstRender&&this.options.isColumnResized)&&(new v(this).setWidthToTable(),this.isGridFirstRender=!1);!this.isGridFirstRender&&this.options.frozenColumns&&this.options.enablePersistence&&new v(this).setWidthToTable();this.options.isColumnReordered&&!sf.base.isNullOrUndefined(this.getContent().querySelector(".e-movablecontent"))&&""!=this.getContent().querySelector(".e-movablecontent").querySelector("table").style.width&&new v(this).setWidthToTable();if(this.options.frozenColumns){if(this.freezeModule.refreshRowHeight(),this.freezeModule.setFrozenHeight(),0!=this.options.aggregatesCount){for(var i=this.element.querySelectorAll(".e-summaryrow"),s=0,n=0;n<i.length;n++)if(i[n].querySelectorAll(".e-templatecell").length>0){s=i[n].offsetHeight;break}for(n=0;n<i.length;n++)i[n].style.height=s+"px"}this.freezeModule.refreshStackedHdrHgt()}if(this.options.enableVirtualization&&this.virtualContentModule.onDataReady(),this.recalcIndentWidth(),this.resetColumnWidth(),this.lastRowBorderCheck(),"Paging"===e&&(r(document.activeElement,"e-grid")||this.element.focus()),this.options.enableStickyHeader){this.scrollModule.addStickyListener(!0);var o=this.element.querySelector(".e-groupdroparea");!sf.base.isNullOrUndefined(o)&&o.classList.contains("e-sticky")&&""===o.style.top&&o.classList.remove("e-sticky")}sf.base.isNullOrUndefined(this.toolTipModule.toolTipElement)||this.toolTipModule.close()},i.prototype.lastRowBorderCheck=function(){this.options.enableVirtualization||this.getContent().querySelector(".e-table").scrollHeight<this.getContent().clientHeight&&this.dotNetRef.invokeMethodAsync("LastRowBorder",!0)},i.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"mousedown",this.mouseDownHandler,this),sf.base.EventHandler.add(this.element,"focus",this.gridFocus,this),sf.base.EventHandler.add(document,"click",this.documentClickHandler,this),sf.base.EventHandler.add(this.element,"keydown",this.gridKeyDownHandler,this),sf.base.EventHandler.add(this.element,"keydown",this.keyDownHandler,this),sf.base.EventHandler.add(document.body,"keydown",this.documentKeyHandler,this),sf.base.EventHandler.add(this.getContent(),"touchstart",this.tapEvent,this),sf.base.EventHandler.add(window,"resize",this.windowResized,this),sf.base.EventHandler.add(this.element,"contextmenu",this.mouseDownHandler,this),this.options.allowEditing&&sf.base.EventHandler.add(this.element,"dblclick",this.doubleClickHandler,this)},i.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,"mousedown",this.mouseDownHandler),sf.base.EventHandler.remove(this.element,"focus",this.gridFocus),sf.base.EventHandler.remove(document,"click",this.documentClickHandler),sf.base.EventHandler.remove(this.element,"keydown",this.gridKeyDownHandler),sf.base.EventHandler.remove(this.element,"keydown",this.keyDownHandler),sf.base.EventHandler.remove(document.body,"keydown",this.documentKeyHandler),sf.base.EventHandler.remove(this.element,"dblclick",this.doubleClickHandler),sf.base.EventHandler.remove(this.getContent(),"touchstart",this.tapEvent),sf.base.EventHandler.remove(window,"resize",this.windowResized),sf.base.EventHandler.remove(this.element,"contextmenu",this.mouseDownHandler)},i.prototype.windowResized=function(){var e=this;setTimeout((function(){var t=e.element.querySelector(".e-content.e-yscroll");e.options.frozenColumns&&(e.options.width,1)&&(e.freezeModule.setFrozenHeight(),e.options.allowTextWrap&&e.freezeModule.refreshRowHeight()),!sf.base.isNullOrUndefined(t)&&t.scrollHeight>t.clientHeight?e.element.querySelector(".e-gridheader").style.paddingRight=n()-e.scrollModule.getThreshold()+"px":e.scrollModule.setPadding()}),100)},i.prototype.doubleClickHandler=function(e){"TD"==e.target.tagName&&e.target.blur(),this.toolTipModule.close()},i.prototype.setOptions=function(e,t){var i=sf.base.extend(t,{});if(this.options=e,!i.allowResizing&&e.allowResizing&&this.resizeModule.render(),(!i.allowGrouping&&e.allowGrouping||!i.allowReordering&&e.allowReordering||e.showDropArea)&&(this.headerDragDrop.initializeHeaderDrag(),this.headerDragDrop.initializeHeaderDrop(),this.groupModule.initializeGHeaderDrag(),this.groupModule.initializeGHeaderDrop()),!i.allowGrouping&&e.allowGrouping&&this.contentDragDrop.initializeContentDrop(),!i.allowRowDragAndDrop&&e.allowRowDragAndDrop?this.rowDragAndDropModule.initializeDrag():i.allowRowDragAndDrop&&!e.allowRowDragAndDrop&&this.rowDragAndDropModule.destroy(),this.isRendered||(this.isRendered=this.options.isPrerendered),i.groupCount!=e.groupCount){var s=this.getHeaderTable().querySelector(".e-emptycell");if(!s)return;s.removeAttribute("indentRefreshed")}},i.prototype.documentClickHandler=function(e){var t=r(e.target,"e-cc-toolbar"),i=r(e.target,"e-gridform"),s=r(e.target,"e-toolbar-item"),n=r(e.target,"e-rowcell");if(this.virtualContentModule.selectedCellNavigation=-1,r(e.target,"e-inline-edit")){var o=r(e.target,"e-rowcell");this.editedCellIndex=o.cellIndex}else sf.base.isNullOrUndefined(r(e.target,"e-popup-open"))&&(this.editedCellIndex=null);this.options.enableAdaptiveUI||this.targetIsFilterDialog(e)||e.target.classList.contains("e-cc-cancel")||e.target.classList.contains("e-choosercheck")||e.target.classList.contains("e-icon-filter")||t||!this.element.querySelectorAll(".e-filter-popup.e-popup-open").length&&!this.element.querySelectorAll(".e-ccdlg.e-popup-open").length||(null!=this.element.querySelector(".e-datetimepicker")&&this.element.querySelector(".e-datetimepicker").blur(),this.dotNetRef.invokeMethodAsync("FilterPopupClose")),!sf.base.isNullOrUndefined(i)||n||s||this.targetIsFilterDialog(e)||!this.element.querySelector(".e-gridform")||this.dotNetRef.invokeMethodAsync("UpdateChanges"),sf.base.Browser.isDevice||this.toolTipModule.close()},i.prototype.targetIsFilterDialog=function(e){var t=r(r(e.target,"e-filter-popup"),"e-popup-open"),i=r(r(e.target,"e-ddl"),"e-popup-open"),s=r(r(e.target,"e-selectall"),"e-ftrchk"),n=r(e.target,"e-chkcancel-icon"),o=r(e.target,"e-datepicker"),a=r(e.target,"e-timepicker"),l=r(e.target,"e-daterangepicker")||r(e.target,"e-zoomin"),h=e.target.classList.contains("e-check")||e.target.classList.contains("e-uncheck"),d=r(r(e.target,"e-ccdlg"),"e-popup-open");return!!(t||i||s||n||o||a||l||h||d)},i.prototype.documentKeyHandler=function(e){if(e.altKey&&74===e.keyCode&&!sf.base.isNullOrUndefined(this.element)&&(this.element.focus(),this.dotNetRef.invokeMethodAsync("GridFocus",e)),e.altKey&&87===e.keyCode&&!sf.base.isNullOrUndefined(this.element)){var t=!sf.base.isNullOrUndefined(r(e.target,"e-pager"));this.dotNetRef.invokeMethodAsync("GridKeyDown",{key:e.key,code:e.code,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey},!1,t,this.editedCellIndex)}},i.prototype.iterateTemplateElementsForward=function(e){for(var t=0;t<e.length;t++){var i=e[t];if(0==i.tabIndex){this.firstFocusableTemplateElement=i;break}if(!sf.base.isNullOrUndefined(i.children)&&0!=i.children.length){this.iterateTemplateElementsForward(i.children);break}}return this.firstFocusableTemplateElement},i.prototype.iterateTemplateElementsBackward=function(e){for(var t=e.length-1;t>=0;t--){var i=e[t];if(0==i.tabIndex){this.lastFocusableTemplateElement=i;break}if(!sf.base.isNullOrUndefined(i.children)&&0!=i.children.length){this.iterateTemplateElementsBackward(i.children);break}}return this.lastFocusableTemplateElement},i.prototype.keyDownHandler=function(e){var t,i,s=r(e.target,"e-grid"),n=e.target.tagName,o=!sf.base.isNullOrUndefined(r(e.target,"e-pager")),a=!1,l=!1;if(!(s&&s.id!==this.element.id||"Shift"==e.key||"Control"==e.key||"Alt"==e.key)&&("INPUT"!=n&&"TEXTAREA"!=n||"Delete"!=e.code)){if(!sf.base.isNullOrUndefined(s.querySelector(".e-templatecell"))&&!sf.base.isNullOrUndefined(r(e.target,"e-templatecell"))){var h=r(e.target,"e-rowcell");t=h.cellIndex,i=Number(r(e.target,"e-row").getAttribute("data-rowIndex"));var d=h.firstElementChild.children,c=this.iterateTemplateElementsForward(d),p=this.iterateTemplateElementsBackward(d),u=!e.shiftKey&&"Tab"==e.code,f=e.shiftKey&&"Tab"==e.code,g="Escape"==e.code;(e.target==c&&f||e.target==p&&u||g||null==c&&null==p&&!e.target.classList.contains("e-templatecell")&&(u||f))&&(l=!0)}e.target.classList.contains("e-searchinput")&&"Enter"==e.key&&(a=!0);var m=this.isPopUpOpened(e);!m||"Escape"!=e.key&&"Enter"!=e.key||"BODY"!=document.activeElement.tagName||e.target.focus(),"Escape"==e.key&&m&&"true"===e.target.getAttribute("aria-expanded")||(sf.base.isNullOrUndefined(r(e.target,"e-rowcell"))||(this.editedCellIndex=r(e.target,"e-rowcell").cellIndex==this.editedCellIndex?this.editedCellIndex:null),this.dotNetRef.invokeMethodAsync("GridKeyDown",{key:e.key,code:e.code,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey},a,o,this.editedCellIndex,i,t,l))}},i.prototype.isPopUpOpened=function(e){var t=e.target.classList.contains("e-datepicker"),i=e.target.classList.contains("e-datetimepicker"),s=e.target.classList.contains("e-timepicker"),n=e.target.classList.contains("e-daterangepicker"),o=e.target.classList.contains("e-multiselect"),r=e.target.classList.contains("e-ddl"),a=e.target.classList.contains("e-autocomplete"),l=e.target.classList.contains("e-combobox");return t||i||s||n||o||r||a||l},i.prototype.gridKeyDownHandler=function(e){var t=r(e.target,"e-filter-popup"),i=e.target.tagName;(this.toolTipModule.close(),!sf.base.isNullOrUndefined(t)&&t.classList.contains("e-popup-open")&&"Escape"!=e.key)&&(e.stopPropagation(),"Tab"!=e.key&&"shiftTab"!=e.key&&"Enter"!=e.key&&"shiftEnter"!=e.key||"INPUT"!=i&&"TEXTAREA"!=i||((c=document.createEvent("HTMLEvents")).initEvent("change",!1,!0),e.target.dispatchEvent(c)));var s=!1;if(this.options.hasTemplateInEditSettings&&r(e.target,"e-normaledit")){var n=this.element.querySelector(".e-normaledit").querySelectorAll("input");if(s=!0,!sf.base.isNullOrUndefined(n)){var o=n[0],a=n[n.length-1],l=e.shiftKey&&"Tab"===e.key,h=!e.shiftKey&&"Tab"===e.key;(document.activeElement===o&&l||document.activeElement===a&&h)&&(s=!1)}}(("Tab"==e.key||"Escape"==e.key||"shiftTab"==e.key||"Enter"==e.key||"shiftEnter"==e.key)&&("INPUT"==i||"TEXTAREA"==i||e.target.classList.contains("e-datepicker")||e.target.classList.contains("e-datetimepicker"))||e.target.classList.contains("e-rowcell")&&"F2"==e.key)&&("Tab"==e.key&&(e.target.classList.contains("e-datepicker")||e.target.classList.contains("e-datetimepicker"))||e.target.blur()),"Shift"!=e.key&&"Control"!=e.key&&"Alt"!=e.key||e.stopPropagation();var d=/(Mac)/i.test(navigator.platform);67===e.keyCode&&(e.ctrlKey||d&&e.metaKey)?this.clipboardModule.copy():72===e.keyCode&&(e.ctrlKey||d&&e.metaKey)&&e.shiftKey&&this.clipboardModule.copy(!0),86===e.keyCode&&(e.ctrlKey||d&&e.metaKey)&&!this.options.isEdit&&(e.stopPropagation(),this.clipboardModule.pasteHandler());var c,p=this.element.querySelector(".e-normaledit");if(!sf.base.isNullOrUndefined(p)&&"Tab"==e.key){var u=Array.from(p.querySelectorAll(".e-rowcell")).filter((function(e){return!(e.classList.contains("e-hide")||e.querySelector(".e-disabled"))}));if(s)return;(!e.shiftKey&&u[u.length-1]==r(e.target,"e-rowcell")||e.shiftKey&&u[0]==r(e.target,"e-rowcell"))&&(this.dotNetRef.invokeMethodAsync("EndEdit",{key:e.key,code:e.code,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey}),e.preventDefault())}this.element.querySelector(".e-batchrow")&&("Tab"!=e.key&&"shiftTab"!=e.key&&"Enter"!=e.key&&"shiftEnter"!=e.key&&"Escape"!=e.key&&e.stopPropagation(),("Tab"==e.key||"shiftTab"==e.key||"Enter"==e.key||"shiftEnter"==e.key)&&(e.preventDefault(),("INPUT"==i||"TEXTAREA"==i)&&((c=document.createEvent("HTMLEvents")).initEvent("change",!1,!0),e.target.dispatchEvent(c))))},i.prototype.mouseDownHandler=function(e){var t=r(e.target,"e-grid");if(!t||t.id===this.element.id)if((e.shiftKey||e.ctrlKey)&&e.preventDefault(),-1!==e.button&&2!==e.button&&r(e.target,"e-headercell")||2!==e.button&&r(e.target,"e-detailcell")||r(e.target,"e-detailrowexpand")||r(e.target,"e-detailrowcollapse")||e.target.classList.contains("e-content")||e.target.classList.contains("e-headercontent")||sf.base.closest(e.target,".e-groupdroparea")||sf.base.closest(e.target,".e-gridpopup")||sf.base.closest(e.target,".e-summarycell")||sf.base.closest(e.target,".e-rhandler")||sf.base.closest(e.target,".e-filtermenudiv")||sf.base.closest(e.target,".e-filterbarcell")||sf.base.closest(e.target,".e-groupcaption"))this.dotNetRef.invokeMethodAsync("MouseDownHandler",null,null);else{var i=null,s=null,n=r(r(e.target,"e-gridform"),"e-grid");r(e.target,"e-editcell")||n&&n.id==t.id?i="Edit":r(e.target,"e-pager")?i="Pager":r(e.target,"e-headercontent")?(i="Header",s=r(e.target,"e-headercell")?r(e.target,"e-headercell").getAttribute("data-uid"):null):r(e.target,"e-content")&&(i="Content",s=r(e.target,"e-rowcell")?r(e.target,"e-rowcell").getAttribute("data-uid"):null),"Header"!=i&&"Content"!=i&&"Pager"!=i&&"Edit"!=i||this.dotNetRef.invokeMethodAsync("MouseDownHandler",i,s)}},i.prototype.gridFocus=function(e){!sf.base.isNullOrUndefined(this.element.querySelector(".e-gridform"))&&this.element.querySelector(".e-gridform").classList.contains("e-editing")||this.dotNetRef.invokeMethodAsync("GridFocus",e)},i.prototype.keyActionHandler=function(e){var t=this;"pageUp"!==e.action&&"pageDown"!==e.action&&"ctrlAltPageUp"!==e.action&&"ctrlAltPageDown"!==e.action&&"altPageUp"!==e.action&&"altPageDown"!==e.action&&"altDownArrow"!==e.action&&"ctrlPlusP"!==e.action||e.preventDefault();var i=this.isPopUpOpened(e);"enter"===e.action&&!sf.base.isNullOrUndefined(this.element.querySelector(".e-gridform"))&&this.element.querySelector(".e-gridform").classList.contains("e-editing")&&"Batch"!==this.options.editMode&&(i&&"false"===e.target.getAttribute("aria-expanded")||!i)&&setTimeout((function(){e.target.blur(),t.dotNetRef.invokeMethodAsync("EndEdit",{key:e.key,code:e.code,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey})}),40)},i.prototype.destroy=function(e){this.unWireEvents(),this.frozenDragDropModule.unwireEvents(),e&&this.virtualContentModule.removeEventListener(),this.addScrollEvents(!1),this.toolTipModule.destroy(),this.keyModule.destroy(),this.columnChooserModule.removeMediaListener(),this.selectionModule.removeEventListener(),this.rowDragAndDropModule.destroy(),this.headerDragDrop.destroy()},i.prototype.getColumnIndexesInView=function(){return this.inViewIndexes},i.prototype.setColumnIndexesInView=function(e){this.inViewIndexes=e},i.prototype.getRowHeight=function(){return this.options.rowHeight?this.options.rowHeight:function(e){if(void 0!==t)return t;var i=sf.base.createElement("table",{className:"e-table",styles:"visibility: hidden"});i.innerHTML='<tr><td class="e-rowcell">A<td></tr>',e.appendChild(i);var s=i.querySelector("td").getBoundingClientRect();return e.removeChild(i),t=Math.ceil(s.height)}(this.element)},i.prototype.clientActions=function(){!this.options.enableVirtualization||12!==this.options.pageSize&&"auto"!==this.options.width||this.virtualContentModule.ensurePageSize(),this.getColumns().some((function(e){return""!==e.hideAtMedia}))&&this.columnChooserModule.setMediaColumns()},i.prototype.print=function(){this.removeColGroup();var e=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no");e.moveTo(0,0),e.resizeTo(screen.availWidth,screen.availHeight),sf.base.print(this.element,e)},i.prototype.removeColGroup=function(){var e=this.options.groupCount,t=this.element,i="#"+this.element.id;if(e){for(var s=t.querySelectorAll(".e-groupcaption"),n=s[e-1].getAttribute("colspan"),o=0;o<s.length;o++)s[o].setAttribute("colspan",n);var r=t.querySelectorAll("colgroup"+i+"colGroup"),a=t.querySelector(".e-content").querySelectorAll("colgroup");this.hideColGroup(r,e),this.hideColGroup(a,e)}},i.prototype.hideColGroup=function(e,t){for(var i=0;i<e.length;i++)for(var s=0;s<t;s++)e[i].children[s].style.display="none"},i.prototype.getModuleName=function(){return"grid"},i}(),K={pageUp:"pageup",pageDown:"pagedown",ctrlAltPageUp:"ctrl+alt+pageup",ctrlAltPageDown:"ctrl+alt+pagedown",altPageUp:"alt+pageup",altPageDown:"alt+pagedown",altDownArrow:"alt+downarrow",altUpArrow:"alt+uparrow",ctrlDownArrow:"ctrl+downarrow",ctrlUpArrow:"ctrl+uparrow",ctrlPlusA:"ctrl+A",ctrlPlusP:"ctrl+P",ctrlPlusC:"ctrl+C",ctrlShiftPlusH:"ctrl+shift+H",enter:"enter"};return{initialize:function(e,t,i,s){sf.base.enableBlazorMode(),new G(e,t,i,s)},contentReady:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(s.element)&&!sf.base.isNullOrUndefined(s.element.blazor__instance)){var n=s.element.blazor__instance;if(n.setOptions(t,n.options),n.options=t,n.scrollModule.setPadding(),n.contentReady(i),n.options.isColumnWidthChanged)new v(n).setWidthToTable();"100%"==t.height&&n.scrollModule.refresh()}},refreshPivotRowHeight:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t.element)||sf.base.isNullOrUndefined(t.element.blazor__instance)||t.element.blazor__instance.freezeModule.refreshFreeze({case:"textwrap"})},customFilterDialog:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(s.element)&&!sf.base.isNullOrUndefined(s.element.blazor__instance)){var n=document.querySelector("#"+t);if(n.style.maxHeight="100%",n.style.border="1px",n.style.top="0px",i){var o=s.element.querySelector(".e-sfcontextmenu");o.querySelector("li").style.paddingLeft="0px",o.querySelector(".e-caret").style.paddingRight="8px"}}},setCustomFilterDialogPadding:function(e,t){document.querySelector("#"+t).style.padding="16px"},searchClear:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i.element)&&!sf.base.isNullOrUndefined(i.element.blazor__instance)){var s=document.querySelector("#"+t);s.value="",s.focus()}},updateTableWidth:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i.element)&&!sf.base.isNullOrUndefined(i.element.blazor__instance)){var s=i.element.blazor__instance;if(s.options.columns=t,s.options.allowResizing&&s.options.isResizedGrid){var n=new v(s),o=t.some((function(e){return""==e.width||null==e.width}));n.setWidthToTable(t,o)}}},preventResizeAction:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i.element)||sf.base.isNullOrUndefined(i.element.blazor__instance)||i.element.blazor__instance.resizeModule.preventResizeAction(t)},preventFreezeLineMoving:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i.element)||sf.base.isNullOrUndefined(i.element.blazor__instance)||i.element.blazor__instance.frozenDragDropModule.preventFreezeLineMoving(t)},freezeLineMovedActions:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i.element)&&!sf.base.isNullOrUndefined(i.element.blazor__instance)){var s=i.element.blazor__instance;s.options.actualFrozenColumns=t.actualFrozenColumns,s.options.columns=t.columns,s.options.frozenRightCount=t.frozenRightCount,s.options.frozenLeftCount=t.frozenLeftCount,s.options.frozenLeftColumnsCount=t.frozenLeftColumnsCount,s.options.frozenColumns=t.frozenColumns,s.options.isColumnReordered=t.isColumnReordered,s.freezeLineMovedAction(),s.freezeModule.setFrozenHeight()}},frozenHeight:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(s.element)&&!sf.base.isNullOrUndefined(s.element.blazor__instance)){var n=s.element.blazor__instance;n.freezeModule.setFrozenHeight(),t.allowTextWrap&&n.freezeModule.refreshRowHeight(),t.allowResizing&&n.freezeModule.updateResizeHandler()}},updateVirtualColumns:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i.element)&&!sf.base.isNullOrUndefined(i.element.blazor__instance)){var s=i.element.blazor__instance;if(s.options.virtualizedColumns=t,s.options.allowResizing&&0==s.options.frozenColumns&&""!=s.getContent().querySelector("table").style.width)new v(s).setWidthToTable(null,!1,"resize")}},updateOptions:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i.element)&&!sf.base.isNullOrUndefined(i.element.blazor__instance)){var s=i.element.blazor__instance;s.setOptions(t,s.options)}},virtualHeight:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(s.element)&&!sf.base.isNullOrUndefined(s.element.blazor__instance)){var n=s.element.blazor__instance;n.options=t,n.options.totalItemCount=i,n.virtualContentModule.refreshOffsets(),n.virtualContentModule.setVirtualHeight()}},lazyGroupExpand:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i.element)&&!sf.base.isNullOrUndefined(i.element.blazor__instance)){var s=i.element.blazor__instance;s.setOptions(t,s.options),s.options=t,s.options.enableVirtualization&&s.virtualContentModule.onDataReady()}},viewRefresh:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i.element)&&!sf.base.isNullOrUndefined(i.element.blazor__instance)){var s=void 0;s=new v(i);var n=(t=t.filter((function(e){return e.visible}))).some((function(e){return""==e.width||null==e.width}));i.parent.getColumns(),i.options.frozenColumns&&i.parent.updateColumnLevelFrozen(),s.setWidthToTable(t,n)}},virtualDisconnect:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i.element)||sf.base.isNullOrUndefined(i.element.blazor__instance)||sf.base.isNullOrUndefined(i.element.blazor__instance.virtualContentModule)||(i.element.blazor__instance.options.enableVirtualization=t.enableVirtualization,i.element.blazor__instance.virtualContentModule.observer.disconnect())},reorderColumns:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s.element)||sf.base.isNullOrUndefined(s.element.blazor__instance)||s.element.blazor__instance.reorderModule.reorderColumns(t,i)},reorderColumnByIndex:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s.element)||sf.base.isNullOrUndefined(s.element.blazor__instance)||s.element.blazor__instance.reorderModule.reorderColumnByIndex(t,i)},reorderColumnByTargetIndex:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s.element)||sf.base.isNullOrUndefined(s.element.blazor__instance)||s.element.blazor__instance.reorderModule.reorderColumnByTargetIndex(t,i)},renderColumnChooser:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t.element)||sf.base.isNullOrUndefined(t.element.blazor__instance)||t.element.blazor__instance.columnChooserModule.renderColumnChooser()},setLastRowBorder:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t.element)||sf.base.isNullOrUndefined(t.element.blazor__instance)||t.element.blazor__instance.lastRowBorderCheck()},renderColumnMenu:function(e,t,i,s){var n=window.sfBlazor.getCompInstance(e);return sf.base.isNullOrUndefined(n.element)||sf.base.isNullOrUndefined(n.element.blazor__instance)?{Left:1,Top:1}:n.element.blazor__instance.columnMenuModule.renderColumnMenu(t,i,s)},filterPopupRender:function(e,t,i,s,n){var o=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(o.element)||sf.base.isNullOrUndefined(o.element.blazor__instance)||o.element.blazor__instance.filterModule.filterPopupRender(t,i,s,n)},clientHeight:function(e){var t=window.sfBlazor.getCompInstance(e);return sf.base.isNullOrUndefined(t.element)||sf.base.isNullOrUndefined(t.element.blazor__instance)?0:Math.max(t.element.blazor__instance.content.clientHeight,window.innerHeight||0)},clientTransformUpdate:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s.element)||sf.base.isNullOrUndefined(s.element.blazor__instance)||s.element.blazor__instance.virtualContentModule.updateTransform(t,i)},autoFitColumns:function(e,t,i,s,n){void 0===n&&(n=!1);var o=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(o.element)&&!sf.base.isNullOrUndefined(o.element.blazor__instance)){var r=o.element.blazor__instance;if(s&&(r.options.columns=t,r.resizeModule.autoFitColumns(i)),n)new v(r).setPersistedWidth(t[0])}},refreshColumnIndex:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i.element)&&!sf.base.isNullOrUndefined(i.element.blazor__instance)){var s=i.element.blazor__instance;s.options.columns=t,s.virtualContentModule.refreshColumnIndexes()}},focus:function(e,t,i,s){var n=window.sfBlazor.getCompInstance(e),o=n.element.querySelector('[data-uid="'+i+'"]');if(!sf.base.isNullOrUndefined(n.element)&&!sf.base.isNullOrUndefined(n.element.blazor__instance)&&!sf.base.isNullOrUndefined(o)){var r=n.element.blazor__instance;r.options.enableVirtualization?r.virtualContentModule.focusCell(o,s):o.focus()}},blurActiveElement:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t.element)||sf.base.isNullOrUndefined(t.element.blazor__instance)||sf.base.isNullOrUndefined(r(document.activeElement,"e-grid"))||document.activeElement.blur()},iterateElements:function(e,t,i){for(var s=e.children.length-1;s>=0;s--){if(e.children[s].classList.contains("sf-grid")&&!i){var n=sf.base.isNullOrUndefined(t.querySelector(".e-pagercontainer")),o=sf.base.isNullOrUndefined(t.querySelector(".e-lastpage"));return void(n?t.querySelectorAll(".e-rowcell:not(.e-hide)")[t.querySelectorAll(".e-rowcell:not(.e-hide)").length-1].focus():n||o?!n&&o&&t.querySelectorAll(".e-numericitem")&&t.querySelectorAll(".e-numericitem")[t.querySelectorAll(".e-numericitem").length-1].focus():t.querySelector(".e-lastpage").focus())}if(0==e.children[s].tabIndex)return void e.children[s].focus();if(!sf.base.isNullOrUndefined(e.children[s].children)&&0!=e.children[s].children.length&&(this.iterateElements(e.children[s],t,i),!document.activeElement.classList.contains("e-detailcell")))return}},focusDetailTemplateElements:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);if(!(sf.base.isNullOrUndefined(s.element)&&sf.base.isNullOrUndefined(s.element.blazor__instance)&&sf.base.isNullOrUndefined(r(document.activeElement,"e-grid")))){var n=document.activeElement.querySelector(".e-grid"),o=sf.base.isNullOrUndefined(n);if("Tab"==t)document.activeElement.blur();else if("ShiftTab"==t){var a=r(document.activeElement,"e-detailcell").firstElementChild;if(0!=a.children.length&&i&&this.iterateElements(a,n,o),document.activeElement.classList.contains("e-detailcell")){var l=document.activeElement.parentElement.previousElementSibling.querySelectorAll(".e-rowcell:not(.e-hide)");return void l[l.length-1].focus()}}}},focusFilterBar:function(e,t,i,s){var n=window.sfBlazor.getCompInstance(e),o=n.element.querySelector(".e-filterbar");if(!sf.base.isNullOrUndefined(n.element)&&!sf.base.isNullOrUndefined(n.element.blazor__instance)&&!sf.base.isNullOrUndefined(o))if("Tab"==t){if(document.activeElement.classList.contains("e-headercell")){var r=o.querySelector(".e-textbox.e-input:not([disabled])");if(i){var a=o.querySelector(".e-fltrinputdiv").querySelector("input");sf.base.isNullOrUndefined(a)?o.querySelector(".e-fltrinputdiv").children[0].focus():a.focus()}else sf.base.isNullOrUndefined(r)||r.focus()}}else if("ShiftTab"==t){if(document.activeElement.classList.contains("e-rowcell")||document.activeElement.classList.contains("e-recordplusexpand")){r=o.querySelectorAll(".e-textbox.e-input:not([disabled])");if(i){var l=o.querySelectorAll(".e-fltrinputdiv"),h=l[l.length-1].querySelector("input");sf.base.isNullOrUndefined(h)?l[l.length-1].children[0].focus():h.focus()}else sf.base.isNullOrUndefined(r)||r[r.length-1].focus()}}else if("ArrowUp"==t||"ArrowDown"==t)if(document.activeElement.classList.contains("e-groupcaption")||document.activeElement.classList.contains("e-recordplusexpand"))o.querySelector(".e-textbox.e-input:not([disabled])").focus();else if(i){a=o.querySelectorAll(".e-fltrinputdiv")[-1==s?document.activeElement.getAttribute("data-colIndex"):s].querySelector("input");sf.base.isNullOrUndefined(a)?o.querySelectorAll(".e-fltrinputdiv")[-1==s?document.activeElement.getAttribute("data-colIndex"):s].children[0].focus():a.focus()}else o.querySelectorAll(".e-input")[-1==s?document.activeElement.getAttribute("data-colIndex"):s].focus()},focusFirstGroupHeader:function(e){var t=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(t.element)&&!sf.base.isNullOrUndefined(t.element.blazor__instance)){var i=t.element.querySelector(".e-groupheadercell");sf.base.isNullOrUndefined(i)||i.focus()}},focusExcelInput:function(e,t){var i=window.sfBlazor.getCompInstance(e),s=document.querySelector("#"+t+"_excelDlg");sf.base.isNullOrUndefined(i.element)||sf.base.isNullOrUndefined(i.element.blazor__instance)||sf.base.isNullOrUndefined(s)||setTimeout((function(){s.querySelector("#"+i.element.id+"_SearchBox").focus()}),10)},refreshOnDataChange:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t.element)||sf.base.isNullOrUndefined(t.element.blazor__instance)||t.element.blazor__instance.virtualContentModule.refreshOnDataChange()},updateAutofillPosition:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);return sf.base.isNullOrUndefined(s.element)||sf.base.isNullOrUndefined(s.element.blazor__instance)?null:s.element.blazor__instance.selectionModule.updateAutofillPosition(t,i)},createBorder:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);return sf.base.isNullOrUndefined(s.element)||sf.base.isNullOrUndefined(s.element.blazor__instance)?null:s.element.blazor__instance.selectionModule.createBorder(t,i)},removePersistItem:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i.element)&&!sf.base.isNullOrUndefined(i.element.blazor__instance)){var s=i.element.blazor__instance;s.getHeaderTable().style.width="",s.getContentTable().style.width="",0!=s.options.aggregatesCount&&(s.getFooterContent().querySelector(".e-table").style.width=""),s.options.frozenColumns>0&&(s.element.querySelector(".e-movableheader").querySelector(".e-table").style.width="",s.element.querySelector(".e-movablecontent").querySelector(".e-table").style.width="")}localStorage.removeItem(t)},focusChild:function(e,t,i){var s=window.sfBlazor.getCompInstance(e),n=s.element.querySelector('[data-uid="'+i+'"]').firstElementChild.children,o=s.iterateTemplateElementsForward(n);return sf.base.isNullOrUndefined(o)?s.element.querySelector('[data-uid="'+i+'"]').focus():o.focus(),!sf.base.isNullOrUndefined(o)},exportSave:function(e,t){if(navigator.msSaveBlob){for(var i=window.atob(t),s=new Uint8Array(i.length),n=0;n<i.length;n++)s[n]=i.charCodeAt(n);var o=new Blob([s.buffer],{type:"application/octet-stream"});navigator.msSaveBlob(o,e)}else{var r=document.createElement("a");r.download=e,r.href="data:application/octet-stream;base64,"+t,document.body.appendChild(r),r.click(),document.body.removeChild(r)}},destroy:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i.element)||sf.base.isNullOrUndefined(i.element.blazor__instance)||i.element.blazor__instance.destroy(t)},validation:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s.element)||sf.base.isNullOrUndefined(s.element.blazor__instance)||s.element.blazor__instance.editModule.createTooltip(t,i)},focusCell:function(e,t,i,s){void 0===s&&(s=!1);var n=window.sfBlazor.getCompInstance(e);i&&!sf.base.isNullOrUndefined(n.element)&&!sf.base.isNullOrUndefined(n.element.blazor__instance)&&n.element.blazor__instance.options.frozenColumns&&(n.element.querySelector(".e-frozencontent").style.height=n.element.querySelector(".e-movablecontent").getBoundingClientRect().height+"px");var o="#"+t.replace(/[.]/g,"___");if(s)for(var r=[].slice.call(n.element.querySelectorAll("form")),a=void 0,l=0;l<r.length;l++)(a=r[l].querySelector("td:not(.e-hide)")).style.height=sf.base.closest(a,".e-row").getBoundingClientRect().height+"px";if(""===t&&n.element.querySelector("input.e-boolcell"))n.element.querySelector("input.e-boolcell").focus();else if(""!==t&&n.element.querySelector(o)){var h=n.getContent().querySelector("tbody").classList.contains("e-addedrow"),d=n.options.enableVirtualization&&n.options.allowEditing&&n.options.isEdit&&!h;n.element.querySelector(o).focus({preventScroll:d})}},CurrentPageFocus:function(e,t,i){var s=window.sfBlazor.getCompInstance(e).element.querySelector(".e-numericcontainer");"PreviousPage"==t||s.querySelectorAll(".e-link:last-child")[0].innerText!=i?s.querySelector(".e-link").focus():s.querySelectorAll(".e-link:last-child")[0].focus()},pagerFocus:function(e,t){var i=window.sfBlazor.getCompInstance(e).element.querySelector(".e-gridpager").querySelector(".e-pagercontainer"),s=i.querySelector(".e-numericcontainer"),n=i.querySelector(".e-firstpage.e-pager-default"),o=i.querySelector(".e-prevpage.e-pager-default");if("ArrowDown"===t)return n?(n.focus(),"FirstPage"):o?(n.focus(),"PreviousPage"):(s.querySelectorAll(".e-link")[1].focus(),"1");if("ArrowRight"==t)return null!=n&&n.classList.contains("e-focused")?(o.focus(),"PreviousPage"):null!=o&&o.classList.contains("e-focused")||null!=i.querySelector(".e-pp.e-focused")?null==i.querySelector(".e-pp")||i.querySelector(".e-pp").classList.contains("e-focused")?(s.querySelectorAll(".e-link")[0].focus(),s.querySelectorAll(".e-link")[0].innerText):(i.querySelector(".e-pp").focus(),"PreviousPagerCount"):s.querySelectorAll(".e-link.e-focused").length>0&&null!=i.querySelector(".e-link.e-focused")&&null!=i.querySelector(".e-link.e-focused").nextElementSibling?(s.querySelector(".e-link.e-focused").nextElementSibling.focus(),s.querySelector(".e-link.e-focused").nextElementSibling.innerText):s.querySelectorAll(".e-link.e-focused").length>0&&null!=i.querySelector(".e-np")&&null==i.querySelector(".e-np.e-focused")?(i.querySelector(".e-np").focus(),"NextPagerCount"):s.querySelectorAll(".e-link.e-focused").length>0||i.querySelectorAll(".e-np.e-focused").length>0?null!=i.querySelector(".e-nextpage")?(i.querySelector(".e-nextpage").focus(),"NextPage"):(s.querySelector(".e-link.e-focused").focus(),s.querySelector(".e-link.e-focused").innerText):(i.querySelector(".e-nextpage.e-focused"),i.querySelector(".e-lastpage").focus(),"LastPage");if("ArrowLeft"==t){if(null!=o&&o.classList.contains("e-focused"))return n.focus(),"FirstPage";if(o&&i.querySelector(".e-pp.e-focused"))return o.focus(),"PreviousPage";if(s.querySelectorAll(".e-link")[0].classList.contains("e-focused"))return null!=i.querySelector(".e-pp")?(i.querySelector(".e-pp").focus(),"PreviousPagerCount"):o?(o.focus(),"PreviousPage"):(s.querySelectorAll(".e-link")[0].focus(),"1");if(s.querySelectorAll(".e-link.e-focused").length>0)return s.querySelector(".e-link.e-focused").previousElementSibling.focus(),s.querySelector(".e-link.e-focused").previousElementSibling.innerText;if(i.querySelectorAll(".e-nextpage.e-focused").length>0&&null!=i.querySelector(".e-np"))return i.querySelector(".e-np").focus(),"NextPagerCount";if(i.querySelectorAll(".e-nextpage.e-focused").length>0||i.querySelectorAll(".e-np.e-focused").length>0){var r=s.querySelectorAll(".e-link").length;return s.querySelectorAll(".e-link")[r-1].focus(),s.querySelectorAll(".e-link:last-child")[0].innerText}return null!=i.querySelector(".e-lastpage.e-focused")?(i.querySelector(".e-nextpage").focus(),"NextPage"):n.classList.contains(".e-disabled")?"0":(n.focus(),"FirstPage")}return"0"},setFrozenHeight:function(e){e.querySelector(".e-frozencontent").style.height=e.querySelector(".e-movablecontent").offsetHeight-n()+"px"},printGrid:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t.element)||sf.base.isNullOrUndefined(t.element.blazor__instance)||t.element.blazor__instance.print()},updateMediaColumns:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i.element)||sf.base.isNullOrUndefined(i.element.blazor__instance)||i.element.blazor__instance.columnChooserModule.updateMediaColumns(t)},copyToClipBoard:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i.element)||sf.base.isNullOrUndefined(i.element.blazor__instance)||i.element.blazor__instance.clipboardModule.copy(t)},preventCopyToClipBoard:function(e,t,i,s){var n=window.sfBlazor.getCompInstance(e),o=n.clipboardModule;sf.base.isNullOrUndefined(n.element)||sf.base.isNullOrUndefined(n.element.blazor__instance)||("Copy"===s?o.clipBoardData(t,i):"Paste"===s&&o.pasteAction(i,o.getSelectedRowCellIndexes()[0].rowIndex,o.getSelectedRowCellIndexes()[0].cellIndexes[0],t))},preventPasteAction:function(e,t,i,s,n,o){var r=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(r.element)||sf.base.isNullOrUndefined(r.element.blazor__instance)||r.element.blazor__instance.clipboardModule.pasteData(t,i,s,n,o)},setMediaColumns:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i.element)||sf.base.isNullOrUndefined(i.element.blazor__instance)||i.element.blazor__instance.columnChooserModule.setMediaColumns(t)},gridFocus:function(e){var t=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(t.element)){var i=t.element.querySelectorAll(".e-groupheadercell").length;if(0!=t.element.querySelectorAll(".e-toolbar-item").length){var s=t.element.querySelectorAll(".e-toolbar-item:not(.e-overlay)"),n=null;if(!sf.base.isNullOrUndefined(s)&&0!=s.length){var o=s.length-1;if(!sf.base.isNullOrUndefined(s[o].querySelector(".e-tbar-btn"))){for(var a=o;a>=0;a--)if(!sf.base.isNullOrUndefined(s[a].querySelector(".e-tbar-btn"))&&0==s[a].querySelector(".e-tbar-btn").tabIndex){n=s[a].querySelector(".e-tbar-btn");break}return void n.focus()}if(!sf.base.isNullOrUndefined(s[o].querySelector(".e-searchinput.e-input")))return void s[o].querySelector(".e-searchinput.e-input").focus()}}else{if(i>0&&document.activeElement.classList.contains("e-headercell")){var l=t.element.querySelectorAll(".e-ungroupbutton");return void l[l.length-1].focus()}if(0==i&&t.options.allowGrouping&&document.activeElement.classList.contains("e-headercell"))return void t.element.querySelector(".e-groupdroparea").focus()}r(document.activeElement,"e-grid")&&t.element.focus()}},isMacDevice:function(){return-1!==navigator.userAgent.indexOf("Mac OS")},scrollIntoView:function(e,t,i,s,n){void 0===n&&(n=!1);var o=window.sfBlazor.getCompInstance(e).element.blazor__instance,r=o.getContent();n?r.scrollTop=r.scrollHeight:-1!=i&&(r.scrollTop=-1!=s?i*s:i*o.getRowHeight()),r=o.options.frozenColumns?o.scrollModule.getMovableContent():r;var a=o.virtualContentModule.vHelper.cOffsets,l=o.nColumnOffsets;setTimeout((function(){if(o.options.frozenColumns||-1==t||(o.options.enableColumnVirtualization?r.scrollLeft=a[t-1]:r.scrollLeft=l[t-1]),o.options.enableColumnVirtualization&&t>0&&o.options.frozenColumns){var e=t-(o.virtualContentModule.movableColumnIndex+1);r.scrollLeft=a[e]}}),20)}}}()},"./modules/sf-heatmap.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.HeatMap=function(){"use strict";var e=function(){function e(e,t){this.resizeTimer=0,this.previousCellID="",window.sfBlazor=window.sfBlazor,this.element=e,this.dataId=e.id,window.sfBlazor.setCompInstance(this),this.dotnetRef=t}return e.prototype.initialize=function(e){var t=sf.base.Browser.isPointer?"pointerleave":"mouseleave";sf.base.EventHandler.add(this.element,"click",this.heatMapMouseClick,this),sf.base.EventHandler.add(this.element,sf.base.Browser.touchStartEvent,this.heatMapMouseMove,this),sf.base.EventHandler.add(this.element,t,this.heatMapMouseLeave,this),sf.base.EventHandler.add(this.element,sf.base.Browser.touchMoveEvent,this.heatMapMouseMove,this);var i=sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize";sf.base.EventHandler.add(window,i,this.resizeBound.bind(this),this);var s=this.getElementBounds(this.element);return"width:"+s.width+", height:"+s.height+", parentHeight:"+s.parentHeight},e.prototype.heatMapMouseClick=function(e){this.dotnetRef.invokeMethodAsync("HeatMapMouseClick",this.getEventArgs(e),this.getElementBounds(this.element))},e.prototype.heatMapMouseLeave=function(e){this.dotnetRef.invokeMethodAsync("HeatMapMouseLeave",this.getEventArgs(e),this.getElementBounds(this.element))},e.prototype.heatMapMouseMove=function(e){this.dotnetRef.invokeMethodAsync("HeatMapMouseMove",this.getEventArgs(e),this.getElementBounds(this.element))},e.prototype.resizeBound=function(){var e=this;this.resizeTimer&&clearTimeout(this.resizeTimer),this.element&&(this.resizeTimer=setTimeout((function(){return e.dotnetRef.invokeMethodAsync("ResizeBound",e.getElementBounds(e.element).height,e.getElementBounds(e.element).width,e.getElementBounds(e.element).parentHeight)}),500))},e.prototype.setMouseXY=function(e,t,i){var s=document.getElementById(i).getBoundingClientRect(),n=document.getElementById(i).getBoundingClientRect();this.mouseY=t-n.top-Math.max(s.top-n.top,0),this.mouseX=e-n.left-Math.max(s.left-n.left,0)},e.prototype.renderTooltip=function(e,t,i,s,n,o,r,a,l,h){var d=document.getElementById(t+"_svg"),c=!(d&&parseInt(d.getAttribute("opacity"),10)>0),p="string"==typeof i?JSON.parse(i):i;n&&!o&&this.updateCellHighlight(i.id),h&&"TailwindDark"==h&&(p.fill="#F9FAFB"),h&&"Bootstrap5Dark"==h&&(p.fill="#E9ECEF");var u=window.sfBlazor.getCompInstance(e);p.content=p.xLabel+p.yLabel+p.value,c&&!sf.base.isNullOrUndefined(u)?(p.content=p.displayText,p.location={x:p.x+p.width/2,y:p.y+p.height/2},p.areaBounds={height:s.height+s.y,width:s.width,x:s.x},p.opacity="Tailwind"==h||"TailwindDark"===h||"Bootstrap5"===h||"Bootstrap5Dark"===h?1:.75,p.theme=h,p.fill=a,u.tooltip=new sf.svgbase.Tooltip(p),u.tooltip.border.width=sf.base.isNullOrUndefined(l)?u.tooltip.border.width:l.width,u.tooltip.border.color=sf.base.isNullOrUndefined(l)?u.tooltip.border.color:l.color,u.tooltip.appendTo("#"+t)):sf.base.isNullOrUndefined(u.tooltip)||(sf.base.isNullOrUndefined(r)||(u.tooltip.textStyle.color=r.color||u.tooltip.textStyle.color,u.tooltip.textStyle.fontFamily=r.fontFamily||u.tooltip.textStyle.fontFamily,u.tooltip.textStyle.fontStyle=r.fontStyle||u.tooltip.textStyle.fontStyle,u.tooltip.textStyle.fontWeight=r.fontWeight||u.tooltip.textStyle.fontWeight,u.tooltip.textStyle.size=r.size||u.tooltip.textStyle.size),h&&"Tailwind"==h&&(u.tooltip.textStyle.color="#FFFFFF",u.tooltip.textStyle.fontWeight="500",u.tooltip.textStyle.size="12px",u.tooltip.textStyle.fontFamily="Inter"),h&&"TailwindDark"==h&&(u.tooltip.textStyle.color="#1F2937",u.tooltip.textStyle.fontWeight="500",u.tooltip.textStyle.size="12px",u.tooltip.textStyle.fontFamily="Inter"),h&&"Bootstrap5"==h&&(u.tooltip.border.width=0,u.tooltip.border.color="",u.tooltip.fill="",u.tooltip.opacity=.75,u.tooltip.textStyle.opacity=1,u.tooltip.textStyle.color=null,u.tooltip.textStyle.fontWeight="Normal",u.tooltip.textStyle.size="13px",u.tooltip.textStyle.fontFamily="Segoe UI"),h&&"Bootstrap5Dark"==h&&(u.tooltip.textStyle.color="#212529",u.tooltip.textStyle.fontWeight="500",u.tooltip.textStyle.size="14px",u.tooltip.textStyle.fontFamily="system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'"),p.toolTipX=p.x+p.width/2,p.toolTipY=p.y+p.height/2,p.content=p.displayText,u.tooltip.location=new sf.svgbase.TooltipLocation(p.toolTipX,p.toolTipY),u.tooltip.content=[p.content],u.tooltip.dataBind())},e.prototype.updateCellHighlight=function(e){this.previousCellID!==e&&(""!=this.previousCellID&&this.setOpacity(document.getElementById(this.previousCellID),"1"),this.setOpacity(document.getElementById(e),"0.65"),this.previousCellID=e)},e.prototype.setOpacity=function(e,t){e.setAttribute("opacity",t)},e.prototype.getElementBounds=function(e){var t=this.stringToNumber(this.width,e.offsetWidth)||e.offsetWidth||600,i=this.stringToNumber(this.height,e.offsetHeight)||450,s=e.getBoundingClientRect();return{width:t,height:i,parentHeight:e.parentElement?e.parentElement.offsetHeight:i,left:Math.ceil(s.left),top:Math.ceil(s.top),right:Math.ceil(s.right),bottom:Math.ceil(s.bottom)}},e.prototype.stringToNumber=function(e,t){return sf.base.isNullOrUndefined(e)?null:-1!==e.indexOf("%")?t/100*parseInt(e,10):parseInt(e,10)},e.prototype.getEventArgs=function(e){var t=e.changedTouches?e.changedTouches[0].clientX:e.clientX,i=e.changedTouches?e.changedTouches[0].clientY:e.clientY;this.setMouseXY(t,i,e.currentTarget.id);var s=e.touches,n=[];if(e.type.indexOf("touch")>-1)for(var o=0,r=s.length;o<r;o++)n.push({pageX:s[o].clientX,pageY:s[o].clientY,pointerId:e.pointerId||0});return{type:e.type,clientX:e.clientX,clientY:e.clientY,mouseX:this.mouseX,mouseY:this.mouseY,pointerType:e.pointerType,target:e.target.id,changedTouches:{clientX:e.changedTouches?e.changedTouches[0].clientX:0,clientY:e.changedTouches?e.changedTouches[0].clientY:0},touches:n,pointerId:e.pointerId,ctrlKey:e.ctrlKey}},e.prototype.destroy=function(){var e=sf.base.Browser.isPointer?"pointerleave":"mouseleave";sf.base.EventHandler.remove(this.element,"click",this.heatMapMouseClick),sf.base.EventHandler.remove(this.element,sf.base.Browser.touchStartEvent,this.heatMapMouseMove),sf.base.EventHandler.remove(this.element,e,this.heatMapMouseLeave),sf.base.EventHandler.remove(this.element,sf.base.Browser.touchMoveEvent,this.heatMapMouseMove);var t=sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize";sf.base.EventHandler.remove(window,t,this.resizeBound.bind(this)),this.element=null},e}();return{initialize:function(t,i,s){new e(t,i);var n=window.sfBlazor.getCompInstance(t.id);return n?n.initialize(s):null},renderTooltip:function(e,t,i,s,n,o,r,a,l,h,d){var c=window.sfBlazor.getCompInstance(e);c&&c.element&&c.renderTooltip(e,t,s,n,o,r,a,l,h,d)},fadeOut:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(i&&i.element){if(sf.base.isNullOrUndefined(i)||!sf.base.isNullOrUndefined(i)&&sf.base.isNullOrUndefined(i.tooltip))return;""!=i.previousCellID&&(i.setOpacity(document.getElementById(i.previousCellID),"1"),i.previousCellID="",t||i.tooltip.fadeOut())}},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);t.element&&t&&t.destroy()}}}()},"./modules/sf-image-editor.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sfBlazor=window.sfBlazor||{},window.sfBlazor.ImageEditor=function(){"use strict";var e,t,s=(e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)},function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}),n=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}s(t,e)}(sf.base.ChildProperty),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.degree=0,t.isUndoRedo=!1,t.dragCanvas=!1,t.dragElement="",t.keyHistory="",t.tempKeyHistory="",t.mouseDownPoint={x:0,y:0},t.previousPoint={x:0,y:0},t.dragPoint={startX:0,startY:0,endX:0,endY:0},t.diffPoint={x:0,y:0},t.oldPoint={},t.objColl=[],t.undoRedoColl=[],t.isImageLoaded=!1,t.strokeSettings={strokeColor:"#fff",fillColor:"",strokeWidth:null},t.tempStrokeSettings={strokeColor:"#fff",fillColor:"",strokeWidth:null},t.textSettings={text:"Enter Text",fontFamily:"Arial",fontSize:null,fontRatio:null,bold:!1,italic:!1,underline:!1},t.tempTextSettings={text:"Enter Text",fontFamily:"Arial",fontSize:null,fontRatio:null,bold:!1,italic:!1,underline:!1},t.toolbarHeight=46,t.togglePan=!1,t.disablePan=!1,t.currFlipState="",t.touchEndPoint={},t.undoRedoStep=0,t.togglePen=!1,t.currentToolbar="main",t.textStartPoints={x:0,y:0},t.fontSizeColl=[],t.textRow=1,t.activeObj={activePoint:{startX:0,startY:0,endX:0,endY:0,width:0,height:0},flipObjColl:[],triangle:[],triangleRatio:[]},t.tempActiveObj={activePoint:{startX:0,startY:0,endX:0,endY:0,width:0,height:0},flipObjColl:[],triangle:[],triangleRatio:[]},t.currObjType={shape:"",isDragging:!1,isActiveObj:!1,isText:!1,isInitialText:!1,isLine:!1,isInitialLine:!1,isCustomCrop:!1,isZoomed:!1,isUndoZoom:!1,isUndoAction:!1,isFiltered:!1,isSave:!1},t.defToolbarItems=[],t.isTimer=!1,t.isFirstMove=!1,t.startTouches=[],t.tempTouches=[],t.adjustmentLevel={brightness:0,contrast:0,hue:0,opacity:100,saturation:0,blur:0,exposure:0,sharpen:!1,bw:!1},t.tempAdjustmentLevel={brightness:0,contrast:0,hue:0,opacity:100,saturation:0,blur:0,exposure:0,sharpen:!1,bw:!1},t.adjustmentValue="",t.initialAdjustmentValue="",t.tempAdjustmentValue="",t.currentFilter="",t.tempFilter="",t.canvasFilter="brightness(1) contrast(100%) hue-rotate(0deg) saturate(100%) opacity(1) blur(0px) sepia(0%) grayscale(0%) invert(0%)",t.tempUndoRedoStep=0,t.zoomFactor=0,t.tempZoomFactor=0,t.destLeft=0,t.destTop=0,t.srcLeft=0,t.srcTop=0,t.cropDestPoints={startX:0,startY:0,width:0,height:0},t.flipColl=[],t.isReverseRotate=!1,t.isReverseFlip=!1,t.isPreventDragging=!1,t.isRotateZoom=!1,t.rotateFlipColl=[],t.isCircleCrop=!1,t.rotatedDestPoints={startX:0,startY:0,width:0,height:0},t.croppedDegree=0,t.isFreehandDrawingPoint=!1,t.isFreehandDrawEditing=!1,t.tempFreeHandDrawEditingStyles={strokeColor:null,fillColor:null,strokeWidth:null},t.totalPannedInternalPoint={x:0,y:0},t.totalPannedClientPoint={x:0,y:0},t.totalPannedPoint={x:0,y:0},t.isCropTab=!1,t.cropZoomFactor=0,t.defaultZoomFactor=0,t.fileName="",t.isBrightnessAdjusted=!1,t.isInitialLoading=!1,t.freehandDrawObj={lastWidth:0,lastVelocity:0,time:0,pointX:0,pointY:0},t.points=[],t.pointColl={},t.pointCounter=0,t.freehandCounter=0,t.isFreehandDrawing=!1,t.tempFreehandCounter=0,t.selectedFreehandColor="#42a5f5",t.isFreehandDrawCustomized=!1,t.isShapeInserted=!1,t.isAllowCropPan=!1,t.cropObj={cropZoom:0,defaultZoom:0,totalPannedPoint:{x:0,y:0},totalPannedClientPoint:{x:0,y:0},totalPannedInternalPoint:{x:0,y:0},tempFlipPanPoint:{x:0,y:0},activeObj:{},rotateFlipColl:[],degree:0,currFlipState:"",destPoints:{startX:0,startY:0,width:0,height:0},srcPoints:{startX:0,startY:0,width:0,height:0},filter:""},t.afterCropActions=[],t.isCancelAction=!1,t.isFreehandPointMoved=!1,t.isTouch=!1,t.freehandDownPoint={x:0,y:0},t.tempFlipPanPoint={x:0,y:0},t.currentFreehandDrawIndex=0,t.tempCurrentFreehandDrawIndex=0,t.preventZoomBtn=!1,t.cancelObjColl=[],t.cancelPointColl=[],t.rotatedFlipCropSelection=!1,t.currentMouseMovePoint={x:0,y:0},t}return s(t,e),t.prototype.initializeImageEditor=function(e,t){this.element=e;var i=this.element.querySelector(".e-canvas-wrapper");i.style.height=this.element.offsetHeight-this.toolbarHeight+"px",i.style.width=this.element.offsetWidth+"px",i.style.position="relative",i.style.overflow="hidden",i.style.margin="0 auto",this.lowerCanvas=this.element.querySelector(".e-lower-canvas"),this.upperCanvas=this.element.querySelector(".e-upper-canvas"),this.textArea=this.element.querySelector(".e-textbox"),this.inMemoryCanvas=this.createElement("canvas",{id:this.element.id+"_inMemoryCanvas",attrs:{name:"canvasImage"}}),this.upperCanvas.width=this.lowerCanvas.width=this.inMemoryCanvas.width=this.element.offsetWidth,this.upperCanvas.height=this.lowerCanvas.height=this.inMemoryCanvas.height=this.element.offsetHeight-this.toolbarHeight,this.upperCanvas.style.position=this.lowerCanvas.style.position=this.textArea.style.position="absolute",this.baseImg=this.createElement("img",{id:this.element.id+"_orgImg",attrs:{name:"Image",crossorigin:"anonymous"}}),this.textArea.style.backgroundColor="transparent",this.textArea.style.display="none",this.textArea.style.resize="none",this.lowerContext=this.lowerCanvas.getContext("2d"),this.baseImg=this.createElement("img",{id:this.element.id+"_orgImg",attrs:{name:"Image",crossorigin:"anonymous"}}),this.upperCanvas.style.cursor="default",this.upperContext=this.upperCanvas.getContext("2d"),this.inMemoryContext=this.inMemoryCanvas.getContext("2d"),t&&(this.dotnetRef=t),this.prerender(),this.wireEvent(),this.lowerContext.filter=this.initialAdjustmentValue=this.adjustmentValue="brightness(1) contrast(100%) hue-rotate(0deg) saturate(100%) opacity(1) blur(0px) sepia(0%) grayscale(0%) invert(0%)",this.element&&sf.popups.createSpinner({target:this.element}),this.updateFinetunes(),this.lowerContext.filter=this.canvasFilter=this.initialAdjustmentValue=this.adjustmentValue=this.getDefaultFilter()},t.prototype.prerender=function(){this.element.id=this.element.id||sf.base.getUniqueID("ej2-image-editor"),sf.base.Browser.isDevice&&this.element.classList.add("e-device"),this.themeColl={Bootstrap5:{primaryColor:"#0d6efd",secondaryColor:"#fff"},Bootstrap5Dark:{primaryColor:"#0d6efd",secondaryColor:"#fff"},Tailwind:{primaryColor:"#4f46e5",secondaryColor:"#fff"},TailwindDark:{primaryColor:"#22d3ee",secondaryColor:"#fff"},Fluent:{primaryColor:"#0078d4",secondaryColor:"#fff"},FluentDark:{primaryColor:"#0078d4",secondaryColor:"#fff"},Bootstrap4:{primaryColor:"#007bff",secondaryColor:"#fff"},Bootstrap:{primaryColor:"#317ab9",secondaryColor:"#fff"},BootstrapDark:{primaryColor:"#317ab9",secondaryColor:"#fff"},Material:{primaryColor:"#e3165b",secondaryColor:"#fff"},MaterialDark:{primaryColor:"#00b0ff",secondaryColor:"#fff"},Fabric:{primaryColor:"#0078d6",secondaryColor:"#fff"},FabricDark:{primaryColor:"#0074cc",secondaryColor:"#fff"},Highcontrast:{primaryColor:"#000000",secondaryColor:"#fff"}},this.defaultLocale={Crop:"Crop",ZoomIn:"Zoom In",ZoomOut:"Zoom Out",Undo:"Undo",Redo:"Redo",Transform:"Transform",Annotation:"Annotation",Finetune:"Finetune",Brightness:"Brightness",Contrast:"Contrast",Hue:"Hue",Saturation:"Saturation",Opacity:"Opacity",Blur:"Blur",Sharpen:"Sharpen",Exposure:"Exposure",Filter:"Filter",Default:"Default",Chrome:"Chrome",Cold:"Cold",Warm:"Warm",Grayscale:"Grayscale",BlackAndWhite:"Black and White",Sepia:"Sepia",Invert:"Invert",Text:"Add Text",Pen:"Pen",Reset:"Reset",Save:"Save",Select:"Select",RotateLeft:"Rotate Left",RotateRight:"Rotate Right",HorizontalFlip:"Horizontal Flip",VerticalFlip:"Vertical Flip",OK:"OK",Cancel:"Cancel",FillColor:"Fill Color",StrokeColor:"Stroke Color",StrokeWidth:"Stroke Width",FontFamily:"Font Family",FontStyle:"Font Style",FontSize:"Font Size",FontColor:"Font Color",Pan:"Pan",Move:"Move",Load:"Load",Custom:"Custom",Square:"Square",Circle:"Circle",Ellipse:"Ellipse",Rectangle:"Rectangle",Line:"Line",Arrow:"Arrow",Bold:"Bold",Italic:"Italic",BoldItalic:"Bold Italic",XSmall:"X-Small",Small:"Small",Medium:"Medium",Large:"Large",XLarge:"X-Large",ABC:"ABC",Browse:"Browse",Duplicate:"Duplicate",Remove:"Remove",EditText:"Edit Text"},this.l10n=new sf.base.L10n("image-editor",this.defaultLocale,this.locale)},t.prototype.getModuleName=function(){return"image-editor"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.onPropertyChanged=function(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++){switch(s[i]){case"cssClass":this.cssClass&&sf.base.removeClass([this.element],this.cssClass.replace(/\s+/g," ").trim().split(" ")),t&&sf.base.addClass([this.element],t.replace(/\s+/g," ").trim().split(" "));break;case"disabled":t?(this.element.classList.add("e-disabled"),this.unwireEvent()):(this.element.classList.remove("e-disabled"),this.wireEvent());break;case"height":this.element.style.height=t;break;case"width":this.element.style.width=t;break;case"theme":t&&(this.updateTheme(),this.upperContext.strokeStyle=this.themeColl[this.theme].primaryColor,this.upperContext.fillStyle=this.themeColl[this.theme].secondaryColor);break;case"finetuneSettings":t&&(this.finetuneSettings=t,this.updateFinetunes());break;case"locale":t&&this.l10n.setLocale(t);break;case"allowUndoRedo":this.allowUndoRedo=!!t}}},t.prototype.destroy=function(){var t=[];this.element.removeAttribute("tabindex"),this.cssClass&&(t=t.concat(this.cssClass.replace(/\s+/g," ").trim().split(" "))),sf.base.removeClass([this.element],t),this.element.getAttribute("class")||this.element.removeAttribute("class"),this.destroySubComponents(),this.unwireEvent(),e.prototype.destroy.call(this),this.element.innerHTML=""},t.prototype.getDefaultFilter=function(){return"brightness(1) contrast(100%) hue-rotate(0deg) saturate(100%) opacity(1) blur(0px) sepia(0%) grayscale(0%) invert(0%)"},t.prototype.updateFinetunes=function(){this.finetuneSettings&&(this.finetuneSettings.brightness&&(this.adjustmentLevel.brightness=this.finetuneSettings.brightness.defaultValue,this.tempAdjustmentLevel.brightness=this.finetuneSettings.brightness.defaultValue),this.finetuneSettings.contrast&&(this.adjustmentLevel.contrast=this.finetuneSettings.contrast.defaultValue,this.tempAdjustmentLevel.contrast=this.finetuneSettings.contrast.defaultValue),this.finetuneSettings.hue&&(this.adjustmentLevel.hue=this.finetuneSettings.hue.defaultValue,this.tempAdjustmentLevel.hue=this.finetuneSettings.hue.defaultValue),this.finetuneSettings.saturation&&(this.adjustmentLevel.saturation=this.finetuneSettings.saturation.defaultValue,this.tempAdjustmentLevel.saturation=this.finetuneSettings.saturation.defaultValue),this.finetuneSettings.exposure&&(this.adjustmentLevel.exposure=this.finetuneSettings.exposure.defaultValue,this.tempAdjustmentLevel.exposure=this.finetuneSettings.exposure.defaultValue),this.finetuneSettings.opacity&&(this.adjustmentLevel.opacity=this.finetuneSettings.opacity.defaultValue,this.tempAdjustmentLevel.opacity=this.finetuneSettings.opacity.defaultValue),this.finetuneSettings.blur&&(this.adjustmentLevel.blur=this.finetuneSettings.blur.defaultValue,this.tempAdjustmentLevel.blur=this.finetuneSettings.blur.defaultValue),this.isInitialLoading=!0)},t.prototype.initializeFilter=function(){this.setBrightness(this.adjustmentLevel.brightness),this.setContrast(this.adjustmentLevel.contrast),this.setHue(this.adjustmentLevel.hue),this.setSaturation(this.adjustmentLevel.saturation),this.setExposure(this.adjustmentLevel.exposure),this.setOpacity(this.adjustmentLevel.opacity),this.setBlur(this.adjustmentLevel.blur)},t.prototype.wireEvent=function(){sf.base.EventHandler.add(document,"keydown",this.keyDownEventHandler,this),sf.base.EventHandler.add(document,"keypress",this.keyUpEventHandler,this),sf.base.EventHandler.add(this.upperCanvas,"mousedown",this.mouseDownEventHandler,this),sf.base.EventHandler.add(this.upperCanvas,"mousemove",this.mouseMoveEventHandler,this),sf.base.EventHandler.add(this.upperCanvas,"mouseup",this.mouseUpEventHandler,this),sf.base.EventHandler.add(document,"mouseup",this.mouseUpEventHandler,this),sf.base.EventHandler.add(this.lowerCanvas,"mousedown",this.canvasMouseDownHandler,this),sf.base.EventHandler.add(this.lowerCanvas,"mousemove",this.canvasMouseMoveHandler,this),sf.base.EventHandler.add(this.lowerCanvas,"mouseup",this.canvasMouseUpHandler,this),sf.base.EventHandler.add(document,"mouseup",this.canvasMouseUpHandler,this),sf.base.EventHandler.add(this.upperCanvas,"touchstart",this.touchStartHandler,this),sf.base.EventHandler.add(this.lowerCanvas,"touchstart",this.touchStartHandler,this),sf.base.EventHandler.add(this.upperCanvas,"dblclick",this.findTextPoint,this),sf.base.EventHandler.add(this.textArea,"mousedown",this.findTextPoint,this),sf.base.EventHandler.add(this.lowerCanvas,"mousewheel DOMMouseScroll",this.handleScroll,this),sf.base.EventHandler.add(this.upperCanvas,"mousewheel DOMMouseScroll",this.handleScroll,this),window.addEventListener("resize",this.windowResizeHandler.bind(this)),sf.base.Browser.isIos||"safari"===sf.base.Browser.info.name||screen.orientation.addEventListener("change",this.screenOrientation.bind(this))},t.prototype.unwireEvent=function(){sf.base.EventHandler.remove(document,"keydown",this.keyDownEventHandler),sf.base.EventHandler.remove(document,"keypress",this.keyUpEventHandler),sf.base.EventHandler.remove(this.upperCanvas,"mousedown",this.mouseDownEventHandler),sf.base.EventHandler.remove(this.upperCanvas,"mousemove",this.mouseMoveEventHandler),sf.base.EventHandler.remove(this.upperCanvas,"mouseup",this.mouseUpEventHandler),sf.base.EventHandler.remove(document,"mouseup",this.mouseUpEventHandler),sf.base.EventHandler.remove(this.lowerCanvas,"mousedown",this.canvasMouseDownHandler),sf.base.EventHandler.remove(this.lowerCanvas,"mousemove",this.canvasMouseMoveHandler),sf.base.EventHandler.remove(this.lowerCanvas,"mouseup",this.canvasMouseUpHandler),sf.base.EventHandler.remove(document,"mouseup",this.canvasMouseUpHandler)},t.prototype.destroySubComponents=function(){for(var e=this.element.querySelectorAll("input.e-control"),t=this.element.querySelectorAll("button.e-control"),i=0,s=e.length;i<s;i++)e[i].classList.contains("e-color-picker")&&(sf.base.getComponent(e[i],"color-picker").destroy(),sf.base.detach(sf.base.select("input#"+e[i].id,this.element)));for(i=0,s=t.length;i<s;i++)t[i].classList.contains("e-dropdown-btn")?(sf.base.getComponent(t[i],"dropdown-btn").destroy(),sf.base.detach(sf.base.select("button#"+t[i].id,this.element))):t[i].classList.contains("e-btn")&&(sf.base.getComponent(t[i],"btn").destroy(),sf.base.detach(sf.base.select("button#"+t[i].id,this.element)))},t.prototype.updateTheme=function(){""!==this.theme&&(this.theme=this.toPascalCase(this.theme))},t.prototype.toPascalCase=function(e){var t=[];sf.base.isNullOrUndefined(e)||(t=e.toLowerCase().split("-"));for(var i=0;i<t.length;i++)t[i]=t[i].charAt(0).toUpperCase()+t[i].slice(1);return t.join("")},t.prototype.createCanvas=function(){this.element.style.boxSizing="border-box";var e=this.toolbarHeight;this.element.style.width=this.width,this.element.style.height=this.height;var t=this.element.appendChild(this.createElement("div",{id:this.element.id+"_canvasWrapper",className:"e-canvas-wrapper",attrs:{style:"height:"+(this.element.offsetHeight-e-2)+"px; width:"+(this.element.offsetWidth-2)+"px; position: relative; overflow: hidden; margin: 0 auto;"}}));this.lowerCanvas=t.appendChild(this.createElement("canvas",{id:this.element.id+"_lowerCanvas",attrs:{name:"canvasImage"}})),this.upperCanvas=t.appendChild(this.createElement("canvas",{id:this.element.id+"_upperCanvas",attrs:{name:"canvasImage"}})),this.inMemoryCanvas=this.createElement("canvas",{id:this.element.id+"_inMemoryCanvas",attrs:{name:"canvasImage"}}),this.textArea=t.appendChild(this.createElement("textarea",{id:this.element.id+"_textArea",className:"e-textarea",attrs:{name:"textArea"}})),this.textArea.setAttribute("spellcheck","false"),this.lowerCanvas.style.width=this.upperCanvas.style.width=this.inMemoryCanvas.style.width="100%",this.lowerCanvas.style.height=this.upperCanvas.style.height=this.inMemoryCanvas.style.height="100%",this.upperCanvas.style.position=this.lowerCanvas.style.position=this.textArea.style.position="absolute",this.textArea.style.backgroundColor="transparent",this.textArea.style.display="none",this.textArea.style.resize="none",this.lowerContext=this.lowerCanvas.getContext("2d"),this.baseImg=this.createElement("img",{id:this.element.id+"_orgImg",attrs:{name:"Image",crossorigin:"anonymous"}}),this.upperCanvas.style.cursor="default",this.upperCanvas.style.display="none",this.upperContext=this.upperCanvas.getContext("2d"),this.inMemoryContext=this.inMemoryCanvas.getContext("2d")},t.prototype.cropSelectedState=function(){sf.base.isNullOrUndefined(this.activeObj.shape)||"crop"!==this.activeObj.shape.split("-")[0]||this.okBtn()},t.prototype.performTransformation=function(e){var t=this.defaultZoomFactor,i=this.isUndoRedo,s=sf.base.extend({},this.cropObj,{},!0);if(0!==this.defaultZoomFactor&&(this.transformCurrentObj=this.getCurrentObj(),this.transformCurrentObj.objColl=sf.base.extend([],this.objColl,null,!0),this.transformCurrentObj.pointColl=sf.base.extend({},this.pointColl,null,!0),this.transformCurrentObj.afterCropActions=sf.base.extend([],this.afterCropActions,[],!0),this.isUndoRedo=!0,this.defaultZoomFactor>0?this.zoom(-this.defaultZoomFactor):this.zoom(Math.abs(this.defaultZoomFactor)),this.isUndoRedo=i),this.updateTransform(e),0!==t){this.isUndoRedo=!0,this.zoom(t),this.isUndoRedo=i;var n="";"rotateleft"===e||"rotateright"===e?n="rotate":"horizontalflip"!==e&&"verticalflip"!==e||(n="flip"),this.updateUndoRedoColl(n,this.transformCurrentObj,this.transformCurrentObj.objColl,this.transformCurrentObj.pointColl,s),this.transformCurrentObj=null}},t.prototype.updateTransform=function(e){switch(e.toLowerCase()){case"rotateleft":this.rotate(-90);break;case"rotateright":this.rotate(90);break;case"horizontalflip":this.flip("Horizontal");break;case"verticalflip":this.flip("Vertical")}},t.prototype.pushActItemIntoObj=function(){if("none"===this.textArea.style.display)this.objColl.push(this.activeObj);else{var e=sf.base.extend({},this.activeObj,{},!0);this.setTextBoxStylesToActObj(),this.objColl.push(this.activeObj),this.activeObj=e}},t.prototype.getFontSizes=function(){var e,t=[];this.fontSizeColl=[],e=0===this.degree||this.degree%180==0?this.destWidth/25:this.destHeight/25;for(var i=1;i<=10;i++)this.fontSizeColl.push({text:(i*Math.round(e/2)).toString()}),t.push({text:i.toString()});return t},t.prototype.getTextAreaWidth=function(e){var t,i=this.activeObj.textSettings.bold,s=this.activeObj.textSettings.italic;switch(e){case"default":this.activeObj.textSettings.bold=!1,this.activeObj.textSettings.italic=!1;break;case"bold":this.activeObj.textSettings.bold=!0,this.activeObj.textSettings.italic=!1;break;case"italic":this.activeObj.textSettings.bold=!1,this.activeObj.textSettings.italic=!0;break;case"bolditalic":this.activeObj.textSettings.bold=!0,this.activeObj.textSettings.italic=!0}return this.updateFontStyles(),t="none"===this.textArea.style.display?this.upperContext.measureText(this.activeObj.keyHistory).width+.5*this.activeObj.textSettings.fontSize:this.upperContext.measureText(this.textArea.value).width+.5*this.activeObj.textSettings.fontSize,this.activeObj.textSettings.bold=i,this.activeObj.textSettings.italic=s,t},t.prototype.updateUndoRedoObj=function(e){if(this.allowUndoRedo){this.objColl.push(this.activeObj);var t=sf.base.extend({},this.cropObj,{},!0),i=this.getCurrentObj();i.objColl=sf.base.extend([],this.objColl,[],!0),i.pointColl=sf.base.extend([],this.pointColl,[],!0),i.afterCropActions=sf.base.extend([],this.afterCropActions,[],!0),this.undoRedoColl.push({operation:"shapeTransform",previousObj:i,currentObj:i,previousObjColl:e,currentObjColl:i.objColl,previousPointColl:i.pointColl,currentPointColl:i.pointColl,previousCropObj:t,currentCropObj:t}),this.undoRedoStep++,this.redrawShape(this.objColl[this.objColl.length-1])}},t.prototype.updateObjColl=function(e,t){var i=sf.base.extend({},this.cropObj,{},!0),s=this.getCurrentObj();s.objColl=t,s.pointColl=sf.base.extend([],this.pointColl,[],!0),s.afterCropActions=sf.base.extend([],this.afterCropActions,[],!0);var n=this.activeObj.textSettings.bold,o=this.activeObj.textSettings.italic;switch(e){case"default":this.activeObj.textSettings.bold=!1,this.activeObj.textSettings.italic=!1;break;case"bold":this.activeObj.textSettings.bold=!0,this.activeObj.textSettings.italic=!1;break;case"italic":this.activeObj.textSettings.bold=!1,this.activeObj.textSettings.italic=!0;break;case"bolditalic":this.activeObj.textSettings.bold=!0,this.activeObj.textSettings.italic=!0}this.objColl.push(this.activeObj),this.updateUndoRedoColl("textAreaCustomization",s,s.objColl,s.pointColl,i),this.objColl.pop(),this.activeObj.textSettings.bold=n,this.activeObj.textSettings.italic=o},t.prototype.applyFontStyle=function(e){this.pushActItemIntoObj();var t=sf.base.extend([],this.objColl,[],!0);switch(this.objColl.pop(),"none"===this.textArea.style.display?this.updateFontRatio(this.activeObj):this.updateFontRatio(this.activeObj,!0),e){case"default":if("block"===this.textArea.style.display){var i=this.getTextAreaWidth(e);this.textArea.style.width=i+"px",this.textArea.style.fontWeight="normal",this.textArea.style.fontStyle="normal",this.updateObjColl(e,t)}else this.textSettings.bold=this.activeObj.textSettings.bold=!1,this.textSettings.italic=this.activeObj.textSettings.italic=!1,this.redrawText(),this.updateUndoRedoObj(t);break;case"bold":if("block"===this.textArea.style.display){i=this.getTextAreaWidth(e);this.textArea.style.width=i+"px",this.textArea.style.fontWeight="bold",this.textArea.style.fontStyle="normal",this.updateObjColl(e,t)}else this.textSettings.bold=this.activeObj.textSettings.bold=!0,this.textSettings.italic=this.activeObj.textSettings.italic=!1,this.redrawText(),this.updateUndoRedoObj(t);break;case"italic":if("block"===this.textArea.style.display){i=this.getTextAreaWidth(e);this.textArea.style.width=i+"px",this.textArea.style.fontWeight="normal",this.textArea.style.fontStyle="italic",this.updateObjColl(e,t)}else this.textSettings.bold=this.activeObj.textSettings.bold=!1,this.textSettings.italic=this.activeObj.textSettings.italic=!0,this.redrawText(),this.updateUndoRedoObj(t);break;case"bolditalic":if("block"===this.textArea.style.display){i=this.getTextAreaWidth(e);this.textArea.style.width=i+"px",this.textArea.style.fontWeight="bold",this.textArea.style.fontStyle="italic",this.updateObjColl(e,t)}else this.textSettings.bold=this.activeObj.textSettings.bold=!0,this.textSettings.italic=this.activeObj.textSettings.italic=!0,this.redrawText(),this.updateUndoRedoObj(t)}},t.prototype.refreshUndoRedoColl=function(){this.undoRedoColl=this.undoRedoColl.slice(0,this.undoRedoStep),this.isUndoRedo=this.currObjType.isUndoAction=!1,this.enableDisableToolbarBtn()},t.prototype.applyPreviewFilter=function(){sf.base.isNullOrUndefined(document.querySelector("#"+this.element.id+"_sliderWrapper"))&&!this.currObjType.isFiltered||(this.initialAdjustmentValue=this.canvasFilter=this.lowerContext.filter,this.currObjType.isFiltered=!1)},t.prototype.performCancel=function(){this.isFreehandDrawEditing?this.cancelFreehandDraw():"block"===this.textArea.style.display?(this.textArea.style.display="none",this.textArea.value="",this.textArea.style.transform="",this.activeObj.strokeSettings=this.tempStrokeSettings,this.activeObj.textSettings=this.tempTextSettings):!sf.base.isNullOrUndefined(document.querySelector("e-slider"))||this.currObjType.isFiltered?(this.lowerContext.filter=this.adjustmentValue=this.initialAdjustmentValue=this.tempAdjustmentValue,this.lowerContext.filter.split(" ").length>1&&"1"===this.lowerContext.filter.split(" ")[0].split("(")[1].split(")")[0]&&(this.isBrightnessAdjusted=!1),this.currentFilter=this.tempFilter,this.lowerContext.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),this.redrawImgWithObj(),this.currObjType.isFiltered=!1,this.adjustmentLevel=sf.base.extend({},this.tempAdjustmentLevel,{},!0),this.undoRedoStep=this.tempUndoRedoStep,this.upperCanvas.style.cursor="default",this.currObjType.isCustomCrop=!1,this.tempStrokeSettings={strokeColor:"#fff",fillColor:"",strokeWidth:null}):(this.cancelItems(),this.togglePan=this.dragCanvas=!1),this.currentToolbar="main",this.enableDisableToolbarBtn()},t.prototype.applyShape=function(){sf.base.isNullOrUndefined(this.activeObj.shape)||"rectangle"!==this.activeObj.shape&&"ellipse"!==this.activeObj.shape&&"line"!==this.activeObj.shape&&"arrow"!==this.activeObj.shape&&"text"!==this.activeObj.shape||(this.redrawActObj(),this.refreshActiveObj(),this.currentToolbar="main")},t.prototype.applyFreehandDraw=function(){"#42a5f5"===this.pointColl[this.freehandDrawSelectedIndex].strokeColor&&(this.pointColl[this.freehandDrawSelectedIndex].strokeColor=this.tempFreeHandDrawEditingStyles.strokeColor),this.selectedFreehandColor="#42a5f5",this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.lowerContext.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),this.renderImage(),sf.base.isNullOrUndefined(this.pointColl[this.freehandDrawSelectedIndex])||(this.pointColl[this.freehandDrawSelectedIndex].isSelected=!1),this.isFreehandDrawEditing=this.isFreehandDrawingPoint=!1,this.freehandDrawHoveredIndex=this.freehandDrawSelectedIndex=null},t.prototype.cancelFreehandDraw=function(){this.selectedFreehandColor="#42a5f5",this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height);for(var e=0;e<this.freehandCounter;e++)this.pointColl[e].strokeColor=this.tempFreeHandDrawEditingStyles.strokeColor,this.pointColl[e].strokeWidth=this.tempFreeHandDrawEditingStyles.strokeWidth;this.pointCounter=0,sf.base.isNullOrUndefined(this.pointColl[this.freehandDrawSelectedIndex])||(this.pointColl[this.freehandDrawSelectedIndex].isSelected=!1),this.freehandDrawHoveredIndex=this.freehandDrawSelectedIndex=this.freehandDrawSelectedId=null,this.isFreehandDrawEditing=this.isFreehandDrawingPoint=!1,this.tempFreeHandDrawEditingStyles={strokeColor:null,strokeWidth:null,fillColor:null}},t.prototype.setTempFilterProperties=function(){this.upperCanvas.style.display="block",this.cropSelectedState(),this.lowerContext.filter=this.initialAdjustmentValue,this.tempAdjustmentValue=this.lowerContext.filter,this.tempAdjustmentLevel=sf.base.extend({},this.adjustmentLevel,{},!0),this.tempFilter=this.currentFilter,this.tempUndoRedoStep=this.undoRedoStep},t.prototype.okBtn=function(){var e,t=!1;void 0!==this.activeObj.shape&&(e=this.activeObj.shape.split("-")),(void 0===e&&this.currObjType.isCustomCrop||void 0!==e&&"crop"===e[0])&&(t=!0);var i=this.element.querySelector(".e-contextual-toolbar-wrapper .e-toolbar-item.e-selected");i&&(this.currentFilter=i.children[0].children[0].id.replace("Canvas","")),t?this.crop():this.togglePen?this.freeHandDraw(!1):"block"===this.textArea.style.display?this.redrawActObj():!sf.base.isNullOrUndefined(document.querySelector("#"+this.element.id+"_sliderWrapper"))||this.currObjType.isFiltered?(this.initialAdjustmentValue=this.canvasFilter=this.lowerContext.filter,this.currObjType.isFiltered=!1):this.isFreehandDrawEditing?this.applyFreehandDraw():this.applyActObj(),this.isCropTab=!1,this.zoomFactor=this.defaultZoomFactor},t.prototype.updateBrightnessFilter=function(){var e=this.lowerContext.filter.split(" ");if(this.isBrightnessAdjusted&&e.length>0&&!sf.base.isNullOrUndefined(e[4])){var t=parseFloat(e[4].split("(")[1]);e[4]="opacity("+(t-.3)+")",this.lowerContext.filter=e.join(" ")}},t.prototype.isFreehandDrawIndex=function(e){for(var t=!1,i=0;i<this.freehandCounter;i++)if(parseInt(this.pointColl[i].id.split("_")[1],10)-1===e){t=!0;break}return t},t.prototype.deleteFreehandDraw=function(e,t){if(this.isFreehandDrawIndex(e)){this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height);var i=sf.base.extend({},this.pointColl,{},!0);this.pointColl={};var s=0;if(sf.base.isNullOrUndefined(t))for(var n=0;n<this.freehandCounter;n++)n!==e&&(this.pointColl[s]=i[n],s++);else for(n=0;n<this.freehandCounter;n++)parseInt(i[n].id.split("_")[1],10)-1!==e&&(this.pointColl[s]=i[n],s++);this.freehandCounter-=1,this.freehandDrawHoveredIndex=this.freehandDrawSelectedIndex=null,this.isFreehandDrawEditing=this.isFreehandDrawingPoint=!1,this.renderImage()}},t.prototype.callUndo=function(){this.currObjType.isFiltered=!1,0===this.zoomFactor&&(this.dragCanvas=this.togglePan=!1),this.togglePen&&(this.togglePen=!1,this.upperCanvas.style.cursor="default",this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height)),this.undo()},t.prototype.callRedo=function(){this.currObjType.isFiltered=!1,0===this.zoomFactor&&(this.dragCanvas=this.togglePan=!1),this.redo()},t.prototype.iterateObjColl=function(){for(var e=0;e<this.objColl.length;e++)this.apply(this.objColl[e].shape,this.objColl[e]),this.refreshActiveObj()},t.prototype.updateAdjustment=function(e,t,i){this.lowerContext.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height);var s,n,o=this.lowerContext.filter.split(" "),r=[];void 0!==o[4]&&(s=parseFloat(o[4].split("(")[1])),void 0!==o[0]&&(n=parseFloat(o[0].split("(")[1]));var a,l,h,d,c,p=this.getFilterValue(this.adjustmentLevel.brightness),u=this.getFilterValue(this.adjustmentLevel.saturation);if("brightness"!==e&&"contrast"!==e&&"hue"!==e&&"saturation"!==e&&"exposure"!==e&&"opacity"!==e&&"blur"!==e&&sf.base.isNullOrUndefined(i)&&(this.adjustmentLevel.sharpen||this.adjustmentLevel.bw)){this.isUndoRedo=!0;var f=this.lowerContext.filter;this.lowerContext.filter="none",this.iterateObjColl(),this.freehandRedraw(this.lowerContext),this.lowerContext.filter=f,this.isUndoRedo=!1}switch(1!==p&&(o[4]="opacity("+(s-.3)+")"),e){case"brightness":100!==parseFloat(o[3].split("(")[1])&&(t+=.1),o[0]="brightness("+t+")",this.adjustmentValue=o.join(" ");break;case"contrast":o[1]="contrast("+t+"%)",this.adjustmentValue=o.join(" ");break;case"hue":o[2]="hue-rotate("+t+"deg)",this.adjustmentValue=o.join(" ");break;case"saturation":o[3]="saturate("+t+"%)",1!==u&&(o[0]="brightness("+(n+.1)+")"),this.adjustmentValue=o.join(" ");break;case"opacity":1!==parseFloat(o[0].split("(")[1])&&(t-=.2),o[4]="opacity("+t+")",this.adjustmentValue=o.join(" ");break;case"blur":o[5]="blur("+t+"px)",this.adjustmentValue=o.join(" ");break;case"exposure":1!==p&&(o[4]="opacity("+(s-.3)+")"),t>1?(t-=1,t+=p):t<1&&(t=p-(t=1-t)),o[0]="brightness("+t+")",this.adjustmentValue=o.join(" ");break;case"chrome":a=this.getSaturationFilterValue(this.adjustmentLevel.saturation),t=(a*=100)+.4*a,o[3]="saturate("+t+"%)",r=this.adjustmentValue.split(" "),o[0]=r[0],o[1]=r[1],o[2]=r[2],o[4]=r[4],o[5]=r[5],o[6]="sepia(0%)",o[7]="grayscale(0%)",o[8]="invert(0%)";break;case"cold":l=this.getFilterValue(this.adjustmentLevel.brightness),t=.9*(l*=100),o[0]="brightness("+t+"%)",d=this.getFilterValue(this.adjustmentLevel.contrast),t=(d*=100)+.5*d,o[1]="contrast("+t+"%)",c=this.getSaturationFilterValue(this.adjustmentLevel.saturation),t=c*=100,o[3]="saturate("+t+"%)",r=this.adjustmentValue.split(" "),o[2]=r[2],o[4]=r[4],o[5]=r[5],o[6]="sepia(0%)",o[7]="grayscale(0%)",o[8]="invert(0%)";break;case"warm":h=this.getSaturationFilterValue(this.adjustmentLevel.saturation),t=(h*=100)+.4*h,o[3]="saturate("+t+"%)",o[6]="sepia(25%)",r=this.adjustmentValue.split(" "),o[0]=r[0],o[1]=r[1],o[2]=r[2],o[4]=r[4],o[5]=r[5],o[7]="grayscale(0%)",o[8]="invert(0%)";break;case"grayscale":o[7]="grayscale(100%)",r=this.adjustmentValue.split(" "),o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[4]=r[4],o[5]=r[5],o[6]="sepia(0%)",o[8]="invert(0%)";break;case"sepia":o[6]="sepia(100%)",r=this.adjustmentValue.split(" "),o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[4]=r[4],o[5]=r[5],o[7]="grayscale(0%)",o[8]="invert(0%)";break;case"invert":o[8]="invert(100%)",r=this.adjustmentValue.split(" "),o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[4]=r[4],o[5]=r[5],o[6]="sepia(0%)",o[7]="grayscale(0%)"}if("sharpen"!==e&&"blackandwhite"!==e){sf.base.isNullOrUndefined(i)&&("default"===e&&(o=this.getDefaultCurrentFilter(o)),this.lowerContext.filter=o.join(" ")),o=this.setTempFilterValue(p,i,o,e),this.isRotateZoom=!0,this.updateCurrentTransformedState("initial"),this.lowerContext.drawImage(this.baseImg,this.srcLeft,this.srcTop,this.srcWidth,this.srcHeight,this.destLeft,this.destTop,this.destWidth,this.destHeight),this.updateCurrentTransformedState("reverse"),this.isRotateZoom=!1,1!==p?o[4]="opacity("+s+")":1!==u&&(o[0]="brightness("+n+")"),"exposure"===e&&1!==p&&(o[0]="brightness("+n+")"),"saturation"===e&&1!==u&&(o[0]="brightness("+n+")"),o=this.setTempFilterValue(p,i,o,e),sf.base.isNullOrUndefined(i)&&(this.lowerContext.filter=this.initialAdjustmentValue=o.join(" "));var g=this.lowerContext.filter;this.lowerContext.filter=this.getDefaultFilter(),this.iterateObjColl(),this.freehandRedraw(this.lowerContext),this.lowerContext.filter=g,(!sf.base.isNullOrUndefined(this.currSelectionPoint)&&"crop-circle"===this.currSelectionPoint.shape||this.isCircleCrop)&&this.cropCircle(this.lowerContext),this.isBrightnessAdjusted=1!==p}return o.join(" ")},t.prototype.autoEnablePan=function(){0===this.zoomFactor?(this.dragCanvas=this.togglePan=!1,this.pan(!1),this.disablePan=!1):this.disablePan?this.disablePan&&this.pan(!1):this.pan(!0)},t.prototype.setTempFilterValue=function(e,t,i,s){if(t&&1!==e){var n=this.lowerContext.filter.split(" ");n[4]=i[4],this.lowerContext.filter=n.join(" ")}else t&&"default"===s&&(i=this.getDefaultCurrentFilter(i));return i},t.prototype.getDefaultCurrentFilter=function(e){var t=this.adjustmentValue.split(" ");return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]="sepia(0%)",e[7]="grayscale(0%)",e[8]="invert(0%)",e},t.prototype.getCurrAdjustmentValue=function(e){var t;switch(e){case"brightness":t=this.adjustmentLevel.brightness;break;case"contrast":t=this.adjustmentLevel.contrast;break;case"hue":t=this.adjustmentLevel.hue;break;case"saturation":t=this.adjustmentLevel.saturation;break;case"opacity":t=this.adjustmentLevel.opacity;break;case"blur":t=this.adjustmentLevel.blur;break;case"exposure":t=this.adjustmentLevel.exposure}return t},t.prototype.setCurrAdjustmentValue=function(e,t){var i=this,s={finetune:this.toPascalCase(e),value:t,cancel:!1};this.dotnetRef.invokeMethodAsync("OnFinetuneValueChange",s).then((function(){if(!s.cancel)switch(e){case"brightness":i.setBrightness(t);break;case"contrast":i.setContrast(t);break;case"hue":i.setHue(t);break;case"saturation":i.setSaturation(t);break;case"opacity":i.setOpacity(t);break;case"blur":i.setBlur(t);break;case"exposure":i.setExposure(t)}}))},t.prototype.cancelPan=function(){this.applyActObj();var e=this.element.querySelector(".e-img-pan .e-btn");sf.base.isNullOrUndefined(e)||e.classList.remove("e-selected-btn"),this.pan(!1)},t.prototype.setCurrSelectionPoints=function(e){if(this.srcLeft=0,this.srcTop=0,this.srcWidth=this.baseImg.width,this.srcHeight=this.baseImg.height,this.destLeft=this.cropDestPoints.startX,this.destTop=this.cropDestPoints.startY,this.destWidth=this.cropDestPoints.width,this.destHeight=this.cropDestPoints.height,this.lowerContext.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),e&&this.setDestinationPoints(),this.currentTransformedState("initial"),0!==this.croppedDegree||0!==this.degree||sf.base.isNullOrUndefined(this.currSelectionPoint)||"crop-circle"===this.currSelectionPoint.shape||"crop-square"===this.currSelectionPoint.shape||(this.destLeft=this.cropDestPoints.startX,this.destTop=this.cropDestPoints.startY,this.destWidth=this.cropDestPoints.width,this.destHeight=this.cropDestPoints.height),0===this.degree&&(this.destLeft+=this.totalPannedInternalPoint.x,this.destTop+=this.totalPannedInternalPoint.y),this.updateBrightnessFilter(),this.lowerContext.drawImage(this.baseImg,this.srcLeft,this.srcTop,this.srcWidth,this.srcHeight,this.destLeft,this.destTop,this.destWidth,this.destHeight),this.currentTransformedState("reverse",null,null,!0),sf.base.isNullOrUndefined(this.cropObj.activeObj.shape)){var t=this.lowerContext.filter;this.lowerContext.filter="none",this.iterateObjColl(),this.freehandRedraw(this.lowerContext),this.lowerContext.filter=t,this.currSelectionPoint=null}else{if(this.cropObj.cropZoom>0){var i=this.isUndoRedo;this.isUndoRedo=!0;var s=sf.base.extend([],this.objColl,null,!0),n=sf.base.extend([],this.pointColl,null,!0);this.objColl=[],this.pointColl=[],this.freehandCounter=0,this.zoom(this.cropObj.cropZoom),this.objColl=s,this.pointColl=n,this.freehandCounter=this.pointColl.length,this.isUndoRedo=i,this.currSelectionPoint=sf.base.extend({},this.cropObj.activeObj,null,!0),""!==this.cropObj.currFlipState&&(this.cropObj.totalPannedPoint.x+=this.cropObj.tempFlipPanPoint.x,this.cropObj.totalPannedPoint.y+=this.cropObj.tempFlipPanPoint.y)}var o={startX:this.destLeft,startY:this.destTop,width:this.destWidth,height:this.destHeight};this.destLeft=this.currSelectionPoint.activePoint.startX,this.destTop=this.currSelectionPoint.activePoint.startY,this.destWidth=this.currSelectionPoint.activePoint.width,this.destHeight=this.currSelectionPoint.activePoint.height,this.zoomObjColl(),this.zoomFreehandDrawColl(),this.destLeft=o.startX,this.destTop=o.startY,this.destWidth=o.width,this.destHeight=o.height,this.updatePannedRegion(),this.updateObjAndFreeHandDrawColl();var r=sf.base.extend([],this.objColl,null,!0),a=sf.base.extend([],this.pointColl,null,!0);this.objColl=[],this.pointColl=[],this.freehandCounter=0,this.setCurrentObj();var l=sf.base.extend({},this.activeObj,null,!0);this.refreshActiveObj(),this.objColl=r,this.pointColl=a,this.freehandCounter=this.pointColl.length,this.zoomObjColl(),this.zoomFreehandDrawColl(),this.currSelectionPoint=null,0===this.degree&&this.drawPannImage({x:0,y:0}),this.activeObj=l,this.drawObject("duplicate")}},t.prototype.updatePannedRegion=function(){var e=0===this.degree?this.cropObj.totalPannedPoint:this.cropObj.totalPannedClientPoint;this.currFlipState===this.cropObj.currFlipState||"horizontal"===this.currFlipState&&""===this.cropObj.currFlipState||"vertical"===this.currFlipState&&""===this.cropObj.currFlipState?(this.panObjColl(-e.x,-e.y,""),this.panFreehandDrawColl(-e.x,-e.y,"")):""===this.currFlipState&&"horizontal"===this.cropObj.currFlipState?(this.panObjColl(e.x,-e.y,""),this.panFreehandDrawColl(e.x,-e.y,"")):""===this.currFlipState&&"vertical"===this.cropObj.currFlipState&&(this.panObjColl(-e.x,e.y,""),this.panFreehandDrawColl(-e.x,e.y,""))},t.prototype.updateObjAndFreeHandDrawColl=function(){for(var e=0;e<this.objColl.length;e++)this.objColl[e].imageRatio={startX:(this.objColl[e].activePoint.startX-this.destLeft)/this.destWidth,startY:(this.objColl[e].activePoint.startY-this.destTop)/this.destHeight,endX:(this.objColl[e].activePoint.endX-this.destLeft)/this.destWidth,endY:(this.objColl[e].activePoint.endY-this.destTop)/this.destHeight,width:this.destWidth/this.objColl[e].activePoint.width,height:this.destHeight/this.objColl[e].activePoint.height},this.refreshActiveObj();for(var t=0;t<this.freehandCounter;t++){this.points=sf.base.extend([],this.pointColl[t].points,[]),this.pointCounter=0;for(var i=this.points.length,s=0;s<i;s++)this.points[s].ratioX=(this.points[s].x-this.destLeft)/this.destWidth,this.points[s].ratioY=(this.points[s].y-this.destTop)/this.destHeight}},t.prototype.cancelItems=function(){var e,t=!1;if(void 0!==this.activeObj.shape&&(e=this.activeObj.shape.split("-")),(void 0===e&&this.currObjType.isCustomCrop||void 0!==e&&"crop"===e[0])&&(t=!0),t&&this.isCropTab&&(this.isCropTab=!1,this.zoomFactor=this.defaultZoomFactor),this.togglePen){this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.togglePen=!1,this.upperCanvas.style.cursor="default";var i=sf.base.extend([],this.pointColl,[],!0);this.pointColl={};for(var s=0;s<this.tempFreehandCounter;s++)this.pointColl[s]=i[s];this.freehandCounter=this.tempFreehandCounter,this.currentFreehandDrawIndex=this.tempCurrentFreehandDrawIndex}else if("text"===this.activeObj.shape)sf.base.isNullOrUndefined(this.activeObj.currIndex)?(this.refreshActiveObj(),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height)):(this.activeObj.strokeSettings=this.tempStrokeSettings,this.activeObj.textSettings=this.tempTextSettings,"Enter Text"===this.activeObj.keyHistory&&this.activeObj.activePoint.startX===this.textStartPoints.x&&this.activeObj.activePoint.startY===this.textStartPoints.y?(this.refreshActiveObj(),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.textSettings=this.tempTextSettings,this.strokeSettings=this.tempStrokeSettings,this.drawShapeText(),this.applyActObj()):(this.redrawText(),this.redrawShape(this.activeObj),t||void 0===this.activeObj.topLeftCircle||this.applyActObj(),this.clearSelection())),this.tempTextSettings={text:"Enter Text",fontFamily:"Arial",fontSize:null,fontRatio:null,bold:!1,italic:!1,underline:!1};else if("rectangle"===this.activeObj.shape||"ellipse"===this.activeObj.shape||"line"===this.activeObj.shape||"arrow"===this.activeObj.shape)sf.base.isNullOrUndefined(this.activeObj.currIndex)?(this.refreshActiveObj(),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height)):(this.activeObj.strokeSettings=this.tempStrokeSettings,this.redrawShape(this.activeObj),this.applyActObj());else if(this.zoomFactor!==this.tempZoomFactor||t&&sf.base.isNullOrUndefined(this.currSelectionPoint)){var n=this.cropZoomFactor-this.tempZoomFactor;if(this.zoomFactor=this.cropZoomFactor,sf.base.isNullOrUndefined(this.cropObj.activeObj.shape)&&(0===this.degree&&0===this.totalPannedPoint.x&&0===this.totalPannedPoint.y||0!==this.degree&&0===this.totalPannedInternalPoint.x&&0===this.totalPannedInternalPoint.y&&0===this.totalPannedClientPoint.x&&0===this.totalPannedClientPoint.y))return this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.refreshActiveObj(),n>0?this.zoom(-n):this.zoom(Math.abs(n)),this.cropZoomFactor=this.tempZoomFactor,this.currObjType.isCustomCrop=!1,this.upperCanvas.style.cursor="default",this.currObjType.isCustomCrop=!1,void(this.tempStrokeSettings={strokeColor:"#fff",fillColor:"",strokeWidth:null});if(sf.base.isNullOrUndefined(this.cropObj.activeObj.shape)){if(0===this.degree){var o=sf.base.extend({},this.activeObj,{});this.destLeft+=-this.totalPannedPoint.x,this.destTop+=-this.totalPannedPoint.y,this.drawPannImage({x:-this.totalPannedPoint.x,y:-this.totalPannedPoint.y}),this.updateFlipPan(o),this.totalPannedPoint={x:0,y:0}}else this.totalPannedClientPoint={x:-this.totalPannedClientPoint.x,y:-this.totalPannedClientPoint.y},this.totalPannedInternalPoint={x:-this.totalPannedInternalPoint.x,y:-this.totalPannedInternalPoint.y},this.rotatePan(!0),this.totalPannedClientPoint={x:0,y:0},this.totalPannedInternalPoint={x:0,y:0},this.currentPannedPoint={x:0,y:0};this.refreshActiveObj(),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),n>0?this.zoom(-n):this.zoom(Math.abs(n)),this.cropZoomFactor=this.tempZoomFactor}else{this.isCancelAction=!0,this.objColl=[],this.pointColl=[];var r=this.freehandCounter;this.freehandCounter=0;var a=sf.base.extend({},this.cropObj,{}),l=sf.base.extend([],this.afterCropActions,{},!0);this.setCurrentObj(),this.cropImg(),this.cropObj=a,this.afterCropActions=l,this.objColl=sf.base.extend([],this.cancelObjColl,[],!0),this.pointColl=sf.base.extend([],this.cancelPointColl,[],!0),this.freehandCounter=r,this.iterateObjColl(),this.freehandRedraw(this.lowerContext),this.clearOuterCanvas(this.lowerContext),this.isCircleCrop&&this.cropCircle(this.lowerContext),this.isCancelAction=!1}this.zoomFactor=this.defaultZoomFactor,this.enableDisableToolbarBtn()}else this.refreshActiveObj(),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height);this.upperCanvas.style.cursor="default",this.currObjType.isCustomCrop=!1,this.tempStrokeSettings={strokeColor:"#fff",fillColor:"",strokeWidth:null}},t.prototype.freehandDownHandler=function(e,t){this.freehandDrawObj.time=(new Date).getTime(),this.isFreehandDrawing=!0,"mousedown"===e.type?this.freehandDownPoint={x:e.clientX,y:e.clientY}:this.freehandDownPoint={x:e.touches[0].clientX,y:e.touches[0].clientY},this.isFreehandPointMoved=!1,sf.base.EventHandler.add(t,"mousemove touchmove",this.freehandMoveHandler,this)},t.prototype.freehandUpHandler=function(e,t,i){var s=t.getBoundingClientRect();sf.base.EventHandler.remove(t,"mousemove touchmove",this.freehandMoveHandler),0===this.points.length&&("mouseup"===e.type?this.processPoint(e.clientX-s.left,e.clientY-s.top,!0,i):this.isFreehandPointMoved||this.processPoint(this.freehandDownPoint.x-s.left,this.freehandDownPoint.y-s.top,!0,i)),i.closePath();var n=sf.base.extend({},this.cropObj,{},!0),o=this.getCurrentObj();o.objColl=sf.base.extend([],this.objColl,[],!0),o.pointColl=sf.base.extend([],this.pointColl,[],!0),o.afterCropActions=sf.base.extend([],this.afterCropActions,[],!0),this.pointColl[this.freehandCounter]={},this.pointColl[this.freehandCounter].points=sf.base.extend([],this.points),this.pointColl[this.freehandCounter].strokeColor=this.activeObj.strokeSettings.strokeColor,this.pointColl[this.freehandCounter].strokeWidth=this.penStrokeWidth,this.pointColl[this.freehandCounter].flipState=this.currFlipState,this.pointColl[this.freehandCounter].id="pen_"+(this.currentFreehandDrawIndex+1),this.points=[],this.pointCounter=0,this.freehandCounter++,this.currentFreehandDrawIndex++,this.isFreehandDrawing=!1,this.updateUndoRedoColl("freehanddraw",o,o.objColl,o.pointColl,n)},t.prototype.freehandMoveHandler=function(e){this.isFreehandPointMoved=!0;var t,i,s=this.upperCanvas.getBoundingClientRect();"mousemove"===e.type?(t=e.clientX-s.left,i=e.clientY-s.top):(t=e.touches[0].clientX-s.left,i=e.touches[0].clientY-s.top),this.isFreehandDrawing&&this.processPoint(t,i,!1,this.upperContext)},t.prototype.processPoint=function(e,t,i,s){var n,o,r,a,l=this.point(e,t,(new Date).getTime()),h=!!(l=this.points.length>0&&this.points[this.points.length-1])&&this.distanceTo(l)<=5;if(!l||!l||!h||i){if(this.freehandDrawObj.time=(new Date).getTime(),this.points.push({x:e,y:t,ratioX:(e-this.destLeft)/this.destWidth,ratioY:(t-this.destTop)/this.destHeight,time:this.freehandDrawObj.time}),this.points.length>3){n=this.calcCurveControlPoints(this.points[this.pointCounter+0],this.points[this.pointCounter+1],this.points[this.pointCounter+2]).controlPoint2,o=this.calcCurveControlPoints(this.points[this.pointCounter+1],this.points[this.pointCounter+2],this.points[this.pointCounter+3]).controlPoint1,r=this.points[this.pointCounter+1],a=this.points[this.pointCounter+2];var d=.5,c=5;sf.base.isNullOrUndefined(this.penStrokeWidth)||(d=c=this.penStrokeWidth),this.startDraw(s,n,o,r,a,d,c),this.pointCounter++}if(i){n=o=r=a={x:e,y:t,time:(new Date).getTime()};d=.5,c=5;sf.base.isNullOrUndefined(this.penStrokeWidth)||(d=c=this.penStrokeWidth),this.startDraw(s,n,o,r,a,d,c)}}},t.prototype.calcCurveControlPoints=function(e,t,i){t||(t=e),i||(i=t);var s=e.x-t.x,n=e.y-t.y,o=t.x-i.x,r=t.y-i.y,a=(e.x+t.x)/2,l=(e.y+t.y)/2,h=(t.x+i.x)/2,d=(t.y+i.y)/2,c=Math.sqrt(s*s+n*n),p=Math.sqrt(o*o+r*r),u=p/(c+p),f=h+(a-h)*u,g=d+(l-d)*u,m=t.x-f,v=t.y-g;return{controlPoint1:this.point(a+m,l+v,0),controlPoint2:this.point(h+m,d+v,0)}},t.prototype.point=function(e,t,i){return this.freehandDrawObj.pointX=e,this.freehandDrawObj.pointY=t,{x:this.freehandDrawObj.pointX,y:this.freehandDrawObj.pointY,time:i}},t.prototype.startDraw=function(e,t,i,s,n,o,r){var a;a=.7*(a=this.pointVelocity(s))+(1-.7)*this.freehandDrawObj.lastVelocity;var l=Math.max(r/1.7,o);this.drawCurve(this.freehandDrawObj.time,l,e,t,i,s,n,r),this.freehandDrawObj.lastVelocity=a,this.freehandDrawObj.time=l},t.prototype.pointVelocity=function(e){return this.freehandDrawObj.time!==e.time?this.distanceTo(e)/(this.freehandDrawObj.time-e.time):0},t.prototype.distanceTo=function(e){return Math.sqrt(Math.pow(this.freehandDrawObj.pointX-e.x,2)+Math.pow(this.freehandDrawObj.pointY-e.y,2))},t.prototype.drawCurve=function(e,t,i,s,n,o,r,a){var l,h,d,c,p,u,f,g,m,v,b=t-e,y=this.bezierLength(s,n,o,r),M=2*Math.ceil(y);for(i.beginPath(),h=0;h<M;h++)p=(c=(d=h/M)*d)*d,m=(g=(f=(u=1-d)*u)*u)*o.x,m+=3*f*d*s.x,m+=3*u*c*n.x,m+=p*r.x,v=g*o.y,v+=3*f*d*s.y,v+=3*u*c*n.y,v+=p*r.y,l=Math.min(e+p*b,a),this.drawArc(m,v,l,i);i.closePath(),i.fill()},t.prototype.bezierLength=function(e,t,i,s){var n,o,r,a,l,h,d,c,p=0;for(n=0;n<=10;n++)o=n/10,r=this.bezierPoint(o,i.x,e.x,t.x,s.x),a=this.bezierPoint(o,i.y,e.y,t.y,s.y),n>0&&(d=r-l,c=a-h,p+=Math.sqrt(d*d+c*c)),l=r,h=a;return p},t.prototype.bezierPoint=function(e,t,i,s,n){return t*(1-e)*(1-e)*(1-e)+3*i*(1-e)*(1-e)*e+3*s*(1-e)*e*e+n*e*e*e},t.prototype.drawArc=function(e,t,i,s){(e>this.destLeft&&t>this.destTop&&e<this.destLeft+this.destWidth&&t<this.destTop+this.destHeight||s!==this.lowerContext&&s!==this.upperContext)&&(s.moveTo(e,t),s.arc(e,t,i,0,2*Math.PI,!1))},t.prototype.freehandRedraw=function(e,t){var i=e.filter;e.filter="none",sf.base.isNullOrUndefined(t)||(this.pointColl[this.freehandCounter]={},this.pointColl[this.freehandCounter].points=t,this.pointColl[this.freehandCounter].strokeColor=this.activeObj.strokeSettings.strokeColor,this.pointColl[this.freehandCounter].strokeWidth=this.penStrokeWidth,this.pointColl[this.freehandCounter].flipState=this.currFlipState,this.freehandCounter++);for(var s=0;s<this.freehandCounter;s++){this.points=sf.base.extend([],this.pointColl[s].points),this.pointCounter=0;var n=this.points.length,o=void 0,r=void 0,a=void 0,l=void 0,h=void 0,d=void 0;n>0&&(e.fillStyle=this.pointColl[s].strokeColor,h=d=this.penStrokeWidth=this.pointColl[s].strokeWidth),1===n&&(o=r=a=l=this.points[0],this.startDraw(e,o,r,a,l,h,d));for(var c=0;c<n-3;c++)this.points[c+1]&&this.points[c+2]&&this.points[c+2]&&(o=this.calcCurveControlPoints(this.points[c+0],this.points[c+1],this.points[c+2]).controlPoint2,r=this.calcCurveControlPoints(this.points[c+1],this.points[c+2],this.points[c+3]).controlPoint1,a=this.points[c+1],l=this.points[c+2],this.startDraw(e,o,r,a,l,h,d));e.closePath()}e.filter=i},t.prototype.redrawImgWithObj=function(){this.lowerContext.filter=this.canvasFilter,this.getCurrentFlipState(),this.isCircleCrop&&this.cropCircle(this.lowerContext);var e=this.lowerContext.filter;this.lowerContext.filter=this.getDefaultFilter(),this.iterateObjColl(),this.freehandRedraw(this.lowerContext),this.lowerContext.filter=e},t.prototype.updateFreehandDrawColorChange=function(){sf.base.isNullOrUndefined(this.freehandDrawSelectedIndex)||sf.base.isNullOrUndefined(this.pointColl[this.freehandDrawSelectedIndex])||"#42a5f5"!==this.pointColl[this.freehandDrawSelectedIndex].strokeColor||(this.pointColl[this.freehandDrawSelectedIndex].strokeColor=this.tempFreeHandDrawEditingStyles.strokeColor)},t.prototype.setPenStroke=function(e){switch(parseInt(e,10)){case 1:this.penStrokeWidth=1;break;case 2:this.penStrokeWidth=2;break;case 3:this.penStrokeWidth=3;break;case 4:this.penStrokeWidth=4;break;case 5:this.penStrokeWidth=5}},t.prototype.getPenStroke=function(e){var t="";return 1===e?t=this.l10n.getConstant("XSmall"):2===e?t=this.l10n.getConstant("Small"):3===e?t=this.l10n.getConstant("Medium"):4===e?t=this.l10n.getConstant("Large"):5===e&&(t=this.l10n.getConstant("XLarge")),t},t.prototype.getCurrentCanvasData=function(){var e=this.lowerContext.filter;this.lowerContext.filter="none";var t=sf.base.extend([],this.objColl,null,!0);this.objColl=[],this.renderImage();var i=this.lowerContext.getImageData(this.destLeft,this.destTop,this.destWidth,this.destHeight);return this.objColl=t,this.iterateObjColl(),this.lowerContext.filter=e,i},t.prototype.createCanvasFilter=function(){var e=this.getCurrentCanvasData();this.inMemoryCanvas.width=e.width,this.inMemoryCanvas.height=e.height,this.inMemoryContext.putImageData(e,0,0);var t=document.querySelector("#"+this.element.id+"_defaultCanvas"),i=t.getContext("2d");t.style.width="100px",t.style.height="100px",i.filter=this.updateAdjustment("default",null,!0),i.drawImage(this.inMemoryCanvas,0,0,300,150);var s=document.querySelector("#"+this.element.id+"_chromeCanvas");i=s.getContext("2d"),s.style.width="100px",s.style.height="100px",i.filter=this.updateAdjustment("chrome",null,!0),i.drawImage(this.inMemoryCanvas,0,0,300,150);var n=document.querySelector("#"+this.element.id+"_coldCanvas");i=n.getContext("2d"),n.style.width="100px",n.style.height="100px",i.filter=this.updateAdjustment("cold",null,!0),i.drawImage(this.inMemoryCanvas,0,0,300,150);var o=document.querySelector("#"+this.element.id+"_warmCanvas");i=o.getContext("2d"),o.style.width="100px",o.style.height="100px",i.filter=this.updateAdjustment("warm",null,!0),i.drawImage(this.inMemoryCanvas,0,0,300,150);var r=document.querySelector("#"+this.element.id+"_grayscaleCanvas");i=r.getContext("2d"),r.style.width="100px",r.style.height="100px",i.filter=this.updateAdjustment("grayscale",null,!0),i.drawImage(this.inMemoryCanvas,0,0,300,150);var a=document.querySelector("#"+this.element.id+"_sepiaCanvas");i=a.getContext("2d"),a.style.width="100px",a.style.height="100px",i.filter=this.updateAdjustment("sepia",null,!0),i.drawImage(this.inMemoryCanvas,0,0,300,150);var l=document.querySelector("#"+this.element.id+"_invertCanvas");i=l.getContext("2d"),l.style.width="100px",l.style.height="100px",i.filter=this.updateAdjustment("invert",null,!0),i.drawImage(this.inMemoryCanvas,0,0,300,150)},t.prototype.callUpdateCurrentTransformedState=function(){var e=sf.base.extend([],this.objColl,[],!0),t=sf.base.extend({},this.activeObj,{},!0);this.objColl=[],this.refreshActiveObj(),this.isRotateZoom=!0,this.updateCurrentTransformedState("initial"),0===this.degree&&this.rotateFlipColl.length>0&&(this.destLeft+=this.totalPannedPoint.x,this.destTop+=this.totalPannedPoint.y),this.destLeft+=this.totalPannedInternalPoint.x,this.destTop+=this.totalPannedInternalPoint.y;var i=this.lowerContext.filter;0===this.degree&&this.setDestPointsForFlipState(),this.updateBrightnessFilter(),this.lowerContext.drawImage(this.baseImg,this.srcLeft,this.srcTop,this.srcWidth,this.srcHeight,this.destLeft,this.destTop,this.destWidth,this.destHeight),this.updateCurrentTransformedState("reverse"),0===this.degree&&this.rotateFlipColl.length>0&&(this.destLeft+=this.totalPannedPoint.x,this.destTop+=this.totalPannedPoint.y),this.isRotateZoom=!1,this.objColl=e;var s=this.togglePen;this.togglePen=!1,this.lowerContext.filter="none",this.iterateObjColl(),this.destLeft+=this.totalPannedInternalPoint.x,this.destTop+=this.totalPannedInternalPoint.y,this.freehandRedraw(this.lowerContext),this.destLeft-=this.totalPannedInternalPoint.x,this.destTop-=this.totalPannedInternalPoint.y,this.togglePen=s,this.lowerContext.filter=i,this.activeObj=t},t.prototype.updateCurrentTransformedState=function(e,t,i){this.rotateFlipColl.length>0&&("initial"===e&&(this.reverseTransformedState(),sf.base.isNullOrUndefined(t)&&this.setDestinationPoints()),this.currentTransformedState(e,null,null,i)),(this.isCircleCrop||!sf.base.isNullOrUndefined(this.currSelectionPoint)&&"crop-circle"===this.currSelectionPoint.shape)&&(i&&(this.destLeft+=this.totalPannedClientPoint.x,this.destTop+=this.totalPannedClientPoint.y),this.cropCircle(this.lowerContext),i&&(this.destLeft-=this.totalPannedClientPoint.x,this.destTop-=this.totalPannedClientPoint.y))},t.prototype.reverseTransformedState=function(){this.lowerContext.setTransform(1,0,0,1,0,0)},t.prototype.currentTransformedState=function(e,t,i,s){i=i||this.lowerContext,"initial"===e?this.iterateRotateFlipColl(i,e):"reverse"===e&&(this.iterateRotateFlipColl(i,e),this.setClientTransformedDimension(t),(this.isCircleCrop||!sf.base.isNullOrUndefined(this.currSelectionPoint)&&"crop-circle"===this.currSelectionPoint.shape&&sf.base.isNullOrUndefined(s))&&(s&&(this.destLeft+=this.totalPannedClientPoint.x,this.destTop+=this.totalPannedClientPoint.y),this.cropCircle(this.lowerContext),s&&(this.destLeft-=this.totalPannedClientPoint.x,this.destTop-=this.totalPannedClientPoint.y)))},t.prototype.iterateRotateFlipColl=function(e,t){if("initial"===t)for(var i=0;i<this.rotateFlipColl.length;i++)this.setTransform(e,this.rotateFlipColl[i]);else if("reverse"===t)for(i=this.rotateFlipColl.length-1;i>=0;i--)this.setTransform(e,this.rotateFlipColl[i],!0)},t.prototype.setTransform=function(e,t,i){switch(i&&90===t?t=-90:i&&-90===t&&(t=90),"horizontal"===t&&this.degree%90==0&&this.degree%180!=0?t="vertical":"vertical"===t&&this.degree%90==0&&this.degree%180!=0&&(t="horizontal"),this.isReverseRotate=this.isReverseFlip=!0,sf.base.isNullOrUndefined(i)&&e.clearRect(0,0,e.canvas.width,e.canvas.height),t){case 90:case-90:e.translate(e.canvas.width/2,e.canvas.height/2),e.rotate(Math.PI/180*t),e.translate(-e.canvas.width/2,-e.canvas.height/2);break;case"horizontal":e.translate(e.canvas.width,0),e.scale(-1,1);break;case"vertical":e.translate(0,e.canvas.height),e.scale(1,-1)}this.isReverseRotate=this.isReverseFlip=!1},t.prototype.isObjInsideCropRegion=function(e){var t=!1;return(e.activePoint.startX>=this.destLeft&&e.activePoint.endX<=this.destLeft+this.destWidth||e.activePoint.startX<=this.destLeft&&e.activePoint.endX>=this.destLeft||e.activePoint.startX<=this.destLeft+this.destWidth&&e.activePoint.endX>=this.destLeft+this.destWidth||e.activePoint.startY>=this.destTop&&e.activePoint.endY<=this.destTop+this.destHeight||e.activePoint.startY<=this.destTop&&e.activePoint.endY>=this.destTop||e.activePoint.startY<=this.destTop+this.destHeight&&e.activePoint.endY>=this.destTop+this.destHeight)&&(t=!0),t},t.prototype.panFreehandDrawColl=function(e,t,i){for(var s=0;s<this.freehandCounter;s++){this.points=sf.base.extend([],this.pointColl[s].points,[]),this.pointCounter=0;for(var n=this.points.length,o=0;o<n;o++)""===i||"vertical"===i?this.points[o].x+=e:this.points[o].x-=e,""===i||"horizontal"===i?this.points[o].y+=t:this.points[o].y-=t}this.freehandRedraw(this.lowerContext)},t.prototype.panObjColl=function(e,t,i){for(var s=0;s<this.objColl.length;s++){""===i||"vertical"===i?(this.objColl[s].activePoint.startX+=e,this.objColl[s].activePoint.endX+=e):(this.objColl[s].activePoint.startX-=e,this.objColl[s].activePoint.endX-=e),""===i||"horizontal"===i?(this.objColl[s].activePoint.startY+=t,this.objColl[s].activePoint.endY+=t):(this.objColl[s].activePoint.startY-=t,this.objColl[s].activePoint.endY-=t),this.objColl[s].activePoint.width=this.objColl[s].activePoint.endX-this.objColl[s].activePoint.startX,this.objColl[s].activePoint.height=this.objColl[s].activePoint.endY-this.objColl[s].activePoint.startY,this.updateActiveObject(this.objColl[s].activePoint,this.objColl[s]),this.updateTrianglePoints(this.objColl[s]);var n=this.lowerContext.filter;this.lowerContext.filter="none",this.apply(this.objColl[s].shape,this.objColl[s]),this.lowerContext.filter=n,this.refreshActiveObj()}},t.prototype.cropObjColl=function(){if(this.objColl.length>0)for(var e=0;e<this.objColl.length;e++)this.objColl[e].imageRatio={startX:(this.objColl[e].activePoint.startX-this.activeObj.activePoint.startX)/this.activeObj.activePoint.width,startY:(this.objColl[e].activePoint.startY-this.activeObj.activePoint.startY)/this.activeObj.activePoint.height,endX:(this.objColl[e].activePoint.endX-this.activeObj.activePoint.startX)/this.activeObj.activePoint.width,endY:(this.objColl[e].activePoint.endY-this.activeObj.activePoint.startY)/this.activeObj.activePoint.height,width:this.activeObj.activePoint.width/this.objColl[e].activePoint.width,height:this.activeObj.activePoint.height/this.objColl[e].activePoint.height},"text"===this.objColl[e].shape&&(this.objColl[e].textSettings.fontRatio=this.objColl[e].activePoint.width/this.objColl[e].textSettings.fontSize)},t.prototype.cropFreehandDrawColl=function(){for(var e=0;e<this.freehandCounter;e++){this.points=sf.base.extend([],this.pointColl[e].points,[]),this.pointCounter=0;for(var t=this.points.length,i=0;i<t;i++)this.points[i].ratioX=(this.points[i].x-this.activeObj.activePoint.startX)/this.activeObj.activePoint.width,this.points[i].ratioY=(this.points[i].y-this.activeObj.activePoint.startY)/this.activeObj.activePoint.height}},t.prototype.hoverFreehandraw=function(e,t){var i=this.upperContext,s=-1;s=this.freehandDrawHoveredIndex>-1?this.freehandDrawHoveredIndex:this.freehandDrawSelectedIndex,this.points=sf.base.extend([],this.pointColl[s].points),this.pointCounter=0;var n,o,r,a,l,h,d=this.points.length;i.fillStyle=e||"#42a5f5",i.strokeStyle="#fff",l=h=this.penStrokeWidth=t||this.pointColl[s].strokeWidth,1===d&&(n=o=r=a=this.points[0],this.startDraw(i,n,o,r,a,l,h));for(var c=0;c<d-3;c++)this.points[c+1]&&this.points[c+2]&&this.points[c+2]&&(n=this.calcCurveControlPoints(this.points[c+0],this.points[c+1],this.points[c+2]).controlPoint2,o=this.calcCurveControlPoints(this.points[c+1],this.points[c+2],this.points[c+3]).controlPoint1,r=this.points[c+1],a=this.points[c+2],this.startDraw(i,n,o,r,a,l,h));i.closePath()},t.prototype.pointsHorizontalFlip=function(){for(var e=0;e<this.freehandCounter;e++)if(this.pointColl[e].shapeFlip!==this.currFlipState){this.points=sf.base.extend([],this.pointColl[e].points,[]),this.pointCounter=0;for(var t=this.points.length,i=0;i<t;i++)this.points[i].x<=this.destLeft+this.destWidth/2?this.points[i].x=this.destLeft+this.destWidth-(this.points[i].x-this.destLeft):this.points[i].x>=this.destLeft+this.destWidth/2&&(this.points[i].x=this.destLeft+(this.destLeft+this.destWidth-this.points[i].x)),this.points[i].ratioX=(this.points[i].x-this.destLeft)/this.destWidth,this.points[i].ratioY=(this.points[i].y-this.destTop)/this.destHeight;this.pointColl[e].shapeFlip=this.currFlipState}},t.prototype.pointsVerticalFlip=function(){for(var e=0;e<this.freehandCounter;e++)if(this.pointColl[e].shapeFlip!==this.currFlipState){this.points=sf.base.extend([],this.pointColl[e].points,[]),this.pointCounter=0;for(var t=this.points.length,i=0;i<t;i++)this.points[i].y<=this.destTop+this.destHeight/2?this.points[i].y=this.destTop+this.destHeight-(this.points[i].y-this.destTop):this.points[i].y>=this.destTop+this.destHeight/2&&(this.points[i].y=this.destTop+(this.destTop+this.destHeight-this.points[i].y)),this.points[i].ratioX=(this.points[i].x-this.destLeft)/this.destWidth,this.points[i].ratioY=(this.points[i].y-this.destTop)/this.destHeight;this.pointColl[e].shapeFlip=this.currFlipState}},t.prototype.flipFreehandrawColl=function(e){if("horizontal"===e.toLowerCase())this.pointsHorizontalFlip();else if("vertical"===e.toLowerCase())this.pointsVerticalFlip();else{this.pointsHorizontalFlip();for(var t=0;t<this.freehandCounter;t++)this.pointColl[t].shapeFlip="";this.pointsVerticalFlip()}},t.prototype.rotateFreehandDrawColl=function(){for(var e=0;e<this.freehandCounter;e++){this.points=sf.base.extend([],this.pointColl[e].points,[]),this.pointCounter=0;for(var t=this.points.length,i=0;i<t;i++)this.points[i].y=this.destTop+this.destHeight*this.points[i].ratioX,this.points[i].x=this.destLeft+this.destWidth-this.destWidth*this.points[i].ratioY}for(e=0;e<this.freehandCounter;e++){this.points=sf.base.extend([],this.pointColl[e].points,[]),this.pointCounter=0;for(t=this.points.length,i=0;i<t;i++)this.points[i].ratioX=(this.points[i].x-this.destLeft)/this.destWidth,this.points[i].ratioY=(this.points[i].y-this.destTop)/this.destHeight}},t.prototype.zoomFreehandDrawColl=function(e){for(var t=0;t<this.freehandCounter;t++){this.points=sf.base.extend([],this.pointColl[t].points,[]),this.pointCounter=0;for(var i=this.points.length,s=0;s<i;s++)this.points[s].x=this.zoomX(this.points[s].ratioX),this.points[s].y=this.zoomY(this.points[s].ratioY)}sf.base.isNullOrUndefined(e)&&this.freehandRedraw(this.lowerContext)},t.prototype.zoomX=function(e){return e*this.destWidth+this.destLeft},t.prototype.zoomY=function(e){return e*this.destHeight+this.destTop},t.prototype.zoomObjColl=function(e){for(var t=0;t<this.objColl.length;t++)if(this.objColl[t].activePoint.startX=this.objColl[t].imageRatio.startX*this.destWidth+this.destLeft,this.objColl[t].activePoint.startY=this.objColl[t].imageRatio.startY*this.destHeight+this.destTop,this.objColl[t].activePoint.endX=this.objColl[t].imageRatio.endX*this.destWidth+this.destLeft,this.objColl[t].activePoint.endY=this.objColl[t].imageRatio.endY*this.destHeight+this.destTop,this.objColl[t].activePoint.width=this.objColl[t].activePoint.endX-this.objColl[t].activePoint.startX,this.objColl[t].activePoint.height=this.objColl[t].activePoint.endY-this.objColl[t].activePoint.startY,"text"===this.objColl[t].shape&&this.updateFontSize(this.objColl[t]),this.updateActiveObject(this.objColl[t].activePoint,this.objColl[t]),this.updateTrianglePoints(this.objColl[t]),sf.base.isNullOrUndefined(e)){var i=this.lowerContext.filter;this.lowerContext.filter="none",this.apply(this.objColl[t].shape,this.objColl[t]),this.refreshActiveObj(),this.lowerContext.filter=i}},t.prototype.calcRatio=function(){var e,t;return 0===this.degree||this.degree%180==0?(e=this.baseImg.width/this.destWidth,t=this.baseImg.height/this.destHeight):(e=this.baseImg.height/this.destWidth,t=this.baseImg.width/this.destHeight),{width:e,height:t}},t.prototype.drawCustomSelection=function(e){this.currObjType.isCustomCrop=!0,this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.currObjType.shape=this.activeObj.shape=e.toLowerCase(),0===this.zoomFactor?this.destLeft>=0&&this.destTop>=0?(this.activeObj.activePoint.startX=this.destLeft,this.activeObj.activePoint.startY=this.destTop,this.activeObj.activePoint.endX=this.destLeft+this.destWidth,this.activeObj.activePoint.endY=this.destTop+this.destHeight):this.destLeft>=0?(this.activeObj.activePoint.startX=this.destLeft,this.activeObj.activePoint.startY=7.5,this.activeObj.activePoint.endX=this.destLeft+this.destWidth,this.activeObj.activePoint.endY=this.lowerCanvas.height-15):this.destTop>=0?(this.activeObj.activePoint.startX=7.5,this.activeObj.activePoint.startY=this.destTop,this.activeObj.activePoint.endX=this.lowerCanvas.width-15,this.activeObj.activePoint.endY=this.destTop+this.destHeight):(this.activeObj.activePoint.startX=7.5,this.activeObj.activePoint.startY=7.5,this.activeObj.activePoint.endX=this.lowerCanvas.width-15,this.activeObj.activePoint.endY=this.lowerCanvas.height-15):(this.destLeft>0?this.activeObj.activePoint.startX=this.destLeft:this.activeObj.activePoint.startX=7.5,this.destTop>0?this.activeObj.activePoint.startY=this.destTop:this.activeObj.activePoint.startY=7.5,this.destLeft+this.destWidth+15<this.lowerCanvas.width?this.activeObj.activePoint.endX=this.destLeft+this.destWidth-15:this.activeObj.activePoint.endX=this.lowerCanvas.width-15,this.destTop+this.destHeight+15<this.lowerCanvas.height?this.activeObj.activePoint.endY=this.destTop+this.destHeight-15:this.activeObj.activePoint.endY=this.lowerCanvas.height-15),this.activeObj.activePoint.startX<this.destLeft&&(this.activeObj.activePoint.startX=this.destLeft),this.activeObj.activePoint.startY<this.destTop&&(this.activeObj.activePoint.startY=this.destTop),this.activeObj.activePoint.endX>this.destLeft+this.destWidth&&(this.activeObj.activePoint.endX=this.destLeft+this.destWidth),this.activeObj.activePoint.endY>this.destTop+this.destHeight&&(this.activeObj.activePoint.endY=this.destTop+this.destHeight),this.activeObj.activePoint.startX===this.destLeft&&this.destLeft+this.destWidth>this.lowerCanvas.clientWidth&&(this.activeObj.activePoint.endX=this.lowerCanvas.clientWidth-15),this.activeObj.activePoint.startY===this.destTop&&this.destTop+this.destHeight>this.lowerCanvas.clientHeight&&(this.activeObj.activePoint.endY=this.lowerCanvas.clientHeight-15),this.activeObj.activePoint.width=this.activeObj.activePoint.endX-this.activeObj.activePoint.startX,this.activeObj.activePoint.height=this.activeObj.activePoint.endY-this.activeObj.activePoint.startY,this.updateActiveObject(this.activeObj.activePoint,this.activeObj),this.drawObject("duplicate",this.activeObj,null,null,!0)},t.prototype.clearOuterCanvas=function(e){var t=this.destLeft,i=this.destTop;if(""!==this.currFlipState&&(this.destLeft=this.lowerCanvas.clientWidth-(this.destWidth+this.destLeft),this.destTop=this.lowerCanvas.clientHeight-(this.destHeight+this.destTop)),this.destWidth<this.lowerCanvas.width){var s=this.destLeft>0?this.destLeft:0;e.clearRect(0,0,s,this.lowerCanvas.height),e.clearRect(this.destLeft+this.destWidth,0,s,this.lowerCanvas.height)}if(this.destHeight<this.lowerCanvas.height){var n=this.destTop>0?this.destTop:0;e.clearRect(0,0,this.lowerCanvas.width,n),e.clearRect(0,this.destTop+this.destHeight,this.lowerCanvas.width,n)}""!==this.currFlipState&&(this.destLeft=t,this.destTop=i)},t.prototype.cropCircle=function(e,t,i){i&&""!==this.currFlipState&&this.setTransform(e,this.currFlipState),e.globalCompositeOperation="destination-in",e.beginPath(),sf.base.isNullOrUndefined(t)?e.arc(this.destLeft+this.destWidth/2,this.destTop+this.destHeight/2,this.destWidth/2,0,2*Math.PI):e.arc(this.destWidth/2,this.destHeight/2,this.destWidth/2,0,2*Math.PI),e.closePath(),e.fill(),e.restore(),e.globalCompositeOperation="source-over",this.currObjType.isActiveObj=this.isCircleCrop=!0,i&&""!==this.currFlipState&&this.setTransform(e,this.currFlipState)},t.prototype.updateCropObj=function(){this.afterCropActions=[];var e=this.getCurrentObj();this.cropObj=sf.base.extend({},e,{},!0)},t.prototype.setCurrentObj=function(e){var t=!!e;e=e||this.cropObj,this.cropZoomFactor=e.cropZoom,this.defaultZoomFactor=e.defaultZoom,t&&(sf.base.isNullOrUndefined(e.activeObj.shape)||"crop"!==e.activeObj.shape.split("-")[0])?this.zoomFactor=e.defaultZoom:this.zoomFactor=e.cropZoom,this.totalPannedPoint=sf.base.extend({},e.totalPannedPoint,{},!0),this.totalPannedClientPoint=sf.base.extend({},e.totalPannedClientPoint,{},!0),this.totalPannedInternalPoint=sf.base.extend({},e.totalPannedInternalPoint,{},!0),this.tempFlipPanPoint=sf.base.extend({},e.tempFlipPanPoint,{},!0),this.rotateFlipColl=sf.base.extend([],e.rotateFlipColl,[],!0),this.degree=e.degree,this.currFlipState=e.currFlipState,this.destLeft=e.destPoints.startX,this.destTop=e.destPoints.startY,this.destWidth=e.destPoints.width,this.destHeight=e.destPoints.height,this.srcLeft=e.srcPoints.startX,this.srcTop=e.srcPoints.startY,this.srcWidth=e.srcPoints.width,this.srcHeight=e.srcPoints.height,this.lowerContext.filter=e.filter,this.lowerContext.filter.split(" ").length>1&&("1"===this.lowerContext.filter.split(" ")[0].split("(")[1].split(")")[0]?this.isBrightnessAdjusted=!1:this.isBrightnessAdjusted=!0);var i=this.isCircleCrop,s=sf.base.extend({},this.currSelectionPoint,{},!0);this.currSelectionPoint=null,this.isCircleCrop=!1,this.drawCropSelectionImage(e,!1),0!==this.degree&&(this.currentPannedPoint={x:this.totalPannedClientPoint.x,y:this.totalPannedClientPoint.y},this.rotatePan()),this.activeObj=sf.base.extend({},e.activeObj,{},!0),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),0!==this.activeObj.activePoint.width&&0!==this.activeObj.activePoint.height&&this.drawObject("duplicate");var n=sf.base.extend({},e.activeObj,{},!0),o=!1;this.afterCropActions=this.alignRotateFlipColl(this.afterCropActions);var r=sf.base.extend([],this.afterCropActions,[],!0);if(!t&&r.length>0){o=!0;for(var a=0;a<r.length;a++)this.degree%90!=0||this.degree%180==0||"horizontalflip"!==r[a]&&"verticalflip"!==r[a]||(this.rotatedFlipCropSelection=!0),this.updateTransform(r[a]),"horizontalflip"!==r[a]&&"verticalflip"!==r[a]||1===r.length&&(this.activeObj=sf.base.extend({},this.cropObj.activeObj,{},!0),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.drawObject("duplicate"));n=sf.base.extend({},this.activeObj,{},!0),this.totalPannedPoint={x:0,y:0},this.totalPannedClientPoint={x:0,y:0},this.totalPannedInternalPoint={x:0,y:0},this.activeObj=n,this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),0!==this.activeObj.activePoint.width&&0!==this.activeObj.activePoint.height&&this.drawObject("duplicate"),e.degree!==this.degree&&(this.cropZoomFactor=this.zoomFactor=0),this.updateObjAndFreeHandDrawColl(),this.rotatedFlipCropSelection&&(this.rotatedFlipCropSelection=!1)}this.afterCropActions=r,this.isCancelAction||o||(this.updateObjAndFreeHandDrawColl(),this.zoomFreehandDrawColl(),this.destLeft=e.destPoints.startX,this.destTop=e.destPoints.startY),this.activeObj=n,this.isCircleCrop=i,this.currSelectionPoint=s},t.prototype.drawCropSelectionImage=function(e,t){var i=this.lowerContext.filter;this.upperContext.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),this.lowerContext.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),this.reverseTransformedState(),t?this.updateCurrentTransformedState("initial"):this.iterateRotateFlipColl(this.lowerContext,"initial"),this.setDestPointsForFlipState(),this.updateBrightnessFilter(),this.lowerContext.drawImage(this.baseImg,this.srcLeft,this.srcTop,this.srcWidth,this.srcHeight,this.destLeft,this.destTop,this.destWidth,this.destHeight),t?this.updateCurrentTransformedState("reverse"):this.iterateRotateFlipColl(this.lowerContext,"reverse"),this.destLeft=this.cropObj.destPoints.startX,this.destTop=this.cropObj.destPoints.startY;var s=sf.base.extend({},e.activeObj,{},!0);if(this.lowerContext.filter="none",this.isCancelAction)this.zoomObjColl(),this.zoomFreehandDrawColl();else{this.destLeft=e.destPoints.startX,this.destTop=e.destPoints.startY,this.destWidth=e.destPoints.width,this.destHeight=e.destPoints.height,this.srcLeft=e.srcPoints.startX,this.srcTop=e.srcPoints.startY,this.srcWidth=e.srcPoints.width,this.srcHeight=e.srcPoints.height;var n={startX:this.destLeft,startY:this.destTop,width:this.destWidth,height:this.destHeight};this.destLeft=e.activeObj.activePoint.startX,this.destTop=e.activeObj.activePoint.startY,this.destWidth=e.activeObj.activePoint.width,this.destHeight=e.activeObj.activePoint.height,this.zoomObjColl(),this.zoomFreehandDrawColl(),this.destLeft=n.startX,this.destTop=n.startY,this.destWidth=n.width,this.destHeight=n.height}this.activeObj=s,this.lowerContext.filter=i},t.prototype.cropImg=function(e){if(sf.base.isNullOrUndefined(e)&&(this.croppedDegree=this.degree),sf.base.isNullOrUndefined(e)&&0!==this.degree)this.updateCropObj(),this.currDestinationPoint={startX:this.destLeft,startY:this.destTop,width:this.destWidth,height:this.destHeight},this.rotateCrop();else if(sf.base.isNullOrUndefined(e)&&""!==this.currFlipState)this.updateCropObj(),this.currDestinationPoint={startX:this.destLeft,startY:this.destTop,width:this.destWidth,height:this.destHeight},this.flipCrop();else{this.tempZoomFactor=this.zoomFactor;var t=this.calcRatio();!sf.base.isNullOrUndefined(e)&&e||(this.updateCropObj(),this.resetPanPoints(),this.updateImageRatioForActObj(),this.currDestinationPoint={startX:this.destLeft,startY:this.destTop,width:this.destWidth,height:this.destHeight},this.currSelectionPoint=sf.base.extend({},this.activeObj,{},!0),this.cropDestPoints={startX:this.destLeft,startY:this.destTop,width:this.destWidth,height:this.destHeight});var i=this.calcMaxDimension(this.activeObj.activePoint.width*t.width,this.activeObj.activePoint.height*t.height);this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.lowerContext.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),this.srcLeft=this.activeObj.activePoint.startX*t.width-this.destLeft*t.width,this.srcTop=this.activeObj.activePoint.startY*t.height-this.destTop*t.height,this.srcWidth=this.activeObj.activePoint.width*t.width,this.srcHeight=this.activeObj.activePoint.height*t.height,this.destLeft=(this.lowerCanvas.clientWidth-i.width)/2,this.destTop=(this.lowerCanvas.clientHeight-i.height)/2,this.destWidth=i.width,this.destHeight=i.height;var s=this.lowerContext.filter;this.updateBrightnessFilter(),this.lowerContext.drawImage(this.baseImg,this.srcLeft,this.srcTop,this.srcWidth,this.srcHeight,this.destLeft,this.destTop,this.destWidth,this.destHeight),this.lowerContext.filter="none";var n=sf.base.extend({},this.activeObj,{},!0);this.cropObjColl(),this.zoomObjColl();for(var o=0;o<this.objColl.length;o++)this.isObjInsideCropRegion(this.objColl[o])&&(this.apply(this.objColl[o].shape,this.objColl[o]),this.refreshActiveObj());this.activeObj=n,this.cropFreehandDrawColl(),this.zoomFreehandDrawColl(),this.clearOuterCanvas(this.lowerContext),this.clearOuterCanvas(this.upperContext),"crop-circle"===this.currSelectionPoint.shape?this.cropCircle(this.lowerContext):this.isCircleCrop=!1,this.lowerContext.filter=s,this.refreshActiveObj(),this.currObjType.isCustomCrop=!1,this.pan(!1),this.defaultZoomFactor=0}},t.prototype.updateImageRatioForActObj=function(){this.activeObj.imageRatio={startX:(this.activeObj.activePoint.startX-this.destLeft)/this.destWidth,startY:(this.activeObj.activePoint.startY-this.destTop)/this.destHeight,endX:(this.activeObj.activePoint.endX-this.destLeft)/this.destWidth,endY:(this.activeObj.activePoint.endY-this.destTop)/this.destHeight,width:this.destWidth/this.activeObj.activePoint.width,height:this.destHeight/this.activeObj.activePoint.height}},t.prototype.drawImgToCanvas=function(e){this.lowerContext.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),this.destWidth=e.width,this.destHeight=e.height,this.isInitialLoading&&(this.initializeFilter(),this.isInitialLoading=!1);var t=this.lowerContext.filter;this.updateBrightnessFilter(),this.lowerContext.drawImage(this.baseImg,this.srcLeft,this.srcTop,this.srcWidth,this.srcHeight,this.destLeft,this.destTop,this.destWidth,this.destHeight),(!sf.base.isNullOrUndefined(this.currSelectionPoint)&&"crop-circle"===this.currSelectionPoint.shape||this.isCircleCrop)&&this.cropCircle(this.lowerContext),this.lowerContext.filter=t},t.prototype.limitPan=function(){this.activeObj.activePoint&&(this.destLeft>this.activeObj.activePoint.startX&&(this.destLeft=this.activeObj.activePoint.startX),this.destTop>this.activeObj.activePoint.startY&&(this.destTop=this.activeObj.activePoint.startY),this.destLeft+this.destWidth<this.activeObj.activePoint.endX&&(this.destLeft=this.activeObj.activePoint.endX-this.destWidth),this.destTop+this.destHeight<this.activeObj.activePoint.endY&&(this.destTop=this.activeObj.activePoint.endY-this.destHeight))},t.prototype.updatePanPoints=function(e){var t=this.destLeft,i=this.destTop,s=this.panMove.x-this.tempPanMove.x,n=this.panMove.y-this.tempPanMove.y;if(""===e)this.destLeft+=s,this.destTop+=n,this.limitPan();else if("horizontal"===e){var o=sf.base.extend({},this.activeObj,{},!0);this.updateFlipActiveObj(e),s=this.tempPanMove.x-this.panMove.x,this.destLeft+=s,this.destTop+=n,this.limitPan(),this.activeObj=o}else if("vertical"===e){o=sf.base.extend({},this.activeObj,{},!0);this.updateFlipActiveObj(e),n=this.tempPanMove.y-this.panMove.y,this.destLeft+=s,this.destTop+=n,this.limitPan(),this.activeObj=o}else if("horizontalVertical"===e){o=sf.base.extend({},this.activeObj,{},!0);this.updateFlipActiveObj(e),s=this.tempPanMove.x-this.panMove.x,this.destLeft+=s,this.destTop-=n,this.limitPan(),this.activeObj=o}else if("verticalHorizontal"===e){o=sf.base.extend({},this.activeObj,{},!0);this.updateFlipActiveObj(e),n=this.tempPanMove.y-this.panMove.y,this.destLeft-=s,this.destTop+=n,this.limitPan(),this.activeObj=o}return{x:this.destLeft-t,y:this.destTop-i}},t.prototype.setCurrentPanRegion=function(e,t){var i=e;return""===e?"horizontal"===t?i="horizontal":"vertical"===t&&(i="vertical"):"horizontal"===e?"horizontal"===t?i="horizontalVertical":"vertical"===t?i="verticalHorizontal":90===t?i="vertical":-90===t&&(i="horizontal"):"vertical"===e?"horizontal"===t?i="horizontalVertical":"vertical"===t?i="verticalHorizontal":90===t?i="horizontal":-90===t&&(i="vertical"):"horizontal"===t?i="vertical":"vertical"===t&&(i="horizontal"),i},t.prototype.getCurrentPanRegion=function(){var e="";this.rotateFlipColl=this.alignRotateFlipColl(this.rotateFlipColl,!0);for(var t=0;t<this.rotateFlipColl.length;t++)e=this.setCurrentPanRegion(e,this.rotateFlipColl[t]);return e},t.prototype.drawPannImage=function(e){var t={startX:this.destLeft,startY:this.destTop,width:this.destWidth,height:this.destHeight};this.lowerContext.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),this.updateCurrentTransformedState("initial"),this.destLeft=t.startX,this.destTop=t.startY,this.destWidth=t.width,this.destHeight=t.height,this.setDestPointsForFlipState(),this.updateBrightnessFilter(),this.lowerContext.drawImage(this.baseImg,this.srcLeft,this.srcTop,this.srcWidth,this.srcHeight,this.destLeft,this.destTop,this.destWidth,this.destHeight),(!sf.base.isNullOrUndefined(this.currSelectionPoint)&&"crop-circle"===this.currSelectionPoint.shape||this.isCircleCrop)&&this.cropCircle(this.lowerContext,null,!0),this.updateCurrentTransformedState("reverse"),this.destLeft=t.startX,this.destTop=t.startY,this.destWidth=t.width,this.destHeight=t.height,this.lowerContext.filter="none",this.panObjColl(e.x,e.y,""),this.panFreehandDrawColl(e.x,e.y,""),this.isCircleCrop&&this.cropCircle(this.lowerContext,null,!0)},t.prototype.drawPannedImage=function(e,t){var i=this,s={startPoint:this.panDown,endPoint:this.panMove,cancel:!1};this.dotnetRef.invokeMethodAsync("PanEventAsync","OnPan",s).then((function(){if(!s.cancel){var n=!1;if(sf.base.isNullOrUndefined(i.activeObj.shape)&&(n=!0,i.activeObj.activePoint={startX:i.destLeft,startY:i.destTop,endX:i.destLeft+i.destWidth,endY:i.destTop+i.destHeight},i.activeObj.activePoint.startX<0&&(i.activeObj.activePoint.startX=0),i.activeObj.activePoint.startY<0&&(i.activeObj.activePoint.startY=0),i.activeObj.activePoint.endX>i.lowerCanvas.width&&(i.activeObj.activePoint.endX=i.lowerCanvas.width),i.activeObj.activePoint.endY>i.lowerCanvas.height&&(i.activeObj.activePoint.endY=i.lowerCanvas.height),i.activeObj.activePoint.width=i.activeObj.activePoint.endX-i.activeObj.activePoint.startX,i.activeObj.activePoint.height=i.activeObj.activePoint.endY-i.activeObj.activePoint.startY,i.activeObj.shape="crop-custom",i.activeObj.strokeSettings=i.strokeSettings,i.updateActiveObject(i.activeObj.activePoint,i.activeObj),i.isCropTab=!0),0===i.degree){var o=void 0;o=sf.base.isNullOrUndefined(e)&&sf.base.isNullOrUndefined(t)?i.updatePanPoints(""):{x:e,y:t},i.totalPannedPoint.x+=o.x,i.totalPannedPoint.y+=o.y;var r=sf.base.extend({},i.activeObj,{},!0),a=i.lowerContext.filter;i.drawPannImage(o),i.lowerContext.filter=a,i.tempPanMove=sf.base.extend({},i.panMove,{},!0),i.activeObj=sf.base.extend({},r,{},!0),i.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height),sf.base.isNullOrUndefined(i.activeObj.shape)||i.drawObject("duplicate",i.activeObj)}else{var l=i.currFlipState;i.isCropTab=!0,sf.base.isNullOrUndefined(e)&&sf.base.isNullOrUndefined(t)?i.currentPannedPoint=i.updatePanPoints(""):i.currentPannedPoint={x:e,y:t},i.currFlipState=l,i.rotatePan(),i.isCropTab=!1,i.tempPanMove=sf.base.extend({},i.panMove,{},!0)}n&&(i.refreshActiveObj(),i.isCropTab=!1,i.upperContext.clearRect(0,0,i.upperCanvas.width,i.upperCanvas.height))}}))},t.prototype.updateFlipPan=function(e){if(""!==this.currFlipState){var t=this.lowerContext.filter;this.refreshActiveObj(),this.rotatedFlip(),this.lowerContext.filter="none",this.freehandRedraw(this.lowerContext),this.lowerContext.filter=t,this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),sf.base.isNullOrUndefined(e)||this.drawObject("duplicate",e)}},t.prototype.updateFlipActiveObj=function(e){"horizontal"===e?(this.activeObj.activePoint.startX>this.lowerCanvas.width/2?this.activeObj.activePoint.endX=this.lowerCanvas.width/2-(this.activeObj.activePoint.startX-this.lowerCanvas.width/2):this.activeObj.activePoint.endX=this.lowerCanvas.width/2+(this.lowerCanvas.width/2-this.activeObj.activePoint.startX),this.activeObj.activePoint.startX=this.activeObj.activePoint.endX-this.activeObj.activePoint.width):"vertical"===e?(this.activeObj.activePoint.startX>this.lowerCanvas.width/2?this.activeObj.activePoint.endY=this.lowerCanvas.height/2-(this.activeObj.activePoint.startY-this.lowerCanvas.height/2):this.activeObj.activePoint.endY=this.lowerCanvas.height/2+(this.lowerCanvas.height/2-this.activeObj.activePoint.startY),this.activeObj.activePoint.startY=this.activeObj.activePoint.endY-this.activeObj.activePoint.height):"verticalHorizontal"!==e&&"horizontalVertical"!==e||(this.activeObj.activePoint.startX>this.lowerCanvas.width/2?(this.activeObj.activePoint.endX=this.lowerCanvas.width/2-(this.activeObj.activePoint.startX-this.lowerCanvas.width/2),this.activeObj.activePoint.endY=this.lowerCanvas.height/2-(this.activeObj.activePoint.startY-this.lowerCanvas.height/2)):(this.activeObj.activePoint.endX=this.lowerCanvas.width/2+(this.lowerCanvas.width/2-this.activeObj.activePoint.startX),this.activeObj.activePoint.endY=this.lowerCanvas.height/2+(this.lowerCanvas.height/2-this.activeObj.activePoint.startY)),this.activeObj.activePoint.startX=this.activeObj.activePoint.endX-this.activeObj.activePoint.width,this.activeObj.activePoint.startY=this.activeObj.activePoint.endY-this.activeObj.activePoint.height),this.updateActiveObject(this.activeObj.activePoint,this.activeObj)},t.prototype.resetPanPoints=function(){this.totalPannedPoint={x:0,y:0},this.totalPannedClientPoint={x:0,y:0},this.totalPannedInternalPoint={x:0,y:0}},t.prototype.flipCrop=function(){this.isReverseFlip=!0,this.totalPannedPoint.x+=this.tempFlipPanPoint.x,this.totalPannedPoint.y+=this.tempFlipPanPoint.y;var e=this.currFlipState,t=this.flipColl;if(this.flipColl=[],this.updateImageRatioForActObj(),this.objColl.push(this.activeObj),this.zoomFactor>0){for(var i=this.zoomFactor,s=this.isUndoRedo,n=0;n<10*i;n++)this.isUndoRedo=!0,this.zoom(-.1);this.isUndoRedo=s,this.resetPanPoints()}this.currSelectionPoint=sf.base.extend({},this.objColl[this.objColl.length-1],{},!0),this.lowerContext.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height);var o=this.lowerContext.filter;this.updateBrightnessFilter(),this.lowerContext.drawImage(this.baseImg,this.srcLeft,this.srcTop,this.srcWidth,this.srcHeight,this.destLeft,this.destTop,this.destWidth,this.destHeight);for(n=0;n<this.objColl.length;n++)this.objColl[n].shapeFlip="";for(n=0;n<this.freehandCounter;n++)this.pointColl[n].shapeFlip="";this.redrawObj(this.getCurrentPanRegion()),this.flipFreehandrawColl(this.getCurrentPanRegion()),this.activeObj=sf.base.extend({},this.objColl[this.objColl.length-1],{},!0),this.objColl.pop(),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.drawObject("duplicate"),this.cropImg(!0),this.isReverseRotate=!0,this.reverseTransformedState(),this.setDestinationPoints(),this.currentTransformedState("initial"),this.updateBrightnessFilter(),this.lowerContext.drawImage(this.baseImg,this.srcLeft,this.srcTop,this.srcWidth,this.srcHeight,this.destLeft,this.destTop,this.destWidth,this.destHeight),this.lowerContext.filter=o,this.isRotateZoom=!1,this.updateCurrentTransformedState("reverse"),this.currFlipState=e,this.flipColl=t,this.lowerContext.filter="none";for(n=0;n<this.objColl.length;n++)this.objColl[n].shapeFlip="";for(n=0;n<this.freehandCounter;n++)this.pointColl[n].shapeFlip="";this.redrawObj(this.getCurrentPanRegion()),this.flipFreehandrawColl(this.getCurrentPanRegion()),this.zoomObjColl(),this.zoomFreehandDrawColl(),this.lowerContext.filter=o,(!sf.base.isNullOrUndefined(this.currSelectionPoint)&&"crop-circle"===this.currSelectionPoint.shape||this.isCircleCrop)&&this.cropCircle(this.lowerContext),this.refreshActiveObj(),this.clearOuterCanvas(this.lowerContext),this.clearOuterCanvas(this.upperContext),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.isReverseFlip=!1,this.resetPanPoints(),this.tempFlipPanPoint={x:0,y:0}},t.prototype.rotateCrop=function(){var e="";sf.base.isNullOrUndefined(this.activeObj.shape)||(e=this.activeObj.shape);var t=this.degree;this.degree%90==0&&this.degree%180!=0&&(this.rotatedDestPoints.startX=this.destLeft,this.rotatedDestPoints.startY=this.destTop,this.rotatedDestPoints.width=this.destWidth,this.rotatedDestPoints.height=this.destHeight,this.rotatedDestPoints.startX-=this.totalPannedClientPoint.x,this.rotatedDestPoints.startY-=this.totalPannedClientPoint.y),this.updateImageRatioForActObj(),this.currSelectionPoint=sf.base.extend({},this.activeObj,{},!0),this.objColl.push(this.activeObj),this.activeObj=sf.base.extend({},this.objColl[this.objColl.length-1],{},!0),this.reverseTransformedState(),this.setClientTransformedDimension(),this.lowerContext.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height);var i=this.lowerContext.filter;this.updateBrightnessFilter(),this.lowerContext.drawImage(this.baseImg,this.srcLeft,this.srcTop,this.srcWidth,this.srcHeight,this.destLeft,this.destTop,this.destWidth,this.destHeight),this.lowerContext.filter=i;var s=0;90===t||-270===t?s=3:180===t||-180===t?s=2:270!==t&&-90!==t||(s=1);for(var n=0;n<s;n++)this.rotateObjColl(),this.rotateFreehandDrawColl();var o=sf.base.extend({},this.objColl[this.objColl.length-1],{},!0);if(""!==this.currFlipState){for(n=0;n<this.objColl.length;n++)this.objColl[n].shapeFlip="";for(n=0;n<this.freehandCounter;n++)this.pointColl[n].shapeFlip="";var r=this.getCurrentCropState("initial");this.redrawObj(r),this.flipFreehandrawColl(r)}this.zoomObjColl(),this.zoomFreehandDrawColl(),o=sf.base.extend({},this.objColl[this.objColl.length-1],{},!0),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.drawObject("duplicate",o),this.objColl.pop(),this.degree=0,this.cropImg(!0),this.isReverseRotate=!0,this.reverseTransformedState(),this.degree=t,this.setDestinationPoints(),this.currentTransformedState("initial"),this.updateBrightnessFilter(),this.lowerContext.drawImage(this.baseImg,this.srcLeft,this.srcTop,this.srcWidth,this.srcHeight,this.destLeft,this.destTop,this.destWidth,this.destHeight),this.lowerContext.filter=i,this.currentTransformedState("reverse"),s=0,90===t||-270===t?s=1:180===t||-180===t?s=2:270!==t&&-90!==t||(s=3);for(n=0;n<s;n++)this.rotateObjColl(),this.rotateFreehandDrawColl();if(""!==this.getCurrentPanRegion()){for(n=0;n<this.objColl.length;n++)this.objColl[n].shapeFlip="";for(n=0;n<this.freehandCounter;n++)this.pointColl[n].shapeFlip="";r=this.getCurrentCropState("reverse");this.redrawObj(r),this.flipFreehandrawColl(r)}this.isReverseRotate=!1,"crop-circle"===e&&this.cropCircle(this.lowerContext),this.lowerContext.filter="none";for(n=0;n<this.objColl.length;n++)this.isObjInsideCropRegion(this.objColl[n])&&(this.apply(this.objColl[n].shape,this.objColl[n]),this.refreshActiveObj());this.zoomFreehandDrawColl(),this.lowerContext.filter=i,this.clearOuterCanvas(this.lowerContext),this.clearOuterCanvas(this.upperContext),"crop-circle"===e&&this.cropCircle(this.lowerContext),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.resetPanPoints()},t.prototype.getCurrentCropState=function(e,t){var i="",s=[];if("initial"===e)if(180===this.degree||-180===this.degree)i=this.flipColl.length>1?this.getCurrentPanRegion():this.currFlipState;else{for(var n=0;n<this.rotateFlipColl.length;n++)"number"==typeof this.rotateFlipColl[n]?s.push("number"):"string"==typeof this.rotateFlipColl[n]&&s.push("string");s.length>1&&"string"===s[s.length-1]&&"number"===s[s.length-2]?"horizontal"===this.currFlipState?i="vertical":"vertical"===this.currFlipState&&(i="horizontal"):s.length>1&&"number"===s[s.length-1]&&"string"===s[s.length-2]&&(i=this.flipColl.length>1?this.getCurrentPanRegion():this.currFlipState)}else i=this.getCurrentPanRegion(),!t&&this.isInitialRotate()||-90!==this.degree&&-270!==this.degree||("horizontal"===i?i="vertical":"vertical"===i&&(i="horizontal"));return""===i&&(i=this.flipColl.length>1?this.getCurrentPanRegion():this.currFlipState),i},t.prototype.isInitialRotate=function(){var e=!1;return this.rotateFlipColl.length>0&&"number"==typeof this.rotateFlipColl[0]&&(e=!0),e},t.prototype.updateRotatePanPoints=function(){var e="";e=this.isInitialRotate()&&this.degree<0?this.getCurrentCropState("reverse",!0):this.getCurrentPanRegion(),this.degree%90==0&&this.degree%180!=0?90===this.degree||-90===this.degree&&("horizontal"===e||"vertical"===e)||-270===this.degree&&(""===e||"verticalHorizontal"===e||"horizontalVertical"===e)?""===e?(this.destLeft+=this.currentPannedPoint.y,this.destTop-=this.currentPannedPoint.x):"horizontal"===e?(this.destLeft+=this.currentPannedPoint.y,this.destTop+=this.currentPannedPoint.x):"vertical"===e?(this.destLeft-=this.currentPannedPoint.y,this.destTop-=this.currentPannedPoint.x):(this.destLeft-=this.currentPannedPoint.y,this.destTop+=this.currentPannedPoint.x):270!==this.degree&&(-270!==this.degree||"horizontal"!==e&&"vertical"!==e)&&(-90!==this.degree||""!==e&&"verticalHorizontal"!==e&&"horizontalVertical"!==e)||(""===e?(this.destLeft-=this.currentPannedPoint.y,this.destTop+=this.currentPannedPoint.x):"horizontal"===e?(this.destLeft-=this.currentPannedPoint.y,this.destTop-=this.currentPannedPoint.x):"vertical"===e?(this.destLeft+=this.currentPannedPoint.y,this.destTop+=this.currentPannedPoint.x):(this.destLeft+=this.currentPannedPoint.y,this.destTop-=this.currentPannedPoint.x)):180!==this.degree&&-180!==this.degree||(""===e?(this.destLeft-=this.currentPannedPoint.x,this.destTop-=this.currentPannedPoint.y):"horizontal"===e?(this.destLeft+=this.currentPannedPoint.x,this.destTop-=this.currentPannedPoint.y):"vertical"===e?(this.destLeft-=this.currentPannedPoint.x,this.destTop+=this.currentPannedPoint.y):(this.destLeft+=this.currentPannedPoint.x,this.destTop+=this.currentPannedPoint.y))},t.prototype.rotatePan=function(e,t){this.isReverseRotate=!0;var i,s=this.degree;sf.base.isNullOrUndefined(this.activeObj.activePoint)||sf.base.isNullOrUndefined(this.activeObj.shape)||(i=sf.base.extend({},this.activeObj,{},!0));var n=sf.base.extend([],this.objColl,[],!0),o=sf.base.extend([],this.pointColl,[],!0);this.objColl=[],this.pointColl=[],this.freehandCounter=0,this.refreshActiveObj(),this.isRotateZoom=!0,this.updateCurrentTransformedState("initial");var r=this.destLeft,a=this.destTop;this.isCropTab&&(this.destLeft+=this.totalPannedInternalPoint.x,this.destTop+=this.totalPannedInternalPoint.y),this.updateRotatePanPoints(),this.isCropTab&&(this.totalPannedInternalPoint.x=this.destLeft-r,this.totalPannedInternalPoint.y=this.destTop-a);var l=this.lowerContext.filter;this.updateBrightnessFilter(),this.lowerContext.drawImage(this.baseImg,this.srcLeft,this.srcTop,this.srcWidth,this.srcHeight,this.destLeft,this.destTop,this.destWidth,this.destHeight),this.isRotateZoom=!1,this.updateCurrentTransformedState("reverse",!0,!0);var h=this.destLeft,d=this.destTop;this.destLeft+=this.totalPannedClientPoint.x,this.destTop+=this.totalPannedClientPoint.y,this.destLeft+=this.currentPannedPoint.x,this.destTop+=this.currentPannedPoint.y,this.totalPannedClientPoint.x=this.destLeft-h,this.totalPannedClientPoint.y=this.destTop-d,this.objColl=n,this.pointColl=o,this.freehandCounter=this.pointColl.length,this.degree=s,this.lowerContext.filter="none",e&&(t?(this.totalPannedClientPoint.x=-this.totalPannedClientPoint.x,this.totalPannedClientPoint.y=-this.totalPannedClientPoint.y,this.currentPannedPoint=sf.base.extend({},this.totalPannedClientPoint,{},!0),this.totalPannedClientPoint={x:0,y:0},this.destLeft+=this.currentPannedPoint.x,this.destTop+=this.currentPannedPoint.y):this.currentPannedPoint=sf.base.extend({},this.totalPannedClientPoint,{},!0)),this.panObjColl(this.currentPannedPoint.x,this.currentPannedPoint.y,""),this.panFreehandDrawColl(this.currentPannedPoint.x,this.currentPannedPoint.y,""),this.lowerContext.filter=l,this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.activeObj=sf.base.extend({},i,{},!0),sf.base.isNullOrUndefined(this.activeObj.activePoint)||this.drawObject("duplicate",this.activeObj,null,null,!0),this.isReverseRotate=!1},t.prototype.rotateZoom=function(e){var t=Math.pow(10,1);Math.round(this.zoomFactor*t)/t==.1&&-.1===e?this.zoomFactor=0:this.zoomFactor+=e,this.isCropTab?this.cropZoomFactor=this.zoomFactor:this.defaultZoomFactor=this.zoomFactor;var i=sf.base.extend([],this.objColl,[],!0),s=sf.base.extend({},this.activeObj,{},!0);this.objColl=[],this.refreshActiveObj(),this.updateCurrentTransformedState("initial"),this.isRotateZoom=!0,this.setDestinationPoints();var n=this.lowerContext.filter;this.updateBrightnessFilter(),this.lowerContext.drawImage(this.baseImg,this.srcLeft,this.srcTop,this.srcWidth,this.srcHeight,this.destLeft,this.destTop,this.destWidth,this.destHeight),this.lowerContext.filter=n,this.isRotateZoom=!1,this.updateCurrentTransformedState("reverse"),this.objColl=i,this.activeObj=s},t.prototype.drawZoomImgToCanvas=function(e,t){var i=Math.pow(10,1);Math.round(this.zoomFactor*i)/i==.1&&-.1===e?this.zoomFactor=0:this.zoomFactor+=e,this.isCropTab?this.cropZoomFactor=this.zoomFactor:this.defaultZoomFactor=this.zoomFactor;var s={width:0,height:0};this.isCropTab?s=this.cropZoom(e,t):((s=this.calcMaxDimension(this.srcWidth,this.srcHeight)).width+=s.width*this.zoomFactor,s.height+=s.height*this.zoomFactor,this.destLeft=(this.lowerCanvas.clientWidth-s.width)/2,this.destTop=(this.lowerCanvas.clientHeight-s.height)/2),this.drawImgToCanvas(s)},t.prototype.cropZoom=function(e,t){var i=this.destLeft,s=this.destTop,n={width:0,height:0};return 0===this.srcLeft||0===this.srcTop?n=sf.base.isNullOrUndefined(t)?this.setZoomDimension(e,null):this.setZoomDimension(e,t):((n=this.degree%90==0&&this.degree%180!=0?this.calcMaxDimension(this.srcHeight,this.srcWidth):this.calcMaxDimension(this.srcWidth,this.srcHeight)).width+=n.width*this.zoomFactor,n.height+=n.height*this.zoomFactor),this.destLeft=i-(n.width-this.destWidth)/2,this.destTop=s-(n.height-this.destHeight)/2,i=this.destLeft,s=this.destTop,sf.base.isNullOrUndefined(t)||(this.destLeft>t.activePoint.startX&&(this.destLeft=t.activePoint.startX,0===this.degree&&(this.totalPannedPoint.x-=i-this.destLeft)),this.destTop>t.activePoint.startY&&(this.destTop=t.activePoint.startY,0===this.degree&&(this.totalPannedPoint.y-=s-this.destTop)),this.destLeft+n.width<t.activePoint.endX&&(this.destLeft=t.activePoint.endX-n.width,0===this.degree&&(this.totalPannedPoint.x-=i-this.destLeft)),this.destTop+n.height<t.activePoint.endY&&(this.destTop=t.activePoint.endY-n.height,0===this.degree&&(this.totalPannedPoint.y-=s-this.destTop))),n},t.prototype.updateCanvas=function(){var e={fileName:this.fileName,fileType:this.fileType};this.srcWidth=this.baseImg.width,this.srcHeight=this.baseImg.height;var t=this.calcMaxDimension(this.srcWidth,this.srcHeight);this.destLeft=(this.lowerCanvas.clientWidth-t.width)/2,this.destTop=(this.lowerCanvas.clientHeight-t.height)/2,this.drawImgToCanvas(t),this.cropDestPoints={startX:this.destLeft,startY:this.destTop,width:this.destWidth,height:this.destHeight};var i=this.lowerContext.filter;this.lowerContext.filter="none",this.iterateObjColl(),this.zoomFreehandDrawColl(),this.lowerContext.filter=i,this.destWidth>0&&this.destHeight>0&&(this.isImageLoaded=!0),this.isUndoRedo&&""!==this.currFlipState&&this.flip(this.toPascalCase(this.currFlipState)),this.disabled&&this.element.setAttribute("class","e-disabled"),this.dotnetRef.invokeMethodAsync("FileOpenEventAsync","FileOpened",e)},t.prototype.imageOnLoad=function(e){var t=this;this.baseImg.src=e,this.baseImg.onload=function(){t.lowerContext.drawImage(t.baseImg,0,0,t.lowerCanvas.width,t.lowerCanvas.height),sf.popups.hideSpinner(t.element),t.element.style.opacity="1",t.updateCanvas(),t.currObjType.isUndoZoom&&(t.currObjType.isUndoZoom=!1,t.lowerCanvas.style.display="block"),t.updateToolbar(t.element.id,t.element,"imageLoaded"),t.isUndoRedo=!1}},t.prototype.refreshActiveObj=function(){this.activeObj={},this.activeObj.activePoint={startX:0,startY:0,endX:0,endY:0,width:0,height:0},this.activeObj.triangle=[],this.activeObj.triangleRatio=[],this.activeObj.flipObjColl=[],this.activeObj.strokeSettings=this.strokeSettings,this.activeObj.textSettings=this.textSettings},t.prototype.redrawText=function(){this.activeObj.textSettings.bold&&(this.upperContext.font="bold "+this.activeObj.textSettings.fontSize+"px "+this.activeObj.textSettings.fontFamily),this.activeObj.textSettings.italic&&(this.upperContext.font="bold "+this.activeObj.textSettings.fontSize+"px "+this.activeObj.textSettings.fontFamily),this.activeObj.textSettings.bold&&this.activeObj.textSettings.italic&&(this.upperContext.font="italic bold "+this.activeObj.textSettings.fontSize+"px "+this.activeObj.textSettings.fontFamily),this.activeObj.textSettings.bold||this.activeObj.textSettings.italic||(this.upperContext.font=this.activeObj.textSettings.fontSize+"px "+this.activeObj.textSettings.fontFamily);var e=this.activeObj.keyHistory.split("\n"),t="block"===this.textArea.style.display?this.getMaxText(!0):this.getMaxText(),i=this.upperContext.measureText(t).width+.5*this.activeObj.textSettings.fontSize,s=e.length*(this.activeObj.textSettings.fontSize+.25*this.activeObj.textSettings.fontSize);this.setTextSelection(i,s),this.updateActiveObject(this.activeObj.activePoint,this.activeObj),this.redrawShape(this.activeObj)},t.prototype.setTextSelection=function(e,t){var i=this.degree;(i=0===this.activeObj.shapeDegree?this.degree:this.degree-this.activeObj.shapeDegree)<0&&(i=360+i);for(var s=0;s<this.activeObj.flipObjColl.length;s++)0===i?"horizontal"===this.activeObj.flipObjColl[s].toLowerCase()?this.activeObj.activePoint={startX:this.activeObj.activePoint.endX-e,startY:this.activeObj.activePoint.startY,endX:this.activeObj.activePoint.endX,endY:this.activeObj.activePoint.startY+(t||0)}:"vertical"===this.activeObj.flipObjColl[s].toLowerCase()?(this.activeObj.activePoint.startY=this.activeObj.activePoint.endY-t,this.activeObj.activePoint={startX:this.activeObj.activePoint.startX,startY:this.activeObj.activePoint.startY,endX:this.activeObj.activePoint.startX+(e||0),endY:this.activeObj.activePoint.endY}):this.activeObj.activePoint={startX:this.activeObj.activePoint.startX,startY:this.activeObj.activePoint.startY,endX:this.activeObj.activePoint.startX+(e||0),endY:this.activeObj.activePoint.startY+(t||0)}:90===i?"vertical"===this.activeObj.flipObjColl[s].toLowerCase()?(this.activeObj.activePoint.startX=this.activeObj.activePoint.endX-t,this.activeObj.activePoint={startX:this.activeObj.activePoint.startX,startY:this.activeObj.activePoint.endY-e,endX:this.activeObj.activePoint.endX,endY:this.activeObj.activePoint.endY}):"horizontal"===this.activeObj.flipObjColl[s].toLowerCase()?(this.activeObj.activePoint.endX=this.activeObj.activePoint.startX+t,this.activeObj.activePoint={startX:this.activeObj.activePoint.startX,startY:this.activeObj.activePoint.startY,endX:this.activeObj.activePoint.endX,endY:this.activeObj.activePoint.startY+(e||0)}):(this.activeObj.activePoint.startX=this.activeObj.activePoint.endX-t,this.activeObj.activePoint={startX:this.activeObj.activePoint.startX,startY:this.activeObj.activePoint.startY,endX:this.activeObj.activePoint.endX,endY:this.activeObj.activePoint.startY+(e||0)}):180===i?"horizontal"===this.activeObj.flipObjColl[s].toLowerCase()?(this.activeObj.activePoint.startY=this.activeObj.activePoint.endY-t,this.activeObj.activePoint={startX:this.activeObj.activePoint.startX,startY:this.activeObj.activePoint.startY,endX:this.activeObj.activePoint.startX+e,endY:this.activeObj.activePoint.endY}):"vertical"===this.activeObj.flipObjColl[s].toLowerCase()?(this.activeObj.activePoint.endY=this.activeObj.activePoint.startY+t,this.activeObj.activePoint={endX:this.activeObj.activePoint.endX,endY:this.activeObj.activePoint.endY,startX:this.activeObj.activePoint.endX-(e||0),startY:this.activeObj.activePoint.startY}):this.activeObj.activePoint={endX:this.activeObj.activePoint.endX,endY:this.activeObj.activePoint.endY,startX:this.activeObj.activePoint.endX-(e||0),startY:this.activeObj.activePoint.endY-(t||0)}:270===i&&("vertical"===this.activeObj.flipObjColl[s].toLowerCase()?this.activeObj.activePoint={startX:this.activeObj.activePoint.startX,startY:this.activeObj.activePoint.startY,endX:this.activeObj.activePoint.startX+t,endY:this.activeObj.activePoint.startY+(e||0)}:"horizontal"===this.activeObj.flipObjColl[s].toLowerCase()?(this.activeObj.activePoint.startX=this.activeObj.activePoint.endX-t,this.activeObj.activePoint={startX:this.activeObj.activePoint.startX,startY:this.activeObj.activePoint.endY-(e||0),endX:this.activeObj.activePoint.endX,endY:this.activeObj.activePoint.endY}):(this.activeObj.activePoint.endX=this.activeObj.activePoint.startX+t,this.activeObj.activePoint={startX:this.activeObj.activePoint.startX,startY:this.activeObj.activePoint.endY-(e||0),endX:this.activeObj.activePoint.endX,endY:this.activeObj.activePoint.endY}));0===this.activeObj.flipObjColl.length&&(0===i?this.activeObj.activePoint={startX:this.activeObj.activePoint.startX,startY:this.activeObj.activePoint.startY,endX:this.activeObj.activePoint.startX+(e||0),endY:this.activeObj.activePoint.startY+(t||0)}:90===i?(this.activeObj.activePoint.startX=this.activeObj.activePoint.endX-t,this.activeObj.activePoint={startX:this.activeObj.activePoint.startX,startY:this.activeObj.activePoint.startY,endX:this.activeObj.activePoint.endX,endY:this.activeObj.activePoint.startY+(e||0)}):180===i?this.activeObj.activePoint={endX:this.activeObj.activePoint.endX,endY:this.activeObj.activePoint.endY,startX:this.activeObj.activePoint.endX-(e||0),startY:this.activeObj.activePoint.endY-(t||0)}:270===i&&(this.activeObj.activePoint.endX=this.activeObj.activePoint.startX+t,this.activeObj.activePoint={startX:this.activeObj.activePoint.startX,startY:this.activeObj.activePoint.endY-(e||0),endX:this.activeObj.activePoint.endX,endY:this.activeObj.activePoint.endY})),this.activeObj.activePoint.width=this.activeObj.activePoint.endX-this.activeObj.activePoint.startX,this.activeObj.activePoint.height=this.activeObj.activePoint.endY-this.activeObj.activePoint.startY,360!==this.degree&&-360!==this.degree||(this.degree=0)},t.prototype.getCurrentObj=function(){var e={cropZoom:0,defaultZoom:0,totalPannedPoint:{x:0,y:0},totalPannedClientPoint:{x:0,y:0},totalPannedInternalPoint:{x:0,y:0},tempFlipPanPoint:{x:0,y:0},activeObj:{},rotateFlipColl:[],degree:0,currFlipState:"",destPoints:{startX:0,startY:0,width:0,height:0},srcPoints:{startX:0,startY:0,width:0,height:0},filter:""};return e.cropZoom=this.cropZoomFactor,e.defaultZoom=this.defaultZoomFactor,e.totalPannedPoint=sf.base.extend({},this.totalPannedPoint,{},!0),e.totalPannedClientPoint=sf.base.extend({},this.totalPannedClientPoint,{},!0),e.totalPannedInternalPoint=sf.base.extend({},this.totalPannedInternalPoint,{},!0),e.tempFlipPanPoint=sf.base.extend({},this.tempFlipPanPoint,{},!0),e.activeObj=sf.base.extend({},this.activeObj,{},!0),e.rotateFlipColl=sf.base.extend([],this.rotateFlipColl,[],!0),e.degree=this.degree,e.currFlipState=this.currFlipState,e.destPoints={startX:this.destLeft,startY:this.destTop,endX:0,endY:0,width:this.destWidth,height:this.destHeight},e.srcPoints={startX:this.srcLeft,startY:this.srcTop,endX:0,endY:0,width:this.srcWidth,height:this.srcHeight},e.filter=this.lowerContext.filter,e},t.prototype.updateUndoRedoColl=function(e,t,i,s,n,o,r,a){if(!this.isInitialLoading&&this.allowUndoRedo){this.currObjType.isUndoAction&&this.refreshUndoRedoColl(),this.undoRedoStep++;var l=this.getCurrentObj();l.objColl=sf.base.extend([],this.objColl,[],!0),l.pointColl=sf.base.extend([],this.pointColl,[],!0),l.afterCropActions=sf.base.extend([],this.afterCropActions,[],!0),this.undoRedoColl.push({operation:e,previousObj:t,currentObj:l,previousObjColl:i,currentObjColl:l.objColl,previousPointColl:s,currentPointColl:l.pointColl,previousCropObj:n,currentCropObj:sf.base.extend({},this.cropObj,{},!0),previousText:o,currentText:r,filter:a}),this.undoRedoColl.length>16&&(this.undoRedoColl.splice(0,1),this.undoRedoStep--),this.enableDisableToolbarBtn()}},t.prototype.fileSelect=function(e,t){sf.popups.showSpinner(this.element),this.element.style.opacity="0.5";var i=t.target.files[0];this.isImageLoaded&&(this.isImageLoaded=!1,this.reset()),sf.base.isNullOrUndefined(this.toolbarTemplate)&&(this.reset(),this.update()),this.fileName=e.value.split("\\")[e.value.split("\\").length-1],this.fileName=this.fileName.split(".")[0];var s=window.URL.createObjectURL(i);this.imageOnLoad(s.toString()),e.value=""},t.prototype.findTextPoint=function(e){if("text"===this.activeObj.shape){this.textArea.style.transformOrigin="0 0";var t=void 0,i="";if((t=0===this.activeObj.shapeDegree?this.degree:this.degree-this.activeObj.shapeDegree)<0&&(t=360+t),this.activeObj.flipObjColl.length>0)for(var s=0;s<this.activeObj.flipObjColl.length;s++)i+=0!==t&&t%90==0&&180!==t?"horizontal"===this.activeObj.flipObjColl[s].toLowerCase()?"scale(1, -1)":"scale(-1, 1)":"horizontal"===this.activeObj.flipObjColl[s].toLowerCase()?"scale(-1, 1)":"scale(1, -1)",("horizontal"===this.activeObj.flipObjColl[s].toLowerCase()||"vertical"===this.activeObj.flipObjColl[s].toLowerCase())&&(this.textArea.style.transform="rotate("+t+"deg)"+i);else this.textArea.style.transform="rotate("+t+"deg)";this.findTextTarget(e)}},t.prototype.getStrokeWidth=function(e){var t;switch(parseInt(e,10)/2){case 1:t=this.l10n.getConstant("XSmall");break;case 2:t=this.l10n.getConstant("Small");break;case 3:t=this.l10n.getConstant("Medium");break;case 4:t=this.l10n.getConstant("Large");break;case 5:t=this.l10n.getConstant("XLarge")}return t},t.prototype.setTimer=function(e){!this.isTimer&&this.timer>10&&(this.findTextPoint(e),sf.base.Browser.isDevice&&this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height))},t.prototype.targetTouches=function(e){return[{x:e[0].pageX,y:e[0].pageY},{x:e[1].pageX,y:e[1].pageY}]},t.prototype.calculateScale=function(e,t){var i=this.getDistance(e[0],e[1]);return this.getDistance(t[0],t[1])/i},t.prototype.getDistance=function(e,t){var i=0,s=0;return sf.base.isNullOrUndefined(e)||sf.base.isNullOrUndefined(t)||(i=e.x-t.x,s=e.y-t.y),Math.sqrt(i*i+s*s)},t.prototype.setXYPoints=function(e){var t,i;e.preventDefault(),"mousedown"===e.type?(t=e.clientX,i=e.clientY):(this.touchEndPoint.x=t=e.touches[0].clientX,this.touchEndPoint.y=i=e.touches[0].clientY);var s=this.lowerCanvas.getBoundingClientRect();return{x:t-=s.left,y:i-=s.top}},t.prototype.touchStartHandler=function(e){e.preventDefault(),2===e.touches.length?this.isFirstMove=!0:(this.timer=setTimeout(this.setTimer.bind(this),1e3,e),this.mouseDownEventHandler(e)),sf.base.EventHandler.add(this.lowerCanvas,"touchend",this.mouseUpEventHandler,this),sf.base.EventHandler.add(this.lowerCanvas,"touchmove",this.mouseMoveEventHandler,this),sf.base.EventHandler.add(this.upperCanvas,"touchend",this.mouseUpEventHandler,this),sf.base.EventHandler.add(this.upperCanvas,"touchmove",this.mouseMoveEventHandler,this)},t.prototype.isShapeTouch=function(e,t){var i=!1;if("touchstart"===e.type){this.redrawActObj();var s=this.setXYPoints(e),n=s.x,o=s.y;i=this.findTargetObj(n,o,t)}return i},t.prototype.isFreehandDrawTouch=function(e,t){var i=!1;if("touchstart"===e.type&&!t){this.redrawActObj();var s=this.setXYPoints(e),n=s.x,o=s.y;this.setCursor(n,o),this.isFreehandDrawingPoint&&(i=!0)}return i},t.prototype.selectFreehandDraw=function(e){if(this.isFreehandDrawEditing=!0,!sf.base.isNullOrUndefined(e)||0===e){if(!this.isFreehandDrawIndex(e))return;this.freehandDrawSelectedIndex=this.freehandDrawHoveredIndex=e,this.hoverFreehandraw(),this.upperCanvas.style.cursor="pointer"}this.freehandDrawSelectedIndex=this.freehandDrawHoveredIndex,this.pointColl[this.freehandDrawSelectedIndex].isSelected=!0,this.freehandDrawSelectedId=this.pointColl[this.freehandDrawSelectedIndex].id,"#42a5f5"!==this.pointColl[this.freehandDrawHoveredIndex].strokeColor&&(this.tempFreeHandDrawEditingStyles.strokeColor=this.pointColl[this.freehandDrawHoveredIndex].strokeColor),this.tempFreeHandDrawEditingStyles.strokeWidth=this.pointColl[this.freehandDrawHoveredIndex].strokeWidth,this.isFreehandDrawEditing||this.okBtn()},t.prototype.mouseDownEventHandler=function(e){if("touchstart"===e.type&&(this.isTouch=!0),"touchstart"!==e.type||e.currentTarget!==this.lowerCanvas||this.isImageLoaded){var t,i=!1,s=!0;if(void 0!==this.activeObj.shape&&(t=this.activeObj.shape.split("-")),void 0!==t&&"crop"===t[0]&&(i=!0),i&&(this.dragCanvas=this.togglePan=!0),i&&this.dragCanvas){var n=(l=this.setXYPoints(e)).x,o=l.y;this.setCursor(n,o),"move"!==this.upperCanvas.style.cursor&&"crosshair"!==this.upperCanvas.style.cursor&&"default"!==this.upperCanvas.style.cursor&&"grab"!==this.upperCanvas.style.cursor&&(s=!1)}var r=this.isShapeTouch(e,i),a=this.isFreehandDrawTouch(e,i);if(!this.isImageLoaded||r||this.togglePen||i||this.updateToolbar(this.element.id,this.element,"imageLoaded"),!this.dragCanvas||!s||"grab"!==this.upperCanvas.style.cursor&&!this.isTouch||r||a||this.togglePen){var l;n=(l=this.setXYPoints(e)).x,o=l.y;if(this.redrawActObj(n,o),this.isFreehandDrawingPoint||this.isFreehandDrawCustomized&&!this.togglePen){if(!sf.base.isNullOrUndefined(this.freehandDrawSelectedIndex)&&this.freehandDrawSelectedIndex!==this.freehandDrawHoveredIndex){var h=this.freehandDrawHoveredIndex;if(this.okBtn(),this.isFreehandDrawCustomized=!1,this.freehandDrawHoveredIndex=h,this.freehandDrawHoveredIndex>-1){var d="#fff"===this.pointColl[this.freehandDrawHoveredIndex].strokeColor?"#42a5f5":this.pointColl[this.freehandDrawHoveredIndex].strokeColor;this.hoverFreehandraw(d,this.pointColl[this.freehandDrawHoveredIndex].strokeWidth)}}if(!sf.base.isNullOrUndefined(this.freehandDrawHoveredIndex)&&this.freehandDrawHoveredIndex>-1)this.selectFreehandDraw();else if(this.freehandDrawSelectedIndex){this.okBtn();d=this.pointColl[this.freehandDrawSelectedIndex].strokeColor;this.hoverFreehandraw(d,this.pointColl[this.freehandDrawSelectedIndex].strokeWidth)}}else this.isFreehandDrawEditing&&this.cancelFreehandDraw(),this.isFreehandDrawEditing=!1,("crosshair"===this.upperCanvas.style.cursor||sf.base.Browser.isDevice&&this.togglePen)&&(this.togglePen?(sf.base.isNullOrUndefined(this.activeObj.strokeSettings)&&(this.activeObj.strokeSettings=this.strokeSettings),sf.base.isNullOrUndefined(this.penStrokeWidth)&&(this.penStrokeWidth=2),this.upperContext.strokeStyle=this.activeObj.strokeSettings.strokeColor,this.upperContext.fillStyle=this.activeObj.strokeSettings.strokeColor,this.freehandDownHandler(e,this.upperCanvas)):(this.refreshActiveObj(),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height)),this.currObjType.isActiveObj=!1,this.dragElement="",this.dragPoint.startX=this.dragPoint.startY=this.dragPoint.endX=this.dragPoint.endY=0),"crosshair"!==this.upperCanvas.style.cursor&&"touchstart"===e.type.toLowerCase()||this.currObjType.isActiveObj&&"default"!==this.upperCanvas.style.cursor&&!this.togglePen?(this.currObjType.isUndoAction&&this.refreshUndoRedoColl(),this.findTarget(n,o,e.type)):""!==this.currObjType.shape&&!this.currObjType.isCustomCrop||this.togglePen||"default"===this.upperCanvas.style.cursor||this.setActivePoint(n,o),sf.base.isNullOrUndefined(this.activeObj)||("rectangle"===this.activeObj.shape||"ellipse"===this.activeObj.shape?this.updateToolbar(this.element.id,this.element,"rectangle"):"line"===this.activeObj.shape||"arrow"===this.activeObj.shape?this.updateToolbar(this.element.id,this.element,"line"):"text"===this.activeObj.shape&&this.updateToolbar(this.element.id,this.element,"text"),this.updateColorToolbar(this.element,this.activeObj.strokeSettings))}else this.isFreehandDrawEditing&&this.applyFreehandDraw(),this.applyShape(),this.canvasMouseDownHandler(e);this.isShapeInserted=!1,this.tempActiveObj=sf.base.extend({},this.activeObj,{},!0)}},t.prototype.mouseMoveEventHandler=function(e){if(e.preventDefault(),"touchmove"!==e.type||2!==e.touches.length){var t,i;"none"===this.textArea.style.display&&(this.isTimer=!0),"mousemove"===e.type?(t=e.clientX,i=e.clientY):(this.touchEndPoint.x=t=e.touches[0].clientX,this.touchEndPoint.y=i=e.touches[0].clientY);var s=this.lowerCanvas.getBoundingClientRect();t-=s.left,i-=s.top,this.canvasMouseMoveHandler(e);var n,o=!1;void 0!==this.activeObj.shape&&(n=this.activeObj.shape.split("-")),void 0!==n&&"crop"===n[0]&&(o=!0),o&&this.zoomFactor>0&&this.enableDisableToolbarBtn(),(this.currObjType.isActiveObj&&(void 0!==this.activeObj.activePoint||this.objColl.length>0)&&!this.dragCanvas||void 0!==this.activeObj.activePoint)&&""===this.dragElement&&(this.setCursor(t,i),sf.base.isNullOrUndefined(this.activeObj.activePoint)||0!==this.activeObj.activePoint.width||"default"===this.upperCanvas.style.cursor||"move"===this.upperCanvas.style.cursor||"crosshair"===this.upperCanvas.style.cursor||"grab"===this.upperCanvas.style.cursor||"pointer"===this.upperCanvas.style.cursor||(this.upperCanvas.style.cursor="move"),this.findTarget(t,i,e.type)),this.currObjType.isDragging&&(this.upperContext.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),this.updateActivePoint(t,i,o),this.updateTrianglePoints(this.activeObj),this.isPreventDragging?(this.activeObj.activePoint.startX>this.destLeft&&this.activeObj.activePoint.endX<this.destLeft+this.destWidth&&this.activeObj.activePoint.startY>this.destTop&&this.activeObj.activePoint.endY<this.destTop+this.destHeight&&(this.isPreventDragging=!1),this.drawObject("duplicate",null,null,null,!0)):this.drawObject("duplicate"),o&&(this.dragCanvas=this.togglePan=!0))}else{if(this.isFirstMove)this.startTouches=this.targetTouches(e.touches),this.tempTouches=[],this.tempTouches.push({x:e.touches[0].clientX||e.touches[0].pageX-this.lowerCanvas.offsetLeft,y:e.touches[0].clientY||e.touches[0].pageY-this.lowerCanvas.offsetTop}),this.tempTouches.push({x:e.touches[1].clientX||e.touches[1].pageX-this.lowerCanvas.offsetLeft,y:e.touches[1].clientY||e.touches[1].pageY-this.lowerCanvas.offsetTop});else{var r=e.touches[0].clientX||e.touches[0].pageX-this.lowerCanvas.offsetLeft,a=e.touches[0].clientY||e.touches[0].pageY-this.lowerCanvas.offsetTop,l=e.touches[1].clientX||e.touches[1].pageX-this.lowerCanvas.offsetLeft,h=e.touches[1].clientY||e.touches[1].pageY-this.lowerCanvas.offsetTop,d={x:r<l?l-(l-r)/2:r-(r-l)/2,y:a<h?h-(h-a)/2:a-(a-h)/2};this.currentMouseMovePoint.x!==d.x&&this.currentMouseMovePoint.y!==d.y&&(this.performPointZoom(d.x,d.y,e),this.tempTouches=[],this.tempTouches.push({x:e.touches[0].clientX||e.touches[0].pageX-this.lowerCanvas.offsetLeft,y:e.touches[0].clientY||e.touches[0].pageY-this.lowerCanvas.offsetTop}),this.tempTouches.push({x:e.touches[1].clientX||e.touches[1].pageX-this.lowerCanvas.offsetLeft,y:e.touches[1].clientY||e.touches[1].pageY-this.lowerCanvas.offsetTop}),this.currentMouseMovePoint.x=d.x,this.currentMouseMovePoint.y=d.y)}this.isFirstMove=!1}},t.prototype.mouseUpEventHandler=function(e){var t,i;"touchstart"===e.type&&(this.isTouch=!1),e.preventDefault(),this.togglePan&&this.canvasMouseUpHandler(e),"mouseup"===e.type?(t=e.clientX,i=e.clientY):(t=this.touchEndPoint.x,i=this.touchEndPoint.y);var s=this.lowerCanvas.getBoundingClientRect();t-=s.left,i-=s.top,"touchend"===e.type&&(this.startTouches=this.tempTouches=[],this.isFirstMove=!1,"none"===this.textArea.style.display&&(this.isTimer=!1,this.timer=0));var n,o=!1;if(void 0!==this.activeObj.shape&&(n=this.activeObj.shape.split("-")),void 0!==n&&"crop"===n[0]&&(o=!0),e.currentTarget===this.upperCanvas){this.currObjType.shape=this.currObjType.shape.toLowerCase();var r=sf.base.extend({},this.cropObj,{},!0),a=this.getCurrentObj();a.objColl=sf.base.extend([],this.objColl,[],!0),a.pointColl=sf.base.extend([],this.pointColl,[],!0),a.afterCropActions=sf.base.extend([],this.afterCropActions,[],!0),this.togglePen||o||(sf.base.isNullOrUndefined(this.tempObjColl)||0===this.activeObj.activePoint.width||(this.objColl.push(this.activeObj),JSON.stringify(this.activeObj.activePoint)!==JSON.stringify(this.tempActiveObj.activePoint)&&this.updateUndoRedoColl("shapeTransform",a,this.tempObjColl,a.pointColl,r),this.redrawShape(this.objColl[this.objColl.length-1]),this.tempObjColl=void 0),this.isFreehandDrawEditing||(this.applyCurrActObj(t,i),sf.base.isNullOrUndefined(this.activeObj.shape)&&this.isImageLoaded&&this.updateToolbar(this.element.id,this.element,"imageLoaded")))}this.togglePen&&e.currentTarget===this.upperCanvas?this.freehandUpHandler(e,this.upperCanvas,this.upperContext):this.currObjType.shape="",this.dragElement="",this.currObjType.isInitialLine=this.currObjType.isDragging=!1,this.oldPoint.x=void 0,this.oldPoint.y=void 0,sf.base.isNullOrUndefined(this.activeObj.shape)||this.updateToolbar(this.element.id,this.element,this.activeObj.shape)},t.prototype.keyDownEventHandler=function(e){var t,i=this,s={},n={fileName:this.fileName,fileType:this.fileType,cancel:!1};switch(e.key){case e.ctrlKey&&"s":this.trigger("beforeSave",n,(function(e){n.cancel||i.export(e.fileType,e.fileName)})),e.preventDefault(),e.stopImmediatePropagation();break;case e.ctrlKey&&"z":this.allowUndoRedo&&this.callUndo();break;case e.ctrlKey&&"y":this.allowUndoRedo&&this.callRedo();break;case"Delete":if(this.isFreehandDrawEditing){this.updateFreehandDrawColorChange();var o=sf.base.extend({},this.cropObj,{},!0),r=this.getCurrentObj();r.objColl=sf.base.extend([],this.objColl,[],!0),r.pointColl=sf.base.extend([],this.pointColl,[],!0),r.afterCropActions=sf.base.extend([],this.afterCropActions,[],!0),this.deleteFreehandDraw(parseInt(this.freehandDrawSelectedId.split("_")[1],10)-1,!0),this.updateUndoRedoColl("deleteFreehandDrawing",r,r.objColl,r.pointColl,o)}else if("none"===this.textArea.style.display){this.objColl.push(this.activeObj);var a=sf.base.extend({},this.cropObj,{},!0),l=this.getCurrentObj();l.objColl=sf.base.extend([],this.objColl,[],!0),l.pointColl=sf.base.extend([],this.pointColl,[],!0),l.afterCropActions=sf.base.extend([],this.afterCropActions,[],!0),this.objColl.pop(),s={action:"delete",previousShapeSettings:this.updatePreviousShapeSettings(),currentShapeSettings:null},this.keyHistory="",this.clearSelection(),this.dotnetRef.invokeMethodAsync("ShapeEventAsync","OnShape",s).then((function(){i.updateUndoRedoColl("deleteObj",l,l.objColl,l.pointColl,a)}))}break;case"Escape":this.togglePan?this.pan(!1):"block"===this.textArea.style.display?this.redrawActObj():this.performCancel();break;case"Enter":void 0!==this.activeObj.shape&&(t=this.activeObj.shape.split("-")),void 0!==this.activeObj.horTopLine&&void 0!==this.activeObj.shape&&"crop"===t[0]&&this.crop();break;default:sf.base.Browser.isDevice&&"block"===this.textArea.style.display&&setTimeout(this.textKeyDown.bind(this),1,e)}},t.prototype.keyUpEventHandler=function(e){"block"===this.textArea.style.display&&e.target.id===this.element.id+"_textArea"&&setTimeout(this.textKeyDown.bind(this),1,e)},t.prototype.canvasMouseDownHandler=function(e){var t,i;e.preventDefault(),"mousedown"===e.type?(t=e.offsetX||e.pageX-this.lowerCanvas.offsetLeft,i=e.offsetY||e.pageY-this.lowerCanvas.offsetTop):(t=e.touches[0].clientX||e.touches[0].pageX-this.lowerCanvas.offsetLeft,i=e.touches[0].clientY||e.touches[0].pageY-this.lowerCanvas.offsetTop);var s=this.lowerCanvas.getBoundingClientRect();t-=s.left,i-=s.top,this.panDown={x:t,y:i},sf.base.isNullOrUndefined(this.tempPanMove)&&(this.tempPanMove={x:t,y:i},this.panStartObj=this.getCurrentObj(),this.panStartObj.objColl=sf.base.extend([],this.objColl,[],!0),this.panStartObj.pointColl=sf.base.extend([],this.pointColl,[],!0),this.panStartObj.afterCropActions=this.afterCropActions)},t.prototype.canvasMouseMoveHandler=function(e){var t,i;this.dragCanvas?this.lowerCanvas.style.cursor="grab":(this.dragCanvas=this.togglePan=!1,this.lowerCanvas.style.cursor=this.upperCanvas.style.cursor="default"),"mousemove"===e.type?(t=e.offsetX||e.pageX-this.lowerCanvas.offsetLeft,i=e.offsetY||e.pageY-this.lowerCanvas.offsetTop):(t=e.touches[0].clientX||e.touches[0].pageX-this.lowerCanvas.offsetLeft,i=e.touches[0].clientY||e.touches[0].pageY-this.lowerCanvas.offsetTop);var s=this.lowerCanvas.getBoundingClientRect();t-=s.left,i-=s.top,this.panMove={x:t,y:i},this.panDown&&this.panMove&&this.togglePan&&this.dragCanvas&&this.drawPannedImage()},t.prototype.canvasMouseUpHandler=function(e){if(e.preventDefault(),this.togglePan){var t=!1,i=void 0;if(void 0!==this.activeObj.shape&&(i=this.activeObj.shape.split("-")),void 0!==i&&"crop"===i[0]&&(t=!0),this.panDown&&this.panMove&&this.togglePan&&this.dragCanvas){var s=sf.base.extend({},this.cropObj,{},!0);t||this.updateUndoRedoColl("pan",this.panStartObj,this.panStartObj.objColl,this.panStartObj.pointColl,s),this.panDown=null,this.panMove=null,this.tempPanMove=null,this.panStartObj=null}}this.currObjType.isDragging=!1},t.prototype.handleScroll=function(e){var t,i,s=!1;"mousewheel"===e.type&&(t=e.clientX,i=e.clientY);var n=this.lowerCanvas.getBoundingClientRect();t-=n.left,i-=n.top,t>this.destLeft&&t<this.destLeft+this.destWidth&&i>this.destTop&&i<this.destTop+this.destHeight&&(s=!0),e.stopPropagation(),!0===e.ctrlKey&&s?e.preventDefault():s&&(this.isCropTab||this.okBtn(),this.performPointZoom(t,i,e))},t.prototype.performPointZoom=function(e,t,i){var s=this.getCurrentObj();if(s.objColl=sf.base.extend([],this.objColl,[],!0),s.pointColl=sf.base.extend([],this.pointColl,[],!0),s.afterCropActions=sf.base.extend([],this.afterCropActions,[],!0),this.pointZoom={x:e,y:t},"mousewheel"===i.type)i.wheelDelta>0?this.zoom(.1):this.zoom(-.1);else{var n=this.calculateScale(this.startTouches,this.targetTouches(i.touches));this.startTouches=this.targetTouches(i.touches),n>1?this.zoom(.1):n<1&&this.zoom(-.1)}},t.prototype.adjustPanning=function(e){if(0!==e.activePoint.width&&0!==e.activePoint.height){var t=this.destLeft,i=this.destTop,s={x:0,y:0};if(this.destLeft>e.activePoint.startX?s.x=this.destLeft-e.activePoint.startX:this.destLeft+this.destWidth<e.activePoint.startX+e.activePoint.width&&(s.x=this.destLeft+this.destWidth-(e.activePoint.startX+e.activePoint.width)),this.destTop>e.activePoint.startY?s.y=this.destTop-e.activePoint.startY:this.destTop+this.destHeight<e.activePoint.startY+e.activePoint.height&&(s.y=this.destTop+this.destHeight-(e.activePoint.startY+e.activePoint.height)),0===this.degree)this.destLeft-=s.x,this.destTop-=s.y,this.drawZoomPanImage(this.destLeft-t,this.destTop-i);else{var n=this.isCropTab;this.isCropTab=!0;var o=sf.base.extend([],this.objColl,[],!0),r=sf.base.extend([],this.pointColl,[],!0);this.objColl=[],this.pointColl=[],this.freehandCounter=0,this.destLeft-=s.x,this.destTop-=s.y,this.currentPannedPoint={x:this.destLeft-t,y:this.destTop-i},this.rotatePan(),this.isCropTab=n,this.objColl=o,this.pointColl=r,this.freehandCounter=this.pointColl.length,this.panObjColl(this.currentPannedPoint.x,this.currentPannedPoint.y,""),this.panFreehandDrawColl(this.currentPannedPoint.x,this.currentPannedPoint.y,"")}}},t.prototype.drawZoomPanImage=function(e,t){this.panObjColl(e,t,""),this.panFreehandDrawColl(e,t,""),this.renderImage(!0);var i=this.calcMaxDimension(this.srcWidth,this.srcHeight);i.width+=i.width*this.zoomFactor,i.height+=i.height*this.zoomFactor,this.totalPannedPoint.x+=e,this.totalPannedPoint.y+=t,this.tempFlipPanPoint={x:0,y:0}},t.prototype.textKeyDown=function(e){"\r"===String.fromCharCode(e.which)&&(this.textRow+=1),this.textArea.setAttribute("rows",this.textRow.toString()),this.textArea.style.height="auto",this.textArea.style.height=this.textArea.scrollHeight+"px",this.setTextBoxWidth(e),sf.base.Browser.isDevice&&(this.textArea.style.width=parseFloat(this.textArea.style.width)+this.textArea.style.fontSize+"px");var t=this.textArea.value.split("\n");this.textRow=t.length,this.textArea.setAttribute("rows",this.textRow.toString())},t.prototype.adjustToScreen=function(){var e;(sf.base.isNullOrUndefined(this.element.querySelector("#"+this.element.id+"_contextualToolbar"))||this.element.querySelector("#"+this.element.id+"_contextualToolbar").parentElement.classList.contains("e-hide"))&&(sf.base.isNullOrUndefined(this.element.querySelector("#"+this.element.id+"_headWrapper"))||this.element.querySelector("#"+this.element.id+"_headWrapper").parentElement.classList.contains("e-hide"))||this.okBtn();var t=!1;void 0!==this.activeObj.shape&&(e=this.activeObj.shape.split("-")),void 0!==e&&"crop"===e[0]&&(t=!0,this.updateImageRatioForActObj(),this.objColl.push(this.activeObj),this.refreshActiveObj()),"block"===this.textArea.style.display&&this.redrawActObj();var i=this.lowerContext.filter;this.update(),this.applyActObj(),this.refreshActiveObj(),this.lowerContext.filter=this.initialAdjustmentValue=i,this.isImageLoaded&&(sf.popups.showSpinner(this.element),this.element.style.opacity="0.5"),this.lowerContext.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height);var s=document.querySelector("#"+this.element.id+"_canvasWrapper");sf.base.isNullOrUndefined(s)||(s.style.width=this.element.offsetWidth+"px",s.style.height=this.element.offsetHeight+"px",sf.base.Browser.isDevice?s.style.height=parseFloat(s.style.height)-2*this.toolbarHeight-3+"px":s.style.height=parseFloat(s.style.height)-this.toolbarHeight-3+"px");var n=this.calcMaxDimension(this.srcWidth,this.srcHeight);if(this.defaultZoomFactor>0&&(n.width+=n.width*this.defaultZoomFactor,n.height+=n.height*this.defaultZoomFactor),this.destLeft=(this.lowerCanvas.clientWidth-n.width)/2,this.destTop=(this.lowerCanvas.clientHeight-n.height)/2,0===this.degree&&""===this.currFlipState)this.defaultZoomFactor>0&&(this.destLeft+=this.totalPannedPoint.x,this.destTop+=this.totalPannedPoint.y),this.drawImgToCanvas(n);else{this.drawImgToCanvas(n),this.updateCurrentTransformedState("initial");var o=this.lowerContext.filter;this.updateBrightnessFilter(),this.lowerContext.drawImage(this.baseImg,this.srcLeft,this.srcTop,this.srcWidth,this.srcHeight,this.destLeft,this.destTop,this.destWidth,this.destHeight),this.lowerContext.filter=o,this.updateCurrentTransformedState("reverse")}(this.zoomObjColl(),this.zoomFreehandDrawColl(),this.isCircleCrop&&this.cropCircle(this.lowerContext),sf.popups.hideSpinner(this.element),this.element.style.opacity="1",this.defToolbarItems.length>0&&!sf.base.isNullOrUndefined(document.getElementById(this.element.id+"_toolbar")))&&sf.base.getComponent(this.element.id+"_toolbar","toolbar").refreshOverflow();if(this.refreshActiveObj(),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),t&&(this.activeObj=sf.base.extend({},this.objColl[this.objColl.length-1],null,!0),this.objColl.pop(),this.drawObject("duplicate",this.activeObj)),(0!==this.degree||""!==this.currFlipState)&&this.defaultZoomFactor>0){var r=sf.base.extend({},this.totalPannedPoint,null,!0),a=sf.base.extend({},this.totalPannedInternalPoint,null,!0),l=sf.base.extend({},this.totalPannedClientPoint,null,!0);this.zoom(.1),this.zoom(-.1),0===this.degree?(this.destLeft+=r.x,this.destTop+=r.y,this.totalPannedPoint=r,this.updateFlipPan()):(this.totalPannedInternalPoint=a,this.totalPannedClientPoint=l,this.currentPannedPoint={x:0,y:0},this.isCropTab=!0,this.rotatePan(),this.isCropTab=!1)}else 0!==this.degree&&this.cropZoomFactor>0&&(this.zoomFactor=this.cropZoomFactor=0,this.enableDisableToolbarBtn())},t.prototype.screenOrientation=function(){sf.base.Browser.isDevice&&setTimeout(this.adjustToScreen.bind(this),100)},t.prototype.windowResizeHandler=function(){sf.base.Browser.isDevice||this.adjustToScreen()},t.prototype.updatePreviousShapeSettings=function(){var e=[];return"text"!==this.activeObj.shape||sf.base.isNullOrUndefined(this.activeObj.textSettings)||(this.activeObj.textSettings.bold&&e.push("bold"),this.activeObj.textSettings.italic&&e.push("italic"),this.activeObj.textSettings.underline&&e.push("underline")),{id:sf.base.isNullOrUndefined(this.activeObj.currIndex)?null:this.activeObj.currIndex,type:this.toPascalCase(this.activeObj.shape),startX:this.activeObj.activePoint.startX,startY:this.activeObj.activePoint.startY,width:this.activeObj.activePoint.width,height:this.activeObj.activePoint.height,strokeColor:sf.base.isNullOrUndefined(this.activeObj.strokeSettings)?null:this.activeObj.strokeSettings.strokeColor,strokeWidth:sf.base.isNullOrUndefined(this.activeObj.strokeSettings)?null:this.activeObj.strokeSettings.strokeWidth,fillColor:sf.base.isNullOrUndefined(this.activeObj.strokeSettings)?null:this.activeObj.strokeSettings.fillColor,radius:"ellipse"===this.activeObj.shape?this.activeObj.activePoint.width/2:null,length:"line"===this.activeObj.shape||"arrow"===this.activeObj.shape?this.activeObj.activePoint.width:null,text:"text"===this.activeObj.shape?sf.base.isNullOrUndefined(this.activeObj.keyHistory)?null:this.activeObj.keyHistory:null,fontSize:"text"===this.activeObj.shape?sf.base.isNullOrUndefined(this.activeObj.textSettings)?null:this.activeObj.textSettings.fontSize:null,fontStyle:"text"===this.activeObj.shape?e:null,color:"text"===this.activeObj.shape?sf.base.isNullOrUndefined(this.activeObj.strokeSettings)?null:this.activeObj.strokeSettings.strokeColor:null}},t.prototype.setZoomDimension=function(e,t){var i={width:0,height:0};return(i=this.degree%90==0&&this.degree%180!=0?this.calcMaxDimension(this.srcHeight,this.srcWidth):this.calcMaxDimension(this.srcWidth,this.srcHeight)).width+=i.width*this.zoomFactor,i.height+=i.height*this.zoomFactor,this.destLeft+=(this.destWidth-i.width)/2,this.destTop+=(this.destHeight-i.height)/2,e<0&&!sf.base.isNullOrUndefined(t)?(this.destLeft>t.activePoint.startX&&(this.destLeft=t.activePoint.startX),this.destTop>t.activePoint.startY&&(this.destTop=t.activePoint.startY),this.destLeft+i.width<t.activePoint.startX+t.activePoint.width&&(this.destLeft=this.destLeft+(t.activePoint.startX+t.activePoint.width)-(this.destLeft+i.width)),this.destTop+i.height<t.activePoint.startY+t.activePoint.height&&(this.destTop=this.destTop+(t.activePoint.startY+t.activePoint.height)-(this.destTop+i.height))):e<0&&sf.base.isNullOrUndefined(t)&&(this.destLeft>0&&(this.destLeft=0),this.destTop>0&&(this.destTop=0),this.destLeft+i.width<this.lowerCanvas.width&&(this.destLeft=this.lowerCanvas.width-this.destWidth),this.destTop+i.height<this.lowerCanvas.height&&(this.destTop=this.lowerCanvas.height-this.destHeight)),i},t.prototype.applyCurrActObj=function(e,t){var i=!1,s=sf.base.extend({},this.activeObj,{},!0);if(!sf.base.isNullOrUndefined(s.activePoint)&&(e>=Math.floor(s.activePoint.startX)&&e<=Math.ceil(s.activePoint.endX)&&t>=Math.floor(s.activePoint.startY)&&t<=Math.ceil(s.activePoint.endY)&&(i=!0),!i&&(this.updateImageRatioForActObj(),void 0===this.activeObj.horTopLine||0===this.activeObj.horTopLine.startX||0===this.activeObj.horTopLine.endX||this.currObjType.isCustomCrop||""===this.currObjType.shape||this.objColl.push(sf.base.extend({},this.activeObj,{},!0)),"text"===this.activeObj.shape||"ellipse"===this.currObjType.shape||"rectangle"===this.currObjType.shape||"line"===this.currObjType.shape||"arrow"===this.activeObj.shape))){var n=this.lowerContext.filter;this.lowerContext.filter=this.getDefaultFilter();for(var o=0;o<this.objColl.length;o++)this.isObjInsideCropRegion(this.objColl[o])&&(this.apply(this.objColl[o].shape,this.objColl[o]),this.refreshActiveObj());this.zoomFreehandDrawColl(),this.lowerContext.filter=n,this.apply("shape"),this.clearOuterCanvas(this.lowerContext),this.clearOuterCanvas(this.upperContext),this.isCircleCrop&&this.cropCircle(this.lowerContext)}},t.prototype.updateTextFromTextArea=function(){if(this.activeObj.keyHistory!==this.textArea.value){var e=sf.base.extend({},this.cropObj,{},!0),t=this.getCurrentObj();t.objColl=sf.base.extend([],this.objColl,[],!0),t.pointColl=sf.base.extend([],this.pointColl,[],!0),t.afterCropActions=sf.base.extend([],this.afterCropActions,[],!0),this.updateUndoRedoColl("text",t,t.objColl,t.pointColl,e,this.activeObj.keyHistory,this.textArea.value)}this.activeObj.keyHistory=this.textArea.value,this.textArea.style.display="none",this.textArea.value="",this.updateFontStyles();var i=this.upperContext.measureText(this.activeObj.keyHistory).width+.5*this.activeObj.textSettings.fontSize,s=this.activeObj.textSettings.fontSize+.25*this.activeObj.textSettings.fontSize,n=this.activeObj.keyHistory.split("\n");if(n.length>1){s*=n.length;for(var o=[],r=0;r<n.length;r++)o.push(this.upperContext.measureText(n[r]).width+.5*this.activeObj.textSettings.fontSize);i=Math.max.apply(Math,o)}this.setTextSelection(i,s),this.updateActiveObject(this.activeObj.activePoint,this.activeObj),this.updateImageRatioForActObj()},t.prototype.setTextBoxStylesToActObj=function(){this.activeObj.textSettings.fontFamily=this.textArea.style.fontFamily,this.activeObj.strokeSettings.strokeColor=this.textArea.style.color,"bold"===this.textArea.style.fontWeight?this.activeObj.textSettings.bold=!0:this.activeObj.textSettings.bold=!1,"italic"===this.textArea.style.fontStyle?this.activeObj.textSettings.italic=!0:this.activeObj.textSettings.italic=!1,this.activeObj.textSettings.fontSize=parseFloat(this.textArea.style.fontSize)},t.prototype.redrawActObj=function(e,t){var i;void 0!==this.activeObj.shape&&(i=this.activeObj.shape.split("-")),void 0!==this.activeObj.horTopLine&&void 0!==this.activeObj.shape&&"crop"!==i[0]&&("block"===this.textArea.style.display?(this.setTextBoxStylesToActObj(),this.updateFontRatio(this.activeObj,!0),e&&t?e!==this.activeObj.activePoint.startX&&t!==this.activeObj.activePoint.startY&&(this.updateTextFromTextArea(),this.applyActObj()):(this.updateTextFromTextArea(),this.apply(this.activeObj.shape,this.activeObj),this.objColl.push(this.activeObj),this.refreshActiveObj(),this.textArea.style.transform="")):this.applyActObj())},t.prototype.setTextBoxPos=function(e,t,i,s,n){var o={x:s,y:n};return 0===t?"horizontal"===i.toLowerCase()?(o.x=e.activePoint.endX,o.y=e.activePoint.startY):"vertical"===i.toLowerCase()?(o.x=e.activePoint.startX,o.y=e.activePoint.endY):(o.x=e.activePoint.startX,o.y=e.activePoint.startY):90===t?"horizontal"===i.toLowerCase()?(o.x=e.activePoint.startX,o.y=e.activePoint.startY):"vertical"===i.toLowerCase()?(o.x=e.activePoint.endX,o.y=e.activePoint.endY):(o.x=e.activePoint.endX,o.y=e.activePoint.startY):180===t?"horizontal"===i.toLowerCase()?(o.x=e.activePoint.startX,o.y=e.activePoint.endY):"vertical"===i.toLowerCase()?(o.x=e.activePoint.endX,o.y=e.activePoint.startY):(o.x=e.activePoint.endX,o.y=e.activePoint.endY):270===t&&("horizontal"===i.toLowerCase()?(o.x=e.activePoint.endX,o.y=e.activePoint.endY):"vertical"===i.toLowerCase()?(o.x=e.activePoint.startX,o.y=e.activePoint.startY):(o.x=e.activePoint.startX,o.y=e.activePoint.endY)),o},t.prototype.setTextBoxPoints=function(e,t,i,s,n){var o={x:s,y:n};return 0===t?"horizontal"===e.flipObjColl[0].toLowerCase()?"horizontal"===i.toLowerCase()?(o.x=e.activePoint.startX,o.y=e.activePoint.startY):"vertical"===i.toLowerCase()&&(o.x=e.activePoint.endX,o.y=e.activePoint.endY):"horizontal"===i.toLowerCase()?(o.x=e.activePoint.endX,o.y=e.activePoint.endY):"vertical"===i.toLowerCase()&&(o.x=e.activePoint.endX,o.y=e.activePoint.startY):90===t?"horizontal"===e.flipObjColl[0].toLowerCase()?"horizontal"===i.toLowerCase()?(o.x=e.activePoint.endX,o.y=e.activePoint.endY):"vertical"===i.toLowerCase()&&(o.x=e.activePoint.startX,o.y=e.activePoint.endY):"horizontal"===i.toLowerCase()?(o.x=e.activePoint.startX,o.y=e.activePoint.endY):"vertical"===i.toLowerCase()&&(o.x=e.activePoint.startX,o.y=e.activePoint.startY):180===t?"horizontal"===e.flipObjColl[0].toLowerCase()?("horizontal"===i.toLowerCase()||"vertical"===i.toLowerCase())&&(o.x=e.activePoint.startX,o.y=e.activePoint.startY):"horizontal"===i.toLowerCase()?(o.x=e.activePoint.startX,o.y=e.activePoint.startY):"vertical"===i.toLowerCase()&&(o.x=e.activePoint.startX,o.y=e.activePoint.endY):270===t&&("horizontal"===e.flipObjColl[0].toLowerCase()?"horizontal"===i.toLowerCase()?(o.x=e.activePoint.startX,o.y=e.activePoint.startY):"vertical"===i.toLowerCase()&&(o.x=e.activePoint.endX,o.y=e.activePoint.startY):"horizontal"===i.toLowerCase()?(o.x=e.activePoint.endX,o.y=e.activePoint.startY):"vertical"===i.toLowerCase()&&(o.x=e.activePoint.endX,o.y=e.activePoint.endY)),o},t.prototype.findTextTarget=function(e){var t,i;if("dblclick"===e.type?(t=e.clientX,i=e.clientY):"touchstart"===e.type&&(this.touchEndPoint.x=t=e.touches[0].clientX,this.touchEndPoint.y=i=e.touches[0].clientY),this.preventZoomBtn=!0,this.preventZoomBtn=!1,sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(i)){if("block"===this.textArea.style.display&&""!==this.selectedText()&&"mousedown"===e.type){r=this.textArea.value;this.textArea.value+="a",this.textArea.value=r}}else{var s=this.lowerCanvas.getBoundingClientRect();t-=s.left,i-=s.top;var n=void 0,o="";(n=0===this.activeObj.shapeDegree?this.degree:this.degree-this.activeObj.shapeDegree)<0&&(n=360+n),o=""===this.activeObj.textFlip?this.activeObj.textFlip===this.currFlipState?"":this.currFlipState:this.activeObj.textFlip===this.currFlipState?"":""===this.currFlipState?this.activeObj.textFlip:this.currFlipState;var r=void 0;if("none"===this.textArea.style.display){r=sf.base.extend({},this.activeObj,{},!0);for(var a=0;a<this.objColl.length;a++)JSON.stringify(this.activeObj)===JSON.stringify(this.objColl[a])&&this.objColl.splice(a,1);this.refreshActiveObj(),this.lowerContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.redrawImgWithObj(),(!sf.base.isNullOrUndefined(this.currSelectionPoint)&&"crop-circle"===this.currSelectionPoint.shape||this.isCircleCrop)&&this.cropCircle(this.lowerContext),this.activeObj=r,this.updateFontStyles();var l=sf.base.extend({},this.activeObj,{},!0);if(t>=l.activePoint.startX-2*l.topLeftCircle.radius&&t<=l.activePoint.endX+2*l.topLeftCircle.radius&&i>=l.activePoint.startY-2*l.topLeftCircle.radius&&i<=l.activePoint.endY+2*l.topLeftCircle.radius){var h;if(this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),4===l.flipObjColl.length&&(l.flipObjColl=[],o=""),""===o&&l.flipObjColl.length>1&&(o=l.flipObjColl[l.flipObjColl.length-1]),l.flipObjColl.length<=1)t=(h=this.setTextBoxPos(l,n,o,t,i)).x,i=h.y;else t=(h=this.setTextBoxPoints(l,n,o,t,i)).x,i=h.y;this.textArea.style.display="block",this.textArea.style.left=t+"px",this.textArea.style.top=i+"px",this.textArea.style.fontFamily=l.textSettings.fontFamily,this.textArea.style.fontSize=l.textSettings.fontSize+"px",this.textArea.style.color=l.strokeSettings.strokeColor,this.textArea.style.fontWeight=l.textSettings.bold?"bold":"normal",this.textArea.style.fontStyle=l.textSettings.italic?"italic":"normal",this.textArea.style.border="2px solid "+this.themeColl[this.theme].primaryColor,this.textArea.value=l.keyHistory,this.textArea.style.overflow="hidden",this.textArea.style.height="auto",this.textArea.focus(),n%90==0&&n%180!=0&&0!==n?(this.zoomFactor,this.textArea.style.width=l.activePoint.height+"px",this.textArea.style.height=l.activePoint.width+"px"):(this.zoomFactor,this.textArea.style.width=l.activePoint.width+"px",this.textArea.style.height=l.activePoint.height+"px"),this.setTextBoxWidth(),this.flipColl.length<=1&&this.setTextBoxHeight()}else this.applyActObj()}}},t.prototype.selectedText=function(){var e=this.textArea.selectionStart,t=this.textArea.selectionEnd;return this.textArea.value.substring(e,t)},t.prototype.setTextBoxHeight=function(){var e,t,i="",s=sf.base.extend({},this.activeObj,{},!0);(t=0===s.shapeDegree?this.degree:this.degree-s.shapeDegree)<0&&(t=360+t),i=""===s.textFlip?s.textFlip===this.currFlipState?"":this.currFlipState:s.textFlip===this.currFlipState?"":""===this.currFlipState?s.textFlip:this.currFlipState,0===t?"vertical"===i.toLowerCase()?this.textArea.style.maxHeight=this.destHeight-(this.destHeight-parseFloat(this.textArea.style.top))+"px":(e=parseFloat(this.textArea.style.top)-this.destTop,this.textArea.style.maxHeight=this.destHeight-e+"px"):90===t?"horizontal"===i.toLowerCase()?this.textArea.style.maxHeight=this.destWidth-(parseFloat(this.textArea.style.left)-this.destLeft)+"px":this.textArea.style.maxHeight=parseFloat(this.textArea.style.left)-this.destLeft+"px":180===t?"vertical"===i.toLowerCase()?(e=parseFloat(this.textArea.style.top)-this.destTop,this.textArea.style.maxHeight=this.destHeight-e+"px"):this.textArea.style.maxHeight=parseFloat(this.textArea.style.top)-this.destTop+"px":270===t&&("horizontal"===i.toLowerCase()?this.textArea.style.maxHeight=parseFloat(this.textArea.style.left)-this.destLeft+"px":this.textArea.style.maxHeight=this.destWidth-(parseFloat(this.textArea.style.left)-this.destLeft)+"px")},t.prototype.setTextBoxWidth=function(e){var t=this.getMaxText(!0);"block"===this.textArea.style.display?this.updateFontStyles(!0):this.updateFontStyles();var i,s=this.upperContext.measureText(t).width+parseFloat(this.textArea.style.fontSize)/2,n=e?this.upperContext.measureText(String.fromCharCode(e.which)).width:0,o=sf.base.extend({},this.activeObj,{},!0),r="";(i=0===o.shapeDegree?this.degree:this.degree-o.shapeDegree)<0&&(i=360+i),r=o.shapeFlip!==this.currFlipState?"":this.currFlipState,(!sf.base.isNullOrUndefined(e)&&parseFloat(this.textArea.style.width)<s+n||sf.base.isNullOrUndefined(e))&&(0===i?"horizontal"===r.toLowerCase()?parseFloat(this.textArea.style.left)-this.destLeft-s-n>0&&(this.textArea.style.width=s+n+"px"):this.destWidth-(parseFloat(this.textArea.style.left)-this.destLeft)>s+n&&(this.textArea.style.width=s+n+"px"):90===i?"vertical"===r.toLowerCase()?parseFloat(this.textArea.style.top)-this.destTop-s-n>0&&(this.textArea.style.width=s+n+"px"):this.destWidth-(parseFloat(this.textArea.style.top)-this.destTop)>s+n&&(this.textArea.style.width=s+n+"px"):180===i?"horizontal"===r.toLowerCase()?this.destWidth-(parseFloat(this.textArea.style.left)-this.destLeft)>s+n&&(this.textArea.style.width=s+n+"px"):parseFloat(this.textArea.style.left)-this.destLeft-s-n>0&&(this.textArea.style.width=s+n+"px"):270===i&&("vertical"===r.toLowerCase()?this.destHeight-(parseFloat(this.textArea.style.top)-this.destTop)>s+n&&(this.textArea.style.width=s+n+"px"):parseFloat(this.textArea.style.top)-this.destTop-s-n>0&&(this.textArea.style.width=s+n+"px")))},t.prototype.setActivePoint=function(e,t){if(!sf.base.isNullOrUndefined(this.activeObj.activePoint))if(this.currObjType.isText){var i=e||0,s=t||this.activeObj.textSettings.fontSize;void 0===this.activeObj.textSettings.fontSize&&(this.activeObj.textSettings.fontSize=.1*Math.abs(this.baseImg.width-this.baseImg.height)),this.setTextSelection(i,s),this.mouseDownPoint.x=this.activeObj.activePoint.endX,this.mouseDownPoint.y=this.activeObj.activePoint.endY,void 0!==this.activeObj.horTopLine&&(this.activeObj.activePoint=sf.base.extend({},this.activeObj.activePoint,{},!0)),this.drawObject("duplicate")}else if(e&&t)this.activeObj.activePoint.startX=this.mouseDownPoint.x=e,this.activeObj.activePoint.startY=this.mouseDownPoint.y=t,this.currObjType.isDragging=!0;else{var n=this.activeObj;this.activeObj.activePoint={startX:n.horTopLine.startX,startY:n.horTopLine.startY,endX:n.horTopLine.endX,endY:n.horTopLine.endY},this.activeObj.activePoint.width=this.activeObj.activePoint.endX-this.activeObj.activePoint.startX,this.activeObj.activePoint.height=this.activeObj.activePoint.endY-this.activeObj.activePoint.startY}},t.prototype.setDragWidth=function(e){var t=e;if(t>=0)for(var i=0;i<t&&(e=t-i,this.activeObj.activePoint.startX+=e,this.activeObj.activePoint.endX+=e,!(this.activeObj.activePoint.startX>=this.destLeft&&this.activeObj.activePoint.endX<=this.destLeft+this.destWidth));i++)this.activeObj.activePoint.startX-=e,this.activeObj.activePoint.endX-=e;else for(i=1;i<Math.abs(t)&&(e=t+i,this.activeObj.activePoint.startX+=e,this.activeObj.activePoint.endX+=e,!(this.activeObj.activePoint.startX>=this.destLeft&&this.activeObj.activePoint.endX<=this.destLeft+this.destWidth));i++)this.activeObj.activePoint.startX-=e,this.activeObj.activePoint.endX-=e},t.prototype.setDragHeight=function(e){var t=e;if(t>=0)for(var i=1;i<t&&(e=t-i,this.activeObj.activePoint.startY+=e,this.activeObj.activePoint.endY+=e,!(this.activeObj.activePoint.startY>=this.destTop&&this.activeObj.activePoint.endY<=this.destTop+this.destHeight));i++)this.activeObj.activePoint.startY-=e,this.activeObj.activePoint.endY-=e;else for(i=0;i<Math.abs(t)&&(e=t+i,this.activeObj.activePoint.startY+=e,this.activeObj.activePoint.endY+=e,!(this.activeObj.activePoint.startY>=this.destTop&&this.activeObj.activePoint.endY<=this.destTop+this.destHeight));i++)this.activeObj.activePoint.startY-=e,this.activeObj.activePoint.endY-=e},t.prototype.triggerShapeChange=function(e,t,i){var s=this;this.activeObj.activePoint.width=this.activeObj.activePoint.endX-this.activeObj.activePoint.startX,this.activeObj.activePoint.height=this.activeObj.activePoint.endY-this.activeObj.activePoint.startY;var n=this.updatePreviousShapeSettings();e.currentShapeSettings=n,t.currentShapeSettings=n,"resize"===i?this.dotnetRef.invokeMethodAsync("ShapeEventAsync","OnShape",e).then((function(){s.updateShapeChangeEventArgs(e.currentShapeSettings)})):this.dotnetRef.invokeMethodAsync("ShapeEventAsync","OnShape",t).then((function(){s.updateShapeChangeEventArgs(t.currentShapeSettings)}))},t.prototype.updateActivePoint=function(e,t,i){var s=this.calcMaxDimension(this.activeObj.activePoint.width,this.activeObj.activePoint.height),n=this.updatePreviousShapeSettings(),o={action:"resize",previousShapeSettings:n},r={action:"move",previousShapeSettings:n};switch("text"===this.activeObj.shape&&""!==this.dragElement&&this.updateFontRatio(this.activeObj),this.dragElement.toLowerCase()){case"nw-resize":this.updateNWPoints(e,t,s),this.updateArrowDirection(this.activeObj),this.triggerShapeChange(o,r,"resize");break;case"n-resize":this.updateNPoints(e,t),this.updateArrowDirection(this.activeObj),this.triggerShapeChange(o,r,"resize");break;case"ne-resize":this.updateNEPoints(e,t,s),this.updateArrowDirection(this.activeObj),this.triggerShapeChange(o,r,"resize");break;case"w-resize":this.updateWPoints(e,t),this.updateArrowDirection(this.activeObj),this.triggerShapeChange(o,r,"resize");break;case"e-resize":this.updateEPoints(e,t),this.updateArrowDirection(this.activeObj),this.triggerShapeChange(o,r,"resize");break;case"sw-resize":this.updateSWPoints(e,t,s),this.updateArrowDirection(this.activeObj),this.triggerShapeChange(o,r,"resize");break;case"s-resize":this.updateSPoints(e,t),this.updateArrowDirection(this.activeObj),this.triggerShapeChange(o,r,"resize");break;case"se-resize":this.updateSEPoints(e,t,s),this.updateArrowDirection(this.activeObj),this.triggerShapeChange(o,r,"resize");break;default:if(!i&&!this.currObjType.isCustomCrop){if(this.dragPoint.startX){var a=this.dragPoint.endX-this.previousPoint.x,l=this.dragPoint.endY-this.previousPoint.y;this.activeObj.activePoint.startX+=a,this.activeObj.activePoint.endX+=a,this.activeObj.activePoint.startY+=l,this.activeObj.activePoint.endY+=l,!this.isPreventDragging&&(this.activeObj.activePoint.startX<this.destLeft||this.activeObj.activePoint.startY<this.destTop||this.activeObj.activePoint.endX>this.destLeft+this.destWidth||this.activeObj.activePoint.endY>this.destTop+this.destHeight)&&(this.activeObj.activePoint.startX-=a,this.activeObj.activePoint.endX-=a,this.activeObj.activePoint.startY-=l,this.activeObj.activePoint.endY-=l,this.setDragWidth(a),this.setDragHeight(l))}else this.activeObj.activePoint.startX=e<this.mouseDownPoint.x?e:this.mouseDownPoint.x,this.activeObj.activePoint.startY=t<this.mouseDownPoint.y?t:this.mouseDownPoint.y,e=e<this.mouseDownPoint.x?this.mouseDownPoint.x:e,t=t<this.mouseDownPoint.y?this.mouseDownPoint.y:t,this.activeObj.activePoint.endX=e,this.activeObj.activePoint.endY=t;this.triggerShapeChange(o,r,"move")}}},t.prototype.updateArrowDirection=function(e,t,i){"arrow"===e.shape&&(e.activePoint.width<0||e.activePoint.height<0||"horizontal"===t||"vertical"===t||90===i)&&("left"===e.triangleDirection&&(e.activePoint.width<0||"horizontal"===t)?e.triangleDirection="right":"right"===e.triangleDirection&&(e.activePoint.width<0||"horizontal"===t)?e.triangleDirection="left":"top"===e.triangleDirection&&(e.activePoint.height<0||"vertical"===t)?e.triangleDirection="bottom":"bottom"===e.triangleDirection&&(e.activePoint.height<0||"vertical"===t)&&(e.triangleDirection="top"),sf.base.isNullOrUndefined(i)||90!==i||("right"===e.triangleDirection?e.triangleDirection="bottom":"bottom"===e.triangleDirection?e.triangleDirection="left":"left"===e.triangleDirection?e.triangleDirection="top":"top"===e.triangleDirection&&(e.triangleDirection="right")))},t.prototype.preventDraggingInvertly=function(){this.isPreventDragging||(this.activeObj.activePoint.startX<this.destLeft&&(this.activeObj.activePoint.startX=this.destLeft),this.activeObj.activePoint.startY<this.destTop&&(this.activeObj.activePoint.startY=this.destTop),this.activeObj.activePoint.endX>this.destLeft+this.destWidth&&(this.activeObj.activePoint.endX=this.destLeft+this.destWidth),this.activeObj.activePoint.endY>this.destTop+this.destHeight&&(this.activeObj.activePoint.endY=this.destTop+this.destHeight))},t.prototype.updateNWPoints=function(e,t,i){var s,n,o,r,a=this.diffPoint.x,l=this.diffPoint.y,h=sf.base.extend({},this.activeObj,null,!0);if("text"===this.activeObj.shape)void 0===this.oldPoint.x&&void 0===this.oldPoint.y?(this.diffPoint.x=this.activeObj.activePoint.startX-e,this.diffPoint.y=this.activeObj.activePoint.startY-t):(this.diffPoint.x=this.oldPoint.x-e,this.diffPoint.y=this.oldPoint.y-t),this.oldPoint.x=e,this.oldPoint.y=t,r=(this.diffPoint.x<=a&&this.diffPoint.y>=l?Math.min(this.diffPoint.x,this.diffPoint.y):Math.max(this.diffPoint.x,this.diffPoint.y))/10,this.activeObj.activePoint.startX-=i.width/100*r,this.activeObj.activePoint.startY-=i.height/100*r,this.activeObj.activePoint.width=this.activeObj.activePoint.endX-this.activeObj.activePoint.startX,this.activeObj.activePoint.height=this.activeObj.activePoint.endY-this.activeObj.activePoint.startY,this.updateFontSize(this.activeObj);else{var d=void 0;if(void 0!==this.activeObj.shape&&(d=this.activeObj.shape.split("-")),"crop-custom"===this.activeObj.shape||void 0!==this.activeObj.shape&&"crop"!==d[0]){if(this.activeObj.activePoint.startX=e,this.activeObj.activePoint.startY=t,this.activeObj.activePoint.startX>this.activeObj.activePoint.endX){var c=this.activeObj.activePoint.startX;this.activeObj.activePoint.startX=this.activeObj.activePoint.endX,this.activeObj.activePoint.endX=c,this.dragElement="ne-resize"}if(this.activeObj.activePoint.startY>this.activeObj.activePoint.endY){c=this.activeObj.activePoint.startY;this.activeObj.activePoint.startY=this.activeObj.activePoint.endY,this.activeObj.activePoint.endY=c,this.dragElement="sw-resize"}this.preventDraggingInvertly()}else if(this.activeObj.activePoint.startX<e&&this.activeObj.activePoint.startY<t){s=e-this.activeObj.activePoint.startX,n=t-this.activeObj.activePoint.startY,o=Math.min(s,n);var p=this.getScaleRatio(o);this.activeObj.activePoint.startX+=p.x,this.activeObj.activePoint.startY+=p.y;var u=this.destLeft>0?this.destLeft:0,f=this.destTop>0?this.destTop:0;(this.activeObj.activePoint.startX<u||this.activeObj.activePoint.startY<f)&&(this.activeObj.activePoint.startX-=p.x,this.activeObj.activePoint.startY-=p.y)}else{s=this.activeObj.activePoint.startX-e,n=t-this.activeObj.activePoint.endY,o=Math.max(s,n);p=this.getScaleRatio(o);this.activeObj.activePoint.startX-=p.x,this.activeObj.activePoint.startY-=p.y;u=this.destLeft>0?this.destLeft:0;var g=this.destTop>0?this.destTop:0;(this.activeObj.activePoint.startX<u||this.activeObj.activePoint.startY<g)&&(this.activeObj.activePoint.startX+=p.x,this.activeObj.activePoint.startY+=p.y)}this.activeObj.activePoint.width=this.activeObj.activePoint.endX-this.activeObj.activePoint.startX,this.activeObj.activePoint.height=this.activeObj.activePoint.endY-this.activeObj.activePoint.startY,this.preventInverseResize(h)}},t.prototype.updateNPoints=function(e,t){var i,s,n;if("text"!==this.activeObj.shape){var o=void 0;if(void 0!==this.activeObj.shape&&(o=this.activeObj.shape.split("-")),"crop-custom"===this.activeObj.shape||void 0!==this.activeObj.shape&&"crop"!==o[0]){if(this.activeObj.activePoint.startY=t,this.activeObj.activePoint.height=this.activeObj.activePoint.endY-this.activeObj.activePoint.startY,this.activeObj.activePoint.startY>this.activeObj.activePoint.endY){var r=this.activeObj.activePoint.startY;this.activeObj.activePoint.startY=this.activeObj.activePoint.endY,this.activeObj.activePoint.endY=r,this.dragElement="s-resize"}this.preventDraggingInvertly()}else{if(this.activeObj.activePoint.endX>e&&this.activeObj.activePoint.startY<t){i=this.activeObj.activePoint.endX-e,s=t-this.activeObj.activePoint.startY,n=Math.min(i,s);var a=this.getScaleRatio(n);this.activeObj.activePoint.endX-=a.x,this.activeObj.activePoint.startY+=a.y,(this.activeObj.activePoint.endX>this.destLeft+this.destWidth||this.activeObj.activePoint.startY<this.destTop)&&(this.activeObj.activePoint.endX+=a.x,this.activeObj.activePoint.startY-=a.y)}else{i=e-this.activeObj.activePoint.endX,s=this.activeObj.activePoint.startY-t,n=Math.max(i,s);a=this.getScaleRatio(n);this.activeObj.activePoint.endX+=a.x,this.activeObj.activePoint.startY-=a.y,(this.activeObj.activePoint.endX>this.destLeft+this.destWidth||this.activeObj.activePoint.startY<this.destTop)&&(this.activeObj.activePoint.endX-=a.x,this.activeObj.activePoint.startY+=a.y)}this.activeObj.activePoint.width=this.activeObj.activePoint.endX-this.activeObj.activePoint.startX,this.activeObj.activePoint.height=this.activeObj.activePoint.endY-this.activeObj.activePoint.startY}}},t.prototype.updateNEPoints=function(e,t,i){var s,n,o,r,a=this.diffPoint.x,l=this.diffPoint.y,h=sf.base.extend({},this.activeObj,null,!0);if("text"===this.activeObj.shape)void 0===this.oldPoint.x&&void 0===this.oldPoint.y?(this.diffPoint.x=e-this.activeObj.activePoint.endX,this.diffPoint.y=this.activeObj.activePoint.startY-t):(this.diffPoint.x=e-this.oldPoint.x,this.diffPoint.y=this.oldPoint.y-t),this.oldPoint.x=e,this.oldPoint.y=t,r=(this.diffPoint.x<=a&&this.diffPoint.y>=l?Math.min(this.diffPoint.x,this.diffPoint.y):Math.max(this.diffPoint.x,this.diffPoint.y))/10,this.activeObj.activePoint.endX+=i.width/100*r,this.activeObj.activePoint.startY-=i.height/100*r,this.activeObj.activePoint.width=this.activeObj.activePoint.endX-this.activeObj.activePoint.startX,this.activeObj.activePoint.height=this.activeObj.activePoint.endY-this.activeObj.activePoint.startY,this.updateFontSize(this.activeObj);else{var d=void 0;if(void 0!==this.activeObj.shape&&(d=this.activeObj.shape.split("-")),this.currObjType.isCustomCrop||void 0!==this.activeObj.shape&&"crop"!==d[0]){if(this.activeObj.activePoint.endX=e,this.activeObj.activePoint.startY=t,this.activeObj.activePoint.endX<this.activeObj.activePoint.startX){var c=this.activeObj.activePoint.endX;this.activeObj.activePoint.endX=this.activeObj.activePoint.startX,this.activeObj.activePoint.startX=c,this.dragElement="nw-resize"}if(this.activeObj.activePoint.startY>this.activeObj.activePoint.endY){c=this.activeObj.activePoint.startY;this.activeObj.activePoint.startY=this.activeObj.activePoint.endY,this.activeObj.activePoint.endY=c,this.dragElement="se-resize"}this.preventDraggingInvertly()}else if(this.activeObj.activePoint.endX>e&&this.activeObj.activePoint.startY<t){s=this.activeObj.activePoint.endX-e,n=t-this.activeObj.activePoint.startY,o=Math.min(s,n);var p=this.getScaleRatio(o);this.activeObj.activePoint.endX-=p.x,this.activeObj.activePoint.startY+=p.y;var u=this.destLeft+this.destWidth<this.lowerCanvas.width?this.destLeft+this.destWidth:this.lowerCanvas.width,f=this.destTop>0?this.destTop:0;(this.activeObj.activePoint.endX>u||this.activeObj.activePoint.startY<f)&&(this.activeObj.activePoint.endX+=p.x,this.activeObj.activePoint.startY-=p.y)}else{s=e-this.activeObj.activePoint.endX,n=this.activeObj.activePoint.startY-t,o=Math.max(s,n);p=this.getScaleRatio(o);this.activeObj.activePoint.endX+=p.x,this.activeObj.activePoint.startY-=p.y;u=this.destLeft+this.destWidth<this.lowerCanvas.width?this.destLeft+this.destWidth:this.lowerCanvas.width,f=this.destTop>0?this.destTop:0;(this.activeObj.activePoint.endX>u||this.activeObj.activePoint.startY<f)&&(this.activeObj.activePoint.endX-=p.x,this.activeObj.activePoint.startY+=p.y)}this.activeObj.activePoint.width=this.activeObj.activePoint.endX-this.activeObj.activePoint.startX,this.activeObj.activePoint.height=this.activeObj.activePoint.endY-this.activeObj.activePoint.startY,this.preventInverseResize(h)}},t.prototype.updateWPoints=function(e,t){var i,s,n;if("text"!==this.activeObj.shape){var o=void 0;if(void 0!==this.activeObj.shape&&(o=this.activeObj.shape.split("-")),"crop-custom"===this.activeObj.shape||void 0!==this.activeObj.shape&&"crop"!==o[0]){if(this.activeObj.activePoint.startX=e,this.activeObj.activePoint.width=this.activeObj.activePoint.endX-this.activeObj.activePoint.startX,this.activeObj.activePoint.startX>this.activeObj.activePoint.endX){var r=this.activeObj.activePoint.startX;this.activeObj.activePoint.startX=this.activeObj.activePoint.endX,this.activeObj.activePoint.endX=r,this.dragElement="e-resize"}this.preventDraggingInvertly()}else{if(this.activeObj.activePoint.startX<e&&this.activeObj.activePoint.endY>t){i=e-this.activeObj.activePoint.startX,s=this.activeObj.activePoint.endY-t,n=Math.min(i,s);var a=this.getScaleRatio(n);this.activeObj.activePoint.startX+=a.x,this.activeObj.activePoint.endY-=a.y,(this.activeObj.activePoint.startX<this.destLeft||this.activeObj.activePoint.endY>this.destTop+this.destHeight)&&(this.activeObj.activePoint.startX-=a.x,this.activeObj.activePoint.endY+=a.y)}else{i=this.activeObj.activePoint.startX-e,s=t-this.activeObj.activePoint.endY,n=Math.max(i,s);a=this.getScaleRatio(n);this.activeObj.activePoint.startX-=a.x,this.activeObj.activePoint.endY+=a.y,(this.activeObj.activePoint.startX<this.destLeft||this.activeObj.activePoint.endY>this.destTop+this.destHeight)&&(this.activeObj.activePoint.startX+=a.x,this.activeObj.activePoint.endY-=a.y)}this.activeObj.activePoint.width=this.activeObj.activePoint.endX-this.activeObj.activePoint.startX,this.activeObj.activePoint.height=this.activeObj.activePoint.endY-this.activeObj.activePoint.startY}}},t.prototype.updateEPoints=function(e,t){var i,s,n;if("text"!==this.activeObj.shape){var o=void 0;if(void 0!==this.activeObj.shape&&(o=this.activeObj.shape.split("-")),"crop-custom"===this.activeObj.shape||void 0!==this.activeObj.shape&&"crop"!==o[0]){if(this.activeObj.activePoint.endX=e,this.activeObj.activePoint.width=this.activeObj.activePoint.endX-this.activeObj.activePoint.startX,this.activeObj.activePoint.endX<this.activeObj.activePoint.startX){var r=this.activeObj.activePoint.endX;this.activeObj.activePoint.endX=this.activeObj.activePoint.startX,this.activeObj.activePoint.startX=r,this.dragElement="w-resize"}this.preventDraggingInvertly()}else{if(this.activeObj.activePoint.endX>e&&this.activeObj.activePoint.endY>t){i=this.activeObj.activePoint.endX-e,s=this.activeObj.activePoint.endY-t,n=Math.min(i,s);var a=this.getScaleRatio(n);this.activeObj.activePoint.endX-=a.x,this.activeObj.activePoint.endY-=a.y,(this.activeObj.activePoint.endX>this.destLeft+this.destWidth||this.activeObj.activePoint.endY>this.destTop+this.destHeight)&&(this.activeObj.activePoint.endX+=a.x,this.activeObj.activePoint.endY+=a.y)}else{i=e-this.activeObj.activePoint.endX,s=t-this.activeObj.activePoint.endY,n=Math.max(i,s);a=this.getScaleRatio(n);this.activeObj.activePoint.endX+=a.x,this.activeObj.activePoint.endY+=a.y,(this.activeObj.activePoint.endX>this.destLeft+this.destWidth||this.activeObj.activePoint.endY>this.destTop+this.destHeight)&&(this.activeObj.activePoint.endX-=a.x,this.activeObj.activePoint.endY-=a.y)}this.activeObj.activePoint.width=this.activeObj.activePoint.endX-this.activeObj.activePoint.startX,this.activeObj.activePoint.height=this.activeObj.activePoint.endY-this.activeObj.activePoint.startY}}},t.prototype.updateSWPoints=function(e,t,i){var s,n,o,r,a=this.diffPoint.x,l=this.diffPoint.y,h=sf.base.extend({},this.activeObj,null,!0);if("text"===this.activeObj.shape)void 0===this.oldPoint.x&&void 0===this.oldPoint.y?(this.diffPoint.x=this.activeObj.activePoint.startX-e,this.diffPoint.y=t-this.activeObj.activePoint.endY):(this.diffPoint.x=this.oldPoint.x-e,this.diffPoint.y=t-this.oldPoint.y),this.oldPoint.x=e,this.oldPoint.y=t,r=(this.diffPoint.x<=a&&this.diffPoint.y>=l?Math.min(this.diffPoint.x,this.diffPoint.y):Math.max(this.diffPoint.x,this.diffPoint.y))/10,this.activeObj.activePoint.startX-=i.width/100*r,this.activeObj.activePoint.endY+=i.height/100*r,this.activeObj.activePoint.width=this.activeObj.activePoint.endX-this.activeObj.activePoint.startX,this.activeObj.activePoint.height=this.activeObj.activePoint.endY-this.activeObj.activePoint.startY,this.updateFontSize(this.activeObj);else{var d=void 0;if(void 0!==this.activeObj.shape&&(d=this.activeObj.shape.split("-")),"crop-custom"===this.activeObj.shape||void 0!==this.activeObj.shape&&"crop"!==d[0]){if(this.activeObj.activePoint.startX=e,this.activeObj.activePoint.endY=t,this.activeObj.activePoint.startX>this.activeObj.activePoint.endX){var c=this.activeObj.activePoint.startX;this.activeObj.activePoint.startX=this.activeObj.activePoint.endX,this.activeObj.activePoint.endX=c,this.dragElement="se-resize"}if(this.activeObj.activePoint.endY<this.activeObj.activePoint.startY){c=this.activeObj.activePoint.endY;this.activeObj.activePoint.endY=this.activeObj.activePoint.startY,this.activeObj.activePoint.startY=c,this.dragElement="nw-resize"}this.preventDraggingInvertly()}else if(this.activeObj.activePoint.startX<e&&this.activeObj.activePoint.endY>t){s=e-this.activeObj.activePoint.startX,n=this.activeObj.activePoint.endY-t,o=Math.min(s,n);var p=this.getScaleRatio(o);this.activeObj.activePoint.startX+=p.x,this.activeObj.activePoint.endY-=p.y;var u=this.destLeft>0?this.destLeft:0,f=this.destTop+this.destHeight<this.lowerCanvas.height?this.destTop+this.destHeight:this.lowerCanvas.height;(this.activeObj.activePoint.startX<u||this.activeObj.activePoint.endY>f)&&(this.activeObj.activePoint.startX-=p.x,this.activeObj.activePoint.endY+=p.y)}else{s=this.activeObj.activePoint.startX-e,n=t-this.activeObj.activePoint.endY,o=Math.max(s,n);p=this.getScaleRatio(o);this.activeObj.activePoint.startX-=p.x,this.activeObj.activePoint.endY+=p.y;u=this.destLeft>0?this.destLeft:0,f=this.destTop+this.destHeight<this.lowerCanvas.height?this.destTop+this.destHeight:this.lowerCanvas.height;(this.activeObj.activePoint.startX<u||this.activeObj.activePoint.endY>f)&&(this.activeObj.activePoint.startX+=p.x,this.activeObj.activePoint.endY-=p.y)}this.activeObj.activePoint.width=this.activeObj.activePoint.endX-this.activeObj.activePoint.startX,this.activeObj.activePoint.height=this.activeObj.activePoint.endY-this.activeObj.activePoint.startY,this.preventInverseResize(h)}},t.prototype.updateSPoints=function(e,t){var i,s,n;if("text"!==this.activeObj.shape){var o=void 0;if(void 0!==this.activeObj.shape&&(o=this.activeObj.shape.split("-")),"crop-custom"===this.activeObj.shape||void 0!==this.activeObj.shape&&"crop"!==o[0]){if(this.activeObj.activePoint.endY=t,this.activeObj.activePoint.height=this.activeObj.activePoint.endY-this.activeObj.activePoint.startY,this.activeObj.activePoint.endY<this.activeObj.activePoint.startY){var r=this.activeObj.activePoint.endY;this.activeObj.activePoint.endY=this.activeObj.activePoint.startY,this.activeObj.activePoint.startY=r,this.dragElement="n-resize"}this.preventDraggingInvertly()}else{if(this.activeObj.activePoint.endX>e&&this.activeObj.activePoint.endY>t){i=this.activeObj.activePoint.endX-e,s=this.activeObj.activePoint.endY-t,n=Math.min(i,s);var a=this.getScaleRatio(n);this.activeObj.activePoint.endX-=a.x,this.activeObj.activePoint.endY-=a.y,(this.activeObj.activePoint.endX>this.destLeft+this.destWidth||this.activeObj.activePoint.endY>this.destTop+this.destHeight)&&(this.activeObj.activePoint.endX+=a.x,this.activeObj.activePoint.endY+=a.y)}else{i=e-this.activeObj.activePoint.endX,s=t-this.activeObj.activePoint.endY,n=Math.max(i,s);a=this.getScaleRatio(n);this.activeObj.activePoint.endX+=a.x,this.activeObj.activePoint.endY+=a.x,(this.activeObj.activePoint.endX>this.destLeft+this.destWidth||this.activeObj.activePoint.endY>this.destTop+this.destHeight)&&(this.activeObj.activePoint.endX-=a.x,this.activeObj.activePoint.endY-=a.y)}this.activeObj.activePoint.width=this.activeObj.activePoint.endX-this.activeObj.activePoint.startX,this.activeObj.activePoint.height=this.activeObj.activePoint.endY-this.activeObj.activePoint.startY}}},t.prototype.updateSEPoints=function(e,t,i){var s,n,o,r,a=this.diffPoint.x,l=this.diffPoint.y,h=sf.base.extend({},this.activeObj,null,!0);if("text"===this.activeObj.shape)void 0===this.oldPoint.x&&void 0===this.oldPoint.y?(this.diffPoint.x=e-this.activeObj.activePoint.endX,this.diffPoint.y=t-this.activeObj.activePoint.endY):(this.diffPoint.x=e-this.oldPoint.x,this.diffPoint.y=t-this.oldPoint.y),this.oldPoint.x=e,this.oldPoint.y=t,r=(this.diffPoint.x>=a&&this.diffPoint.y>=l?Math.max(this.diffPoint.x,this.diffPoint.y):Math.min(this.diffPoint.x,this.diffPoint.y))/10,this.activeObj.activePoint.endX+=i.width/50*r,this.activeObj.activePoint.endY+=i.height/50*r,this.activeObj.activePoint.width=this.activeObj.activePoint.endX-this.activeObj.activePoint.startX,this.activeObj.activePoint.height=this.activeObj.activePoint.endY-this.activeObj.activePoint.startY,this.updateFontSize(this.activeObj);else{var d=void 0;if(void 0!==this.activeObj.shape&&(d=this.activeObj.shape.split("-")),"crop-custom"===this.activeObj.shape||void 0!==this.activeObj.shape&&"crop"!==d[0]){if(this.activeObj.activePoint.endX=e,this.activeObj.activePoint.endY=t,this.activeObj.activePoint.endX<this.activeObj.activePoint.startX){var c=this.activeObj.activePoint.endX;this.activeObj.activePoint.endX=this.activeObj.activePoint.startX,this.activeObj.activePoint.startX=c,this.dragElement="sw-resize"}if(this.activeObj.activePoint.endY<this.activeObj.activePoint.startY){c=this.activeObj.activePoint.endY;this.activeObj.activePoint.endY=this.activeObj.activePoint.startY,this.activeObj.activePoint.startY=c,this.dragElement="ne-resize"}this.preventDraggingInvertly()}else if(this.activeObj.activePoint.endX>e&&this.activeObj.activePoint.endY>t){s=this.activeObj.activePoint.endX-e,n=this.activeObj.activePoint.endY-t,o=Math.min(s,n);var p=this.getScaleRatio(o);this.activeObj.activePoint.endX-=p.x,this.activeObj.activePoint.endY-=p.y;var u=this.destLeft+this.destWidth<this.lowerCanvas.width?this.destLeft+this.destWidth:this.lowerCanvas.width,f=this.destTop+this.destHeight<this.lowerCanvas.height?this.destTop+this.destHeight:this.lowerCanvas.height;(this.activeObj.activePoint.endX>u||this.activeObj.activePoint.endY>f)&&(this.activeObj.activePoint.endX+=p.x,this.activeObj.activePoint.endY+=p.y)}else{s=e-this.activeObj.activePoint.endX,n=t-this.activeObj.activePoint.endY,o=Math.max(s,n);p=this.getScaleRatio(o);this.activeObj.activePoint.endX+=p.x,this.activeObj.activePoint.endY+=p.y;u=this.destLeft+this.destWidth<this.lowerCanvas.width?this.destLeft+this.destWidth:this.lowerCanvas.width,f=this.destTop+this.destHeight<this.lowerCanvas.height?this.destTop+this.destHeight:this.lowerCanvas.height;(this.activeObj.activePoint.endX>u||this.activeObj.activePoint.endY>f)&&(this.activeObj.activePoint.endX-=p.x,this.activeObj.activePoint.endY-=p.y)}this.activeObj.activePoint.width=this.activeObj.activePoint.endX-this.activeObj.activePoint.startX,this.activeObj.activePoint.height=this.activeObj.activePoint.endY-this.activeObj.activePoint.startY,this.preventInverseResize(h)}},t.prototype.updateFontRatio=function(e,t){var i;i=0===e.shapeDegree?this.degree:this.degree-e.shapeDegree,sf.base.isNullOrUndefined(t)?e.textSettings.fontRatio=0===i||180===i?e.activePoint.width/e.textSettings.fontSize:e.activePoint.height/e.textSettings.fontSize:t&&(e.textSettings.fontRatio=0===i||180===i?this.textArea.clientWidth/parseFloat(this.textArea.style.fontSize):this.textArea.clientHeight/parseFloat(this.textArea.style.fontSize))},t.prototype.updateFontSize=function(e){var t;t=0===e.shapeDegree?this.degree:this.degree-e.shapeDegree,e.textSettings.fontSize=0===t||180===t?e.activePoint.width/e.textSettings.fontRatio:e.activePoint.height/e.textSettings.fontRatio},t.prototype.preventInverseResize=function(e){this.activeObj.activePoint.width<0&&(this.activeObj.activePoint.width=0,this.activeObj.activePoint.startX=e.activePoint.startX,this.activeObj.activePoint.endX=e.activePoint.endX),this.activeObj.activePoint.height<0&&(this.activeObj.activePoint.height=0,this.activeObj.activePoint.startY=e.activePoint.startY,this.activeObj.activePoint.endY=e.activePoint.endY)},t.prototype.getScaleRatio=function(e){var t={x:e,y:e};if(!sf.base.isNullOrUndefined(this.activeObj.shape)&&"crop-custom"!==this.activeObj.shape&&"crop-circle"!==this.activeObj.shape&&"crop-square"!==this.activeObj.shape){var i=this.activeObj.shape.split("-");if(i.length>1){i=i[1].split(":");var s=e/parseInt(i[1],10);t.x=s*parseInt(i[0],10),t.y=s*parseInt(i[1],10)}}return t},t.prototype.getMaxText=function(e,t){var i;sf.base.isNullOrUndefined(t)&&(t=e?this.textArea.value:this.activeObj.keyHistory);for(var s=t.split("\n"),n=s[0].length,o=s[0],r=1;r<s.length;r++)(i=s[r].length)>n&&(o=s[r],n=i);return o},t.prototype.setDragLimit=function(){this.activeObj.activePoint&&(this.activeObj.activePoint.startX<this.destLeft?(this.activeObj.activePoint.startX=this.destLeft,this.activeObj.activePoint.endX=this.activeObj.activePoint.startX+this.activeObj.activePoint.width):this.activeObj.activePoint.endX>this.destLeft+this.destWidth&&(this.activeObj.activePoint.endX=this.destLeft+this.destWidth,this.activeObj.activePoint.startX=this.activeObj.activePoint.endX-this.activeObj.activePoint.width),this.activeObj.activePoint.startY<this.destTop?this.activeObj.activePoint.startY=this.destTop:this.activeObj.activePoint.endY>this.destTop+this.destHeight&&(this.activeObj.activePoint.endY=this.destTop+this.destHeight,this.activeObj.activePoint.startY=this.activeObj.activePoint.endY-this.activeObj.activePoint.height),this.activeObj.activePoint.width=this.activeObj.activePoint.endX-this.activeObj.activePoint.startX,this.activeObj.activePoint.height=this.activeObj.activePoint.endY-this.activeObj.activePoint.startY)},t.prototype.lineDraw=function(){this.activeObj.activePoint.height<10?(this.activeObj.activePoint.startY-=10,this.activeObj.activePoint.endY+=10,this.activeObj.lineDraw="horizontal"):this.activeObj.activePoint.width<10?(this.activeObj.activePoint.startX-=10,this.activeObj.activePoint.endX+=10,this.activeObj.lineDraw="vertical"):this.currObjType.isInitialLine&&(this.activeObj.lineDraw="normal",this.currObjType.isInitialLine=!1),this.activeObj.activePoint.width=this.activeObj.activePoint.endX-this.activeObj.activePoint.startX,this.activeObj.activePoint.height=this.activeObj.activePoint.endY-this.activeObj.activePoint.startY},t.prototype.shapeCircle=function(e,t,i){e.strokeStyle=this.themeColl[this.theme].primaryColor,e.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),e.fillStyle="rgb(0, 0, 0, 0.5)",e.fillRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height);var s=e.lineWidth;e.lineWidth=2,e.beginPath(),e.ellipse(this.activeObj.horTopLine.startX+t/2,this.activeObj.horTopLine.startY+i/2,t/2,i/2,0,0,2*Math.PI,!1),e.stroke(),e.closePath(),e.save(),e.beginPath(),e.arc((this.activeObj.activePoint.endX-this.activeObj.activePoint.startX)/2+this.activeObj.activePoint.startX,(this.activeObj.activePoint.endY-this.activeObj.activePoint.startY)/2+this.activeObj.activePoint.startY,this.activeObj.activePoint.width/2,0,2*Math.PI),e.closePath(),e.clip(),e.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),e.restore(),e.lineWidth=s,this.drawOuterSelection(e,!0),this.currObjType.shape=""},t.prototype.drawOuterSelection=function(e,t){var i;e.lineWidth=.5,void 0!==this.activeObj.shape&&(i=this.activeObj.shape.split("-"));var s,n=sf.base.extend({},this.activeObj,{},!0);void 0!==this.activeObj.shape&&(i=this.activeObj.shape.split("-")),(void 0===i||"crop"!==i[0])&&void 0!==this.activeObj.shape||t||(this.upperContext.fillStyle="rgb(0, 0, 0, 0.5)",this.upperContext.fillRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),this.upperContext.clearRect(this.activeObj.activePoint.startX,this.activeObj.activePoint.startY,this.activeObj.activePoint.width,this.activeObj.activePoint.height)),e.strokeStyle=this.themeColl[this.theme].primaryColor,e.fillStyle=this.themeColl[this.theme].secondaryColor,(s=0===n.shapeDegree?this.degree:this.degree-n.shapeDegree)<0&&(s=360+s),"arrow"===this.activeObj.shape||"line"===this.activeObj.shape?(e.beginPath(),s%90==0&&s%180!=0?(e.moveTo(n.topCenterCircle.startX,n.topCenterCircle.startY),e.lineTo(n.bottomCenterCircle.startX,n.bottomCenterCircle.startY)):(e.moveTo(n.centerLeftCircle.startX,n.centerLeftCircle.startY),e.lineTo(n.centerRightCircle.startX,n.centerRightCircle.startY)),e.stroke()):(e.beginPath(),e.rect(n.activePoint.startX,n.activePoint.startY,n.activePoint.width,n.activePoint.height),e.stroke(),e.closePath(),e.lineWidth*=2,e.beginPath(),e.moveTo(n.topLeftCircle.startX,n.topLeftCircle.startY),e.arc(n.topLeftCircle.startX,n.topLeftCircle.startY,n.topLeftCircle.radius,0,2*Math.PI),e.moveTo(n.topRightCircle.startX,n.topRightCircle.startY),e.arc(n.topRightCircle.startX,n.topRightCircle.startY,n.topRightCircle.radius,0,2*Math.PI),e.moveTo(n.bottomLeftCircle.startX,n.bottomLeftCircle.startY),e.arc(n.bottomLeftCircle.startX,n.bottomLeftCircle.startY,n.bottomLeftCircle.radius,0,2*Math.PI),e.moveTo(n.bottomRightCircle.startX,n.bottomRightCircle.startY),e.arc(n.bottomRightCircle.startX,n.bottomRightCircle.startY,n.bottomRightCircle.radius,0,2*Math.PI),e.stroke(),e.fill(),e.closePath(),e.lineWidth/=2),void 0!==i&&"crop"===i[0]||"text"===this.activeObj.shape||this.drawCenterCircles(e,s),this.activeObj=sf.base.extend({},n,{},!0)},t.prototype.drawObject=function(e,t,i,s,n,o){var r;if(this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),"original"===e.toLowerCase()?r=this.lowerContext:"duplicate"===e.toLowerCase()?r=this.upperContext:sf.base.isNullOrUndefined(o)||(r=o),n||sf.base.isNullOrUndefined(this.activeObj.shape)||this.setDragLimit(),this.currObjType.isLine&&"original"!==e&&!t&&this.lineDraw(),"crop"===this.currObjType.shape.split("-")[0].toLowerCase()&&i&&this.drawCropRatio(),s&&(this.activeObj.activePoint.startX=s.startX,this.activeObj.activePoint.startY=s.startY,this.activeObj.activePoint.endX=s.endX,this.activeObj.activePoint.endY=s.endY,this.activeObj.activePoint.width=s.width,this.activeObj.activePoint.height=s.height),sf.base.isNullOrUndefined(this.activeObj.strokeSettings)&&(this.activeObj.strokeSettings=this.strokeSettings),sf.base.isNullOrUndefined(this.activeObj.strokeSettings.strokeWidth)&&(this.activeObj.strokeSettings.strokeWidth=4),t&&(this.activeObj=sf.base.extend({},t,{},!0)),this.updateActiveObject(),this.currObjType.isText&&(this.activeObj.keyHistory=this.keyHistory),"original"!==e.toLowerCase()){var a=!1;this.activeObj.shape&&"crop"===this.activeObj.shape.split("-")[0]&&(a=!0),a&&(this.upperContext.fillStyle="rgb(0, 0, 0, 0.5)",this.upperContext.fillRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),this.upperContext.clearRect(this.activeObj.activePoint.startX,this.activeObj.activePoint.startY,this.activeObj.activePoint.width,this.activeObj.activePoint.height)),r!==this.lowerContext&&r!==this.upperContext||this.drawOuterSelection(r)}this.currObjType.isActiveObj=!0,t?this.drawShapeObj(e,t.shape,o):""!==this.keyHistory&&this.currObjType.isText?this.drawShapeObj(e,"text",o):this.activeObj.shape?this.drawShapeObj(e,this.activeObj.shape,o):this.drawShapeObj(e,void 0,o),this.isAllowCropPan&&(this.isAllowCropPan=!1,this.tempPanMove=sf.base.extend({},this.panMove,{},!0),this.currentPannedPoint=this.updatePanPoints(this.getCurrentPanRegion()),this.rotatePan())},t.prototype.updateActiveObject=function(e,t,i,s,n){e=e||sf.base.extend({},this.activeObj.activePoint,{},!0),t=t||sf.base.extend({},this.activeObj,{},!0),e.width=e.endX-e.startX,e.height=e.endY-e.startY,s=s||0,n=n||0;var o=e.width/2,r=e.height/2;t.horTopLine={startX:e.startX+s,startY:e.startY-n,endX:e.endX+s,endY:e.endY+n},t.horBottomLine={startX:e.startX-s,startY:e.endY-n,endX:e.endX-s,endY:e.endY+n},t.verLeftLine={startX:e.startX+s,startY:e.startY-n,endX:e.startX-n,endY:e.endY-n},t.verRightLine={startX:e.endX+s,startY:e.startY+n,endX:e.endX-s,endY:e.endY+n},t.topLeftCircle={startX:e.startX,startY:e.startY,radius:t.horTopLine.endX?7.5:0},t.topCenterCircle={startX:e.startX+o,startY:e.startY,radius:t.horTopLine.endX?7.5:0},t.topRightCircle={startX:e.endX,startY:e.startY,radius:t.horTopLine.endX?7.5:0},t.centerLeftCircle={startX:e.startX,startY:e.startY+r,radius:t.horTopLine.endX?7.5:0},t.centerRightCircle={startX:e.endX,startY:e.startY+r,radius:t.horTopLine.endX?7.5:0},t.bottomLeftCircle={startX:e.startX,startY:e.endY,radius:t.horTopLine.endX?7.5:0},t.bottomCenterCircle={startX:e.startX+o,startY:e.endY,radius:t.horTopLine.endX?7.5:0},t.bottomRightCircle={startX:e.endX,startY:e.endY,radius:t.horTopLine.endX?7.5:0},t.activePoint=e,sf.base.isNullOrUndefined(i)&&(this.activeObj=sf.base.extend({},t,{},!0))},t.prototype.drawShapeObj=function(e,t,i){var s,n=void 0!==t?t:this.currObjType.shape;this.currObjType.shape=n,"original"===e.toLowerCase()?s=this.lowerContext:"duplicate"===e.toLowerCase()?s=this.upperContext:sf.base.isNullOrUndefined(i)||(s=i),"rectangle"!==this.currObjType.shape.toLowerCase()&&"ellipse"!==this.currObjType.shape.toLowerCase()&&"line"!==this.currObjType.shape.toLowerCase()&&"arrow"!==this.activeObj.shape||(this.activeObj.shape=this.currObjType.shape),s.strokeStyle=this.activeObj.strokeSettings.strokeColor,s.fillStyle="text"===t||"freehanddraw"===t?this.activeObj.strokeSettings.strokeColor:this.activeObj.strokeSettings.fillColor;var o=this.activeObj.activePoint.width/3,r=this.activeObj.activePoint.height/3,a=this.activeObj.activePoint.endX-this.activeObj.activePoint.startX,l=this.activeObj.activePoint.endY-this.activeObj.activePoint.startY;switch(this.currObjType.shape.toLowerCase()){case"rectangle":this.drawSquareLines(s),s===this.upperContext&&this.drawOuterSelection(s);break;case"ellipse":a=Math.abs(a),l=Math.abs(l),s.beginPath(),s.ellipse(this.activeObj.activePoint.startX+a/2,this.activeObj.activePoint.startY+l/2,a/2,l/2,0,0,2*Math.PI,!1),""!==this.activeObj.strokeSettings.fillColor&&(s.fillStyle=this.activeObj.strokeSettings.fillColor,s.fill()),s.ellipse(this.activeObj.activePoint.startX+a/2,this.activeObj.activePoint.startY+l/2,Math.abs(a/2-this.activeObj.strokeSettings.strokeWidth),Math.abs(l/2-this.activeObj.strokeSettings.strokeWidth),0,0,2*Math.PI,!1),s.fillStyle=this.activeObj.strokeSettings.strokeColor,s.fill("evenodd"),s.closePath(),s===this.upperContext&&this.drawOuterSelection(s);break;case"crop-circle":s===this.lowerContext&&(s=this.upperContext),this.shapeCircle(s,a,l);break;case"line":case"arrow":this.shapeLine(s,a,l),"arrow"===this.currObjType.shape.toLowerCase()&&this.shapeArrow(s),s===this.upperContext&&this.drawOuterSelection(s);break;case"text":this.shapeText(s);break;case"crop-square":case"crop-3:4":case"crop-4:3":case"crop-6:9":case"crop-9:6":case"crop-9:16":case"crop-16:9":s===this.lowerContext&&(s=this.upperContext),this.drawSelection(o,r),this.currObjType.shape="";break;default:this.drawSelection(o,r)}},t.prototype.shapeLine=function(e,t,i){var s,n,o,r,a;0===(a=0===this.activeObj.shapeDegree?this.degree:this.degree-this.activeObj.shapeDegree)||a%180==0?(s=this.activeObj.activePoint.startX,n=this.activeObj.activePoint.startY+i/2,o=this.activeObj.activePoint.endX,r=this.activeObj.activePoint.startY+i/2):(s=this.activeObj.activePoint.startX+t/2,n=this.activeObj.activePoint.startY,o=this.activeObj.activePoint.startX+t/2,r=this.activeObj.activePoint.endY);var l=e.lineWidth;switch(e.lineWidth=this.activeObj.strokeSettings.strokeWidth,e.beginPath(),this.activeObj.lineDraw.toLowerCase()){case"horizontal":case"vertical":e.moveTo(s,n),e.lineTo(o,r);break;case"normal":e.moveTo(this.activeObj.horTopLine.startX,this.activeObj.horTopLine.startY),e.lineTo(this.activeObj.horBottomLine.endX,this.activeObj.horBottomLine.endY)}e.stroke(),e.lineWidth=l},t.prototype.shapeArrow=function(e){var t=e.lineWidth;switch(e.lineWidth=this.activeObj.strokeSettings.strokeWidth,e.beginPath(),e.moveTo(this.activeObj.triangle[0].x,this.activeObj.triangle[0].y),e.lineTo(this.activeObj.triangle[1].x,this.activeObj.triangle[1].y),e.lineTo(this.activeObj.triangle[2].x,this.activeObj.triangle[2].y),e.lineTo(this.activeObj.triangle[0].x,this.activeObj.triangle[0].y),e.fillStyle=e.strokeStyle,e.fill(),this.activeObj.triangleDirection){case"right":e.moveTo(this.activeObj.triangle[0].x,this.activeObj.triangle[0].y-this.activeObj.strokeSettings.strokeWidth),e.lineTo(this.activeObj.triangle[1].x+this.activeObj.strokeSettings.strokeWidth,this.activeObj.triangle[1].y),e.lineTo(this.activeObj.triangle[2].x,this.activeObj.triangle[2].y+this.activeObj.strokeSettings.strokeWidth),e.lineTo(this.activeObj.triangle[0].x,this.activeObj.triangle[0].y-this.activeObj.strokeSettings.strokeWidth);break;case"left":e.moveTo(this.activeObj.triangle[0].x,this.activeObj.triangle[0].y-this.activeObj.strokeSettings.strokeWidth),e.lineTo(this.activeObj.triangle[1].x-this.activeObj.strokeSettings.strokeWidth,this.activeObj.triangle[1].y),e.lineTo(this.activeObj.triangle[2].x,this.activeObj.triangle[2].y+this.activeObj.strokeSettings.strokeWidth),e.lineTo(this.activeObj.triangle[0].x,this.activeObj.triangle[0].y-this.activeObj.strokeSettings.strokeWidth);break;case"top":e.moveTo(this.activeObj.triangle[0].x-this.activeObj.strokeSettings.strokeWidth,this.activeObj.triangle[0].y),e.lineTo(this.activeObj.triangle[1].x,this.activeObj.triangle[1].y-this.activeObj.strokeSettings.strokeWidth),e.lineTo(this.activeObj.triangle[2].x+this.activeObj.strokeSettings.strokeWidth,this.activeObj.triangle[2].y),e.lineTo(this.activeObj.triangle[0].x-this.activeObj.strokeSettings.strokeWidth,this.activeObj.triangle[0].y);break;case"bottom":e.moveTo(this.activeObj.triangle[0].x+this.activeObj.strokeSettings.strokeWidth,this.activeObj.triangle[0].y),e.lineTo(this.activeObj.triangle[1].x,this.activeObj.triangle[1].y+this.activeObj.strokeSettings.strokeWidth),e.lineTo(this.activeObj.triangle[2].x-this.activeObj.strokeSettings.strokeWidth,this.activeObj.triangle[2].y),e.lineTo(this.activeObj.triangle[0].x+this.activeObj.strokeSettings.strokeWidth,this.activeObj.triangle[0].y)}e.fillStyle=e.strokeStyle,e.fill("evenodd"),e.closePath(),e.lineWidth=t},t.prototype.shapeText=function(e){for(var t=this.activeObj.keyHistory.split("\n"),i=((this.activeObj.textSettings.fontSize+.25*this.activeObj.textSettings.fontSize)*t.length-this.activeObj.textSettings.fontSize*t.length)/t.length,s=0;s<t.length;s++){var n=t[s],o=(s+1)*this.activeObj.textSettings.fontSize*.85+s*i;-360===this.degree&&(this.degree=0),0===this.degree||180===this.degree?this.activeObj.textSettings.fontSize>this.activeObj.activePoint.height&&(this.activeObj.textSettings.fontSize=this.activeObj.activePoint.height-.1*this.activeObj.activePoint.height):this.activeObj.textSettings.fontSize>this.activeObj.activePoint.width&&(this.activeObj.textSettings.fontSize=this.activeObj.activePoint.width-.1*this.activeObj.activePoint.width),e.strokeStyle=this.activeObj.strokeSettings.strokeColor,e.fillStyle=this.activeObj.strokeSettings.strokeColor;var r="";this.activeObj.textSettings.bold&&(r="bold "),this.activeObj.textSettings.italic&&(r="italic "),this.activeObj.textSettings.bold&&this.activeObj.textSettings.italic&&(r="italic bold "),e.font=r+this.activeObj.textSettings.fontSize+"px "+this.activeObj.textSettings.fontFamily,4===this.activeObj.flipObjColl.length&&(this.activeObj.flipObjColl=[]);for(var a=0;a<this.activeObj.flipObjColl.length;a++)"horizontal"===this.activeObj.flipObjColl[a].toLowerCase()?(e.translate(e.canvas.width,0),e.scale(-1,1),this.updateActPoint("horizontal",e)):"vertical"===this.activeObj.flipObjColl[a].toLowerCase()&&(e.translate(0,e.canvas.height),e.scale(1,-1),this.updateActPoint("vertical",e));this.activeObj.shapeDegree!==this.degree?this.rotateText(e):e.fillText(n,this.activeObj.activePoint.startX+.1*this.activeObj.textSettings.fontSize,this.activeObj.activePoint.startY+o);for(var l=0;l<this.activeObj.flipObjColl.length;l++)"horizontal"===this.activeObj.flipObjColl[l].toLowerCase()?(e.translate(e.canvas.width,0),e.scale(-1,1),this.updateActPoint("horizontal",e)):"vertical"===this.activeObj.flipObjColl[l].toLowerCase()&&(e.translate(0,e.canvas.height),e.scale(1,-1),this.updateActPoint("vertical",e))}this.currObjType.isText=!1},t.prototype.updateActPoint=function(e,t){"horizontal"===e.toLowerCase()?this.activeObj.activePoint.startX<=t.canvas.width/2?(this.activeObj.activePoint.startX=t.canvas.width/2+(t.canvas.width/2-this.activeObj.activePoint.endX),this.activeObj.activePoint.endX=this.activeObj.activePoint.startX+this.activeObj.activePoint.width,this.updateActiveObject(this.activeObj.activePoint,this.activeObj)):this.activeObj.activePoint.startX>=t.canvas.width/2&&(this.activeObj.activePoint.startX=t.canvas.width-this.activeObj.activePoint.endX,this.activeObj.activePoint.endX=this.activeObj.activePoint.startX+this.activeObj.activePoint.width,this.updateActiveObject(this.activeObj.activePoint,this.activeObj)):"vertical"===e.toLowerCase()&&(this.activeObj.activePoint.startY<=t.canvas.height/2?(this.activeObj.activePoint.startY=t.canvas.height/2+(t.canvas.height/2-this.activeObj.activePoint.endY),this.activeObj.activePoint.endY=this.activeObj.activePoint.startY+this.activeObj.activePoint.height,this.updateActiveObject(this.activeObj.activePoint,this.activeObj)):this.activeObj.activePoint.startY>=t.canvas.height/2&&(this.activeObj.activePoint.startY=t.canvas.height-this.activeObj.activePoint.endY,this.activeObj.activePoint.endY=this.activeObj.activePoint.startY+this.activeObj.activePoint.height,this.updateActiveObject(this.activeObj.activePoint,this.activeObj)))},t.prototype.drawSquareLines=function(e){var t;void 0!==this.activeObj.shape&&(t=this.activeObj.shape.split("-")),"crop"===t[0]?e.strokeStyle="#fff":e.strokeStyle=this.activeObj.strokeSettings.strokeColor,e.beginPath(),e.rect(this.activeObj.activePoint.startX,this.activeObj.activePoint.startY,this.activeObj.activePoint.width,this.activeObj.activePoint.height),""!==this.activeObj.strokeSettings.fillColor&&(e.fillStyle=this.activeObj.strokeSettings.fillColor,e.fill()),e.rect(this.activeObj.activePoint.startX+this.activeObj.strokeSettings.strokeWidth,this.activeObj.activePoint.startY+this.activeObj.strokeSettings.strokeWidth,this.activeObj.activePoint.width-2*this.activeObj.strokeSettings.strokeWidth,this.activeObj.activePoint.height-2*this.activeObj.strokeSettings.strokeWidth),e.fillStyle=this.activeObj.strokeSettings.strokeColor,e.fill("evenodd"),e.closePath()},t.prototype.drawSelection=function(e,t){this.upperContext.strokeStyle=this.themeColl[this.theme].primaryColor,this.upperContext.beginPath(),this.activeObj.horTopInnerLine={startX:this.activeObj.activePoint.startX,startY:this.activeObj.activePoint.startY+t,endX:this.activeObj.activePoint.endX,endY:this.activeObj.activePoint.endY+t},this.activeObj.horBottomInnerLine={startX:this.activeObj.activePoint.startX,startY:this.activeObj.activePoint.startY+2*t,endX:this.activeObj.activePoint.endX,endY:this.activeObj.activePoint.endY+2*t},this.activeObj.verLeftInnerLine={startX:this.activeObj.activePoint.startX+e,startY:this.activeObj.activePoint.startY,endX:this.activeObj.activePoint.startX+e,endY:this.activeObj.activePoint.endY},this.activeObj.verRightInnerLine={startX:this.activeObj.activePoint.startX+2*e,startY:this.activeObj.activePoint.startY,endX:this.activeObj.activePoint.startX+2*e,endY:this.activeObj.activePoint.endY},this.upperContext.moveTo(this.activeObj.horTopInnerLine.startX,this.activeObj.horTopInnerLine.startY),this.upperContext.lineTo(this.activeObj.horTopInnerLine.endX,this.activeObj.horTopInnerLine.startY),this.upperContext.moveTo(this.activeObj.horBottomInnerLine.startX,this.activeObj.horBottomInnerLine.startY),this.upperContext.lineTo(this.activeObj.horBottomInnerLine.endX,this.activeObj.horBottomInnerLine.startY),this.upperContext.moveTo(this.activeObj.verLeftInnerLine.startX,this.activeObj.verLeftInnerLine.startY),this.upperContext.lineTo(this.activeObj.verLeftInnerLine.endX,this.activeObj.verLeftInnerLine.endY),this.upperContext.moveTo(this.activeObj.verRightInnerLine.startX,this.activeObj.verRightInnerLine.startY),this.upperContext.lineTo(this.activeObj.verRightInnerLine.endX,this.activeObj.verRightInnerLine.endY),this.upperContext.stroke(),this.upperContext.closePath()},t.prototype.drawCenterCircles=function(e,t){e.lineWidth*=2,e.beginPath(),"arrow"===this.activeObj.shape||"line"===this.activeObj.shape?t%90==0&&t%180!=0?(e.moveTo(this.activeObj.topCenterCircle.startX,this.activeObj.topCenterCircle.startY),e.arc(this.activeObj.topCenterCircle.startX,this.activeObj.topCenterCircle.startY,this.activeObj.topCenterCircle.radius,0,2*Math.PI),e.moveTo(this.activeObj.bottomCenterCircle.startX,this.activeObj.bottomCenterCircle.startY),e.arc(this.activeObj.bottomCenterCircle.startX,this.activeObj.bottomCenterCircle.startY,this.activeObj.bottomCenterCircle.radius,0,2*Math.PI)):(e.moveTo(this.activeObj.centerLeftCircle.startX,this.activeObj.centerLeftCircle.startY),e.arc(this.activeObj.centerLeftCircle.startX,this.activeObj.centerLeftCircle.startY,this.activeObj.centerLeftCircle.radius,0,2*Math.PI),e.moveTo(this.activeObj.centerRightCircle.startX,this.activeObj.centerRightCircle.startY),e.arc(this.activeObj.centerRightCircle.startX,this.activeObj.centerRightCircle.startY,this.activeObj.centerRightCircle.radius,0,2*Math.PI)):(e.moveTo(this.activeObj.topCenterCircle.startX,this.activeObj.topCenterCircle.startY),e.arc(this.activeObj.topCenterCircle.startX,this.activeObj.topCenterCircle.startY,this.activeObj.topCenterCircle.radius,0,2*Math.PI),e.moveTo(this.activeObj.centerLeftCircle.startX,this.activeObj.centerLeftCircle.startY),e.arc(this.activeObj.centerLeftCircle.startX,this.activeObj.centerLeftCircle.startY,this.activeObj.centerLeftCircle.radius,0,2*Math.PI),e.moveTo(this.activeObj.centerRightCircle.startX,this.activeObj.centerRightCircle.startY),e.arc(this.activeObj.centerRightCircle.startX,this.activeObj.centerRightCircle.startY,this.activeObj.centerRightCircle.radius,0,2*Math.PI),e.moveTo(this.activeObj.bottomCenterCircle.startX,this.activeObj.bottomCenterCircle.startY),e.arc(this.activeObj.bottomCenterCircle.startX,this.activeObj.bottomCenterCircle.startY,this.activeObj.bottomCenterCircle.radius,0,2*Math.PI)),e.stroke(),e.fill(),e.closePath(),e.lineWidth/=2},t.prototype.findTarget=function(e,t,i){if("mousedown"===i.toLowerCase()||"touchstart"===i.toLowerCase()){var s=!1;this.activeObj.shape&&"crop"===this.activeObj.shape.split("-")[0]&&(s=!0),this.findTargetObj(e,t,s),this.updateCursorStyles(e,t,i)}else switch(this.dragElement.toLowerCase()){case"nw-resize":this.activeObj.topLeftCircle.startX=e,this.activeObj.topLeftCircle.startY=t;break;case"n-resize":this.activeObj.topCenterCircle.startX=e,this.activeObj.topCenterCircle.startY=t;break;case"ne-resize":this.activeObj.topRightCircle.startX=e,this.activeObj.topRightCircle.startY=t;break;case"w-resize":this.activeObj.centerLeftCircle.startX=e,this.activeObj.centerLeftCircle.startY=t;break;case"e-resize":this.activeObj.centerRightCircle.startX=e,this.activeObj.centerRightCircle.startY=t;break;case"sw-resize":this.activeObj.bottomLeftCircle.startX=e,this.activeObj.bottomLeftCircle.startY=t;break;case"s-resize":this.activeObj.bottomCenterCircle.startX=e,this.activeObj.bottomCenterCircle.startY=t;break;case"se-resize":this.activeObj.bottomRightCircle.startX=e,this.activeObj.bottomRightCircle.startY=t;break;default:this.dragPoint.startX&&this.dragPoint.startY&&(this.previousPoint.x=this.dragPoint.endX,this.previousPoint.y=this.dragPoint.endY,this.dragPoint.endX=e,this.dragPoint.endY=t)}},t.prototype.findTargetObj=function(e,t,i){var s,n=this;if(0!==this.objColl.length&&!this.currObjType.isCustomCrop&&!i){for(var o=0,r=void 0,a=0;a<this.objColl.length;a++){var l=sf.base.extend({},this.objColl[a],{},!0);e>=l.activePoint.startX-2*l.topLeftCircle.radius&&e<=l.activePoint.endX+2*l.topLeftCircle.radius&&t>=l.activePoint.startY-2*l.topLeftCircle.radius&&t<=l.activePoint.endY+2*l.topLeftCircle.radius&&(this.isTouch||"move"===this.upperCanvas.style.cursor||"grab"===this.upperCanvas.style.cursor||this.isShapeInserted?(0===o||o>e-l.activePoint.startX)&&(o=e-this.objColl[a].activePoint.startX,r=a):this.objColl[a].currIndex===this.tempActiveObj.currIndex&&(r=a))}if(sf.base.isNullOrUndefined(r))this.refreshActiveObj(),s=!1;else{this.tempObjColl=sf.base.extend([],this.objColl,[],!0),this.currObjType.isCustomCrop=!1,this.activeObj=sf.base.extend({},this.objColl[r],{},!0);var h=sf.base.extend({},this.objColl[r],{},!0);if(this.objColl.splice(r,1),0===this.degree){this.lowerContext.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),this.updateBrightnessFilter(),this.lowerContext.drawImage(this.baseImg,this.srcLeft,this.srcTop,this.srcWidth,this.srcHeight,this.destLeft,this.destTop,this.destWidth,this.destHeight);var d=this.lowerContext.filter;this.lowerContext.filter="none",this.iterateObjColl(),this.activeObj=sf.base.extend({},d,{},!0),this.freehandRedraw(this.lowerContext),this.lowerContext.filter=d,this.getCurrentFlipState()}else this.callUpdateCurrentTransformedState(),this.freehandRedraw(this.lowerContext);this.clearOuterCanvas(this.lowerContext),(!sf.base.isNullOrUndefined(this.currSelectionPoint)&&"crop-circle"===this.currSelectionPoint.shape||this.isCircleCrop)&&this.cropCircle(this.lowerContext),this.setActivePoint(),this.activeObj=sf.base.extend({},h,{},!0),this.tempStrokeSettings=sf.base.extend({},this.activeObj.strokeSettings,{},!0),this.tempTextSettings=sf.base.extend({},this.activeObj.textSettings,{},!0);var c=this.updatePreviousShapeSettings(),p={action:"select",previousShapeSettings:c,currentShapeSettings:c};this.dotnetRef.invokeMethodAsync("ShapeEventAsync","OnShape",p).then((function(){n.updateShapeChangeEventArgs(p.currentShapeSettings),n.activeObj.activePoint&&(n.drawObject("duplicate",n.activeObj,null,null,!0),(n.activeObj.activePoint.startX<n.destLeft||n.activeObj.activePoint.endX>n.destLeft+n.destWidth||n.activeObj.activePoint.startY<n.destTop||n.activeObj.activePoint.endY>n.destTop+n.destHeight)&&(n.isPreventDragging=!0))})),s=!0}}return s},t.prototype.getCurrentFlipState=function(){if(0!==this.rotateFlipColl.length){var e=sf.base.extend({},this.totalPannedInternalPoint,{},!0);this.callUpdateCurrentTransformedState(),this.totalPannedInternalPoint=e}else this.callUpdateCurrentTransformedState()},t.prototype.rotateDegree=function(e){this.lowerContext.save(),this.lowerContext.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),this.lowerContext.translate(this.lowerCanvas.width/2,this.lowerCanvas.height/2),this.lowerContext.rotate(Math.PI/180*e),this.lowerContext.translate(-this.lowerCanvas.width/2,-this.lowerCanvas.height/2);var t=this.lowerContext.filter;this.updateBrightnessFilter(),this.lowerContext.drawImage(this.baseImg,this.srcLeft,this.srcTop,this.srcWidth,this.srcHeight,this.destLeft,this.destTop,this.destWidth,this.destHeight),this.lowerContext.filter=t,this.lowerContext.translate(this.lowerCanvas.width/2,this.lowerCanvas.height/2),this.lowerContext.rotate(Math.PI/180*-e),this.lowerContext.translate(-this.lowerCanvas.width/2,-this.lowerCanvas.height/2),this.lowerContext.restore()},t.prototype.updateCursorStyles=function(e,t,i){var s=!1;""===this.activeObj.keyHistory||void 0!==this.activeObj.shape||this.currObjType.isCustomCrop||this.currObjType.isLine||!this.currObjType.isText||(this.activeObj.shape="text");var n,o=sf.base.extend({},this.activeObj,{},!0);sf.base.isNullOrUndefined(o.topLeftCircle)||((n=0===o.shapeDegree?this.degree:this.degree-o.shapeDegree)<0&&(n=360+n),e>=o.topLeftCircle.startX-2*o.topLeftCircle.radius&&e<=o.topLeftCircle.startX+2*o.topLeftCircle.radius&&t>=o.topLeftCircle.startY-2*o.topLeftCircle.radius&&t<=o.topLeftCircle.startY+2*o.topLeftCircle.radius&&"nw-resize"!==this.dragElement?(o.topLeftCircle.startX=o.topLeftCircle.startY=0,this.upperCanvas.style.cursor="nw-resize",s=!0,this.dragElement=this.upperCanvas.style.cursor):e>=o.topCenterCircle.startX-2*o.topLeftCircle.radius&&e<=o.topCenterCircle.startX+2*o.topLeftCircle.radius&&t>=o.topCenterCircle.startY-2*o.topLeftCircle.radius&&t<=o.topCenterCircle.startY+2*o.topLeftCircle.radius&&"n-resize"!==this.dragElement?(o.topCenterCircle.startX=o.topCenterCircle.startY=0,this.upperCanvas.style.cursor="n-resize",s=!0,this.dragElement=this.upperCanvas.style.cursor):e>=o.topRightCircle.startX-2*o.topLeftCircle.radius&&e<=o.topRightCircle.startX+2*o.topLeftCircle.radius&&t>=o.topRightCircle.startY-2*o.topLeftCircle.radius&&t<=o.topRightCircle.startY+2*o.topLeftCircle.radius&&"ne-resize"!==this.dragElement?(o.topRightCircle.startX=o.topRightCircle.startY=0,this.upperCanvas.style.cursor="ne-resize",s=!0,this.dragElement=this.upperCanvas.style.cursor):e>=o.centerLeftCircle.startX-2*o.topLeftCircle.radius&&e<=o.centerLeftCircle.startX+2*o.topLeftCircle.radius&&t>=o.centerLeftCircle.startY-2*o.topLeftCircle.radius&&t<=o.centerLeftCircle.startY+2*o.topLeftCircle.radius&&"w-resize"!==this.dragElement?(o.centerLeftCircle.startX=o.centerLeftCircle.startY=0,this.upperCanvas.style.cursor="w-resize",s=!0,this.dragElement=this.upperCanvas.style.cursor):e>=o.centerRightCircle.startX-2*o.topLeftCircle.radius&&e<=o.centerRightCircle.startX+2*o.topLeftCircle.radius&&t>=o.centerRightCircle.startY-2*o.topLeftCircle.radius&&t<=o.centerRightCircle.startY+2*o.topLeftCircle.radius&&"e-resize"!==this.dragElement?(o.centerRightCircle.startX=o.centerRightCircle.startY=0,this.upperCanvas.style.cursor="e-resize",s=!0,this.dragElement=this.upperCanvas.style.cursor):e>=o.bottomLeftCircle.startX-2*o.topLeftCircle.radius&&e<=o.bottomLeftCircle.startX+2*o.topLeftCircle.radius&&t>=o.bottomLeftCircle.startY-2*o.topLeftCircle.radius&&t<=o.bottomLeftCircle.startY+2*o.topLeftCircle.radius&&"sw-resize"!==this.dragElement?(o.bottomLeftCircle.startX=o.bottomLeftCircle.startY=0,this.upperCanvas.style.cursor="sw-resize",s=!0,this.dragElement=this.upperCanvas.style.cursor):e>=o.bottomCenterCircle.startX-2*o.topLeftCircle.radius&&e<=o.bottomCenterCircle.startX+2*o.topLeftCircle.radius&&t>=o.bottomCenterCircle.startY-2*o.topLeftCircle.radius&&t<=o.bottomCenterCircle.startY+2*o.topLeftCircle.radius&&"s-resize"!==this.dragElement?(o.bottomCenterCircle.startX=o.bottomCenterCircle.startY=0,this.upperCanvas.style.cursor="s-resize",s=!0,this.dragElement=this.upperCanvas.style.cursor):e>=o.bottomRightCircle.startX-2*o.topLeftCircle.radius&&e<=o.bottomRightCircle.startX+2*o.topLeftCircle.radius&&t>=o.bottomRightCircle.startY-2*o.topLeftCircle.radius&&t<=o.bottomRightCircle.startY+2*o.topLeftCircle.radius&&"se-resize"!==this.dragElement?(o.bottomRightCircle.startX=o.bottomRightCircle.startY=0,this.upperCanvas.style.cursor="se-resize",s=!0,this.dragElement=this.upperCanvas.style.cursor):(this.dragPoint.startX=this.previousPoint.x=this.dragPoint.endX=e,this.dragPoint.startY=this.previousPoint.y=this.dragPoint.endY=t),"arrow"!==o.shape&&"line"!==o.shape||(n%90==0&&n%180!=0?"sw-resize"===this.upperCanvas.style.cursor||"se-resize"===this.upperCanvas.style.cursor?e>=o.bottomCenterCircle.startX-2*o.topLeftCircle.radius&&e<=o.bottomCenterCircle.startX+2*o.topLeftCircle.radius&&t>=o.bottomCenterCircle.startY-2*o.topLeftCircle.radius&&t<=o.bottomCenterCircle.startY+2*o.topLeftCircle.radius&&"s-resize"!==this.dragElement&&(o.bottomCenterCircle.startX=o.bottomCenterCircle.startY=0,this.upperCanvas.style.cursor="s-resize",s=!0,this.dragElement=this.upperCanvas.style.cursor):"nw-resize"!==this.upperCanvas.style.cursor&&"ne-resize"!==this.upperCanvas.style.cursor||e>=o.topCenterCircle.startX-2*o.topLeftCircle.radius&&e<=o.topCenterCircle.startX+2*o.topLeftCircle.radius&&t>=o.topCenterCircle.startY-2*o.topLeftCircle.radius&&t<=o.topCenterCircle.startY+2*o.topLeftCircle.radius&&"n-resize"!==this.dragElement&&(o.topCenterCircle.startX=o.topCenterCircle.startY=0,this.upperCanvas.style.cursor="n-resize",s=!0,this.dragElement=this.upperCanvas.style.cursor):"nw-resize"===this.upperCanvas.style.cursor||"sw-resize"===this.upperCanvas.style.cursor?e>=o.centerLeftCircle.startX-2*o.topLeftCircle.radius&&e<=o.centerLeftCircle.startX+2*o.topLeftCircle.radius&&t>=o.centerLeftCircle.startY-2*o.topLeftCircle.radius&&t<=o.centerLeftCircle.startY+2*o.topLeftCircle.radius&&"w-resize"!==this.dragElement&&(o.centerLeftCircle.startX=o.centerLeftCircle.startY=0,this.upperCanvas.style.cursor="w-resize",s=!0,this.dragElement=this.upperCanvas.style.cursor):"ne-resize"!==this.upperCanvas.style.cursor&&"se-resize"!==this.upperCanvas.style.cursor||e>=o.centerRightCircle.startX-2*o.topLeftCircle.radius&&e<=o.centerRightCircle.startX+2*o.topLeftCircle.radius&&t>=o.centerRightCircle.startY-2*o.topLeftCircle.radius&&t<=o.centerRightCircle.startY+2*o.topLeftCircle.radius&&"e-resize"!==this.dragElement&&(o.centerRightCircle.startX=o.centerRightCircle.startY=0,this.upperCanvas.style.cursor="e-resize",s=!0,this.dragElement=this.upperCanvas.style.cursor),"nw-resize"!==this.upperCanvas.style.cursor&&"ne-resize"!==this.upperCanvas.style.cursor&&"sw-resize"!==this.upperCanvas.style.cursor&&"se-resize"!==this.upperCanvas.style.cursor||(this.updateCursorStylesForArrow(e,t),s=!1),n%90==0&&n%180!=0?"w-resize"!==this.upperCanvas.style.cursor&&"e-resize"!==this.upperCanvas.style.cursor||(this.updateCursorStylesForArrow(e,t),s=!1):"n-resize"!==this.upperCanvas.style.cursor&&"s-resize"!==this.upperCanvas.style.cursor||(this.updateCursorStylesForArrow(e,t),s=!1)),this.previousPoint.x=this.previousPoint.y=this.diffPoint.x=this.diffPoint.y=0,"touchstart"===i?(s||e>=o.activePoint.startX&&e<=o.activePoint.endX&&t>=o.activePoint.startY&&t<=o.activePoint.endY)&&(this.currObjType.isDragging=!0):this.currObjType.isDragging=!0)},t.prototype.updateCursorStylesForArrow=function(e,t){this.upperCanvas.style.cursor="move",this.dragElement="",this.dragPoint.startX=this.previousPoint.x=this.dragPoint.endX=e,this.dragPoint.startY=this.previousPoint.y=this.dragPoint.endY=t},t.prototype.drawCropRatio=function(){var e,t,i,s;switch(this.zoomFactor>0&&!sf.base.isNullOrUndefined(this.currentSelectionPoint)?(this.destLeft+this.destLeft+this.destWidth<=this.lowerCanvas.clientWidth?(i=this.destWidth,this.destLeft<0&&(i+=2*this.destLeft)):i=this.lowerCanvas.clientWidth,this.destTop+this.destTop+this.destHeight<=this.lowerCanvas.clientHeight?(s=this.destHeight,this.destTop<0&&(s+=2*this.destTop)):s=this.lowerCanvas.clientHeight,0!==this.degree&&(this.isAllowCropPan=!0)):(i=this.destWidth,s=this.destHeight,this.destLeft<0&&(i+=this.destLeft),this.destTop<0&&(s+=this.destTop),"crop-square"!==this.currObjType.shape.toLowerCase()&&"crop-circle"!==this.currObjType.shape.toLowerCase()&&(this.destLeft+this.destWidth>this.lowerCanvas.width&&(i-=this.destLeft+this.destWidth-this.lowerCanvas.width),this.destTop+this.destHeight>this.lowerCanvas.height&&(s-=this.destTop+this.destHeight-this.lowerCanvas.height))),this.currObjType.shape.toLowerCase()){case"crop-square":case"crop-circle":this.setDragDirection(i,s),i===this.destWidth&&s===this.destHeight&&(this.activeObj.activePoint.startX+=this.destLeft,this.activeObj.activePoint.startY+=this.destTop,this.activeObj.activePoint.endX+=this.destLeft,this.activeObj.activePoint.endY+=this.destTop),this.lowerCanvas.width>this.lowerCanvas.height?(this.activeObj.activePoint.height=this.activeObj.activePoint.endY-this.activeObj.activePoint.startY,this.activeObj.activePoint.width=this.activeObj.activePoint.height,this.activeObj.activePoint.endX=this.activeObj.activePoint.startX+this.activeObj.activePoint.width):(this.activeObj.activePoint.width=this.activeObj.activePoint.endX-this.activeObj.activePoint.startX,this.activeObj.activePoint.height=this.activeObj.activePoint.width,this.activeObj.activePoint.endY=this.activeObj.activePoint.startY+this.activeObj.activePoint.height);break;case"crop-3:2":e=3,t=2;break;case"crop-4:3":e=4,t=3;break;case"crop-5:4":e=5,t=4;break;case"crop-7:5":e=7,t=5;break;case"crop-16:9":e=16,t=9}if(void 0!==e&&void 0!==t&&(this.calcShapeRatio(e,t,i,s),i===this.destWidth&&s===this.destHeight&&this.updatePoints()),!sf.base.isNullOrUndefined(this.currentSelectionPoint)){if(this.activeObj.activePoint.startX<this.currentSelectionPoint.activePoint.startX){var n=this.currentSelectionPoint.activePoint.startX-this.activeObj.activePoint.startX;this.activeObj.activePoint.startX+=n,this.activeObj.activePoint.endX+=n}if(this.activeObj.activePoint.startY<this.currentSelectionPoint.activePoint.startY){n=this.currentSelectionPoint.activePoint.startY-this.activeObj.activePoint.startY;this.activeObj.activePoint.startY+=n,this.activeObj.activePoint.endY+=n}if(this.activeObj.activePoint.endX>this.currentSelectionPoint.activePoint.endX){n=this.activeObj.activePoint.endX-this.currentSelectionPoint.activePoint.endX;this.activeObj.activePoint.startX-=n,this.activeObj.activePoint.endX-=n}if(this.activeObj.activePoint.endY>this.currentSelectionPoint.activePoint.endY){n=this.activeObj.activePoint.endY-this.currentSelectionPoint.activePoint.endY;this.activeObj.activePoint.startY-=n,this.activeObj.activePoint.endY-=n}this.activeObj.activePoint.startX=(this.lowerCanvas.clientWidth-this.activeObj.activePoint.width)/2,this.activeObj.activePoint.startY=(this.lowerCanvas.clientHeight-this.activeObj.activePoint.height)/2,this.activeObj.activePoint.endX=this.activeObj.activePoint.startX+this.activeObj.activePoint.width,this.activeObj.activePoint.endY=this.activeObj.activePoint.startY+this.activeObj.activePoint.height}if(0===this.zoomFactor){if(this.activeObj.activePoint.startX<this.destLeft){n=this.destLeft-this.activeObj.activePoint.startX+7.5;this.activeObj.activePoint.startX+=n,this.activeObj.activePoint.endX+=n}if(this.activeObj.activePoint.startY<this.destTop){n=this.destTop-this.activeObj.activePoint.startY+7.5;this.activeObj.activePoint.startY+=n,this.activeObj.activePoint.endY+=n}this.activeObj.activePoint.width=this.activeObj.activePoint.endX-this.activeObj.activePoint.startX,this.activeObj.activePoint.height=this.activeObj.activePoint.endY-this.activeObj.activePoint.startY}},t.prototype.setDragDirection=function(e,t){this.destWidth>this.destHeight?(this.activeObj.activePoint.startX=this.dragPoint.startX=e/2-t/2+7.5,this.activeObj.activePoint.startY=this.dragPoint.startY=t/2-t/2+7.5,this.activeObj.activePoint.endX=e/2+t/2-7.5,this.activeObj.activePoint.endY=t/2+t/2-7.5):(this.activeObj.activePoint.startY=this.dragPoint.startX=t/2-e/2+7.5,this.activeObj.activePoint.endY=t/2+e/2-7.5,this.activeObj.activePoint.startX=this.dragPoint.startX=7.5,this.activeObj.activePoint.endX=e-7.5)},t.prototype.updatePoints=function(){this.activeObj.activePoint.startX+=this.destLeft,this.activeObj.activePoint.startY+=this.destTop,this.activeObj.activePoint.endX+=this.destLeft,this.activeObj.activePoint.endY+=this.destTop,this.activeObj.activePoint.width=this.activeObj.activePoint.endX-this.activeObj.activePoint.startX,this.activeObj.activePoint.height=this.activeObj.activePoint.endY-this.activeObj.activePoint.startY},t.prototype.calcShapeRatio=function(e,t,i,s){for(var n=i,o=s,r=n>=o?n:o,a=r*(e/t),l=r,h=this.getScale(a,n),d=[],c=0;c<2;c++)0===c?d.push(a*h):d.push(l*h);a=d[0],l=d[1];var p=this.getScale(l,o),u=[];for(c=0;c<2;c++)0===c?u.push(a*p):u.push(l*p);a=u[0],l=u[1],this.activeObj.activePoint.width=a,this.activeObj.activePoint.height=l,this.activeObj.activePoint.startX=7.5+(this.dragPoint.startX=(n-a)/2),this.activeObj.activePoint.startY=7.5+(this.dragPoint.startY=(o-l)/2),this.activeObj.activePoint.endX=(n-a)/2+a-7.5,this.activeObj.activePoint.endY=(o-l)/2+l-7.5,this.activeObj.activePoint.startX<this.destLeft&&this.destLeft+this.destWidth>this.lowerCanvas.clientWidth&&(this.activeObj.activePoint.startX=this.destLeft,this.activeObj.activePoint.endX=this.activeObj.activePoint.startX+a),this.activeObj.activePoint.startY<this.destTop&&this.destTop+this.destHeight>this.lowerCanvas.clientHeight&&(this.activeObj.activePoint.startY=this.destTop,this.activeObj.activePoint.endY=this.activeObj.activePoint.startY+l),this.activeObj.activePoint.width=this.activeObj.activePoint.endX-this.activeObj.activePoint.startX,this.activeObj.activePoint.height=this.activeObj.activePoint.endY-this.activeObj.activePoint.startY},t.prototype.getScale=function(e,t){return e>t?t/e:1},t.prototype.calcMaxDimension=function(e,t){var i=this.element.clientWidth,s=this.element.clientHeight-this.toolbarHeight;s=sf.base.Browser.isDevice?s-this.toolbarHeight:s;var n=(i-=30)/e,o=(s-=30)/t,r=Math.min(e,i),a=Math.min(t,s);return n<1&&n<o?(r=e*n,a=t*n):o<1&&o<n&&(r=e*o,a=t*o),{width:r,height:a}},t.prototype.setMaximumDimension=function(e,t){var i,s;e%90==0&&e%180!=0?(i=this.baseImg.height,s=this.baseImg.width):e%180!=0&&0!==e||(i=this.baseImg.width,s=this.baseImg.height),t.width=i,t.height=s;var n=this.calcMaxDimension(i,s);t.style.maxWidth=n.width+"px",t.style.maxHeight=n.height+"px"},t.prototype.setCursor=function(e,t){var i,s=!1;if(void 0!==this.activeObj.horTopLine){void 0!==this.activeObj.shape&&(i=this.activeObj.shape.split("-")),(void 0===i&&this.currObjType.isCustomCrop||void 0!==i&&"crop"===i[0])&&(s=!0),!s&&this.togglePan&&(this.lowerCanvas.style.cursor=this.upperCanvas.style.cursor="grab");var n=this.upperCanvas.style.cursor,o=sf.base.extend({},this.activeObj,{},!0),r=void 0;(r=0===o.shapeDegree?this.degree:this.degree-o.shapeDegree)<0&&(r=360+r),e>=o.topLeftCircle.startX-2*o.topLeftCircle.radius&&e<=o.topLeftCircle.startX+2*o.topLeftCircle.radius&&t>=o.topLeftCircle.startY-2*o.topLeftCircle.radius&&t<=o.topLeftCircle.startY+2*o.topLeftCircle.radius?this.upperCanvas.style.cursor="nw-resize":e>=o.topCenterCircle.startX-2*o.topLeftCircle.radius&&e<=o.topCenterCircle.startX+2*o.topLeftCircle.radius&&t>=o.topCenterCircle.startY-2*o.topLeftCircle.radius&&t<=o.topCenterCircle.startY+2*o.topLeftCircle.radius?this.upperCanvas.style.cursor="n-resize":e>=o.topRightCircle.startX-2*o.topLeftCircle.radius&&e<=o.topRightCircle.startX+2*o.topLeftCircle.radius&&t>=o.topRightCircle.startY-2*o.topLeftCircle.radius&&t<=o.topRightCircle.startY+2*o.topLeftCircle.radius?this.upperCanvas.style.cursor="ne-resize":e>=o.centerLeftCircle.startX-2*o.topLeftCircle.radius&&e<=o.centerLeftCircle.startX+2*o.topLeftCircle.radius&&t>=o.centerLeftCircle.startY-2*o.topLeftCircle.radius&&t<=o.centerLeftCircle.startY+2*o.topLeftCircle.radius?this.upperCanvas.style.cursor="w-resize":e>=o.centerRightCircle.startX-2*o.topLeftCircle.radius&&e<=o.centerRightCircle.startX+2*o.topLeftCircle.radius&&t>=o.centerRightCircle.startY-2*o.topLeftCircle.radius&&t<=o.centerRightCircle.startY+2*o.topLeftCircle.radius?this.upperCanvas.style.cursor="e-resize":e>=o.bottomLeftCircle.startX-2*o.topLeftCircle.radius&&e<=o.bottomLeftCircle.startX+2*o.topLeftCircle.radius&&t>=o.bottomLeftCircle.startY-2*o.topLeftCircle.radius&&t<=o.bottomLeftCircle.startY+2*o.topLeftCircle.radius?this.upperCanvas.style.cursor="sw-resize":e>=o.bottomCenterCircle.startX-2*o.topLeftCircle.radius&&e<=o.bottomCenterCircle.startX+2*o.topLeftCircle.radius&&t>=o.bottomCenterCircle.startY-2*o.topLeftCircle.radius&&t<=o.bottomCenterCircle.startY+2*o.topLeftCircle.radius?this.upperCanvas.style.cursor="s-resize":e>=o.bottomRightCircle.startX-2*o.topLeftCircle.radius&&e<=o.bottomRightCircle.startX+2*o.topLeftCircle.radius&&t>=o.bottomRightCircle.startY-2*o.topLeftCircle.radius&&t<=o.bottomRightCircle.startY+2*o.topLeftCircle.radius?this.upperCanvas.style.cursor="se-resize":e>=o.activePoint.startX&&e<=o.activePoint.endX&&t>=o.activePoint.startY&&t<=o.activePoint.endY?this.upperCanvas.style.cursor=s?"grab":"move":(this.currObjType.isCustomCrop&&(this.upperCanvas.style.cursor="crosshair"),this.upperCanvas.style.cursor="default"),"arrow"!==o.shape&&"line"!==o.shape||(r%90==0&&r%180!=0?"sw-resize"===this.upperCanvas.style.cursor||"se-resize"===this.upperCanvas.style.cursor?e>=o.bottomCenterCircle.startX-2*o.topLeftCircle.radius&&e<=o.bottomCenterCircle.startX+2*o.topLeftCircle.radius&&t>=o.bottomCenterCircle.startY-2*o.topLeftCircle.radius&&t<=o.bottomCenterCircle.startY+2*o.topLeftCircle.radius&&(this.upperCanvas.style.cursor="s-resize"):"nw-resize"!==this.upperCanvas.style.cursor&&"ne-resize"!==this.upperCanvas.style.cursor||e>=o.topCenterCircle.startX-2*o.topLeftCircle.radius&&e<=o.topCenterCircle.startX+2*o.topLeftCircle.radius&&t>=o.topCenterCircle.startY-2*o.topLeftCircle.radius&&t<=o.topCenterCircle.startY+2*o.topLeftCircle.radius&&(this.upperCanvas.style.cursor="n-resize"):"nw-resize"===this.upperCanvas.style.cursor||"sw-resize"===this.upperCanvas.style.cursor?e>=o.centerLeftCircle.startX-2*o.topLeftCircle.radius&&e<=o.centerLeftCircle.startX+2*o.topLeftCircle.radius&&t>=o.centerLeftCircle.startY-2*o.topLeftCircle.radius&&t<=o.centerLeftCircle.startY+2*o.topLeftCircle.radius&&(this.upperCanvas.style.cursor="w-resize"):"ne-resize"!==this.upperCanvas.style.cursor&&"se-resize"!==this.upperCanvas.style.cursor||e>=o.centerRightCircle.startX-2*o.topLeftCircle.radius&&e<=o.centerRightCircle.startX+2*o.topLeftCircle.radius&&t>=o.centerRightCircle.startY-2*o.topLeftCircle.radius&&t<=o.centerRightCircle.startY+2*o.topLeftCircle.radius&&(this.upperCanvas.style.cursor="e-resize"),"nw-resize"!==this.upperCanvas.style.cursor&&"ne-resize"!==this.upperCanvas.style.cursor&&"sw-resize"!==this.upperCanvas.style.cursor&&"se-resize"!==this.upperCanvas.style.cursor||(this.upperCanvas.style.cursor="move"),r%90==0&&r%180!=0?"w-resize"!==this.upperCanvas.style.cursor&&"e-resize"!==this.upperCanvas.style.cursor||(this.upperCanvas.style.cursor="move"):"n-resize"!==this.upperCanvas.style.cursor&&"s-resize"!==this.upperCanvas.style.cursor||(this.upperCanvas.style.cursor="move")),"default"===n&&"default"===this.upperCanvas.style.cursor&&s&&(this.upperCanvas.style.cursor="grab"),"grab"===n&&"default"===this.upperCanvas.style.cursor&&(this.upperCanvas.style.cursor="grab")}else this.togglePan&&!this.togglePen?this.lowerCanvas.style.cursor=this.upperCanvas.style.cursor="grab":this.currObjType.isCustomCrop||this.togglePen?this.upperCanvas.style.cursor="crosshair":this.upperCanvas.style.cursor="default";if("default"===this.upperCanvas.style.cursor||"grab"===this.upperCanvas.style.cursor){n=this.upperCanvas.style.cursor;this.objColl.length>0&&("grab"!==this.upperCanvas.style.cursor||!s)&&this.setCursorFromObj(e,t,this.objColl),"grab"===n&&"default"===this.upperCanvas.style.cursor&&(this.upperCanvas.style.cursor="grab")}"default"!==this.upperCanvas.style.cursor&&"grab"!==this.upperCanvas.style.cursor||sf.base.isNullOrUndefined(this.pointColl[0])||"grab"===this.upperCanvas.style.cursor&&s||this.setCursorForFreehandDrawing(e,t)},t.prototype.setCursorForFreehandDrawing=function(e,t){var i=!1;this.freehandDrawHoveredIndex=-1;for(var s=0;s<this.freehandCounter;s++){this.points=sf.base.extend([],this.pointColl[s].points,[]),this.pointCounter=0;for(var n=this.points.length,o=0;o<n;o++)if(0!==o){var r=!1;if(sf.base.isNullOrUndefined(this.points[o-1])||sf.base.isNullOrUndefined(this.points[o])||(r=this.isInside(e,t,this.points[o-1].x,this.points[o-1].y,this.points[o].x,this.points[o].y)),r){this.isFreehandDrawingPoint=!0,this.freehandDrawHoveredIndex=s,this.hoverFreehandraw(),this.upperCanvas.style.cursor="pointer",i=!0;break}if(!this.isFreehandDrawEditing||this.pointColl[s].isSelected){if(this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),sf.base.isNullOrUndefined(this.activeObj.shape)||"none"!==this.textArea.style.display||this.drawObject("duplicate",this.activeObj),this.isFreehandDrawEditing){var a=this.pointColl[s].strokeColor=this.selectedFreehandColor;this.hoverFreehandraw(a,this.pointColl[s].strokeWidth)}else this.freehandDrawHoveredIndex=null;this.isFreehandDrawingPoint=!1}}else{if(e>this.points[o].x-this.pointColl[s].strokeWidth&&e<this.points[o].x+this.pointColl[s].strokeWidth&&t>this.points[o].y-this.pointColl[s].strokeWidth&&t<this.points[o].y+this.pointColl[s].strokeWidth){this.isFreehandDrawingPoint=!0,this.freehandDrawHoveredIndex=s,this.hoverFreehandraw(),this.upperCanvas.style.cursor="pointer",i=!0;break}if(!this.isFreehandDrawEditing||this.pointColl[s].isSelected){if(this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),sf.base.isNullOrUndefined(this.activeObj.shape)||"none"!==this.textArea.style.display||this.drawObject("duplicate",this.activeObj),this.isFreehandDrawEditing){a="#fff"===this.pointColl[s].strokeColor?"#42a5f5":this.pointColl[s].strokeColor;this.hoverFreehandraw(a,this.pointColl[s].strokeWidth)}this.isFreehandDrawingPoint=!1}}if(i)break}},t.prototype.setCursorFromObj=function(e,t,i){for(var s=0;s<i.length;s++){var n=sf.base.extend({},i[s],{},!0);if(e>=n.topLeftCircle.startX-2*n.topLeftCircle.radius&&e<=n.topLeftCircle.startX+2*n.topLeftCircle.radius&&t>=n.topLeftCircle.startY-2*n.topLeftCircle.radius&&t<=n.topLeftCircle.startY+2*n.topLeftCircle.radius){this.upperCanvas.style.cursor="nw-resize";break}if(e>=n.topCenterCircle.startX-2*n.topLeftCircle.radius&&e<=n.topCenterCircle.startX+2*n.topLeftCircle.radius&&t>=n.topCenterCircle.startY-2*n.topLeftCircle.radius&&t<=n.topCenterCircle.startY+2*n.topLeftCircle.radius){this.upperCanvas.style.cursor="n-resize";break}if(e>=n.topRightCircle.startX-2*n.topLeftCircle.radius&&e<=n.topRightCircle.startX+2*n.topLeftCircle.radius&&t>=n.topRightCircle.startY-2*n.topLeftCircle.radius&&t<=n.topRightCircle.startY+2*n.topLeftCircle.radius){this.upperCanvas.style.cursor="ne-resize";break}if(e>=n.centerLeftCircle.startX-2*n.topLeftCircle.radius&&e<=n.centerLeftCircle.startX+2*n.topLeftCircle.radius&&t>=n.centerLeftCircle.startY-2*n.topLeftCircle.radius&&t<=n.centerLeftCircle.startY+2*n.topLeftCircle.radius){this.upperCanvas.style.cursor="w-resize";break}if(e>=n.centerRightCircle.startX-2*n.topLeftCircle.radius&&e<=n.centerRightCircle.startX+2*n.topLeftCircle.radius&&t>=n.centerRightCircle.startY-2*n.topLeftCircle.radius&&t<=n.centerRightCircle.startY+2*n.topLeftCircle.radius){this.upperCanvas.style.cursor="e-resize";break}if(e>=n.bottomLeftCircle.startX-2*n.topLeftCircle.radius&&e<=n.bottomLeftCircle.startX+2*n.topLeftCircle.radius&&t>=n.bottomLeftCircle.startY-2*n.topLeftCircle.radius&&t<=n.bottomLeftCircle.startY+2*n.topLeftCircle.radius){this.upperCanvas.style.cursor="sw-resize";break}if(e>=n.bottomCenterCircle.startX-2*n.topLeftCircle.radius&&e<=n.bottomCenterCircle.startX+2*n.topLeftCircle.radius&&t>=n.bottomCenterCircle.startY-2*n.topLeftCircle.radius&&t<=n.bottomCenterCircle.startY+2*n.topLeftCircle.radius){this.upperCanvas.style.cursor="s-resize";break}if(e>=n.bottomRightCircle.startX-2*n.topLeftCircle.radius&&e<=n.bottomRightCircle.startX+2*n.topLeftCircle.radius&&t>=n.bottomRightCircle.startY-2*n.topLeftCircle.radius&&t<=n.bottomRightCircle.startY+2*n.topLeftCircle.radius){this.upperCanvas.style.cursor="se-resize";break}if(e>=n.activePoint.startX&&e<=n.activePoint.endX&&t>=n.activePoint.startY&&t<=n.activePoint.endY){this.upperCanvas.style.cursor="move";break}this.currObjType.isCustomCrop&&(this.upperCanvas.style.cursor="crosshair"),this.upperCanvas.style.cursor="default"}},t.prototype.isInside=function(e,t,i,s,n,o){var r=Math.min(i,n),a=Math.max(i,n),l=Math.min(s,o),h=Math.max(s,o);return r<=e&&e<=a&&l<=t&&t<=h},t.prototype.downloadImg=function(e,t){var i=document.createElement("a");i.href=e,i.target="_parent",i.download=t,(document.body||document.documentElement).appendChild(i),i.click(),i.parentNode.removeChild(i)},t.prototype.toSVGImg=function(e){sf.popups.showSpinner(this.element),this.element.style.opacity="0.5";var t=this.exportChangesToCanvas(),i=t.toDataURL();sf.popups.hideSpinner(this.element),this.element.style.opacity="1";var s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("width",t.style.maxWidth),s.setAttribute("height",t.style.maxHeight);var n=document.createElementNS("http://www.w3.org/2000/svg","image");n.setAttributeNS(null,"height",t.height.toString()),n.setAttributeNS(null,"width",t.width.toString()),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i),s.appendChild(n);var o='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+t.width+'" height="'+t.height+'">',r=s.innerHTML,a="data:image/svg+xml;base64,"+btoa(o+r+"</svg>");return null===e?a:(this.downloadImg(a,e+".svg"),null)},t.prototype.toBlobFn=function(e,t){var i=this;sf.popups.showSpinner(this.element),this.element.style.opacity="0.5",this.exportChangesToCanvas().toBlob((function(s){var n=URL.createObjectURL(s);i.downloadImg(n,e+"."+t),sf.popups.hideSpinner(i.element),i.element.style.opacity="1"}),"image/png")},t.prototype.exportChangesToCanvas=function(){var e,t=this.calcRatio(),i=this.lowerContext.filter;if("none"!==this.lowerContext.filter){var s=this.lowerContext.filter.split(" "),n=parseFloat(s[5].split("(")[1]);n*=(t.width+t.height)/2,s[5]="blur("+n+"px)",this.lowerContext.filter=s.join(" ")}var o=this.createElement("canvas",{id:this.element.id+"_tempCanvas",attrs:{name:"canvasImage"}}),r=o.getContext("2d");if(r.filter=this.lowerContext.filter,sf.base.isNullOrUndefined(this.currSelectionPoint)){o.width=this.baseImg.width,o.height=this.baseImg.height,e=this.calcMaxDimension(this.baseImg.width,this.baseImg.height),o.style.maxWidth=e.width+"px",o.style.maxHeight=e.height+"px",r.filter=this.lowerContext.filter;var a=this.lowerContext.filter;this.updateBrightnessFilter(),r.drawImage(this.baseImg,this.srcLeft,this.srcTop,this.srcWidth,this.srcHeight,0,0,this.baseImg.width,this.baseImg.height),this.lowerContext.filter=a}else{o.width=this.destWidth,o.height=this.destHeight,r.filter=this.lowerContext.filter;a=this.lowerContext.filter;this.updateBrightnessFilter(),r.drawImage(this.baseImg,this.srcLeft,this.srcTop,this.srcWidth,this.srcHeight,0,0,this.destWidth,this.destHeight),this.lowerContext.filter=a}if(0===this.degree&&""===this.currFlipState||(this.updateSaveContext(r),this.exportTransformedImage(r)),this.objColl.length>0){a=r.filter;r.filter="none";for(var l=sf.base.extend([],this.objColl,[],!0),h=0;h<this.objColl.length;h++)this.objColl[h].activePoint.startX-=this.destLeft,this.objColl[h].activePoint.startY-=this.destTop,this.objColl[h].activePoint.endX-=this.destLeft,this.objColl[h].activePoint.endY-=this.destTop,this.objColl[h].activePoint.width=this.objColl[h].activePoint.endX-this.objColl[h].activePoint.startX,this.objColl[h].activePoint.height=this.objColl[h].activePoint.endY-this.objColl[h].activePoint.startY,sf.base.isNullOrUndefined(this.currSelectionPoint)&&(this.objColl[h].activePoint.startX*=t.width,this.objColl[h].activePoint.startY*=t.height,this.objColl[h].activePoint.endX*=t.width,this.objColl[h].activePoint.endY*=t.height,this.objColl[h].activePoint.width=this.objColl[h].activePoint.endX-this.objColl[h].activePoint.startX,this.objColl[h].activePoint.height=this.objColl[h].activePoint.endY-this.objColl[h].activePoint.startY,this.objColl[h].strokeSettings.strokeWidth*=(t.width+t.height)/2,"text"===this.objColl[h].shape&&(this.objColl[h].textSettings.fontSize*=(t.width+t.height)/2)),this.drawObject("saveContext",this.objColl[h],null,null,!0,r);r.filter=a,this.refreshActiveObj(),this.objColl=l}if(this.freehandCounter>0){for(var d=sf.base.extend({},this.pointColl,{},!0),c=0;c<this.freehandCounter;c++){this.points=sf.base.extend([],this.pointColl[c].points,[]),this.pointCounter=0;var p=this.points.length;if(sf.base.isNullOrUndefined(this.currSelectionPoint)){this.pointColl[c].strokeWidth*=(t.width+t.height)/2;for(var u=0;u<p;u++)this.points[u].x=(this.points[u].x-this.destLeft)*t.width,this.points[u].y=(this.points[u].y-this.destTop)*t.height}else for(u=0;u<p;u++)this.points[u].x-=this.destLeft,this.points[u].y-=this.destTop}this.freehandRedraw(r),this.pointColl=d}return this.isCircleCrop&&this.cropCircle(r,!0),this.lowerContext.filter=i,o},t.prototype.exportTransformedImage=function(e){for(var t=this.degree,i=0;i<this.rotateFlipColl.length;i++)"number"==typeof this.rotateFlipColl[i]?this.exportRotate(e,this.rotateFlipColl[i]):"horizontal"===this.rotateFlipColl[i]?this.exportHorizontalFlip(e):"vertical"===this.rotateFlipColl[i]&&this.exportVerticalFlip(e);this.degree=t},t.prototype.exportRotate=function(e,t){sf.base.isNullOrUndefined(this.currSelectionPoint)?(this.setMaximumDimension(this.degree,e.canvas),e.translate(e.canvas.width/2,e.canvas.height/2),e.rotate(Math.PI/180*t),e.drawImage(this.inMemoryCanvas,this.srcLeft,this.srcTop,this.srcWidth,this.srcHeight,-e.canvas.height/2,-e.canvas.width/2,e.canvas.height,e.canvas.width)):(e.translate(e.canvas.width/2,e.canvas.height/2),e.rotate(Math.PI/180*t),e.drawImage(this.inMemoryCanvas,-e.canvas.height/2,-e.canvas.width/2,e.canvas.height,e.canvas.width)),this.updateSaveContext(e)},t.prototype.exportHorizontalFlip=function(e){e.translate(e.canvas.width,0),e.scale(-1,1),e.drawImage(this.inMemoryCanvas,0,0),this.updateSaveContext(e)},t.prototype.exportVerticalFlip=function(e){e.translate(0,e.canvas.height),e.scale(1,-1),e.drawImage(this.inMemoryCanvas,0,0),this.updateSaveContext(e)},t.prototype.updateSaveContext=function(e){e.setTransform(1,0,0,1,0,0);var t=e.getImageData(0,0,e.canvas.width,e.canvas.height);this.inMemoryCanvas.width=t.width,this.inMemoryCanvas.height=t.height,this.inMemoryContext.putImageData(t,0,0)},t.prototype.addLetter=function(e){if("none"===this.textArea.style.display&&(this.currObjType.isText||"text"===this.activeObj.shape)){"Backspace"===e?this.keyHistory=this.keyHistory.slice(0,-1):this.keyHistory+=e,this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.updateFontStyles();var t=this.upperContext.measureText(this.keyHistory+this.tempKeyHistory).width+.5*this.activeObj.textSettings.fontSize,i=this.activeObj.textSettings.fontSize+.25*this.activeObj.textSettings.fontSize;this.upperContext.fillText(this.keyHistory+this.tempKeyHistory,this.activeObj.activePoint.startX,this.activeObj.activePoint.startY+this.activeObj.textSettings.fontSize),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.currObjType.isText=!0,this.setActivePoint(t,i)}},t.prototype.updateFontStyles=function(e){this.upperContext.strokeStyle=this.activeObj.strokeSettings.strokeColor,this.upperContext.fillStyle=this.activeObj.strokeSettings.strokeColor;var t="";this.activeObj.textSettings.bold&&(t="bold "),this.activeObj.textSettings.italic&&(t="italic "),this.activeObj.textSettings.bold&&this.activeObj.textSettings.italic&&(t="italic bold ");var i=e?parseFloat(this.textArea.style.fontSize):this.activeObj.textSettings.fontSize,s="block"===this.textArea.style.display?this.textArea.style.fontFamily:this.activeObj.textSettings.fontFamily;this.upperContext.font=t+i+"px "+s},t.prototype.textFlipDegree=function(e,t,i){for(var s=this.activeObj.keyHistory.split("\n"),n=(this.activeObj.textSettings.fontSize*s.length-this.activeObj.textSettings.fontSize*s.length)/s.length,o=.85*this.activeObj.textSettings.fontSize+n,r=0;r<s.length;r++){var a=s[r];r>0&&(1===r&&(o-=.85*this.activeObj.textSettings.fontSize),o+=this.activeObj.textSettings.fontSize+.15*this.activeObj.textSettings.fontSize),e.fillText(a,t+.15*this.activeObj.textSettings.fontSize,i+o+(r>0?.25*this.activeObj.textSettings.fontSize:.35*-this.activeObj.textSettings.fontSize))}},t.prototype.rotateText=function(e){var t,i=this.activeObj.activePoint.startX,s=this.activeObj.activePoint.startY;if((t=0===this.activeObj.shapeDegree?this.degree:this.degree-this.activeObj.shapeDegree)<0&&(t=360+t),t%360!=0||-360===this.degree&&""!==this.currFlipState)t%90==0&&t%180!=0?(e.translate(this.lowerCanvas.width/2,this.lowerCanvas.height/2),e.rotate(Math.PI/180*t),e.translate(-this.lowerCanvas.height/2,-this.lowerCanvas.width/2),t%90==0&&t%270!=0?(s=this.lowerCanvas.width-this.activeObj.activePoint.endX+.4*this.activeObj.textSettings.fontSize,i=this.activeObj.activePoint.startY):t%270==0&&(i=this.lowerCanvas.height-this.activeObj.activePoint.endY,s=this.activeObj.activePoint.startX+.4*this.activeObj.textSettings.fontSize),this.textFlipDegree(e,i,s),e.translate(this.lowerCanvas.height/2,this.lowerCanvas.width/2),e.rotate(Math.PI/180*-t),e.translate(-this.lowerCanvas.width/2,-this.lowerCanvas.height/2)):(e.translate(this.lowerCanvas.width/2,this.lowerCanvas.height/2),e.rotate(Math.PI/180*t),i=this.lowerCanvas.width-this.activeObj.activePoint.endX,s=this.lowerCanvas.height-this.activeObj.activePoint.endY+.4*this.activeObj.textSettings.fontSize,e.translate(-this.lowerCanvas.width/2,-this.lowerCanvas.height/2),this.textFlipDegree(e,i,s),e.translate(this.lowerCanvas.width/2,this.lowerCanvas.height/2),e.rotate(Math.PI/180*-t),e.translate(-this.lowerCanvas.width/2,-this.lowerCanvas.height/2));else{i=this.activeObj.activePoint.startX+.15*this.activeObj.textSettings.fontSize,s=this.activeObj.activePoint.startY+(this.activeObj.activePoint.endY-this.activeObj.activePoint.startY);for(var n=this.activeObj.keyHistory.split("\n"),o=0;o<n.length;o++)s=this.activeObj.activePoint.startY+(o*this.activeObj.textSettings.fontSize+.25*this.activeObj.textSettings.fontSize),e.fillText(n[o],i,s)}360!==this.degree&&-360!==this.degree||(this.degree=0)},t.prototype.redrawObj=function(e){if(this.objColl.length>0)if("horizontal"===e||"vertical"===e||"Horizontal"===e||"Vertical"===e||"horizontalVertical"===e||"verticalHorizontal"===e)this.updateCurrentActiveObjPoint(e.toLowerCase());else if("number"==typeof e){this.updateCurrentActiveObjPoint(e);var t=this.lowerContext.filter;this.lowerContext.filter=this.getDefaultFilter();for(var i=0;i<this.objColl.length;i++){"crop"!==this.objColl[i].shape.split("-")[0]&&this.apply(this.objColl[i].shape,this.objColl[i])}this.lowerContext.filter=t}},t.prototype.updateCurrentActiveObjPoint=function(e){for(var t,i=0;i<this.objColl.length;i++)if(this.activeObj.shape===this.objColl[i].shape&&this.activeObj.activePoint.startX===this.objColl[i].activePoint.startX&&this.activeObj.activePoint.startY===this.objColl[i].activePoint.startY&&this.activeObj.activePoint.endX===this.objColl[i].activePoint.endX&&this.activeObj.activePoint.endY===this.objColl[i].activePoint.endY&&this.activeObj.currIndex===this.objColl[i].currIndex){t=i;break}if("horizontal"===e||"vertical"===e||"Horizontal"===e||"Vertical"===e||"horizontalvertical"===e||"verticalhorizontal"===e){if("horizontal"===e||"Horizontal"===e)for(var s=0;s<this.objColl.length;s++)this.objColl[s].shapeFlip!==this.currFlipState&&(this.objColl[s].activePoint.startX<=this.destLeft+this.destWidth/2?(this.objColl[s].activePoint.endX=this.destLeft+this.destWidth-(this.objColl[s].activePoint.startX-this.destLeft),this.objColl[s].activePoint.startX=this.objColl[s].activePoint.endX-this.objColl[s].activePoint.width,this.updateActiveObject(this.objColl[s].activePoint,this.objColl[s])):this.objColl[s].activePoint.startX>=this.destLeft+this.destWidth/2&&(this.objColl[s].activePoint.startX=this.destLeft+(this.destLeft+this.destWidth-this.objColl[s].activePoint.endX),this.objColl[s].activePoint.endX=this.objColl[s].activePoint.startX+this.objColl[s].activePoint.width,this.updateActiveObject(this.objColl[s].activePoint,this.objColl[s])),this.objColl[s].shapeFlip=this.currFlipState,this.updateArrowDirection(this.objColl[s],"horizontal"),this.updateTrianglePoints(this.objColl[s]),this.objColl[s].imageRatio={startX:(this.objColl[s].activePoint.startX-this.destLeft)/this.destWidth,startY:(this.objColl[s].activePoint.startY-this.destTop)/this.destHeight,endX:(this.objColl[s].activePoint.endX-this.destLeft)/this.destWidth,endY:(this.objColl[s].activePoint.endY-this.destTop)/this.destHeight,width:this.destWidth/this.objColl[s].activePoint.width,height:this.destHeight/this.objColl[s].activePoint.height});else if("vertical"===e||"Vertical"===e)for(s=0;s<this.objColl.length;s++)this.objColl[s].shapeFlip!==this.currFlipState&&(this.objColl[s].activePoint.startY<=this.destTop+this.destHeight/2?(this.objColl[s].activePoint.endY=this.destTop+this.destHeight-(this.objColl[s].activePoint.startY-this.destTop),this.objColl[s].activePoint.startY=this.objColl[s].activePoint.endY-this.objColl[s].activePoint.height,this.updateActiveObject(this.objColl[s].activePoint,this.objColl[s])):this.objColl[s].activePoint.startY>=this.lowerCanvas.height/2&&(this.objColl[s].activePoint.startY=this.destTop+(this.destTop+this.destHeight-this.objColl[s].activePoint.endY),this.objColl[s].activePoint.endY=this.objColl[s].activePoint.startY+this.objColl[s].activePoint.height,this.updateActiveObject(this.objColl[s].activePoint,this.objColl[s])),this.objColl[s].shapeFlip=this.currFlipState,this.updateArrowDirection(this.objColl[s],"horizontal"),this.updateTrianglePoints(this.objColl[s]),this.objColl[s].imageRatio={startX:(this.objColl[s].activePoint.startX-this.destLeft)/this.destWidth,startY:(this.objColl[s].activePoint.startY-this.destTop)/this.destHeight,endX:(this.objColl[s].activePoint.endX-this.destLeft)/this.destWidth,endY:(this.objColl[s].activePoint.endY-this.destTop)/this.destHeight,width:this.destWidth/this.objColl[s].activePoint.width,height:this.destHeight/this.objColl[s].activePoint.height});else if("verticalhorizontal"===e||"horizontalvertical"===e)for(s=0;s<this.objColl.length;s++)this.objColl[s].shapeFlip!==this.currFlipState&&(this.objColl[s].activePoint.startX<=this.destLeft+this.destWidth/2?(this.objColl[s].activePoint.endX=this.destLeft+this.destWidth-(this.objColl[s].activePoint.startX-this.destLeft),this.objColl[s].activePoint.startX=this.objColl[s].activePoint.endX-this.objColl[s].activePoint.width,this.updateActiveObject(this.objColl[s].activePoint,this.objColl[s])):this.objColl[s].activePoint.startX>=this.destLeft+this.destWidth/2&&(this.objColl[s].activePoint.startX=this.destLeft+(this.destLeft+this.destWidth-this.objColl[s].activePoint.endX),this.objColl[s].activePoint.endX=this.objColl[s].activePoint.startX+this.objColl[s].activePoint.width,this.updateActiveObject(this.objColl[s].activePoint,this.objColl[s])),this.objColl[s].activePoint.startY<=this.destTop+this.destHeight/2?(this.objColl[s].activePoint.endY=this.destTop+this.destHeight-(this.objColl[s].activePoint.startY-this.destTop),this.objColl[s].activePoint.startY=this.objColl[s].activePoint.endY-this.objColl[s].activePoint.height,this.updateActiveObject(this.objColl[s].activePoint,this.objColl[s])):this.objColl[s].activePoint.startY>=this.lowerCanvas.height/2&&(this.objColl[s].activePoint.startY=this.destTop+(this.destTop+this.destHeight-this.objColl[s].activePoint.endY),this.objColl[s].activePoint.endY=this.objColl[s].activePoint.startY+this.objColl[s].activePoint.height,this.updateActiveObject(this.objColl[s].activePoint,this.objColl[s])),this.objColl[s].shapeFlip=this.currFlipState,this.updateArrowDirection(this.objColl[s],"horizontal"),this.updateTrianglePoints(this.objColl[s]),this.objColl[s].imageRatio={startX:(this.objColl[s].activePoint.startX-this.destLeft)/this.destWidth,startY:(this.objColl[s].activePoint.startY-this.destTop)/this.destHeight,endX:(this.objColl[s].activePoint.endX-this.destLeft)/this.destWidth,endY:(this.objColl[s].activePoint.endY-this.destTop)/this.destHeight,width:this.destWidth/this.objColl[s].activePoint.width,height:this.destHeight/this.objColl[s].activePoint.height});void 0!==t&&(this.activeObj=sf.base.extend({},this.objColl[t],{},!0))}else if(90===e)this.rotateObjColl();else if(-90===e)for(s=0;s<3;s++)this.rotateObjColl();else if("number"==typeof e)if(e>0)this.rotateObjColl();else for(s=0;s<3;s++)this.rotateObjColl()},t.prototype.rotateObjColl=function(){for(var e=0;e<this.objColl.length;e++)this.objColl[e].activePoint.startY=this.destTop+this.destHeight*this.objColl[e].imageRatio.startX,this.objColl[e].activePoint.endY=this.destTop+this.destHeight*this.objColl[e].imageRatio.endX,this.objColl[e].activePoint.startX=this.destLeft+this.destWidth-this.destWidth*this.objColl[e].imageRatio.endY,this.objColl[e].activePoint.endX=this.destLeft+this.destWidth-this.destWidth*this.objColl[e].imageRatio.startY,this.objColl[e].activePoint.width=this.objColl[e].activePoint.endX-this.objColl[e].activePoint.startX,this.objColl[e].activePoint.height=this.objColl[e].activePoint.endY-this.objColl[e].activePoint.startY,this.updateFontSize(this.objColl[e]),"arrow"===this.objColl[e].shape&&(this.updateArrowDirection(this.objColl[e],null,90),this.updateTrianglePoints(this.objColl[e]));for(e=0;e<this.objColl.length;e++)this.updateActiveObject(this.objColl[e].activePoint,this.objColl[e]);for(e=0;e<this.objColl.length;e++)this.objColl[e].imageRatio={startX:(this.objColl[e].activePoint.startX-this.destLeft)/this.destWidth,startY:(this.objColl[e].activePoint.startY-this.destTop)/this.destHeight,endX:(this.objColl[e].activePoint.endX-this.destLeft)/this.destWidth,endY:(this.objColl[e].activePoint.endY-this.destTop)/this.destHeight,width:this.destWidth/this.objColl[e].activePoint.width,height:this.destHeight/this.objColl[e].activePoint.height}},t.prototype.redrawShape=function(e){for(var t=0;t<this.objColl.length;t++)if(JSON.stringify(e)===JSON.stringify(this.objColl[t])){this.objColl.splice(t,1);break}this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.isPreventDragging?(this.activeObj.activePoint.startX>this.destLeft&&(this.isPreventDragging=!1),this.drawObject("duplicate",null,null,null,!0)):this.drawObject("duplicate",null,null,null,!0)},t.prototype.applyActObj=function(){var e=!1;if(void 0!==this.activeObj.shape&&"text"===this.activeObj.shape&&""===this.activeObj.keyHistory)this.refreshActiveObj(),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height);else{var t=void 0,i=!1;if(void 0!==this.activeObj.shape&&(t=this.activeObj.shape.split("-")),(void 0===t&&this.currObjType.isCustomCrop||void 0!==t&&"crop"===t[0])&&(i=!0),!sf.base.isNullOrUndefined(this.activeObj.shape)&&!i){for(var s=0;s<this.objColl.length;s++)if(JSON.stringify(this.activeObj)===JSON.stringify(this.objColl[s])){e=!0;break}if(!e){sf.base.isNullOrUndefined(this.activeObj.currIndex)&&(this.activeObj.currIndex="shape_"+(this.objColl.length+1)),this.updateImageRatioForActObj();var n=this.activeObj.currIndex.split("_"),o=this.objColl.splice(0,parseInt(n[1],10)-1);o.push(sf.base.extend({},this.activeObj,{},!0));for(s=0;s<this.objColl.length;s++)o.push(this.objColl[s]);this.objColl=o,o=[],this.refreshActiveObj(),this.lowerContext.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),this.redrawImgWithObj(),this.clearOuterCanvas(this.lowerContext),this.clearOuterCanvas(this.upperContext),this.currObjType.shape="",this.refreshActiveObj(),this.isCircleCrop&&this.cropCircle(this.lowerContext)}}}},t.prototype.apply=function(e,t,i){if(!this.disabled)if(this.togglePen&&!this.currObjType.isCustomCrop){var s=this.destLeft,n=this.destTop,o=this.destWidth,r=this.destHeight;this.callUpdateCurrentTransformedState();var a=this.lowerContext.filter;this.lowerContext.filter="none",this.togglePen=!1,this.iterateObjColl(),this.freehandRedraw(this.lowerContext),this.togglePen=!1,(this.isCircleCrop||!sf.base.isNullOrUndefined(this.currSelectionPoint)&&"crop-circle"===this.currSelectionPoint.shape)&&this.cropCircle(this.lowerContext),this.destLeft=s,this.destTop=n,this.destWidth=o,this.destHeight=r,this.lowerContext.filter=a}else i=i||"original",this.currObjType.shape=void 0!==e?e:this.currObjType.shape,""!==this.currObjType.shape&&(this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.drawObject(i,t),this.activeObj.shape=this.currObjType.shape.toLowerCase(),e||""===this.currObjType.shape||this.currObjType.isCustomCrop||this.objColl.push(sf.base.extend({},this.activeObj,{},!0)),this.keyHistory="")},t.prototype.setCenterPoints=function(e,t,i){var s,n;e&&t&&i?(s=t,n=i):(s=this.activeObj.activePoint.width,n=this.activeObj.activePoint.height),this.activeObj.activePoint.startX=this.lowerCanvas.width/2-s/2,this.activeObj.activePoint.startY=this.lowerCanvas.height/2-n/2,this.activeObj.activePoint.endX=this.lowerCanvas.width/2+s/2,this.activeObj.activePoint.endY=this.lowerCanvas.height/2+n/2,e&&t&&i&&(this.textStartPoints.x=this.activeObj.activePoint.startX,this.textStartPoints.y=this.activeObj.activePoint.startY)},t.prototype.updateTriangleRatio=function(e){e.triangleRatio=[],e.triangleRatio.push({x:(e.triangle[0].x-this.destLeft)/this.destWidth,y:(e.triangle[0].y-this.destTop)/this.destHeight}),e.triangleRatio.push({x:(e.triangle[1].x-this.destLeft)/this.destWidth,y:(e.triangle[1].y-this.destTop)/this.destHeight}),e.triangleRatio.push({x:(e.triangle[2].x-this.destLeft)/this.destWidth,y:(e.triangle[2].y-this.destTop)/this.destHeight})},t.prototype.updateTrianglePoints=function(e){if("arrow"===e.shape){var t=void 0,i=void 0;switch((t=0===e.shapeDegree?this.degree:this.degree-e.shapeDegree)<0&&(t=360+t),i=t%90==0&&t%180!=0?e.activePoint.width:e.activePoint.height,e.triangle=[],e.triangleDirection){case"right":e.triangle.push({x:e.activePoint.endX-i,y:e.activePoint.startY}),e.triangle.push({x:e.activePoint.endX,y:e.activePoint.startY+i/2}),e.triangle.push({x:e.activePoint.endX-i,y:e.activePoint.endY});break;case"left":e.triangle.push({x:e.activePoint.startX+i,y:e.activePoint.startY}),e.triangle.push({x:e.activePoint.startX,y:e.activePoint.startY+i/2}),e.triangle.push({x:e.activePoint.startX+i,y:e.activePoint.endY});break;case"top":e.triangle.push({x:e.activePoint.startX,y:e.activePoint.startY+i}),e.triangle.push({x:e.activePoint.startX+i/2,y:e.activePoint.startY}),e.triangle.push({x:e.activePoint.startX+i,y:e.activePoint.startY+i});break;case"bottom":e.triangle.push({x:e.activePoint.endX,y:e.activePoint.endY-i}),e.triangle.push({x:e.activePoint.endX-i/2,y:e.activePoint.endY}),e.triangle.push({x:e.activePoint.endX-i,y:e.activePoint.endY-i})}this.updateTriangleRatio(e)}},t.prototype.drawShape=function(e,t,i,s,n,o,r){var a=this;if(!this.disabled&&this.isImageLoaded){this.redrawActObj();var l=sf.base.extend([],this.objColl,[],!0);if(this.togglePen=!1,this.keyHistory="",this.upperCanvas.style.display="block",this.refreshActiveObj(),this.currObjType.shape=e,"freehanddraw"!==this.currObjType.shape.toLowerCase()&&""!==this.currObjType.shape.toLowerCase()){this.activeObj.shape=this.currObjType.shape.toLowerCase(),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),sf.base.isNullOrUndefined(this.activeObj.strokeSettings)&&(this.activeObj.strokeSettings=this.strokeSettings),this.activeObj.strokeSettings.strokeWidth=t||this.activeObj.strokeSettings.strokeWidth,this.activeObj.strokeSettings.strokeColor=i||this.activeObj.strokeSettings.strokeColor,this.activeObj.strokeSettings.fillColor=s||this.activeObj.strokeSettings.fillColor;var h=this.destWidth>100?100:this.destWidth/2,d=this.destHeight>100?100:this.destHeight/2;this.activeObj.activePoint.width=h,this.activeObj.activePoint.height=d,"line"===this.currObjType.shape.toLowerCase()||"arrow"===this.currObjType.shape.toLowerCase()?(this.activeObj.lineDraw="horizontal",this.activeObj.activePoint.height/=2,this.activeObj.activePoint.height-=20,"arrow"===this.currObjType.shape.toLowerCase()&&(this.activeObj.activePoint.width+=50)):"rectangle"===this.currObjType.shape.toLowerCase()&&(this.activeObj.activePoint.width+=this.activeObj.activePoint.width/2),"ellipse"===this.currObjType.shape.toLowerCase()&&o&&(this.activeObj.activePoint.width=2*o,this.activeObj.activePoint.height=2*r),o&&r&&(this.activeObj.activePoint.width=o,this.activeObj.activePoint.height=r),sf.base.isNullOrUndefined(n)?this.setCenterPoints():(this.activeObj.activePoint.startX=n.x,this.activeObj.activePoint.startY=n.y,this.activeObj.activePoint.endX=this.activeObj.activePoint.startX+this.activeObj.activePoint.width,this.activeObj.activePoint.endY=this.activeObj.activePoint.startY+this.activeObj.activePoint.height),"arrow"===this.currObjType.shape.toLowerCase()&&(this.activeObj.triangleDirection="right",this.updateTrianglePoints(this.activeObj)),this.currObjType.isDragging=this.currObjType.isCustomCrop=!1,this.activeObj.shapeDegree=this.degree,this.activeObj.shapeFlip=this.currFlipState,this.activeObj.textFlip=this.currFlipState,this.activeObj.flipObjColl=[];var c=this.updatePreviousShapeSettings(),p={action:"insert",previousShapeSettings:c,currentShapeSettings:c};this.dotnetRef.invokeMethodAsync("ShapeEventAsync","OnShape",p).then((function(){a.updateShapeChangeEventArgs(p.currentShapeSettings),a.drawObject("duplicate"),a.isShapeInserted=!0,a.updateUndoRedoObj(l)}))}}},t.prototype.drawShapeText=function(e,t,i,s,n,o,r,a){var l=this;if(!this.disabled&&this.isImageLoaded){"freehanddraw"===this.currObjType.shape&&(this.apply(),this.upperCanvas.style.cursor="default",this.currObjType.shape=""),this.togglePen=!1,this.redrawActObj();var h=this.getCurrentObj();h.objColl=sf.base.extend([],this.objColl,[],!0),h.pointColl=sf.base.extend([],this.pointColl,[],!0),h.afterCropActions=sf.base.extend([],this.afterCropActions,[],!0),this.keyHistory="",this.refreshActiveObj(),this.activeObj.shape="text",this.currObjType.isCustomCrop=!1,this.currObjType.isText=this.currObjType.isInitialText=!0,this.upperCanvas.style.display="block",this.currObjType.shape=this.activeObj.shape="text",sf.base.isNullOrUndefined(this.activeObj.textSettings)&&(this.activeObj.textSettings=this.textSettings),sf.base.isNullOrUndefined(this.activeObj.strokeSettings)&&(this.activeObj.strokeSettings=this.strokeSettings),this.activeObj.strokeSettings.strokeColor=o||this.activeObj.strokeSettings.strokeColor,this.activeObj.textSettings.text=e||this.activeObj.textSettings.text,this.activeObj.textSettings.fontFamily=t||this.activeObj.textSettings.fontFamily,this.activeObj.textSettings.text=e||this.activeObj.textSettings.text,this.activeObj.textSettings.fontFamily=t||this.activeObj.textSettings.fontFamily,this.activeObj.textSettings.fontSize=i||this.activeObj.textSettings.fontSize,this.activeObj.textSettings.bold=s||this.activeObj.textSettings.bold,this.activeObj.textSettings.italic=n||this.activeObj.textSettings.italic,sf.base.isNullOrUndefined(this.activeObj.textSettings.fontSize)&&(this.lowerCanvas.width>this.lowerCanvas.height?this.activeObj.textSettings.fontSize=Math.floor(this.lowerCanvas.width/20):this.activeObj.textSettings.fontSize=Math.floor(this.lowerCanvas.height/20),this.activeObj.textSettings.fontSize<20&&(this.activeObj.textSettings.fontSize=20)),this.destWidth<100?this.activeObj.textSettings.fontSize=Math.floor(this.destWidth/20):this.destHeight<100&&(this.activeObj.textSettings.fontSize=Math.floor(this.destHeight/20)),this.activeObj.shapeDegree=this.degree,this.activeObj.shapeFlip=this.currFlipState,this.activeObj.flipObjColl=[],this.updateFontStyles();var d=this.upperContext.measureText(this.activeObj.textSettings.text).width+.5*this.activeObj.textSettings.fontSize,c=this.activeObj.textSettings.fontSize+.25*this.activeObj.textSettings.fontSize;sf.base.isNullOrUndefined(r)||sf.base.isNullOrUndefined(a)?this.setCenterPoints(!0,d,c):(this.activeObj.activePoint.startX=r,this.activeObj.activePoint.startY=a,this.activeObj.activePoint.endX=this.activeObj.activePoint.startX+d,this.activeObj.activePoint.endY=this.activeObj.activePoint.startY+c);var p=this.updatePreviousShapeSettings(),u={action:"insert",previousShapeSettings:p,currentShapeSettings:p};this.dotnetRef.invokeMethodAsync("ShapeEventAsync","OnShape",u).then((function(){l.updateShapeChangeEventArgs(u.currentShapeSettings),l.addLetter(l.activeObj.textSettings.text),l.activeObj.textFlip=l.currFlipState,l.updateFontRatio(l.activeObj),l.objColl.push(l.activeObj);var e=sf.base.extend({},l.cropObj,{},!0);l.updateUndoRedoColl("shapeTransform",h,h.objColl,h.pointColl,e),l.redrawShape(l.objColl[l.objColl.length-1]),l.isShapeInserted=!0}))}},t.prototype.updateShapeChangeEventArgs=function(e){switch(this.activeObj.currIndex=e.id,this.activeObj.activePoint.startX=e.startX,this.activeObj.activePoint.startY=e.startY,this.activeObj.activePoint.width=e.width,this.activeObj.activePoint.height=e.height,this.activeObj.strokeSettings.strokeColor=e.strokeColor,this.activeObj.strokeSettings.fillColor=e.fillColor,this.activeObj.shape){case"ellipse":this.activeObj.activePoint.width=e.radius/2;break;case"line":case"arrow":this.activeObj.activePoint.width=e.length;break;case"text":this.activeObj.keyHistory=e.text,this.activeObj.textSettings.fontSize=e.fontSize,this.activeObj.strokeSettings.strokeColor=e.color}if("text"===this.activeObj.shape&&!sf.base.isNullOrUndefined(this.activeObj.textSettings))for(var t=0;t<e.fontStyle.length;t++)"bold"===e.fontStyle[t]?this.activeObj.textSettings.bold=!0:"italic"===e.fontStyle[t]?this.activeObj.textSettings.italic=!0:"underline"===e.fontStyle[t]&&(this.activeObj.textSettings.underline=!0)},t.prototype.getObjDetails=function(e){var t={};return t.id=e.currIndex,t.type=this.toPascalCase(e.shape),t.startX=e.activePoint.startX,t.startY=e.activePoint.startY,"rectangle"===e.shape?(t.width=e.activePoint.width,t.height=e.activePoint.height,t.strokeColor=e.strokeSettings.strokeColor,t.fillColor=e.strokeSettings.fillColor,t.strokeWidth=e.strokeSettings.strokeWidth):"ellipse"===e.shape?(t.radius=e.activePoint.width/2,t.strokeColor=e.strokeSettings.strokeColor,t.fillColor=e.strokeSettings.fillColor,t.strokeWidth=e.strokeSettings.strokeWidth):"line"===e.shape||"arrow"===e.shape?(t.length=e.activePoint.width,t.strokeColor=e.strokeSettings.strokeColor,t.strokeWidth=e.strokeSettings.strokeWidth):"text"===e.shape&&(t.text=e.keyHistory,t.fontSize=e.textSettings.fontSize,t.color=e.strokeSettings.strokeColor,t.fontStyle=[],e.textSettings.bold&&t.fontStyle.push("bold"),e.textSettings.italic&&t.fontStyle.push("italic")),t},t.prototype.getFreehandDrawDetails=function(e){var t={};return t.id=this.pointColl[e].id,t.type="FreehandDraw",t.points=sf.base.extend([],this.pointColl[e].points),t.strokeColor=this.pointColl[e].strokeColor,t.strokeWidth=this.pointColl[e].strokeWidth,t},t.prototype.isPointsInRange=function(e,t){var i=!1;return!sf.base.isNullOrUndefined(e)&&!sf.base.isNullOrUndefined(t)&&e>=0&&t>=0&&e<=this.lowerCanvas.width&&t<=this.lowerCanvas.width&&(i=!0),i},t.prototype.clearActObj=function(){"none"===this.textArea.style.display&&(this.refreshActiveObj(),this.applyActObj(),this.refreshActiveObj(),this.currObjType.isCustomCrop=!1)},t.prototype.applyPenDraw=function(){"freehanddraw"===this.currObjType.shape&&(this.apply(),this.upperCanvas.style.cursor="default",this.currObjType.shape=""),this.clearActObj()},t.prototype.drawRotatedImage=function(e){0===e?this.degree=0:this.degree+=e,360!==this.degree&&-360!==this.degree||(this.degree=0),this.setDestinationPoints();var t=sf.base.extend([],this.objColl,[],!0),i=sf.base.extend({},this.activeObj,{},!0);if(this.objColl=[],this.refreshActiveObj(),this.isReverseRotate||this.updateCurrentTransformedState("initial"),this.rotateDegree(e),this.isReverseRotate||(this.updateCurrentTransformedState("reverse"),this.rotateFlipColl.push(e)),1===this.rotateFlipColl.length&&this.setClientTransformedDimension(),this.objColl=sf.base.extend([],t,[],!0),this.activeObj=sf.base.extend({},i,{},!0),this.isCircleCrop&&this.cropCircle(this.lowerContext),this.redrawObj(e),this.refreshActiveObj(),e>0)this.rotateFreehandDrawColl();else for(var s=0;s<3;s++)this.rotateFreehandDrawColl();this.freehandRedraw(this.lowerContext),this.updateCurrSelectionPoint(e)},t.prototype.updateCurrSelectionPoint=function(e){if(!sf.base.isNullOrUndefined(this.currSelectionPoint)&&!sf.base.isNullOrUndefined(this.currDestinationPoint)){var t=sf.base.extend({},this.activeObj,{},!0),i=sf.base.extend([],this.objColl,[],!0),s={startX:this.srcLeft,startY:this.srcTop,width:this.srcWidth,height:this.srcHeight},n={startX:this.destLeft,startY:this.destTop,width:this.destWidth,height:this.destHeight};this.objColl=[],this.objColl.push(sf.base.extend({},this.currSelectionPoint,{},!0)),this.srcLeft=0,this.srcTop=0,this.srcWidth=this.baseImg.width,this.srcHeight=this.baseImg.height,this.destLeft=this.currDestinationPoint.startX,this.destTop=this.currDestinationPoint.startY,this.destWidth=this.currDestinationPoint.width,this.destHeight=this.currDestinationPoint.height,"number"==typeof e&&(this.setDestinationPoints(),this.setClientTransformedDimension()),this.objColl[0].shapeFlip="",this.redrawObj(e),this.currSelectionPoint=sf.base.extend({},this.objColl[0],{},!0),this.currDestinationPoint={startX:this.destLeft,startY:this.destTop,width:this.destWidth,height:this.destHeight},this.objColl=i,this.activeObj=t,this.srcLeft=s.startX,this.srcTop=s.startY,this.srcWidth=s.width,this.srcHeight=s.height,this.destLeft=n.startX,this.destTop=n.startY,this.destWidth=n.width,this.destHeight=n.height}},t.prototype.setClientTransformedDimension=function(e){if(this.degree%90==0&&this.degree%180!=0){this.destLeft=(this.lowerCanvas.width-this.destHeight)/2,this.destTop=(this.lowerCanvas.height-this.destWidth)/2;var t=this.destWidth;this.destWidth=this.destHeight,this.destHeight=t}else sf.base.isNullOrUndefined(e)&&(this.destLeft=(this.lowerCanvas.width-this.destWidth)/2,this.destTop=(this.lowerCanvas.height-this.destHeight)/2)},t.prototype.popForDefaultTransformedState=function(e){for(var t=0,i=0,s=0,n=0,o=0;o<e.length;o++)90===e[o]||"rotateRight"===e[o]?(i=0,s=0,n=0,4===++t&&(e.pop(),e.pop(),e.pop(),e.pop())):-90===e[o]||"rotateLeft"===e[o]?(t=0,s=0,n=0,4===++i&&(e.pop(),e.pop(),e.pop(),e.pop())):"horizontal"===e[o]||"horizontalflip"===e[o]?(i=0,t=0,n=0,2===++s&&(e.pop(),e.pop())):"vertical"!==e[o]&&"verticalflip"!==e[o]||(s=0,i=0,t=0,2===++n&&(e.pop(),e.pop()));return e},t.prototype.popForDefaultFlipState=function(e){for(var t=0;t<e.length;t++)sf.base.isNullOrUndefined(e[t+3])||("horizontal"!==e[t]&&"horizontalFlip"!==e[t]||"vertical"!==e[t+1]&&"verticalFlip"!==e[t]||"horizontal"!==e[t+2]&&"horizontalFlip"!==e[t]||"vertical"!==e[t+3]&&"verticalFlip"!==e[t])&&("vertical"!==e[t]&&"verticalFlip"!==e[t]||"horizontal"!==e[t+1]&&"horizontalFlip"!==e[t+1]||"vertical"!==e[t+2]&&"verticalFlip"!==e[t]||"horizontal"!==e[t+3]&&"horizontalFlip"!==e[t])||(e.pop(),e.pop(),e.pop(),e.pop());return e},t.prototype.popForDefaultRotateState=function(e){for(var t=0;t<e.length;t++)sf.base.isNullOrUndefined(e[t+1])||(90!==e[t]&&"rotateRight"!==e[t]||-90!==e[t+1]&&"rotateLeft"!==e[t])&&(-90!==e[t]&&"rotateLeft"!==e[t]||90!==e[t+1]&&"rotateRight"!==e[t])||(e.pop(),e.pop());return e},t.prototype.alignRotateFlipColl=function(e,t){return e=this.popForDefaultTransformedState(e),e=this.popForDefaultFlipState(e),0===(e=this.popForDefaultRotateState(e)).length&&t&&(this.degree=0,this.currFlipState=""),e},t.prototype.updateFlipColl=function(e){if(0===this.flipColl.length?this.flipColl.push(e):"direction"===this.flipColl[this.flipColl.length-1]?this.flipColl.pop():this.flipColl.push(e),this.flipColl.length>=4)if("horizontal"===this.flipColl[this.flipColl.length-1]&&"vertical"===this.flipColl[this.flipColl.length-2]&&"horizontal"===this.flipColl[this.flipColl.length-3]&&"vertical"===this.flipColl[this.flipColl.length-4])for(var t=0;t<4;t++)this.flipColl.pop();else if("vertical"===this.flipColl[this.flipColl.length-1]&&"horizontal"===this.flipColl[this.flipColl.length-2]&&"vertical"===this.flipColl[this.flipColl.length-3]&&"horizontal"===this.flipColl[this.flipColl.length-4])for(t=0;t<4;t++)this.flipColl.pop()},t.prototype.horizontalFlip=function(){this.lowerContext.translate(this.lowerContext.canvas.width,0),this.lowerContext.scale(-1,1),this.upperContext.translate(this.upperContext.canvas.width,0),this.upperContext.scale(-1,1)},t.prototype.verticalFlip=function(){this.lowerContext.translate(0,this.lowerContext.canvas.height),this.lowerContext.scale(1,-1),this.upperContext.translate(0,this.upperContext.canvas.height),this.upperContext.scale(1,-1)},t.prototype.updateFlipState=function(e){"horizontal"===e&&this.degree%90==0&&this.degree%180!=0?this.verticalFlip():"vertical"===e&&this.degree%90==0&&this.degree%180!=0||"horizontal"===e?this.horizontalFlip():"vertical"===e&&this.verticalFlip()},t.prototype.setDestinationPoints=function(){var e;this.degree%90==0&&this.degree%180!=0?(e=this.calcMaxDimension(this.srcHeight,this.srcWidth),this.isRotateZoom&&(e.width+=e.width*this.zoomFactor,e.height+=e.height*this.zoomFactor,this.destWidth=e.height,this.destHeight=e.width),this.destLeft=(this.lowerCanvas.clientWidth-e.height)/2,this.destTop=(this.lowerCanvas.clientHeight-e.width)/2,this.destWidth=e.height,this.destHeight=e.width):(e=this.calcMaxDimension(this.srcWidth,this.srcHeight),this.isRotateZoom&&(e.width+=e.width*this.zoomFactor,e.height+=e.height*this.zoomFactor,this.destWidth=e.width,this.destHeight=e.height),this.destLeft=(this.lowerCanvas.clientWidth-e.width)/2,this.destTop=(this.lowerCanvas.clientHeight-e.height)/2,this.destWidth=e.width,this.destHeight=e.height)},t.prototype.rotatedFlip=function(){this.isReverseFlip=!0;var e=this.currFlipState,t=this.flipColl,i=sf.base.extend([],this.objColl,[],!0),s=sf.base.extend({},this.activeObj,{},!0);this.flipColl=[],this.objColl=[],this.refreshActiveObj(),this.currentTransformedState("initial");var n=this.lowerContext.filter;this.updateBrightnessFilter(),this.lowerContext.drawImage(this.baseImg,this.srcLeft,this.srcTop,this.srcWidth,this.srcHeight,this.destLeft,this.destTop,this.destWidth,this.destHeight),this.lowerContext.filter=n,this.currentTransformedState("reverse",!0),""===e&&""!==this.currFlipState&&(e=this.currFlipState),this.currFlipState=e,this.flipColl=t,this.objColl=sf.base.extend([],i,[],!0),this.lowerContext.filter="none",this.iterateObjColl(),this.lowerContext.filter=n,0!==s.activePoint.width&&(this.activeObj=sf.base.extend({},s,{},!0)),this.isReverseFlip=!1},t.prototype.getFilterValue=function(e){return 0===e?1:1+.5*e/100},t.prototype.setFilterValue=function(e){var t;return t=1===e?0:100*(e-1)/.5,Math.round(t)},t.prototype.getSaturationFilterValue=function(e){return 0===e?1:1+e/100},t.prototype.setSaturationFilterValue=function(e){var t;return t=1===e?0:100*(e-1),Math.round(t)},t.prototype.getBlackAndWhiteData=function(e){for(var t=0;t<e.data.length;t+=4){var i=0;e.data[t]+e.data[t+1]+e.data[t+2]>383&&(i=255),e.data[t]=i,e.data[t+1]=i,e.data[t+2]=i,e.data[t+3]=255}return e},t.prototype.setBrightness=function(e){this.applyPenDraw(),this.adjustmentLevel.brightness=e,e=this.getFilterValue(e);var t=sf.base.extend({},this.cropObj,{},!0),i=this.getCurrentObj();i.objColl=sf.base.extend([],this.objColl,[],!0),i.pointColl=sf.base.extend([],this.pointColl,[],!0),i.afterCropActions=sf.base.extend([],this.afterCropActions,[],!0),this.updateAdjustment("brightness",e),this.updateUndoRedoColl("brightness",i,i.objColl,i.pointColl,t)},t.prototype.setContrast=function(e){this.applyPenDraw(),this.adjustmentLevel.contrast=e,e=this.getFilterValue(e),e*=100;var t=sf.base.extend({},this.cropObj,{},!0),i=this.getCurrentObj();i.objColl=sf.base.extend([],this.objColl,[],!0),i.pointColl=sf.base.extend([],this.pointColl,[],!0),i.afterCropActions=sf.base.extend([],this.afterCropActions,[],!0),this.updateAdjustment("contrast",e),this.updateUndoRedoColl("contrast",i,i.objColl,i.pointColl,t)},t.prototype.setHue=function(e){this.applyPenDraw(),this.adjustmentLevel.hue=e,e*=3;var t=sf.base.extend({},this.cropObj,{},!0),i=this.getCurrentObj();i.objColl=sf.base.extend([],this.objColl,[],!0),i.pointColl=sf.base.extend([],this.pointColl,[],!0),i.afterCropActions=sf.base.extend([],this.afterCropActions,[],!0),this.updateAdjustment("hue",e),this.updateUndoRedoColl("hue",i,i.objColl,i.pointColl,t)},t.prototype.setSaturation=function(e){this.applyPenDraw(),this.adjustmentLevel.saturation=e,e=this.getSaturationFilterValue(e),e*=100;var t=sf.base.extend({},this.cropObj,{},!0),i=this.getCurrentObj();i.objColl=sf.base.extend([],this.objColl,[],!0),i.pointColl=sf.base.extend([],this.pointColl,[],!0),i.afterCropActions=sf.base.extend([],this.afterCropActions,[],!0),this.updateAdjustment("saturation",e),this.updateUndoRedoColl("saturation",i,i.objColl,i.pointColl,t)},t.prototype.setOpacity=function(e){this.applyPenDraw(),this.adjustmentLevel.opacity=e,e>=50?e/=100:40===e?e=.45:30===e?e=.4:20===e?e=.35:10===e?e=.3:0===e&&(e=.25);var t=sf.base.extend({},this.cropObj,{},!0),i=this.getCurrentObj();i.objColl=sf.base.extend([],this.objColl,[],!0),i.pointColl=sf.base.extend([],this.pointColl,[],!0),i.afterCropActions=sf.base.extend([],this.afterCropActions,[],!0),this.updateAdjustment("opacity",e),this.updateUndoRedoColl("opacity",i,i.objColl,i.pointColl,t)},t.prototype.setBlur=function(e){this.applyPenDraw(),this.adjustmentLevel.blur=e,e/=20,e+=.5;var t=sf.base.extend({},this.cropObj,{},!0),i=this.getCurrentObj();i.objColl=sf.base.extend([],this.objColl,[],!0),i.pointColl=sf.base.extend([],this.pointColl,[],!0),i.afterCropActions=sf.base.extend([],this.afterCropActions,[],!0),this.updateAdjustment("blur",e),this.updateUndoRedoColl("blur",i,i.objColl,i.pointColl,t)},t.prototype.setExposure=function(e){this.applyPenDraw(),this.adjustmentLevel.exposure=e,e=this.getFilterValue(e);var t=sf.base.extend({},this.cropObj,{},!0),i=this.getCurrentObj();i.objColl=sf.base.extend([],this.objColl,[],!0),i.pointColl=sf.base.extend([],this.pointColl,[],!0),i.afterCropActions=sf.base.extend([],this.afterCropActions,[],!0),this.updateAdjustment("exposure",e),this.updateUndoRedoColl("exposure",i,i.objColl,i.pointColl,t)},t.prototype.setFilter=function(e){e=e.toLowerCase(),this.applyPenDraw();var t=this.currentFilter,i=sf.base.extend({},this.cropObj,{},!0),s=this.getCurrentObj();s.objColl=sf.base.extend([],this.objColl,[],!0),s.pointColl=sf.base.extend([],this.pointColl,[],!0),s.afterCropActions=sf.base.extend([],this.afterCropActions,[],!0),this.updateAdjustment(e,null),this.updateUndoRedoColl(e,s,s.objColl,s.pointColl,i,null,null,t)},t.prototype.renderImage=function(e){var t=this.lowerContext.filter;this.applyActObj(),this.upperContext.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),this.lowerContext.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),e?this.iterateRotateFlipColl(this.lowerContext,"initial"):this.updateCurrentTransformedState("initial"),this.updateBrightnessFilter(),this.setDestPointsForFlipState(),this.lowerContext.drawImage(this.baseImg,this.srcLeft,this.srcTop,this.srcWidth,this.srcHeight,this.destLeft,this.destTop,this.destWidth,this.destHeight),this.setDestPointsForFlipState(),e?this.iterateRotateFlipColl(this.lowerContext,"reverse"):this.updateCurrentTransformedState("reverse"),this.lowerContext.filter="none",this.iterateObjColl(),this.freehandRedraw(this.lowerContext),this.lowerContext.filter=t,(this.isCircleCrop||!sf.base.isNullOrUndefined(this.currSelectionPoint)&&"crop-circle"===this.currSelectionPoint.shape)&&this.cropCircle(this.lowerContext)},t.prototype.updateTextBox=function(e){this.upperContext.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),this.lowerContext.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),this.redrawImgWithObj(),this.textArea.style.display="block",this.textArea.style.fontFamily=e.textSettings.fontFamily,this.textArea.style.fontSize=e.textSettings.fontSize+"px",this.textArea.style.color=e.strokeSettings.strokeColor,this.textArea.style.fontWeight=e.textSettings.bold?"bold":"normal",this.textArea.style.fontStyle=e.textSettings.italic?"italic":"normal",this.textArea.style.border="2px solid "+this.themeColl[this.theme].primaryColor,this.textArea.value=e.keyHistory,this.activeObj=sf.base.extend({},e,{},!0),this.updateFontStyles(),this.textArea.style.width=this.activeObj.activePoint.width+"px"},t.prototype.drawNewSelection=function(e,t,i,s,n){var o,r="crop-"+e;"crop-custom"===r.toLowerCase()?(""===this.currObjType.shape&&this.drawCustomSelection("crop-custom"),t&&i&&(this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.currObjType.shape=this.activeObj.shape=r.toLowerCase(),this.activeObj.activePoint.startX=t,this.activeObj.activePoint.startY=i,this.activeObj.activePoint.endX=this.lowerCanvas.width,this.activeObj.activePoint.endY=this.lowerCanvas.height,this.activeObj.activePoint.width=this.activeObj.activePoint.endX-this.activeObj.activePoint.startX,this.activeObj.activePoint.height=this.activeObj.activePoint.endY-this.activeObj.activePoint.startY,this.drawObject("duplicate"))):"crop-canvas"===r.toLowerCase()?(this.upperCanvas.style.display="none",this.dragCanvas=!0):(this.currObjType.isCustomCrop=!1,this.currObjType.shape=r.toLowerCase(),s&&n?o={startX:t,startY:i,endX:t+s,endY:i+n,width:s,height:n}:s&&"crop-circle"===r&&(o={startX:t,startY:i,endX:t+s,endY:i+s,width:s,height:s}),this.activeObj.shape=r.toLowerCase(),this.drawObject("duplicate",null,!0,o))},t.prototype.setDestPointsForFlipState=function(){""!==this.getCurrentPanRegion()&&("horizontal"===this.getCurrentPanRegion()?this.destLeft=this.lowerCanvas.clientWidth-(this.destWidth+this.destLeft):("vertical"===this.getCurrentPanRegion()||(this.destLeft=this.lowerCanvas.clientWidth-(this.destWidth+this.destLeft)),this.destTop=this.lowerCanvas.clientHeight-(this.destHeight+this.destTop)))},t.prototype.performUndoDefaultAction=function(e){this.lowerContext.filter=e.previousObj.filter,this.objColl=[],this.pointColl=[],this.freehandCounter=0,this.setCurrentObj(e.previousObj),this.destLeft=e.previousObj.destPoints.startX,this.destTop=e.previousObj.destPoints.startY;var t=sf.base.extend({},this.activeObj,{},!0);this.objColl=sf.base.extend([],e.previousObjColl,[],!0),this.pointColl=sf.base.extend([],e.previousPointColl,[],!0),this.freehandCounter=this.pointColl.length,this.lowerContext.filter="none",this.iterateObjColl(),this.freehandRedraw(this.lowerContext),this.lowerContext.filter=e.previousObj.filter,this.activeObj=t,this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),0!==this.activeObj.activePoint.width&&0!==this.activeObj.activePoint.height&&this.drawObject("duplicate")},t.prototype.setAdjustment=function(e){var t,i,s=this.lowerContext.filter.split(" ");switch(e){case"brightness":i=s[0].split("("),t=parseFloat(i[1].split(")")[0]),this.adjustmentLevel.brightness=this.setFilterValue(t);break;case"contrast":i=s[1].split("("),t=parseFloat(i[1].split(")")[0]),t/=100,this.adjustmentLevel.contrast=this.setFilterValue(t);break;case"hue":i=s[2].split("("),t=parseFloat(i[1].split(")")[0]),t/=3,this.adjustmentLevel.hue=t;break;case"saturation":i=s[3].split("("),t=parseFloat(i[1].split(")")[0]),t/=100,this.adjustmentLevel.saturation=this.setSaturationFilterValue(t);break;case"opacity":i=s[4].split("("),.45===(t=parseFloat(i[1].split(")")[0]))?t=40:.4===t?t=30:.35===t?t=20:.3===t?t=10:.25===t?t=0:t*=100,this.adjustmentLevel.opacity=t;break;case"blur":i=s[5].split("("),t=parseFloat(i[1].split(")")[0]),t*=20,this.adjustmentLevel.blur=t;break;case"exposure":i=s[0].split("("),t=parseFloat(i[1].split(")")[0]),this.adjustmentLevel.exposure=this.setFilterValue(t)}},t.prototype.updateFilter=function(e,t){if("default"===e||"chrome"===e||"cold"===e||"warm"===e||"grayscale"===e||"blackandwhite"===e||"sepia"===e||"invert"===e||"sharpen"===e){var i=this.element.querySelector(".e-contextual-toolbar-wrapper .e-toolbar-item.e-selected");i&&i.classList.remove("e-selected");var s=document.getElementById(this.element.id+"_"+e+"Canvas");s&&s.parentElement.classList.add("e-selected"),sf.base.isNullOrUndefined(t)?this.currentFilter=this.element.id+"_"+e:this.currentFilter=t}},t.prototype.clearSelection=function(){!this.disabled&&this.isImageLoaded&&(this.togglePen=!1,this.refreshActiveObj(),this.dragElement="",this.dragPoint.startX=this.dragPoint.startY=this.dragPoint.endX=this.dragPoint.endY=0,this.currObjType.shape="",this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.currObjType.isActiveObj=!0,this.currObjType.isCustomCrop=!1,this.upperCanvas.style.cursor="default")},t.prototype.crop=function(){var e=this,t=!1;if(!this.disabled&&this.isImageLoaded){var i;this.currObjType.isUndoAction&&this.refreshUndoRedoColl();var s={cancel:!1,startPoint:{x:this.activeObj.activePoint.startX,y:this.activeObj.activePoint.startY},endPoint:{x:this.activeObj.activePoint.endX,y:this.activeObj.activePoint.endY}};this.dotnetRef.invokeMethodAsync("CropEventAsync","OnCrop",s).then((function(){if(!s.cancel&&(void 0!==e.activeObj.shape&&(i=e.activeObj.shape.split("-")),!e.disabled&&void 0!==e.activeObj.horTopLine&&(e.currObjType.isCustomCrop||"crop"===i[0]))){t=!0;var n=sf.base.extend({},e.cropObj,{},!0),o=e.getCurrentObj();o.objColl=sf.base.extend([],e.objColl,[],!0),o.pointColl=sf.base.extend([],e.pointColl,[],!0),o.afterCropActions=sf.base.extend([],e.afterCropActions,[],!0),e.cropImg(),e.zoomFactor=0,e.enableDisableToolbarBtn(),e.updateUndoRedoColl("crop",o,o.objColl,o.pointColl,n)}}))}return t},t.prototype.flip=function(e){var t=this;if(!this.disabled&&this.isImageLoaded){var i={direction:e,cancel:!1};this.dotnetRef.invokeMethodAsync("FlipEventAsync","OnFlip",i).then((function(){if(!i.cancel){var s,n=sf.base.extend({},t.cropObj,{},!0);sf.base.isNullOrUndefined(t.transformCurrentObj)&&((s=t.getCurrentObj()).objColl=sf.base.extend([],t.objColl,null,!0),s.pointColl=sf.base.extend({},t.pointColl,null,!0),s.afterCropActions=sf.base.extend([],t.afterCropActions,[],!0)),t.afterCropActions.push("horizontal"===e.toLowerCase()?"horizontalflip":"verticalflip");var o,r=[];sf.base.isNullOrUndefined(t.activeObj.activePoint)||(void 0!==t.activeObj.shape&&(r=t.activeObj.shape.split("-")),(t.currObjType.isCustomCrop||"crop"===r[0])&&(o=t.currObjType.isCustomCrop?"custom":r[1],t.updateImageRatioForActObj(),t.objColl.push(t.activeObj),t.refreshActiveObj())),t.redrawActObj(),t.lowerContext.clearRect(0,0,t.lowerCanvas.height,t.lowerCanvas.width),t.lowerContext.clearRect(0,0,t.lowerCanvas.width,t.lowerCanvas.height),t.upperContext.clearRect(0,0,t.lowerCanvas.height,t.lowerCanvas.width),t.upperContext.clearRect(0,0,t.lowerCanvas.width,t.lowerCanvas.height);var a=sf.base.extend([],t.objColl,[],!0),l=sf.base.extend({},t.activeObj,{},!0);t.objColl=[],t.refreshActiveObj(),t.isReverseFlip||t.updateCurrentTransformedState("initial"),"horizontal"===e.toLowerCase()?(t.updateFlipState(e.toLowerCase()),"horizontal"===t.currFlipState.toLowerCase()?t.currFlipState="":t.currFlipState="horizontal"):(t.updateFlipState(e.toLowerCase()),"vertical"===t.currFlipState.toLowerCase()?t.currFlipState="":t.currFlipState="vertical"),t.rotatedFlipCropSelection&&(t.destLeft+=t.totalPannedInternalPoint.x,t.destTop+=t.totalPannedInternalPoint.y);var h=t.lowerContext.filter;t.updateBrightnessFilter(),t.lowerContext.drawImage(t.baseImg,t.srcLeft,t.srcTop,t.srcWidth,t.srcHeight,t.destLeft,t.destTop,t.destWidth,t.destHeight),t.lowerContext.filter=h,t.updateFlipState(e.toLowerCase()),t.isReverseFlip||(t.updateCurrentTransformedState("reverse"),t.updateFlipColl(e.toLocaleLowerCase()),t.rotateFlipColl.push(e.toLowerCase())),1===t.rotateFlipColl.length&&(""===t.getCurrentPanRegion()?t.setClientTransformedDimension():t.setDestPointsForFlipState()),t.isCircleCrop&&t.cropCircle(t.lowerContext),t.objColl=sf.base.extend([],a,[],!0),t.activeObj=sf.base.extend({},l,{},!0);for(var d=0,c=t.objColl.length;d<c;d++)0===t.objColl[d].flipObjColl.length?t.objColl[d].flipObjColl.push(e):t.objColl[d].flipObjColl[t.objColl[d].flipObjColl.length-1]===e?t.objColl[d].flipObjColl.pop():t.objColl[d].flipObjColl.push(e);t.redrawObj(e.toLowerCase());var p=t.lowerContext.filter;t.lowerContext.filter=t.getDefaultFilter(),t.iterateObjColl(),sf.base.isNullOrUndefined(t.currSelectionPoint)||(a=sf.base.extend([],t.objColl,[],!0),t.objColl=[],t.objColl.push(t.currSelectionPoint),t.redrawObj(e.toLowerCase()),t.currSelectionPoint=sf.base.extend({},t.objColl[0],{},!0),t.objColl=a),"horizontal"===e.toLowerCase()||"vertical"===e.toLowerCase()?(t.flipFreehandrawColl(e.toLowerCase()),t.freehandRedraw(t.lowerContext)):t.freehandRedraw(t.lowerContext),t.lowerContext.filter=p,t.refreshActiveObj(),t.updateCurrSelectionPoint(e.toLowerCase()),!t.isUndoRedo&&sf.base.isNullOrUndefined(t.transformCurrentObj)&&t.updateUndoRedoColl("flip",s,s.objColl,s.pointColl,n),t.isUndoRedo=!1,t.clearOuterCanvas(t.lowerContext),t.clearOuterCanvas(t.upperContext),sf.base.isNullOrUndefined(o)||(t.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),t.activeObj=sf.base.extend({},t.objColl[t.objColl.length-1],{},!0),t.objColl.pop(),t.drawObject("duplicate",t.activeObj)),t.rotateFlipColl=t.alignRotateFlipColl(t.rotateFlipColl,!0)}}))}},t.prototype.getImageData=function(){return this.lowerContext.getImageData(this.destLeft,this.destTop,this.destWidth,this.destHeight)},t.prototype.open=function(e){if(!this.disabled){sf.popups.showSpinner(this.element),this.element.style.opacity="0.5";var t=document.querySelector("#"+this.element.id+"_currPos");if(t&&(t.style.display="none"),0===this.defToolbarItems.length&&sf.base.isNullOrUndefined(document.getElementById(this.element.id+"_toolbar"))&&(this.toolbarHeight=0),sf.base.isNullOrUndefined(this.toolbarTemplate)&&(this.reset(),this.update()),this.degree=0,this.zoomFactor=0,this.isImageLoaded=!1,this.currSelectionPoint=null,"string"===i(e)){var s=e.split(".");s.length>1?(s=s[s.length-2].split("/"),this.fileName=s[s.length-1]):this.fileName="ImageEditor",this.imageOnLoad(e)}else this.fileName="ImageEditor",this.lowerCanvas=document.querySelector("#"+this.element.id+"_lowerCanvas"),this.upperCanvas=document.querySelector("#"+this.element.id+"_upperCanvas"),this.lowerContext=this.lowerCanvas.getContext("2d"),this.upperContext=this.upperCanvas.getContext("2d"),this.lowerContext.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.inMemoryContext.clearRect(0,0,this.inMemoryCanvas.width,this.inMemoryCanvas.height),this.inMemoryCanvas.width=this.baseImg.width=e.width,this.inMemoryCanvas.height=this.baseImg.height=e.height,this.inMemoryContext.putImageData(e,0,0),this.baseImg.src=this.inMemoryCanvas.toDataURL()}},t.prototype.reset=function(){this.disabled||(this.inMemoryContext.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),this.inMemoryContext.clearRect(0,0,this.lowerCanvas.height,this.lowerCanvas.width),this.lowerContext.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),this.lowerContext.clearRect(0,0,this.lowerCanvas.height,this.lowerCanvas.width),this.upperContext.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),this.upperContext.clearRect(0,0,this.lowerCanvas.height,this.lowerCanvas.width),this.lowerContext.filter=this.getDefaultFilter(),this.refreshActiveObj(),this.objColl=[],this.isImageLoaded=!1,this.degree=this.undoRedoStep=0,this.keyHistory=this.currFlipState="",this.upperCanvas.style.display="none",this.togglePan=this.togglePen=!1,this.upperCanvas.style.cursor=this.lowerCanvas.style.cursor="default",this.undoRedoColl=[],this.dragCanvas=this.isUndoRedo=!1,this.tempKeyHistory="",this.lowerContext.lineWidth=this.upperContext.lineWidth=void 0,this.touchEndPoint={},this.currentToolbar="main",this.textStartPoints={x:0,y:0},this.fontSizeColl=[],this.textArea.value=this.textArea.textContent="",this.textArea.style.display="none",this.strokeSettings={strokeColor:"#fff",fillColor:"",strokeWidth:null},this.textSettings={text:"Enter Text",fontFamily:"Arial",fontSize:null,fontRatio:null,bold:!1,italic:!1,underline:!1},this.tempStrokeSettings={strokeColor:"#fff",fillColor:"",strokeWidth:null},this.tempTextSettings={text:"Enter Text",fontFamily:"Arial",fontSize:null,fontRatio:null,bold:!1,italic:!1,underline:!1},this.timer=void 0,this.penStrokeWidth=void 0,this.currObjType.isUndoAction=!1,this.undoRedoStep=0,this.tempObjColl=void 0,this.adjustmentLevel={brightness:0,contrast:0,hue:0,opacity:100,saturation:0,blur:0,exposure:0,sharpen:!1,bw:!1},this.tempAdjustmentLevel={brightness:0,contrast:0,hue:0,opacity:100,saturation:0,blur:0,exposure:0,sharpen:!1,bw:!1},this.canvasFilter=this.currentFilter=this.tempAdjustmentValue="",this.lowerContext.filter=this.initialAdjustmentValue=this.adjustmentValue=this.getDefaultFilter(),this.destLeft=this.destTop=this.srcLeft=this.srcTop=0,this.destWidth=this.destHeight=this.srcWidth=this.srcHeight=null,this.currSelectionPoint=null,this.cropDestPoints={startX:0,startY:0,width:0,height:0},this.panDown=null,this.panMove=null,this.tempPanMove=null,this.flipColl=[],this.freehandDrawObj.time=this.freehandDrawObj.lastVelocity=0,this.freehandDrawObj.pointX=this.freehandDrawObj.pointY=0,this.points=[],this.pointColl={},this.pointCounter=this.freehandCounter=this.tempFreehandCounter=this.tempCurrentFreehandDrawIndex=0,this.isFreehandDrawing=!1,this.isReverseRotate=this.isReverseFlip=this.isPreventDragging=this.isRotateZoom=!1,this.currentPannedPoint=null,this.fileType=void 0,this.rotateFlipColl=[],this.isCircleCrop=!1,this.isCropTab=!1,this.rotatedDestPoints={startX:0,startY:0,width:0,height:0},this.croppedDegree=0,this.freehandDrawHoveredIndex=this.freehandDrawSelectedIndex=null,this.isFreehandDrawingPoint=this.isFreehandDrawEditing=!1,this.tempFreeHandDrawEditingStyles={strokeColor:null,fillColor:null,strokeWidth:null},this.totalPannedInternalPoint={x:0,y:0},this.totalPannedClientPoint={x:0,y:0},this.lowerCanvas.style.left=this.upperCanvas.style.left="",this.lowerCanvas.style.top=this.upperCanvas.style.top="",this.lowerCanvas.style.maxWidth=this.upperCanvas.style.maxWidth="",this.lowerCanvas.style.maxHeight=this.upperCanvas.style.maxHeight="",this.currentSelectionPoint=null,this.totalPannedPoint={x:0,y:0},this.fileName="",this.isBrightnessAdjusted=this.isInitialLoading=!1,this.defaultZoomFactor=this.cropZoomFactor=this.zoomFactor=0,this.tempActObj=null,this.currentMouseMovePoint={x:0,y:0},this.selectedFreehandColor="#42a5f5",this.isFreehandDrawCustomized=!1,this.isShapeInserted=!1,this.isAllowCropPan=!1,this.currObjType={shape:"",isDragging:!1,isActiveObj:!1,isText:!1,isInitialText:!1,isLine:!1,isInitialLine:!1,isCustomCrop:!1,isZoomed:!1,isUndoZoom:!1,isUndoAction:!1,isFiltered:!1,isSave:!1},this.cropObj={cropZoom:0,defaultZoom:0,totalPannedPoint:{x:0,y:0},totalPannedClientPoint:{x:0,y:0},totalPannedInternalPoint:{x:0,y:0},tempFlipPanPoint:{x:0,y:0},activeObj:{},rotateFlipColl:[],degree:0,currFlipState:"",destPoints:{startX:0,startY:0,width:0,height:0},srcPoints:{startX:0,startY:0,width:0,height:0},filter:""},this.afterCropActions=[],this.isCancelAction=this.preventZoomBtn=this.isFreehandPointMoved=!1,this.isTouch=!1,this.freehandDownPoint={x:0,y:0},this.tempFlipPanPoint={x:0,y:0},this.currentFreehandDrawIndex=0,this.tempCurrentFreehandDrawIndex=0,this.cancelObjColl=[],this.cancelPointColl=[],this.freehandDrawSelectedId=null,this.transformCurrentObj=null,this.rotatedFlipCropSelection=!1,this.panStartObj=null,this.currDestinationPoint=null,this.updateCanvas(),this.enableDisableToolbarBtn())},t.prototype.rotate=function(e){var t=this,i=!1;if(!this.disabled&&this.isImageLoaded&&e%90==0){var s={degree:e,cancel:!1};this.dotnetRef.invokeMethodAsync("RotateEventAsync","OnRotate",s).then((function(){if(!s.cancel){i=!0;var n=sf.base.extend({},t.cropObj,{},!0),o=void 0;sf.base.isNullOrUndefined(t.transformCurrentObj)&&((o=t.getCurrentObj()).objColl=sf.base.extend([],t.objColl,null,!0),o.pointColl=sf.base.extend({},t.pointColl,null,!0),o.afterCropActions=sf.base.extend([],t.afterCropActions,[],!0)),t.afterCropActions.push(90===e?"rotateRight":"rotateLeft");var r=[],a=void 0;sf.base.isNullOrUndefined(t.activeObj.activePoint)||sf.base.isNullOrUndefined(t.activeObj.shape)||(void 0!==t.activeObj.shape&&(r=t.activeObj.shape.split("-")),(t.currObjType.isCustomCrop||"crop"===r[0])&&(a=t.currObjType.isCustomCrop?"custom":r[1],t.updateImageRatioForActObj(),t.objColl.push(t.activeObj),t.refreshActiveObj())),t.redrawActObj(),t.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),t.drawRotatedImage(e),t.clearOuterCanvas(t.lowerContext),t.clearOuterCanvas(t.upperContext),sf.base.isNullOrUndefined(a)||(t.upperContext.clearRect(0,0,t.upperCanvas.width,t.upperCanvas.height),t.activeObj=sf.base.extend({},t.objColl[t.objColl.length-1],{},!0),t.objColl.pop(),t.drawObject("duplicate",t.activeObj)),!t.isUndoRedo&&sf.base.isNullOrUndefined(t.transformCurrentObj)&&t.updateUndoRedoColl("rotate",o,o.objColl,o.pointColl,n),t.isUndoRedo=!1,t.rotateFlipColl=t.alignRotateFlipColl(t.rotateFlipColl,!0)}}))}return i},t.prototype.export=function(e,t){var i=this;if(!this.disabled&&this.isImageLoaded){this.isFreehandDrawEditing&&this.applyFreehandDraw(),this.togglePen&&(this.currObjType.isZoomed=!0,this.apply()),"block"===this.textArea.style.display&&this.redrawActObj(),this.applyActObj(),this.lowerContext.filter=this.canvasFilter,e=e||"Png",this.redrawActObj();var s={cancel:!1,fileName:t||this.fileName,fileType:e},n={fileName:t||this.fileName,fileType:e};this.trigger("beforeSave",s,(function(s){s.cancel||(i.currObjType.isSave=!0,t=s.fileName?s.fileName:t,"svg"===e.toLowerCase()?(t=t||i.fileName,i.toSVGImg(t)):(e.toLowerCase(),t=t||i.fileName,i.toBlobFn(t,e.toLowerCase())),i.dotnetRef.invokeMethodAsync("SavedEventAsync","Saved",n).then((function(){i.lowerCanvas.style.left=i.upperCanvas.style.left="",i.lowerCanvas.style.top=i.upperCanvas.style.top="",i.lowerCanvas.style.maxWidth=i.upperCanvas.style.maxWidth="",i.lowerCanvas.style.maxHeight=i.upperCanvas.style.maxHeight=""})))}))}},t.prototype.select=function(e,t,i,s,n){if(!this.disabled&&this.isImageLoaded){this.zoomFactor>0&&!sf.base.isNullOrUndefined(this.activeObj.shape)&&"crop"===this.activeObj.shape.split("-")[0]&&sf.base.isNullOrUndefined(this.currentSelectionPoint)&&(this.currentSelectionPoint=sf.base.extend({},this.activeObj,{},!0));var o=!1,r=void 0;void 0!==this.activeObj.shape&&(r=this.activeObj.shape.split("-")),(void 0===r&&this.currObjType.isCustomCrop||void 0!==r&&"crop"===r[0])&&(o=!0);var a=sf.base.extend({},this.cropObj,{},!0),l=this.getCurrentObj();if(l.objColl=sf.base.extend([],this.objColl,[],!0),l.pointColl=sf.base.extend([],this.pointColl,[],!0),l.afterCropActions=sf.base.extend([],this.afterCropActions,[],!0),this.redrawActObj(),this.refreshActiveObj(),this.keyHistory="",this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.upperCanvas.style.display="block",!sf.base.isNullOrUndefined(this.currSelectionPoint)||this.defaultZoomFactor>0||0!==this.degree&&0!==this.totalPannedInternalPoint.x&&0!==this.totalPannedInternalPoint.y&&!o){if(this.isCircleCrop=!1,this.defaultZoomFactor>0){var h=this.zoomFactor=this.defaultZoomFactor;this.isCropTab=!1;for(var d=this.isUndoRedo,c=0;c<10*h;c++)this.isUndoRedo=!0,this.zoom(-.1);this.isUndoRedo=d,this.resetPanPoints()}this.cancelObjColl=sf.base.extend([],this.objColl,[],!0),this.cancelPointColl=sf.base.extend([],this.pointColl,[],!0),this.updateObjAndFreeHandDrawColl(),this.isCropTab=!0,this.setCurrSelectionPoints(!0),this.zoomFactor=this.cropZoomFactor,sf.base.isNullOrUndefined(this.cropObj.activeObj.shape)?this.drawNewSelection(e,t,i,s,n):this.updateUndoRedoColl("crop-selection",l,l.objColl,l.pointColl,a)}else"custom"===e&&(this.currObjType.shape=""),this.drawNewSelection(e,t,i,s,n)}},t.prototype.freeHandDraw=function(e){e?(this.points=[],this.refreshActiveObj(),this.togglePen=!0,this.upperCanvas.style.cursor="crosshair",this.upperCanvas.style.display="block",sf.base.isNullOrUndefined(this.activeObj.strokeSettings)&&(this.activeObj.strokeSettings=this.strokeSettings),sf.base.isNullOrUndefined(this.activeObj.strokeSettings.strokeWidth)&&(this.activeObj.strokeSettings.strokeWidth=4)):(this.upperCanvas.style.cursor="default",this.apply(),this.currentToolbar="main",this.isFreehandDrawCustomized=!1)},t.prototype.freehandDraw=function(e){!this.disabled&&this.isImageLoaded&&this.freeHandDraw(e)},t.prototype.pan=function(e){!this.disabled&&this.isImageLoaded&&(e?(this.togglePan=!0,this.redrawActObj(),this.dragCanvas=!0,this.lowerCanvas.style.cursor=this.upperCanvas.style.cursor="grab",this.panDown=null):(this.dragCanvas=this.togglePan=this.currObjType.isCustomCrop=!1,this.lowerCanvas.style.cursor=this.upperCanvas.style.cursor="default"))},t.prototype.zoom=function(e){var t=this;if(!this.disabled&&this.isImageLoaded){if(0===this.zoomFactor&&e<0||this.zoomFactor>2&&e>0)return;var i,s;sf.base.isNullOrUndefined(this.pointZoom)||(i=(this.pointZoom.x-this.destLeft)/this.destWidth,s=(this.pointZoom.y-this.destTop)/this.destHeight);var n,o=void 0,r=!1;void 0!==this.activeObj.shape&&(o=this.activeObj.shape.split("-")),void 0!==o&&"crop"===o[0]?(n=sf.base.extend({},this.activeObj,{},!0),this.isCropTab=!0):sf.base.isNullOrUndefined(this.activeObj.shape)||"crop"===o[0]||(r=!0);var a=void 0,l=void 0;this.isCropTab&&!sf.base.isNullOrUndefined(n)?(l=this.cropZoomFactor,a={x:this.activeObj.activePoint.startX+this.activeObj.activePoint.width/2,y:this.activeObj.activePoint.startY+this.activeObj.activePoint.height/2}):(l=this.defaultZoomFactor,a={x:this.lowerCanvas.clientWidth/2,y:this.lowerCanvas.clientHeight/2});var h={zoomPoint:a,zoomLevel:l,cancel:!1};this.dotnetRef.invokeMethodAsync("ZoomEventAsync","OnZoom",h).then((function(){if(!h.cancel){var o=sf.base.extend({},t.cropObj,{},!0),a=t.getCurrentObj();a.objColl=sf.base.extend([],t.objColl,[],!0),a.pointColl=sf.base.extend([],t.pointColl,[],!0),a.afterCropActions=sf.base.extend([],t.afterCropActions,[],!0),t.redrawActObj(),t.refreshActiveObj(),t.upperContext.clearRect(0,0,t.lowerCanvas.width,t.lowerCanvas.height),t.lowerContext.filter=t.canvasFilter,t.upperCanvas.style.cursor="default";var l=sf.base.extend([],t.objColl,[],!0);if(t.isCropTab||(0!==t.degree&&(t.redrawActObj(),t.currentPannedPoint={x:0,y:0},t.rotatePan(!0,!0)),t.updateObjAndFreeHandDrawColl()),0===t.degree){if(t.drawZoomImgToCanvas(e,n),""!==t.getCurrentPanRegion()){t.tempFlipPanPoint.x+=t.totalPannedPoint.x,t.tempFlipPanPoint.y+=t.totalPannedPoint.y,l=sf.base.extend([],t.objColl,[],!0),t.objColl=[];var d=t.destLeft,c=t.destTop;t.setDestPointsForFlipState(),t.rotatedFlip(),t.destLeft=d,t.destTop=c,t.objColl=l,t.zoomObjColl(),t.zoomFreehandDrawColl(),t.updateObjAndFreeHandDrawColl()}0!==t.zoomFactor||t.isCropTab||(t.totalPannedPoint={x:0,y:0})}else if(t.updateObjAndFreeHandDrawColl(),t.totalPannedClientPoint={x:0,y:0},t.totalPannedInternalPoint={x:0,y:0},t.rotateZoom(e),""!==t.getCurrentPanRegion()){var p=t.lowerContext.filter;t.lowerContext.filter="none",t.zoomObjColl(),t.zoomFreehandDrawColl(),t.lowerContext.filter=p}if(""===t.getCurrentPanRegion()){p=t.lowerContext.filter;t.lowerContext.filter="none",t.zoomObjColl(),t.zoomFreehandDrawColl(),t.lowerContext.filter=p}(!sf.base.isNullOrUndefined(t.currSelectionPoint)&&"crop-circle"===t.currSelectionPoint.shape||t.isCircleCrop)&&t.cropCircle(t.lowerContext),t.clearOuterCanvas(t.lowerContext),t.refreshActiveObj(),sf.base.isNullOrUndefined(n)||(t.activeObj=sf.base.extend({},n,{},!0),t.drawObject("duplicate",t.activeObj),0===t.zoomFactor&&(t.currSelectionPoint=null)),!t.isUndoRedo&&sf.base.isNullOrUndefined(n)&&t.updateUndoRedoColl("zoom",a,a.objColl,a.pointColl,o),t.isUndoRedo=!1,t.autoEnablePan(),sf.base.isNullOrUndefined(n)||(t.activeObj=sf.base.extend({},n,{},!0)),"crop-custom"===t.activeObj.shape&&(t.currObjType.isCustomCrop=!0);var u=t.element.querySelector(".e-img-pan .e-btn");if(!sf.base.isNullOrUndefined(u)&&t.togglePan?u.classList.add("e-selected-btn"):sf.base.isNullOrUndefined(u)||u.classList.remove("e-selected-btn"),r&&(t.activeObj=sf.base.extend({},t.objColl[t.objColl.length-1],{},!0),t.objColl.pop(),t.drawObject("duplicate",t.activeObj)),t.enableDisableToolbarBtn(),!sf.base.isNullOrUndefined(t.pointZoom)){var f=t.isUndoRedo;if(t.isUndoRedo=!0,t.isUndoRedo=f,t.zoomFactor>0){d=t.destLeft,c=t.destTop;var g=sf.base.extend({},t.activeObj,{},!0);if(0===t.degree)t.destLeft=t.pointZoom.x-i*t.destWidth,t.destTop=t.pointZoom.y-s*t.destHeight,t.drawZoomPanImage(t.destLeft-d,t.destTop-c);else{var m=t.isCropTab;t.isCropTab=!0;var v=sf.base.extend([],t.objColl,[],!0),b=sf.base.extend([],t.pointColl,[],!0);t.objColl=[],t.pointColl=[],t.freehandCounter=0,t.currentPannedPoint={x:t.pointZoom.x-i*t.destWidth-d,y:t.pointZoom.y-s*t.destHeight-c},t.rotatePan(),t.isCropTab=m,t.objColl=v,t.pointColl=b,t.freehandCounter=t.pointColl.length,t.panObjColl(t.currentPannedPoint.x,t.currentPannedPoint.y,""),t.panFreehandDrawColl(t.currentPannedPoint.x,t.currentPannedPoint.y,"")}t.adjustPanning(g),t.activeObj=g,0!==t.activeObj.activePoint.width&&0!==t.activeObj.activePoint.height&&t.drawObject("duplicate",null,null,null,!0);var y,M=!1;void 0!==t.activeObj.shape&&(y=t.activeObj.shape.split("-")),void 0!==y&&"crop"===y[0]&&(M=!0),t.isUndoRedo||M||t.updateUndoRedoColl("zoom",a,a.objColl,a.pointColl,o),t.pointZoom=null}}}}))}},t.prototype.drawEllipse=function(e,t,i,s,n,o,r){var a=!1,l=this.isPointsInRange(e,t);if(!this.disabled&&this.isImageLoaded&&l){a=!0,this.redrawActObj(),this.activeObj.shape="ellipse","freehanddraw"===this.currObjType.shape&&(this.apply(),this.upperCanvas.style.cursor="default",this.currObjType.shape=""),this.currObjType.isCustomCrop=!1;var h={x:e,y:t};this.drawShape("ellipse",n,o,r,h,i,s)}return a},t.prototype.drawLine=function(e,t,i,s,n,o){var r=!1,a=this.isPointsInRange(e,t);if(!this.disabled&&this.isImageLoaded&&a){r=!0,this.redrawActObj(),this.activeObj.shape="line","freehanddraw"===this.currObjType.shape&&(this.apply(),this.upperCanvas.style.cursor="default",this.currObjType.shape=""),this.currObjType.isCustomCrop=!1;var l={x:e,y:t},h=i-e,d=s-t;this.drawShape("line",n,o,null,l,h,d)}return r},t.prototype.drawArrow=function(e,t,i,s,n,o){var r=!1,a=this.isPointsInRange(e,t);if(!this.disabled&&this.isImageLoaded&&a){r=!0,this.redrawActObj(),this.activeObj.shape="arrow","freehanddraw"===this.currObjType.shape&&(this.apply(),this.upperCanvas.style.cursor="default",this.currObjType.shape=""),this.currObjType.isCustomCrop=!1;var l={x:e,y:t},h=i-e,d=s-t;this.drawShape("arrow",n,o,null,l,h,d)}return r},t.prototype.drawRectangle=function(e,t,i,s,n,o,r){var a=!1,l=this.isPointsInRange(e,t);if(!this.disabled&&this.isImageLoaded&&l){a=!0,this.redrawActObj(),this.activeObj.shape="rectangle","freehanddraw"===this.currObjType.shape&&(this.apply(),this.upperCanvas.style.cursor="default",this.currObjType.shape=""),this.currObjType.isCustomCrop=!1;var h={x:e,y:t};this.drawShape("rectangle",n,o,r,h,i,s)}return a},t.prototype.drawText=function(e,t,i,s,n,o,r,a){var l=!1,h=this.isPointsInRange(e,t);return!this.disabled&&this.isImageLoaded&&h&&(l=!0,this.drawShapeText(i,s,n,o,r,a,e,t)),l},t.prototype.selectShape=function(e){var t=!1;if(!this.disabled&&this.isImageLoaded)if(this.applyActObj(),"shape"===e.split("_")[0]){for(var i=void 0,s=0;s<this.objColl.length;s++)if(this.objColl[s].currIndex===e){i=sf.base.extend({},this.objColl[s],{},!0);break}sf.base.isNullOrUndefined(i)?t=!1:(t=!0,this.activeObj=i,this.lowerContext.filter=this.canvasFilter,this.redrawShape(this.activeObj),"text"===this.activeObj.shape?this.updateToolbar(this.element.id,this.element,"text"):"pen"===this.activeObj.shape?this.updateToolbar(this.element.id,this.element,"pen"):"shapes"===this.activeObj.shape&&this.updateToolbar(this.element.id,this.element,"rectangle"))}else"pen"===e.split("_")[0]&&(this.isFreehandDrawEditing&&this.okBtn(),this.isFreehandDrawIndex(parseInt(e.split("_")[1],10)-1)?(t=!0,this.selectFreehandDraw(parseInt(e.split("_")[1],10)-1),this.updateToolbar(this.element.id,this.element,"pen")):t=!1);return t},t.prototype.deleteShape=function(e){if(!this.disabled&&this.isImageLoaded){if(this.applyActObj(),"shape"===e.split("_")[0]){for(var t=0;t<this.objColl.length;t++)if(this.objColl[t].currIndex===e){this.objColl.splice(t,1);break}}else"pen"===e.split("_")[0]&&this.isFreehandDrawIndex(parseInt(e.split("_")[1],10)-1)&&this.deleteFreehandDraw(parseInt(e.split("_")[1],10)-1,!0);this.lowerContext.filter=this.canvasFilter,this.lowerContext.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),this.redrawImgWithObj(),this.updateToolbar(this.element.id,this.element,"imageLoaded")}},t.prototype.getShapeSetting=function(e){var t;if(!this.disabled&&this.isImageLoaded)if(this.applyActObj(),"shape"===e.split("_")[0]){for(var i=void 0,s=0;s<this.objColl.length;s++)if(this.objColl[s].currIndex===e){i=sf.base.extend({},this.objColl[s],{},!0);break}t=this.getObjDetails(i)}else"pen"===e.split("_")[0]&&(t=this.getFreehandDrawDetails(parseInt(e.split("_")[1],10)-1));return t},t.prototype.getShapeSettings=function(){var e=[];if(!this.disabled&&this.isImageLoaded){this.applyActObj();for(var t=0;t<this.objColl.length;t++){var i=this.getObjDetails(this.objColl[t]);e.push(i)}for(t=0;t<this.freehandCounter;t++){i=this.getFreehandDrawDetails(t);e.push(i)}}return e},t.prototype.update=function(){var e=document.querySelector("#"+this.element.id+"_canvasWrapper");sf.base.isNullOrUndefined(e)||(e.style.width=this.element.offsetWidth-2+"px"),this.lowerCanvas.width=this.upperCanvas.width=this.element.offsetWidth-2,sf.base.Browser.isDevice?(sf.base.isNullOrUndefined(e)||(e.style.height=this.element.offsetHeight-2*this.toolbarHeight-5+"px"),this.lowerCanvas.height=this.upperCanvas.height=this.element.offsetHeight-2*this.toolbarHeight-5):(sf.base.isNullOrUndefined(e)||(e.style.height=this.element.offsetHeight-this.toolbarHeight-3+"px"),this.lowerCanvas.height=this.upperCanvas.height=this.element.offsetHeight-this.toolbarHeight-3),this.lowerContext.filter=this.canvasFilter=this.initialAdjustmentValue=this.adjustmentValue=this.getDefaultFilter(),this.lowerContext.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height)},t.prototype.finetuneImage=function(e,t){if(!this.disabled&&this.isImageLoaded){switch(e.toLowerCase()){case"brightness":this.setBrightness(t);break;case"contrast":this.setContrast(t);break;case"hue":this.setHue(t);break;case"saturation":this.setSaturation(t);break;case"opacity":this.setOpacity(t);break;case"blur":this.setBlur(t);break;case"exposure":this.setExposure(t)}this.canvasFilter=this.lowerContext.filter}},t.prototype.applyImageFilter=function(e){!this.disabled&&this.isImageLoaded&&(this.setFilter(e.toString()),this.canvasFilter=this.lowerContext.filter)},t.prototype.undo=function(){if(!this.disabled&&this.isImageLoaded&&this.undoRedoStep>0){sf.base.isNullOrUndefined(this.activeObj.activePoint)||0===this.activeObj.activePoint.width||(this.tempActObj=this.activeObj),this.refreshActiveObj(),this.undoRedoStep--,this.enableDisableToolbarBtn(),this.isUndoRedo=!0;var e=this.undoRedoColl[this.undoRedoStep];this.undoRedoColl.length===this.undoRedoStep?this.currObjType.isUndoAction=!1:this.currObjType.isUndoAction=!0,"textAreaCustomization"!==e.operation&&"block"===this.textArea.style.display&&(this.textArea.style.display="none"),this.isCancelAction=!0;var t=void 0;switch(this.cropObj=sf.base.extend({},e.previousCropObj,{},!0),this.afterCropActions=e.previousObj.afterCropActions,this.lowerContext.filter=this.canvasFilter=e.previousObj.filter,e.operation){case"shapeTransform":this.objColl=sf.base.extend([],e.previousObjColl,[],!0),this.lowerContext.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.isUndoRedo=!0,this.redrawImgWithObj(),this.refreshActiveObj();break;case"freehanddraw":this.pointColl=e.previousPointColl,this.freehandCounter=this.pointColl.length,this.lowerContext.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.isUndoRedo=!0,this.redrawImgWithObj();break;case"freehanddrawCustomized":this.pointColl=e.previousPointColl,this.lowerContext.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.isUndoRedo=!0,this.redrawImgWithObj();break;case"deleteFreehandDrawing":case"deleteObj":"deleteFreehandDrawing"===e.operation?(this.pointColl=e.previousPointColl,this.freehandCounter=this.pointColl.length):"deleteObj"===e.operation&&(this.objColl=e.previousObjColl),this.lowerContext.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.isUndoRedo=!0,this.redrawImgWithObj();break;case"textAreaCustomization":this.objColl=sf.base.extend([],e.previousObjColl,[],!0);for(var i=0;i<e.previousObjColl.length;i++){if(sf.base.isNullOrUndefined(this.tempActObj)){t=sf.base.extend({},e.previousObjColl[e.previousObjColl.length-1],{},!0),this.objColl.splice(i,1);break}if(this.tempActObj.currIndex===e.previousObjColl[i].currIndex){t=sf.base.extend({},e.previousObjColl[i],{},!0),this.objColl.splice(i,1);break}}sf.base.isNullOrUndefined(t)||this.updateTextBox(t);break;case"text":if(sf.base.isNullOrUndefined(this.tempActObj)||(this.activeObj=sf.base.extend({},this.tempActObj,{},!0)),0===e.previousObjColl.length&&1===this.objColl.length)this.tempActObj=sf.base.extend({},this.objColl[0],{},!0);else for(i=0;i<this.objColl.length;i++){if(!sf.base.isNullOrUndefined(this.objColl[i])&&sf.base.isNullOrUndefined(e.previousObjColl[i])){this.tempActObj=sf.base.extend({},this.objColl[i],{},!0);break}if(e.previousObjColl[i].currIndex!==this.objColl[i].currIndex){this.tempActObj=sf.base.extend({},this.objColl[i],{},!0);break}}this.activeObj=sf.base.extend({},this.tempActObj,{},!0),this.objColl=sf.base.extend([],e.previousObjColl,[],!0),this.lowerContext.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),this.isUndoRedo=!0,this.redrawImgWithObj(),sf.base.isNullOrUndefined(this.activeObj)||0===this.activeObj.activePoint.width||0===this.activeObj.activePoint.height?(this.textArea.style.display="block",this.textArea.value=e.previousText):this.drawObject("duplicate");break;default:this.performUndoDefaultAction(e),this.setAdjustment(e.operation),this.updateFilter(e.operation,e.filter)}this.clearOuterCanvas(this.lowerContext),this.isCircleCrop&&"crop"!==e.operation&&this.cropCircle(this.lowerContext),this.zoomFactor>0&&(this.dragCanvas=!0),this.isCancelAction=!1}},t.prototype.redo=function(){if(!this.disabled&&this.isImageLoaded&&this.undoRedoStep<this.undoRedoColl.length){this.undoRedoStep++,this.enableDisableToolbarBtn(),this.isUndoRedo=!0;var e=this.undoRedoColl[this.undoRedoStep-1];this.undoRedoColl.length===this.undoRedoStep?this.currObjType.isUndoAction=!1:this.currObjType.isUndoAction=!0,"textAreaCustomization"!==e.operation&&"block"===this.textArea.style.display&&(this.textArea.style.display="none"),this.isCancelAction=!0,this.cropObj=sf.base.extend({},e.currentCropObj,{},!0),this.afterCropActions=e.currentObj.afterCropActions,this.lowerContext.filter=this.canvasFilter=e.currentObj.filter;var t=void 0,i=void 0,s=void 0;switch(e.operation){case"shapeTransform":this.objColl=sf.base.extend([],e.currentObjColl,[],!0),this.lowerContext.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.isUndoRedo=!0,this.redrawImgWithObj(),this.refreshActiveObj();break;case"freehanddraw":this.pointColl=e.currentPointColl,this.freehandCounter=this.pointColl.length,this.lowerContext.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.isUndoRedo=!0,this.redrawImgWithObj();break;case"freehanddrawCustomized":this.pointColl=e.currentPointColl,this.lowerContext.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.isUndoRedo=!0,this.redrawImgWithObj();break;case"deleteFreehandDrawing":case"deleteObj":"deleteFreehandDrawing"===e.operation?(this.pointColl=e.currentPointColl,this.freehandCounter=this.pointColl.length):"deleteObj"===e.operation&&(this.objColl=e.currentObjColl),this.lowerContext.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),this.isUndoRedo=!0,this.redrawImgWithObj();break;case"textAreaCustomization":this.objColl=sf.base.extend([],e.currentObjColl,[],!0);for(var n=0;n<e.currentObjColl.length;n++){if(sf.base.isNullOrUndefined(this.tempActObj)){t=sf.base.extend({},e.currentObjColl[e.currentObjColl.length-1],{},!0),this.objColl.splice(n,1);break}if(this.tempActObj.currIndex===e.currentObjColl[n].currIndex){t=sf.base.extend({},e.currentObjColl[n],{},!0),this.objColl.splice(n,1);break}}sf.base.isNullOrUndefined(t)||this.updateTextBox(t);break;case"text":if(sf.base.isNullOrUndefined(this.tempActObj)||(this.activeObj=sf.base.extend({},this.tempActObj,{},!0)),0===e.previousObjColl.length&&1===this.objColl.length)this.tempActObj=sf.base.extend({},this.objColl[0],{},!0);else for(n=0;n<this.objColl.length;n++){if(!sf.base.isNullOrUndefined(this.objColl[n])&&sf.base.isNullOrUndefined(e.previousObjColl[n])){this.tempActObj=sf.base.extend({},this.objColl[n],{},!0);break}if(e.previousObjColl[n].currIndex!==this.objColl[n].currIndex){this.tempActObj=sf.base.extend({},this.objColl[n],{},!0);break}}this.objColl=sf.base.extend([],e.currentObjColl,[],!0),this.lowerContext.clearRect(0,0,this.lowerCanvas.width,this.lowerCanvas.height),this.isUndoRedo=!0,this.redrawImgWithObj(),sf.base.isNullOrUndefined(this.tempActObj)||(this.activeObj=sf.base.extend({},this.tempActObj,{},!0)),this.textArea.style.display="block",this.textArea.value=e.currentText,i=sf.base.extend([],this.undoRedoColl,[],!0),s=this.undoRedoStep,this.redrawActObj(),this.undoRedoColl=i,this.undoRedoStep=s,this.textArea.style.display="none",this.textArea.value="",this.redrawActObj();break;default:this.objColl=[],this.pointColl=[],this.freehandCounter=0,this.setCurrentObj(e.currentObj),this.destLeft=e.currentObj.destPoints.startX,this.destTop=e.currentObj.destPoints.startY,t=sf.base.extend({},this.activeObj,{},!0),this.objColl=sf.base.extend([],e.currentObjColl,[],!0),this.pointColl=sf.base.extend([],e.currentPointColl,[],!0),this.freehandCounter=this.pointColl.length,this.lowerContext.filter="none",this.iterateObjColl(),this.freehandRedraw(this.lowerContext),this.lowerContext.filter=e.currentObj.filter,this.activeObj=t,this.upperContext.clearRect(0,0,this.upperCanvas.width,this.upperCanvas.height),0!==this.activeObj.activePoint.width&&0!==this.activeObj.activePoint.height&&this.drawObject("duplicate"),this.setAdjustment(e.operation),this.updateFilter(e.operation)}this.clearOuterCanvas(this.lowerContext),this.isCircleCrop&&this.cropCircle(this.lowerContext),this.zoomFactor>0&&(this.dragCanvas=!0),this.isCancelAction=!1,this.undoRedoStep===this.undoRedoColl.length&&(this.isUndoRedo=!1)}},t.prototype.updateToolbar=function(e,t,i){switch(i){case"initial":this.updateMainToolbar(t,!1),this.updateRightToolbar(t,!1),this.updateColorToolbar(this.element);break;case"imageLoaded":this.updateMainToolbar(t,!0),this.updateRightToolbar(t,!0),t.querySelector(".e-ie-toolbar-check-btn")&&(t.querySelector(".e-ie-toolbar-check-btn").classList.add("e-hidden"),t.querySelector(".e-ie-toolbar-close-btn").classList.add("e-hidden")),t.querySelector(".e-ie-toolbar-zoomin")&&(t.querySelector(".e-ie-toolbar-zoomin").classList.remove("e-hidden"),t.querySelector(".e-ie-toolbar-zoomout").classList.remove("e-hidden")),t.querySelector(".e-ie-toolbar-undo")&&(t.querySelector(".e-ie-toolbar-undo").classList.remove("e-hidden"),t.querySelector(".e-ie-toolbar-redo").classList.remove("e-hidden")),t.querySelector(".e-ie-toolbar-e-pen-color")&&(t.querySelector(".e-ie-toolbar-e-pen-color").classList.add("e-hidden"),t.querySelector(".e-ie-toolbar-e-pen-size").classList.add("e-hidden")),t.querySelector(".e-ie-toolbar-annotation")&&(this.updateTextToolbar(t,!1),this.updateLineToolbar(t,!1),this.updateRectangleToolbar(t,!1)),this.updateContextualToolbar(t,!1);break;case"line":this.updateMainToolbar(t,!1),this.updateRectangleToolbar(t,!1),this.updateTextToolbar(t,!1),this.updateLineToolbar(t,!0),t.querySelector(".e-ie-toolbar-check-btn").classList.remove("e-hidden"),t.querySelector(".e-ie-toolbar-close-btn").classList.remove("e-hidden");break;case"text":this.updateMainToolbar(t,!1),this.updateRectangleToolbar(t,!1),this.updateTextToolbar(t,!0),this.updateLineToolbar(t,!1),t.querySelector(".e-ie-toolbar-check-btn").classList.remove("e-hidden"),t.querySelector(".e-ie-toolbar-close-btn").classList.remove("e-hidden");break;case"rectangle":case"ellipse":this.updateMainToolbar(t,!1),this.updateLineToolbar(t,!1),this.updateTextToolbar(t,!1),this.updateRectangleToolbar(t,!0),this.updateColorToolbar(this.element,this.activeObj.strokeSettings),t.querySelector(".e-ie-toolbar-check-btn").classList.remove("e-hidden"),t.querySelector(".e-ie-toolbar-close-btn").classList.remove("e-hidden");break;case"CropToolbar":t.querySelector(".e-ie-toolbar-check-btn").classList.remove("e-hidden"),t.querySelector(".e-ie-toolbar-close-btn").classList.remove("e-hidden"),t.querySelector(".e-ie-toolbar-annotation")&&t.querySelector(".e-ie-toolbar-annotation").classList.add("e-overlay"),t.querySelector(".e-ie-toolbar-transform")&&t.querySelector(".e-ie-toolbar-transform").classList.add("e-overlay"),t.querySelector(".e-ie-toolbar-finetune-btn")&&t.querySelector(".e-ie-toolbar-finetune-btn").classList.add("e-overlay"),t.querySelector(".e-ie-toolbar-filter-btn")&&t.querySelector(".e-ie-toolbar-filter-btn").classList.add("e-overlay");break;case"pen":this.updateMainToolbar(t,!1),t.querySelector(".e-ie-toolbar-e-pen-color").classList.remove("e-hidden"),t.querySelector(".e-ie-toolbar-e-pen-size").classList.remove("e-hidden"),t.querySelector(".e-ie-toolbar-check-btn").classList.remove("e-hidden"),t.querySelector(".e-ie-toolbar-close-btn").classList.remove("e-hidden")}},t.prototype.updateMainToolbar=function(e,t){if(t){if(e.querySelector(".e-ie-toolbar-crop")&&e.querySelector(".e-ie-toolbar-crop").classList.remove("e-hidden"),e.querySelector(".e-ie-toolbar-annotation")&&(e.querySelector(".e-ie-toolbar-annotation").classList.contains("e-overlay")&&e.querySelector(".e-ie-toolbar-annotation").classList.remove("e-overlay"),e.querySelector(".e-ie-toolbar-annotation").classList.remove("e-hidden")),e.querySelector(".e-ie-toolbar-transform")&&(e.querySelector(".e-ie-toolbar-transform").classList.contains("e-overlay")&&e.querySelector(".e-ie-toolbar-transform").classList.remove("e-overlay"),e.querySelector(".e-ie-toolbar-transform").classList.remove("e-hidden")),e.querySelector(".e-ie-toolbar-finetune-btn")&&(e.querySelector(".e-ie-toolbar-finetune-btn").classList.contains("e-overlay")&&e.querySelector(".e-ie-toolbar-finetune-btn").classList.remove("e-overlay"),e.querySelector(".e-ie-toolbar-finetune-btn").classList.remove("e-hidden")),e.querySelector(".e-ie-toolbar-filter-btn")&&(e.querySelector(".e-ie-toolbar-filter-btn").classList.contains("e-overlay")&&e.querySelector(".e-ie-toolbar-filter-btn").classList.remove("e-overlay"),e.querySelector(".e-ie-toolbar-filter-btn").classList.remove("e-hidden")),e.querySelector(".e-ie-toolbar-custom"))for(var i=e.querySelectorAll(".e-ie-toolbar-custom"),s=0;s<i.length;s++)i[s].classList.remove("e-hidden")}else e.querySelector(".e-ie-toolbar-crop")&&e.querySelector(".e-ie-toolbar-crop").classList.add("e-hidden"),e.querySelector(".e-ie-toolbar-annotation")&&e.querySelector(".e-ie-toolbar-annotation").classList.add("e-hidden"),e.querySelector(".e-ie-toolbar-transform")&&e.querySelector(".e-ie-toolbar-transform").classList.add("e-hidden"),e.querySelector(".e-ie-toolbar-finetune-btn")&&e.querySelector(".e-ie-toolbar-finetune-btn").classList.add("e-hidden"),e.querySelector(".e-ie-toolbar-filter-btn")&&e.querySelector(".e-ie-toolbar-filter-btn").classList.add("e-hidden")},t.prototype.updateRightToolbar=function(e,t){t?(e.querySelector(".e-ie-toolbar-reset-btn")&&e.querySelector(".e-ie-toolbar-reset-btn").classList.remove("e-hidden"),e.querySelector(".e-ie-toolbar-save-btn")&&e.querySelector(".e-ie-toolbar-save-btn").classList.remove("e-hidden")):(e.querySelector(".e-ie-toolbar-reset-btn")&&e.querySelector(".e-ie-toolbar-reset-btn").classList.add("e-hidden"),e.querySelector(".e-ie-toolbar-save-btn")&&e.querySelector(".e-ie-toolbar-save-btn").classList.add("e-hidden"))},t.prototype.updateRectangleToolbar=function(e,t){t?(e.querySelector(".e-ie-toolbar-e-shape-fill-color").classList.remove("e-hidden"),e.querySelector(".e-ie-toolbar-e-shape-color").classList.remove("e-hidden"),e.querySelector(".e-ie-toolbar-e-shape-size").classList.remove("e-hidden")):(e.querySelector(".e-ie-toolbar-e-shape-fill-color").classList.add("e-hidden"),e.querySelector(".e-ie-toolbar-e-shape-color").classList.add("e-hidden"),e.querySelector(".e-ie-toolbar-e-shape-size").classList.add("e-hidden"))},t.prototype.updateLineToolbar=function(e,t){t?(e.querySelector(".e-ie-toolbar-e-line-color").classList.remove("e-hidden"),e.querySelector(".e-ie-toolbar-e-line-size").classList.remove("e-hidden")):(e.querySelector(".e-ie-toolbar-e-line-color").classList.add("e-hidden"),e.querySelector(".e-ie-toolbar-e-line-size").classList.add("e-hidden"))},t.prototype.updateTextToolbar=function(e,t){t?(e.querySelector(".e-ie-toolbar-e-font-family").classList.remove("e-hidden"),e.querySelector(".e-ie-toolbar-e-font-style").classList.remove("e-hidden"),e.querySelector(".e-ie-toolbar-e-font-size").classList.remove("e-hidden"),e.querySelector(".e-ie-toolbar-e-font-color").classList.remove("e-hidden")):(e.querySelector(".e-ie-toolbar-e-font-family").classList.add("e-hidden"),e.querySelector(".e-ie-toolbar-e-font-style").classList.add("e-hidden"),e.querySelector(".e-ie-toolbar-e-font-size").classList.add("e-hidden"),e.querySelector(".e-ie-toolbar-e-font-color").classList.add("e-hidden"))},t.prototype.updateColorToolbar=function(e,t){if(t){e.querySelector(".e-ie-toolbar-e-font-color .e-dropdownbtn-preview").style.background=t.strokeColor,e.querySelector(".e-ie-toolbar-e-shape-color .e-dropdownbtn-preview").style.background=t.strokeColor,e.querySelector(".e-ie-toolbar-e-pen-color .e-dropdownbtn-preview").style.background=t.strokeColor,e.querySelector(".e-ie-toolbar-e-line-color .e-dropdownbtn-preview").style.background=t.strokeColor,e.querySelector(".e-ie-toolbar-e-shape-fill-color .e-dropdownbtn-preview").style.background=t.fillColor;var i=this.getStrokeWidth(t.strokeWidth);this.dotnetRef.invokeMethodAsync("UpdateColorValue",t.strokeColor,t.fillColor,i)}else e.querySelector(".e-ie-toolbar-e-font-color .e-dropdownbtn-preview").style.background="#fff",e.querySelector(".e-ie-toolbar-e-shape-color .e-dropdownbtn-preview").style.background="#fff",e.querySelector(".e-ie-toolbar-e-pen-color .e-dropdownbtn-preview").style.background="#fff",e.querySelector(".e-ie-toolbar-e-line-color .e-dropdownbtn-preview").style.background="#fff",e.querySelector(".e-ie-toolbar-e-shape-fill-color .e-dropdownbtn-preview").classList.add("e-nocolor-item")},t.prototype.updateContextualToolbar=function(e,t){t?(this.updateMainToolbar(e,!1),e.querySelector(".e-ie-toolbar-check-btn")&&(e.querySelector(".e-ie-toolbar-check-btn").classList.remove("e-hidden"),e.querySelector(".e-ie-toolbar-close-btn").classList.remove("e-hidden")),e.querySelector(".e-contextual-toolbar-wrapper").classList.remove("e-hidden"),e.querySelector(".e-ie-contextual-toolbar").classList.add("e-hidden"),e.querySelector(".e-ie-contextual-slider").classList.remove("e-hidden"),e.querySelector(".e-ie-toolbar-finetune-btn")&&(e.querySelector(".e-ie-toolbar-brightness-btn").classList.remove("e-hidden"),e.querySelector(".e-ie-toolbar-contrast-btn").classList.remove("e-hidden"),e.querySelector(".e-ie-toolbar-hue-btn").classList.remove("e-hidden"),e.querySelector(".e-ie-toolbar-saturation-btn").classList.remove("e-hidden"),e.querySelector(".e-ie-toolbar-grain-btn").classList.remove("e-hidden"),e.querySelector(".e-ie-toolbar-opacity-btn").classList.remove("e-hidden"))):(e.querySelector(".e-contextual-toolbar-wrapper").classList.add("e-hidden"),e.querySelector(".e-ie-contextual-toolbar").classList.add("e-hidden"),e.querySelector(".e-ie-contextual-slider").classList.add("e-hidden"),e.querySelector(".e-ie-toolbar-finetune-btn")&&(e.querySelector(".e-ie-toolbar-brightness-btn").classList.add("e-hidden"),e.querySelector(".e-ie-toolbar-contrast-btn").classList.add("e-hidden"),e.querySelector(".e-ie-toolbar-hue-btn").classList.add("e-hidden"),e.querySelector(".e-ie-toolbar-saturation-btn").classList.add("e-hidden"),e.querySelector(".e-ie-toolbar-grain-btn").classList.add("e-hidden"),e.querySelector(".e-ie-toolbar-opacity-btn").classList.add("e-hidden")))},t.prototype.updateFilterToolBar=function(){this.element.querySelector(".e-contextual-toolbar-wrapper").classList.remove("e-hidden"),this.element.querySelector(".e-ie-contextual-toolbar").classList.remove("e-hidden"),this.element.querySelector(".e-ie-toolbar-close-btn").classList.remove("e-hidden"),this.element.querySelector(".e-ie-toolbar-check-btn").classList.remove("e-hidden"),this.setTempFilterProperties();var e=this.getCurrentCanvasData(),t=this.element.querySelector(".e-contextual-toolbar-wrapper .e-toolbar-item.e-selected");t&&t.classList.remove("e-selected"),this.inMemoryCanvas.width=e.width,this.inMemoryCanvas.height=e.height,this.inMemoryContext.putImageData(e,0,0);var i=this.element.querySelector("#e-ie-toolbar-default"),s=i.getContext("2d");s.filter=this.updateAdjustment("default",null,!0),s.drawImage(this.inMemoryCanvas,0,0,300,150),i.parentElement.parentElement.classList.add("e-selected"),(s=this.element.querySelector("#e-ie-toolbar-chrome").getContext("2d")).filter=this.updateAdjustment("chrome",null,!0),s.drawImage(this.inMemoryCanvas,0,0,300,150),(s=this.element.querySelector("#e-ie-toolbar-cold").getContext("2d")).filter=this.updateAdjustment("cold",null,!0),s.drawImage(this.inMemoryCanvas,0,0,300,150),(s=this.element.querySelector("#e-ie-toolbar-warm").getContext("2d")).filter=this.updateAdjustment("warm",null,!0),s.drawImage(this.inMemoryCanvas,0,0,300,150),(s=this.element.querySelector("#e-ie-toolbar-grayscale").getContext("2d")).filter=this.updateAdjustment("grayscale",null,!0),s.drawImage(this.inMemoryCanvas,0,0,300,150),(s=this.element.querySelector("#e-ie-toolbar-sepia").getContext("2d")).filter=this.updateAdjustment("sepia",null,!0),s.drawImage(this.inMemoryCanvas,0,0,300,150),(s=this.element.querySelector("#e-ie-toolbar-invert").getContext("2d")).filter=this.updateAdjustment("invert",null,!0),s.drawImage(this.inMemoryCanvas,0,0,300,150)},t.prototype.enableDisableToolbarBtn=function(){if(this.element.querySelector(".e-ie-toolbar-undo")){var e=this.element.querySelector("#undo");sf.base.isNullOrUndefined(e)||0!==this.undoRedoStep?sf.base.isNullOrUndefined(e)||(e.classList.remove("e-disabled"),e.classList.remove("e-overlay")):e.classList.add("e-overlay");var t=this.element.querySelector("#redo");sf.base.isNullOrUndefined(t)||this.undoRedoStep!==this.undoRedoColl.length?!sf.base.isNullOrUndefined(t)&&0===this.undoRedoStep&&this.undoRedoColl.length>0?t.classList.remove("e-overlay"):sf.base.isNullOrUndefined(t)||t.classList.remove("e-overlay"):t.classList.add("e-overlay")}var i=this.element.querySelector("#zoomout");sf.base.isNullOrUndefined(i)||0!==this.zoomFactor?sf.base.isNullOrUndefined(i)||i.classList.remove("e-overlay"):i.classList.add("e-overlay")},t.prototype.createToolbar=function(){var e=this.element.querySelector(".e-ie-toolbar-upload-div");if(e){var t=e.getElementsByTagName("input")[0],i=e.getElementsByTagName("button")[0];i.className="e-tbar-btn e-tbtn-txt e-btn top-icon",i.innerHTML="",i.appendChild(this.createElement("span",{className:"e-btn-icon e-icons e-upload-icon e-icon-left"})),t.onchange=this.fileSelect.bind(this,t)}this.updateToolbar(this.element.id,this.element,"initial")},t}(sf.base.Component)),o=(t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,i)},function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}),r=function(e,t,i,s){this.dataId=e,this.element=t,this.element.id=i.id,window.sfBlazor.setCompInstance(this),this.dotnetRef=s,this.imageeditorBase=new a,this.imageeditorBase.cssClass=i.cssClass,this.imageeditorBase.disabled=i.disabled,this.imageeditorBase.height=i.height,this.imageeditorBase.theme=i.theme,this.imageeditorBase.width=i.width,this.imageeditorBase.allowUndoRedo=i.allowUndoRedo,this.imageeditorBase.isReadOnly=i.isReadOnly,this.imageeditorBase.enableRtl=i.enableRtl,this.imageeditorBase.enablePersistence=i.enablePersistence},a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.onPropertyChanged=function(){},t.prototype.preRender=function(){},t.prototype.render=function(){},t}(n);return{initialize:function(e,t,i,s){new r(e,t,i,s);var n=window.sfBlazor.getCompInstance(e);n.imageeditorBase.initializeImageEditor(t,s),n.imageeditorBase.updateToolbar(e,t,"initial"),i.theme||(n.imageeditorBase.theme="Tailwind")},flip:function(e,t){window.sfBlazor.getCompInstance(e).imageeditorBase.flip(t)},rotate:function(e,t){window.sfBlazor.getCompInstance(e).imageeditorBase.rotate(t)},zoom:function(e,t){window.sfBlazor.getCompInstance(e).imageeditorBase.zoom(t)},reset:function(e){window.sfBlazor.getCompInstance(e).imageeditorBase.reset()},undo:function(e){window.sfBlazor.getCompInstance(e).imageeditorBase.undo()},redo:function(e){window.sfBlazor.getCompInstance(e).imageeditorBase.redo()},onPropertyChanged:function(e,t,i){window.sfBlazor.getCompInstance(e).imageeditorBase.propertyChanged(t,i)},destroy:function(e){window.sfBlazor.getCompInstance(e).imageeditorBase.destroy()},toolbarCreated:function(e){var t=window.sfBlazor.getCompInstance(e);t.element.querySelector(".e-ie-toolbar-upload-div").classList.remove("e-hide"),t.element.querySelector(".e-ie-toolbar-upload-btn").classList.add("e-hide"),t.imageeditorBase.createToolbar()},toolbarClicked:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);switch(s.imageeditorBase.enableDisableToolbarBtn(),t){case"reset":s.imageeditorBase.reset(),s.imageeditorBase.updateColorToolbar(s.element),s.imageeditorBase.updateToolbar(e,s.element,"imageLoaded");break;case"undo":s.imageeditorBase.undo();break;case"redo":s.imageeditorBase.redo();break;case"zoomin":s.imageeditorBase.zoom(.1);break;case"zoomout":s.imageeditorBase.zoom(-.1);break;case"crop":sf.base.isNullOrUndefined(s.imageeditorBase.currSelectionPoint)||(s.imageeditorBase.select("Custom"),sf.base.isNullOrUndefined(s.imageeditorBase.activeObj.shape)||document.getElementById(s.imageeditorBase.activeObj.shape.split("-")[1]).classList.add("e-selected-btn"),s.imageeditorBase.updateToolbar(e,s.element,"CropToolbar"));break;case"ok":"CropToolbar"==i&&s.imageeditorBase.crop(),s.imageeditorBase.okBtn(),s.imageeditorBase.updateToolbar(e,s.element,"imageLoaded");break;case"cancel":s.element.querySelector(".e-contextual-toolbar-wrapper").classList.contains("e-hidden")?s.imageeditorBase.cancelItems():s.imageeditorBase.performCancel(!0),s.imageeditorBase.updateToolbar(e,s.element,"imageLoaded");break;case"finetune":s.imageeditorBase.currObjType.isFiltered=!0,s.imageeditorBase.updateContextualToolbar(s.element,!0);break;case"filter":s.imageeditorBase.updateFilterToolBar()}"finetune"!=t&&"filter"!=t&&"brightness"!=t&&"contrast"!=t&&"hue"!=t&&"saturation"!=t&&"opacity"!=t&&"blur"!=t&&"exposure"!=t&&s.imageeditorBase.updateContextualToolbar(s.element,!1)},contextualToolbarClicked:function(e,t){var i=window.sfBlazor.getCompInstance(e),s=i.element.querySelector(".e-contextual-toolbar-wrapper .e-toolbar-item.e-selected");s&&s.classList.remove("e-selected"),i.element.querySelector("#"+t).classList.add("e-selected"),i.imageeditorBase.currObjType.isFiltered=!0;var n={filter:i.imageeditorBase.toPascalCase(t),cancel:!1};i.dotnetRef.invokeMethodAsync("OnImageFilterEventAsync",n).then((function(){n.cancel||(i.imageeditorBase.setFilter(t.toLowerCase()),i.imageeditorBase.currentFilter=t,i.imageeditorBase.enableDisableToolbarBtn())}))},updateSliderValue:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);s.imageeditorBase.setCurrAdjustmentValue(t.toLowerCase(),i),s.imageeditorBase.enableDisableToolbarBtn()},select:function(e,t,i,s,n,o,r){var a=window.sfBlazor.getCompInstance(e);a.imageeditorBase.select(t,s,n,o,r),i&&a.imageeditorBase.updateToolbar(e,a.element,"CropToolbar")},clearSelection:function(e){window.sfBlazor.getCompInstance(e).imageeditorBase.clearSelection()},crop:function(e){window.sfBlazor.getCompInstance(e).imageeditorBase.crop()},open:function(e,t){window.sfBlazor.getCompInstance(e).imageeditorBase.open(t)},pan:function(e,t){window.sfBlazor.getCompInstance(e).imageeditorBase.pan(t)},save:function(e,t,i){t=t||"Png",i=i||"",window.sfBlazor.getCompInstance(e).imageeditorBase.export(t,i)},update:function(e){window.sfBlazor.getCompInstance(e).imageeditorBase.update()},fineTuneImage:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);switch(t.toLowerCase()){case"brightness":s.imageeditorBase.setBrightness(i);break;case"contrast":s.imageeditorBase.setContrast(i);break;case"hue":s.imageeditorBase.setHue(i);break;case"saturation":s.imageeditorBase.setSaturation(i);break;case"opacity":s.imageeditorBase.setOpacity(i);break;case"blur":s.imageeditorBase.setBlur(i);break;case"exposure":s.imageeditorBase.setExposure(i)}},applyImageFilter:function(e,t){window.sfBlazor.getCompInstance(e).imageeditorBase.applyImageFilter(t)},drawEllipse:function(e,t,i,s,n,o,r,a){window.sfBlazor.getCompInstance(e).imageeditorBase.drawEllipse(t,i,s,n,o,r,a)},drawLine:function(e,t,i,s,n,o,r){window.sfBlazor.getCompInstance(e).imageeditorBase.drawLine(t,i,s,n,o,r)},drawRectangle:function(e,t,i,s,n,o,r,a){window.sfBlazor.getCompInstance(e).imageeditorBase.drawRectangle(t,i,s,n,o,r,a)},drawText:function(e,t,i,s,n,o,r){window.sfBlazor.getCompInstance(e).imageeditorBase.drawText(t,i,s,n,o,r)},selectShape:function(e,t){window.sfBlazor.getCompInstance(e).imageeditorBase.selectShape(t)},deleteShape:function(e,t){window.sfBlazor.getCompInstance(e).imageeditorBase.deleteShape(t)},getShapeSetting:function(e,t){return window.sfBlazor.getCompInstance(e).imageeditorBase.getShapeSetting(t)},getShapeSettings:function(e,t){return window.sfBlazor.getCompInstance(e).imageeditorBase.getShapeSettings(t)},drawShapeText:function(e,t){var i=window.sfBlazor.getCompInstance(e);i.imageeditorBase.drawShapeText(),i.imageeditorBase.getFontSizes(),i.imageeditorBase.updateToolbar(e,i.element,t)},drawShape:function(e,t){var i=window.sfBlazor.getCompInstance(e);i.imageeditorBase.drawShape(t),i.imageeditorBase.updateToolbar(e,i.element,t)},freehandDraw:function(e,t){var i=window.sfBlazor.getCompInstance(e);i.imageeditorBase.freehandDraw(t),t&&i.imageeditorBase.updateToolbar(e,i.element,"pen")},updateToolbar:function(e,t,i){window.sfBlazor.getCompInstance(e).imageeditorBase.updateToolbar(e,t,i);for(var s=0;s<Object.keys(window.sfBlazor.instances).length;s++)if(Object.keys(window.sfBlazor.instances)[s].includes("sfToolbar")){var n=Object.keys(window.sfBlazor.instances)[s];window.sfBlazor.getCompInstance(n).refreshOverflow(n)}},updateFillColor:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);if(t.querySelector(".e-fill")){""===s.imageeditorBase.activeObj.strokeSettings.fillColor&&(document.querySelector(".sf-colorpicker .e-nocolor-item").classList.remove("e-selected"),t.querySelector(".e-ie-toolbar-e-shape-fill-color .e-dropdownbtn-preview").classList.remove("e-nocolor-item")),t.querySelector(".e-ie-toolbar-e-shape-fill-color .e-dropdownbtn-preview").style.background=i,s.imageeditorBase.pushActItemIntoObj();var n=sf.base.extend([],s.imageeditorBase.objColl,[],!0);s.imageeditorBase.objColl.pop(),s.imageeditorBase.activeObj.strokeSettings.fillColor=i,s.imageeditorBase.strokeSettings.fillColor=s.imageeditorBase.activeObj.strokeSettings.fillColor,s.imageeditorBase.objColl.push(s.imageeditorBase.activeObj),s.imageeditorBase.undoRedoColl.push({operation:"shapeTransform",value:null,currentObj:sf.base.extend([],s.imageeditorBase.objColl,[],!0),previousObj:n,zoomFactor:s.imageeditorBase.zoomFactor,sharpen:s.imageeditorBase.adjustmentLevel.sharpen,bw:s.imageeditorBase.adjustmentLevel.bw}),s.imageeditorBase.undoRedoStep++,s.imageeditorBase.redrawShape(s.imageeditorBase.objColl[s.imageeditorBase.objColl.length-1])}},selFillColor:function(e,t){""===window.sfBlazor.getCompInstance(e).imageeditorBase.activeObj.strokeSettings.fillColor&&t.querySelector(".e-nocolor-item").classList.add("e-selected")},updateStrokeColor:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);if(s.element.querySelector(t)){s.imageeditorBase.pushActItemIntoObj();var n=sf.base.extend([],s.imageeditorBase.objColl,[],!0);s.imageeditorBase.objColl.pop(),s.imageeditorBase.activeObj.strokeSettings.strokeColor=i,s.imageeditorBase.strokeSettings.strokeColor=s.imageeditorBase.activeObj.strokeSettings.strokeColor,s.imageeditorBase.updateColorToolbar(s.element,s.imageeditorBase.strokeSettings),s.imageeditorBase.togglePen||(s.imageeditorBase.objColl.push(s.imageeditorBase.activeObj),s.imageeditorBase.undoRedoColl.push({operation:"shapeTransform",value:null,currentObj:sf.base.extend([],s.imageeditorBase.objColl,[],!0),previousObj:n,zoomFactor:s.imageeditorBase.zoomFactor,sharpen:s.imageeditorBase.adjustmentLevel.sharpen,bw:s.imageeditorBase.adjustmentLevel.bw}),s.imageeditorBase.undoRedoStep++,s.imageeditorBase.redrawShape(s.imageeditorBase.objColl[s.imageeditorBase.objColl.length-1]))}},updateStrokeWidth:function(e,t){var i=window.sfBlazor.getCompInstance(e);i.imageeditorBase.pushActItemIntoObj();var s=sf.base.extend([],i.imageeditorBase.objColl,[],!0);i.imageeditorBase.objColl.pop(),i.imageeditorBase.activeObj.strokeSettings.strokeWidth=parseInt(t,10),i.imageeditorBase.activeObj.strokeSettings.strokeWidth*=2,i.imageeditorBase.strokeSettings.strokeWidth=i.imageeditorBase.activeObj.strokeSettings.strokeWidth,i.imageeditorBase.objColl.push(i.imageeditorBase.activeObj),i.imageeditorBase.undoRedoColl.push({operation:"shapeTransform",value:null,currentObj:sf.base.extend([],i.imageeditorBase.objColl,[],!0),previousObj:s,zoomFactor:i.imageeditorBase.zoomFactor,sharpen:i.imageeditorBase.adjustmentLevel.sharpen,bw:i.imageeditorBase.adjustmentLevel.bw}),i.imageeditorBase.undoRedoStep++,i.imageeditorBase.redrawShape(i.imageeditorBase.objColl[i.imageeditorBase.objColl.length-1])},updateShapeStroke:function(e,t){e.querySelector('[id = "'+t+'"]').classList.add("e-selected-btn")},updateFontFamily:function(e,t){var i=window.sfBlazor.getCompInstance(e);i.imageeditorBase.pushActItemIntoObj();var s=sf.base.extend([],i.imageeditorBase.objColl,[],!0);if(i.imageeditorBase.objColl.pop(),"block"===i.imageeditorBase.textArea.style.display){i.imageeditorBase.updateFontRatio(i.imageeditorBase.activeObj,!0);var n=i.imageeditorBase.activeObj.textSettings.fontFamily;i.imageeditorBase.activeObj.textSettings.fontFamily=i.imageeditorBase.toPascalCase(t),i.imageeditorBase.redrawText(),i.imageeditorBase.objColl.push(i.imageeditorBase.activeObj),i.imageeditorBase.undoRedoColl.push({operation:"textTransform",value:null,currentObj:sf.base.extend([],i.imageeditorBase.objColl,[],!0),previousObj:s,zoomFactor:i.imageeditorBase.zoomFactor,sharpen:i.imageeditorBaseadjustmentLevel.sharpen,bw:i.imageeditorBaseadjustmentLevel.bw}),i.imageeditorBase.undoRedoStep++,i.imageeditorBase.objColl.pop(),i.imageeditorBase.upperContext.clearRect(0,0,i.imageeditorBase.upperCanvas.width,i.imageeditorBase.upperCanvas.height);var o=i.imageeditorBase.activeObj.activePoint.width+.25*i.imageeditorBase.activeObj.textSettings.fontSize;i.imageeditorBase.textArea.style.width=o+"px",i.imageeditorBase.textArea.style.fontFamily=i.imageeditorBase.toPascalCase(t),i.imageeditorBase.activeObj.textSettings.fontFamily=n,i.imageeditorBase.updateFontStyles()}else i.imageeditorBase.updateFontRatio(i.imageeditorBase.activeObj),i.imageeditorBase.textSettings.fontFamily=i.imageeditorBase.activeObj.textSettings.fontFamily=i.imageeditorBase.toPascalCase(t),i.imageeditorBase.redrawText(),i.imageeditorBase.objColl.push(i.imageeditorBase.activeObj),i.imageeditorBase.undoRedoColl.push({operation:"shapeTransform",value:null,currentObj:sf.base.extend([],i.imageeditorBase.objColl,[],!0),previousObj:s,zoomFactor:i.imageeditorBase.zoomFactor,sharpen:i.imageeditorBase.adjustmentLevel.sharpen,bw:i.imageeditorBase.adjustmentLevel.bw}),i.imageeditorBase.undoRedoStep++,i.imageeditorBase.redrawShape(i.imageeditorBase.objColl[i.imageeditorBase.objColl.length-1])},updateFontStyleFamily:function(e,t){window.sfBlazor.getCompInstance(e).imageeditorBase.applyFontStyle(t)},updateFontSizeFamily:function(e,t){var i=window.sfBlazor.getCompInstance(e);i.imageeditorBase.pushActItemIntoObj();var s=sf.base.extend([],i.imageeditorBase.objColl,[],!0);if(i.imageeditorBase.objColl.pop(),"block"===i.imageeditorBase.textArea.style.display){i.imageeditorBase.updateFontRatio(i.imageeditorBase.activeObj,!0);var n=i.imageeditorBase.activeObj.textSettings.fontSize;i.imageeditorBase.activeObj.textSettings.fontSize=parseInt(i.imageeditorBase.fontSizeColl[parseInt(t,10)-1].text,10),i.imageeditorBase.objColl.push(i.imageeditorBase.activeObj),i.imageeditorBase.undoRedoColl.push({operation:"textTransform",value:null,currentObj:sf.base.extend([],i.imageeditorBase.objColl,[],!0),previousObj:s,zoomFactor:i.imageeditorBase.zoomFactor,sharpen:i.imageeditorBase.adjustmentLevel.sharpen,bw:i.imageeditorBase.adjustmentLevel.bw}),i.imageeditorBase.undoRedoStep++,i.imageeditorBase.objColl.pop();var o="";"bold"===i.imageeditorBase.textArea.style.fontWeight&&(o="bold "),"italic"===i.imageeditorBase.textArea.style.fontStyle&&(o="italic "),"bold"===i.imageeditorBase.textArea.style.fontWeight&&"italic"===i.imageeditorBase.textArea.style.fontStyle&&(o="italic bold "),i.imageeditorBase.upperContext.font=o+i.imageeditorBase.activeObj.textSettings.fontSize+"px "+i.imageeditorBase.textArea.style.fontFamily;var r=i.imageeditorBase.textArea.value.split("\n"),a=i.imageeditorBase.getMaxText(!0),l=i.imageeditorBase.upperContext.measureText(a).width+.5*i.imageeditorBase.activeObj.textSettings.fontSize;i.imageeditorBase.textArea.style.width=l+"px",i.imageeditorBase.textArea.style.height=r.length*(i.imageeditorBase.activeObj.textSettings.fontSize+.25*i.imageeditorBase.activeObj.textSettings.fontSize)+"px",i.imageeditorBase.activeObj.textSettings.fontSize=n,i.imageeditorBase.upperContext.font=i.imageeditorBase.activeObj.textSettings.fontSize+"px "+i.imageeditorBase.activeObj.textSettings.fontFamily,i.imageeditorBase.textArea.style.fontSize=parseInt(i.imageeditorBase.fontSizeColl[parseInt(t,10)-1].text,10)+"px","georgia"===i.imageeditorBase.textArea.style.fontFamily&&(i.imageeditorBase.textArea.style.width=parseFloat(i.imageeditorBase.textArea.style.width)+parseFloat(i.imageeditorBase.textArea.style.fontSize)+"px")}else{i.imageeditorBase.updateFontRatio(i.imageeditorBase.activeObj),i.imageeditorBase.textSettings.fontSize=i.imageeditorBase.activeObj.textSettings.fontSize=parseInt(i.imageeditorBase.fontSizeColl[parseInt(t,10)-1].text,10),i.imageeditorBase.upperContext.font=i.imageeditorBase.activeObj.textSettings.fontSize+"px "+i.imageeditorBase.activeObj.textSettings.fontFamily;r=i.imageeditorBase.activeObj.keyHistory.split("\n"),a=i.imageeditorBase.getMaxText(),l=i.imageeditorBase.upperContext.measureText(a).width+.5*i.imageeditorBase.activeObj.textSettings.fontSize;var h=r.length*(i.imageeditorBase.activeObj.textSettings.fontSize+.25*i.imageeditorBase.activeObj.textSettings.fontSize);i.imageeditorBase.setTextSelection(l,h),i.imageeditorBase.updateActiveObject(i.imageeditorBase.activeObj.activePoint,i.imageeditorBase.activeObj),i.imageeditorBase.redrawText(),i.imageeditorBase.objColl.push(i.imageeditorBase.activeObj),i.imageeditorBase.undoRedoColl.push({operation:"shapeTransform",value:null,currentObj:sf.base.extend([],i.imageeditorBase.objColl,[],!0),previousObj:s,zoomFactor:i.imageeditorBase.zoomFactor,sharpen:i.imageeditorBase.adjustmentLevel.sharpen,bw:i.imageeditorBase.adjustmentLevel.bw}),i.imageeditorBase.undoRedoStep++,i.imageeditorBase.redrawShape(i.imageeditorBase.objColl[i.imageeditorBase.objColl.length-1])}}}}()},"./modules/sf-inplaceeditor.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.InPlaceEditor=function(){"use strict";var e="e-inplaceeditor",t="e-editable-open",i=function(){function i(e){this.submitOnEnter=!0,this.clearComponents=["AutoComplete","Mask","Text"],window.sfBlazor=window.sfBlazor,this.updateContext(e),window.sfBlazor&&(sf.base.isNullOrUndefined(window.sfBlazor.instances)&&(window.sfBlazor.instances=[]),window.sfBlazor.instances[this.dataId]=this,this.initialize())}return i.prototype.updateContext=function(e){sf.base.extend(this,this,e)},i.prototype.initialize=function(){this.onResizeScrollHandler=this.scrollResizeHandler.bind(this),this.wireEvents(),this.id=this.element.id,this.dotNetRef.invokeMethodAsync("Created",null)},i.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"keydown",this.valueKeyDownHandler,this),sf.base.EventHandler.add(document,"scroll",this.scrollResizeHandler,this),window.addEventListener("resize",this.onResizeScrollHandler),Array.prototype.indexOf.call(this.clearComponents,this.type)>-1&&sf.base.EventHandler.add(this.element,"mousedown",this.mouseDownHandler,this)},i.prototype.scrollResizeHandler=function(){"Popup"!==this.mode||sf.base.Browser.isDevice||this.dotNetRef.invokeMethodAsync("CancelAction",null)},i.prototype.valueKeyDownHandler=function(i){"Tab"===i.code&&!0===i.shiftKey&&"BUTTON"!==i.target.tagName&&("Submit"===this.actionOnBlur?this.dotNetRef.invokeMethodAsync("SaveAction",null):"Cancel"===this.actionOnBlur&&this.dotNetRef.invokeMethodAsync("CancelAction",null)),"Enter"!==i.code||!i.target.classList.contains(e)||this.element.querySelector(".e-editable-value-container").classList.contains(t)||this.element.classList.contains("e-disable")||(i.preventDefault(),this.dotNetRef.invokeMethodAsync("RenderEditor",null))},i.prototype.mouseDownHandler=function(e){e.target.classList.contains("e-clear-icon")&&(this.isClearTarget=!0)},i.prototype.openEditor=function(e){if(this.updateContext(e),"Popup"===this.mode&&(this.popupContent=document.querySelector("#"+this.popupElement+"_content")),"Ignore"!==this.actionOnBlur&&sf.base.EventHandler.add(document,"mousedown",this.docClickHandler,this),this.submitOnEnter){var t="Popup"===this.mode?this.popupContent:this.element;sf.base.EventHandler.add(t,"keydown",this.enterKeyDownHandler,this)}this.dotNetRef.invokeMethodAsync("FocusEditor")},i.prototype.enterKeyDownHandler=function(i){sf.base.closest(i.target,".e-editable-component .e-richtexteditor")||(13===i.keyCode&&13===i.which&&sf.base.closest(i.target,".e-editable-component")?this.dotNetRef.invokeMethodAsync("SaveAction",null):27===i.keyCode&&27===i.which?(sf.base.isNullOrUndefined(this.element)||sf.base.isNullOrUndefined(this.element.querySelector("input"))||"Inline"!==this.mode?sf.base.isNullOrUndefined(this.popupContent)||sf.base.isNullOrUndefined(this.popupContent.querySelector("input"))||"Popup"!==this.mode||this.popupContent.querySelector("input").blur():this.element.querySelector("input").blur(),this.dotNetRef.invokeMethodAsync("CancelAction",null)):"Enter"!==i.code||!i.target.classList.contains(e)||sf.base.isNullOrUndefined(this.element.querySelector(".e-editable-value-container"))||this.element.querySelector(".e-editable-value-container").classList.contains(t)||this.element.classList.contains("e-disable")||(i.preventDefault(),this.dotNetRef.invokeMethodAsync("RenderEditor",null)))},i.prototype.removeEditor=function(e){this.updateContext(e),this.enablePersistence&&window.localStorage.setItem(this.id,this.value),this.unWireEvents(),sf.base.EventHandler.remove(document,"mousedown",this.docClickHandler)},i.prototype.Destroy=function(e){var t=this;for(this.updateContext(e),this.unWireEvents(),sf.base.EventHandler.remove(document,"mousedown",this.docClickHandler),this.enablePersistence&&window.localStorage.setItem(this.id,this.value),"Popup"===this.mode&&this.destroyPopup(),["e-disable","e-rtl"].forEach((function(e){sf.base.removeClass([t.element],[e])}));this.element.firstElementChild;)this.element.removeChild(this.element.firstElementChild)},i.prototype.destroyPopup=function(){var e=document.querySelector("#"+this.popupElement);if(e){for(;e.attributes.length>0;)e.removeAttribute(e.attributes[0].name);for(var t=e.children,i=t.length-1;i>=0;i--)sf.base.detach(t[i])}},i.prototype.unWireEvents=function(){sf.base.EventHandler.remove(document,"scroll",this.scrollResizeHandler),window.removeEventListener("resize",this.onResizeScrollHandler),sf.base.EventHandler.remove(this.element,"keydown",this.valueKeyDownHandler),Array.prototype.indexOf.call(this.clearComponents,this.type)>-1&&sf.base.EventHandler.remove(this.element,"mousedown",this.mouseDownHandler);var e="Popup"===this.mode?this.popupContent:this.element;sf.base.EventHandler.remove(e,"keydown",this.enterKeyDownHandler)},i.prototype.validate=function(){return"Inline"===this.mode?!!this.element.querySelector(".validation-message"):!(!this.componentParent||!this.componentParent.querySelector(".validation-message"))},i.prototype.docClickHandler=function(t){var i=sf.base.closest(t.target,"."+e),s=sf.base.closest(t.target,".e-inplaceeditor-tip"),n=sf.base.closest(t.target,".e-editable-elements"),o=sf.base.closest(t.target,".e-rte-elements");if(this.isClearTarget||!sf.base.isNullOrUndefined(i)&&i.isEqualNode(this.element)||!sf.base.isNullOrUndefined(s)&&this.popupContent&&s.id.indexOf("tooltip")>-1||!sf.base.isNullOrUndefined(n)||!sf.base.isNullOrUndefined(o)||t.target.classList.contains("e-chips-close"))this.isClearTarget=!1;else{var r="Inline"===this.mode?this.element.querySelector(".e-editable-component"):this.element,a="Inline"===this.mode?this.element.querySelector(".e-editable-action-buttons"):this.componentParent;r.contains(t.target)||a&&a.contains(t.target)||sf.base.closest(t.target,".e-dropdown-popup.e-control.e-rte-elements")||sf.base.closest(t.target,".e-dropdown-popup.e-control.e-colorpicker-popup")||this.popupContent&&this.popupContent.contains(t.target)||setTimeout((function(){"Submit"!==this.actionOnBlur||this.element.querySelector(".validation-message")?"Cancel"===this.actionOnBlur&&this.dotNetRef.invokeMethodAsync("CancelAction",null):this.dotNetRef.invokeMethodAsync("SaveAction",null)}))}},i}();return{initialize:function(e){e.dataId&&new i(e)},openEditor:function(e,t){e&&window.sfBlazor.instances[e].openEditor(t)},closeEditor:function(e,t){e&&window.sfBlazor.instances[e].removeEditor(t)},destroy:function(e,t){e&&window.sfBlazor.instances[e].Destroy(t)},propertyChanged:function(e,t){e&&window.sfBlazor.instances[e].updateContext(t)},validate:function(e){return e&&window.sfBlazor.instances[e].validate()}}}()},"./modules/sf-kanban.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Kanban=function(){"use strict";var e="e-kanban-content",t="e-show-add-button",i=function(){function i(e){this.parent=e,this.dragObj={element:null,cloneElement:null,instance:null,targetClone:null,draggedClone:null,targetCloneMulti:null,selectedCards:[],pageX:0,pageY:0,navigationInterval:null,cardDetails:[],modifiedData:[]},this.isDragging=!1,this.dragEdges={left:!1,right:!1,top:!1,bottom:!1},this.isExternalDrop=!1}return i.prototype.wireDragEvents=function(t){var i;null!=!this.parent.element&&this.parent.externalDropId&&0===this.parent.externalDropId.length&&(i=this.parent.element.querySelector("."+e)),this.dragObj.instance=new sf.base.Draggable(t,{clone:!0,enableTapHold:this.parent.isAdaptive,enableTailMode:!0,cursorAt:{top:-10,left:-10},dragArea:i,dragStart:this.dragStart.bind(this),drag:this.drag.bind(this),dragStop:this.dragStop.bind(this),enableAutoScroll:!1,helper:this.dragHelper.bind(this)})},i.prototype.dragHelper=function(e){if(this.dragObj.element=sf.base.closest(e.sender.target,".e-card"),sf.base.isNullOrUndefined(this.dragObj.element))return null;this.dragObj.element.style.width=sf.base.formatUnit(this.dragObj.element.offsetWidth);var t=this.dragObj.element.cloneNode(!0);return this.dragObj.cloneElement=t,sf.base.addClass([this.dragObj.cloneElement],"e-cloned-card"),this.dragObj.element.parentElement.appendChild(this.dragObj.cloneElement),this.dragObj.targetCloneMulti=sf.base.createElement("div",{className:"e-target-multi-clone"}),this.dragObj.targetClone=sf.base.createElement("div",{className:"e-target-dropped-clone",styles:"width:100%;height:"+sf.base.formatUnit(this.dragObj.element.offsetHeight)}),this.dragObj.modifiedData=[],this.dragObj.cloneElement},i.prototype.dragStart=function(e){var t=this;if(this.dragObj.selectedCards=this.dragObj.element,this.dragObj.element.classList.contains("e-selection")){var i=sf.base.closest(this.dragObj.element,".e-content-row");this.dragObj.selectedCards=[].slice.call(i.querySelectorAll(".e-card.e-selection:not(.e-cloned-card)"))}var s=[];if(this.dragObj.selectedCards instanceof HTMLElement){var n=this.dragObj.selectedCards.getAttribute("data-id");s.push(n)}else this.dragObj.selectedCards&&this.dragObj.selectedCards.length>0&&this.dragObj.selectedCards.forEach((function(e){s.push(e.getAttribute("data-id"))}));var o=this.getXYValue(e,"X"),r=this.getXYValue(e,"Y");this.dragObj.cloneElement.style.display="none",this.parent.dotNetRef.invokeMethodAsync("DragStart",s,o,r).then((function(i){var s=document.body.querySelector(".e-kanban-dialog");if(i.cancel||s&&s.classList.contains("e-popup-open"))return t.removeElement(t.dragObj.cloneElement),t.dragObj.instance.intDestroy(e),t.dragObj.element=null,t.dragObj.targetClone=null,t.dragObj.draggedClone=null,t.dragObj.cloneElement=null,void(t.dragObj.targetCloneMulti=null);if(t.dragObj.cloneElement.style.display="block",e.bindEvents(e.dragElement),t.dragObj.element.classList.contains("e-selection")){if(t.dragObj.selectedCards.forEach((function(e){t.draggedClone(e)})),t.dragObj.selectedCards.length>1){t.dragObj.cloneElement.innerHTML="";var n=sf.base.createElement("div",{className:"e-multi-card-text",innerHTML:t.dragObj.selectedCards.length+" Cards"});t.dragObj.cloneElement.appendChild(n),sf.base.classList(t.dragObj.cloneElement,["e-multi-card-clone"],["e-selection"]),t.dragObj.cloneElement.style.width="90px"}}else t.draggedClone(t.dragObj.element);sf.base.EventHandler.add(document.body,"keydown",t.keydownHandler,t)}))},i.prototype.drag=function(e){var t=this;if(e.target){var i=sf.base.closest(e.target,".e-card"),s=i||e.target,n=sf.base.closest(s,".e-content-row:not(.e-swimlane-row) .e-content-cells.e-droppable");if(this.externalDrop(s,"drag"),this.target=this.parent.isExternalKanbanDrop?this.externalTarget:this.parent.element,this.calculateArgs(e),n&&"not-allowed"!==document.body.style.cursor){var o=this.getColumnKey(n),r=o.split(",");this.multiCloneRemove();var a=o===this.getColumnKey(sf.base.closest(this.dragObj.draggedClone,".e-content-cells"));if(1===r.length||a)if(s.classList.contains("e-card")||s.classList.contains("e-target-dragged-clone")){var l=s.classList.contains("e-target-dragged-clone")&&s.previousElementSibling.classList.contains("e-kanban-dragged-card")?null:s.previousElementSibling,h="afterend";if(sf.base.isNullOrUndefined(l)){var d=s.classList.contains("e-target-dragged-clone")?this.dragObj.pageY/2:this.dragObj.pageY,c=s.classList.contains("e-target-dragged-clone")?s.offsetHeight:s.offsetHeight/2;d-(this.target.getBoundingClientRect().top+s.offsetTop)<c&&(h="beforebegin")}s.insertAdjacentElement(h,this.dragObj.targetClone)}else s.classList.contains("e-content-cells")&&!sf.base.closest(s,".e-swimlane-row")?s.querySelector(".e-card-container").appendChild(this.dragObj.targetClone):s.classList.contains("e-card-container")&&!sf.base.closest(s,".e-swimlane-row")&&0===n.querySelectorAll(".e-card").length&&s.appendChild(this.dragObj.targetClone);else r.length>1&&n.classList.contains("e-dropping")&&this.multiCloneCreate(r,n)}0===this.target.querySelectorAll(".e-dropping").length&&this.cellDropping();var p=sf.base.closest(s,".e-column-key");if(p){var u=[].slice.call(this.target.querySelectorAll(".e-column-key:not(.e-disabled)")).filter((function(e){return t.getColumnKey(e)===t.getColumnKey(p)}));u.length>0&&(sf.base.addClass(u,"e-multi-active"),u[0].previousElementSibling&&sf.base.addClass([u[0].previousElementSibling],"e-multi-bottom-border"))}document.body.style.cursor=n&&n.classList.contains("e-dropping")?"":"not-allowed",i&&!sf.base.closest(i,".e-content-cells").classList.contains("e-dropping")&&(i.style.cursor="not-allowed",document.body.style.cursor="not-allowed"),this.isExternalDrop&&this.removeElement(this.dragObj.targetClone),this.isExternalDrop&&"not-allowed"===document.body.style.cursor&&(document.body.style.cursor=""),"not-allowed"===document.body.style.cursor&&(this.removeElement(this.dragObj.targetClone,this.target),this.multiCloneRemove()),this.updateScrollPosition(),this.parent.isExternalKanbanDrop=!1,this.isExternalDrop=!1}},i.prototype.dragStop=function(e){var t,i=sf.base.closest(this.dragObj.targetClone,".e-content-cells"),s=0;if(sf.base.EventHandler.remove(document.body,"keydown",this.keydownHandler),this.externalDrop(e.target,"dragStop"),this.dragObj.targetClone.parentElement){s=[].slice.call(this.dragObj.targetClone.parentElement.querySelectorAll(".e-card:not(.e-kanban-dragged-card),.e-target-dropped-clone")).indexOf(this.dragObj.targetClone)}this.target&&this.target.querySelector(".e-target-multi-clone")&&(t=sf.base.closest(e.target,".e-column-key:not(.e-disabled)"));var n=this.getXYValue(e,"X"),o=this.getXYValue(e,"Y"),r=[];if(this.dragObj.selectedCards instanceof HTMLElement){var a=this.dragObj.selectedCards.getAttribute("data-id");r.push(a)}else this.dragObj.selectedCards&&this.dragObj.selectedCards.length>0&&this.dragObj.selectedCards.forEach((function(e){r.push(e.getAttribute("data-id"))}));if(i||t){var l=void 0;i?l=this.getColumnKey(i):(l=this.getColumnKey(t),i=sf.base.closest(t,".e-content-cells"));var h=void 0;if(this.parent.swimlaneSettings.keyField&&this.parent.swimlaneSettings.allowDragAndDrop){var d=sf.base.closest(i,".e-content-row").previousElementSibling;h=this.getColumnKey(d)}var c=!1,p=void 0,u="";this.parent.sortSettings.field&&"Index"===this.parent.sortSettings.sortBy&&(!(p="Ascending"===this.parent.sortSettings.direction?e.helper===this.dragObj.targetClone.previousElementSibling&&this.dragObj.targetClone.previousElementSibling&&this.dragObj.targetClone.previousElementSibling.previousElementSibling?this.dragObj.targetClone.previousElementSibling.previousElementSibling:this.dragObj.targetClone.previousElementSibling:this.dragObj.targetClone.nextElementSibling)||p.classList.contains("e-kanban-dragged-card")||p.classList.contains("e-cloned-card")||p.classList.contains("e-target-dragged-clone")?this.dragObj.targetClone.nextElementSibling&&"Ascending"===this.parent.sortSettings.direction?p=this.dragObj.targetClone.nextElementSibling:this.dragObj.targetClone.previousElementSibling&&"Descending"===this.parent.sortSettings.direction&&(p=this.dragObj.targetClone.previousElementSibling):c=!0),p&&(u=p.getAttribute("data-id")),this.parent.dotNetRef.invokeMethodAsync("DragStop",r,l,h,s,c,u,this.parent.isExternalKanbanDrop,n,o)}else this.isExternalDrop&&this.parent.dotNetRef.invokeMethodAsync("DragStop",r,"","",0,!1,"",!0,n,o);this.dragStopClear()},i.prototype.dragStopClear=function(){this.removeElement(this.dragObj.draggedClone),this.removeElement(this.dragObj.targetClone,this.target),this.removeElement(this.dragObj.cloneElement),[].slice.call(this.parent.element.querySelectorAll(".e-target-dragged-clone")).forEach((function(e){return sf.base.remove(e)})),this.dragObj.element.style.removeProperty("width"),this.multiCloneRemove(),this.dragObj.selectedCards instanceof HTMLElement?sf.base.removeClass([this.dragObj.selectedCards],"e-kanban-dragged-card"):sf.base.removeClass(this.dragObj.selectedCards,"e-kanban-dragged-card"),clearInterval(this.dragObj.navigationInterval),this.dragObj.navigationInterval=null,"not-allowed"===document.body.style.cursor&&(document.body.style.cursor=""),[].slice.call(this.parent.element.querySelectorAll(".e-card[style]")).forEach((function(e){e.style.cursor=""}));[].slice.call(this.parent.element.querySelectorAll(".e-content-row:not(.e-swimlane-row) .e-content-cells")).forEach((function(e){return sf.base.removeClass([e],"e-dropping")})),this.parent.isAdaptive&&(this.parent.touchModule.tabHold=!1),this.dragObj.cardDetails=this.dragObj.modifiedData=[],this.isDragging=!1,this.parent.isExternalKanbanDrop=!1,this.target=null,this.externalTarget=null},i.prototype.keydownHandler=function(e){"Escape"===e.code&&this.dragObj.cloneElement&&(sf.base.EventHandler.remove(this.dragObj.cloneElement,"keydown",this.keydownHandler),this.dragObj.element.removeAttribute("aria-grabbed"),this.dragStopClear())},i.prototype.draggedClone=function(e){this.dragObj.draggedClone=sf.base.createElement("div",{className:"e-target-dragged-clone",styles:"width:"+sf.base.formatUnit(e.offsetWidth-1)+";height:"+sf.base.formatUnit(e.offsetHeight)}),e.insertAdjacentElement("afterend",this.dragObj.draggedClone),sf.base.addClass([e],"e-kanban-dragged-card")},i.prototype.calculateArgs=function(e){var t=this.getPageCoordinates(e);this.dragObj.pageY=t.pageY,this.dragObj.pageX=t.pageX,this.isDragging=!0},i.prototype.getPageCoordinates=function(e){var t=e.event;return t&&t.changedTouches?t.changedTouches[0]:e.changedTouches?e.changedTouches[0]:t||e},i.prototype.getColumnKey=function(e){return e&&e.getAttribute("data-key")?e.getAttribute("data-key").trim():""},i.prototype.multiCloneRemove=function(){if(this.target){var e=[].slice.call(this.target.querySelectorAll(".e-target-multi-clone"));if(e.length>0)[].slice.call(this.target.querySelectorAll(".e-column-key")).forEach((function(e){return sf.base.remove(e)})),e.forEach((function(e){var i=sf.base.closest(e,".e-content-cells");i&&(i.style.borderStyle="",i.querySelector("."+t)&&sf.base.removeClass([i.querySelector("."+t)],"e-multi-card-container"),sf.base.removeClass([i.querySelector(".e-card-container")],"e-multi-card-container"))})),this.removeElement(this.dragObj.targetCloneMulti,this.target)}},i.prototype.removeElement=function(e,t){t=t||this.parent.element,e&&t&&t.getElementsByClassName(e.className).length>0&&sf.base.remove(e)},i.prototype.externalDrop=function(e,t){var i=this;this.parent.externalDropId&&this.parent.externalDropId.forEach((function(s){if(i.externalTarget=sf.base.closest(e,s),i.externalTarget)if(i.externalTarget.classList.contains("e-kanban")){i.parent.isExternalKanbanDrop=!0;var n=[].slice.call(i.externalTarget.querySelectorAll(".e-content-row:not(.e-swimlane-row):not(.e-collapsed) .e-content-cells"));"drag"===t?sf.base.addClass(n,"e-dropping"):sf.base.removeClass(n,"e-dropping")}else i.isExternalDrop=!0}))},i.prototype.multiCloneCreate=function(e,i){var s=i.offsetHeight,n=i.querySelector(".e-limits");n&&(s-=n.offsetHeight),this.dragObj.targetCloneMulti.style.height=sf.base.formatUnit(s),i.querySelector("."+t)&&sf.base.addClass([i.querySelector("."+t)],"e-multi-card-container"),sf.base.addClass([i.querySelector(".e-card-container")],"e-multi-card-container"),i.querySelector(".e-card-container").style.height="auto",i.style.borderStyle="none",this.removeElement(this.dragObj.targetClone);for(var o=0,r=e;o<r.length;o++){var a=r[o],l=sf.base.closest(this.dragObj.draggedClone,".e-content-cells"),h=this.parent.transition[l.cellIndex].transitionColumn,d=this.allowedTransition(this.dragObj.element.getAttribute("data-key"),a,h),c=d?"":" e-disabled",p=sf.base.createElement("div",{className:"e-column-key"+c,attrs:{"data-key":a.trim()}}),u=sf.base.createElement("div",{className:"e-text",innerHTML:a.trim()});i.appendChild(this.dragObj.targetCloneMulti).appendChild(p).appendChild(u),p.style.cursor=d?"":"not-allowed",p.style.lineHeight=p.style.height=sf.base.formatUnit(s/e.length),u.style.top=sf.base.formatUnit(s/2-u.offsetHeight/2)}},i.prototype.allowedTransition=function(e,t,i){for(var s=!0,n=t.split(","),o=0;o<n.length;o++){if(e===n[o].trim())return!0;if(i){if(1===i.length&&0===i[0].length)return!0;for(var r=0;r<i.length;r++){if(n[o].trim()===i[r].trim())return!0;s=!1}}}return s},i.prototype.cellDropping=function(){var e=this,t=sf.base.closest(this.dragObj.draggedClone,".e-content-cells"),i=sf.base.closest(this.dragObj.draggedClone,".e-content-row");if(this.addDropping(i,t),t&&t.classList.contains("e-drop")&&sf.base.addClass([t],"e-dropping"),this.parent.swimlaneSettings.keyField&&this.parent.swimlaneSettings.allowDragAndDrop){var s=[].slice.call(this.target.querySelectorAll(".e-content-row:not(.e-swimlane-row):not(.e-collapsed)"));[].slice.call(s).forEach((function(s){i!==s&&e.addDropping(s,t)}))}},i.prototype.addDropping=function(e,t){var i=this;t&&e&&[].slice.call(e.children).forEach((function(e){var s=i.parent.transition[t.cellIndex].transitionColumn;e!==t&&e.classList.contains("e-drop")&&i.allowedTransition(t.getAttribute("data-key"),e.getAttribute("data-key"),s)&&sf.base.addClass([e],"e-dropping")}))},i.prototype.updateScrollPosition=function(){var e=this;sf.base.isNullOrUndefined(this.dragObj.navigationInterval)&&(this.dragObj.navigationInterval=window.setInterval((function(){e.autoScroll()}),100))},i.prototype.autoScrollValidation=function(){var t=this.dragObj.pageY,i=this.dragObj.pageX,s={left:!1,right:!1,top:!1,bottom:!1},n=this.target.querySelector("."+e).getBoundingClientRect();t<n.top+30+window.pageYOffset&&t>n.top+window.pageYOffset&&(s.top=!0),t>n.bottom-30+window.pageYOffset&&t<n.bottom+window.pageYOffset&&(s.bottom=!0),i<n.left+30+window.pageXOffset&&i>n.left+window.pageXOffset&&(s.left=!0),i>n.right-30+window.pageXOffset&&i<n.right+window.pageXOffset&&(s.right=!0),this.dragEdges=s},i.prototype.autoScroll=function(){this.autoScrollValidation();if(this.parent.isAdaptive){var t;if(this.dragEdges.top||this.dragEdges.bottom?t=this.dragObj.targetClone?sf.base.closest(this.dragObj.targetClone,".e-card-container"):sf.base.closest(this.dragObj.draggedClone,".e-card-container"):(this.dragEdges.right||this.dragEdges.left)&&(t=this.target.querySelector("."+e)),t){var i=t.offsetHeight<=t.scrollHeight,s=t.offsetWidth<=t.scrollWidth,n=t.scrollTop>=0&&t.scrollTop+t.offsetHeight<=t.scrollHeight,o=t.scrollLeft>=0&&t.scrollLeft+t.offsetWidth<=t.scrollWidth;if(i&&n&&(this.dragEdges.top||this.dragEdges.bottom)&&(t.scrollTop+=this.dragEdges.top?-66:30),s&&o&&(this.dragEdges.left||this.dragEdges.right))(this.getWidth()*(this.target.querySelector(".e-content-row:not(.e-swimlane-row)").childElementCount-1)>t.scrollLeft||this.dragEdges.left)&&(t.scrollLeft+=this.dragEdges.left?-30:30)}}else{var r=this.target.querySelector("."+e),a=this.dragObj.targetClone.parentElement,l=r.offsetHeight<=r.scrollHeight,h=r.offsetWidth<=r.scrollWidth,d=l&&r.scrollTop>=0&&r.scrollTop+r.offsetHeight<=r.scrollHeight,c=h&&r.scrollLeft>=0&&r.scrollLeft+r.offsetWidth<=r.scrollWidth;d&&(this.dragEdges.top||this.dragEdges.bottom)&&(r.scrollTop+=this.dragEdges.top?-30:30,a&&(a.scrollTop+=this.dragEdges.top?-30:30)),c&&(this.dragEdges.left||this.dragEdges.right)&&(r.scrollLeft+=this.dragEdges.left?-30:30,a&&(a.scrollLeft+=this.dragEdges.left?-30:30)),this.dragObj.pageY-window.scrollY<30?window.scrollTo(window.scrollX,window.scrollY-30):window.innerHeight-(this.dragObj.pageY-window.scrollY)<30&&window.scrollTo(window.scrollX,window.scrollY+30)}},i.prototype.getWidth=function(){return 80*window.innerWidth/100},i.prototype.unWireDragEvents=function(){this.dragObj.instance&&!this.dragObj.instance.isDestroyed&&this.dragObj.instance.destroy()},i.prototype.destroy=function(){this.unWireDragEvents()},i.prototype.getXYValue=function(e,t){var i,s=e.event,n=s.changedTouches;if(!(i="X"===t?n?n[0].clientX:s.clientX:n?n[0].clientY:s.clientY)&&"focus"===e.type&&e.target){var o=e.target.getBoundingClientRect();i=o?"X"===t?o.left:o.top:null}return Math.ceil(i)},i}(),s=function(){function e(e){this.keyConfigs={firstCardSelection:"36",lastCardSelection:"35",upArrow:"38",downArrow:"40",rightArrow:"39",leftArrow:"37",multiSelectionEnter:"ctrl+13",multiSelectionSpace:"ctrl+32",multiSelectionByUpArrow:"shift+38",multiSelectionByDownArrow:"shift+40",shiftTab:"shift+tab",enter:"13",tab:"tab",delete:"46",escape:"27",space:"32"},this.parent=e,this.parent.element.tabIndex=-1===this.parent.element.tabIndex?0:this.parent.element.tabIndex,this.keyboardModule=new sf.base.KeyboardEvents(this.parent.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.multiSelection=!1}return e.prototype.keyActionHandler=function(e){var i,s=this.parent.element.querySelectorAll(".e-card.e-selection").item(0);if(s||sf.base.closest(document.activeElement,".e-kanban"))switch(e.action){case"upArrow":case"downArrow":case"multiSelectionByUpArrow":case"multiSelectionByDownArrow":e.preventDefault(),this.processUpDownArrow(e.action,s);break;case"rightArrow":case"leftArrow":this.processLeftRightArrow(e);break;case"firstCardSelection":case"lastCardSelection":this.processCardSelection(e.action,s);break;case"multiSelectionEnter":case"multiSelectionSpace":document.activeElement&&this.parent.cardSelection(document.activeElement,!0,!1);break;case"space":case"enter":this.processEnter(e,s);break;case"escape":if(document.activeElement.classList.contains("e-card")||document.activeElement.classList.contains(t))if(document.activeElement.classList.contains("e-selection"))sf.base.removeClass([document.activeElement],"e-selection"),document.activeElement.focus();else{var n=sf.base.closest(document.activeElement,".e-content-cells"),o=[].slice.call(n.querySelectorAll(".e-card"));sf.base.removeClass(o,"e-selection"),n.focus(),this.cardTabIndexRemove(),this.addRemoveTabIndex("Add")}break;case"tab":case"shiftTab":i=sf.base.closest(document.activeElement,".e-content-cells"),document.activeElement.classList.contains("e-card")&&(document.activeElement.nextElementSibling||"tab"!==e.action||e.preventDefault(),!document.activeElement.previousElementSibling&&i.querySelector("."+t)&&"tab"===e.action&&sf.base.addClass([i.querySelector("."+t)],"e-show-add-focus")),document.activeElement.classList.contains(t)&&(!i.querySelector(".e-card")&&"tab"===e.action||"shiftTab"===e.action)&&e.preventDefault(),document.activeElement.classList.contains("e-kanban")&&(this.cardTabIndexRemove(),this.addRemoveTabIndex("Add"))}},e.prototype.processCardSelection=function(e,t){if(t){sf.base.removeClass([t],"e-selection"),this.parent.disableAttributeSelection(t);var i=this.parent.selectionArray;i.splice(i.indexOf(t.getAttribute("data-id")),1)}this.cardTabIndexRemove();var s=[].slice.call(this.parent.element.querySelectorAll(".e-card")),n="firstCardSelection"===e?s[0]:s[s.length-1];this.parent.cardSelection(n,!1,!1),this.addRemoveTabIndex("Remove"),n.focus(),[].slice.call(sf.base.closest(n,".e-content-cells").querySelectorAll(".e-card")).forEach((function(e){e.setAttribute("tabindex","0")}))},e.prototype.processLeftRightArrow=function(e){document.activeElement.classList.contains("e-content-cells")&&("rightArrow"===e.action&&document.activeElement.nextElementSibling?document.activeElement.nextElementSibling.focus():"leftArrow"===e.action&&document.activeElement.previousElementSibling&&document.activeElement.previousElementSibling.focus())},e.prototype.processUpDownArrow=function(e,i){if("upArrow"===e&&document.activeElement){if(document.activeElement.classList.contains("e-card")&&document.activeElement.previousElementSibling)document.activeElement.previousElementSibling.focus();else if(document.activeElement.classList.contains(t)){document.activeElement.setAttribute("tabindex","-1"),sf.base.removeClass([document.activeElement],"e-show-add-focus");var s=sf.base.closest(document.activeElement,".e-content-cells");s.querySelectorAll(".e-card").length>0&&[].slice.call(s.querySelectorAll(".e-card")).slice(-1)[0].focus()}this.removeSelection()}else if("downArrow"===e&&document.activeElement&&document.activeElement.classList.contains("e-card")){if(document.activeElement.nextElementSibling)document.activeElement.nextElementSibling.focus();else if(sf.base.closest(document.activeElement,".e-card-container").nextElementSibling){var n=sf.base.closest(document.activeElement,".e-card-container").nextElementSibling;n.setAttribute("tabindex","0"),sf.base.addClass([n],"e-show-add-focus"),n.focus()}this.removeSelection()}if(("multiSelectionByUpArrow"===e||"multiSelectionByDownArrow"===e)&&i&&"Multiple"===this.parent.cardSettings.selectionType){var o=void 0;(o="multiSelectionByUpArrow"===e?document.activeElement.previousElementSibling:document.activeElement.nextElementSibling)&&(this.parent.cardSelection(o,!1,!0),o.focus(),this.multiSelection=!0)}},e.prototype.removeSelection=function(){if(this.multiSelection){var e=this.parent.getSelectedCards();e.length>0&&(sf.base.removeClass(e,"e-selection"),this.parent.disableAttributeSelection(e)),this.multiSelection=!1}},e.prototype.cardTabIndexRemove=function(){[].slice.call(this.parent.element.querySelectorAll(".e-card")).forEach((function(e){e.setAttribute("tabindex","-1")})),[].slice.call(this.parent.element.querySelectorAll("."+t)).forEach((function(e){e.setAttribute("tabindex","-1"),sf.base.removeClass([e],"e-show-add-focus")}))},e.prototype.processEnter=function(e,i){"space"===e.action&&e.preventDefault();var s=e.target;if(s.classList.contains("e-header-icon")&&s.click(),(s.classList.contains("e-swimlane-row-expand")||s.classList.contains("e-swimlane-row-collapse"))&&s.click(),document.activeElement.classList.contains("e-card")&&this.parent.cardSelection(document.activeElement,!1,!1),document.activeElement.classList.contains(t)&&document.activeElement.focus(),s.classList.contains("e-content-cells")){var n=[].slice.call(s.querySelectorAll(".e-card"));this.addRemoveTabIndex("Remove"),n.length>0&&(s.querySelector(".e-card").focus(),n.forEach((function(e){e.setAttribute("tabindex","0")}))),s.querySelector("."+t)&&(s.querySelector("."+t).setAttribute("tabindex","0"),s.querySelector("."+t).focus())}i===document.activeElement&&1===this.parent.element.querySelectorAll(".e-selection").length&&(this.parent.dotNetRef.invokeMethodAsync("OpenDialog",i.getAttribute("data-id")),i.focus())},e.prototype.addRemoveTabIndex=function(e){var t="Add"===e?"0":"-1",i=[].slice.call(this.parent.element.querySelectorAll(".e-header-icon"));i.length>0&&i.forEach((function(e){e.setAttribute("tabindex",t)}));var s=[].slice.call(this.parent.element.querySelectorAll(".e-swimlane-row-expand"));s.length>0&&s.forEach((function(e){e.setAttribute("tabindex",t)}));[].slice.call(this.parent.element.querySelectorAll(".e-content-row:not(.e-swimlane-row) .e-content-cells")).forEach((function(e){e.setAttribute("tabindex",t)}))},e.prototype.destroy=function(){this.keyboardModule.destroy()},e}(),n=function(){function t(e){this.parent=e,this.tabHold=!1}return t.prototype.wireTouchEvents=function(){this.element=this.parent.element.querySelector("."+e),this.touchObj=new sf.base.Touch(this.element,{tapHold:this.tapHoldHandler.bind(this)})},t.prototype.tapHoldHandler=function(e){this.tabHold=!0,sf.base.closest(e.originalEvent.target,".e-card")&&"Multiple"===this.parent.cardSettings.selectionType&&(this.mobilePopup||(this.renderMobilePopup(),this.mobilePopup.show()),this.updatePopupContent())},t.prototype.renderMobilePopup=function(){if("Multiple"===this.parent.cardSettings.selectionType){var e=sf.base.createElement("div",{className:"e-mobile-popup-wrapper e-popup-close",innerHTML:'<div class="e-popup-header"><button class="e-btn e-close e-flat e-round e-small"><span class="e-icons e-close-icon"></span></button></div><div class="e-popup-content"></div>'});document.body.appendChild(e),sf.base.addClass([e],"e-device"),this.mobilePopup=new sf.popups.Popup(e,{targetType:"container",enableRtl:this.parent.enableRtl,hideAnimation:{name:"ZoomOut"},showAnimation:{name:"ZoomIn"},collision:{X:"fit",Y:"fit"},position:{X:"left",Y:"top"},viewPortElement:document.body,zIndex:1004,close:this.popupClose.bind(this)});var t=this.mobilePopup.element.querySelector(".e-close");sf.base.EventHandler.add(t,"click",this.closeClick,this)}},t.prototype.closeClick=function(){this.mobilePopup.hide()},t.prototype.popupClose=function(){this.popupDestroy()},t.prototype.getPopupContent=function(){var e,t=this.parent.getSelectedCards();return t.length>1?e="("+t.length+") Cards Selected":1===t.length&&(e=" "+t[0].getAttribute("data-id")),e},t.prototype.updatePopupContent=function(){if(this.mobilePopup){var e=this.getPopupContent();e?this.mobilePopup.element.querySelector(".e-popup-content").textContent=e:this.mobilePopup.hide()}},t.prototype.popupDestroy=function(){this.mobilePopup&&this.mobilePopup.element&&(this.mobilePopup.destroy(),sf.base.remove(this.mobilePopup.element),this.mobilePopup=null)},t.prototype.unWireTouchEvents=function(){this.touchObj&&this.touchObj.destroy(),this.touchObj=null,this.element=null},t.prototype.destroy=function(){this.popupDestroy(),this.unWireTouchEvents(),this.tabHold=!1},t}(),o=function(){function o(e){window.sfBlazor=window.sfBlazor,this.updateContext(e),this.columnToggleArray=[],this.selectionArray=[],this.lastCardSelection=null,this.lastSelectionRow=null,this.lastCard=null,this.selectedCardsElement=[],this.selectedCardsData=[],this.hideColumnKeys=[],this.frozenOrder=0,this.scrollPosition={content:{},column:{}},this.initializeModules(),this.scrollUiUpdate(),this.wireEvents(),window.sfBlazor&&(sf.base.isNullOrUndefined(window.sfBlazor.instances)&&(window.sfBlazor.instances=[]),window.sfBlazor.instances[this.dataId]=this)}return o.prototype.initializeModules=function(){(this.isAdaptive||sf.base.Browser.isTouch)&&(this.touchModule=new n(this)),this.allowDragAndDrop&&(this.dragAndDropModule=new i(this)),this.allowKeyboard&&(this.keyboardModule=new s(this)),this.scrollPosition.content={left:0,top:0},this.initializeSwimlaneTree()},o.prototype.updateContext=function(e){sf.base.extend(this,this,e)},o.prototype.getSelectedCards=function(){return[].slice.call(this.element.querySelectorAll(".e-card.e-selection"))},o.prototype.documentClick=function(e){if(e.target&&this.element.querySelector(".e-swimlane-resource")&&e.target.classList.contains("e-swimlane-overlay")&&this.element.querySelector(".e-swimlane-resource").classList.contains("e-popup-open")&&(this.treePopup.hide(),sf.base.removeClass([this.popupOverlay],"e-enable")),!sf.base.closest(e.target,".e-kanban")){var t=[].slice.call(this.element.querySelectorAll(".e-card.e-selection"));sf.base.removeClass(t,"e-selection"),this.disableAttributeSelection(t)}},o.prototype.disableAttributeSelection=function(e){e instanceof Element?e.setAttribute("aria-selected","false"):e.forEach((function(e){e.setAttribute("aria-selected","false")}))},o.prototype.wireDragEvent=function(){var e=this;if(this.allowDragAndDrop){var t=[].slice.call(this.element.querySelectorAll(".e-content-cells.e-drag .e-card:not(e-draggable)"));sf.base.addClass(t,"e-droppable"),t.forEach((function(t){return e.dragAndDropModule.wireDragEvents(t)}))}},o.prototype.initializeSwimlaneTree=function(){if(this.swimlaneSettings.keyField&&this.isAdaptive){var t=this.element.querySelector(".e-swimlane-header").offsetHeight,i=window.innerHeight-t;this.popupOverlay=this.element.querySelector(".e-swimlane-content .e-swimlane-overlay"),sf.base.setStyleAttribute(this.element.querySelector(".e-swimlane-overlay"),{height:i+"px"}),sf.base.setStyleAttribute(this.element.querySelector(".e-swimlane-content"),{top:t+"px"});var s=this.element.querySelector(".e-swimlane-resource");sf.base.setStyleAttribute(s,{height:i+"px"});var n={targetType:"relative",actionOnScroll:"none",enableRtl:this.enableRtl,zIndex:10,hideAnimation:{name:"SlideLeftOut",duration:500},showAnimation:{name:"SlideLeftIn",duration:500},viewPortElement:this.element.querySelector("."+e)};this.treePopup=new sf.popups.Popup(s,n)}},o.prototype.cardSelection=function(e,t,i){var s=this;if(e){var n=this.getSelectedCards();if("None"!==this.cardSettings.selectionType){var o=sf.base.closest(e,".e-content-row");if((sf.base.isNullOrUndefined(this.lastSelectionRow)?o.rowIndex:this.lastSelectionRow.rowIndex)!==o.rowIndex&&(t||i)&&"Multiple"===this.cardSettings.selectionType)return;if(0===n.length||t&&"Single"!==this.cardSettings.selectionType||(sf.base.removeClass(n,"e-selection"),this.disableAttributeSelection(n),n.forEach((function(e){s.selectionArray.splice(s.selectionArray.indexOf(e.getAttribute("data-id")),1),s.selectedCardsElement.splice(s.selectedCardsElement.indexOf(e),1)}))),n.length>0&&i&&"Multiple"===this.cardSettings.selectionType){var r=[],a=void 0,l=void 0,h=void 0,d=[].slice.call(o.querySelectorAll(".e-card"));d.forEach((function(e){return r.push(e.getAttribute("data-id"))}));var c=e.getAttribute("data-id"),p=this.lastCard.getAttribute("data-id"),u=l=r.indexOf(c),f=a=r.indexOf(p),g=u>f?"next":"prev";for("prev"===g&&(a=u,l=f),h=a;h<=l;h++){var m=d[h];sf.base.addClass([m],"e-selection"),m.setAttribute("aria-selected","true"),m.setAttribute("tabindex","0"),this.selectionArray.push(m.getAttribute("data-id")),this.selectedCardsElement.push(m),this.lastCardSelection=m,"prev"===g&&(this.lastCardSelection=d[a])}}else if(sf.base.addClass([e],"e-selection"),e.setAttribute("aria-selected","true"),e.setAttribute("tabindex","0"),this.selectionArray.push(e.getAttribute("data-id")),this.selectedCardsElement.push(e),this.lastCard=this.lastCardSelection=e,this.lastSelectionRow=sf.base.closest(e,".e-content-row"),this.lastSelectionRow.previousElementSibling){var v=this.lastSelectionRow.previousElementSibling.querySelector(".e-swimlane-row-expand,.e-swimlane-row-collapse");v&&v.classList.contains("e-swimlane-row-collapse")&&v.click()}}}},o.prototype.scrollUiUpdate=function(){var t=this,i=this.element.querySelector(".e-kanban-header"),s=this.element.querySelector("."+e),n=this.element.offsetHeight-i.offsetHeight;if(this.isAdaptive){n=window.innerHeight-(i.offsetHeight+25);var o=this.element.querySelector(".e-swimlane-header");o&&(n-=o.offsetHeight),[].slice.call(this.element.querySelectorAll(".e-content-cells")).forEach((function(e){var i=e.querySelector(".e-card-container");i.classList.contains("e-multi-card-container")||(i.style.height=sf.base.formatUnit(n),sf.base.EventHandler.add(e,"touchmove",t.onAdaptiveScroll,t))}))}"auto"!==this.height&&"100%"!==this.height&&(s.style.height=sf.base.formatUnit(n)),[].slice.call(i.children).forEach((function(e){var i=0;s.offsetWidth-s.clientWidth>0&&(i=17,s.offsetHeight-s.clientHeight>0&&(e.style.width=sf.base.formatUnit(s.clientWidth))),t.enableRtl?e.style.paddingLeft=sf.base.formatUnit(i):e.style.paddingRight=sf.base.formatUnit(i)}))},o.prototype.onContentScroll=function(e){var t=e.target,i=this.element.querySelector(".e-kanban-header");[].slice.call(i.children).forEach((function(e){e.scrollLeft=t.scrollLeft})),this.scrollPosition.content={left:t.scrollLeft,top:t.scrollTop},!sf.base.isNullOrUndefined(this.swimlaneSettings.keyField)&&this.swimlaneSettings.enableFrozenRows&&this.frozenRows(e)},o.prototype.frozenRows=function(t){var i=this.element.querySelector(".e-swimlane-row"),s=this.element.querySelector(".e-kanban-header"),n=this.element.querySelector("."+e);if(sf.base.isNullOrUndefined(this.frozenSwimlaneRow)){this.frozenSwimlaneRow=sf.base.createElement("div",{className:"e-frozen-swimlane-row"});var o=sf.base.createElement("div",{className:"e-frozen-row"});this.frozenSwimlaneRow.appendChild(o),this.element.insertBefore(this.frozenSwimlaneRow,this.element.firstElementChild),i&&(o.appendChild(i.querySelector(".e-swimlane-header").cloneNode(!0)),sf.base.addClass([o.querySelector(".e-icons")],"e-frozen-icons"),sf.base.setStyleAttribute(this.frozenSwimlaneRow,{height:sf.base.formatUnit(i.getBoundingClientRect().height),width:sf.base.formatUnit(n.querySelector(".e-swimlane").getBoundingClientRect().width),top:sf.base.formatUnit(s.getBoundingClientRect().height.toString())}),sf.base.setStyleAttribute(s,{position:"relative",top:sf.base.formatUnit(-this.frozenSwimlaneRow.getBoundingClientRect().height)}),sf.base.setStyleAttribute(n,{position:"relative",top:sf.base.formatUnit(-this.frozenSwimlaneRow.getBoundingClientRect().height)}))}else{var r=[].slice.call(this.element.querySelectorAll(".e-swimlane-row")),a=r[this.frozenOrder],l=r[this.frozenOrder-1],h=r[this.frozenOrder+1],d=void 0,c=void 0,p=void 0;a&&(d=a.getBoundingClientRect().top+a.getBoundingClientRect().height),l&&(c=l.getBoundingClientRect().top+l.getBoundingClientRect().height),h&&(p=h.getBoundingClientRect().top+h.getBoundingClientRect().height);var u=n.getBoundingClientRect().top+this.frozenSwimlaneRow.getBoundingClientRect().height,f=this.frozenSwimlaneRow.querySelector(".e-frozen-row");p&&u>=p&&this.frozenOrder<r.length-1?(f&&(sf.base.remove(f.querySelector(".e-swimlane-header")),h&&f.appendChild(h.querySelector(".e-swimlane-header").cloneNode(!0)),sf.base.addClass([f.querySelector(".e-icons")],"e-frozen-icons")),++this.frozenOrder):c&&u<d&&u>c&&this.frozenOrder>0&&(f&&(sf.base.remove(f.querySelector(".e-swimlane-header")),l&&f.appendChild(l.querySelector(".e-swimlane-header").cloneNode(!0)),sf.base.addClass([f.querySelector(".e-icons")],"e-frozen-icons")),--this.frozenOrder)}t&&0==t.target.scrollTop&&this.removeFrozenRows()},o.prototype.removeFrozenRows=function(){sf.base.remove(this.frozenSwimlaneRow),this.frozenSwimlaneRow=null;var t=this.element.querySelector(".e-kanban-header"),i=this.element.querySelector("."+e);sf.base.setStyleAttribute(t,{position:"",top:""}),sf.base.setStyleAttribute(i,{position:"",top:""}),this.scrollPosition.content={left:this.scrollPosition.content.left,top:0},i.scrollTop=0},o.prototype.onColumnScroll=function(e){var t=e.target;if(t.offsetParent){var i=t.offsetParent.getAttribute("data-key");this.scrollPosition.column[i]={left:t.scrollLeft,top:t.scrollTop}}},o.prototype.onAdaptiveScroll=function(e){this.touchModule.tabHold&&!this.touchModule.mobilePopup&&e.preventDefault()},o.prototype.updateScrollPosition=function(){var t=this,i=this.element.querySelector("."+e);i&&i.scrollTo(this.scrollPosition.content.left,this.scrollPosition.content.top),[].slice.call(this.element.querySelectorAll(".e-card-container")).forEach((function(e){if(e.offsetParent){var i=t.scrollPosition.column[e.offsetParent.getAttribute("data-key")];i&&e.scrollTo(i.left,i.top)}}))},o.prototype.wireEvents=function(){var t=this,i=this.element.querySelector("."+e);sf.base.EventHandler.add(i,"scroll",this.onContentScroll,this),sf.base.EventHandler.add(document,sf.base.Browser.touchStartEvent,this.documentClick,this),[].slice.call(this.element.querySelectorAll(".e-card-container")).forEach((function(e){e.offsetParent&&(t.scrollPosition.column[e.offsetParent.getAttribute("data-key")]={left:0,top:0}),sf.base.EventHandler.add(e,"scroll",t.onColumnScroll,t)})),this.isAdaptive&&this.touchModule.wireTouchEvents(),this.wireDragEvent()},o.prototype.unWireEvents=function(){var t=this,i=this.element.querySelector("."+e);(sf.base.EventHandler.remove(i,"scroll",this.onContentScroll),sf.base.EventHandler.remove(document,sf.base.Browser.touchStartEvent,this.documentClick),[].slice.call(this.element.querySelectorAll(".e-card-container")).forEach((function(e){sf.base.EventHandler.remove(e,"scroll",t.onColumnScroll)})),this.isAdaptive)&&([].slice.call(this.element.querySelectorAll(".e-content-cells")).forEach((function(e){sf.base.EventHandler.remove(e,"touchmove",t.onAdaptiveScroll)})),this.touchModule.unWireTouchEvents())},o.prototype.onCardClick=function(e,t){if(e){if(e.classList.contains("e-selection"))sf.base.removeClass([e],"e-selection"),this.disableAttributeSelection(e);else{var i=t.ctrlKey;this.isAdaptive&&this.touchModule&&(i=this.touchModule.mobilePopup&&this.touchModule.tabHold||i),this.cardSelection(e,i,t.shiftKey)}this.isAdaptive&&this.touchModule&&this.touchModule.updatePopupContent();var s=sf.base.closest(e,".e-content-cells");if(this.allowKeyboard)[].slice.call(s.querySelectorAll(".e-card")).forEach((function(e){e.setAttribute("tabindex","0")})),this.keyboardModule.addRemoveTabIndex("Remove")}},o.prototype.onMenuClick=function(){this.element.querySelector(".e-swimlane-resource").classList.contains("e-popup-open")?(this.treePopup.hide(),sf.base.removeClass([this.popupOverlay],"e-enable")):(this.treePopup.show(),sf.base.addClass([this.popupOverlay],"e-enable"))},o.prototype.onListViewClick=function(){this.treePopup.hide(),sf.base.removeClass([this.popupOverlay],"e-enable")},o.prototype.onPropertyChanged=function(e){for(var t=0,i=e;t<i.length;t++){switch(i[t]){case"width":this.setWidth();break;case"height":this.setHeight();break;case"enableRtl":this.enableRtl?sf.base.addClass([this.element],"e-rtl"):sf.base.removeClass([this.element],"e-rtl")}}},o.prototype.getWidth=function(){return 80*window.innerWidth/100},o.prototype.onToggleColumn=function(e,i){var s=this,n=[].slice.call(this.element.querySelectorAll('.e-kanban-table col[data-key="'+e+'"]')),o=[].slice.call(this.element.querySelectorAll('.e-content-cells[data-key="'+e+'"]')),r=this.element.querySelector('.e-header-cells[data-key="'+e+'"]');i?(sf.base.removeClass(n,"e-collapsed"),this.isAdaptive&&n.forEach((function(e){return e.style.width=sf.base.formatUnit(s.getWidth())})),sf.base.removeClass(o,"e-collapsed"),sf.base.removeClass([r],"e-collapsed"),sf.base.classList(r.querySelector(".e-header-icon"),["e-column-expand"],["e-column-collapse"]),r.setAttribute("aria-expanded","true"),o.forEach((function(e){e.querySelector(".e-collapse-header-text").style.display="none",e.querySelector("."+t)&&(e.querySelector("."+t).style.display=""),e.setAttribute("aria-expanded","true")})),r.querySelector(".e-header-icon").setAttribute("aria-label",e+" Expand")):(sf.base.addClass(n,"e-collapsed"),this.isAdaptive&&n.forEach((function(e){return e.style.width=sf.base.formatUnit(50)})),sf.base.addClass(o,"e-collapsed"),sf.base.addClass([r],"e-collapsed"),sf.base.classList(r.querySelector(".e-header-icon"),["e-column-collapse"],["e-column-expand"]),r.setAttribute("aria-expanded","false"),o.forEach((function(e){e.querySelector(".e-collapse-header-text").style.display="",e.querySelector("."+t)&&(e.querySelector("."+t).style.display="none"),e.setAttribute("aria-expanded","false")})),r.querySelector(".e-header-icon").setAttribute("aria-label",e+" Collapse"))},o.prototype.onSwimlaneProperties=function(e,t,i){this.swimlaneSettings.allowDragAndDrop=e,this.swimlaneSettings.keyField=t,this.swimlaneSettings.enableFrozenRows=i,this.frozenSwimlaneRow&&!this.swimlaneSettings.enableFrozenRows&&this.removeFrozenRows()},o.prototype.setWidth=function(){"100%"===this.width?this.element.style.width="":sf.base.setStyleAttribute(this.element,{width:sf.base.formatUnit(this.width)})},o.prototype.setHeight=function(){sf.base.setStyleAttribute(this.element,{height:sf.base.formatUnit(this.height)})},o.prototype.destroy=function(){this.touchModule&&this.touchModule.destroy(),this.dragAndDropModule&&this.dragAndDropModule.destroy(),this.keyboardModule&&this.keyboardModule.destroy(),this.unWireEvents()},o}();return{initialize:function(e){e.dataId&&new o(e)},isDevice:function(e){e.invokeMethodAsync("WindowWidth",70*window.innerWidth/100)},updateScrollPosition:function(e){e&&window.sfBlazor.instances[e].updateScrollPosition()},wireDragEvents:function(e){e&&window.sfBlazor.instances[e].wireDragEvent()},propertyChanged:function(e,t){e&&window.sfBlazor.instances[e].onPropertyChanged(t)},swimlaneProperties:function(e,t,i,s){e&&window.sfBlazor.instances[e].onSwimlaneProperties(t,i,s)},cardClick:function(e,t,i){window.sfBlazor.instances[e].onCardClick(t,i)},menuClick:function(e){window.sfBlazor.instances[e].onMenuClick()},listViewClick:function(e){window.sfBlazor.instances[e].onListViewClick()},toggleColumn:function(e,t,i){e&&window.sfBlazor.instances[e].onToggleColumn(t,i)},getTargetDetails:function(e,t,i,s,n){if(e&&window.sfBlazor){var o=window.sfBlazor.instances[e].element,r=document.elementFromPoint(t,i),a=void 0,l=null;if("tooltip"===n)return s?(a=sf.base.closest(r,".e-card"),l=JSON.stringify(a.getAttribute("data-id"))):r.classList.contains("e-tooltip-text")&&(l=JSON.stringify(r.innerText)),o.querySelector(".e-cloned-card")&&(l=null),l;if(a=sf.base.closest(r,".e-content-cells")){var h={};h.columnKeyField=a.getAttribute("data-key"),a.parentElement.previousElementSibling&&(h.swimlaneKeyField=a.parentElement.previousElementSibling.getAttribute("data-key"));var d=sf.base.closest(r,".e-card");if(d){var c=[].slice.call(a.querySelectorAll(".e-card"));h.index=c.indexOf(d),h.currentCardId=d.getAttribute("data-id"),d.previousElementSibling?h.previousCardId=d.previousElementSibling.getAttribute("data-id"):h.previousCardId=null}else{var p=a,u=null!=o.querySelector(".e-card")?parseInt(getComputedStyle(o.querySelector(".e-card")).marginBottom.replace("px","")):null;i-a.getBoundingClientRect().top>=u&&(p=document.elementFromPoint(t,i-u));var f=sf.base.closest(p,".e-card");if(f){c=[].slice.call(a.querySelectorAll(".e-card"));h.index=c.indexOf(f),h.previousCardId=f.getAttribute("data-id")}else{c=[].slice.call(a.querySelectorAll(".e-card"));i-a.getBoundingClientRect().top>=u&&c.length>0?h.previousCardId=c[c.length-1].getAttribute("data-id"):h.previousCardId=null}}return JSON.stringify(h)}}return null},destroy:function(e){e&&window.sfBlazor.instances[e].destroy()}}}()},"./modules/sf-lineargauge.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.LinearGauge=function(){"use strict";var e=function(){function e(e,t,i,s){this.dragMillisecond=0,window.sfBlazor=window.sfBlazor,this.valueToCoefficient=function(e,t){var i=(e-t.Minimum)/t.Maximum;return i="Vertical"===t.Orientation?t.IsInversed&&"Thermometer"!==t.ContainerType?i:1-i:t.IsInversed&&"Thermometer"!==t.ContainerType?1-i:i},this.barAnimationProgress=function(e,t,i,s,n,o){var r=e.PointerValue>e.PreviousPointerValue?s+t*n:s+t*(e.PreviousPointerValue-n),a=e.PointerValue>e.PreviousPointerValue?r+e.PreviousPointerValue<e.PointerValue?r+e.PreviousPointerValue:e.PointerValue:e.PreviousPointerValue-r,l=this.valueToCoefficient(a,e)*e.RectHeight+e.RectY,h=this.valueToCoefficient(e.Minimum,e)*e.RectHeight+e.RectY,d=Math.abs(l-h);"Vertical"===e.Orientation?(e.PointerBoundY="Thermometer"===e.ContainerType?l:e.IsInversed?h:l,e.PointerBoundHeight=d,"Bar"===e.PointerType&&"Normal"===e.ContainerType&&(i.setAttribute("y",e.PointerBoundY.toString()),i.setAttribute("height",e.PointerBoundHeight.toString()),i.setAttribute("x",e.PointerBoundX.toString()),i.setAttribute("width",e.PointerWidth.toString())),"path"===i.tagName&&i.setAttribute("d",o?"":this.getPathContainer(e))):(e.PointerBoundX="Thermometer"===e.ContainerType?h:e.IsInversed?l:h,e.PointerBoundWidth=d,"Bar"===e.PointerType&&"Normal"===e.ContainerType&&(i.setAttribute("x",e.PointerBoundX.toString()),i.setAttribute("width",e.PointerBoundWidth.toString()),i.setAttribute("y",e.PointerBoundY.toString()),i.setAttribute("height",e.PointerHeight.toString())),"path"===i.tagName&&i.setAttribute("d",o?"":this.getPathContainer(e)))},this.markerAnimationProgress=function(e,t,i,s,n){var o=e.PointerValue>e.PreviousPointerValue?s+t*n:s+t*(e.PreviousPointerValue-n),r=e.PointerValue>e.PreviousPointerValue?o+e.PreviousPointerValue<e.PointerValue?o+e.PreviousPointerValue:e.PointerValue:e.PreviousPointerValue-o,a=e.MarkerType;if("InvertedTriangle"!=e.MarkerType&&"Triangle"!=e.MarkerType||(a=("Outside"==e.Position&&!e.OpposedPosition||"Inside"==e.Position&&e.OpposedPosition||"Cross"==e.Position)&&"Triangle"==e.MarkerType?"InvertedTriangle":("Inside"==e.Position&&!e.OpposedPosition||"Outside"==e.Position&&e.OpposedPosition)&&"InvertedTriangle"==e.MarkerType?"Triangle":e.MarkerType),"Vertical"===e.Orientation){var l=e.PointerBoundX;if(e.PointerBoundY=this.valueToCoefficient(r,e)*e.RectHeight+e.RectY,"Circle"===e.MarkerType){var h=(e.PointerWidth+e.PointerHeight)/4,d=e.OpposedPosition?"Near"==e.Placement?l-h:l+h:"Far"!=e.Placement?l-h:l+h;i.setAttribute("cy",e.PointerBoundY.toString()),i.setAttribute("cx",d.toString())}else if("Image"===e.MarkerType||"Rectangle"===e.MarkerType){var c=!e.OpposedPosition&&"Far"!=e.Placement||e.OpposedPosition&&"Near"==e.Placement?l-e.PointerWidth:l;i.setAttribute("y",(e.PointerBoundY-e.PointerHeight/2).toString()),i.setAttribute("x",c.toString())}else i.setAttribute("d",this.calculateShapes(e,a))}else{e.PointerBoundX=this.valueToCoefficient(r,e)*e.RectHeight+e.RectY;var p=e.PointerBoundY;if("Circle"===e.MarkerType){h=(e.PointerWidth+e.PointerHeight)/4;var u=e.OpposedPosition?"Near"==e.Placement?p-h:p+h:"Far"==e.Placement?p+h:p-h;i.setAttribute("cx",e.PointerBoundX.toString()),i.setAttribute("cy",u.toString())}else if("Image"===e.MarkerType||"Rectangle"===e.MarkerType){var f=e.PointerHeight,g=e.OpposedPosition?"Near"==e.Placement?p-f/2:p+f/2:"Far"==e.Placement?p+f/2:p-f/2;i.setAttribute("x",(e.PointerBoundX-e.PointerWidth/2).toString()),i.setAttribute("y",g.toString())}else i.setAttribute("d",this.calculateShapes(e,a))}},this.id=e,this.element=t,this.dotNetRef=s,this.options=i,this.dataId=e,window.sfBlazor.setCompInstance(this)}return e.prototype.destroy=function(){this.dotNetRef=null,this.unWireEvents()},e.prototype.unWireEvents=function(){
/*! Bind the Event handler */
sf.base.EventHandler.remove(this.element,sf.base.Browser.touchStartEvent,this.gaugeOnMouseDown),sf.base.EventHandler.remove(this.element,sf.base.Browser.touchMoveEvent,this.gaugeOnMouseMove),sf.base.EventHandler.remove(this.element,sf.base.Browser.touchEndEvent,this.gaugeOnMouseEnd),sf.base.EventHandler.remove(this.element,sf.base.Browser.touchCancelEvent,this.gaugeOnMouseEnd),sf.base.EventHandler.remove(this.element,"click",this.gaugeOnMouseClick),sf.base.EventHandler.remove(this.element,"mouseleave",this.gaugeOnMouseLeave),window.removeEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.gaugeOnResize.bind(this))},e.prototype.render=function(){this.wireEvents()},e.prototype.wireEvents=function(){
/*! Bind the Event handler */
sf.base.EventHandler.add(this.element,sf.base.Browser.touchStartEvent,this.gaugeOnMouseDown,this),sf.base.EventHandler.add(this.element,sf.base.Browser.touchMoveEvent,this.gaugeOnMouseMove,this),sf.base.EventHandler.add(this.element,sf.base.Browser.touchEndEvent,this.gaugeOnMouseEnd,this),sf.base.EventHandler.add(this.element,sf.base.Browser.touchCancelEvent,this.gaugeOnMouseEnd,this),sf.base.EventHandler.add(this.element,"click",this.gaugeOnMouseClick,this),sf.base.EventHandler.add(this.element,"mouseleave",this.gaugeOnMouseLeave,this),window.addEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.gaugeOnResize.bind(this))},e.prototype.gaugeOnResize=function(){var e,t;if(!sf.base.isNullOrUndefined(this.element)){var i=document.getElementById(this.element.id+"_svg");if(!sf.base.isNullOrUndefined(i)){i.style.display="none";var s=this.element.getBoundingClientRect();e=s.width,t=s.height,i.style.removeProperty("display")}}this.previousHeight===t&&this.previousWidth===e||(this.previousHeight=t,this.previousWidth=e,sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerResizeEvent",e,t))},e.prototype.gaugeOnMouseClick=function(e){var t=e.target.id;(t.indexOf("Bar")>-1||t.indexOf("Marker")>-1)&&(this.pointerCheck=!1)},e.prototype.gaugeOnMouseLeave=function(e){sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerMouseLeaveEvent",e.x,e.y)},e.prototype.gaugeOnMouseDown=function(e){var t=e.target.id,i=0,s=0;if("touchstart"===e.type?(i=e.touches[0].clientX,s=e.touches[0].clientY):(i=e.pageX,s=e.pageY),t.indexOf("Bar")>-1||t.indexOf("Marker")>-1){this.pointerCheck=!0,this.pointerId=t;var n=parseInt(t.split("_AxisIndex_")[1].split("_")[0],10),o=parseInt(t.split("_AxisIndex_")[1].split("_")[2],10);sf.base.isNullOrUndefined(this.enableDragCollection)||!this.enableDragCollection[n][o]||sf.base.isNullOrUndefined(this.dotNetRef)||(e.preventDefault(),this.dotNetRef.invokeMethodAsync("TriggerDragStart",n,o))}else sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerMouseDownEvent",i,s)},e.prototype.gaugeOnMouseMove=function(e){var t=new Date,i=this.pointerCheck?this.pointerId:e.target.id,s=0,n=0;if("touchmove"===e.type?(s=e.touches[0].clientX,n=e.touches[0].clientY):(s=e.clientX,n=e.clientY),i.indexOf("Bar")>-1||i.indexOf("Marker")>-1){var o=this.svgClient(i),r=parseInt(i.split("_AxisIndex_")[1].split("_")[0],10),a=parseInt(i.split("_AxisIndex_")[1].split("_")[2],10);this.pointerCheck&&(0==this.dragMillisecond||Math.abs(t.getMilliseconds()-this.dragMillisecond)>80)&&!sf.base.isNullOrUndefined(this.enableDragCollection)&&this.enableDragCollection[r][a]&&!sf.base.isNullOrUndefined(this.dotNetRef)?(this.dragMillisecond=t.getMilliseconds(),document.getElementById(this.id+"_svg").setAttribute("cursor","grabbing"),this.dotNetRef.invokeMethodAsync("TriggerDrag",i,r,a,s-o.left,n-o.top)):this.pointerCheck||sf.base.isNullOrUndefined(this.enableDragCollection)||!this.enableDragCollection[r][a]||document.getElementById(this.id+"_svg").setAttribute("cursor","pointer")}else sf.base.isNullOrUndefined(document.getElementById(this.id+"_svg"))||document.getElementById(this.id+"_svg").setAttribute("cursor","auto");if(i.indexOf("Bar")>-1||i.indexOf("Marker")>-1||i.indexOf("Range")>-1){o=this.svgClient(i),r=parseInt(i.split("_AxisIndex_")[1].split("_")[0],10),a=parseInt(i.split("_AxisIndex_")[1].split("_")[2],10);var l=i.split("_")[0],h=document.getElementById(l).getBoundingClientRect(),d={Bottom:h.bottom,Height:h.height,Left:h.left,Right:h.right,Top:h.top,Width:h.width,X:h.x,Y:h.y},c=document.getElementById(l+"_AxisLine_"+r).getBoundingClientRect(),p={Bottom:c.bottom,Height:c.height,Left:c.left,Right:c.right,Top:c.top,Width:c.width,X:c.x,Y:c.y},u=document.getElementById(l+"_MajorTicksLine_"+r).getBoundingClientRect(),f={Bottom:u.bottom,Height:u.height,Left:u.left,Right:u.right,Top:u.top,Width:u.width,X:u.x,Y:u.y},g=document.getElementById(i).getBoundingClientRect(),m={Bottom:g.bottom,Height:g.height,Left:g.left,Right:g.right,Top:g.top,Width:g.width,X:g.x,Y:g.y},v=i.split("_")[0];null!=(b=document.getElementById(v+"_Tooltip"))&&(b.style.visibility="visible"),sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerTooltip",i,r,a,s-o.left,n-o.top,d,p,f,m)}else{var b;v=i.split("_")[0];null!=(b=document.getElementById(v+"_Tooltip"))&&(b.style.visibility="hidden")}},e.prototype.gaugeOnMouseEnd=function(e){var t=this.pointerCheck?this.pointerId:e.target.id,i=0,s=0;if("touchend"===e.type){var n=e;i=n.changedTouches[0].pageX,s=n.changedTouches[0].pageY}else i=e.clientX,s=e.clientY;if(this.pointerCheck=!1,t.indexOf("Bar")>-1||t.indexOf("Marker")>-1){this.pointerCheck=!1,this.dragMillisecond=0,this.pointerId="";var o=this.svgClient(t),r=t.split("_AxisIndex_")[0].split("_")[0],a=parseInt(t.split("_AxisIndex_")[1].split("_")[0],10),l=parseInt(t.split("_AxisIndex_")[1].split("_")[2],10);sf.base.isNullOrUndefined(this.enableDragCollection)||!this.enableDragCollection[a][l]||sf.base.isNullOrUndefined(this.dotNetRef)||(document.getElementById(this.id+"_svg").setAttribute("cursor","pointer"),this.dotNetRef.invokeMethodAsync("TriggerDragEnd",a,l,r,t,i-o.left,s-o.top))}else sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerMouseUpEvent",i,s)},e.prototype.svgClient=function(e){return document.getElementById(e.split("_AxisIndex_")[0]+"_svg").getBoundingClientRect()},e.prototype.pointerAnimation=function(e){var t=this,i=document.getElementById(e.AnimationId),s=e.Minimum,n=e.PointerValue;s=s===n?e.Minimum:s;var o,r=Math.abs(s-n);new sf.base.Animation({}).animate(i,{duration:e.Duration,progress:function(n){o=n.timeStamp/e.Duration,"Bar"!=e.PointerType?t.markerAnimationProgress(e,o,i,s,r):t.barAnimationProgress(e,o,i,s,r,!1)},end:function(n){o=1,"Bar"!=e.PointerType?t.markerAnimationProgress(e,o,i,s,r):t.barAnimationProgress(e,o,i,s,r,"RoundedRectangle"===e.ContainerType&&e.Minimum===e.PointerValue)}})},e.prototype.getPathContainer=function(e){var t=" ",i=e.CornerRadius,s=e.PointerBoundWidth,n=e.PointerBoundHeight,o=e.Orientation,r=e.IsInversed,a=e.PointerType,l=e.PointerBoundX,h=e.PointerBoundY,d=0,c=0;switch(e.ContainerType){case"RoundedRectangle":var p=l+s-i,u=h+n-i,f=i+h,g=i+l;"Bar"===a&&("Vertical"===o&&0!==n||"Horizontal"===o&&0!==s)&&(g>l+s/2&&(g=p=l+s/2),f>h+n/2&&(f=u=h+n/2)),"Bar"===a&&("Vertical"===o&&0===n||"Horizontal"===o&&0===s)&&(s<i/2&&!r?p=p+i+i/2:s<i/2&&r&&(g=l-Math.ceil(i/4)),n<i/2&&!r?f=h-Math.ceil(i/4):n<i/2&&r&&(u=u+i+i/2)),t="M "+l+" "+f+" Q "+l+" "+h+" "+g+" "+h+" L "+p+" "+h+" Q "+(l+s)+" "+h+" "+(l+s)+" "+f+" L "+(l+s)+" "+u+" Q "+(l+s)+" "+(h+n)+" "+p+" "+(h+n)+"  L "+g+" "+(h+n)+" Q "+l+" "+(h+n)+" "+l+" "+u+" L "+l+" "+f+" z";break;case"Thermometer":var m="Vertical"===o?s:n;if(d=m+m/2/Math.PI,c=m/2,"Vertical"===o){var v=e.ContainerWidth+e.ContainerWidth/2/Math.PI-d,b="Bar"===a?h+v:h,y="Bar"===a?h+(c-c/Math.PI):h;t="M"+l+" "+(b+n)+" A "+d+" "+d+", 0, 1, 0, "+(l+s)+" "+(b+n)+" L "+(l+s)+" "+y+" A "+c+" "+c+", 0, 1, 0, "+l+" "+y+" z "}else{var M="Bar"!==a||e.IsInversed?l:l-(e.ContainerWidth+e.ContainerWidth/2/Math.PI-d),C="Bar"===a?s-(c-c/Math.PI):s;t="M"+M+" "+h+" A "+d+" "+d+", 0, 1, 0, "+M+" "+(h+n)+" L "+(("Bar"===a?l:M)+C)+" "+(h+n)+" A "+c+" "+c+", 0, 1, 0, "+(("Bar"===a?l:M)+C)+" "+h+" z "}}return t},e.prototype.calculateShapes=function(e,t){var i,s=e.PointerWidth,n=e.PointerHeight,o=e.PointerBoundX,r=e.PointerBoundY,a=e.Placement,l=e.OpposedPosition,h=e.Orientation;switch(t){case"Diamond":i="M "+(o="Horizontal"===h?o-s/2:!l&&"Far"!==a||l&&"Near"===a?o-s:o)+" "+(r="Vertical"===h?r:l?"Near"===a?r-n/2:r+n/2:"Far"===a?r+n/2:r-n/2)+" L "+(o+s/2)+" "+(r-n/2)+" L "+(o+s)+" "+r+" L "+(o+s/2)+" "+(r+n/2)+" L "+o+" "+r+" z";break;case"Triangle":i="Vertical"===h?"M "+o+" "+r+" L"+(o-s)+" "+(r-n/2)+"L"+(o-s)+" "+(r+n/2)+" Z":"M "+o+" "+r+" L"+(o+s/2)+" "+(r-n)+"L"+(o-s/2)+" "+(r-n)+" Z";break;case"InvertedTriangle":i="Vertical"===h?"M "+o+" "+r+" L"+(o+s)+" "+(r-n/2)+"L"+(o+s)+" "+(r+n/2)+" Z":"M "+o+" "+r+" L"+(o+s/2)+" "+(r+n)+"L"+(o-s/2)+" "+(r+n)+" Z";break;case"Arrow":i="Vertical"===h?"M "+o+" "+r+" L"+(o-s/2)+" "+(r-n/2)+" L"+(o-s/2)+" "+(r-n/2+n/4)+" L"+(o-s)+" "+(r-n/2+n/4)+" L"+(o-s)+" "+(r+n/2-n/4)+" L"+(o-s/2)+" "+(r+n/2-n/4)+" L"+(o-s/2)+" "+(r+n/2)+"z":"M "+o+" "+r+" L"+(o+s/2)+" "+(r-n/2)+" L"+(o+s/2-s/4)+" "+(r-n/2)+" L"+(o+s/2-s/4)+" "+(r-n)+" L"+(o-s/2+s/4)+" "+(r-n)+" L"+(o-s/2+s/4)+" "+(r-n/2)+" L"+(o-s/2)+" "+(r-n/2)+"z";break;case"InvertedArrow":i="Vertical"===h?"M "+o+" "+r+"L"+(o+s/2)+" "+(r-n/2)+" L"+(o+s/2)+" "+(r-n/2+n/4)+" L"+(o+s)+" "+(r-n/2+n/4)+" L"+(o+s)+" "+(r+n/2-n/4)+" L"+(o+s/2)+" "+(r+n/2-n/4)+" L"+(o+s/2)+" "+(r+n/2)+"z":"M "+o+" "+r+" L"+(o+s/2)+" "+(r+n/2)+" L"+(o+s/2-s/4)+" "+(r+n/2)+" L"+(o+s/2-s/4)+" "+(r+n)+" L"+(o-s/2+s/4)+" "+(r+n)+" L"+(o-s/2+s/4)+" "+(r+n/2)+" L"+(o-s/2)+" "+(r+n/2)+"z"}return i},e}();return{initialize:function(t,i,s,n){return new e(t.id,t,i,s).render(),sf.base.isNullOrUndefined(n)||t.setAttribute("style",n),this.getElementSize(t.id)},getElementSize:function(e){var t,i,s=document.getElementById(e);if(null!=s){var n=s.getBoundingClientRect();t=n.width,i=n.height}return{width:t,height:i,isIE:sf.base.Browser.isIE}},animationProcess:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);if(s&&s.element)for(var n=JSON.parse(t.animationSettings),o=0;o<i;o++)s.pointerAnimation(n[o])},setPathAttribute:function(e,t,i,s,n,o){var r=document.getElementById(e);""===t?r.setAttribute("d",i):"Circle"==t?"Horizontal"==o?r.setAttribute("cx",s.toString()):r.setAttribute("cy",n.toString()):"Rectangle"==t||"Image"==t?"Horizontal"==o?r.setAttribute("x",s.toString()):r.setAttribute("y",n.toString()):(r.setAttribute("x",s.toString()),r.setAttribute("y",n.toString()))},updateCollection:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&(i.enableDragCollection=JSON.parse(t.enableDragCollection))},getElementBounds:function(e){var t=document.getElementById(e);if(t){var i=t.getBoundingClientRect();return{width:i.width,height:i.height,top:i.top,bottom:i.bottom,left:i.left,right:i.right}}return null},dispose:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.destroy()}}}()},"./modules/sf-listbox.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.ListBox=function(){"use strict";var e,t="e-list-item",i=function(){function i(t,i,s,n,o){this.element=t,this.dotnetRef=n,this.allowDragAndDrop=s,e=o,this.element.blazor__instance=this,this.scope=i,sf.base.EventHandler.add(this.element,"keydown",this.keyDownHandler,this),s&&this.initializeDraggable()}return i.prototype.initializeDraggable=function(){var e=this;if(this.allowDragAndDrop){var i=sf.base.select(".e-ul",this.element),s=new sf.lists.Sortable(i,{scope:this.scope,itemClass:t,beforeDragStart:this.triggerBeforeDragStart.bind(this),drag:this.triggerDrag.bind(this),dragStart:this.triggerDragStart.bind(this),beforeDrop:this.dragEnd.bind(this),placeHolder:function(){return sf.base.createElement("span",{className:"e-placeholder"})},helper:function(i){var s=e.element.cloneNode(),n=i.sender.cloneNode(!0);s.appendChild(n);var o=sf.base.select("."+t,e.element);s.style.width=o.offsetWidth+"px",s.style.height=o.offsetHeight+"px";var r=[].slice.call(sf.base.selectAll("."+t+".e-selected",e.element));return r.length&&r.length>1&&r.indexOf(i.sender)>-1&&n.appendChild(sf.base.createElement("span",{className:"e-list-badge",innerHTML:r.length.toString()})),s.style.zIndex=sf.popups.getZindexPartial(e.element).toString(),s}});this.updateDraggable(s,this.allowDragAndDrop)}},i.prototype.triggerBeforeDragStart=function(e){e.cancel=e.target.classList.contains("e-drag-prevent")},i.prototype.triggerDragStart=function(e){e.bindEvents(e.dragElement)},i.prototype.triggerDrag=function(t){var i,s,n,o=0,r=10,a=t.event;e&&(r=t.target.scrollHeight),t.target&&(t.target.classList.contains("e-listbox-container")||t.target.classList.contains("e-list-item")||t.target.classList.contains("e-input-group")||t.target.classList.contains("e-filter-parent"))&&(t.target.classList.contains("e-list-item")||t.target.classList.contains("e-input-group")||t.target.classList.contains("e-filter-parent")?(n=t.target.closest(".e-listbox-container"),sf.base.isNullOrUndefined(t.target.closest(".e-listboxtool-wrapper"))||(n=t.target.closest(".e-listboxtool-wrapper"))):n=t.target,s=(i=n.querySelector(".e-list-parent")).getBoundingClientRect(),n.classList.contains("e-filter-list")&&(o=40),s.y+i.offsetHeight-(a.pageY+36)<1?i.scrollTop=i.scrollTop+r:a.pageY-36-(s.y+o)<1&&(i.scrollTop=i.scrollTop-r)),t.target},i.prototype.dragEnd=function(e){var t,i,s,n=!1,o=!1,r=!1;s=e.target.parentElement.parentElement,"UL"==e.target.tagName&&e.target.className.indexOf("e-list-parent")>-1&&(s=e.target.parentElement),s.blazor__instance||((s=s.parentElement).className.indexOf("e-list-item")>-1&&(s=s.parentElement),s.className.indexOf("e-list-parent")>-1?s=s.parentElement.parentElement:s.className.indexOf("e-list-wrap")>-1&&(s=s.parentElement)),e.cancel=!0,s.blazor__instance?(t=s.blazor__instance.scope,i=s.blazor__instance.dotnetRef,o=this.scope===t,this.element===s&&(r=!0,o=!1)):n=!0;var a=e.helper.getBoundingClientRect();this.dotnetRef.invokeMethodAsync("DragEndAsync",n,e.droppedElement.getAttribute("data-value"),r,o,e.previousIndex,e.currentIndex,i,a.x,a.y)},i.prototype.keyDownHandler=function(e){var i=e.target;if(38===e.keyCode||40===e.keyCode)if(e.preventDefault(),i.classList.contains("e-listbox-container")){var s=sf.base.select("."+t,this.element);s&&s.focus()}else{var n=[].slice.call(sf.base.selectAll("."+t,this.element)),o=n.indexOf(i);if(o<0)return;if((o=38===e.keyCode?o-1:o+1)<0||o>n.length-1)return;n[o].focus()}else 65===e.keyCode&&e.ctrlKey&&e.preventDefault()},i.prototype.updateDraggable=function(e,i){if(e){var s=sf.base.getComponent(e.element,sf.base.Draggable);s.abort=i?"":"."+t}},i.prototype.destroyDraggable=function(){var e=sf.base.getComponent(sf.base.select(".e-ul",this.element),"sortable");sf.base.isNullOrUndefined(e)||(this.updateDraggable(e,this.allowDragAndDrop),e.destroy())},i.prototype.destroy=function(){this.destroyDraggable(),sf.base.EventHandler.remove(this.element,"keydown",this.keyDownHandler)},i.prototype.onPropertyChanged=function(e){this.allowDragAndDrop=e,e?this.initializeDraggable():this.destroyDraggable()},i.prototype.getScopedElement=function(e){return sf.base.select("#"+e).blazor__instance.dotnetRef},i}();return{initialize:function(e,t,s,n,o){if(!sf.base.isNullOrUndefined(e)){new i(e,t,s,n,o);var r,a,l=!1;e.addEventListener("touchstart",(function(){l=!1,a=null,r=setTimeout((function(){l=!0}),500)})),e.addEventListener("touchmove",(function(e){a=e.target})),e.addEventListener("touchend",(function(e){clearTimeout(r),sf.base.isNullOrUndefined(a)&&(l&&e.preventDefault(),n.invokeMethodAsync("TouchHoldAsync",l,e.target.getAttribute("data-value")))}))}},destroy:function(e){sf.base.isNullOrUndefined(e)||sf.base.isNullOrUndefined(e.blazor__instance)||e.blazor__instance.destroy()},onPropertyChanged:function(e,t){sf.base.isNullOrUndefined(e)||sf.base.isNullOrUndefined(e.blazor__instance)||e.blazor__instance.onPropertyChanged(t)},getScopedListBox:function(e,t){return e.blazor__instance.getScopedElement(t)}}}()},"./modules/sf-listview.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.ListView=function(){"use strict";var e={None:[],SlideLeft:["SlideRightOut","SlideLeftOut","SlideLeftIn","SlideRightIn"],SlideDown:["SlideTopOut","SlideBottomOut","SlideBottomIn","SlideTopIn"],Zoom:["FadeOut","FadeZoomOut","FadeZoomIn","FadeIn"],Fade:["FadeOut","FadeOut","FadeIn","FadeIn"]},t={None:[],SlideLeft:["SlideLeftOut","SlideRightOut","SlideRightIn","SlideLeftIn"],SlideDown:["SlideBottomOut","SlideTopOut","SlideTopIn","SlideBottomIn"],Zoom:["FadeZoomOut","FadeOut","FadeIn","FadeZoomIn"],Fade:["FadeOut","FadeOut","FadeIn","FadeIn"]},i="e-focused",s="e-list-item",n="e-has-child",o="e-list-header",r="e-disabled",a="e-check",l="none",h=function(){function h(e,t,i,s,n,o){this.dataSourceLevel=["defaultData_Key"],this.currentDataSourceKey="defaultData_Key",this.isWindow=!1,this.liDifference=0,this.liHeight=0,this.virtualListDifference=0,this.isCheckAll=!1,this.isFocus=!1,this.element=t,this.dotNetRef=i,this.dataId=e,this.showCheckBox=s.ShowCheckBox,this.showHeader=s.ShowHeader,this.enable=s.Enabled,this.currentUlElement=t.querySelector("ul"),this.enableVirtualization=s.EnableVirtualization,this.isWindow=!s.Height,this.enableSelectEvent=n,this.height=s.Height,this.headerTitleInfo=[s.HeaderTitle],this.selectedItems={defaultData_Key:s.SelectedElementIdInfo},this.enableRtl=s.EnableRtl,this.animation=s.Animation,this.isTemplate=s.Template,this.focusId=[],window.sfBlazor.setCompInstance(this),this.datasource=o}return h.prototype.initialize=function(){if(this.enableVirtualization){if(this.isWindow)this.dotNetRef.invokeMethodAsync("GetComponenetHeight",window.innerHeight);else if(-1!==this.height.indexOf("%")){var e=this.element.parentElement.getBoundingClientRect().height;this.dotNetRef.invokeMethodAsync("GetComponenetHeight",e/100*parseFloat(this.height))}this.updateLiElementHeight()}this.headerElement=this.element.querySelector(".e-headertext"),this.animationObject=new sf.base.Animation(this.animateOptions),this.wireEvents()},h.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"focus",this.focusHandler,this),sf.base.EventHandler.add(this.element,"mousedown",this.mouseDownHandler,this),sf.base.EventHandler.add(this.element,"keydown",this.keyActionHandler,this),sf.base.EventHandler.add(this.element,"click",this.clickHandler,this),sf.base.EventHandler.add(this.element,"focusout",this.removeFocus,this),this.touchModule=new sf.base.Touch(this.element,{swipe:this.swipeActionHandler.bind(this)}),this.enableVirtualization?(sf.base.EventHandler.add(this.element,"scroll",this.scrollHandler,this),this.isWindow&&window.addEventListener("scroll",this.scrollHandler.bind(this))):(sf.base.EventHandler.add(this.element,"mouseover",this.mouseHoverHandler,this),sf.base.EventHandler.add(this.element,"mouseout",this.mouseOutHandler,this))},h.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,"focus",this.focusHandler),sf.base.EventHandler.remove(this.element,"mousedown",this.mouseDownHandler),sf.base.EventHandler.remove(this.element,"keydown",this.keyActionHandler),sf.base.EventHandler.remove(this.element,"click",this.clickHandler),sf.base.EventHandler.remove(this.element,"focusout",this.removeFocus),this.enableVirtualization?(sf.base.EventHandler.remove(this.element,"scroll",this.scrollHandler),this.isWindow&&window.removeEventListener("scroll",this.scrollHandler.bind(this))):(sf.base.EventHandler.remove(this.element,"mouseover",this.mouseHoverHandler),sf.base.EventHandler.remove(this.element,"mouseout",this.mouseOutHandler)),this.touchModule.destroy()},h.prototype.swipeActionHandler=function(e){"Right"===e.swipeDirection&&e.velocity>.5&&"touchend"===e.originalEvent.type&&(this.showCheckBox&&this.dataSourceLevel[this.dataSourceLevel.length-1]&&this.uncheckAllItems(),this.back())},h.prototype.showHideItem=function(e,t){var i=this.getLi(e);i&&(i.style.display=t)},h.prototype.enableState=function(e,t){var i=this.getLi(e);i&&(t?i.classList.remove("e-disabled"):i.classList.add("e-disabled"))},h.prototype.getLi=function(e){var t;return this.element&&(t=this.element.querySelector('[data-uid="'+e.id+'"]')),t},h.prototype.scrollHandler=function(e){var t,s=this.isWindow?e.target.documentElement.scrollTop:e.target.scrollTop;if(this.liHeight||this.updateLiElementHeight(),(t=Math.round(s/this.liHeight))-this.liDifference>=this.virtualListDifference||t-this.liDifference<=-1){var n=this.currentUlElement.querySelector("."+i);n&&(this.focusedElementId=n.getAttribute("data-uid"));var o=this.element.querySelector(".e-list-virtualcontainer");o&&(o.style.top=(t-1)*this.liHeight<0?"0px":(t-2)*this.liHeight+"px",this.liDifference=t,this.dotNetRef.invokeMethodAsync("VirtualScrolling",t-2))}},h.prototype.preventSelection=function(e){var t=this.mouseEvent.target,i=sf.base.closest(t,"."+s);e?this.dataSourceLevel.length>1&&this.dataSourceLevel.pop():this.performSelection(i)},h.prototype.performSelection=function(e){null!==e&&!e.classList.contains(r)&&this.enable&&(this.removeFocus(),this.focusId=[],this.addFocusId(e.getAttribute("data-uid")),this.showCheckBox?this.mouseEvent.target.classList.contains("e-frame")?this.checkUncheckItem(e):e.classList.contains(n)?(this.removeHover(),this.removeFocus(),this.setSelectLI(e,this.mouseEvent)):this.checkUncheckItem(e):(this.currentUlElement.querySelector("."+i)&&this.currentUlElement.querySelector("."+i).classList.remove(i),e.classList.contains(n)?this.setSelectLI(e,this.mouseEvent):e.classList.contains(i)||(e.classList.add(i),this.selectedItems[this.currentDataSourceKey][0]=e.getAttribute("data-uid"))))},h.prototype.updateLiElementHeight=function(){var e=this.element.querySelector(".e-list-virtualcontainer");if(e){this.currentUlElement||(this.currentUlElement=this.element.querySelector("ul"));var t=e.children[0];if(t){if(this.liHeight=t.getBoundingClientRect().height,this.liHeight&&this.enableVirtualization){var i=e.getBoundingClientRect().height;e.parentElement.style.height=i+"px"}}else{var n=sf.base.createElement("li",{className:s});e.appendChild(n),this.liHeight=e.children[0].getBoundingClientRect().height,sf.base.detach(n)}this.liHeight&&this.dotNetRef.invokeMethodAsync("UpdateLiElementHeight",this.liHeight)}},h.prototype.updateElementDifference=function(e){this.virtualListDifference=e,this.enableVirtualization&&this.updateLiElementHeight()},h.prototype.selectItem=function(e){var t=this.getLi(e);this.showCheckBox?this.setChecked(t,t.querySelector(".e-checkbox-wrapper")):(sf.base.isNullOrUndefined(t)?this.removeFocus():this.setSelectLI(t,null),this.selectedItems[this.currentDataSourceKey][0]=t.getAttribute("data-uid"))},h.prototype.clickHandler=function(e){if(this.currentUlElement&&!this.element.classList.contains("e-disabled")){var t=e.target,i=t.classList;if(this.mouseEvent=e,i.contains("e-icon-back")||i.contains("e-headertext"))this.back();else{var o=sf.base.closest(t.parentNode,"."+s)?sf.base.closest(t.parentNode,"."+s):sf.base.closest(t,"."+s);if(this.enableSelectEvent||this.performSelection(o),null!==o&&!o.classList.contains(r)&&this.enable){if(o.classList.contains(n)){var a=o.getAttribute("data-uid");-1===this.dataSourceLevel.indexOf(a)&&this.dataSourceLevel.push(a)}this.enableSelectEvent&&(this.isFocus=!1,this.getSelectEventData(o,e))}}}},h.prototype.checkUncheckItem=function(e){e.classList.add(i),e.querySelector("."+a)?this.uncheckItem(e):this.setChecked(e,e.querySelector(".e-checkbox-wrapper")),this.dotNetRef.invokeMethodAsync("UpdateData",!sf.base.isNullOrUndefined(e.querySelector("."+a)),e.getAttribute("data-uid"))},h.prototype.back=function(){if(this.dataSourceLevel.length>1){for(var e=this.element.querySelectorAll("ul"),t=this.element.querySelector("."+o),s=0;s<e.length;s++)this.dataSourceLevel.length>2?e[s].getAttribute("pid")===this.dataSourceLevel[this.dataSourceLevel.length-2]?(this.switchView(this.currentUlElement,e[s],!0),this.currentUlElement=e[s]):e[s].style.display=l:null===e[s].getAttribute("pid")?(this.switchView(this.currentUlElement,e[s],!0),this.currentUlElement=e[s]):e[s].style.display=l;if(this.dataSourceLevel.pop(),!this.showCheckBox)this.currentUlElement.querySelectorAll("."+i)[0].setAttribute("aria-selected","false");this.isTemplate||(this.headerTitleInfo.length>1&&this.headerTitleInfo.pop(),this.headerElement&&(this.headerElement.innerText=this.headerTitleInfo[this.headerTitleInfo.length-1])),this.currentDataSourceKey=this.dataSourceLevel[this.dataSourceLevel.length-1],1===this.dataSourceLevel.length&&t&&(t.children[0].style.display=l,t.classList.remove("e-list-navigation"));var n={IsInteracted:!(!event&&!this.isRootFocus),Level:this.dataSourceLevel.length>0?this.dataSourceLevel.length-1:this.dataSourceLevel.length};this.dotNetRef.invokeMethodAsync("TriggerBackEvent",n)}},h.prototype.setHoverLI=function(e){this.element.classList.contains(r)||e.classList.contains(r)||e.classList.add("e-hover")},h.prototype.mouseHoverHandler=function(e){var t=sf.base.closest(e.target.parentNode,"."+s);t&&this.setHoverLI(t)},h.prototype.mouseOutHandler=function(e){this.removeHover()},h.prototype.removeHover=function(){var e=this.element.querySelector(".e-hover");e&&e.classList.remove("e-hover")},h.prototype.removeFocus=function(){this.currentUlElement||(this.currentUlElement=this.element.querySelector("ul"));for(var e=0,t=this.currentUlElement.querySelectorAll("."+i);e<t.length;e++){t[e].classList.remove(i)}this.isRestrictFocus=void 0},h.prototype.isValidLI=function(e){return e&&e.classList.contains(s)&&!e.classList.contains("e-list-group-item")&&!e.classList.contains(r)},h.prototype.setSelectLI=function(e,t){if(this.enable&&this.isValidLI(e)&&!e.classList.contains(i)){var s=this.currentUlElement.querySelector("."+i);s&&this.removeFocusId(s.getAttribute("data-uid")),this.removeFocus(),this.addAriaAttribute(!0,e),this.removeHover(),e.classList.contains(n)&&this.renderSubList(e)}},h.prototype.addAriaAttribute=function(e,t){e?(this.isCheckAll||t.classList.add(i),this.addFocusId(t.getAttribute("data-uid"))):this.showCheckBox||e||!t.classList.contains(i)||(t.classList.remove(i),this.focusId.indexOf(t.getAttribute("data-uid"))>=0&&this.focusId.splice(this.focusId.indexOf(t.getAttribute("data-uid")),1)),(this.showCheckBox||t.classList.contains(n))&&t.setAttribute("aria-selected",e.toString())},h.prototype.renderSubList=function(e){var t=e,s=e.getAttribute("data-uid"),r=this.element.querySelector("."+o);if(e.classList.remove(i),e.classList.add(i),this.showHeader&&r&&(r.children[0].style.display=null,r.classList.add("e-list-navigation")),t.classList.contains(n)&&s){if(this.element.querySelector("[pid='"+s+"']"))this.renderChildList(s,[s]);else{var a={ElementId:s,Key:this.currentDataSourceKey};this.dotNetRef.invokeMethodAsync("ListChildDataSource",a)}this.isTemplate||(this.headerTitleInfo.push(t.innerText.trim()),this.headerElement&&(this.headerElement.innerText=this.headerTitleInfo[this.headerTitleInfo.length-1])),-1==this.dataSourceLevel.indexOf(s)&&this.dataSourceLevel.push(s),this.currentDataSourceKey=s}},h.prototype.renderChildList=function(e,t){var i=this.element.querySelectorAll("ul");i[i.length-1].getAttribute("pid")||i[i.length-1].setAttribute("pid",e);for(var s=0;s<i.length;s++)if(i[s].getAttribute("pid")===e){this.switchView(this.currentUlElement,i[s],!1),this.currentUlElement=i[s];var n=i[s].querySelectorAll(".e-list-item");if(n[0].getAttribute("aria-level")!==s.toString())for(var o=0;o<n.length;o++)n[o].setAttribute("aria-level",s.toString());t&&(this.selectedItems[e]=t)}},h.prototype.mouseDownHandler=function(){this.isRestrictFocus=null==this.isRestrictFocus||this.isRestrictFocus},h.prototype.focusHandler=function(e){this.isRestrictFocus?this.isRestrictFocus=!1:sf.base.isNullOrUndefined(this.focusId)||0==this.focusId.length?(this.isRootFocus=!0,this.arrowKeyHandler(e),this.isRootFocus=!1):(this.isFocus=!0,this.updateFocusElement(e))},h.prototype.keyActionHandler=function(e){if("INPUT"!=e.target.tagName&&"TEXTAREA"!=e.target.tagName)switch(e.keyCode){case 36:this.homeKeyHandler(e);break;case 35:this.homeKeyHandler(e,!0);break;case 40:this.arrowKeyHandler(e);break;case 38:this.arrowKeyHandler(e,!0);break;case 39:this.arrowKeyHandler(e);break;case 37:this.arrowKeyHandler(e,!0);break;case 13:this.enterKeyHandler(e);break;case 8:var t=this.element.querySelector("."+o+" .e-icon-back");t&&t.style.display!=l&&(this.showCheckBox&&this.currentDataSourceKey&&this.uncheckAllItems(),this.back());break;case 32:this.spaceKeyHandler(e)}},h.prototype.addFocusId=function(e){this.focusId.indexOf(e)<0&&this.focusId.push(e)},h.prototype.removeFocusId=function(e){this.focusId.indexOf(e)>=0&&this.focusId.splice(this.focusId.indexOf(e),1)},h.prototype.updateFocusElement=function(e){var t=this.currentUlElement.querySelector("."+i);t&&(t.classList.remove(i),this.focusId.indexOf(t.getAttribute("data-uid"))>=0&&this.focusId.splice(this.focusId.indexOf(t.getAttribute("data-uid")),1));for(var s=this.currentUlElement.children,n=0;n<s.length;n++)this.focusId.indexOf(s[n].getAttribute("data-uid"))>=0&&(s[n].classList.add(i),this.addFocusId(s[n].getAttribute("data-uid")),this.addAriaAttribute(!0,s[n]),this.element.setAttribute("aria-activedescendant",s[n].id.toString()),this.enableSelectEvent&&(this.getSelectEventData(s[n],e),this.isFocus=!1))},h.prototype.homeKeyHandler=function(e,t){e.preventDefault();var s=this.currentUlElement.querySelector("."+i);s&&(s.classList.remove(i),this.removeFocusId(s.getAttribute("data-uid")));var n=t?this.currentUlElement.children.length-1:0;n=this.currentUlElement.children[n].classList.contains("e-list-group-item")&&this.currentUlElement.children.length>1?n+1:n;var o=this.currentUlElement.children[n];this.addAriaAttribute(!0,o),o.classList.add(i),this.addFocusId(o.getAttribute("data-uid")),this.currentUlElement.children[n]?this.element.setAttribute("aria-activedescendant",this.currentUlElement.children[n].id.toString()):this.element.removeAttribute("aria-activedescendant"),this.enableSelectEvent&&this.getSelectEventData(o,e)},h.prototype.onArrowKeyDown=function(e,t){var o,r;return!sf.base.isNullOrUndefined(this.currentUlElement.querySelector("."+n))||this.showCheckBox?((r=this.currentUlElement.querySelector("."+i)||this.currentUlElement.querySelector("."+i))&&this.removeFocusId(r.getAttribute("data-uid")),o=this.getSiblingLI(this.currentUlElement.querySelectorAll("."+s),r,t),sf.base.isNullOrUndefined(o)||(r&&(r.classList.remove(i),this.showCheckBox||r.classList.remove(i),this.removeFocusId(r.getAttribute("data-uid"))),o.classList.contains(n)||this.showCheckBox?o.classList.add(i):this.setSelectLI(o,e))):(r=this.currentUlElement.querySelector("."+i),o=this.getSiblingLI(this.currentUlElement.querySelectorAll("."+s),r,t),this.setSelectLI(o,e)),o?this.element.setAttribute("aria-activedescendant",o.id.toString()):this.element.removeAttribute("aria-activedescendant"),o},h.prototype.getSiblingLI=function(e,t,i){var s=Array.prototype.slice.call(e),n=s.indexOf(t);return i?s[n-1]:s[n+1]},h.prototype.arrowKeyHandler=function(e,t){if(this.isRootFocus||e.preventDefault(),this.currentUlElement){var i=this.onArrowKeyDown(e,t);i&&this.addFocusId(i.getAttribute("data-uid"));var s=this.element.getBoundingClientRect().top,n=this.element.getBoundingClientRect().height,o=void 0;if(i){var r=i.getBoundingClientRect().top,a=i.getBoundingClientRect().height;if(t)(o=this.isWindow?r:r-s)<0&&(this.isWindow?window.scroll(0,pageYOffset+o):this.element.scrollTop=this.element.scrollTop+o);else{var l=this.isWindow?window.innerHeight:n;(o=this.isWindow?r+a:r-s+a)>l&&(this.isWindow?window.scroll(0,pageYOffset+(o-l)):this.element.scrollTop=this.element.scrollTop+(o-l))}}}},h.prototype.enterKeyHandler=function(e){if(this.currentUlElement){var t=this.currentUlElement.querySelector("."+i);this.currentUlElement.querySelector("."+n)&&t?(t.classList.remove(i),this.showCheckBox&&(this.removeFocus(),this.removeHover()),this.setSelectLI(t,e)):sf.base.isNullOrUndefined(t)||this.spaceKeyHandler(e)}},h.prototype.checkAllItems=function(){this.isCheckAll=!0,this.updateCheckBoxState(!0),this.isCheckAll=!1},h.prototype.uncheckAllItems=function(){this.updateCheckBoxState(!1)},h.prototype.updateCheckBoxState=function(e){if(this.showCheckBox)for(var t=this.currentUlElement.querySelectorAll("li"),i=this.enableVirtualization?this.currentUlElement.querySelector(".e-list-virtualcontainer").childElementCount:this.currentUlElement.childElementCount,s=0;s<i;s++){var n=t[s].querySelector(".e-frame");n&&(e&&!n.classList.contains(a)?this.checkItem(t[s]):!e&&n.classList.contains(a)&&this.uncheckItem(t[s]))}},h.prototype.checkItem=function(e){this.toggleCheckBox(e,!0)},h.prototype.getCheckData=function(e,t,i){var s=e.id;if(i!==e.id||sf.base.isNullOrUndefined(e.id)){i=i.toLowerCase();for(var n=0,o=Object.entries(e);n<o.length;n++){var r=o[n],a=""+r[0],l=""+r[1];(a=a.toLowerCase())===i&&(s=l)}}var h=this.currentUlElement.querySelector("[data-uid='"+s+"']");t?this.checkItem(h):this.uncheckItem(h),this.removeFocus()},h.prototype.spaceKeyHandler=function(e){if(this.isTemplate||e.preventDefault(),this.enable&&this.showCheckBox&&this.currentUlElement){var t=this.currentUlElement.querySelector("."+i);!sf.base.isNullOrUndefined(t)&&sf.base.isNullOrUndefined(t.querySelector("."+a))?this.setChecked(t,t.querySelector(".e-checkbox-wrapper")):this.uncheckItem(t),this.enableSelectEvent&&this.getSelectEventData(t,e)}},h.prototype.setChecked=function(e,t){this.removeFocus(),e.classList.add(i),this.addAriaAttribute(!0,e),t&&(t.querySelector(".e-frame").classList.add(a),t.setAttribute("aria-checked","true")),this.selectedItems[this.currentDataSourceKey]&&-1===this.selectedItems[this.currentDataSourceKey].indexOf(e.getAttribute("data-uid"))&&this.selectedItems[this.currentDataSourceKey].push(e.getAttribute("data-uid"))},h.prototype.toggleCheckBox=function(e,t){if(this.showCheckBox){var i=e;if(!sf.base.isNullOrUndefined(i)){var s=i.querySelector(".e-frame");this.addAriaAttribute(t,i),sf.base.isNullOrUndefined(s)||(t?s.classList.add(a):s.classList.remove(a),s.parentElement.setAttribute("aria-checked",t?"true":"false"))}}},h.prototype.uncheckItem=function(e){e&&(this.selectedItems[this.currentDataSourceKey]&&-1!==this.selectedItems[this.currentDataSourceKey].indexOf(e.getAttribute("data-uid"))&&this.selectedItems[this.currentDataSourceKey].splice(this.selectedItems[this.currentDataSourceKey].indexOf(e.getAttribute("data-uid")),1),this.toggleCheckBox(e,!1))},h.prototype.addCheckClass=function(){this.currentUlElement||(this.currentUlElement=this.element.querySelector("ul"));for(var e=this.enableVirtualization?this.currentUlElement.querySelector(".e-list-virtualcontainer").children:this.currentUlElement.children,t=this.selectedItems[this.currentDataSourceKey],s=0;s<e.length;s++)this.showCheckBox?(this.focusedElementId&&(this.focusedElementId===e[s].getAttribute("data-uid")?e[s].classList.add(i):e[s].classList.remove(i)),t.length>0&&(-1!==t.indexOf(e[s].getAttribute("data-uid"))?this.toggleCheckBox(e[s],!0):this.toggleCheckBox(e[s],!1))):t[0]===e[s].getAttribute("data-uid")?e[s].classList.add(i):e[s].classList.remove(i);for(s=0;s<e.length;s++)this.showCheckBox?(this.focusedElementId&&(this.focusedElementId===e[s].getAttribute("data-uid")?e[s].classList.add(i):e[s].classList.remove(i)),t.length>0&&(-1!==t.indexOf(e[s].getAttribute("data-uid"))?this.toggleCheckBox(e[s],!0):this.toggleCheckBox(e[s],!1))):t&&t[0]===e[s].getAttribute("data-uid")?e[s].classList.add(i):e[s].classList.remove(i)},h.prototype.getSelectedItems=function(){var e=this.currentUlElement.querySelectorAll(".e-check");this.selectedItems[this.currentDataSourceKey]=[];for(var t=0;t<e.length;t++){var i=sf.base.closest(e[t],"."+s);this.selectedItems[this.currentDataSourceKey]&&-1===this.selectedItems[this.currentDataSourceKey].indexOf(i.getAttribute("data-uid"))&&this.selectedItems[this.currentDataSourceKey].push(i.getAttribute("data-uid"))}return{ElementId:this.selectedItems[this.currentDataSourceKey],Key:this.currentDataSourceKey}},h.prototype.getSelectEventData=function(e,t){if(e){var i="click"===t.type?!e.querySelector("."+a):!!e.querySelector("."+a),s={ElementId:e.getAttribute("data-uid"),IsChecked:i,Key:e.classList.contains(n)&&!t.target.classList.contains("e-frame")?this.dataSourceLevel[this.dataSourceLevel.length-2]:this.currentDataSourceKey,IsInteracted:!(!t&&!this.isRootFocus),Level:this.dataSourceLevel.length>0?this.dataSourceLevel.length-1:this.dataSourceLevel.length};this.isFocus||this.dotNetRef.invokeMethodAsync("TriggerClickEvent",s)}},h.prototype.switchView=function(i,s,n){var o=this;if(i&&s){var r=i.style.position,a="hidden"!==this.element.style.overflow?this.element.style.overflow:"",h=void 0,d=this.animation.duration;if(i.style.position="absolute",i.classList.add("e-view"),"Disable"===sf.base.animationMode){h=this.enableRtl?t.None:e.None,n=this.enableRtl,d=0}else if(this.animation.effect)"None"===this.animation.effect&&"Enable"===sf.base.animationMode&&(this.animation.effect="SlideLeft"),h=this.enableRtl?t[this.animation.effect]:e[this.animation.effect];else{h=e.SlideLeft,n=this.enableRtl,d=0}this.element.style.overflow="hidden",this.animationObject.animate(i,{name:n?h[0]:h[1],duration:d,timingFunction:this.animation.easing,end:function(e){i.style.display=l,o.element.style.overflow=a,i.style.position=r,i.classList.remove("e-view")}}),s.style.display="",this.animationObject.animate(s,{name:n?h[2]:h[3],duration:d,timingFunction:this.animation.easing,end:function(){o.dotNetRef.invokeMethodAsync("TriggerActionComplete",o.datasource)}}),this.currentUlElement=s}},h.prototype.setAnimation=function(e){this.animation=e},h.prototype.setSelectedItems=function(e){var t=this.element.querySelector("."+o);sf.base.isNullOrUndefined(e)||(this.selectedItems={defaultData_Key:e}),e.length>0?this.currentUlElement=this.element.querySelector('[data-uid="'+e+'"]').closest("ul"):this.currentUlElement=this.element.querySelector("ul");var i=this.element.querySelector('[data-uid="'+e+'"]').classList.contains("e-has-child");i?(this.dataSourceLevel=["defaultData_Key"],this.currentUlElement.style.removeProperty("display"),this.addCheckClass(),this.currentDataSourceKey="defaultData_Key"):this.selectedItems[this.currentDataSourceKey]=[this.currentDataSourceKey],this.showCheckBox&&this.removeFocus(),this.headerElement&&i&&(this.headerTitleInfo=this.headerTitleInfo.splice(0,1),this.headerElement.innerText=this.headerTitleInfo[this.headerTitleInfo.length-1]),1===this.dataSourceLevel.length&&t&&i&&(t.children[0].style.display=l,t.classList.remove("e-list-navigation"))},h.prototype.updateHeaderTitle=function(e){this.headerTitleInfo[0]=e,this.headerElement&&(this.headerElement.innerText=e)},h.prototype.destroy=function(){this.element.style.display=l,this.unWireEvents()},h}();return{initialize:function(e,t,i,s,n,o,r){if(t&&e){new h(e,t,i,s,n,r);var a=window.sfBlazor.getCompInstance(e);a.initialize(),a.updateElementDifference(o)}},renderChildList:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s)||s.renderChildList(t,i)},addActiveClass:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.addCheckClass()},showHideItem:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s)||s.showHideItem(t,i)},enableState:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s)||s.enableState(t,i)},back:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.back()},checkAllItems:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.checkAllItems()},uncheckAllItems:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.uncheckAllItems()},getCheckData:function(e,t,i,s){var n=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(n)&&null!=t)for(var o=0;o<t.length;o++)n.getCheckData(t[o],i,s)},selectItem:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i)&&null!=t)for(var s=0;s<t.length;s++)i.selectItem(t[s])},preventSelection:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.preventSelection(t)},updateLiElementHeight:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.updateLiElementHeight()},getCheckedItems:function(e){var t=window.sfBlazor.getCompInstance(e);return sf.base.isNullOrUndefined(t)?{}:t.getSelectedItems()},setAnimation:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.setAnimation(t)},setCheckedItems:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.setSelectedItems(t)},updateHeaderTitle:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.updateHeaderTitle(t)},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.destroy()},updateElementDifference:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.updateElementDifference(t)}}}()},"./modules/sf-maps.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Maps=function(){"use strict";var e=function(e,t,i,s){return new(i||(i=Promise))((function(n,o){function r(e){try{l(s.next(e))}catch(e){o(e)}}function a(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){e.done?n(e.value):new i((function(t){t(e.value)})).then(r,a)}l((s=s.apply(e,t||[])).next())}))},t=function(e,t){var i,s,n,o,r={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,s&&(n=2&o[0]?s.return:o[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,o[1])).done)return n;switch(s=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,s=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(n=r.trys,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){r=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){r.label=o[1];break}if(6===o[0]&&r.label<n[1]){r.label=n[1],n=o;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(o);break}n[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e],s=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},i=document.createElementNS("http://www.w3.org/2000/svg","rect"),s=function(e,t){this.x=e,this.y=t};function n(e){var t=document.createElementNS("http://www.w3.org/2000/svg","g");return t.setAttribute("id",e),t}function o(e,t,i){var s="";switch(e){case"Balloon":s="M15,0C8.8,0,3.8,5,3.8,11.2C3.8,17.5,9.4,24.4,15,30c5.6-5.6,11.2-12.5,11.2-18.8C26.2,5,21.2,0,15,0z M15,16c-2.8,0-5-2.2-5-5s2.2-5,5-5s5,2.2,5,5S17.8,16,15,16z";break;case"Cross":s="M "+i.x+" "+(i.y-t.height/2)+" L "+i.x+" "+(i.y+t.height/2)+" M "+(i.x-t.width/2)+" "+i.y+" L "+(i.x+t.width/2)+" "+i.y;break;case"Diamond":s="M "+i.x+" "+(i.y-t.height/2)+" L "+(i.x+t.width/2)+" "+i.y+" L "+i.x+" "+(i.y+t.height/2)+" L "+(i.x-t.width/2)+" "+i.y+" Z";break;case"Star":s="M "+(i.x+t.width/3)+" "+(i.y-t.height/2)+" L "+(i.x-t.width/2)+" "+(i.y+t.height/6)+" L "+(i.x+t.width/2)+" "+(i.y+t.height/6)+" L "+(i.x-t.width/3)+" "+(i.y-t.height/2)+" L "+i.x+" "+(i.y+t.height/2)+" L "+(i.x+t.width/3)+" "+(i.y-t.height/2)+" Z";break;case"Triangle":s="M "+i.x+" "+(i.y-t.height/2)+" L "+(i.x+t.width/2)+" "+(i.y+t.height/2)+" L "+(i.x-t.width/2)+" "+(i.y+t.height/2)+" Z";break;case"HorizontalLine":s=" M "+(i.x-t.width/2)+" "+i.y+" L "+(i.x+t.width/2)+" "+i.y;break;case"VerticalLine":s="M "+i.x+" "+(i.y-t.height/2)+" L "+i.x+" "+(i.y+t.height/2);break;case"InvertedTriangle":s="M "+(i.x-t.width/2)+" "+(i.y-t.height/2)+" L "+(i.x+t.width/2)+" "+(i.y-t.height/2)+" L "+i.x+" "+(i.y+t.height/2)+" Z";break;case"Pentagon":for(var n=void 0,o=void 0,r=0;r<5;r++)n=t.width/2*Math.cos(Math.PI/180*(72*r)),o=t.height/2*Math.sin(Math.PI/180*(72*r)),s+=(0===r?"M ":"L ")+(i.x+n)+" "+(i.y+o);s+=" Z"}return s}var r=function(){function r(e,t,i,s){this.previousMarkerId="",this.previousId="",this.moveClientX=0,this.moveClientY=0,this.clientX=0,this.clientY=0,this.isPinch=!1,this.enableSelectionZoom=!1,this.allowPanning=!1,this.isPanning=!1,this.isPan=!0,this.zoomClick=!1,this.mouseClick=!1,this.position=null,this.height=0,this.width=0,this.mapsBorderWidth=0,this.toolbarButtonOpacity=1,this.toolbarShapeOpacity=1,this.markerClusterExpandCheck=!1,this.svgCreated=!1,this.zoomIn=1,this.zoomOut=1,this.scaleFactor=1,this.factorCount=0,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.lastScale=1,this.clusterLocation=[],this.isTouch=!1,this.touchMoveList=[],this.touchStartList=[],this.tileTranslatePoint=null,this.isToolbarTooltip=!1,this.marginTop=0,this.marginLeft=0,this.isPinchZoomed=!1,this.panComplete=!1,this.pinchComplete=!1,this.mouseMoveId="",this.isReset=!1,window.sfBlazor=window.sfBlazor,this.tapCount=0,this.id=e,this.element=t,this.dotNetRef=s,this.layerCount=i.layerCount,this.clusterSettings=i.markerCluster?JSON.parse(i.markerCluster):null,this.dataSource=i.dataSource?JSON.parse(i.dataSource):null,this.shapeTranslatePoint=i.shapeTranslatePoint?i.shapeTranslatePoint:null,this.shapeBorderWidth=i.shapeBorderWidth,this.projectionType=i.projectionType,this.options=i,this.options.layerHighlightSettings=JSON.parse(this.options.layerHighlightSettings),this.options.markerHighlightSettings=JSON.parse(this.options.markerHighlightSettings),this.options.bubbleHighlightSettings=JSON.parse(this.options.bubbleHighlightSettings),this.options.navigationHighlightSettings=JSON.parse(this.options.navigationHighlightSettings),this.options.selectionSettings=JSON.parse(this.options.selectionSettings),this.marginLeft=0,this.urlTemplate=i.urlTemplate?i.urlTemplate:null,this.isToolbarTooltip=!1,this.isTouch=!1,this.pinchFactor=1,this.lastScale=1,this.touchStartList=[],this.touchMoveList=[],this.dataId=e,window.sfBlazor.setCompInstance(this)}return r.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"wheel",this.mapMouseWheel.bind(this),this),sf.base.EventHandler.add(this.element,"touchmove mousemove",this.mouseMove.bind(this),this),sf.base.EventHandler.add(this.element,"touchend mouseup mouseleave",this.mouseUp.bind(this),this),sf.base.EventHandler.add(this.element,"touchstart mousedown",this.mouseDown.bind(this),this),sf.base.EventHandler.add(this.element,"click pointerdown",this.click.bind(this),this),sf.base.EventHandler.add(this.element,"dblclick",this.doubleClick.bind(this),this),sf.base.EventHandler.add(this.element,"contextmenu",this.rightClick.bind(this),this),sf.base.EventHandler.add(this.element,"keydown",this.keyDown.bind(this),this),sf.base.EventHandler.add(this.element,"keyup",this.keyUp.bind(this),this),window.addEventListener("resize",this.reSize.bind(this))},r.prototype.unwireEvents=function(){sf.base.EventHandler.remove(this.element,"wheel",this.mapMouseWheel),sf.base.EventHandler.remove(this.element,"touchmove mousemove",this.mouseMove),sf.base.EventHandler.remove(this.element,"touchend mouseup mouseleave",this.mouseUp),sf.base.EventHandler.remove(this.element,"touchstart mousedown",this.mouseDown),sf.base.EventHandler.remove(this.element,"click pointerdown",this.click),sf.base.EventHandler.remove(this.element,"dblclick",this.doubleClick),sf.base.EventHandler.remove(this.element,"contextmenu",this.rightClick),sf.base.EventHandler.remove(this.element,"keydown",this.keyDown),sf.base.EventHandler.remove(this.element,"keyup",this.keyUp),window.removeEventListener("resize",this.reSize.bind(this))},r.prototype.destroy=function(){this.unwireEvents(),this.dotNetRef=null},r.prototype.keyUp=function(e){var t=e.target.id;if(this.options.enablePanning&&this.isPanning){this.isPanning=!1;var i=document.getElementById(this.element.id+"_animated_tiles");if(this.isTileMap&&!sf.base.isNullOrUndefined(this.currentTiles)&&!sf.base.isNullOrUndefined(i)&&this.currentTiles.childElementCount!=i.childElementCount&&this.currentTiles.childElementCount<i.childElementCount)for(var s=i.childElementCount-1;s>=this.currentTiles.childElementCount;s--)i.removeChild(i.children[s]);this.currentTiles=null,sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("UpdateTranslatePoint",this.isTileMap?this.translatePoint:this.shapeTranslatePoint,this.tileTranslatePoint,this.scaleFactor,!1)}if("Tab"===e.code&&t.indexOf("_LayerIndex_")>-1){var n=parseInt(t.split("_LayerIndex_")[1].split("_")[0],10);if(t.indexOf("shapeIndex")>-1){this.targetElementPath=e.target;var o=parseInt(t.split("_shapeIndex_")[1].split("_")[0],10);t.indexOf("shapeIndex")>-1&&this.options.layerHighlightSettings[n]&&this.options.layerHighlightSettings[n].Enable&&(this.removeAllHighlight(),this.targetElementPath.classList.contains("mapShapeSelection")||sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerShapeHighlight",n,o,t))}}},r.prototype.triggerEnableZoom=function(e,t,i){e>=1&&(this.scaleFactor=e,this.removeCluster(),sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerZoom",t,i))},r.prototype.keyDown=function(e){var t=1,i=e.type,s=e.target.id;this.isReset=!1;var n=document.getElementById(this.element.id+"_animated_tiles");if(this.isTileMap&&!sf.base.isNullOrUndefined(n)&&(this.currentTiles=n.cloneNode(!0)),"+"===e.key||"Equal"===e.code)this.options.enableZoom&&(e.preventDefault(),this.mergeSeparation(),t=0===this.factorCount?this.options.factor+1:this.scaleFactor+1,this.factorCount++,this.triggerEnableZoom(t,"ZoomIn",i));else if("-"===e.key||"Minus"===e.code)this.options.enableZoom&&(e.preventDefault(),this.mergeSeparation(),t=0===this.factorCount?this.options.factor-1:this.scaleFactor-1,t=this.options.maxZoom>=t&&this.options.minZoom<=t?t:this.options.minZoom,this.factorCount++,this.triggerEnableZoom(t,"ZoomOut",i));else if(82===e.keyCode)this.options.enableZoom&&(e.preventDefault(),this.mergeSeparation(),this.zoomClick=!1,"Reset",this.enableSelectionZoom=!1,this.isReset=!0,this.scaleFactor=t=this.options.minZoom,this.removeCluster(),sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerZoom","Reset",i));else if("ArrowUp"!==e.code&&"ArrowDown"!==e.code||!this.options.enablePanning)if("ArrowLeft"!==e.code&&"ArrowRight"!==e.code||!this.options.enablePanning){if("Enter"===e.code)if(e.preventDefault(),(s.indexOf("_Left_Page_Rect")>-1||s.indexOf("_Right_Page_Rect")>-1)&&!sf.base.isNullOrUndefined(this.dotNetRef)){var o=document.getElementById(this.id+"_Paging_Text").textContent,r=(o=o.trim().replace("\n","")).split("/").map(Number);s.indexOf("_Left_Page_Rect")>-1?document.getElementById(s).style.outlineColor=r[0]+1!=r[1]?"":"transparent":document.getElementById(s).style.outlineColor=r[0]!=r[1]+1?"":"transparent",this.dotNetRef.invokeMethodAsync("TriggerLegendPaging",s.indexOf("_Left_Page_Rect")>-1?1:0)}else if(s.indexOf("_LayerIndex_")>-1&&s.indexOf("shapeIndex")>-1){var a=parseInt(s.split("_LayerIndex_")[1].split("_")[0],10);this.shapeSelection(s,a)}}else this.isPanning=!0,e.preventDefault(),this.mergeSeparation(),this.clientY=0,this.moveClientX=this.areaRect.width/7,this.panning("ArrowLeft"===e.code?-this.moveClientX:this.moveClientX,this.clientY,e.layerX,e.layerY,this.scaleFactor,!0),this.clientX=this.moveClientX;else this.isPanning=!0,e.preventDefault(),this.mergeSeparation(),this.moveClientY=this.areaRect.height/7,this.clientX=0,this.panning(this.clientX,"ArrowUp"===e.code?-this.moveClientY:this.moveClientY,e.layerX,e.layerY,this.scaleFactor,!0),this.clientY=this.moveClientY;this.setToolbarButtonColor(t,this.isReset?this.element.id+"_Zooming_":this.mouseMoveId),sf.base.Browser.isDevice||this.setToolbarButtonColor(t,this.mouseMoveId),this.clientX=this.moveClientX,this.clientY=this.moveClientY},r.prototype.shapeSelection=function(e,t){var i=parseInt(e.split("_shapeIndex_")[1].split("_")[0],10),s=-1!==e.indexOf("_dataIndex_")?parseInt(e.split("_dataIndex_")[1].split("_")[0],10):null;this.options.selectionSettings&&this.options.selectionSettings[t]&&this.options.selectionSettings[t].Enable&&this.removeAllHighlight(),sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("SelectMap",e,t,i,"Shape",s)},r.prototype.rightClick=function(e){var t=e.target.id,i=this.getMousePosition(e.pageX,e.pageY);sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerMouseClick",i.x,i.y,document.getElementById(t))},r.prototype.reSize=function(){var e,t;if(this.mergeSeparation(),null!==this.element){var i=document.getElementById(this.element.id+"_svg");if(!sf.base.isNullOrUndefined(i)){i.style.display="none";var s=this.element.getBoundingClientRect();e=s.width,t=s.height,i.style.removeProperty("display")}}this.previousHeight===t&&this.previousWidth===e||(this.previousHeight=t,this.previousWidth=e,sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerResize",e,t))},r.prototype.doubleClick=function(e){if(!sf.base.isNullOrUndefined(this.dotNetRef)){if(2===e.detail&&this.options.enableZoom&&this.options.doubleClickZoom){var t=document.getElementById(this.id).getBoundingClientRect(),i=this.scaleFactor+1;i>=1&&(this.scaleFactor=i,this.removeCluster(),this.dotNetRef.invokeMethodAsync("MouseWheelZoom",e.pageX-t.x,e.pageY-t.y,e.which,"doubleClick"))}var s=e.target.id,n=this.getMousePosition(e.pageX,e.pageY);if("DoubleClick"===this.options.tooltipDisplayMode){var o=parseInt(s.split("_LayerIndex_")[1].split("_")[0],10);if(s.indexOf("shapeIndex")>-1){var r=parseInt(s.split("_shapeIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",s,n.x,n.y,o,r,"Shape",0)}else if(s.indexOf("_MarkerIndex_")>-1&&-1===s.indexOf("_cluster_")){var a=parseInt(s.split("_MarkerIndex_")[1].split("_")[0],10),l=parseInt(s.split("_dataIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",s,n.x,n.y,o,l,"Marker",a)}else if(s.indexOf("_BubbleIndex_")>-1){a=parseInt(s.split("_BubbleIndex_")[1].split("_")[0],10),l=parseInt(s.split("_dataIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",s,n.x,n.y,o,l,"Bubble",a)}else-1===s.indexOf("_shapeIndex_")&&-1===s.indexOf("_MarkerIndex_")&&-1===s.indexOf("_BubbleIndex_")&&this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip","",n.x,n.y,0,0,"",0)}this.dotNetRef.invokeMethodAsync("TriggerDoubleClick",n.x,n.y,document.getElementById(s))}},r.prototype.mapMouseWheel=function(e){this.mergeSeparation();document.getElementById(this.element.id).getBoundingClientRect();var t=sf.base.isNullOrUndefined(e.wheelDelta)?-e.deltaY:e.wheelDelta,i="ZoomIn"===(t/120>0?"ZoomIn":"ZoomOut")?this.scaleFactor+1:this.scaleFactor-1;this.scaleFactor=i=this.options.maxZoom>=i&&this.options.minZoom<=i?i:i>this.options.maxZoom?this.options.maxZoom:this.options.minZoom,this.isReset=!1,this.setToolbarButtonColor(i,sf.base.Browser.isDevice?this.element.id+"_Zooming_":e.target.id);var s=this.getMousePosition(e.pageX,e.pageY);this.options.enableZoom&&this.options.enableMouseWheelZoom&&i>=1&&(e.preventDefault(),this.scaleFactor=i,this.removeCluster(),sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("MouseWheelZoom",s.x,s.y,t,"wheelZoom"))},r.prototype.mouseUp=function(e){var t,i,s=e.target.id,n=this.isTileMap?this.tileTranslatePoint:this.shapeTranslatePoint,o=!1;this.lastScale=1,"touchend"===e.type?(this.options.enablePanning&&e.preventDefault(),t=0,i=0,o=!0,this.isTouch=!1,this.touchMoveList=[],this.touchStartList=[]):(this.moveClientX=e.pageX,this.moveClientY=e.pageY,t=e.layerX,i=e.layerY);var r=this.getMousePosition(this.moveClientX,this.moveClientY);this.moveClientX=r.x,this.moveClientY=r.y;s.split("_")[0];if(this.options.doubleClickZoom&&"touchend"===e.type){this.tapCount=this.tapCount>1?0:this.tapCount+1;var a=this;sf.base.isNullOrUndefined(this.tapCountTimer)&&(this.tapCountTimer=setTimeout((function(){window.clearTimeout(a.tapCountTimer),a.tapCountTimer=null,a.tapCount=0}),1e3))}if(!(s.indexOf("_Zooming_")>-1)&&this.options.enableZoom&&!this.isPanning&&"mouseleave"!==e.type&&(this.options.zoomOnClick||this.options.doubleClickZoom&&"touchend"===e.type&&this.tapCount>1)&&!this.isPinch){this.tapCount=0;var l=this.scaleFactor+(this.isPinchZoomed?0:1);if(l>=1){this.scaleFactor=l,this.removeCluster();var h="touchend"===e.type?e.changedTouches[0].pageX:e.pageX,d="touchend"===e.type?e.changedTouches[0].pageY:e.pageY,c=this.getMousePosition(h,d);sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("MouseWheelZoom",c.x,c.y,"touchend"===e.type?1:e.which,this.options.zoomOnClick?"click":"doubleClick")}}if(this.allowPanning&&this.isPanning&&this.options.enablePanning||this.isPinchZoomed){var p=document.getElementById(this.element.id+"_animated_tiles");if(this.isTileMap&&this.isPinchZoomed&&(p.style.removeProperty("transform"),this.scaleFactor=this.tileZoomLevel=Math.round(this.scaleFactor),this.getTileTranslatePosition(this.scaleFactor,this.scaleFactor,this.currentTouchCenter,null),this.translatePoint.x=(this.tileTranslatePoint.x-.01*this.scaleFactor)/Math.pow(2,this.scaleFactor-1),this.translatePoint.y=(this.tileTranslatePoint.y-.01*this.scaleFactor)/Math.pow(2,this.scaleFactor-1),this.generateTiles(),this.renderMarkers()),this.isTileMap&&!sf.base.isNullOrUndefined(this.currentTiles)&&!sf.base.isNullOrUndefined(p)&&this.currentTiles.childElementCount!=p.childElementCount&&this.currentTiles.childElementCount<p.childElementCount)for(var u=p.childElementCount-1;u>=this.currentTiles.childElementCount;u--)p.removeChild(p.children[u]);this.currentTiles=null,sf.base.isNullOrUndefined(this.dotNetRef)||this.isPinchZoomed||(this.dotNetRef.invokeMethodAsync("UpdateTranslatePoint",this.isTileMap?this.translatePoint:this.shapeTranslatePoint,this.tileTranslatePoint,this.scaleFactor,!1),this.panComplete&&this.dotNetRef.invokeMethodAsync("TriggerPanningComplete",this.previousPoint.x,this.previousPoint.y,n.x,n.y,t,i,this.scaleFactor))}if(this.isPinchZoomed&&!sf.base.isNullOrUndefined(this.dotNetRef)&&(this.dotNetRef.invokeMethodAsync("UpdateTranslatePoint",this.isTileMap?this.translatePoint:this.shapeTranslatePoint,this.tileTranslatePoint,this.scaleFactor,!0),this.pinchComplete&&this.dotNetRef.invokeMethodAsync("TriggerOnZoomComplete",n.x,n.y)),this.isPanning=!1,this.allowPanning=!1,this.options.enableZoom&&this.options.enableSelectionZooming&&this.mouseClick&&this.zoomClick){this.svgCreated=!1,this.mouseClick=!1;var f=document.getElementById(this.element.id+"drawRect");if(f){f.remove(),this.mergeSeparation(),this.removeCluster();var g=0;if(this.height>0&&this.width>0){var m=this.element.getBoundingClientRect();this.isTileMap?(g=this.scaleFactor+Math.round(this.scaleFactor+(m.width/this.width+m.height/this.height)/2),g-=2):g=this.scaleFactor+Math.round((m.width/this.width+m.height/this.height)/2),this.scaleFactor=g}this.setToolbarButtonColor(this.scaleFactor,this.element.id+"_Zooming_"),g>=1&&!sf.base.isNullOrUndefined(this.dotNetRef)&&this.dotNetRef.invokeMethodAsync("TriggerZoomSelection",this.position.x,this.position.y,this.height,this.width)}}if(s.indexOf("_LayerIndex_")>-1){var v=void 0,b=void 0,y=void 0,M=parseInt(s.split("_LayerIndex_")[1].split("_")[0],10);if(s.indexOf("shapeIndex")>-1&&this.shapeSelection(s,M),s.indexOf("_BubbleIndex_")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)&&(b=parseInt(s.split("_BubbleIndex_")[1].split("_")[0],10),v=-1!==s.indexOf("_dataIndex_")?parseInt(s.split("_dataIndex_")[1].split("_")[0],10):null,this.removeAllHighlight(),this.dotNetRef.invokeMethodAsync("SelectMap",s,M,v,"Bubble",b)),s.indexOf("_NavigationIndex_")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)&&(y=parseInt(s.split("_NavigationIndex_")[1].split("_")[0],10),v=-1!==s.indexOf("_Line_")?parseInt(s.split("_Line_")[1].split("_")[0],10):null,this.removeAllHighlight(),this.dotNetRef.invokeMethodAsync("SelectMap",s,M,v,"NavigationLine",y)),o&&s.indexOf("MarkerIndex")>-1&&!(s.indexOf("cluster")>-1)&&!sf.base.isNullOrUndefined(this.dotNetRef)){var C=parseInt(s.split("_LayerIndex_")[1].split("_")[0],10),w=parseInt(s.split("_MarkerIndex_")[1].split("_")[0],10);v=parseInt(s.split("_dataIndex_")[1].split("_")[0],10),this.dotNetRef.invokeMethodAsync("TriggerMouseLeave",C,w,v,r.x,r.y,o)}}var S=document.getElementById(this.element.id+"_AnnotationGroup"),N=!sf.base.isNullOrUndefined(S)&&S.contains(e.target);s.indexOf("_Zooming_")>-1||"mouseleave"===e.type||this.isPinchZoomed||!this.element.contains(e.target)||sf.base.isNullOrUndefined(this.dotNetRef)||N||this.dotNetRef.invokeMethodAsync("TriggerClickEventArgs",!1,t,i,document.getElementById(s),this.isTileMap),(sf.base.Browser.isDevice||s.indexOf("Reset")>-1)&&(this.enableSelectionZoom=!(s.indexOf("Reset")>-1)&&this.enableSelectionZoom,this.isReset=s.indexOf("Reset")>-1,this.setToolbarButtonColor(s.indexOf("Reset")>-1?this.options.minZoom:this.scaleFactor,this.element.id+"_Zooming_")),this.isPinchZoomed=!1},r.prototype.targetTouches=function(e){for(var t=[],i=0;i<e.length;i++)t.push({pageX:e[i].pageX,pageY:e[i].pageY});return t},r.prototype.mouseMove=function(e){var t,s,n=this,o=e.target.id;this.mouseMoveId=o,this.moveClientX=e.pageX,this.moveClientY=e.pageY;var r,a,l=this.isTileMap?this.tileTranslatePoint:this.shapeTranslatePoint,h=!1;("touchmove"===e.type?(this.moveClientX=r=e.touches[0].clientX,this.moveClientY=a=e.touches[0].clientY,2===e.touches.length&&(this.touchMoveList=this.targetTouches(e.touches)),this.options.enablePanning&&e.preventDefault(),t=0,s=0,h=!0):(this.moveClientX=e.pageX,this.moveClientY=e.pageY,r=e.clientX,a=e.clientY,t=e.layerX,s=e.layerY),this.tooltipVisiblityChange(),this.setToolbarButtonColor(this.scaleFactor,o),sf.base.isNullOrUndefined(this.legendSettings)||"Interactive"!==this.legendSettings.mode||!(o.indexOf("_MapAreaBorder")>-1||this.isTileMap&&""===o)||sf.base.isNullOrUndefined(this.dotNetRef))||null!==document.getElementById(this.element.id+"_Interactive_Legend")&&(sf.base.Browser.isDevice&&clearTimeout(this.arrowCountTimer),this.dotNetRef.invokeMethodAsync("MapsAreaInteractive"));if(!sf.base.isNullOrUndefined(this.legendSettings)&&"Interactive"===this.legendSettings.mode&&o.indexOf("_LayerIndex")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)){var d=document.getElementById(e.target.id).getAttribute("fill");if(o.indexOf("_shapeIndex")>-1&&"Layers"===this.legendSettings.type)sf.base.Browser.isDevice?(clearTimeout(this.arrowCountTimer),this.dotNetRef.invokeMethodAsync("RenderInteractive",d,0,0,0),this.arrowCountTimer=setTimeout((function(){n.dotNetRef.invokeMethodAsync("MapsAreaInteractive")}),1500)):this.dotNetRef.invokeMethodAsync("RenderInteractive",d,0,0,0);else if(o.indexOf("_MarkerIndex_")>-1&&"Markers"===this.legendSettings.type){var c=parseInt(o.split("_LayerIndex_")[1].split("_")[0],10),p=parseInt(o.split("_MarkerIndex_")[1].split("_")[0],10),u=-1!==o.indexOf("_dataIndex_")?parseInt(o.split("_dataIndex_")[1].split("_")[0],10):null;this.dotNetRef.invokeMethodAsync("RenderInteractive",d,c,p,u)}else if(o.indexOf("_BubbleIndex_")>-1&&"Bubbles"===this.legendSettings.type){c=parseInt(o.split("_LayerIndex_")[1].split("_")[0],10);var f=parseInt(o.split("_BubbleIndex_")[1].split("_")[0],10);u=-1!==o.indexOf("_dataIndex_")?parseInt(o.split("_dataIndex_")[1].split("_")[0],10):null;this.dotNetRef.invokeMethodAsync("RenderInteractive",d,c,f,u)}}var g=this.getMousePosition(this.moveClientX,this.moveClientY);this.moveClientX=g.x,this.moveClientY=g.y;var m=o.split("_")[0];if(-1==o.indexOf("_MapAreaBorder")?this.highlightMap(e):this.removeAllHighlight(),this.options.enableZoom&&this.options.enableSelectionZooming&&this.mouseClick&&this.zoomClick&&this.options.maxZoom>this.options.factor&&this.enableSelectionZoom){e.preventDefault(),this.svgCreated||(this.startValue=this.svgPoint(this.svg,r,a),this.svgCreated=!0),this.position=this.svgPoint(this.svg,r,a);var v=document.getElementById(this.element.id).getBoundingClientRect();this.width=Math.abs(this.position.x-this.startValue.x),this.height=Math.abs(this.position.y-this.startValue.y),this.position.x>this.startValue.x&&(this.position.x=this.startValue.x),this.position.y>this.startValue.y&&(this.position.y=this.startValue.y),this.position.x=this.position.x-v.x,this.position.y=this.position.y-v.y,i.setAttributeNS(null,"x",this.position.x.toString()),i.setAttributeNS(null,"y",this.position.y.toString()),i.setAttributeNS(null,"id",this.element.id+"drawRect"),i.setAttributeNS(null,"width",this.width.toString()),i.setAttributeNS(null,"height",this.height.toString()),i.setAttributeNS(null,"fill","#d3d3d3"),i.setAttributeNS(null,"stroke-dasharray","3"),i.setAttributeNS(null,"opacity","0.5"),i.setAttributeNS(null,"stroke","#009900"),null!==document.getElementById(this.element.id+"_tile_parent")?document.getElementById(this.element.id+"_LayerCollections").parentNode.appendChild(i):document.getElementById(this.element.id+"_svg").appendChild(i)}if(this.isPinch=!1,this.options.enableZoom&&this.options.enablePinchZooming&&this.touchMoveList.length>=2&&this.touchStartList.length>=2&&(this.isPinchZoomed=this.isPinch=!0,this.pinchComplete||this.panComplete||sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerOnZoom",l.x,l.y),this.pinchZooming(e),this.pinchComplete=!0),this.allowPanning&&this.options.enablePanning&&(this.clientX!==this.moveClientX||this.clientY!==this.moveClientY)&&!this.isPinchZoomed){if(this.isPanning=!0,!this.isTileMap){for(var b=document.getElementById(this.element.id+"_LayerCollections"),y=0;y<b.children.length;y++)for(var M=0;M<b.children[y].childElementCount;M++)if(b.children[y].children[M].id.indexOf("Polygon_Group")>-1){this.scaleFactor=b.children[y].children[M].transform.baseVal[0].matrix.a;break}if(this.clientX!==this.moveClientX&&this.clientY!==this.moveClientY){var C=this.clientX-this.moveClientX,w=this.clientY-this.moveClientY,S=l.x-C/this.scaleFactor,N=l.y-w/this.scaleFactor;this.panComplete||this.pinchComplete||sf.base.isNullOrUndefined(this.dotNetRef)||(this.previousPoint=this.isTileMap?this.tileTranslatePoint:this.shapeTranslatePoint,this.dotNetRef.invokeMethodAsync("TriggerPanning",l.x,l.y,S,N,t,s,this.scaleFactor)),this.panning(C,w,t,s,this.scaleFactor,!1),this.panComplete=!this.isTouch||2!==this.touchMoveList.length||2!==this.touchStartList.length,this.clientX=this.moveClientX,this.clientY=this.moveClientY}}if(o.indexOf(m)>-1)if(null!==(b=document.getElementById(e.currentTarget.id+"_animated_tiles"))){this.isTileMap=!0,this.scaleFactor=parseInt(b.className,10);C=this.clientX-this.moveClientX,w=this.clientY-this.moveClientY,this.getTileGeoLocation(t,s);this.panComplete||sf.base.isNullOrUndefined(this.dotNetRef)||2===this.touchMoveList.length||2===this.touchStartList.length||(this.previousPoint=this.isTileMap?this.tileTranslatePoint:this.shapeTranslatePoint,this.dotNetRef.invokeMethodAsync("TriggerTilePanning",this.previousPoint.x,this.previousPoint.y,l.x,l.y,t,s,this.scaleFactor)),this.panning(C,w,t,s,this.scaleFactor,!1),this.panComplete=!this.isTouch||2!==this.touchMoveList.length||2!==this.touchStartList.length,this.clientX=this.moveClientX,this.clientY=this.moveClientY}}if(!sf.base.isNullOrUndefined(this.dotNetRef)){if(!(this.allowPanning||this.mouseClick&&this.zoomClick)&&o.indexOf("shapeIndex")>-1&&"MouseMove"===this.options.tooltipDisplayMode){c=parseInt(o.split("_LayerIndex_")[1].split("_")[0],10);var x=parseInt(o.split("_shapeIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",o,g.x,g.y,c,x,"Shape",0)}if((""===o||-1===o.indexOf(this.element.id))&&!sf.base.isNullOrUndefined(e.target.offsetParent)){var O=e.target.offsetParent.id;o=O.indexOf("_MarkerIndex_")>-1?O:o}if((-1===o.indexOf("_shapeIndex_")&&-1===o.indexOf("_MarkerIndex_")&&-1===o.indexOf("_BubbleIndex_")&&"MouseMove"===this.options.tooltipDisplayMode||this.isToolbarTooltip&&-1===o.indexOf("_Zooming_ToolBar_")&&"MouseMove"!==this.options.tooltipDisplayMode)&&this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip","",g.x,g.y,0,0,"",0),this.isToolbarTooltip=!1,o.indexOf("_Zooming_ToolBar_")>-1){this.isToolbarTooltip=!0;var E=o.split("_Zooming_ToolBar_")[1].split("_")[0];this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",o,g.x,g.y,0,0,E,0)}if(o.indexOf("_LayerIndex_")>-1&&o.indexOf("_MarkerIndex_")>-1||h&&o.indexOf("MarkerIndex")>-1&&!(o.indexOf("cluster")>-1)){c=parseInt(o.split("_LayerIndex_")[1].split("_")[0],10),p=parseInt(o.split("_MarkerIndex_")[1].split("_")[0],10),u=parseInt(o.split("_dataIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerMouseMove",c,p,u,o,g.x,g.y,o.indexOf("cluster")>-1?"cluster":"marker",h)}if(o.indexOf("_LayerIndex_")>-1&&o.indexOf("_BubbleIndex_")>-1){c=parseInt(o.split("_LayerIndex_")[1].split("_")[0],10),p=parseInt(o.split("_BubbleIndex_")[1].split("_")[0],10),u=parseInt(o.split("_dataIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerBubbleMouseMove",c,p,u,o,g.x,g.y)}if(this.previousMarkerId.indexOf("_MarkerIndex_")>-1&&this.previousMarkerId!=o){c=parseInt(this.previousMarkerId.split("_LayerIndex_")[1].split("_")[0],10),p=parseInt(this.previousMarkerId.split("_MarkerIndex_")[1].split("_")[0],10),u=parseInt(this.previousMarkerId.split("_dataIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerMouseLeave",c,p,u,g.x,g.y,h)}}this.previousMarkerId=o.indexOf("MarkerIndex")>-1&&!(o.indexOf("cluster")>-1)?o:""},r.prototype.tooltipVisiblityChange=function(){if(sf.base.Browser.isDevice){var e=this;window.clearTimeout(e.tooltipCountTimer),this.tooltipCountTimer=setTimeout((function(){e.tooltipCountTimer=null,document.getElementById(e.element.id+"_Tooltip")&&(document.getElementById(e.element.id+"_Tooltip").style.visibility="hidden")}),2e3)}},r.prototype.mouseDown=function(e){this.isPinch=!1;var t=e.target.id,i=this.options.factor+(t.indexOf("_ZoomIn_")>1&&"0.3"!==document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomIn_Rect").getAttribute("stroke-opacity")?1:0)+(t.indexOf("_ZoomOut_")>1&&"0.3"!==document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomOut_Rect").getAttribute("stroke-opacity")?-1:0);i=t.indexOf("_Reset_")>1?this.options.minZoom:i,this.isPinchZoomed=!1,this.isTouch=!1,this.panComplete=!1,this.pinchComplete=!1,this.currentTiles=null,this.isReset=!1;var s=document.getElementById(this.element.id+"_animated_tiles");this.isTileMap&&!sf.base.isNullOrUndefined(s)&&(this.currentTiles=s.cloneNode(!0)),"touchstart"===e.type?((this.options.enablePanning||sf.base.Browser.isDevice)&&e.preventDefault(),this.clientX=e.touches[0].clientX,this.clientY=e.touches[0].clientY,2===e.touches.length&&(this.touchStartList=this.targetTouches(e.touches)),this.isTouch=!0):(this.clientX=e.pageX,this.clientY=e.pageY),this.tooltipVisiblityChange();var n=this.getMousePosition(this.clientX,this.clientY);if(this.clientX=n.x,this.clientY=n.y,this.options.enableZoom&&this.options.enableSelectionZooming&&this.zoomClick&&(this.mouseClick=!0,e.preventDefault()),this.mouseClick||-1!==t.indexOf("ToolBar_Pan")||(t.indexOf("_MapAreaBorder")>-1&&this.options.enablePanning&&(this.allowPanning=!0),!this.enableSelectionZoom&&t.indexOf("")>-1&&!(t.indexOf("Zooming")>-1)&&this.options.enablePanning&&(this.allowPanning=!0)),this.isTouch&&t.indexOf("MarkerIndex")>-1&&!(t.indexOf("cluster")>-1)&&!sf.base.isNullOrUndefined(this.dotNetRef)){var o=parseInt(t.split("_LayerIndex_")[1].split("_")[0],10),r=parseInt(t.split("_MarkerIndex_")[1].split("_")[0],10),a=parseInt(t.split("_dataIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerMarkerClick",o,r,a,t,n.x,n.y,null,"marker",this.isTouch)}-1==t.indexOf("Reset")&&this.setToolbarButtonColor(i,t),t.indexOf("_Zoom_")>-1&&this.options.enableSelectionZooming&&i>this.options.max?(this.removeZoomColor(this.toolbarSelection),this.removePanColor(this.toolbarColor)):t.indexOf("_Pan_")>-1&&this.options.enablePanning&&!this.options.isTileMap&&i>1&&(this.removeZoomColor(this.toolbarColor),this.removePanColor(this.toolbarSelection))},r.prototype.removeToolbarClass=function(e,t,i,s,n){this.getElementByID(this.element.id+"_Zooming_KitCollection")&&(document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomIn_Group")&&this.getElementByID(this.element.id+"_Zooming_ToolBar_ZoomIn_Group").setAttribute("class",t),document.getElementById(this.element.id+"_Zooming_ToolBar_ZoomOut_Group")&&this.getElementByID(this.element.id+"_Zooming_ToolBar_ZoomOut_Group").setAttribute("class",i),document.getElementById(this.element.id+"_Zooming_ToolBar_Reset_Group")&&this.getElementByID(this.element.id+"_Zooming_ToolBar_Reset_Group").setAttribute("class",n),document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Group")&&this.getElementByID(this.element.id+"_Zooming_ToolBar_Zoom_Group").setAttribute("class",e),document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Group")&&this.getElementByID(this.element.id+"_Zooming_ToolBar_Pan_Group").setAttribute("class",s))},r.prototype.setOpacity=function(e,t,i,s){this.getElementByID(this.element.id+e)&&(this.getElementByID(this.element.id+e).setAttribute("stroke-opacity",i.toString()),this.getElementByID(this.element.id+e).setAttribute("fill-opacity",i.toString()),this.getElementByID(this.element.id+t).setAttribute("stroke-opacity",s.toString()),this.getElementByID(this.element.id+t).setAttribute("fill-opacity",s.toString()))},r.prototype.removeZoomOpacity=function(e,t,i,s,n,o,r,a,l,h){this.setOpacity("_Zooming_ToolBar_Zoom_Rect","_Zooming_ToolBar_Zoom_Path",t,e),this.setOpacity("_Zooming_ToolBar_ZoomIn_Rect","_Zooming_ToolBar_ZoomIn_Path",s,i),this.setOpacity("_Zooming_ToolBar_ZoomOut_Rect","_Zooming_ToolBar_ZoomOut_Path",o,n),this.setOpacity("_Zooming_ToolBar_Pan_Rect","_Zooming_ToolBar_Pan_Path",a,r),this.setOpacity("_Zooming_ToolBar_Reset_Rect","_Zooming_ToolBar_Reset_Path",h,l)},r.prototype.getElementByID=function(e){return document.getElementById(e)},r.prototype.setToolbarButtonColor=function(e,t){if(document.getElementById(this.element.id+"_Zooming_KitCollection")&&t.indexOf(this.element.id+"_Zooming_")>-1&&this.options.enableZoom){document.getElementById(this.element.id+"_Zooming_KitCollection").setAttribute("opacity","1"),sf.base.Browser.isDevice?this.removeToolbarClass("","","","",""):this.removeToolbarClass(this.options.enableSelectionZooming?"e-maps-toolbar":"","e-maps-toolbar","e-maps-toolbar",this.options.enablePanning?"e-maps-toolbar":"","e-maps-toolbar");var i=this.toolbarShapeOpacity,s=this.toolbarButtonOpacity;this.isTileMap&&e<=1.2?(sf.base.Browser.isDevice||this.removeToolbarClass(this.options.enableSelectionZooming?"e-maps-toolbar":"","e-maps-toolbar","",this.options.enablePanning?"e-maps-toolbar":"",""),this.options.enablePanning&&this.removePanColor(this.toolbarSelection),this.enableSelectionZoom&&this.options.enableSelectionZooming&&!this.isReset&&(this.removeZoomColor(this.toolbarSelection),this.removePanColor(this.toolbarColor)),this.isReset&&(this.removeZoomColor(this.toolbarColor),this.removePanColor(this.toolbarSelection)),this.removeZoomOpacity(this.options.enableSelectionZooming?i:.3,this.options.enableSelectionZooming?s:.3,i,s,.3,.3,this.options.enablePanning?i:.3,this.options.enablePanning?s:.3,.3,.3)):e<=1.2?(sf.base.Browser.isDevice||this.removeToolbarClass(this.options.enableSelectionZooming?"e-maps-toolbar":"","e-maps-toolbar","","",""),!this.enableSelectionZoom&&this.options.enablePanning&&this.removePanColor(this.toolbarColor),this.enableSelectionZoom&&this.options.enableSelectionZooming&&!this.isReset&&(this.removeZoomColor(this.toolbarSelection),this.removePanColor(this.toolbarColor)),this.isReset&&this.removeZoomColor(this.toolbarColor),this.removeZoomOpacity(this.options.enableSelectionZooming?i:.3,this.options.enableSelectionZooming?s:.3,i,s,.3,.3,.3,.3,.3,.3)):e<this.options.maxZoom?(sf.base.Browser.isDevice||this.removeToolbarClass(this.options.enableSelectionZooming?"e-maps-toolbar":"","e-maps-toolbar","e-maps-toolbar",this.options.enablePanning?"e-maps-toolbar":"","e-maps-toolbar"),this.removeZoomOpacity(this.options.enableSelectionZooming?i:.3,this.options.enableSelectionZooming?s:.3,i,s,i,s,this.options.enablePanning?i:.3,this.options.enablePanning?s:.3,i,s),(this.isReset||e===this.options.minZoom)&&(this.removeZoomOpacity(this.options.enableSelectionZooming?i:.3,this.options.enableSelectionZooming?s:.3,i,s,.3,.3,this.options.enablePanning?i:.3,this.options.enablePanning?s:.3,.3,.3),this.removeToolbarClass(this.options.enableSelectionZooming?"e-maps-toolbar":"","e-maps-toolbar","",this.options.enablePanning?"e-maps-toolbar":"","")),this.enableSelectionZoom&&this.options.enableSelectionZooming?(this.removeZoomColor(this.toolbarSelection),this.isPan&&this.options.enablePanning&&this.removePanColor(this.toolbarColor)):!this.enableSelectionZoom&&this.options.enablePanning&&(this.removePanColor(this.toolbarSelection),this.options.enableSelectionZooming&&this.removeZoomColor(this.toolbarColor))):(sf.base.Browser.isDevice||this.removeToolbarClass("","","e-maps-toolbar",this.options.enablePanning?"e-maps-toolbar":"","e-maps-toolbar"),this.removeZoomOpacity(.3,.3,.3,.3,i,s,this.options.enablePanning?i:.3,this.options.enablePanning?s:.3,i,s),this.options.enableSelectionZooming&&this.removeZoomColor(this.toolbarColor),!this.enableSelectionZoom&&this.options.enablePanning&&this.removePanColor(this.toolbarSelection))}else sf.base.Browser.isDevice||(this.removePanColor(this.toolbarColor),this.removeZoomColor(this.toolbarColor),this.removeZoomOpacity(1,1,1,1,1,1,1,1,1,1),document.getElementById(this.element.id+"_Zooming_KitCollection")&&document.getElementById(this.element.id+"_Zooming_KitCollection").setAttribute("opacity","0.3"))},r.prototype.pinchZooming=function(e){this.pinchFactor=this.scaleFactor;var t=this.scaleFactor,i=this.getBound(this.element.id);if(this.isTileMap){a=this.getTouchCenterPoint();var s=Math.sqrt(Math.pow(this.touchMoveList[0].pageX-this.touchMoveList[1].pageX,2)+Math.pow(this.touchMoveList[0].pageY-this.touchMoveList[1].pageY,2)),n=this.pinchFactor;sf.base.isNullOrUndefined(this.pinchDistance)||(this.pinchDistance>s?n-=1:this.pinchDistance<s&&(n+=1),(n=Math.min(this.options.maxZoom,Math.max(this.options.minZoom,n)))!=this.pinchFactor&&(this.pinchFactor=n,this.tileZoomLevel=this.pinchFactor,this.scaleFactor=this.pinchFactor,this.currentTouchCenter=a,this.getTileTranslatePosition(t,this.pinchFactor,{x:a.x,y:a.y},null),this.translatePoint.x=(this.tileTranslatePoint.x-.01*this.scaleFactor)/Math.pow(2,this.scaleFactor-1),this.translatePoint.y=(this.tileTranslatePoint.y-.01*this.scaleFactor)/Math.pow(2,this.scaleFactor-1),this.generateTiles(),this.renderMarkers(),this.clusterMarkerProcess())),this.pinchDistance=s}else{var o=this.areaRect;this.previousScale=this.scaleFactor,this.previousPoint=this.shapeTranslatePoint;this.tileTranslatePoint;var r=this.calculateScale(this.touchStartList,this.touchMoveList),a=this.getTouchCenter(this.touchMoveList),l=r/this.lastScale;this.lastScale=r,this.pinchFactor*=l,this.pinchFactor=Math.min(this.options.maxZoom,Math.max(this.options.minZoom,this.pinchFactor));var h=Math.abs(this.baseMapBounds.minBounds.x-this.baseMapBounds.maxBounds.x),d=Math.abs(this.baseMapBounds.minBounds.y-this.baseMapBounds.maxBounds.y),c=Math.abs(this.baseMapBounds.maxBounds.y-this.baseMapBounds.minBounds.y)*this.pinchFactor,p=this.shapeTranslatePoint.x-(o.width/this.scaleFactor-o.width/this.pinchFactor)/(o.width/(a.x-i.x)),u=this.shapeTranslatePoint.y-(o.height/this.scaleFactor-o.height/this.pinchFactor)/(o.height/(a.y-i.y));p=c<this.areaRect.height&&!sf.base.Browser.isDevice?o.x+(-this.baseMapBounds.minBounds.x+(o.width/2-h/2)):p,u=c<this.areaRect.height&&!sf.base.Browser.isDevice?o.y+(-this.baseMapBounds.minBounds.y+(o.height/2-d/2)):u,this.scaleFactor=this.pinchFactor,this.shapeTranslatePoint={x:p,y:u},this.applyTransform(this.scaleFactor,this.shapeTranslatePoint)}},r.prototype.removePanColor=function(e){document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Rect")&&this.options.enablePanning&&(document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Path").setAttribute("fill",e),document.getElementById(this.element.id+"_Zooming_ToolBar_Pan_Path").setAttribute("stroke",e))},r.prototype.removeZoomColor=function(e){document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Rect")&&this.options.enableSelectionZooming&&(document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Path").setAttribute("fill",e),document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Path").setAttribute("stroke",e))},r.prototype.getTileTranslatePosition=function(e,t,i,s){var n=256*Math.pow(2,e),o=256*Math.pow(2,t),r=(i.x-this.tileTranslatePoint.x)/n*100,a=(i.y-this.tileTranslatePoint.y)/n*100,l=this.baseMapBounds.availableSize;this.tileTranslatePoint.x=1===t?l.width/2-256:i.x-r*o/100,this.tileTranslatePoint.y=1===t?l.height/2-256:i.y-a*o/100},r.prototype.calculateScale=function(e,t){var i=this.getDistance(e[0],e[1]);return this.getDistance(t[0],t[1])/i},r.prototype.getDistance=function(e,t){var i=e.pageX-t.pageX,s=e.pageY-t.pageY;return Math.sqrt(i*i+s*s)},r.prototype.sum=function(e,t){return e+t},r.prototype.getTouchCenter=function(e){return{x:e.map((function(e){return e.pageX})).reduce(this.sum)/e.length,y:e.map((function(e){return e.pageY})).reduce(this.sum)/e.length}},r.prototype.getTouchCenterPoint=function(){for(var e=[],t=0;t<this.touchMoveList.length;t++)e.push(this.getMousePosition(this.touchMoveList[t].pageX,this.touchMoveList[t].pageY));return{x:(e[0].x+e[1].x)/2,y:(e[0].y+e[1].y)/2}},r.prototype.highlightMap=function(e){var t=e.target,i=t.id;if(t.classList.contains("highlightLine")||t.classList.contains("highlightShape")||t.classList.contains("highlightMarker")||t.classList.contains("highlightBubble")||t.classList.contains("highlightNavigation")||this.removeAllHighlight(),this.targetElementPath=t,i.indexOf("_LayerIndex_")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)){var s=parseInt(i.split("_LayerIndex_")[1].split("_")[0],10),n=i.indexOf("_dataIndex_")>-1?parseInt(i.split("_dataIndex_")[1].split("_")[0],10):0;if(i.indexOf("shapeIndex")>-1&&-1==i.indexOf("LabelIndex_")&&this.options.layerHighlightSettings[s]&&this.options.layerHighlightSettings[s].Enable){if(!t.classList.contains("mapShapeSelection")){var o=parseInt(i.split("_shapeIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerShapeHighlight",s,o,i)}}else if(i.indexOf("_BubbleIndex_")>-1){var r=parseInt(i.split("_BubbleIndex_")[1].split("_")[0],10);this.options.bubbleHighlightSettings[s][r]&&this.options.bubbleHighlightSettings[s][r].Enable&&!t.classList.contains("mapBubbleSelection")&&this.dotNetRef.invokeMethodAsync("TriggerItemHighlight","Bubble",s,r,n,i)}else if(i.indexOf("_NavigationIndex_")>-1){var a=parseInt(i.split("_NavigationIndex_")[1].split("_")[0],10);this.options.navigationHighlightSettings[s][a]&&this.options.navigationHighlightSettings[s][a].Enable&&!t.classList.contains("mapNavigationSelection")&&this.dotNetRef.invokeMethodAsync("TriggerItemHighlight","Navigation",s,a,0,i)}else if(i.indexOf("_MarkerIndex_")>-1&&-1===i.indexOf("_cluster_")&&!(i.indexOf("markerClusterConnectorLine")>-1)){var l=parseInt(i.split("_MarkerIndex_")[1].split("_")[0],10);this.options.markerHighlightSettings[s][l]&&this.options.markerHighlightSettings[s][l].Enable&&!t.classList.contains("mapMarkerSelection")&&this.dotNetRef.invokeMethodAsync("TriggerItemHighlight","Marker",s,l,n,i)}}else if(i.indexOf("_Legend_Shape_")>-1){var h=parseInt(i.split("_Index_")[1],10),d=this.legendDetails[h];if("Layers"===this.legendSettings.type){if(!t.classList.contains("mapShapeSelection"))for(var c=0;c<d.length;c++)if(this.options.layerHighlightSettings[d[c].layerIndex]&&!sf.base.isNullOrUndefined(this.options.layerHighlightSettings[d[c].layerIndex])&&this.options.layerHighlightSettings[d[c].layerIndex].Enable){t.classList.add("highlightShape");var p=document.getElementById(this.element.id+"_LayerIndex_"+d[c].layerIndex+"_shapeIndex_"+d[c].settingIndex);this.handleHighlight(p,"Shape",this.options.layerHighlightSettings[d[c].layerIndex])}}else if("Markers"===this.legendSettings.type){if(!t.classList.contains("mapMarkerSelection"))for(c=0;c<d.length;c++)if(this.options.markerHighlightSettings[d[c].layerIndex]&&!sf.base.isNullOrUndefined(this.options.markerHighlightSettings[d[c].layerIndex][d[c].settingIndex])&&this.options.markerHighlightSettings[d[c].layerIndex][d[c].settingIndex].Enable){t.classList.add("highlightMarker");p=document.getElementById(this.element.id+"_LayerIndex_"+d[c].layerIndex+"_MarkerIndex_"+d[c].settingIndex+"_dataIndex_"+d[c].dataIndex);this.handleHighlight(p,"Marker",this.options.markerHighlightSettings[d[c].layerIndex][d[c].settingIndex])}}else if("Bubbles"===this.legendSettings.type&&!t.classList.contains("mapBubbleSelection"))for(c=0;c<d.length;c++)if(this.options.bubbleHighlightSettings[d[c].layerIndex]&&!sf.base.isNullOrUndefined(this.options.bubbleHighlightSettings[d[c].layerIndex][d[c].settingIndex])&&this.options.bubbleHighlightSettings[d[c].layerIndex][d[c].settingIndex].Enable){t.classList.add("highlightBubble");p=document.getElementById(this.element.id+"_LayerIndex_"+d[c].layerIndex+"_BubbleIndex_"+d[c].settingIndex+"_dataIndex_"+d[c].dataIndex);this.handleHighlight(p,"Bubble",this.options.bubbleHighlightSettings[d[c].layerIndex][d[c].settingIndex])}}},r.prototype.removeAllHighlight=function(){this.removeHighlight("Shape"),this.removeHighlight("Line"),this.removeHighlight("Marker"),this.removeHighlight("Bubble"),this.removeHighlight("Navigation")},r.prototype.handleHighlight=function(e,t,i){if(("Marker"===t||"Bubble"===t||"Shape"===t)&&!sf.base.isNullOrUndefined(this.legendDetails)&&0!==this.legendDetails.length)for(var s=0;s<this.legendDetails.length;s++)for(var n=0;n<this.legendDetails[s].length;n++)if("Marker"===t&&e.id===this.element.id+"_LayerIndex_"+this.legendDetails[s][n].layerIndex+"_MarkerIndex_"+this.legendDetails[s][n].settingIndex+"_dataIndex_"+this.legendDetails[s][n].dataIndex||"Bubble"===t&&e.id===this.element.id+"_LayerIndex_"+this.legendDetails[s][n].layerIndex+"_BubbleIndex_"+this.legendDetails[s][n].settingIndex+"_dataIndex_"+this.legendDetails[s][n].dataIndex||"Shape"===t&&e.id===this.element.id+"_LayerIndex_"+this.legendDetails[s][n].layerIndex+"_shapeIndex_"+this.legendDetails[s][n].settingIndex){document.getElementById(this.element.id+"_Legend_Shape_Index_"+s).classList.add("highlight"+t);break}if("Arrow"!==t){var o=!sf.base.isNullOrUndefined(e.getAttribute("data-geometry"))&&e.getAttribute("data-geometry").indexOf("LineString")>-1?"Line":t;("Bubble"===o&&e.id.indexOf("_BubbleIndex_")>-1&&i.Enable||"Marker"===o&&e.id.indexOf("_MarkerIndex_")>-1&&i.Enable||"Shape"===o&&e.id.indexOf("_shapeIndex_")>-1&&i.Enable||"Navigation"===o&&e.id.indexOf("_NavigationIndex_")>-1&&i.Enable)&&(e.classList.add("highlight"+o),null!==document.querySelector("#highlight"+o+"Style")&&0!==document.querySelector("#highlight"+o+"Style").length?this.customizeStyle("highlight"+o+"Style","highlight"+o,i,e.id):this.createStyle("highlight"+o+"Style","highlight"+o,i,e.id))}else e.setAttribute("fill",i.Fill),e.setAttribute("fill-opacity",i.opacity),e.setAttribute("stroke-opacity",i.BorderOpacity)},r.prototype.removeHighlight=function(e){var t=document.querySelectorAll(".highlight"+e);if(t&&t.length>0)for(var i=0;i<t.length;i++)if(t[i].classList.remove("highlight"+e),"Navigation"===e&&""!==t[i].id&&(""!==t[i].getAttribute("marker-start")||""!==t[i].getAttribute("marker-end"))){var s=document.getElementById(t[i].id+"_triangle"),n=parseInt(t[i].id.split("_LayerIndex_")[1].split("_")[0],10),o=parseInt(t[i].id.split("_NavigationIndex_")[1].split("_")[0],10);sf.base.isNullOrUndefined(s)||(s.setAttribute("fill",this.navigation[n][o].ArrowColor),s.setAttribute("opacity","1"))}},r.prototype.createStyle=function(e,t,i,s){var n=document.createElement("style");n.id=e,this.highlightStyle(n,t,i,s),document.body.appendChild(n)},r.prototype.highlightStyle=function(e,t,i,s){if(s.indexOf("NavigationIndex")>-1){var n=sf.base.isNullOrUndefined(i.Fill)?sf.base.isNullOrUndefined(i.BorderColor)?"transparent":i.BorderColor:i.Fill,o=parseInt(s.split("_LayerIndex_")[1].split("_")[0],10),r=parseInt(s.split("_NavigationIndex_")[1].split("_")[0],10);this.navigation[o][r].Angle,e.innerHTML="."+t+" {fill: none;fill-opacity:"+i.Opacity+";stroke:"+n+";stroke-width:"+i.BorderWidth+";stroke-opacity:"+i.BorderOpacity}else t.indexOf("Line")>-1?e.innerHTML="."+t+" {fill: transparent;fill-opacity:"+i.Opacity+";stroke:"+i.Fill+";stroke-width:"+(this.isTileMap?i.BorderWidth/Math.pow(2,this.options.factor-1):i.BorderWidth/this.options.factor)+";stroke-opacity:"+i.BorderOpacity:e.innerHTML="."+t+" {fill:"+i.Fill+";fill-opacity:"+i.Opacity+";stroke:"+i.BorderColor+";stroke-width:"+(this.isTileMap?i.BorderWidth/Math.pow(2,this.options.factor-1):i.BorderWidth/this.options.factor)+";stroke-opacity:"+i.BorderOpacity},r.prototype.customizeStyle=function(e,t,i,s){var n=document.getElementById(e);this.highlightStyle(n,t,i,s)},r.prototype.renderMarkers=function(){for(var e=document.getElementById(this.element.id+"_LayerCollections"),t=0;t<this.layerCount;t++){var i=document.getElementById(this.element.id+"_LayerIndex_"+t+"_Markers_Template_Group");this.markerTemplateTranslate(i,0,this.translatePoint.x,this.translatePoint.y,this.scaleFactor);var s=document.getElementById(this.element.id+"_LayerIndex_"+t+"_DataLabel_Group");this.labelTemplateTranslate(s,this.translatePoint.x,this.translatePoint.y,this.scaleFactor)}for(var n=0;n<e.childElementCount;n++){var o=e.children[n];if("g"===o.tagName){o.id.indexOf("_LayerIndex_")>-1&&parseFloat(o.id.split("_LayerIndex_")[1].split("_")[0]);for(var r=0;r<o.children.length;r++){var a=o.children[r];if(a.COMMENT_NODE!==a.nodeType)if(a.id.indexOf("Polygon")>-1)a.setAttribute("transform","scale("+Math.pow(2,this.scaleFactor-1)+") translate( "+this.translatePoint.x+" "+this.translatePoint.y+" )");else if(a.id.indexOf("_MarkerGroup")>-1)for(t=0;t<a.childElementCount;t++)this.markerTranslate(a.children[t],0,this.translatePoint.x,this.translatePoint.y,this.scaleFactor,!1);else if(a.id.indexOf("_line_Group")>-1)if(this.isTileMap)for(var l=0;l<a.childElementCount;l++){var h=document.getElementById(a.children[l].id);for(t=0;t<h.childElementCount;t++)if(""!==h.children[t].id){var d=parseInt(h.children[t].id.split("_LayerIndex_")[1].split("_")[0],10),c=parseInt(h.children[t].id.split("_NavigationIndex_")[1].split("_")[0],10);this.navigationTranslate(h.children[t],0,d,c)}}else a.setAttribute("transform","scale("+this.scaleFactor+") translate( "+this.translatePoint.x+" "+this.translatePoint.y+" )");else if(a.id.indexOf("_dataLableIndex_Group")>-1){var p=Math.pow(2,this.scaleFactor-1);for(t=0;t<a.children.length;t++)this.dataLabelTranslate(a.children[t],0,this.translatePoint.x,this.translatePoint.y,p,"DataLabel")}}}}},r.prototype.setMarkerTranslate=function(e,t,i,s,n){"Balloon"!==this.dataSource[t][i][s][this.markerSettings[t][i].ShapeValuePath]&&"Balloon"!=this.markerSettings[t][i].Type||e.id.indexOf("cluster")>-1?"Rectangle"!==this.dataSource[t][i][s][this.markerSettings[t][i].ShapeValuePath]&&"Rectangle"!=this.markerSettings[t][i].Type||e.id.indexOf("cluster")>-1?this.isTileMap&&e.classList.contains("e-maps-cluster")?e.setAttribute("transform","translate( "+(n.x-this.areaRect.x)+" "+(n.y-this.areaRect.y)+" )"):e.setAttribute("transform","translate( "+n.x+" "+n.y+" )"):e.setAttribute("transform","translate( "+(n.x-this.markerSettings[t][i].Width/2)+" "+(n.y-this.markerSettings[t][i].Height/2)+" )"):e.setAttribute("transform","translate( "+(n.x-this.markerSettings[t][i].Width/2)+" "+(n.y-this.markerSettings[t][i].Height)+" )scale("+this.markerSettings[t][i].Width/30+" "+this.markerSettings[t][i].Height/30+" )")},r.prototype.markerTranslate=function(e,t,i,s,n,o){if(e.COMMENT_NODE!==e.nodeType&&e.TEXT_NODE!==e.nodeType){var r=parseInt(e.id.split("_LayerIndex_")[1].split("_")[0],10),a=parseInt(e.id.split("_MarkerIndex_")[1].split("_")[0],10),l=parseInt(e.id.split("_dataIndex_")[1].split("_")[0],10),h=sf.base.isNullOrUndefined(this.markerSettings[r][a].LatitudeValuePath)||""===this.markerSettings[r][a].LatitudeValuePath?"Latitude":this.markerSettings[r][a].LatitudeValuePath,d=sf.base.isNullOrUndefined(this.markerSettings[r][a].LongitudeValuePath)||""===this.markerSettings[r][a].LongitudeValuePath?"Longitude":this.markerSettings[r][a].LongitudeValuePath,c=0!==this.dataSource[r].length&&0!==this.dataSource[r][a].length?this.dataSource[r][a][l][d]:null,p=0!==this.dataSource[r].length&&0!==this.dataSource[r][a].length?this.dataSource[r][a][l][h]:null;if(p&&c)if(this.isTileMap){var u=this.convertTileLatLongToPoint({x:c,y:p},this.tileZoomLevel,this.tileTranslatePoint,!0);u.x=u.x+this.markerSettings[r][a].X,u.y=u.y+this.markerSettings[r][a].Y,o?(e.style.left=u.x-this.areaRect.x+"px",e.style.top=u.y-this.areaRect.y+"px"):this.setMarkerTranslate(e,r,a,l,u)}else{var f=this.convertGeoToPoint(p,c,t);f.x=(f.x+i)*n+this.markerSettings[r][a].X,f.y=(f.y+s)*n+this.markerSettings[r][a].Y,o?(e.style.left=f.x-this.areaRect.x+"px",e.style.top=f.y-this.areaRect.y+"px"):this.setMarkerTranslate(e,r,a,l,f)}}},r.prototype.navigationTranslate=function(e,t,i,s){if(!sf.base.isNullOrUndefined(this.navigation[i])){var n=this.navigation[i][s].Angle,o=void 0,r=void 0,a=[];if(this.navigation[i][s].Latitude.length===this.navigation[i][s].Longitude.length)for(var l=0;l<this.navigation[i][s].Latitude.length;l++){var h=this.isTileMap?this.convertTileLatLongToPoint({x:this.navigation[i][s].Longitude[l],y:this.navigation[i][s].Latitude[l]},this.tileZoomLevel,this.tileTranslatePoint,!0):this.convertGeoToPoint(this.navigation[i][s].Latitude[l],this.navigation[i][s].Longitude[l],t);a.push(h)}for(var d=0;d<a.length-1;d++){n=1<(n=-1>n?-1:n)?1:n;var c=this.convertRadius(a[d],a[d+1]);n<=1&&n>0&&(o=0,a[d].x>a[d+1].x&&(o=1)),n>=-1&&n<0&&(o=1,a[d].x>a[d+1].x&&(o=0)),r=0===(n=Math.abs(n))?"M "+a[d].x+","+a[d].y+"L "+a[d+1].x+","+a[d+1].y+" ":"M "+a[d].x+","+a[d].y+" A "+(c/2+(1-n)*c/(10*n))+" "+(c/2+(1-n)*c/(10*n))+" 0,0,"+o+" , "+a[d+1].x+","+a[d+1].y+" ",document.getElementById(this.id+"_LayerIndex_"+i+"_NavigationIndex_"+s+"_Line_"+d).setAttribute("d",r)}}},r.prototype.dataLabelTranslate=function(e,t,i,s,n,o){if(e.COMMENT_NODE!==e.nodeType&&e.TEXT_NODE!==e.nodeType){var r,a,l=parseInt(e.id.split("_LayerIndex_")[1].split("_")[0],10),h=parseFloat(e.id.split("_shapeIndex_")[1].split("_")[0]);if("Template"!==o){r=(d=this.labelCollection[l][h]).LocationX,a=d.LocationY;r=(r+i)*n-d.BorderSize.Height/4+d.OffsetX,a=(a+s)*n+d.BorderSize.Height/4+d.OffsetY,e.id.indexOf("_RectIndex_")>-1?(e.setAttribute("x",(r-parseInt(e.getAttribute("width"))/2).toString()),e.setAttribute("y",(a-(5+parseInt(e.getAttribute("height"))/2)).toString())):e.setAttribute("transform","translate( "+r+" "+a+" )")}else{var d;r=((d=this.dataLabelTemplateCollection[l][h]).LocationX+i)*n+d.OffsetX,a=(d.LocationY+s)*n+d.OffsetY,e.style.left=r+"px",e.style.top=a+"px"}}},r.prototype.convertTileLatLongToPoint=function(e,t,i,s){var n=256*Math.pow(2,t),o=(e.x+180)/360,r=Math.sin(e.y*Math.PI/180),a=.5-Math.log((1+r)/(1-r))/(4*Math.PI),l=e.x,h=e.y;return s&&(l=o*n+.5+i.x,h=a*n+.5+i.y),{x:l,y:h}},r.prototype.panning=function(e,t,i,s,n,o){if(this.mergeSeparation(),this.isTileMap){r=this.tileTranslatePoint.x-e,a=this.tileTranslatePoint.y-t;this.tileTranslatePoint.x=r,this.tileTranslatePoint.y=a,(this.tileTranslatePoint.y>-10&&t<0||this.tileTranslatePoint.y<-256*(Math.pow(2,n)-2)&&t>0)&&(this.tileTranslatePoint.x=r+e,this.tileTranslatePoint.y=a+t),o&&(e=0,t=0),this.translatePoint.x=(this.tileTranslatePoint.x-e)/Math.pow(2,n-1),this.translatePoint.y=(this.tileTranslatePoint.y-t)/Math.pow(2,n-1),this.generateTiles(),this.renderMarkers()}else{this.shapeTranslatePoint;var r=this.shapeTranslatePoint.x-e/n,a=this.shapeTranslatePoint.y-t/n,l=document.getElementById(this.element.id+"_LayerCollections").getBoundingClientRect(),h=document.getElementById(this.element.id+"_svg").getBoundingClientRect(),d=document.getElementById(this.element.id+"_Legend_Group"),c=sf.base.isNullOrUndefined(d)?0:d.getClientRects()[0].height,p=e<0?l.left<=h.left+this.areaRect.x:l.left+l.width>=h.left+h.width+this.areaRect.x+this.marginLeft,u=t<0?l.top<=h.top+this.areaRect.y:l.top+l.height+c+this.marginTop>=h.top+h.height;p&&u?(this.shapeTranslatePoint={x:r,y:a},this.applyTransform(this.scaleFactor,this.shapeTranslatePoint)):p?(this.shapeTranslatePoint={x:r,y:this.shapeTranslatePoint.y},this.applyTransform(this.scaleFactor,this.shapeTranslatePoint)):u&&(this.shapeTranslatePoint={x:this.shapeTranslatePoint.x,y:a},this.applyTransform(this.scaleFactor,this.shapeTranslatePoint))}},r.prototype.applyTransform=function(e,t){for(var i=this.isTileMap?this.translatePoint.x:t.x,s=this.isTileMap?this.translatePoint.y:t.y,n=document.getElementById(this.element.id+"_LayerCollections"),o=this.calculateFactor(),r=0;r<n.children.length;r++){var a=n.children[r];if(a.COMMENT_NODE!==a.nodeType&&"g"===a.tagName){a.id.indexOf("_LayerIndex_")>-1&&parseFloat(a.id.split("_LayerIndex_")[1].split("_")[0]);for(var l=0;l<a.children.length;l++){var h=a.children[l];if(h.COMMENT_NODE!==h.nodeType&&!sf.base.isNullOrUndefined(h.id))if(h.id.indexOf("Polygon")>-1||h.id.indexOf("_line_Group")>-1)h.setAttribute("transform","scale("+e+") translate( "+i+" "+s+" )");else if(h.id.indexOf("_MarkerGroup")>-1)for(var d=0;d<h.children.length;d++)sf.base.isNullOrUndefined(h.children[d].id)||this.markerTranslate(h.children[d],o,i,s,e,!1);else if(h.id.indexOf("_bubble_Group_")>-1)for(d=0;d<h.children.length;d++){var c=h.children[d];if(!sf.base.isNullOrUndefined(c.id)){var p=parseFloat(c.id.split("_LayerIndex_")[1].split("_")[0]),u=parseFloat(c.id.split("_BubbleIndex_")[1].split("_")[0]),f=parseFloat(c.id.split("_BubbleIndex_")[1].split("_")[2]);if(this.bubbleCollection[p]&&this.bubbleCollection[p][u]){var g=this.bubbleCollection[p][u][f],m=(g.ZoomTranslatePoint.X+i)*e,v=(g.ZoomTranslatePoint.Y+s)*e;1==g.Type&&(m-=g.Radius,v-=g.Radius),c.setAttribute("transform","translate( "+m+" "+v+" )")}}}else if(h.id.indexOf("_dataLableIndex_Group")>-1)for(d=0;d<h.children.length;d++)this.dataLabelTranslate(h.children[d],o,i,s,e,"DataLabel")}}}for(var b=0;b<this.layerCount;b++){var y=document.getElementById(this.element.id+"_LayerIndex_"+b+"_Markers_Template_Group");this.markerTemplateTranslate(y,o,i,s,e);var M=document.getElementById(this.element.id+"_LayerIndex_"+b+"_DataLabel_Group");this.labelTemplateTranslate(M,i,s,e)}},r.prototype.markerTemplateTranslate=function(e,t,i,s,n){if(e)for(var o=0;o<e.childElementCount;o++)this.markerTranslate(e.children[o],t,i,s,n,!0)},r.prototype.labelTemplateTranslate=function(e,t,i,s){if(e)for(var n=this.isTileMap?Math.pow(2,s-1):s,o=0;o<e.childElementCount;o++)this.dataLabelTranslate(e.children[o],0,t,i,n,"Template")},r.prototype.calculateFactor=function(){var e,t,i,s=1,n=this.baseMapBounds,o=this.areaRect.width,r=this.areaRect.height;if(n){var a=this.convertGeoToPoint(n.latitudeMin,n.longitudeMin,null),l=this.convertGeoToPoint(n.latitudeMax,n.longitudeMax,null);t=l.y-a.y,i=l.x-a.x}else t=i=500;return e=t<r?parseFloat(Math.abs(100*Number(r/Number(t.toString()+"e+1"))).toString().split(".")[0])/10:r/t,s=i<o?parseFloat(Math.abs(100*Number(o/Number(i.toString()+"e+1"))).toString().split(".")[0])/10:o/i,Math.min(s,e)},r.prototype.convertRadius=function(e,t){var i=t.x-e.x,s=t.y-e.y;return Math.sqrt(Math.pow(i,2)+Math.pow(s,2))},r.prototype.convertGeoToPoint=function(e,t,i){var s,n,o,r,a={width:this.areaRect.width,height:this.areaRect.height},l=this.degreesToRadians(e),h=this.degreesToRadians(t),d=null==i?Math.min(a.width,a.height):Math.min(a.width,a.height)*i;switch(this.projectionType){case"Mercator":var c={x:d/2,y:d/2};s=c.x+t*(d/360);var p=this.calculateBound(Math.sin(this.degreesToRadians(e)),-.9999,.9999);n=c.y+.5*Math.log((1+p)/(1-p))*(-d/(2*Math.PI));break;case"Winkel3":((o=this.aitoff(h,l)).x+h/(Math.PI/2))/2,(o.y+l)/2;break;case"Miller":h,1.25*Math.log(Math.tan(Math.PI/4+.4*l));break;case"Eckert3":2/(r=Math.sqrt(Math.PI*(4+Math.PI)))*h*(1+Math.sqrt(1-4*l*l/(Math.PI*Math.PI))),4/r*l;break;case"AitOff":(o=this.aitoff(h,l)).x,o.y;break;case"Eckert5":h*(1+Math.cos(l))/Math.sqrt(2+Math.PI),2*l/Math.sqrt(2+Math.PI);break;case"Equirectangular":h,l;break;case"Eckert6":r=(1+Math.PI/2)*Math.sin(l);for(var u=1/0,f=0;f<10&&Math.abs(u)>1e-6;f++)l-=u=(l+Math.sin(l)-r)/(1+Math.cos(l));r=Math.sqrt(2+Math.PI),h*(1+Math.cos(l))/r,2*l/r}return{x:s,y:n}},r.prototype.aitoff=function(e,t){var i=Math.cos(t),s=Math.sin(Math.cos(i*Math.cos(e/=2)));return{x:2*i*Math.sin(e)*s,y:Math.sin(t)*s}},r.prototype.degreesToRadians=function(e){return e*(Math.PI/180)},r.prototype.calculateBound=function(e,t,i){return sf.base.isNullOrUndefined(t)||(e=Math.max(e,t)),sf.base.isNullOrUndefined(i)||(e=Math.min(e,i)),e},r.prototype.getTileGeoLocation=function(e,t){var i=this.getBound(this.element.id),s=this.getBound(this.element.id+"_tile_parent");return this.pointToLatLong(e+this.areaRect.x-(s.x-i.x),t+this.areaRect.y-(s.y-i.y))},r.prototype.pointToLatLong=function(e,t){var i=256*Math.pow(2,this.scaleFactor),s=this.clip(e-this.translatePoint.x*this.scaleFactor,0,i-1)/i-.5,n=.5-this.clip(t-this.translatePoint.y*this.scaleFactor,0,i-1)/i;return{latitude:90-360*Math.atan(Math.exp(2*-n*Math.PI))/Math.PI,longitude:360*s}},r.prototype.generateTiles=function(){var e,t=this.baseMapBounds.availableSize.width,i=this.baseMapBounds.availableSize.height,s=0,n=0,o=0;s=e=Math.pow(2,this.tileZoomLevel);var r=[];this.tileTranslatePoint.x+256*s<t&&(n=this.tileTranslatePoint.x>0?Math.ceil(this.tileTranslatePoint.x/256):0,o=this.tileTranslatePoint.x+256*s<t?Math.ceil((t-(this.tileTranslatePoint.x+256*s))/256):0),s+=n+o,s=this.horizontalPanXCount>=s?this.horizontalPanXCount:s,this.horizontalPan=!1;for(var a=Math.min(e,(-this.tileTranslatePoint.y+i)/256+1),l=Math.min(s,(-this.tileTranslatePoint.x+t+256*o)/256+1),h=-(this.tileTranslatePoint.x+256*n+256)/256,d=-(this.tileTranslatePoint.y+256)/256,c=Math.round(h);c<Math.round(l);c++)for(var p=Math.round(d);p<Math.round(a);p++){var u=256*c+this.tileTranslatePoint.x,f=256*p+this.tileTranslatePoint.y;if(u>-256&&u<=t&&f>-256&&f<i&&p>=0){var g=c;c<0&&(g=g%e+e);var m={x:g%e,y:p,left:u,top:f,height:256,width:256,src:null};-1===this.urlTemplate.indexOf("virtualearth")?m.src=this.urlTemplate.replace("level",this.scaleFactor.toString()).replace("tileX",m.x.toString()).replace("tileY",m.y.toString()):m.src=this.getBingMap(m,this.urlTemplate),r.push(m)}}var v=document.getElementById(this.element.id+"_animated_tiles"),b=[];for(p=0;p<r.length;p++){var y=document.getElementById(this.element.id+"tile"+p),M=null,C=!1;b.push(p),y?(y.style.removeProperty("display"),M=y.children[0]):((y=document.createElement("div")).id=this.element.id+"tile"+p,y.style.userSelect="none",M=document.createElement("img"),C=!0),M.src!==r[p].src&&M.setAttribute("src",r[p].src),y.style.position="absolute",y.style.left=r[p].left+"px",y.style.top=r[p].top+"px",y.style.height=r[p].height+"px",y.style.width=r[p].width+"px",C&&(y.appendChild(M),v.appendChild(y))}for(var w=r.length;w<v.childElementCount;w++){for(var S=!1,N=0;N<this.currentTiles.childElementCount;N++)S||this.currentTiles.children[N].id!==v.children[w].id||(S=!0);S?v.children[w].style.display="none":v.removeChild(v.children[w])}},r.prototype.getBingMap=function(e,t){for(var i="",s=["t0","t1","t2","t3"],n=Math.min(this.tileZoomLevel,this.options.maxZoom);n>0;n--){var o=0,r=1<<n-1;0!=(e.x&r)&&o++,0!=(e.y&r)&&(o+=2),i=i+""+o}var a=s[Math.min(parseInt(i.substr(i.length-1,1),10),s.length)];return(t=t.replace("{quadkey}",i).replace("{subdomain}",a))+"&mkt=en-US&ur=IN&Key="+this.key},r.prototype.clip=function(e,t,i){return Math.min(Math.max(e,t),i)},r.prototype.svgPoint=function(e,t,i){var s=this.svg.createSVGPoint();return s.x=t-(this.isTileMap?this.areaRect.x:0),s.y=i-(this.isTileMap?this.areaRect.y:0),s.matrixTransform(e.getScreenCTM().inverse())},r.prototype.clusterExpand=function(e,t){var i,s=JSON.parse(t.dataSource),n=parseInt(e[0].split("_LayerIndex_")[1].split("_")[0],10),o=this.markerClusterCollection[n],r=e[0].split("_LayerIndex_"),a=parseInt(r[1].split("_")[0],10),l=[],h=[];if(e[0].indexOf("_MarkerIndex_")>-1){var d=parseInt(r[1].split("_MarkerIndex_")[1].split("_")[0],10),c=parseInt(r[1].split("_dataIndex_")[1].split("_")[0],10);if(!isNaN(d)){i=s[c];var p=[];if(e[0].indexOf("_cluster_")>-1&&o.AllowClustering)for(var u=0;u<s.length;u++)s[u].Latitude===i.Latitude&&s[u].Longitude===i.Longitude&&p.push({data:i,index:a});if(e[0].indexOf("_cluster_")>-1){var f=document.getElementById(e[0].indexOf("_datalabel_")>-1?e[0].split("_datalabel_")[0]:e[0]),g=void 0;"Balloon"===this.markerClusterCollection[n].Shape||sf.base.isNullOrUndefined(f)?sf.base.isNullOrUndefined(f.firstElementChild)||(g=f.firstElementChild.innerHTML.split(",").map(String)):g=f.innerHTML.split(",").map(String),p=[];for(var m=0;m<g.length;m++){var v=this.dataSource[n][parseInt(g[m].split(":")[0])][parseInt(g[m].split(":")[1])];p.push({data:v,index:parseInt(g[m].split(":")[1])}),v.text="",l.push(v)}!1,h.push({data:p,layerIndex:a,markerIndex:d,dataIndex:c,targetClusterIndex:+(e[0].split("_cluster_")[1].indexOf("_datalabel_")>-1?e[0].split("_cluster_")[1].split("_datalabel_")[0]:e[0].split("_cluster_")[1]),isClusterSame:!1})}}}if(h.length>0){this.clusterData=h;var b=document.getElementById(r[0]+"_LayerIndex_"+n+"_MarkerGroup");this.markerClusterExpandCheck?(this.mergeSeparateCluster(this.clusterData,r[0]),this.markerClusterExpandCheck=!1):(this.clusterSeparate(this.clusterData,b,!0,r[0],o),this.markerClusterExpandCheck=!0)}},r.prototype.mergeSeparateCluster=function(e,t){var i,s=e[0].layerIndex,n=e[0].targetClusterIndex,o=e[0].markerIndex,r=t+"_LayerIndex_"+s+"_MarkerIndex_"+o+"_dataIndex_"+e[0].dataIndex+"_cluster_"+n,a=this.getElementId(r),l=this.getElementId(r+"_datalabel_"+n);sf.base.isNullOrUndefined(a)||(a.style.visibility="visible"),sf.base.isNullOrUndefined(l)||(l.style.visibility="visible");var h=e[0].data.length;if(0!=this.clusterLocation.length){var d=[];d="g"==a.tagName?a.firstElementChild.innerHTML.split(",").map(String):a.innerHTML.split(",").map(String);for(var c=0;c<h;c++){var p=parseInt(d[c].split(":")[0]),u=parseInt(d[c].split(":")[1]),f=t+"_LayerIndex_"+s+"_MarkerIndex_"+p;if(i=this.getElementId(f+"_dataIndex_"+u),!sf.base.isNullOrUndefined(i)){if(-1===i.parentElement.id.indexOf("Template")){var g=this.markerSettings[s][o];"Balloon"===g.Type?i.setAttribute("transform","translate( "+this.clusterLocation[c].x+" "+this.clusterLocation[c].y+")scale( "+g.Width/30+" "+g.Height/30+" ) "):i.setAttribute("transform","translate( "+this.clusterLocation[c].x+" "+this.clusterLocation[c].y+")")}else i.style.left=this.clusterLocation[c].x+"px",i.style.top=this.clusterLocation[c].y+"px";i.style.visibility="hidden",i.style.content="marker",i.classList.add("e-maps-marker-hidden")}}}this.clusterLocation=[],this.removeElement(t+"_LayerIndex_"+s+"_MarkerIndex_"+o+"_markerClusterConnectorLine")},r.prototype.removeElement=function(e){var t=document.getElementById(e);sf.base.isNullOrUndefined(t)||t.remove()},r.prototype.drawPath=function(e){var t=document.getElementById(e.id);return sf.base.isNullOrUndefined(t)&&(t=document.createElementNS("http://www.w3.org/2000/svg","path")),t.setAttribute("id",e.id),t.setAttribute("d",e.d),t.setAttribute("opacity",e.opacity.toString()),t.setAttribute("stroke",e.stroke),t.setAttribute("stroke-width",e.strokeWidth.toString()),t},r.prototype.clusterSeparate=function(e,t,i,s,o){var r=e[0].layerIndex,a=e[0].markerIndex,l=e[0].targetClusterIndex,h=e[0].dataIndex,d=(document.getElementById(s).getBoundingClientRect(),i?this.getElementId:t.querySelector.bind(t)),c=i?"":"#",p=s+"_LayerIndex_"+r+"_MarkerIndex_"+a,u=p+"_dataIndex_"+h+"_cluster_"+l,f=d(c+""+u),g=d(c+""+u+"_datalabel_"+l);f.style.visibility="hidden",g.style.visibility="hidden";var m=d(c+""+p+"_dataIndex_"+h),v=+f.getAttribute("transform").split("translate(")[1].trim().split(" ")[0],b=+f.getAttribute("transform").split("translate(")[1].trim().split(" ")[1].split(")")[0].trim(),y=30,M=6.28*y,C=0,w=Math.round(M/25);C+=w;var S=e[0].data.length,N=Math.round(25/M*100),x=(N=S<w?100/S:N)/100*360,O=S<w?45:0,E=1,I="M "+v+" "+b+" ",D="",T=[];T="g"==f.tagName?f.firstElementChild.innerHTML.split(",").map(String):f.innerHTML.split(",").map(String);for(var j=0;j<S;j++){var A=parseInt(T[j].split(":")[0]),z=parseInt(T[j].split(":")[1]),L=s+"_LayerIndex_"+r+"_MarkerIndex_"+A;if(C===j||Math.round(O)>=360){for(O=0,M=6.28*(y=30*++E),w=Math.round(M/25),N=Math.round(25/M*100);N*w<100;)w++;x=N/100*360,C+=w}var k=v+y*Math.sin(2*Math.PI*O/360),P=b+y*Math.cos(2*Math.PI*O/360);if(D+=I+"L "+k+" "+P+" ",m=d(c+""+L+"_dataIndex_"+z),sf.base.isNullOrUndefined(m.getAttribute("transform")))m.parentElement.id.indexOf("Template")>-1&&this.clusterLocation.push({x:parseFloat(m.style.left.replace("px","")),y:parseFloat(m.style.top.replace("px",""))});else{var B=parseFloat(m.getAttribute("transform").split("translate(")[1].trim().split(" ")[0]),U=parseFloat(m.getAttribute("transform").split("translate(")[1].trim().split(" ")[1].split(")")[0].trim());this.clusterLocation.push({x:B,y:U})}var R=this.markerSettings[r][A];-1===m.parentElement.id.indexOf("Template")?"Balloon"===R.Type?m.setAttribute("transform","translate( "+(k-R.Width/2)+" "+(P-R.Height)+"  ) scale( "+R.Width/30+" "+R.Height/30+" ) "):m.setAttribute("transform","translate( "+k+" "+P+")"):(m.style.left=k+"px",m.style.top=P+"px"),m.style.visibility="visible",g.style.visibility="hidden",O+=x}var H={d:D,id:s+"_LayerIndex_"+r+"_MarkerIndex_"+a+"_dataIndex_"+h+"_markerClusterConnectorLine",stroke:sf.base.isNullOrUndefined(o.LineColor)?"#000000":o.LineColor,opacity:o.LineOpacity,strokeWidth:o.LineWidth};t=i?d(s+"_LayerIndex_"+r+"_MarkerGroup"):t;var Y=n(s+"_LayerIndex_"+r+"_MarkerIndex_"+a+"_markerClusterConnectorLine");Y.appendChild(this.drawPath(H)),t.insertBefore(Y,t.querySelector("#"+p+"_dataIndex_0"))},r.prototype.getElementId=function(e){return document.getElementById(e)},r.prototype.shapeHighlightHandle=function(e,t,i){var s=this.options.layerHighlightSettings[i];this.handleHighlight(this.targetElementPath,"Shape",{BorderColor:s.BorderColor,BorderWidth:s.BorderWidth/this.scaleFactor,BorderOpacity:s.BorderOpacity,Enable:s.Enable,EnableMultiSelect:s.EnableMultiSelect,Fill:e,Opacity:t})},r.prototype.itemHighlightHandle=function(e,t,i,s,n){if("Bubble"===n){var o=this.options.bubbleHighlightSettings[i][s];this.handleHighlight(this.targetElementPath,"Bubble",{BorderColor:o.BorderColor,BorderWidth:o.BorderWidth,BorderOpacity:o.BorderOpacity,Enable:o.Enable,EnableMultiSelect:o.EnableMultiSelect,Fill:e,Opacity:t})}if("Marker"===n){var r=this.options.markerHighlightSettings[i][s];this.handleHighlight(this.targetElementPath,"Marker",{BorderColor:r.BorderColor,BorderWidth:r.BorderWidth,BorderOpacity:r.BorderOpacity,Enable:r.Enable,EnableMultiSelect:r.EnableMultiSelect,Fill:e,Opacity:t})}if("Navigation"===n){for(var a=this.options.navigationHighlightSettings[i][s],l=0;l<=this.navigation[i][s].Latitude.length;l++){var h=document.getElementById(this.element.id+"_LayerIndex_"+i+"_NavigationIndex_0_Line_"+l);this.handleHighlight(h,"Navigation",{BorderColor:a.BorderColor,BorderWidth:a.BorderWidth,BorderOpacity:a.BorderOpacity,Enable:a.Enable,EnableMultiSelect:a.EnableMultiSelect,Fill:e,Opacity:t})}if(""!==this.targetElementPath.getAttribute("marker-start")||""!==this.targetElementPath.getAttribute("marker-end")){var d=document.getElementById(this.targetElementPath.id+"_triangle");this.handleHighlight(d,"Arrow",{BorderColor:d.BorderColor,BorderWidth:d.BorderWidth,BorderOpacity:d.BorderOpacity,Enable:d.Enable,EnableMultiSelect:d.EnableMultiSelect,Fill:e,Opacity:t})}}},r.prototype.elementAnimate=function(e,t,i,s,n,o,r,a,l,h,d){var c=this;sf.base.isNullOrUndefined(r)&&(r=0);var p=s,u=n,f=0;new sf.base.Animation({}).animate(e,{duration:i,delay:t,progress:function(t){t.timeStamp>t.delay&&(f=(t.timeStamp-t.delay)/t.duration,e.style.visibility="visible",e.setAttribute("transform","translate( "+(p-r*f)+" "+(u-r*f)+" ) scale("+f+")"))},end:function(t){e.style.visibility="visible",e.setAttribute("transform",""),"Balloon"===a||"Balloon"===l?e.setAttribute("transform","translate( "+s+" "+n+"  ) scale( "+h/30+" "+d/30+" ) "):e.setAttribute("transform","translate( "+s+" "+n+"  )"),sf.base.isNullOrUndefined(c.dotNetRef)||c.dotNetRef.invokeMethodAsync("TriggerAnimation",e)}})},r.prototype.markerAnimation=function(e,t){for(var i=JSON.parse(t.markerData),s=0;s<i.length;s++)for(var n=0;n<i[s].MarkerAnimation.length;n++)if(i[s].MarkerAnimation[n].IsMarkerShape)for(var o=0;o<i[s].MarkerAnimation[n].DataSourceLength;o++){var r=document.getElementById(e+"_LayerIndex_"+s+"_MarkerIndex_"+n+"_dataIndex_"+o),a=sf.base.isNullOrUndefined(this.dataSource[i[s].MarkerAnimation[n].Layer][n][o][i[s].MarkerAnimation[n].ShapeValuePath])?" ":this.dataSource[i[s].MarkerAnimation[n].Layer][n][o][i[s].MarkerAnimation[n].ShapeValuePath];this.elementAnimate(r,i[s].MarkerAnimation[n].AnimationDelay,i[s].MarkerAnimation[n].AnimationDuration,r.transform.baseVal[0].matrix.e,r.transform.baseVal[0].matrix.f,null,0,i[s].MarkerAnimation[n].MarkerType,a,i[s].MarkerAnimation[n].Width,i[s].MarkerAnimation[n].Height)}},r.prototype.bubbleAnimation=function(e,t){for(var i=JSON.parse(t.bubbleData),s=0;s<i.length;s++)for(var n=0;n<i[s].MarkerAnimation.length;n++)for(var o=0;o<i[s].MarkerAnimation[n].DataSourceLength;o++){var r=document.getElementById(e+"_LayerIndex_"+s+"_BubbleIndex_"+n+"_dataIndex_"+o);sf.base.isNullOrUndefined(r)||this.elementAnimate(r,i[s].MarkerAnimation[n].AnimationDelay,i[s].MarkerAnimation[n].AnimationDuration,r.transform.baseVal[0].matrix.e,r.transform.baseVal[0].matrix.f,null,0," "," ",0,0)}},r.prototype.toolbarOpacity=function(e,t){this.removeZoomOpacity(t,e,t,e,t,e,t,e,t,e)},r.prototype.clusterMarkerProcess=function(){for(var e=!1,t=0;t<this.layerCount;t++)e||(this.mergeSeparation(),this.removeCluster(),e=!0),this.clusterMarkers(t)},r.prototype.clusterMarkers=function(e){var t=this.markerClusterCollection[e];if(t.AllowClustering){var i=void 0,s=void 0,r=this.id,a=[],l=[],h=0,d=0,c=n(r+"_LayerIndex_"+e+"_cluster"),p=3.75,u=0,f=void 0,g=void 0,m=void 0,v=[],b=void 0,y=document.getElementById(r),M=document.getElementById(r+"_LayerIndex_"+e+"_MarkerGroup");if(!sf.base.isNullOrUndefined(M)&&M.childElementCount<=0&&M.childElementCount<=0&&(M=document.getElementById(r+"_LayerIndex_"+e+"_Markers_Template_Group"),b=!0),M=sf.base.isNullOrUndefined(M)?document.getElementById(r+"_LayerIndex_"+e+"_Markers_Template_Group"):M)for(var C=0;C<M.childElementCount;C++)if(!(M.children[C].id.indexOf("markerClusterConnectorLine")>-1)){a=[];var w=parseInt(M.children[C].id.split("_MarkerIndex_")[1].split("_")[0],10),S=parseInt(M.children[C].id.split("_dataIndex_")[1].split("_")[0],10),N=("Balloon"===this.markerSettings[e][w].Type||"Image"===this.markerSettings[e][w].Type)&&sf.base.isNullOrUndefined(this.markerSettings[e][w].ShapeValuePath);if("hidden"!==M.children[C].style.visibility){var x=(g=M.children[C]).getBoundingClientRect();if(a.push(w.toString()+":"+S.toString()),null!==x){for(var O=C+1;O<M.childElementCount;O++)if("hidden"!==M.children[O].style.visibility){g=M.children[O];var E=parseInt(g.id.split("_MarkerIndex_")[1].split("_")[0],10),I=parseInt(g.id.split("_dataIndex_")[1].split("_")[0],10),D=g.getBoundingClientRect();null!==D&&(x.left>D.right||x.right<D.left||x.top>D.bottom||x.bottom<D.top||(l.push(D),M.children[O].style.visibility="hidden",M.children[O].style.content="marker",M.children[O].classList.add("e-maps-marker-hidden"),a.push(E.toString()+":"+I.toString())))}if(h=x.left+x.width/2,d=x.top+(N?x.height:x.height/2),l.length>0){var T=y.getBoundingClientRect();h=this.isTileMap?h-T.left-this.areaRect.x:h-T.left,d=this.isTileMap?d-T.top-this.areaRect.y:d-T.top;var j=parseInt(M.children[C].id.split("_dataIndex_")[1].split("_")[0],10),A=parseInt(M.children[C].id.split("_LayerIndex_")[1].split("_")[0],10);M.children[C].getAttribute("transform")?(h+=this.isTileMap?0:b?this.areaRect.x:0,d+=this.isTileMap?0:b?this.areaRect.y:0):(h=parseFloat(M.children[C].style.left.replace("px",""))+(this.isTileMap?0:b?this.areaRect.x:0),d=parseFloat(M.children[C].style.top.replace("px",""))+(this.isTileMap?0:b?this.areaRect.y:0));var z=r+"_LayerIndex_"+A+"_MarkerIndex_"+w+"_dataIndex_"+j+"_cluster_"+u,L=r+"_LayerIndex_"+A+"_MarkerIndex_"+w+"_dataIndex_"+j+"_cluster_"+u+"_datalabel_"+u;u++;var k=void 0;switch(t.Shape){case"Circle":(k=this.createClusterShape("circle",z,t.Fill,t.Opacity,"translate( "+h+" "+d+" )",!0,a,t)).setAttribute("r",(t.Height+t.Width)/4);break;case"Rectangle":(k=this.createClusterShape("rect",z,t.Fill,t.Opacity,"translate( "+h+" "+d+" )",!0,a,t)).setAttribute("x",-t.Width/2),k.setAttribute("y",-t.Height/2),k.setAttribute("height",t.Height),k.setAttribute("width",t.Width);break;case"Balloon":m=n(z);(k=this.createClusterShape("path",z,t.Fill,t.Opacity,"translate( "+-t.Width/2+", "+-t.Height+" ) scale( "+t.Width/30+", "+t.Height/30+" )",!0,a,t)).classList.remove("clusterGroup"),k.setAttribute("d","M15,0C8.8,0,3.8,5,3.8,11.2C3.8,17.5,9.4,24.4,15,30c5.6-5.6,11.2-12.5,11.2-18.8C26.2,5,21.2,0,15,0z M15,16c-2.8,0-5-2.2-5-5s2.2-5,5-5s5,2.2,5,5S17.8,16,15,16z"),m.appendChild(k),m.style.visibility="visible",m.style.cursor="pointer",m.setAttribute("class","clusterGroup"),b&&m.classList.add("e-maps-cluster"),m.setAttribute("transform","translate( "+h+" "+d+" )");break;case"Image":var P=-(0+t.Width/2),B=-(0+t.Height/2);(k=this.createClusterShape("image",z,null,null,"translate( "+h+" "+d+" )",!0,a,t)).setAttributeNS(null,"height",t.Height),k.setAttributeNS(null,"width",t.Width),k.setAttributeNS("http://www.w3.org/1999/xlink","href",t.ImageUrl),k.setAttributeNS(null,"x",P),k.setAttributeNS(null,"y",B);break;case"Cross":case"Diamond":case"Star":case"Triangle":case"HorizontalLine":case"VerticalLine":case"InvertedTriangle":case"Pentagon":var U;U=o(t.Shape,{height:t.Height,width:t.Width},{x:0,y:0}),(k=this.createClusterShape("path",z,t.Fill,t.Opacity,"translate( "+h+" "+d+" )",!1,a,t)).setAttribute("d",U),"Cross"!==t.Shape&&"HorizontalLine"!==t.Shape&&"VerticalLine"!==t.Shape||(k.setAttribute("stroke",t.Fill),k.setAttribute("stroke-width",((t.Width+t.Height)/4).toString()))}"Balloon"!==t.Shape&&(b&&this.isTileMap||k.setAttribute("class","clusterGroup")),b&&"Balloon"!==t.Shape&&k.classList.add("e-maps-cluster");var R=document.createElementNS("http://www.w3.org/2000/svg","text");R.setAttribute("id",L),R.setAttribute("x","0"),R.setAttribute("y",p.toString()),R.setAttribute("fill",t.LabelColor),R.setAttribute("font-size",t.LabelSize),R.setAttribute("font-style",t.LabelFontStyle),R.setAttribute("font-family",t.LabelFontFamily),R.setAttribute("font-weight",t.LabelFontWeight),R.setAttribute("text-anchor","middle"),R.setAttribute("transform","translate( "+h+" "+d+" )"),R.setAttribute("opacity",t.LabelOpacity),R.style.visibility="visible",R.style.cursor="pointer",R.setAttribute("class","clusterGroup"),R.innerHTML=(l.length+1).toString(),b&&R.classList.add("e-maps-cluster"),c.appendChild(R),c.setAttribute("class","clusterGroup"),"Balloon"!==t.Shape?c.appendChild(k):c.appendChild(m),M.children[C].style.visibility="hidden",M.children[C].style.content="marker",M.children[C].classList.add("e-maps-marker-hidden")}l=[]}}}if(c.childElementCount>0){var H=document.getElementById(r+"_LayerIndex_"+e);H.appendChild(c),f=document.getElementById(r+"_LayerIndex_"+e+"_MarkerGroup");for(C=0;C<c.childElementCount;C++)if("hidden"!==c.children[C].style.visibility&&null!==(i=(g=c.children[C]).getBoundingClientRect())&&!(g.id.indexOf("_datalabel_")>-1)){for(O=C+1;O<c.childElementCount;O++)if("hidden"!==c.children[O].style.visibility){var Y=c.children[O];w=parseInt(Y.id.split("_MarkerIndex_")[1].split("_")[0],10),S=parseInt(Y.id.split("_dataIndex_")[1].split("_")[0],10);null===(s=Y.getBoundingClientRect())||Y.id.indexOf("_datalabel_")>-1||i.left>s.right||i.right<s.left||i.top>s.bottom||i.bottom<s.top||(v.push(Y),v.push(c.children[O-1]),c.children[O].style.visibility="hidden",c.children[O-1].style.visibility="hidden",a.push(w.toString()+":"+S.toString()))}if(v.length>0){g=c.children[C];for(var F=0;F<v.length;F++)"g"===g.tagName?g.children[0].textContent=g.children[0].textContent+","+v[F].textContent:g.textContent=g.textContent+","+v[F].textContent,c.children[C-1].textContent=(+c.children[C-1].textContent+ +v[F+1].textContent).toString(),F++}v=[]}for(;0<c.children.length;)f.insertBefore(c.children[0],f.firstChild);(H=document.getElementById(r+"_LayerIndex_"+e)).appendChild(f),H.removeChild(c)}}},r.prototype.createClusterShape=function(e,t,i,s,n,o,r,a){var l=document.createElementNS("http://www.w3.org/2000/svg",e);return l.setAttribute("id",t),l.setAttribute("fill",i),l.setAttribute("stroke",a.BorderColor),l.setAttribute("stroke-width",a.BorderWidth),l.setAttribute("stroke-dasharray",a.DashArray),l.setAttribute("fill-opacity",s),l.setAttribute("stroke-opacity",a.BorderOpacity),l.setAttribute("transform",n),l.setAttribute("style","visibility:visible"),l.setAttribute("style","cursor: pointer"),o?l.setAttribute("class","clusterGroup"):l.setAttribute(null,"class","clusterGroup"),l.innerHTML=r,l},r.prototype.mergeSeparation=function(){this.markerClusterExpandCheck&&this.clusterData&&(this.mergeSeparateCluster(this.clusterData,this.id),this.markerClusterExpandCheck=!1)},r.prototype.click=function(e){if("pointerdown"!==e.type||"mouse"!==e.pointerType){var t=e.target.id,i=this.getMousePosition(e.pageX,e.pageY);t.split("_")[0];if((t.indexOf("_Left_Page_Rect")>-1||t.indexOf("_Right_Page_Rect")>-1)&&!sf.base.isNullOrUndefined(this.dotNetRef)&&this.dotNetRef.invokeMethodAsync("TriggerLegendPaging",t.indexOf("_Left_Page_Rect")>-1?1:0),t.indexOf("_Zooming_")>-1&&this.options.enableZoom){var s="pointerdown"===e.type?"click":e.type,n=1;if(this.mergeSeparation(),t.indexOf("_ZoomIn_")>-1&&(n=0===this.factorCount?this.options.factor+1:this.scaleFactor+1,this.factorCount++,this.triggerEnableZoom(n,t.split("_Zooming_ToolBar_")[1].split("_")[0],s)),t.indexOf("_ZoomOut_")>-1&&(n=0===this.factorCount?this.options.factor-1:this.scaleFactor-1,this.factorCount++,this.triggerEnableZoom(n,t.split("_Zooming_ToolBar_")[1].split("_")[0],s)),t.indexOf("_Reset_")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)){this.zoomClick=!1;var o=t.split("_Zooming_ToolBar_")[1].split("_")[0];this.removeCluster(),this.dotNetRef.invokeMethodAsync("TriggerZoom",o,s)}t.indexOf("_Zoom_")>-1&&"0.3"!==document.getElementById(this.id+"_Zooming_ToolBar_Zoom_Rect").getAttribute("stroke-opacity")&&(this.zoomClick=!0,this.allowPanning=!1,this.enableSelectionZoom=!0),t.indexOf("_Pan_")>-1&&"0.3"!==document.getElementById(this.id+"_Zooming_ToolBar_Pan_Rect").getAttribute("stroke-opacity")&&(this.zoomClick=!1,this.allowPanning=!1,this.enableSelectionZoom=!1,this.isPan=!0)}if((t.indexOf("MapAreaBorder")>-1||t.indexOf("shapeIndex")>-1||t.indexOf("_Legend_")>-1||t.indexOf("BubbleIndex")>-1||t.indexOf("Zooming")>-1||t.indexOf("MapMargin")>-1||""===t)&&this.mergeSeparation(),(""===t||-1===t.indexOf(this.element.id))&&!sf.base.isNullOrUndefined(e.target.offsetParent)){var r=e.target.offsetParent.id;t=r.indexOf("_MarkerIndex_")>-1?r:t}if(t.indexOf("_LayerIndex_")>-1&&t.indexOf("_MarkerIndex_")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)){var a=parseInt(t.split("_LayerIndex_")[1].split("_")[0],10),l=parseInt(t.split("_MarkerIndex_")[1].split("_")[0],10),h=parseInt(t.split("_dataIndex_")[1].split("_")[0],10),d=document.getElementById(t),c=void 0;(t.indexOf("cluster")>-1||t.indexOf("Cluster")>-1)&&(this.mergeSeparation(),t.indexOf("_cluster_")>-1&&t.indexOf("_datalabel_")>-1&&(d=document.getElementById(t.split("_datalabel")[0])),"Balloon"===this.markerClusterCollection[a].Shape?!sf.base.isNullOrUndefined(d.firstElementChild)&&d.firstElementChild.innerHTML.length>0&&(c=d.firstElementChild.innerHTML.split(",")):!sf.base.isNullOrUndefined(d)&&d.innerHTML.length>0&&(c=d.innerHTML.split(","))),this.removeAllHighlight(),t.indexOf("markerClusterConnectorLine")>-1||this.dotNetRef.invokeMethodAsync("TriggerMarkerClick",a,l,h,t,i.x,i.y,c,t.indexOf("cluster")>-1?"cluster":"marker",this.isTouch)}if(t.indexOf("shapeIndex")>-1&&"Click"===this.options.tooltipDisplayMode&&!sf.base.isNullOrUndefined(this.dotNetRef)){a=parseInt(t.split("_LayerIndex_")[1].split("_")[0],10);var p=parseInt(t.split("_shapeIndex_")[1].split("_")[0],10);this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",t,i.x,i.y,a,p,"Shape",0)}if(t.indexOf("_LayerIndex_")>-1&&t.indexOf("BubbleIndex")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)){a=parseInt(t.split("_LayerIndex_")[1].split("_")[0],10),l=parseInt(t.split("_BubbleIndex_")[1].split("_")[0],10),h=parseInt(t.split("_dataIndex_")[1].split("_")[0],10),d=document.getElementById(t);this.dotNetRef.invokeMethodAsync("TriggerBubbleClick",a,l,h,t,i.x,i.y)}if(t.indexOf("_Legend_")>-1&&!sf.base.isNullOrUndefined(this.dotNetRef)&&(this.removeAllHighlight(),this.dotNetRef.invokeMethodAsync("TriggerLegendClick",parseInt(t.split("_Index_")[1].split("_")[0],10))),-1!==t.indexOf("_shapeIndex_")||-1!==t.indexOf("_MarkerIndex_")||-1!==t.indexOf("_BubbleIndex_")||"Click"!==this.options.tooltipDisplayMode||sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip","",i.x,i.y,0,0,"",0),"touch"===e.pointerType&&(t.indexOf("_shapeIndex_")>-1||t.indexOf("BubbleIndex")>-1||t.indexOf("_MarkerIndex_")>-1)){a=parseInt(t.split("_LayerIndex_")[1].split("_")[0],10),l=t.indexOf("_BubbleIndex_")>-1?parseInt(t.split("_BubbleIndex_")[1].split("_")[0],10):t.indexOf("_MarkerIndex_")>-1?parseInt(t.split("_MarkerIndex_")[1].split("_")[0],10):parseInt(t.split("_shapeIndex_")[1].split("_")[0],10),h=t.indexOf("_BubbleIndex_")>-1||t.indexOf("_MarkerIndex_")>-1?parseInt(t.split("_dataIndex_")[1].split("_")[0],10):0;var u=t.indexOf("_BubbleIndex_")>-1?"Bubble":t.indexOf("_MarkerIndex_")>-1?"Marker":"Shape";this.dotNetRef.invokeMethodAsync("TriggerShapeTooltip",t,i.x,i.y,a,"Shape"===u?l:h,u,l)}}},r.prototype.removeCluster=function(){var e=document.querySelectorAll('[class="clusterGroup"]');if(e.length>0)for(var t=0;t<e.length;t++)document.getElementById(e[t].id).remove();else if((e=document.querySelectorAll('[class="clusterGroup e-maps-cluster"]')).length>0)for(var i=0;i<e.length;i++)document.getElementById(e[i].id).remove();for(var s=document.querySelectorAll('[class="e-maps-marker-hidden"]'),n=0;n<s.length;n++){var o=document.getElementById(s[n].id);o.style.visibility="visible",o.classList.remove("e-maps-marker-hidden")}},r.prototype.createImageUrl=function(e,t){var i='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+e.outerHTML+"</svg>";return window.URL.createObjectURL(new Blob("SVG"===t?[i]:[(new XMLSerializer).serializeToString(e)],{type:"image/svg+xml"}))},r.prototype.imageExport=function(i,s,n){return e(this,void 0,void 0,(function(){var e;return t(this,(function(t){return e=this,[2,new Promise((function(t,o){var r=document.createElement("canvas"),a=e.element.getBoundingClientRect();r.width=a.width,r.height=a.height;var l=document.getElementById(e.element.id+"_svg"),h=e.createImageUrl(l,i),d=document.getElementById(e.element.id+"_animated_tiles").children.length,c=r.getContext("2d"),p=document.getElementById(e.element.id+"_Map_title"),u=document.getElementById(e.element.id+"_MapBorder");sf.base.isNullOrUndefined(u)||(c.fillStyle=document.getElementById(e.element.id+"_MapBorder").getAttribute("fill"),c.fillStyle="transparent"===c.fillStyle?"#ffffff":c.fillStyle,c.fillStyle=e.options.background?e.options.background:"#ffffff"),sf.base.isNullOrUndefined(p)||(c.font=p.getAttribute("font-size")+" Arial",c.fillStyle=p.getAttribute("fill"),c.fillText(p.textContent,parseFloat(p.getAttribute("x")),parseFloat(p.getAttribute("y")))),c.save();var f=document.getElementById(e.element.id+"_Tile_SVG_Parent");c.rect(parseFloat(f.style.left),parseFloat(f.style.top),parseFloat(f.style.width),parseFloat(f.style.height)),c.clip(),c.fillRect(0,0,a.width,a.height),e.exportedCount=0;for(var g=[],m=0;m<d;m++){var v=document.getElementById(e.element.id+"tile"+m),b=new Image;b.crossOrigin="Anonymous",g.push(e.renderImages(r,v,c,b,d,i,s,h,e,n)),b.src=v.children[0].getAttribute("src")}Promise.all(g).then((function(e){for(var i=0;i<e.length;i++)if(null!=e[i]){t(e[i]);break}}))}))]}))}))},r.prototype.renderImages=function(e,t,i,s,n,o,r,a,l,h){return new Promise((function(d,c){s.onload=function(){l.exportedCount++,i.setTransform(1,0,0,1,parseFloat(t.style.left)+10,parseFloat(t.style.top)+parseFloat(document.getElementById(l.element.id+"_tile_parent").style.top));if(i.drawImage(s,0,0,257,257),l.exportedCount===n){var c=document.getElementById(l.element.id+"_Tile_SVG_Parent");a=l.createImageUrl(c.children[0],o);var p=new Image;p.onload=function(){if(i.setTransform(1,0,0,1,parseFloat(c.style.left),parseFloat(c.style.top)),i.drawImage(p,0,0),h)l.triggerDownload(o,r,e.toDataURL("image/png").replace("image/png","image/octet-stream")),d(null);else{var t="JPEG"===o?e.toDataURL("image/jpeg"):"PNG"===o?e.toDataURL("image/png"):"";d(t)}},p.src=a}else d(null)}}))},r.prototype.triggerDownload=function(e,t,i){var s=document.createElement("a");s.download=t+"."+e.toLocaleLowerCase(),s.href=i,s.click()},r.prototype.getMousePosition=function(e,t){var i=this.element.getBoundingClientRect(),n=this.element.ownerDocument.defaultView.pageXOffset,o=this.element.ownerDocument.defaultView.pageYOffset,r=this.element.ownerDocument.documentElement.clientTop,a=this.element.ownerDocument.documentElement.clientLeft,l=i.left+n-a,h=i.top+o-r;return new s(e-l,t-h)},r.prototype.getBound=function(e){var t=document.getElementById(e);return{x:t.offsetLeft,y:t.offsetTop}},r.prototype.createToolbarStyle=function(e,t){var i=document.getElementById(this.element.id+"_Zooming_ToolBar_Zoom_Path");sf.base.isNullOrUndefined(i)||i.setAttribute("stroke",this.toolbarColor),this.enableSelectionZoom||(this.zoomClick=!1);var s=document.getElementById(this.element+"_zoomToolbar_style");s&&s.parentNode.removeChild(s);var n=".e-maps-toolbar:hover { opacity:1; } .e-maps-toolbar:hover > circle { stroke:"+e+"; } .e-maps-toolbar:hover > path { fill: "+e+" ;  stroke: "+e+"; }.e-maps-toolbar:hover { cursor: pointer; } .e-maps-cursor-disable:hover { cursor: not-allowed; } .e-maps-panning:hover { cursor: pointer; } .e-maps-popup-close { display: block; opacity: 0; }",o=document.createElement("style");o.id=this.element+"_zoomToolbar_style",o.appendChild(document.createTextNode(n)),t.appendChild(o)},r.prototype.render=function(){this.wireEvents()},r}();return{getMarker:function(e,t,i){var s=window.sfBlazor.getCompInstance(i);s&&s.element&&s.clusterExpand(e,t)},markerCluster:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.clusterMarkerProcess()},clusterSeperation:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.mergeSeparation()},itemHighlight:function(e,t,i,s,n,o){var r=window.sfBlazor.getCompInstance(o);r&&r.element&&r.itemHighlightHandle(e,t,i,s,n)},shapeHighlight:function(e,t,i,s){var n=window.sfBlazor.getCompInstance(s);n&&n.element&&n.shapeHighlightHandle(e,t,i)},panDirection:function(e,t,i,s,n,o){var r=window.sfBlazor.getCompInstance(o);if(r&&r.element){var a=document.getElementById(r.element.id+"_animated_tiles");r.isTileMap&&!sf.base.isNullOrUndefined(a)&&(r.currentTiles=a.cloneNode(!0)),r.panning(e,t,i,s,n,!1),sf.base.isNullOrUndefined(r.dotNetRef)||r.dotNetRef.invokeMethodAsync("UpdateTranslatePoint",r.isTileMap?r.translatePoint:r.shapeTranslatePoint,r.tileTranslatePoint,r.scaleFactor,!1)}},initialize:function(e,t,i){return new r(e.id,e,t,i).render(),this.getElementSize(e.id)},updateInstance:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&(i.dataSource=t.dataSource?JSON.parse(t.dataSource):null,i.options.layerHighlightSettings=JSON.parse(t.layerHighlightSettings),i.options.markerHighlightSettings=JSON.parse(t.markerHighlightSettings),i.options.bubbleHighlightSettings=JSON.parse(t.bubbleHighlightSettings),i.options.navigationHighlightSettings=JSON.parse(t.navigationHighlightSettings),i.options.selectionSettings=JSON.parse(t.selectionSettings))},getElementSize:function(e){var t,i,s,n,o=document.getElementById(e);if(null!==o){var r=o.getBoundingClientRect();t=r.width,i=r.height,s=r.x,n=r.y}return{width:t,height:i,isIE:sf.base.Browser.isIE,x:s,y:n,isDevice:sf.base.Browser.isDevice}},getElementBounds:function(e){var t=document.getElementById(e);if(t){var i=t.getBoundingClientRect();return{width:i.width,height:i.height,top:i.top,bottom:i.bottom,left:i.left,right:i.right}}return null},getBound:function(e){var t=document.getElementById(e);return{x:t.offsetLeft,y:t.offsetTop}},getBoundData:function(e){var t=document.getElementById(e);return{x:t.getBoundingClientRect().x,y:t.getBoundingClientRect().y}},getTileZoom:function(i,s,n,o,r,a,l){return e(this,void 0,void 0,(function(){var e,h,d,c,p,u,f,g,m,v,b;return t(this,(function(t){switch(t.label){case 0:e=document.getElementById(i+"_animated_tiles"),h=parseInt(e.className,10),e.children[l].setAttribute("style","top:"+n+"; height:"+r+";width:"+a+"; left:"+s+"; position:absolute;"),e.children[l].innerHTML="",(d=document.createElement("img")).src=o,e.children[l].appendChild(d),c=document.getElementById(i+"_LayerCollections"),p=0,t.label=1;case 1:if(!(p<c.children.length))return[3,8];u=0,t.label=2;case 2:if(!(u<c.children[p].childElementCount))return[3,7];if(!(c.children[p].children[u].id.indexOf("MarkerGroup")>-1))return[3,6];f=0,t.label=3;case 3:return f<c.children[p].children[u].childElementCount?(g=parseInt(c.children[p].children[u].children[f].id.split("_LayerIndex_")[1].split("_")[0],10),m=parseInt(c.children[p].children[u].children[f].id.split("_MarkerIndex_")[1].split("_")[0],10),v=parseInt(c.children[p].children[u].children[f].id.split("_dataIndex_")[1].split("_")[0],10),[4,this.dotNetRef.invokeMethodAsync("ZoomMarker",g,m,v,0,0,h)]):[3,6];case 4:b=t.sent(),c.children[p].children[u].children[f].setAttribute("transform","translate("+b[0]+","+b[1]+")"),t.label=5;case 5:return f++,[3,3];case 6:return u++,[3,2];case 7:return p++,[3,1];case 8:return[2,l]}}))}))},getLayer:function(e){var t=document.getElementById(e+"_LayerCollections").getBoundingClientRect();return{Bottom:t.bottom,Height:t.height,Left:t.left,Right:t.right,Top:t.top,Width:t.width,X:t.x,Y:t.y}},getElement:function(e){var t=document.getElementById(e).getBoundingClientRect();return{Bottom:t.bottom,Height:t.height,Left:t.left,Right:t.right,Top:t.top,Width:t.width,X:t.x,Y:t.y}},getSvg:function(e){var t=document.getElementById(e+"_svg").getBoundingClientRect();return{Bottom:t.bottom,Height:t.height,Left:t.left,Right:t.right,Top:t.top,Width:t.width,X:t.x,Y:t.y}},updateTileTranslatePoint:function(e,t,i,s,n,o,r,a,l,h){var d=window.sfBlazor.getCompInstance(h);d&&d.element&&(d.tileTranslatePoint={x:e.x,y:e.y},d.translatePoint={x:t.x,y:t.y},d.areaRect={x:i,y:s,width:n,height:o},d.marginLeft=r,d.marginTop=a,d.tileZoomLevel=d.options.factor=d.scaleFactor=l,(l===d.options.maxZoom||l>1||1===l)&&""===d.previousId&&(sf.base.Browser.isDevice&&d.setToolbarButtonColor(d.tileZoomLevel,h+"_Zooming_"),l===d.options.maxZoom&&document.getElementById(d.id+"_Zooming_ToolBar_Zoom_Rect")&&(document.getElementById(d.id+"_Zooming_ToolBar_Zoom_Path").setAttribute("fill",d.toolbarColor),document.getElementById(d.id+"_Zooming_ToolBar_Zoom_Path").setAttribute("stroke",d.toolbarColor),d.isPan=!1)),d.isTileMap&&d.previousId.indexOf("_Reset_")>-1&&(d.options.enablePanning||document.getElementById(d.id+"_Zooming_ToolBar_Pan_Rect")&&(document.getElementById(d.id+"_Zooming_ToolBar_Pan_Path").setAttribute("fill",d.toolbarColor),document.getElementById(d.id+"_Zooming_ToolBar_Pan_Path").setAttribute("stroke",d.toolbarColor)),d.enableSelectionZoom=!d.enableSelectionZoom&&d.enableSelectionZoom),d.isPan=!!(d.previousId.indexOf("_Reset_")>-1&&d.options.enablePanning)||d.isPan)},updateTranslatePoint:function(e,t,i,s,n,o,r,a,l){var h=window.sfBlazor.getCompInstance(l);h&&h.element&&(h.shapeTranslatePoint=e,h.areaRect={x:t,y:i,width:s,height:n},h.marginLeft=o,h.marginTop=r,h.options.factor=h.scaleFactor=a)},updateZoomSettings:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&(i.options.enableZoom=t.enable,i.options.zoomOnClick=t.zoomOnClick,i.options.doubleClickZoom=t.doubleClickZoom,i.options.enablePanning=t.enablePanning,i.options.enablePinchZooming=t.pinchZooming,i.options.enableSelectionZooming=t.enableSelectionZooming,i.options.enableMouseWheelZoom=t.mouseWheelZoom)},updateCollection:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&(i.options.layerHighlightSettings=JSON.parse(t.layerHighlightSettings),i.options.markerHighlightSettings=JSON.parse(t.markerHighlightSettings),i.options.navigationHighlightSettings=JSON.parse(t.navigationHighlightSettings),i.bubbleCollection=JSON.parse(t.bubble),i.labelCollection=JSON.parse(t.dataLabel),i.dataLabelTemplateCollection=JSON.parse(t.dataLabelTemplate),i.markerSettings=JSON.parse(t.markerSettings),i.navigation=JSON.parse(t.navigationLine),i.markerClusterCollection=JSON.parse(t.markerCluster),i.baseMapBounds={latitudeMax:t.latitudeMax,latitudeMin:t.latitudeMin,longitudeMax:t.longitudeMax,longitudeMin:t.longitudeMin,minBounds:t.minBounds,maxBounds:t.maxBounds,availableSize:t.availableSize},i.isTileMap=t.isTileMap,i.legendSettings=JSON.parse(t.legendSettings),i.legendDetails=null!=t.legendDetails?JSON.parse(t.legendDetails):null,i.urlTemplate=t.urlTemplate,i.key=t.key,i.dataSource=JSON.parse(t.markerDataSource),i.toolbarSelection=t.toolbarSelection,i.toolbarColor=t.toolbarColor,i.mapsBorderWidth=t.mapsBorder,i.toolbarButtonOpacity=t.toolbarButtonOpacity,i.toolbarShapeOpacity=t.toolbarShapeOpacity,i.removeAllHighlight())},updateLayerHighlight:function(e,t,i,s){var n=window.sfBlazor.getCompInstance(s);n&&n.element&&(i?(n.options.layerHighlightSettings[e].BorderColor=t.borderColor,n.options.layerHighlightSettings[e].BorderWidth=t.borderWidth,n.options.layerHighlightSettings[e].BorderOpacity=t.borderOpacity):(n.options.layerHighlightSettings[e].Fill=t.fill,n.options.layerHighlightSettings[e].Opacity=t.opacity,n.options.layerHighlightSettings[e].Enable=t.enable))},updateMarkerHighlight:function(e,t,i,s,n){var o=window.sfBlazor.getCompInstance(n);o&&o.element&&(s?(o.options.markerHighlightSettings[e][t].BorderColor=i.borderColor,o.options.markerHighlightSettings[e][t].BorderWidth=i.borderWidth,o.options.markerHighlightSettings[e][t].BorderOpacity=i.borderOpacity):(o.options.markerHighlightSettings[e][t].Fill=i.fill,o.options.markerHighlightSettings[e][t].Opacity=i.opacity,o.options.markerHighlightSettings[e][t].Enable=i.enable))},updateBubbleHighlight:function(e,t,i,s,n){var o=window.sfBlazor.getCompInstance(n);o&&o.element&&(s?(o.options.bubbleHighlightSettings[e][t].BorderColor=i.borderColor,o.options.bubbleHighlightSettings[e][t].BorderWidth=i.borderWidth,o.options.bubbleHighlightSettings[e][t].BorderOpacity=i.borderOpacity):(o.options.bubbleHighlightSettings[e][t].Fill=i.fill,o.options.bubbleHighlightSettings[e][t].Opacity=i.opacity,o.options.bubbleHighlightSettings[e][t].Enable=i.enable))},updateTooltipDisplayMode:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&(i.options.tooltipDisplayMode=t)},updateNavigationHighlight:function(e,t,i,s,n){var o=window.sfBlazor.getCompInstance(n);o&&o.element&&(s?(o.options.navigationHighlightSettings[e][t].BorderColor=i.borderColor,o.options.navigationHighlightSettings[e][t].BorderWidth=i.borderWidth,o.options.navigationHighlightSettings[e][t].BorderOpacity=i.borderOpacity):(o.options.navigationHighlightSettings[e][t].Fill=i.fill,o.options.navigationHighlightSettings[e][t].Opacity=i.opacity,o.options.navigationHighlightSettings[e][t].Enable=i.enable))},exportToImage:function(i,s,n,o){return e(this,void 0,void 0,(function(){var r,a,l=this;return t(this,(function(h){switch(h.label){case 0:return(a=window.sfBlazor.getCompInstance(o))&&a.element?[4,a.imageExport(i,s,n)]:[3,2];case 1:r=h.sent(),h.label=2;case 2:return r instanceof Promise?[4,r.then((function(i){return e(l,void 0,void 0,(function(){return t(this,(function(e){return[2,i]}))}))}))]:[3,4];case 3:return h.sent(),[3,5];case 4:return[2,r];case 5:return[2]}}))}))},getLegendRect:function(e,t){var i=document.getElementById(e).getBoundingClientRect(),s=e.split("_Legend_")[0],n=document.getElementById(s).getBoundingClientRect();return{x:i.left-n.left,y:i.top-n.top,width:i.width,height:i.height}},markerAnimation:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.markerAnimation(e,t)},layerAnimation:function(e,t,i,s,n,o){var r=window.sfBlazor.getCompInstance(e);if(r&&r.element)for(var a=document.getElementById(e+"_LayerIndex_0"),l=0;l<a.children.length;l++)null!==a.children[l].getAttribute("transform")&&this.zoomAnimation(a.children[l],0,o,s,n,t,i,r)},slope:function(e,t){return e.x===t.x?null:(t.y-e.y)/(t.x-e.x)},interception:function(e,t){return null===t?e.x:e.y-t*e.x},zoomAnimation:function(e,t,i,s,n,o,r,a){var l=0,h={x:s.x,y:s.y},d=n-r,c={x:0,y:0},p=1;if(n!==r){var u=this.slope(o,h),f=this.interception(o,u),g=h.x-o.x,m=h.y-o.y;e.style.removeProperty("visibility"),this.animate(e,i,(function(e){e.timeStamp>e.delay&&(l=(e.timeStamp-e.delay)/e.duration,p=r+l*d,c.x=o.x+l*g/(p/n),sf.base.isNullOrUndefined(u)?c.y=o.y+l*m:c.y=u*c.x+f,a.applyTransform(p,c))}),(function(t){a.applyTransform(n,h),this.markerCluster(a.id),sf.base.isNullOrUndefined(this.dotNetRef)||this.dotNetRef.invokeMethodAsync("TriggerAnimation",e)}))}else e.setAttribute("transform","scale( "+n+" ) translate( "+h.x+" "+h.y+" )")},bubbleAnimation:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.bubbleAnimation(e,t)},animate:function(e,t,i,s){var n,o=this,r=null;n=window.requestAnimationFrame((function a(l){r||(r=l);var h=l-r;h<t?(i.call(o,{element:e,delay:0,timeStamp:h,duration:t}),window.requestAnimationFrame(a)):(window.cancelAnimationFrame(n),s.call(o,{element:e}),e.setAttribute("style","visibility:visible"))}))},getToolbarAlign:function(e,t){var i=t.verticalAlignment,s=t.horizontalAlignment,n=document.getElementById(e+"_Zooming_KitCollection").getBoundingClientRect(),o=0,r=0;switch(i){case 0:r=t.y;break;case 1:r=t.height/2-n.height/2+t.mapsBorder;break;case 2:r=t.height-n.height+t.mapsBorder-2*t.buttonPadding}switch(s){case 0:o=t.x;break;case 1:o=t.width/2-n.width/2+t.mapsBorder;break;case 2:o=t.width-n.width-2*t.buttonPadding+t.mapsBorder}var a=document.getElementById(e+"_ToolBar");a.style.left=o+"px",a.style.top=r+"px",a.style.visibility="visible";var l=t.color,h=window.sfBlazor.getCompInstance(e);h&&h.element&&h.createToolbarStyle(l,a)},getTemplate:function(e,t,i,s,n,o,r,a){for(var l=e[0],h=Object.keys(l),d=t,c=0;c<h.length;c++)"latitude"!==h[c].toLowerCase()&&"longitude"!==h[c].toLowerCase()&&(d=d.replace(new RegExp("{{:"+h[c]+"}}","g"),l[h[c].toString()]));var p=document.createElementNS("http://www.w3.org/2000/svg","div");p.setAttribute("id",n),p.style.position="absolute",p.style.transform="translate(-50 %, -50 %)",p.style.left=s.toString(),p.style.top=i.toString(),p.innerHTML=d.toString();var u=document.getElementById(a+"_LayerIndex_0_Markers_Template_Group");u.appendChild(p);var f=document.getElementById(a+"_Secondary_Element");return f.appendChild(u),document.getElementById(a).appendChild(f),d},dispose:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.destroy()}}}()},"./modules/sf-maskedtextbox.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.MaskedTextBox=function(){"use strict";var e=function(){function e(e,t,i,s,n){this.ismultipledelete=!1,this.isClicked=!1,this.previousVal="",this.inputData=null,this.isFocusInput=!1,this.isKeyDown=!1,window.sfBlazor=window.sfBlazor,this.dataId=e,this.wrapperElement=t,this.isClicked=!1,this.sIndex=0,this.eIndex=0,this.element=i,this.options=n,window.sfBlazor.setCompInstance(this),this.dotNetRef=s,this.previousVal=this.options.maskedValue}return e.prototype.initialize=function(){sf.base.EventHandler.add(this.element,"focus",this.focusHandler,this),sf.base.EventHandler.add(this.element,"blur",this.focusOutHandler,this),sf.base.EventHandler.add(this.element,"paste",this.pasteHandler,this),sf.base.EventHandler.add(this.element,"cut",this.cutHandler,this),sf.base.EventHandler.add(this.element,"mousedown",this.mouseDownHandler,this),sf.base.EventHandler.add(this.element,"mouseup",this.mouseUpHandler,this),sf.base.EventHandler.add(this.element,"keydown",this.keyDownHandler,this),sf.base.EventHandler.add(this.element,"input",this.inputHandler,this),sf.base.EventHandler.add(this.element,"select",this.selectionHandler,this)},e.prototype.focusOutHandler=function(e){var t=this.wrapperElement.querySelector(".e-clear-icon");null!==t&&t.classList.add("e-clear-icon-hide")},e.prototype.mouseDownHandler=function(e){this.isClicked=!0},e.prototype.mouseUpHandler=function(e){this.isClicked=!1,sf.base.Browser.isDevice&&(this.ismultipledelete=!1,this.sIndex=this.eIndex=0)},e.prototype.selectionHandler=function(e){var t=this.element;t.selectionStart!==t.selectionEnd&&sf.base.Browser.isDevice&&(this.sIndex=t.selectionStart,this.eIndex=t.selectionEnd)},e.prototype.keyDownHandler=function(e){var t=this.element;this.previousVal=t.value,this.isKeyDown=!0,sf.base.Browser.isDevice||(t.selectionStart!==t.selectionEnd?(this.sIndex=t.selectionStart,this.eIndex=t.selectionEnd):(this.ismultipledelete=!1,this.sIndex=this.eIndex=0))},e.prototype.inputHandler=function(e){if(this.options.mask){var t=this.element,i=t.selectionStart,s=t.selectionEnd;if(e.data&&"insertText"!==e.inputType)t.value=this.previousVal,t.selectionStart=t.selectionEnd=i-1;else if((e.data||e.inputType)&&this.isKeyDown){var n=e.data?e.data:"deleteContentBackward"===e.inputType?"Backspace":"deleteContentForward"===e.inputType?"Delete":null;if(this.sIndex!==this.eIndex?(this.ismultipledelete=!0,i=this.sIndex,s=this.eIndex,this.sIndex=this.eIndex=0):s=i=e.data?i-1:"deleteContentBackward"===e.inputType?i+1:i,t.value=this.previousVal,t.selectionStart=t.selectionEnd=i,this.ismultipledelete){this.ismultipledelete=!1;var o=this.multipleDeletion(this.previousVal,i,s);t.value=o,this.previousVal=t.value,t.selectionStart=t.selectionEnd=i,null!==n&&"Backspace"!==n&&"Delete"!==n&&this.updateMask(n,i)}else this.updateMask(n,i);this.previousVal=t.value,this.updateServerValue()}else this.inputData=t.value,t.value=this.previousVal,t.selectionStart=t.selectionEnd=t.selectionStart,this.pasteHandler(e);this.isKeyDown=!1}},e.prototype.multipleDeletion=function(e,t,i){for(var s=e,n=t;n<i;n++)s=s.substring(0,n)+this.options.promptMask[n]+s.substring(n+1);return s},e.prototype.updateServerValue=function(){var e=this,t=this.element;setTimeout((function(){e.dotNetRef.invokeMethodAsync("UpdateInputValue",t.value,!1)}),20)},e.prototype.updateMask=function(e,t){var i=this.element;if(!this.ismultipledelete){var s=this.previousVal,n="";t>=0&&t<this.options.customRegExpCollec.length&&(n=1===this.options.customRegExpCollec[t].length?this.getRegex(this.options.customRegExpCollec[t]):this.options.customRegExpCollec[t]);var o=new RegExp(n);if("Backspace"===e||"Delete"===e)"Backspace"===e?(this.options.promptMask[t-1]===this.options.promptCharacter?i.value=s.substring(0,t-1)+this.options.promptCharacter+s.substring(t):i.value=s.substring(0,t-1)+this.options.promptMask[t-1]+s.substring(t),i.selectionStart=i.selectionEnd=t-1):(this.options.promptMask[t]===this.options.promptCharacter?i.value=s.substring(0,t)+this.options.promptCharacter+s.substring(t+1):i.value=s.substring(0,t)+this.options.promptMask[t]+s.substring(t+1),i.selectionStart=i.selectionEnd=t);else if(t<this.options.promptMask.length)if(this.options.promptMask[t]===this.options.promptCharacter){if(o.test(e)){var r=this.getLetterCase(e,t);i.value=s.substring(0,t)+r+s.substring(t+1),i.selectionStart=i.selectionEnd=t+1}}else i.selectionStart=i.selectionEnd=t+1,this.updateMask(e,i.selectionStart)}},e.prototype.getRegex=function(e){var t="";switch(e){case"0":t="\\d";break;case"9":t="[0-9 ]";break;case"L":t="[A-Za-z]";break;case"A":t="[A-Za-z0-9]";break;case"a":t="[A-Za-z0-9 ]";break;case"C":t="[^]+";break;case"#":t="[0-9 +-]";break;case"?":t="[A-Za-z ]";break;case"&":t="[^ ]+";break;default:t="("===e||"+"===e||")"===e?"\\"+e:e}return t},e.prototype.getLetterCase=function(e,t){for(var i=!1,s=!1,n=!1,o=!1,r=this.options.hiddenMask,a=[],l=[],h=0;h<r.length;h++)"<"!==r[h]&&!i||">"===r[h]||"|"===r[h]?">"!==r[h]&&!s||"<"===r[h]||"|"===r[h]?"|"!==r[h]&&!n||"<"===r[h]||">"===r[h]?o||(a[h]=!1,l[h]=!1):(n=o=!0,s=i=!1,a[h]=!1,l[h]=!1,"|"===r[h]&&(r=r.replace(r[h],""))):(s=o=!0,i=n=!1,a[h]=!1,l[h]=!0,">"===r[h]&&(r=r.replace(r[h],""))):(i=o=!0,s=n=!1,a[h]=!0,l[h]=!1,"<"===r[h]&&(r=r.replace(r[h],"")));return l[t]?e.toUpperCase():a[t]?e.toLowerCase():e},e.prototype.focusHandler=function(e){var t=this,i=this.element,s=0,n=this.stripValue(i.value),o=!1,r=!1;if(null!==this.options.mask&&(null!==n&&""!==n||"Always"===this.options.floatLabelType||null===this.options.placeHolder||""===this.options.placeHolder||(i.value=this.options.maskedValue),setTimeout((function(){if(i.selectionStart===t.options.mask.length||i.value[i.selectionStart]===t.options.promptCharacter)o=!0;else for(var e=i.selectionStart;e<t.options.mask.length;e++){if(i.value[e]===t.options.promptCharacter){o=!0;break}if(i.value[e]!==t.options.mask[e]){o=!1;break}}})),setTimeout((function(){var e=i.selectionStart-1;if(e===t.options.mask.length-1||i.value[e]===t.options.promptCharacter)r=!0;else for(var s=e;s>=0;s--){if(i.value[s]===t.options.promptCharacter){r=!0;break}if(i.value[s]!==t.options.mask[s]){r=!1;break}}})),this.isClicked||this.isFocusInput||"Always"!==this.options.floatLabelType&&(null===n||""===n)&&null!==this.options.placeHolder&&""!==this.options.placeHolder)){for(this.isFocusInput=!0,s=0;s<this.options.mask.length;s++)if(i.value[s]===this.options.promptCharacter){setTimeout((function(){(o||r)&&(i.selectionEnd=s,i.selectionStart=s)}),110);break}this.isClicked=!1}},e.prototype.stripValue=function(e){var t="";if(null!==this.options.mask&&null!=e&&""!==e)for(var i=0;i<this.options.mask.length;i++)this.options.mask[i]!==e[i]&&(t+=e[i]);return t},e.prototype.pasteHandler=function(e){var t=this;if(null!==this.options.mask&&!this.options.readonly&&this.options.enabled){var i=this.element,s=void 0;if(void 0===e.clipboardData||this.inputData?(s=this.inputData,i.selectionStart=i.selectionEnd=0,this.inputData=null):s=e.clipboardData.getData("text/plain"),null!==s){var n={Readonly:!1,Enabled:!0,Value:i.value,selectionEnd:i.selectionEnd,selectionStart:i.selectionStart,IsMultipleDelete:this.ismultipledelete,PasteValue:s};e.preventDefault(),this.dotNetRef.invokeMethodAsync("UpdatePasteValue",n).then((function(e){i.value=e.inputValue,i.selectionStart=i.selectionEnd=e.cursorPosition,t.previousVal=i.value}))}}},e.prototype.cutHandler=function(e){if(this.options.mask){var t=this.element,i=t.selectionStart,s=t.selectionEnd;if(i!==s&&null!==this.options.mask){this.ismultipledelete=!0;var n=t.value.substring(i,s);e.clipboardData.setData("text",n),window.clipboardData.setData("text",n),t.value=this.multipleDeletion(t.value,i,s),t.selectionStart=t.selectionEnd=i,this.previousVal=t.value,this.updateServerValue()}}},e.prototype.propertyChange=function(e){var t=this.options.mask!==e.mask||this.options.promptCharacter!==e.promptCharacter;this.options=e,this.previousVal=this.options.maskedValue,t&&e.maskValue&&(this.element.value=e.maskValue,this.element.setSelectionRange(e.selectionStart,e.selectionStart))},e}();return{initialize:function(t,i,s,n,o){s&&new e(t,i,s,n,o).initialize()},propertyChange:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.propertyChange(t)},focusIn:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||(t.isFocusInput=!0,t.element.focus())},focusOut:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.element.blur()}}}()},"./modules/sf-mention.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Mention=function(){"use strict";var e="HidePopupAsync",t="ShowPopupAsync",i="OnSearchAsync",s=function(){function s(e,t,i,s,n){this.activeIndex=null,window.sfBlazor=window.sfBlazor,this.dataId=e;var o=document.querySelector(t);this.inputElement=i?o.firstElementChild:this.checkAndUpdateInternalComponent(o),i&&(o.insertAdjacentElement("beforebegin",o.firstElementChild),sf.base.detach(o)),this.isContentEditable(this.inputElement)&&(this.inputElement.setAttribute("contenteditable","true"),sf.base.addClass([this.inputElement],["e-mention"])),this.inputElement.setAttribute("role","textbox"),this.options=n,window.sfBlazor.setCompInstance(this),this.dotNetRef=s}return s.prototype.initialize=function(e){this.keyConfigure={tab:"tab",enter:"13",escape:"27",end:"35",home:"36",down:"40",up:"38",pageUp:"33",pageDown:"34",open:"alt+40",close:"shift+tab",hide:"alt+38",space:"32"},sf.base.EventHandler.add(e,"keyup",this.onKeyUp,this),sf.base.Browser.isDevice||new sf.base.KeyboardEvents(e,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"})},s.prototype.checkAndUpdateInternalComponent=function(e){return e&&e.classList.contains("e-richtexteditor")?e.querySelector(".e-content"):e},s.prototype.keyActionHandler=function(e){var t={Action:e.action,Key:e.key,Events:e,Type:e.type};this.isDisposed||this.dotNetRef.invokeMethodAsync("KeyActionHandlerAsync",t),("tab"!==e.action&&"up"!==e.action&&"down"!==e.action&&"close"!==e.action&&"space"!==e.action&&"enter"!==e.action&&"open"!==e.action&&("SfMention"===this.options.moduleName||"home"!==e.action&&"end"!==e.action)||"enter"===e.action&&!sf.base.isNullOrUndefined(this.isPopupOpen())||("up"===e.action||"down"===e.action)&&this.isPopupOpen())&&e.preventDefault()},s.prototype.onPropertyChanged=function(e){for(var t=0,i=Object.keys(e);t<i.length;t++){var s=i[t];switch(s){case"MinLength":this.options.minLength=e[s];break;case"SuffixText":this.options.suffixText=e[s];break;case"AllowSpaces":this.options.allowSpaces=e[s];break;case"MentionChar":this.options.mentionChar=e[s];break;case"ShowMentionChar":this.options.showMentionChar=e[s]}}},s.prototype.getItems=function(){return this.list?this.list.querySelectorAll(".e-list-item"):[]},s.prototype.onKeyUp=function(s){var n,o={Key:s.key,Code:s.code,Location:s.location,CtrlKey:s.ctrlKey,ShiftKey:s.shiftKey,AltKey:s.altKey,MetaKey:s.metaKey,Repeat:s.repeat,Type:s.type};this.isContentEditable(this.inputElement)&&(this.range=this.getCurrentRange(),n=this.range.startContainer.textContent.split(""));var r=this.getTextRange(),a=this.getLastLetter(r),l=new RegExp("\\".concat(this.options.mentionChar),"g"),h=new RegExp("[a-zA-Z]","g");"Shift"!==s.key&&37!==s.keyCode&&39!==s.keyCode&&(!r||!a||"Enter"===s.code||27===s.keyCode||a.match(l)&&a.match(l).length>1||this.isContentEditable(this.inputElement)&&this.range.startContainer&&this.range.startContainer.previousElementSibling&&this.range.startContainer.textContent.split("").length>0&&(1===n.length||-1===n[n.length-2].indexOf("")||1===this.range.startContainer.nodeType)?this.options.allowSpaces&&this.isPopupOpen()&&r&&""!==r.trim()&&h.test(r)&&-1!==r.indexOf(this.options.mentionChar)&&!this.isMatchedText()&&r.length>1&&" "!==r.replace(/\u00A0/g," ").charAt(r.length-2)&&this.list&&this.list.querySelectorAll("ul").length>0?(this.queryString=r.substring(r.lastIndexOf(this.options.mentionChar)+1).replace(" "," "),this.dotNetRef.invokeMethodAsync(i,o,this.queryString)):!this.isPopupOpen()||this.options.allowSpaces&&a||(this.dotNetRef.invokeMethodAsync(e),this.lineBreak=!0):(this.queryString=a.replace(this.options.mentionChar,""),this.options.mentionChar.charCodeAt(0)===a.charCodeAt(0)&&""!==this.queryString&&!this.lineBreak||""===this.queryString&&this.isPopupOpen()&&38!==s.keyCode&&40!==s.keyCode?this.dotNetRef.invokeMethodAsync(i,o,this.queryString):0!==a.indexOf(this.options.mentionChar)||this.isPopupOpen()||8===s.keyCode?this.options.allowSpaces&&this.isPopupOpen()&&""!==this.queryString&&r&&""!==r.trim()&&r.replace(" "," ").lastIndexOf(" ")<r.length-1&&38!==s.keyCode&&40!==s.keyCode&&8!==s.keyCode&&(this.queryString=r.substring(r.lastIndexOf(this.options.mentionChar)+1).replace(" "," "),this.dotNetRef.invokeMethodAsync(i,o,this.queryString)):(this.dotNetRef.invokeMethodAsync(i,o,this.queryString),this.isPopupOpen()||38===s.keyCode||40===s.keyCode||(this.dotNetRef.invokeMethodAsync(t),this.lineBreak=!1))))},s.prototype.isMatchedText=function(){for(var e=!1,t=0;t<(this.liCollections&&this.liCollections.length);t++)this.getTextRange()&&this.getTextRange().substring(this.getTextRange().lastIndexOf(this.options.mentionChar)+1).replace(" "," ").trim()===this.liCollections[t].getAttribute("data-value").toLowerCase()&&(e=!0);return e},s.prototype.getCurrentRange=function(){return this.range=this.inputElement.ownerDocument.getSelection().getRangeAt(0),this.range},s.prototype.getTextRange=function(){var e;if(this.isContentEditable(this.inputElement)){var t=this.range.startContainer;if(!sf.base.isNullOrUndefined(t)){var i=t.textContent,s=this.range.startOffset;i&&s>=0&&(e=i.substring(0,s))}}else{var n=this.inputElement;if(!sf.base.isNullOrUndefined(n)){var o=n.selectionStart;n.value&&o>=0&&(e=n.value.substring(0,o))}}return e},s.prototype.getLastLetter=function(e){if(sf.base.isNullOrUndefined(e))return"";var t=e.replace(/\u00A0/g," ").split(/\s+/);return t[t.length-1].trim()},s.prototype.renderPopup=function(e,t,i){if(!this.isPopupOpen()){var s;this.options=t,this.list=e.querySelector(".e-content"),this.list.querySelector(".e-active")&&sf.base.attributes(this.inputElement,{"aria-activedescendant":this.list.querySelector(".e-active").id}),sf.base.attributes(this.inputElement,{"aria-owns":this.dataId+"_options"}),this.liCollections=this.getItems();var n=sf.base.formatUnit(this.options.popupHeight);if(this.wireListEvents(),e){var o=document.getElementById(e.id);o&&sf.base.remove(o)}document.body.appendChild(e),e.style.visibility="hidden",this.initializePopup(e,0,0),this.checkCollision(e),e.style.visibility="visible",sf.base.addClass([e],"e-popup-close");this.popupObj.show(new sf.base.Animation({name:"FadeIn",duration:100}),this.inputElement),s=this.getCoordinates(this.inputElement,this.getTriggerCharPosition()),this.isCollided?(e.style.left=sf.base.formatUnit(s.left),this.isCollided=!1):e.style.cssText="top: ".concat(s.top.toString(),"px;\n left: ").concat(s.left.toString(),"px;\nposition: absolute;\n display: block;"),e.style.width="100%"===this.options.popupWidth||sf.base.isNullOrUndefined(this.options.popupWidth)?"auto":sf.base.formatUnit(this.options.popupWidth),"auto"!==this.options.popupHeight?(this.list.style.maxHeight=(parseInt(n,10)-2).toString()+"px",e.style.maxHeight=sf.base.formatUnit(this.options.popupHeight)):e.style.height="auto",e.style.zIndex=1e3===this.options.zIndex?sf.popups.getZindexPartial(e).toString():this.options.zIndex.toString(),this.isPopupOpen()||this.inputElement.removeAttribute("aria-activedescendant")}},s.prototype.search=function(i,s,n){var o=this,r=this.getTextRange(),a=this.getLastLetter(r);this.options.ignoreCase&&(i===a||i===a.toLowerCase())||!this.options.ignoreCase&&i===a?this.dotNetRef.invokeMethodAsync(t).then((function(){sf.base.isNullOrUndefined(o.popupObj)||(o.popupObj.element.style.left=sf.base.formatUnit(s),o.popupObj.element.style.top=sf.base.formatUnit(n))})):this.isPopupOpen()&&this.dotNetRef.invokeMethodAsync(e)},s.prototype.getCoordinates=function(e,t){var i,s,n,o,r,a,l;if(this.isContentEditable(this.inputElement)){var h=this.getTriggerCharPosition();o=this.range,(n=document.createRange()).setStart(o.startContainer,h),n.setEnd(o.startContainer,h),n.collapse(!1),l=n.getBoundingClientRect()}else i=sf.base.createElement("div",{className:"e-form-mirror-div"}),document.body.appendChild(i),a=getComputedStyle(e),i.style.position="absolute",i.style.visibility="hidden",["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing"].forEach((function(e){i.style[e]=a[e]})),i.textContent=e.value.substring(0,t),"INPUT"===this.inputElement.nodeName&&(i.textContent=i.textContent.replace(/\s/g," ")),(s=sf.base.createElement("span")).textContent=e.value.substring(t)||".",i.appendChild(s),l=e.getBoundingClientRect();var d=document.documentElement,c=(window.pageXOffset||d.scrollLeft)-(d.clientLeft||0),p=(window.pageYOffset||d.scrollTop)-(d.clientTop||0);return this.isContentEditable(this.inputElement)?r={top:l.top+p+parseInt(getComputedStyle(this.inputElement).fontSize),left:l.left+c}:(r={top:l.top+p+s.offsetTop+parseInt(a.borderTopWidth,10)+parseInt(a.fontSize,10)+3-e.scrollTop,left:l.left+c+s.offsetLeft+parseInt(a.borderLeftWidth,10)},document.body.removeChild(i)),r},s.prototype.getTriggerCharPosition=function(){var e,t=this.getTextRange();if(null!=t){e=0;var i=t.lastIndexOf(this.options.mentionChar);i>=e&&(e=i)}return e},s.prototype.isContentEditable=function(e){return e&&"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName},s.prototype.wireListEvents=function(){sf.base.EventHandler.add(this.list,"mouseover",this.onMouseOver,this),sf.base.EventHandler.add(this.list,"mouseout",this.onMouseLeave,this)},s.prototype.unWireListEvents=function(){sf.base.EventHandler.remove(this.list,"mouseover",this.onMouseOver),sf.base.EventHandler.remove(this.list,"mouseout",this.onMouseLeave)},s.prototype.onMouseOver=function(e){var t=sf.base.closest(e.target,".e-list-item");this.setHover(t)},s.prototype.onMouseLeave=function(e){this.removeHover()},s.prototype.checkCollision=function(e){(!sf.base.Browser.isDevice||sf.base.Browser.isDevice&&"SfMention"!==this.options.moduleName)&&(sf.popups.isCollide(e).length>0&&(e.style.marginTop=-parseInt(getComputedStyle(e).marginTop,10)+"px"))},s.prototype.destroy=function(){sf.base.EventHandler.remove(document,"mousedown",this.onDocumentClick)},s.prototype.initializePopup=function(e,t,i){var s=this;this.popupContainer=e,this.popupObj=new sf.popups.Popup(this.popupContainer,{width:this.setWidth(),targetType:"relative",relateTo:this.inputElement,collision:{X:"flip",Y:"flip"},offsetY:t,enableRtl:this.options.enableRtl,offsetX:i,position:{X:"top",Y:"left"},actionOnScroll:"hide",zIndex:this.options.zIndex,close:function(){s.unWireListEvents(),s.popupObj&&s.popupObj.destroy(),!s.isDisposed&&document.body.contains(s.inputElement)&&s.dotNetRef.invokeMethodAsync("ClosePopupAsync").catch((function(){})),s.popupObj=null},open:function(){sf.base.EventHandler.add(document,"mousedown",s.onDocumentClick,s)}})},s.prototype.setValue=function(e,t){var i,s,n,o,r,a=this.inputElement.ownerDocument.getSelection(),l=this.getTriggerCharPosition();if(i="string"==typeof this.options.suffixText?this.options.suffixText:"",null!==e.text&&(s=this.mentionVal(e.text)),this.isContentEditable(this.inputElement)){n=this.getTriggerCharPosition()+this.options.mentionChar.length,this.range&&this.range.startContainer.textContent.trim()!==this.options.mentionChar&&(n=this.range.endOffset),r=this.range,(o=document.createRange()).setStart(r.startContainer,l),o.setEnd(r.startContainer,n),o.deleteContents();var h=sf.base.createElement("div");h.innerHTML=s;for(var d=document.createDocumentFragment(),c=void 0,p=void 0;c=h.firstChild;)p=d.appendChild(c);o.insertNode(d),p&&((o=o.cloneRange()).setStartAfter(p),o.collapse(!0),a.removeAllRanges(),a.addRange(o)),this.isPopupOpen()&&this.inputElement.focus();var u=new CustomEvent("UpdateEditorValue",{detail:{click:t}});return this.inputElement.dispatchEvent(u),!0}var f=this.inputElement,g=this.getTextRange().substring(l+this.options.mentionChar.length,this.getTextRange().length);return s+=i,n=l+this.options.mentionChar.length,n+=g.length,f.value=f.value.substring(0,l)+s+f.value.substring(n,f.value.length),f.selectionStart=l+s.length,f.selectionEnd=l+s.length,this.isPopupOpen()&&this.inputElement.focus(),!0},s.prototype.mentionVal=function(e){var t=this.options.showMentionChar?this.options.mentionChar:"";return this.options.hasDisplayTemplate&&(e=this.removeComments(document.querySelector("#"+this.dataId+"_displayTemplate"))),this.isContentEditable(this.inputElement)?'<span contenteditable="false" class="e-mention-chip">'+t+e+"</span>".concat("string"==typeof this.options.suffixText?this.options.suffixText:" "):t+e},s.prototype.removeComments=function(e){var t=e.innerHTML;return(t=t.replace(/<!--[\s\S]*?-->/g,"")).trim()},s.prototype.setWidth=function(){var e=sf.base.formatUnit(this.options.popupWidth);e.indexOf("%")>-1&&(e=(this.inputElement.offsetWidth*parseFloat(e)/100).toString()+"px");return e},s.prototype.onDocumentClick=function(t){var i=t.target;!sf.base.isNullOrUndefined(this.popupObj)&&sf.base.closest(i,"#"+this.popupObj.element.id)||!this.isPopupOpen()||this.dotNetRef.invokeMethodAsync(e)},s.prototype.closePopup=function(e,t){if(this.options=t,this.isPopupOpen()&&!e.cancel&&this.popupObj){this.popupObj.hide(new sf.base.Animation({name:"FadeOut",duration:20,delay:0})),this.inputElement.removeAttribute("aria-owns"),this.inputElement.removeAttribute("aria-activedescendant")}},s.prototype.setScrollPosition=function(e){if(sf.base.isNullOrUndefined(e))this.scrollBottom(!0);else switch(e.action){case"pageDown":case"down":case"end":this.scrollBottom();break;default:this.scrollTop()}},s.prototype.scrollBottom=function(e){if(this.list&&this.list.querySelector(".e-active")&&!e){var t=this.list.querySelector(".e-active"),i=this.list.offsetHeight,s=t.offsetTop+t.offsetHeight-this.list.scrollTop,n=this.list.scrollTop+s-i;n=e?n+2*parseInt(getComputedStyle(this.list).paddingTop,10):n+parseInt(getComputedStyle(this.list).paddingTop,10);var o=t.offsetTop+t.offsetHeight-this.list.scrollTop;0===this.activeIndex?this.list.scrollTop=0:(s>i||!(o>0&&this.list.offsetHeight>o))&&(this.list.scrollTop=n)}},s.prototype.scrollTop=function(){if(this.list&&this.list.querySelector(".e-active")){var e=this.list.querySelector(".e-active"),t=e.offsetTop-this.list.scrollTop,i=e.offsetTop+e.offsetHeight-this.list.scrollTop;0===this.activeIndex?this.list.scrollTop=0:t<0?this.list.scrollTop=this.list.scrollTop+t:i>0&&this.list.offsetHeight>i||(this.list.scrollTop=e.offsetTop)}},s.prototype.setHover=function(e){e&&!e.classList.contains("e-hover")&&(this.removeHover(),sf.base.addClass([e],"e-hover"))},s.prototype.removeHover=function(){if(this.list){var e=this.list.querySelectorAll(".e-hover");e&&e.length&&sf.base.removeClass(e,"e-hover")}},s.prototype.isPopupOpen=function(){return this.popupObj&&document.body.contains(this.popupObj.element)},s}();return{initialize:function(e,t,i,n,o){if(document.querySelector(t)){var r=i?document.querySelector(t).firstElementChild:document.querySelector(t);new s(e,t,i,n,o).initialize(r)}},renderPopup:function(e,t,i){var s=window.sfBlazor.getCompInstance(e),n=document.querySelector("#"+e+"_popup");!sf.base.isNullOrUndefined(s)&&n&&s.renderPopup(n,t,i)},search:function(e,t,i,s){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.search(t,i,s)},closePopup:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s)||s.closePopup(t,i)},setValue:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s)||s.setValue(t,i)},updateScrollPosition:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.setScrollPosition(t)},onPropertyChanged:function(e){var t=window.sfBlazor.getCompInstance(e.dataId);sf.base.isNullOrUndefined(t)||t.onPropertyChanged(e)},destroy:function(e,t,i){var s=window.sfBlazor.getCompInstance(e),n=document.querySelector(i.target),o=document.querySelector("#"+e+"_popup");sf.base.EventHandler.remove(n,"keyup",this.onKeyUp),sf.base.isNullOrUndefined(s)||(o&&o instanceof HTMLElement&&(s.isDisposed=!0,s.closePopup(t,i)),s.destroy())}}}()},"./modules/sf-menu.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Menu=function(){"use strict";function e(e,i,s,n){if(40===s||38===s){var o=void 0,r=void 0,a=void 0;i.classList.contains("e-menu-parent")?((a=(r=i).querySelector(".e-menu-item.e-focused"))?(o=Array.prototype.indexOf.call(r.children,a),o=40===s?o===r.childElementCount-1?0:o+1:0===o?r.childElementCount-1:o-1):o=0,o=t(r,o,40===s)):i.classList.contains("e-menu-item")&&(a=(r=i.parentElement).querySelector(".e-menu-item.e-focused"),o=Array.prototype.indexOf.call(r.children,a||i),o=t(r,o=40===s?o===r.childElementCount-1?0:o+1:0===o?r.childElementCount-1:o-1,40===s)),r&&-1!==o&&r.children[o].focus()}else if(((e.classList.contains("e-rtl")?39===s:37===s)||27===s||13===s&&sf.base.closest(i,".e-menu-container"))&&(i.classList.contains("e-ul")||i.classList.contains("e-menu-item")&&!i.parentElement.classList.contains("e-contextmenu"))){var l=void 0;n&&(l=sf.base.select(n));r=i.classList.contains("e-ul")?i:i.parentElement;var h=sf.base.closest(r,".e-menu-vscroll"),d=void 0,c=h?h.previousElementSibling:r.previousElementSibling;if(!l||c&&13!==s){var p=sf.base.closest(r,".e-hamburger");d=p?sf.base.select(".e-menu-item.e-selected",p):sf.base.select(".e-menu-item.e-selected",c)}else d=sf.base.select(".e-menu-item.e-selected",l),(h=sf.base.select(".e-menu-vscroll",e))&&l.blazor__instance.destroyScroll("none");d&&d.focus()}}function t(e,i,s,n){void 0===n&&(n=0);var o=e.children[i];return n===e.childElementCount?-1:((o.classList.contains("e-separator")||o.classList.contains("e-disabled")||o.classList.contains("e-menu-hide"))&&(i=s?i===e.childElementCount-1?0:i+1:0===i?e.childElementCount-1:i-1,n++),((o=e.children[i]).classList.contains("e-separator")||o.classList.contains("e-disabled")||o.classList.contains("e-menu-hide"))&&(i=t(e,i,s)),i)}var i,s="e-menu-item",n="e-vertical",o=function(){function t(e,t){this.dataId=e.dataId,this.element=e.element,this.dotnetRef=t,this.enableScroller=e.enableScrolling,window.sfBlazor.setCompInstance(this),this.addEventListener(),this.updateScroll(e.enableScrolling,e.isRtl,!1)}return t.prototype.calculatePosition=function(e,t){var n,o;i=e;var r=e.element.getElementsByClassName(s)[e.itemIndex].getBoundingClientRect();this.popupInstance=window.sfBlazor.getCompInstance(e.popupDataId);var a=this.popupInstance.hideMenu(!0);if(a){if(this.popup=e.popup,e.enableScrolling){a=this.positionHelper(e,a);var l=this.popup.querySelector(".e-vscroll-bar");l&&sf.base.EventHandler.add(l,"scroll",this.scrollHandler,this)}var h=a.classList.contains("e-menu-parent")?a:sf.base.select(".e-menu-parent",a);this.popupInstance.setBlankIconStyle(h,e.isRtl);var d,c=h.getBoundingClientRect(),p=this.popupInstance.getMenuWidth(h,c.width,e.isRtl);if(e.isVertical){if(o=r.top,e.isRtl){if((n=r.left)-p<document.documentElement.clientLeft)(d=r.right+p)<document.documentElement.clientWidth&&(n=d)}else if((n=r.right)+p>document.documentElement.clientWidth)(d=r.left-p)>document.documentElement.clientLeft&&(n=d)}else if(o=r.bottom,e.isRtl){if(n=r.right,r.right-p<document.documentElement.clientLeft)(d=r.left+p)<document.documentElement.clientWidth&&(n=d)}else if((n=r.left)+p>document.documentElement.clientWidth)(d=r.right-p)>document.documentElement.clientLeft&&(n=d);var u=e.scrollHeight||c.height;if(o+u>document.documentElement.clientHeight){var f=document.documentElement.clientHeight-u-20;f>document.documentElement.clientTop&&(o=f)}this.popupInstance.updateProperty(e.showItemOnClick,e.element),this.popup.style.zIndex=sf.popups.getZindexPartial(this.popup).toString(),a.style.width=Math.ceil(p)+"px",this.popup.style.left=Math.ceil(n)+"px",this.popup.style.top=Math.ceil(o)+"px",h.style.visibility="",t&&h.focus()}},t.prototype.subMenuPosition=function(e,t){var i=window.sfBlazor.getCompInstance(e.popupDataId),s=i.hideMenu();e.enableScrolling&&s&&(s=this.positionHelper(e,s)),i.subMenuPosition(s,e.isRtl,e.showItemOnClick,!1,e.scrollHeight,!1,t)},t.prototype.positionHelper=function(e,t){return this.destroyScroll(null,t),e.scrollHeight?sf.navigations.addScrolling(sf.base.createElement,e.popup,t,"vscroll",e.isRtl,e.scrollHeight):t},t.prototype.clickHandler=function(e){var t=e.target;if(!sf.base.isNullOrUndefined(this.popup)&&sf.base.closest(t,"#"+this.popup.id)){if((n=sf.base.closest(t,"."+s))&&!n.classList.contains("e-menu-caret-icon")){sf.base.closest(t,"."+s+".e-selected")||this.destroyScroll("none");var i=sf.base.select(".e-selected",this.element);!i||sf.base.closest(document.activeElement,"#"+this.popup.id)&&"LI"!==document.activeElement.tagName||i.focus()}}else if(sf.base.closest(t,"#"+this.element.id+".e-hamburger")&&!t.classList.contains("e-menu-parent")&&!t.classList.contains("e-menu-container")){var n;(n=t.classList.contains(s)?t:sf.base.closest(t,"."+s+".e-focused"))&&!n.classList.contains("e-menu-caret-icon")&&this.focusMenu(!0)}},t.prototype.resizeMenu=function(){if(this.enableScroller){var e=this.element.parentElement.querySelectorAll(".e-menu-container")[0],t=e.getElementsByClassName("e-menu-parent")[0],i=sf.base.select(".e-menu-hscroll",e),s=t&&t.offsetWidth,o=window.innerWidth-t.getBoundingClientRect().left;if(s>o){if(e.style.width=Math.ceil(o)+"px",!i){var r=sf.base.select(".e-menu",e);r&&sf.navigations.addScrolling(sf.base.createElement,e,r,"hscroll",!1)}}else if(i){var a=this.element.classList.contains(n)?sf.base.getInstance(i,sf.navigations.VScroll):sf.base.getInstance(i,sf.navigations.HScroll);sf.navigations.destroyScroll(a,i),e.style.width=""}}},t.prototype.scrollHandler=function(){var e=this.popup.querySelector(".e-menu-parent");null!=e&&e.classList.contains("e-transparent")&&e.classList.remove("e-transparent")},t.prototype.keyDownHandler=function(t){(t.preventDefault(),this.element.classList.contains("e-hamburger"))?e(this.element,t.target,t.keyCode):sf.base.select(".e-menu",this.element).classList.contains(n)?38!==t.keyCode&&40!==t.keyCode||e(this.element,t.target,t.keyCode):37!==t.keyCode&&39!==t.keyCode||e(this.element,t.target,37===t.keyCode?38:40)},t.prototype.focusMenu=function(e){if(sf.base.select(".e-menu-vscroll",this.popup)){this.destroyScroll("");var t=this.popupInstance.getLastMenu();t&&t.focus()}else{var i=sf.base.selectAll(".e-menu-parent",this.element);if(i.length)if(e)i[0].focus();else{var n=sf.base.select("."+s+".e-focused",i[i.length-1]);(n||i[i.length-1]).focus()}}},t.prototype.destroyScroll=function(e,t,i){var s,n=sf.base.selectAll(".e-menu-vscroll",this.popup),o=[].slice.call(sf.base.selectAll(".e-menu-parent",this.popup)),r=-1;!sf.base.isNullOrUndefined(e)&&t&&(r=o.indexOf(t)),n.forEach((function(n){null,s=sf.base.select(".e-ul",n),i||s&&!sf.base.isNullOrUndefined(e)?t?o.indexOf(s)>r&&(n.style.display=e):n.style.display=e:sf.navigations.destroyScroll(sf.base.getInstance(n,sf.navigations.VScroll),n,t)}))},t.prototype.mouseDownHandler=function(e){var t=e.target,i=!document.body.contains(this.element);(sf.base.isNullOrUndefined(this.element)||i)&&this.removeEventListener(!1);var n=sf.base.closest(t,".e-scroll-nav");if(sf.base.isNullOrUndefined(this.popup)||!sf.base.closest(t,"#"+this.popup.id)||n){var o=sf.base.selectAll(".e-ul",this.element).length;if(i||!sf.base.select(".e-focused",this.element)&&!sf.base.select(".e-selected",this.element)||sf.base.closest(e.target,"#"+this.element.id)||n&&!(o>1)||this.dotnetRef.invokeMethodAsync("DocumentMouseDownAsync",!0,!1,!sf.base.isNullOrUndefined(n),!1,!1),!(sf.base.isNullOrUndefined(this.popup)||sf.base.isNullOrUndefined(this.popupInstance)||sf.base.closest(e.target,"."+s+".e-selected")&&this.popupInstance.subMenuOpen||n))if(this.popupInstance.subMenuOpen)this.destroyScroll("none");else{var r=sf.base.closest(e.target,".e-ul");sf.base.select(".e-menu-vscroll",this.popup)&&this.destroyScroll("none",r)}}},t.prototype.mouseOverHandler=function(e){var t=document.body.contains(this.element);!sf.base.isNullOrUndefined(this.element)&&t||this.removeEventListener(!1);var n=sf.base.closest(e.target,"."+s);this.popup&&this.popupInstance.subMenuOpen&&sf.base.closest(e.target,"#"+this.element.id)&&n&&(n.querySelector(".e-caret")&&parseInt(this.popup.style.top)===Math.ceil(e.target.getBoundingClientRect().top)||(this.destroyScroll("none",sf.base.closest(e.target,".e-ul"),!0),this.enableScroller&&i&&this.calculatePosition(i))),t&&sf.base.select(".e-focused",this.element)&&!sf.base.closest(e.target,"#"+this.element.id)&&this.dotnetRef.invokeMethodAsync("DocumentMouseDownAsync",!1,!1,!1,!0,!0)},t.prototype.updateScroll=function(e,t,i){if(e){sf.base.EventHandler.add(window,"resize",this.resizeMenu,this);var s=sf.base.select(".e-menu",this.element);s&&sf.base.isNullOrUndefined(this.element.querySelector(".e-menu-hscroll"))&&sf.navigations.addScrolling(sf.base.createElement,this.element,s,s.classList.contains(n)?"vscroll":"hscroll",t)}else if(i){var o=sf.base.select(".e-menu-"+(this.element.classList.contains(n)?"vscroll":"hscroll"),this.element);if(o){sf.base.EventHandler.remove(window,"resize",this.resizeMenu);var r=this.element.classList.contains(n)?sf.base.getInstance(o,sf.navigations.VScroll):sf.base.getInstance(o,sf.navigations.HScroll);sf.navigations.destroyScroll(r,o)}}},t.prototype.orientationScroll=function(e,t){var i=sf.base.select(".e-menu-"+(this.element.classList.contains(n)?"vscroll":"hscroll"),this.element);if(i){sf.base.EventHandler.remove(window,"resize",this.resizeMenu);var s=this.element.classList.contains(n)?sf.base.getInstance(i,sf.navigations.VScroll):sf.base.getInstance(i,sf.navigations.HScroll);sf.navigations.destroyScroll(s,i)}else if(e&&!i){sf.base.EventHandler.add(window,"resize",this.resizeMenu,this);var o=sf.base.select(".e-menu",this.element);o&&sf.base.isNullOrUndefined(this.element.querySelector(".e-menu-hscroll"))&&sf.navigations.addScrolling(sf.base.createElement,this.element,o,o.classList.contains(n)?"vscroll":"hscroll",t)}},t.prototype.addDocEvent=function(e,t,i,s){e.__eventList={};var n=e.__eventList.events=[],o=i;s&&(o=o.bind(s));for(var r=t.split(" "),a=0;a<r.length;a++)n.push({name:r[a],listener:i,debounce:o,id:s.element.id}),sf.base.Browser.isIE?e.addEventListener(r[a],o):e.addEventListener(r[a],o,{passive:!1});return o},t.prototype.removeDocEvent=function(e,t,i,s){var n,o,r=-1;"__eventList"in e&&(n=e.__eventList.events);for(var a=t.split(" "),l=0;l<a.length;l++){for(var h=n.length-1;h>=0;h--)n[h].name===a[l]&&n[h].listener===i&&n[h].id===s&&(r=h,o=n[h].debounce);-1!==r&&n.splice(r,1),o&&e.removeEventListener(a[l],o)}},t.prototype.addEventListener=function(){sf.base.EventHandler.add(this.element,"keydown",this.keyDownHandler,this),this.addDocEvent(document,"mousedown touchstart",this.mouseDownHandler,this),this.addDocEvent(document,"mouseover",this.mouseOverHandler,this),this.addDocEvent(document,"click",this.clickHandler,this)},t.prototype.removeEventListener=function(e){e&&sf.base.EventHandler.remove(this.element,"keydown",this.keyDownHandler),this.removeDocEvent(document,"mousedown touchstart",this.mouseDownHandler,this.element.id),this.removeDocEvent(document,"mouseover",this.mouseOverHandler,this.element.id),this.removeDocEvent(document,"click",this.clickHandler,this.element.id)},t}();return{initialize:function(e,t){sf.base.isNullOrUndefined(e.element)||new o(e,t)},calculatePosition:function(e,t){var i=window.sfBlazor.getCompInstance(e.dataId);sf.base.isNullOrUndefined(i)||i.calculatePosition(e,t)},subMenuPosition:function(e,t){var i=window.sfBlazor.getCompInstance(e.dataId);sf.base.isNullOrUndefined(i)||i.subMenuPosition(e,t)},focusMenu:function(e){var t=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(t)&&"INPUT"!==document.activeElement.tagName&&document.activeElement.className.indexOf("e-input")<0&&t.focusMenu(!1)},updateScroll:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s)||s.updateScroll(t,i,!0)},orientationScroll:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s)||s.orientationScroll(t,i)},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.removeEventListener(!0)}}}()},"./modules/sf-multiselect.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.MultiSelect=function(){"use strict";var e="e-list-group-item",t=function(){function t(e,t,i,s,n,o){window.sfBlazor=window.sfBlazor,this.dataId=e,this.containerElement=t,this.childContainerElement=i,this.element=s,this.options=o,window.sfBlazor.setCompInstance(this),this.dotNetRef=n,this.isDisposed=!1}return t.prototype.initialize=function(){sf.base.EventHandler.add(window,"resize",this.windowResize,this),sf.base.EventHandler.add(this.element,"blur",this.blurHandler,this),sf.base.EventHandler.add(this.element,"input",this.inputHandler,this),sf.base.EventHandler.add(this.element,"touchstart",this.touchHandler,this)},t.prototype.blurHandler=function(){this.isDisposed||this.dotNetRef.invokeMethodAsync("InvokeBlur")},t.prototype.touchHandler=function(){!!navigator.platform&&/iPad|iPhone|iPod|MacIntel/.test(navigator.platform)&&this.element.focus()},t.prototype.inputHandler=function(e){var t=null!=this.element&&this.element.placeholder.length,i=null!=e?e.target.value.length:0;this.element.size=Math.max(t,i)>0?Math.max(t,i):1},t.prototype.getPopupHeight=function(e,t,i){var s=Math.round(i.getBoundingClientRect().height);return(parseInt(e,10)-(s+t)).toString()+"px"},t.prototype.renderPopup=function(e,t,i,s,n,o){this.options=n,this.popupHolder=t,this.list=t.querySelector(".e-content")||sf.base.select(".e-content"),this.liCollections=this.getItems();var r,a=sf.base.formatUnit(this.options.popupHeight);if(document.body.appendChild(e),e.style.visibility="hidden",this.options.allowFiltering&&"CheckBox"===this.options.mode?(this.filterInput=e.querySelector("input.e-input"),r=this.filterInput.parentElement,sf.base.EventHandler.add(this.filterInput,"keypress",this.filterKeydown,this)):this.filterInput=this.element,"auto"!==this.options.popupHeight){var l=0;sf.base.isNullOrUndefined(r)||(l=r.parentElement.getBoundingClientRect().height,a=(parseInt(a,10)-l).toString()+"px");var h=0,d=e.querySelector(".e-selectall-parent");if(d&&(h=d.getBoundingClientRect().height,a=(parseInt(a,10)-h).toString()+"px"),e.querySelector(".e-ddl-header")){var c=e.querySelector(".e-ddl-header");a=this.getPopupHeight(a,l,c)}if(e.querySelector(".e-ddl-footer")){var p=e.querySelector(".e-ddl-footer");a=this.getPopupHeight(a,l,p)}this.list.style.maxHeight=(parseInt(a,10)-2).toString()+"px",e.style.maxHeight=sf.base.formatUnit(this.options.popupHeight)}else e.style.height="auto";if(this.popupCreation(e),sf.base.Browser.isDevice&&"CheckBox"===this.options.mode&&this.options.allowFiltering&&(this.popupObj.element.classList.add("e-ddl-device"),this.popupObj.element.classList.add("e-ddl-device-filter"),this.popupObj.position={X:0,Y:0},this.popupObj.dataBind(),sf.base.attributes(this.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),sf.base.addClass([document.body,this.popupObj.element],"e-popup-full-page"),this.setSearchBoxPosition()),e.style.visibility="visible",sf.base.addClass([e],"e-popup-close"),sf.base.attributes(this.element,{"aria-expanded":"true"}),null!==i&&null!==i.popup&&s){for(var u=0,f=Object.keys(i.popup);u<f.length;u++){switch(f[u]){case"collision":!i.popup.collision||this.popupObj.collision.X===i.popup.collision.X.toLowerCase()&&this.popupObj.collision.Y===i.popup.collision.Y.toLowerCase()||(this.popupObj.collision={X:i.popup.collision.X.toLowerCase(),Y:i.popup.collision.Y.toLowerCase()});break;case"position":!this.popupObj.position||this.popupObj.position.X===i.popup.position.X&&this.popupObj.position.Y===i.popup.position.Y||(this.popupObj.position={X:i.popup.position.X,Y:i.popup.position.Y});break;case"relateTo":this.popupObj.relateTo!==i.popup.relateTo&&(this.popupObj.relateTo=i.popup.relateTo);break;case"targetType":this.popupObj.targetType!==i.popup.targetType.toLowerCase()&&(this.popupObj.targetType=i.popup.targetType);break;case"offsetX":this.popupObj.offsetX!==i.popup.offsetX&&(this.popupObj.offsetX=i.popup.offsetX);break;case"offsetY":this.popupObj.offsetY!==i.popup.offsetY&&(this.popupObj.offsetY=i.popup.offsetY)}}this.popupObj.dataBind(),this.popupObj.refreshPosition(this.popupObj.relateTo,!0)}this.options.enableVirtualization&&sf.base.EventHandler.add(this.list,"scroll",this.virtualScroll,this);this.popupObj.show(new sf.base.Animation({name:"FadeIn",duration:100}),1e3===this.options.zIndex?this.element:null)},t.prototype.setSearchBoxPosition=function(){var e=this.filterInput.parentElement.getBoundingClientRect().height;this.popupObj.element.style.maxHeight="100%",this.popupObj.element.style.width="100%",this.list.style.maxHeight=window.innerHeight-e+"px",this.list.style.height=window.innerHeight-e+"px"},t.prototype.filterKeydown=function(e){""===this.filterInput.value&&32===e.keyCode&&this.list.querySelector(".e-item-focus")&&e.preventDefault()},t.prototype.setWidth=function(){var e=sf.base.formatUnit(this.options.popupWidth);e.indexOf("%")>-1&&(e=(this.containerElement.offsetWidth*parseFloat(e)/100).toString()+"px");return e},t.prototype.popupCreation=function(t){var i=this;this.popupContainer=t,this.popupObj=new sf.popups.Popup(this.popupContainer,{width:this.setWidth(),targetType:"relative",relateTo:this.containerElement,collision:{X:"flip",Y:"flip"},offsetY:1,enableRtl:this.options.enableRtl,position:{X:"left",Y:"bottom"},zIndex:this.options.zIndex,close:function(){sf.base.EventHandler.remove(i.list,"scroll",i.setFloatingHeader),sf.base.removeClass([i.containerElement],"e-icon-anim"),i.fixedHeaderElement=null,i.popupHolder.appendChild(i.popupContainer),sf.base.EventHandler.remove(document,"mousedown",i.onDocumentClick),sf.base.Browser.isDevice&&i.isFilterLayout()&&(sf.base.removeClass([document.body,i.popupObj.element],"e-popup-full-page"),sf.base.EventHandler.remove(i.list,"scroll",i.listScroll)),i.options.enableVirtualization&&sf.base.EventHandler.remove(i.list,"scroll",i.virtualScroll),i.popupObj&&i.popupObj.destroy(),sf.base.isNullOrUndefined(i.isDisposed)||i.isDisposed||i.dotNetRef.invokeMethodAsync("ClosePopup"),i.popupObj=null},open:function(){sf.base.EventHandler.add(document,"mousedown",i.onDocumentClick,i),i.options.allowFiltering&&i.filterInput&&i.filterInput.focus(),i.list.querySelector("li")&&i.list.querySelector("li").classList.contains(e)&&!t.classList.contains("e-multiselect-group")&&sf.base.EventHandler.add(i.list,"scroll",i.setFloatingHeader,i),i.setScrollPosition()},targetExitViewport:function(){sf.base.Browser.isDevice||i.isDisposed||i.dotNetRef.invokeMethodAsync("Hide")}})},t.prototype.virtualScroll=function(){if(this.popupObj&&this.popupObj.element){var e=parseInt(getComputedStyle(this.popupObj.element).borderWidth,10);e=0==e?1:e;var t=this.popupObj.element.classList.contains("e-popup-open");this.list.scrollTop+this.list.offsetHeight+e>=this.list.scrollHeight&&t&&!this.isDisposed&&this.dotNetRef.invokeMethodAsync("VirtualScrollHandler")}},t.prototype.onDocumentClick=function(e){var t=e.target;!sf.base.isNullOrUndefined(this.popupObj)&&sf.base.closest(t,"[id='"+this.popupObj.element.id+"']")||this.containerElement.contains(e.target)?t===this.element||this.options.allowFiltering&&"CheckBox"===this.options.mode&&t===this.filterInput||!this.options.allowFiltering&&sf.base.Browser.isDevice&&t===this.containerElement.querySelector(".e-ddl-icon")||e.preventDefault():(!this.isDisposed&&this.containerElement.classList.contains("e-input-focus")||this.isPopupOpen())&&this.dotNetRef.invokeMethodAsync("Hide")},t.prototype.listScroll=function(){this.filterInput.blur()},t.prototype.setFloatingHeader=function(t){sf.base.isNullOrUndefined(this.fixedHeaderElement)&&(this.fixedHeaderElement=sf.base.createElement("div",{className:"e-fixed-head"}),this.list.querySelector("li").classList.contains(e)||(this.fixedHeaderElement.style.display="none"),sf.base.prepend([this.fixedHeaderElement],this.list),this.setFixedHeader()),this.scrollStop(t)},t.prototype.isFilterLayout=function(){return"CheckBox"===this.options.mode&&this.options.allowFiltering},t.prototype.setFixedHeader=function(){this.list.parentElement.style.display="block";var t=0;this.list&&this.list.parentElement&&(t=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-width"),10));var i=this.liCollections[0].offsetWidth-t;this.fixedHeaderElement.style.width=i.toString()+"px",sf.base.setStyleAttribute(this.fixedHeaderElement,{zIndex:10});var s=this.list.querySelector("."+e);this.fixedHeaderElement.innerHTML=s.innerHTML},t.prototype.scrollStop=function(t){for(var i=t.target,s=parseInt(getComputedStyle(this.list.getElementsByClassName("e-list-item")[0],null).getPropertyValue("height"),10),n=Math.round(i.scrollTop/s),o=this.list.querySelectorAll("li"),r=n;r>-1;r--){if(!sf.base.isNullOrUndefined(o[r])&&o[r].classList.contains(e)){var a=o[r];this.fixedHeaderElement.innerHTML=a.innerHTML,this.fixedHeaderElement.style.top=t.target.scrollTop+"px",this.fixedHeaderElement.style.display="block";break}this.fixedHeaderElement.style.display="none",this.fixedHeaderElement.style.top="none"}},t.prototype.closePopup=function(e,t){if(this.options=t,this.isPopupOpen()&&!e.cancel&&this.popupObj){this.popupObj.hide(new sf.base.Animation({name:"FadeOut",duration:100,delay:0}))}},t.prototype.setScrollPosition=function(e){if(sf.base.isNullOrUndefined(e)||""===e)this.scrollBottom(!0);else switch(e){case"PageDown":case"ArrowDown":case"End":this.scrollBottom();break;default:this.scrollTop()}},t.prototype.scrollBottom=function(t){if(this.list&&(this.list.querySelector(".e-item-focus")||this.list.querySelector(".e-active"))){var i=(this.list.querySelector(".e-item-focus")||this.list.querySelector(".e-active")).nextElementSibling,s=this.list.offsetHeight,n=this.list.querySelector("li").classList.contains(e),o=i.offsetTop+i.offsetHeight-this.list.scrollTop,r=this.list.scrollTop+o-s;r=t?r+2*parseInt(getComputedStyle(this.list).paddingTop,10):r+parseInt(getComputedStyle(this.list).paddingTop,10);var a=i.offsetTop+i.offsetHeight-this.list.scrollTop;a=n&&!sf.base.isNullOrUndefined(this.fixedHeaderElement)?a-this.fixedHeaderElement.offsetHeight:a,(o>s||!(a>0&&this.list.offsetHeight>a))&&(this.list.scrollTop=r)}},t.prototype.scrollTop=function(){if(this.list&&(this.list.querySelector(".e-item-focus")||this.list.querySelector(".e-active"))){var t=this.list.querySelector(".e-item-focus")||this.list.querySelector(".e-active"),i=t.offsetTop-this.list.scrollTop,s=this.list.querySelector("li").classList.contains(e);i=s&&!sf.base.isNullOrUndefined(this.fixedHeaderElement)?i-this.fixedHeaderElement.offsetHeight:i;var n=t.offsetTop+t.offsetHeight-this.list.scrollTop;i<0?this.list.scrollTop=this.list.scrollTop+i:n>0&&this.list.offsetHeight>n||(this.list.scrollTop=t.offsetTop-(s&&!sf.base.isNullOrUndefined(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))}},t.prototype.windowResize=function(){"Box"!==this.options.mode&&this.viewContainer&&this.updateDelimViews(this.viewContainer,this.options)},t.prototype.updateDelimViews=function(e,t){this.options=t,this.viewContainer=e;var i=this.options.delimiterValue;if(this.viewContainer&&this.viewContainer.previousElementSibling&&!sf.base.isNullOrUndefined(i)&&i.length>0&&this.viewContainer.previousElementSibling.classList.add("e-delim-hide"),!sf.base.isNullOrUndefined(i)&&i.length>0?this.viewContainer.classList.remove("e-delim-hide"):this.viewContainer.innerHTML="",this.dropIconEle=this.containerElement.querySelector(".e-input-group-icon e-ddl-icon"),this.clearIconEle=this.containerElement.querySelector(".e-clear-icon"),this.viewContainer.classList.remove("e-delim-total"),i&&i.length>0){var s="",n=void 0,o=void 0,r=1,a=void 0,l=void 0,h=0,d=0,c=void 0;this.viewContainer.innerHTML="";var p=sf.base.createElement("span",{className:"e-remain"});p.innerHTML=this.options.overFlowContent,this.viewContainer.appendChild(p);var u=p.offsetWidth;if(sf.base.remove(p),this.dropIconEle&&(h=this.dropIconEle.offsetWidth+parseInt(window.getComputedStyle(this.dropIconEle).marginRight,10)),this.clearIconEle&&(d=this.clearIconEle.offsetWidth+parseInt(window.getComputedStyle(this.clearIconEle).marginRight,10)),sf.base.isNullOrUndefined(i))this.viewContainer.innerHTML="",this.viewContainer.style.display="none";else{for(var f=0;!sf.base.isNullOrUndefined(i[f]);f++){if(s+=0===f?"":this.options.delimiterCharacter+" ",s+=n=i[f],n=this.viewContainer.innerHTML,this.viewContainer.innerHTML=s,(a=this.viewContainer.offsetWidth+parseInt(window.getComputedStyle(this.viewContainer).paddingRight,10))+h+d>(c=this.childContainerElement.offsetWidth-parseInt(window.getComputedStyle(this.childContainerElement).paddingLeft,10)-parseInt(window.getComputedStyle(this.childContainerElement).paddingRight,10))){for(sf.base.isNullOrUndefined(o)||""===o||(n=o,f=r+1),this.viewContainer.innerHTML=n,l=i.length-f,a=this.viewContainer.offsetWidth;a+u+h>c&&0!==a&&""!==this.viewContainer.innerHTML;){var g=this.viewContainer.innerHTML.split(this.options.delimiterCharacter),m=g.length;g.pop();var v=g.length;this.viewContainer.innerHTML=g.join(this.options.delimiterCharacter),v!==m&&0!==v&&(l=l-v+m),""===this.viewContainer.innerHTML&&l++,a=this.viewContainer.offsetWidth}break}a+u+h+d<=c?(o=s,r=f):0===f&&(o="",r=-1)}if(l>0){var b=c-h-d;this.updateRemainElement(p,this.viewContainer,l,b)}}}},t.prototype.updateRemainWidth=function(e,t){e.classList.contains("e-delim-total")&&t<e.offsetWidth+parseInt(window.getComputedStyle(e).paddingLeft,10)+parseInt(window.getComputedStyle(e).paddingLeft,10)&&(e.style.width=t+"px")},t.prototype.updateRemainElement=function(e,t,i,s){var n=this;t.firstChild&&3===t.firstChild.nodeType&&""===t.firstChild.nodeValue&&t.removeChild(t.firstChild),e.innerHTML="",this.isDisposed||this.dotNetRef.invokeMethodAsync("RemainCount",i).then((function(i){var o=n.options.overFlowContent.replace("${count}",i),r=n.options.totalCountContent.replace("${count}",i);e.innerHTML=t.firstChild&&3===t.firstChild.nodeType?o:r,t.firstChild&&3===t.firstChild.nodeType?t.classList.remove("e-delim-total"):(t.classList.add("e-delim-total"),n.updateRemainWidth(t,s));var a=n.viewContainer.querySelector(".e-remain");a&&sf.base.remove(a),n.viewContainer.appendChild(e),n.updateRemainWidth(n.viewContainer,s)}))},t.prototype.isPopupOpen=function(){return this.popupObj&&document.body.contains(this.popupObj.element)},t.prototype.getItems=function(){return this.list?this.list.querySelectorAll(".e-list-item"):[]},t.prototype.refreshPopup=function(){this.isPopupOpen()&&(this.list.classList.contains("e-nodata")?this.fixedHeaderElement.style.display="none":this.list&&this.fixedHeaderElement&&(this.fixedHeaderElement.innerHTML=this.list.querySelector("."+e).innerHTML),this.popupObj.refreshPosition(this.containerElement))},t}();return{initialize:function(e,i,s,n,o,r){n&&new t(e,i,s,n,o,r).initialize()},renderPopup:function(e,t,i,s,n,o,r){var a=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(a)&&t&&i&&a.renderPopup(t,i,s,n,o,r)},closePopup:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s)||s.closePopup(t,i)},refreshPopup:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.refreshPopup()},updateScrollPosition:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.setScrollPosition(t)},getPageCount:function(e){var t=e&&e.querySelector(".e-content");if(t){var i=t.classList.contains("e-nodata")?null:getComputedStyle(t.querySelectorAll(".e-list-item:not(.e-hide-listitem)")[0],null).getPropertyValue("height");return Math.round(t.getBoundingClientRect().height/parseInt(i,10))}return 0},updateDelimViews:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s)||s.updateDelimViews(t,i)},setInputValue:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.element.value=t)},destroy:function(e,t,i,s,n){var o=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(o)&&t&&t instanceof HTMLElement&&i&&(o.isDisposed=!0,o.closePopup(s,n))},focusIn:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.element.focus()},focusOut:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.element.blur()}}}()},"./modules/sf-numerictextbox.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.NumericTextBox=function(){"use strict";var e=new RegExp("^(-)?(\\d*)$"),t=0,i=function(){function i(e,t,i,s,n){window.sfBlazor=window.sfBlazor,this.keyCharCodeHelper=function(e){return this.element.value.substring(0,this.element.selectionStart)+String.fromCharCode(e.which)+this.element.value.substring(this.element.selectionEnd)},this.keyHelper=function(e){return this.element.value.substring(0,this.element.selectionStart)+e.key+this.element.value.substring(this.element.selectionEnd)},this.dataId=e,this.wrapperElement=t,this.element=i,this.options=n,window.sfBlazor.setCompInstance(this),this.dotNetRef=s}return i.prototype.initialize=function(){this.spinButtonEvents(),sf.base.EventHandler.add(this.element,"focus",this.focusHandler,this),sf.base.EventHandler.add(this.element,"blur",this.focusOutHandler,this),sf.base.EventHandler.add(this.element,"keypress",this.keyPressHandler,this),sf.base.EventHandler.add(this.element,"keydown",this.keyDownHandler,this),sf.base.EventHandler.add(this.element,"paste",this.pasteHandler,this),sf.base.Browser.isDevice&&sf.base.EventHandler.add(document,"scroll",this.scrollHandler)},i.prototype.clearInvalid=function(e){this.element.value=e},i.prototype.keyPressHandler=function(e){if(!this.options.enabled||this.options.readonly)return!0;var t=e.keyCode;if(0===e.which||e.metaKey||e.ctrlKey||8===t||13===t)return!0;var i=this.options.decimalSeparator,s=String.fromCharCode(e.which),n="NumpadDecimal"===e.code&&this.keyCharCodeHelper(e)!==i;n&&(s=i);var o=this.element.value;if(o=o.substring(0,this.element.selectionStart)+s+o.substring(this.element.selectionEnd),this.numericRegex().test(o)){if(n){var r=this.element.selectionStart+1;this.element.value=o,this.element.setSelectionRange(r,r),e.preventDefault(),e.stopPropagation()}return!0}return e.preventDefault(),e.stopPropagation(),!1},i.prototype.pasteHandler=function(e){if(this.options.enabled&&!this.options.readonly){var t=e.clipboardData.getData("text/plain");this.numericRegex().test(t.trim())?this.dotNetRef.invokeMethodAsync("InvokePasteHandler",t):e.preventDefault()}},i.prototype.preventHandler=function(){var e=this,t=!!navigator.platform&&/iPad|iPhone|iPod|MacIntel/.test(navigator.platform);setTimeout((function(){if(e.element.selectionStart>0){var i=e.element.selectionStart,s=e.element.selectionStart-1,n=e.element.value.split(""),o=e.options.decimalSeparator.charCodeAt(0);" "===e.element.value[s]&&e.element.selectionStart>0&&!t?(sf.base.isNullOrUndefined(e.prevVal)?e.element.value=e.element.value.trim():0!==s?e.element.value=e.prevVal:0===s&&(e.element.value=e.element.value.trim()),e.element.setSelectionRange(s,s)):isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&45!==e.element.value[e.element.selectionStart-1].charCodeAt(0)?(n.indexOf(e.element.value[e.element.selectionStart-1])!==n.lastIndexOf(e.element.value[e.element.selectionStart-1])&&e.element.value[e.element.selectionStart-1].charCodeAt(0)===o||e.element.value[e.element.selectionStart-1].charCodeAt(0)!==o)&&(e.element.value=e.element.value.substring(0,s)+e.element.value.substring(i,e.element.value.length),e.element.setSelectionRange(s,s),isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&e.element.selectionStart>0&&e.element.value.length&&e.preventHandler()):isNaN(parseFloat(e.element.value[e.element.selectionStart-2]))&&e.element.selectionStart>1&&45!==e.element.value[e.element.selectionStart-2].charCodeAt(0)&&(n.indexOf(e.element.value[e.element.selectionStart-2])!==n.lastIndexOf(e.element.value[e.element.selectionStart-2])&&e.element.value[e.element.selectionStart-2].charCodeAt(0)===o||e.element.value[e.element.selectionStart-2].charCodeAt(0)!==o)&&(e.element.setSelectionRange(s,s),e.nextEle=e.element.value[e.element.selectionStart],e.cursorPosChanged=!0,e.preventHandler()),!0===e.cursorPosChanged&&e.element.value[e.element.selectionStart]===e.nextEle&&isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&(e.element.setSelectionRange(e.element.selectionStart+1,e.element.selectionStart+1),e.cursorPosChanged=!1,e.nextEle=null),""===e.element.value.trim()&&e.element.setSelectionRange(0,0),e.element.selectionStart>0&&45===e.element.value[e.element.selectionStart-1].charCodeAt(0)&&e.element.selectionStart>1&&(sf.base.isNullOrUndefined(e.prevVal)?e.element.value=e.element.value:e.element.value=e.prevVal,e.element.setSelectionRange(e.element.selectionStart,e.element.selectionStart)),e.prevVal=e.element.value}}))},i.prototype.keyDownHandler=function(e){var t=!!navigator.platform&&/iPad|iPhone|iPod|MacIntel/.test(navigator.platform);this.options.readonly||(sf.base.Browser.isDevice&&38!==e.keyCode&&40!==e.keyCode&&8!==e.keyCode&&(this.numericRegex().test(this.keyCharCodeHelper(e))||this.numericRegex().test(this.keyHelper(e))||(t&&sf.base.Browser.isDevice?this.preventHandler():e.preventDefault())),!t&&sf.base.Browser.isDevice&&this.preventHandler(),38===e.keyCode?(e.preventDefault(),this.dotNetRef.invokeMethodAsync("ServerAction","increment",e,this.element.value)):40===e.keyCode&&(e.preventDefault(),this.dotNetRef.invokeMethodAsync("ServerAction","decrement",e,this.element.value)))},i.prototype.numericRegex=function(){var t=this.options.decimalSeparator,i="*";return"."===t&&(t="\\"+t),0===this.options.decimals&&this.options.validateDecimalOnType?e:(this.options.decimals&&this.options.validateDecimalOnType&&(i="{0,"+this.options.decimals+"}"),new RegExp("^(-)?(((\\d+("+t+"\\d"+i+")?)|("+t+"\\d"+i+")))?$"))},i.prototype.mouseWheel=function(e){var t;e.preventDefault();var i=e;i.wheelDelta?t=i.wheelDelta/120:i.detail&&(t=-i.detail/3),t>0?this.dotNetRef.invokeMethodAsync("ServerAction","increment",e,this.element.value):t<0&&this.dotNetRef.invokeMethodAsync("ServerAction","decrement",e,this.element.value)},i.prototype.focusHandler=function(e){this.isFocused=!0,this.options.enabled&&!this.options.readonly&&(sf.base.Browser.isDevice||sf.base.EventHandler.add(this.element,"mousewheel DOMMouseScroll",this.mouseWheel,this))},i.prototype.focusOutHandler=function(e){this.isFocused=!1,e.preventDefault(),sf.base.Browser.isDevice||sf.base.EventHandler.remove(this.element,"mousewheel DOMMouseScroll",this.mouseWheel)},i.prototype.mouseDownOnSpinner=function(e){var t=this;if(this.options.enabled&&!this.options.readonly){this.isFocused&&(this.isPrevFocused=!0,e.cancelable&&e.preventDefault());var i=e.currentTarget,s=i.classList.contains("e-spin-up")?"increment":"decrement";sf.base.EventHandler.add(i,"mouseleave",this.mouseUpClick,this),this.timeOut=setInterval((function(){t.isCalled=!0,t.dotNetRef.invokeMethodAsync("ServerAction",s,e,t.element.value)}),150),sf.base.EventHandler.add(document,"mouseup",this.mouseUpClick,this)}},i.prototype.mouseUpOnSpinner=function(e){if(this.options.enabled&&!this.options.readonly){if(this.isPrevFocused&&(this.element.focus(),!sf.base.Browser.isDevice&&e.cancelable&&(this.isPrevFocused=!1)),sf.base.Browser.isDevice||e.preventDefault(),!this.getElementData(e))return;var t=e.currentTarget,i=t.classList.contains("e-spin-up")?"increment":"decrement";sf.base.EventHandler.remove(t,"mouseleave",this.mouseUpClick),this.isCalled||this.dotNetRef.invokeMethodAsync("ServerAction",i,e,this.element.value),this.isCalled=!1,sf.base.EventHandler.remove(document,"mouseup",this.mouseUpClick)}},i.prototype.touchMoveOnSpinner=function(e){!this.options.enabled||this.options.readonly?document.elementFromPoint(e.clientX,e.clientY).classList.contains("e-input-group-icon")||clearInterval(this.timeOut):clearInterval(this.timeOut)},i.prototype.scrollHandler=function(e){clearInterval(this.timeOut)},i.prototype.getElementData=function(e){return!(e.which&&3===e.which||e.button&&2===e.button||!this.options.enabled||this.options.readonly)&&(clearInterval(this.timeOut),!0)},i.prototype.mouseUpClick=function(e){e.stopPropagation(),clearInterval(this.timeOut),this.isCalled=!1,sf.base.EventHandler.remove(this.spinUp,"mouseleave",this.mouseUpClick),sf.base.EventHandler.remove(this.spinDown,"mouseleave",this.mouseUpClick)},i.prototype.selectRange=function(e){var i=this;if(clearTimeout(t),sf.base.Browser.isDevice||"11.0"!==sf.base.Browser.info.version){var s=sf.base.Browser.isDevice&&sf.base.Browser.isIos?600:90;t=setTimeout((function(){"number"!==i.element.type&&i.element.setSelectionRange(0,e.length)}),s)}else this.element.setSelectionRange(0,e.length)},i.prototype.isDevice=function(){return sf.base.Browser.isDevice},i.prototype.spinButtonEvents=function(){this.spinDown=this.wrapperElement?this.wrapperElement.querySelector(".e-spin-down"):null,this.spinUp=this.wrapperElement?this.wrapperElement.querySelector(".e-spin-up"):null,this.spinDown&&this.spinUp&&(this.unBindSpinButton(),this.bindSpinButton())},i.prototype.bindSpinButton=function(){sf.base.EventHandler.add(this.spinUp,sf.base.Browser.touchStartEvent,this.mouseDownOnSpinner,this),sf.base.EventHandler.add(this.spinDown,sf.base.Browser.touchStartEvent,this.mouseDownOnSpinner,this),sf.base.EventHandler.add(this.spinUp,sf.base.Browser.touchEndEvent,this.mouseUpOnSpinner,this),sf.base.EventHandler.add(this.spinDown,sf.base.Browser.touchEndEvent,this.mouseUpOnSpinner,this),sf.base.EventHandler.add(this.spinUp,sf.base.Browser.touchMoveEvent,this.touchMoveOnSpinner,this),sf.base.EventHandler.add(this.spinDown,sf.base.Browser.touchMoveEvent,this.touchMoveOnSpinner,this)},i.prototype.unBindSpinButton=function(){sf.base.EventHandler.remove(this.spinUp,sf.base.Browser.touchStartEvent,this.mouseDownOnSpinner),sf.base.EventHandler.remove(this.spinDown,sf.base.Browser.touchStartEvent,this.mouseDownOnSpinner),sf.base.EventHandler.remove(this.spinUp,sf.base.Browser.touchEndEvent,this.mouseUpOnSpinner),sf.base.EventHandler.remove(this.spinDown,sf.base.Browser.touchEndEvent,this.mouseUpOnSpinner),sf.base.EventHandler.remove(this.spinUp,sf.base.Browser.touchMoveEvent,this.touchMoveOnSpinner),sf.base.EventHandler.remove(this.spinDown,sf.base.Browser.touchMoveEvent,this.touchMoveOnSpinner)},i.prototype.destroy=function(){sf.base.EventHandler.remove(this.element,"focus",this.focusHandler),sf.base.EventHandler.remove(this.element,"blur",this.focusOutHandler),sf.base.EventHandler.remove(this.element,"keypress",this.keyPressHandler),sf.base.EventHandler.remove(this.element,"keydown",this.keyDownHandler),sf.base.EventHandler.remove(this.element,"paste",this.pasteHandler),sf.base.Browser.isDevice&&sf.base.EventHandler.remove(document,"scroll",this.scrollHandler)},i}();return{initialize:function(e,t,s,n,o){s&&e&&new i(e,t,s,n,o).initialize()},selectRange:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.selectRange(t)},propertyChanges:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.options=t)},focusIn:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.element.focus()},focusOut:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.element.blur()},spinButtonEvents:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.spinButtonEvents()},clearInvalid:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.clearInvalid(t)},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.destroy()}}}()},"./modules/sf-pager.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Pager=function(){"use strict";var e=function(){function e(e,t,i){this.previousBrowserWidth=0,this.element=t,this.dataId=e,this.dotnetRef=i,this.wireEvents(),window.sfBlazor.setCompInstance(this)}return e.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"keydown",this.documentKeyHandler,this),sf.base.EventHandler.add(window,"resize",this.windowResized,this)},e.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,"keydown",this.documentKeyHandler),sf.base.EventHandler.remove(window,"resize",this.windowResized)},e.prototype.windowResized=function(){var e=this;setTimeout((function(){var t=e.element.querySelector(".e-parentmsgbar"),i=e.element.querySelector(".e-mfirst");if(sf.base.isNullOrUndefined(i)||0!=i.offsetWidth)sf.base.isNullOrUndefined(t)||(t.style.display="");else{var s=e.element.offsetWidth,n=e.element.offsetWidth-e.getMargin(e.element,"Left")-e.getMargin(e.element,"Right")-16,o=e.element.querySelector(".e-pagercontainer").offsetWidth+e.getMargin(e.element.querySelector(".e-pagercontainer"),"Left")+4,r=e.element.querySelector(".e-pagesizes"),a=void 0,l=void 0,h=0;sf.base.isNullOrUndefined(r)||(a=r.querySelector(".e-pagerdropdown"),l=r.querySelector(".e-pagerconstant"),h=a.offsetWidth+e.getMargin(a,"Left")+e.getMargin(a,"Right")+l.offsetWidth+e.getMargin(l,"Left")+e.getMargin(l,"Right")+5),o+h+t.offsetWidth>n&&e.previousBrowserWidth>s?(t.style.display="none",o+h>n&&(sf.base.isNullOrUndefined(r)||(l.style.display="none",o+a.offsetWidth+e.getMargin(a,"Left")+e.getMargin(a,"Right")+3>n&&(a.style.display="none")))):e.previousBrowserWidth<s&&(o+h<n?(sf.base.isNullOrUndefined(r)||(a.style.display="",o+a.offsetWidth+e.getMargin(a,"Left")+e.getMargin(a,"Right")+105<n&&(l.style.display="")),o+h<n&&(t.style.visibility="hidden",t.style.display="",o+h+t.offsetWidth>n&&(t.style.display="none"),t.style.visibility="visible")):sf.base.isNullOrUndefined(r)||(t.style.display="none"))}e.previousBrowserWidth=e.element.offsetWidth}),50)},e.prototype.getMargin=function(e,t){var i="Left"===t?getComputedStyle(e).marginLeft:getComputedStyle(e).marginRight;return Number(i.replace("px",""))},e.prototype.documentKeyHandler=function(e){e.altKey&&74===e.keyCode&&!sf.base.isNullOrUndefined(this.element)&&this.element.focus();var t=document.activeElement;e.shiftKey&&9==e.keyCode&&null!=t&&t.classList.contains("e-pager")&&e.stopImmediatePropagation()},e}();return{initialize:function(t,i,s){sf.base.enableBlazorMode(),new e(t,i,s)},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);t.previousBrowserWidth=0,t.unWireEvents()},currentPageFocus:function(e,t,i){var s=window.sfBlazor.getCompInstance(e).element.querySelector(".e-numericcontainer"),n=s.querySelectorAll(".e-link:last-child")[0];"PreviousPage"!=t&&n.innerText==i||t==n.innerText||"LastPage"!=t||null==n.nextElementSibling?sf.base.isNullOrUndefined(i)||"FirstPage"==t||document.activeElement.classList.contains("e-first")||"1"==i||n.focus():s.querySelector(".e-link").focus()},pagerFocus:function(e,t){var i,s=window.sfBlazor.getCompInstance(e),n=s.element.querySelector(".e-pagercontainer"),o=n.querySelector(".e-numericcontainer"),r=n.querySelector(".e-firstpage.e-pager-default"),a=n.querySelector(".e-prevpage.e-pager-default"),l=n.querySelector(".e-pp"),h=o.querySelectorAll(".e-link")[0],d=o.querySelectorAll(".e-link.e-focused"),c=o.querySelector(".e-link.e-focused"),p=n.querySelector(".e-nextpage"),u=n.querySelector(".e-lastpage"),f=o.querySelectorAll(".e-link"),g=s.element.querySelector(".e-ddl"),m=document.activeElement;if(sf.base.isNullOrUndefined(a)||(i=a.classList.contains("e-focused")),"ArrowDown"===t)return r?(r.focus(),"FirstPage"):a&&r?(r.focus(),"PreviousPage"):(f[1].focus(),"1");if("Tab"==t)return null!=m&&m.classList.contains("e-pager")?n&&n.firstElementChild&&n.firstElementChild.classList.contains("e-firstpagedisabled")?(h.focus(),"1"):(r.focus(),"FirstPage"):null!=r&&r.classList.contains("e-focused")?(a.focus(),"PreviousPage"):null!=a&&i||null!=n.querySelector(".e-pp.e-focused")?null==l||l.classList.contains("e-focused")?(h.focus(),h.innerText):(l.focus(),"PreviousPagerCount"):!sf.base.isNullOrUndefined(c)&&d.length>0&&null!=n.querySelector(".e-link.e-focused")&&null!=n.querySelector(".e-link.e-focused").nextElementSibling?(c.nextElementSibling.focus(),c.nextElementSibling.innerText):d.length>0&&null!=n.querySelector(".e-np")&&null==n.querySelector(".e-np.e-focused")?(n.querySelector(".e-np").focus(),"NextPagerCount"):!sf.base.isNullOrUndefined(c)&&c.classList.contains("e-focused")&&d.length>0||n.querySelectorAll(".e-np.e-focused").length>0?null!=p?(p.focus(),"NextPage"):sf.base.isNullOrUndefined(g)||g.classList.contains("e-input-focus")?sf.base.isNullOrUndefined(g)?"":(c.blur(),s.element.blur(),null!=m&&m.classList.contains("e-numericitem")&&m.blur(),"FocusOut"):(g.focus(),"DropDown"):null!=n.querySelector(".e-nextpage.e-focused")?(u.focus(),"LastPage"):sf.base.isNullOrUndefined(u)||u.classList.contains("e-focused")||sf.base.isNullOrUndefined(g)||g.classList.contains("e-input-focus")?sf.base.isNullOrUndefined(g)||g.classList.contains("e-input-focus")?!sf.base.isNullOrUndefined(u)&&u.classList.contains("e-focused")&&sf.base.isNullOrUndefined(g)?(u.blur(),"FocusOut"):(sf.base.isNullOrUndefined(g)||g.blur(),s.element.blur(),"FocusOut"):(g.focus(),"DropDown"):(u.focus(),"LastPage");if("ShiftTab"==t){if(!sf.base.isNullOrUndefined(g)&&g.classList.contains("e-input-focus"))return sf.base.isNullOrUndefined(u)?(o.lastElementChild.focus(),o.lastElementChild.innerText):(u.focus(),"LastPage");if(null!=a&&i)return r.focus(),"FirstPage";if(a&&n.querySelector(".e-pp.e-focused"))return a.focus(),"PreviousPage";if(f[0].classList.contains("e-focused")||document.activeElement==f[0])return null!=l?(l.focus(),"PreviousPagerCount"):a?(a.focus(),"PreviousPage"):(h.blur(),s.element.focus(),"FocusOut");if(d.length>0)return c.previousElementSibling.focus(),c.previousElementSibling.innerText;if(n.querySelectorAll(".e-nextpage.e-focused").length>0&&null!=n.querySelector(".e-np"))return n.querySelector(".e-np").focus(),"NextPagerCount";if(n.querySelectorAll(".e-nextpage.e-focused").length>0||n.querySelectorAll(".e-np.e-focused").length>0)return f[f.length-1].focus(),o.querySelectorAll(".e-link:last-child")[0].innerText;if(null!=m&&m.classList.contains("e-numericitem")){var v=m.previousElementSibling.innerText;return m.previousElementSibling.focus(),v}return null!=n.querySelector(".e-lastpage.e-focused")||m.classList.contains("e-lastpage")?(p.focus(),"NextPage"):r.classList.contains(".e-disabled")?r.classList.contains("e-focused")?(r.blur(),s.element.focus(),"FocusOut"):"0":(r.focus(),"FirstPage")}return"0"}}}()},"./modules/sf-pivotview.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.PivotView=function(){"use strict";var e="e-icons",t="e-group-row",i="e-headercell",s="e-format",n="e-pivot-formula",o="e-remove-report",r="e-pivot-toolbar",a="e-list-icon",l="e-popup",h="e-popup-open",d="e-rowsheader",c="e-columnsheader",p="e-cellselectionbackground",u="e-selectionbackground",f="e-table",g="e-dlg-closeicon-btn.e-icon-btn",m=function(){function e(e){this.parent=e,this.parent.pivotButtonModule=this}return e.prototype.createPivotButtonDrop=function(){for(var e=0,t=[].slice.call(this.parent.parentElement.querySelectorAll(".e-axis-content"));e<t.length;e++){var i=t[e];new sf.base.Droppable(i,{}),this.unWireEvents(i),this.wireEvents(i)}},e.prototype.setPivotButtonDrag=function(){for(var e=0,t=[].slice.call(this.parent.parentElement.querySelectorAll("."+(this.parent instanceof I?"e-grouping-bar":"e-pivotfieldlist")+"-button"));e<t.length;e++){var i=t[e],s=!!sf.base.closest(i,".e-group-all-fields"),n=i.querySelector(".e-pivot-button");this.parent.pivotButtonModule.createDraggable(s,this.parent instanceof I?n.querySelector(".e-content"):n.firstElementChild,s?this.parent.commonActionModule.getFieldInfo(n.getAttribute("data-uid")).fieldItem:JSON.parse(n.getAttribute("data-fieldInfo")))}},e.prototype.createDraggable=function(e,t,i){var s=this;this.draggable=new sf.base.Draggable(t,{clone:!0,enableTailMode:!0,enableAutoScroll:!1,helper:this.createDragClone.bind(this,i,e),dragStart:this.onDragStart.bind(this,e),drag:function(e){s.draggable.setProperties({cursorAt:{top:!sf.base.isNullOrUndefined(e.event.targetTouches)||sf.base.Browser.isDevice?60:-20}})},dragStop:this.onDragStop.bind(this,e),abort:this.parent instanceof I?this.parent.groupingBarSettings.allowDragAndDrop&&i.allowDragAndDrop?"":".e-pivot-button":i.allowDragAndDrop?"":".e-pivot-button"}),e||(this.unWireEvents(this.parent instanceof I?sf.base.closest(t,".e-grouping-bar-button"):t),this.wireEvents(this.parent instanceof I?sf.base.closest(t,".e-grouping-bar-button"):t))},e.prototype.createDragClone=function(e,t,i){var s=t?null:sf.base.closest(i.element,".e-pivot-button");e=s?JSON.parse(s.getAttribute("data-fieldInfo")):e;var n=sf.base.createElement("div",{id:this.parent.element.id+"_DragClone",className:"e-button-drag-clone"}),o=sf.base.createElement("span",{className:"e-text-content"});return o.innerText=e?e.caption?e.caption:e.name:"",n.appendChild(o),document.body.appendChild(n),n},e.prototype.onDragStart=function(e,t){var i=this,s=sf.base.closest(t.element,"."+(e?this.parent instanceof I?"e-pivot-button":"e-list-item":"e-pivot-button"));this.parent.dotNetRef.invokeMethodAsync("TriggerNodeDraggingEvent",s.getAttribute("data-uid")).then((function(n){if(n.cancel)i.parent.isDragging=!1,i.draggable.intDestroy(t.event),sf.base.detach(document.getElementById(i.parent.element.id+"_DragClone"));else{i.parent.isDragging=!0;var o=i.parent.fieldList[s.getAttribute("data-uid")],r=["e-rows","e-columns","e-filters"];if(sf.base.addClass([e?i.parent instanceof I?s:s.querySelector(".e-list-text"):s],"e-list-selected"),o&&"CalculatedField"===o.aggregateType)for(var a=0,l=r;a<l.length;a++){var h=l[a];sf.base.addClass([i.parent.parentElement.querySelector("."+h)],"e-drag-restrict")}if(document.getElementById(i.parent.element.id+"_DragClone")){var d=sf.popups.getZindexPartial(s);document.getElementById(i.parent.element.id+"_DragClone").style.zIndex=d?d.toString():"100000"}t.bindEvents(t.dragElement)}}))},e.prototype.onDragStop=function(e,t){this.parent.isDragging=!1;var i=!1;t.target&&t.element&&sf.base.closest(t.element,".e-group-all-fields")&&!sf.base.closest(t.target,".e-droppable")&&(i=!0);var s=sf.base.closest(t.element,"."+(e?this.parent instanceof I?"e-pivot-button":"e-list-item":"e-pivot-button"));this.parent.parentElement.querySelector(".e-list-selected")&&sf.base.removeClass([].slice.call(this.parent.parentElement.querySelectorAll(".e-list-selected")),"e-list-selected");for(var n=0,o=["e-rows","e-columns","e-filters"];n<o.length;n++){var r=o[n];sf.base.removeClass([this.parent.parentElement.querySelector("."+r)],"e-drag-restrict")}sf.base.removeClass([e?this.parent instanceof I?s:s.querySelector(".e-list-text"):s],"e-list-selected"),document.getElementById(this.parent.element.id+"_DragClone")&&sf.base.remove(t.helper?t.helper:document.getElementById(this.parent.element.id+"_DragClone")),document.body.style.cursor="auto",!this.isNodeDropped(e,t,s)||!e&&i||this.nodeStateModified(e,t,i,s.getAttribute("data-uid"))},e.prototype.nodeStateModified=function(e,t,i,s){var n=sf.base.closest(t.target,".e-droppable")?JSON.stringify(sf.base.closest(t.target,".e-droppable").className.split(" ")):void 0,o=e||!t.element.parentElement?void 0:JSON.stringify({isvalue:t.element.parentElement.getAttribute("isvalue")});this.parent.dotNetRef.invokeMethodAsync("OnFieldDropped",window.sfBlazor.getDomObject("target",t.target).xPath,n,o,!(!e&&!i),s)},e.prototype.isNodeDropped=function(e,t,i){var s=!0,n=i.getAttribute("data-uid");if(this.parent.fieldList[n]&&this.parent.fieldList[n].isSelected||!e){var o=e?this.getButton(n):i,r=sf.base.closest(o,".e-droppable"),a=sf.base.closest(t.target,".e-droppable");if(o&&r&&r===a){for(var l=[].slice.call(r.querySelectorAll(".e-pivot-button")),h=sf.base.closest(t.target,".e-pvt-btn-div"),d=void 0,c=-1,p=0;p<l.length;p++)if(l[p].id===o.id&&(d=p),h){var u=h.querySelector(".e-pivot-button");l[p].id===u.id&&(c=p)}(d===c||d===l.length-1&&-1===c)&&(sf.base.removeClass([].slice.call(this.parent.parentElement.querySelectorAll(".e-drop-indicator")),"e-drop-hover"),s=!1)}}return s},e.prototype.getButton=function(e){for(var t=0,i=[].slice.call(this.parent.parentElement.querySelectorAll(".e-pivot-button"));t<i.length;t++){var s=i[t];if(s.id===e)return s}},e.prototype.getButtonPosition=function(e,t){var i=sf.base.closest(e,".e-pvt-btn-div");if(i){i=i.querySelector(".e-pivot-button");for(var s=this.parent instanceof I?this.parent.parentElement.querySelector(".e-chart-grouping-bar"):void 0,n=[].slice.call((s&&"Chart"===this.parent.currentView?s:this.parent.parentElement).querySelector(".e-"+t).querySelectorAll(".e-pivot-button")),o=0,r=n.length;o<r;o++)if(n[o].id===i.id)return o}return-1},e.prototype.wireEvents=function(e){sf.base.EventHandler.add(e,"mouseover",this.parent.commonActionModule.updateDropIndicator,this),sf.base.EventHandler.add(e,"mouseleave",this.parent.commonActionModule.updateDropIndicator,this)},e.prototype.unWireEvents=function(e){sf.base.EventHandler.remove(e,"mouseover",this.parent.commonActionModule.updateDropIndicator),sf.base.EventHandler.remove(e,"mouseleave",this.parent.commonActionModule.updateDropIndicator)},e.prototype.destroy=function(){for(var e=0,t=[].slice.call(this.parent.parentElement.querySelectorAll(".e-axis-content"));e<t.length;e++){var i=t[e];this.unWireEvents(i)}this.draggable&&this.draggable.isDestroyed&&this.draggable.destroy()},e}(),v=function(){function e(e){this.parent=e,this.parent.groupingBarModule=this,this.parent.pivotButtonModule=new m(this.parent)}return e.prototype.updatePivotButtons=function(){this.createPivotButtonDrop(),this.parent.pivotButtonModule.setPivotButtonDrag()},e.prototype.createPivotButtonDrop=function(){for(var e=0,t=[].slice.call(this.parent.element.querySelectorAll(".e-axis-container"));e<t.length;e++){var i=t[e].firstElementChild;this.parent.groupingBarSettings.allowDragAndDrop&&new sf.base.Droppable(i,{}),this.unWireEvent(i),this.wireEvent(i)}},e.prototype.refreshUI=function(){var e=this.parent.element.querySelector(".e-pivot-grouping-bar");if(e){this.updatePivotButtons(),e.style.minWidth="400px";var s=e.querySelector(".e-group-rows"),n=e.querySelector(".e-group-values"),o=e.querySelector(".e-group-columns"),r=e.querySelector(".e-group-filters"),a=e.querySelector(".e-left-axis-fields"),l=e.querySelector(".e-right-axis-fields");e.style.width=sf.base.select("#"+this.parent.element.id+"_grid",this.parent.element).offsetWidth+"px";var h=this.parent.element.querySelector(".e-frozenheader").querySelector("colgroup").children[0],d=e.offsetWidth-parseInt(h.style.width,10)+"px";if(a.style.minWidth=h.style.width,n.style.width=h.style.width,l.style.width=d,sf.base.select("#"+this.parent.element.id+"_grid",this.parent.element)){var c=this.parent.element.querySelector(".e-frozenheader").querySelector(".e-columnheader");c.querySelector("."+i).classList.add(t),c.style.height=c.querySelector(".e-rhandler").style.height="auto",sf.base.select("#"+this.parent.element.id+"_grid",this.parent.element).querySelector(".e-group-rows")&&c.querySelector(".e-axis-row")?s?(s.style.height=this.parent.element.querySelector(".e-headercontent").offsetHeight+"px",sf.base.remove(c.querySelector(".e-axis-row")),c.querySelector("."+t).appendChild(e.querySelector(".e-axis-row"))):(s=sf.base.select("#"+this.parent.element.id+"_grid",this.parent.element).querySelector(".e-group-rows")).style.height="auto":(s.style.height=this.parent.element.querySelector(".e-headercontent").offsetHeight+"px",c.querySelector("."+t).appendChild(e.querySelector(".e-axis-row"))),c.querySelector("."+t).querySelector(".e-headercelldiv").style.display="none",c.querySelector("."+t).querySelector(".e-sortfilterdiv").style.display="none";for(var p=[].slice.call(this.parent.element.querySelector(".e-movableheader").querySelector("thead").querySelectorAll("tr")).filter((function(e){return e.childNodes.length>0})),u=0,f=p;u<f.length;u++){var g=f[u];sf.base.setStyleAttribute(g,{height:"auto"})}var m=this.parent.element.querySelector(".e-headercontent").offsetHeight;s.style.height=m+"px",o.style.height=r.style.height="auto";var v=n.offsetHeight/2;v>o.offsetHeight&&(sf.base.setStyleAttribute(r,{height:sf.base.formatUnit(v)}),sf.base.setStyleAttribute(o,{height:sf.base.formatUnit(v+2)})),this.parent.element.querySelector(".e-frozenheader").querySelector(".e-rhandler")&&(c.style.height=this.parent.element.querySelector(".e-frozenheader").querySelector(".e-rhandler").style.height=m+"px");for(var b=m/p.length,y=0,M=p;y<M.length;y++){g=M[y];sf.base.setStyleAttribute(g,{height:b+"px"});for(var C=0,w=[].slice.call(g.querySelectorAll(".e-rhandler"));C<w.length;C++){var S=w[C];sf.base.setStyleAttribute(S,{height:sf.base.closest(S,"th").offsetHeight+"px"})}}}}},e.prototype.wireEvent=function(e){sf.base.EventHandler.add(e,"mouseover",this.dropIndicatorUpdate,this),sf.base.EventHandler.add(e,"mouseleave",this.dropIndicatorUpdate,this)},e.prototype.unWireEvent=function(e){sf.base.EventHandler.remove(e,"mouseover",this.dropIndicatorUpdate),sf.base.EventHandler.remove(e,"mouseleave",this.dropIndicatorUpdate)},e.prototype.dropIndicatorUpdate=function(e){(this.parent.isDragging&&e.target.classList.contains("e-droppable")&&"mouseover"===e.type||"mouseleave"===e.type)&&(sf.base.removeClass([].slice.call(this.parent.element.querySelectorAll(".e-drop-indicator")),"e-drop-hover"),sf.base.removeClass([].slice.call(this.parent.element.querySelectorAll(".e-drop-indicator-last")),"e-drop-hover"))},e.prototype.destroy=function(){for(var e=0,t=[].slice.call(this.parent.element.querySelectorAll(".e-axis-container"));e<t.length;e++){var i=t[e];this.unWireEvent(i.firstElementChild)}},e}(),b=function(){function t(e){this.parent=e,this.parent.calculatedFieldModule=this}return t.prototype.getNodeLocation=function(e,t){var i=e.querySelector('li[data-uid="'+CSS.escape(JSON.parse(t))+'"]').getBoundingClientRect();return JSON.stringify([i.top+(window.scrollY||document.documentElement.scrollTop),i.left])},t.prototype.setSelectionRange=function(e){e&&sf.base.select("#"+this.parent.element.id+"droppable").setSelectionRange(e,e),sf.base.select("#"+this.parent.element.id+"droppable").focus()},t.prototype.getIconInfo=function(e,t){var i=document.elementFromPoint(t,e);if(i){if(i.classList.contains(s))return JSON.stringify(s);if(i.classList.contains("e-edit"))return JSON.stringify("e-edit");if(i.classList.contains(o))return JSON.stringify(o);if(i.classList.contains("e-edited"))return JSON.stringify("e-edited")}},t.prototype.emptyFieldName=function(e){sf.base.addClass([document.getElementById(e+"ddlelement")],["e-empty-field","e-pivot-calc-input"]),document.getElementById(e+"ddlelement").focus()},t.prototype.editCalculatedFieldInfo=function(e,t,i,s){var n=sf.base.closest(document.elementFromPoint(i,t),"li");e?("pivot"===this.parent.options.dataType&&(sf.base.addClass(sf.base.select("#"+this.parent.element.id+"calculateddialog").querySelectorAll(".e-edited"),"e-edit"),sf.base.removeClass(sf.base.select("#"+this.parent.element.id+"calculateddialog").querySelectorAll(".e-edited"),"e-edited"),sf.base.addClass([n.querySelector("."+a)],"e-edited"),sf.base.removeClass([n.querySelector("."+a)],"e-edit"),n.querySelector(".e-edited").setAttribute("title",s)),sf.base.select("#"+this.parent.element.id+"droppable").value=n.getAttribute("data-uid")):this.updatedCalculatedFieldInfo(n,s)},t.prototype.updatedCalculatedFieldInfo=function(e,t){"pivot"===this.parent.options.dataType&&(sf.base.addClass(sf.base.select("#"+this.parent.element.id+"calculateddialog").querySelectorAll(".e-edited"),"e-edit"),sf.base.removeClass(sf.base.select("#"+this.parent.element.id+"calculateddialog").querySelectorAll(".e-edited"),"e-edited"),e.querySelector(".e-edit").setAttribute("title",t)),sf.base.select("#"+this.parent.element.id+"droppable").value=""},t.prototype.updateNodeExpandIcons=function(t,i){for(var s=t.querySelector('li[data-uid="'+CSS.escape(i)+'"]'),n=[].slice.call(s.querySelectorAll("li")),r=0;r<n.length;r++){var l=n[r].querySelector(".e-text-content");if("CalculatedField"===n[r].getAttribute("data-type")&&l&&n[r].querySelector("."+a+".e-calc-member")&&!n[r].querySelector("."+o)){var h=sf.base.createElement("span",{className:o+" "+e+" "+a});l.classList.add("e-calcfieldmember"),l.appendChild(h)}(n[r].querySelector(".e-calc-dimension-icon,.e-calc-measure-icon,.e-measure-icon")||n[r].querySelector(".e-dimensionCDB-icon,.e-attributeCDB-icon,.e-hierarchyCDB-icon")||n[r].querySelector(".e-level-members,.e-namedSetCDB-icon"))&&this.createDraggable(n[r])}return this.olapExpand(s)},t.prototype.olapExpand=function(e){if(e&&e.querySelector("."+a)&&e.querySelector(".e-icon-expandable")&&e.querySelector("."+a).className.indexOf("e-folderCDB-icon")>-1){var t=e.querySelector("."+a);return sf.base.removeClass([t],"e-folderCDB-icon"),sf.base.addClass([t],"e-folderCDB-open-icon"),JSON.stringify(!1)}return e&&e.querySelector("."+a)&&e.querySelector(".e-icon-collapsible")&&e.querySelector("."+a).className.indexOf("e-folderCDB-open-icon")>-1?(e=e.querySelector("."+a),sf.base.removeClass([e],"e-folderCDB-open-icon"),sf.base.addClass([e],"e-folderCDB-icon"),JSON.stringify(!1)):JSON.stringify(!0)},t.prototype.updateEditOptions=function(t){var i=[].slice.call(sf.base.selectAll("#"+t+" .e-acrdn-item"));sf.base.addClass(sf.base.selectAll("#"+t),"e-pivot-accord");for(var s=0;s<i.length;s++)if(i[s].querySelector('[data-type="CalculatedField"]')){var n=i[s].querySelector(".e-acrdn-header .e-toggle-icon");sf.base.removeClass([n],"e-toggle-icon"),sf.base.addClass([n],"e-acrdn-header-icon");var r=n.querySelector(".e-tgl-collapse-icon");sf.base.removeClass([r],"e-tgl-collapse-icon"),sf.base.addClass([r],[a,"e-edit"]),n.appendChild(sf.base.createElement("span",{className:o+" "+e+" "+a}))}},t.prototype.updateAccordionLabel=function(e){var t=document.elementFromPoint(JSON.parse(e).ClientX,JSON.parse(e).ClientY),i=t.parentElement.querySelector(".e-label").innerText,s=sf.base.closest(t,".e-acrdn-item").querySelector("[data-field").getAttribute("data-caption"),n=sf.base.closest(t,".e-adaptive-calc-radio-btn").querySelector("input");sf.base.closest(t,".e-acrdn-item").querySelector(".e-label").innerText=s+" ("+i+")",sf.base.closest(t,".e-acrdn-item").querySelector("[data-type").setAttribute("data-type",n.getAttribute("data-value"))},t.prototype.accordionClick=function(e,t,i){var s=document.elementFromPoint(JSON.parse(e),JSON.parse(t));if(sf.base.closest(s,".e-acrdn-header-icon")){var n=sf.base.closest(s,".e-acrdn-header").querySelector(".e-pivot-calc-check input");if(n){var r=void 0,l=sf.base.closest(s,".e-acrdn-header-icon");return l.querySelector(".e-edit")&&s.classList.contains("e-edit")?(sf.base.addClass([l.querySelector("."+a)],"e-edited"),sf.base.removeClass([l.querySelector("."+a)],"e-edit"),r="e-edit"):l.querySelector(".e-edited")&&s.classList.contains("e-edited")?(sf.base.addClass([l.querySelector("."+a)],"e-edit"),sf.base.removeClass([l.querySelector("."+a)],"e-edited"),r="e-edited"):l.querySelector("."+o)&&s.classList.contains(o)&&(r=o),JSON.stringify([n.getAttribute("data-field"),r,n.getAttribute("id").split(i+"_")[1]])}}return JSON.stringify([])},t.prototype.getAccordionValue=function(){for(var e="",t=[].slice.call(document.querySelectorAll(".e-accordion .e-check")),i=0;i<t.length;i++){var s=t[i].parentElement.querySelector("[data-field]").getAttribute("data-field"),n=t[i].parentElement.querySelector("[data-type]").getAttribute("data-type");-1===n.indexOf("CalculatedField")?e=e+'"'+n+"("+s+')"':e+=t[i].parentElement.querySelector("[data-formula]").getAttribute("data-formula")}return e},t.prototype.createFormulaDroppable=function(t,i,r,l,h,d,c){var p=document.getElementById(this.parent.element.id+c);if(p.querySelector("."+n)){new sf.base.Droppable(p.querySelector("."+n),{});for(var u=[].slice.call(p.querySelectorAll(".e-pivot-treeview ul li")),f=0;f<u.length;f++){var g=u[f].getAttribute("data-field");if("olap"===this.parent.options.dataType){u[f].querySelector(".e-measure-icon")&&(u[f].querySelector("."+a).style.display="none");var m=u[f].querySelector(".e-text-content");"CalculatedField"===u[f].getAttribute("data-type")&&m&&u[f].querySelector("."+a+".e-calc-member")&&(m.classList.add("e-calcfieldmember"),m.appendChild(sf.base.createElement("span",{className:o+" "+e+" "+a}))),(u[f].querySelector(".e-calc-dimension-icon,.e-calc-measure-icon,.e-measure-icon")||u[f].querySelector(".e-dimensionCDB-icon,.e-attributeCDB-icon,.e-hierarchyCDB-icon")||u[f].querySelector(".e-level-members,.e-namedSetCDB-icon"))&&this.createDraggable(u[f])}else if("pivot"===this.parent.options.dataType&&!u[f].querySelector(".e-text-content span.e-drag")&&u[f].querySelector(".e-text-content span")){var v=u[f].getAttribute("data-type"),b=sf.base.createElement("span",{attrs:{tabindex:"-1","aria-disabled":"false",title:i},className:e+" e-drag"}),y=sf.base.createElement("div",{className:" e-iconspace"});sf.base.prepend([b],u[f].querySelector(".e-text-content")),sf.base.append([y,u[f].querySelector("."+s)],u[f].querySelector(".e-text-content")),"CalculatedField"===v&&(u[f].querySelector("."+s).setAttribute("title",r),sf.base.addClass([u[f].querySelector("."+s)],o),h&&d===g&&(sf.base.select("#"+this.parent.element.id+"droppable",p).value=u[f].getAttribute("data-uid")),sf.base.addClass([u[f].querySelector(".e-iconspace")],[h&&d===g?"e-edited":"e-edit",e,a]),u[f].querySelector(".e-edit,.e-edited").setAttribute("title",h&&d===g?l:t),u[f].querySelector(".e-edit,.e-edited").setAttribute("aria-disabled","false"),u[f].querySelector(".e-edit,.e-edited").setAttribute("tabindex","-1"),sf.base.removeClass([u[f].querySelector("."+s)],s),sf.base.removeClass([u[f].querySelector(".e-iconspace")],"e-iconspace")),this.createDraggable(b)}}}},t.prototype.createDraggable=function(e){new sf.base.Draggable(e,{dragTarget:".e-list-item",clone:!0,enableTailMode:!0,enableAutoScroll:!1,helper:this.calculatedDragClone.bind(this),dragStart:this.onCalcDragStart.bind(this),drag:this.onDragging.bind(this),dragStop:this.onCalcDragStop.bind(this)})},t.prototype.onDragging=function(t){var i=sf.base.select("#"+this.parent.element.id+"_DragClone ."+e);t.target&&t.target.classList.contains(n)?(sf.base.removeClass([i],"e-drag-restrict"),sf.base.addClass([t.target],"e-copy-drop")):(sf.base.addClass([i],"e-drag-restrict"),sf.base.removeClass([t.target],"e-copy-drop"),sf.base.addClass([i],"e-icon-expandable"),sf.base.removeClass([i],a))},t.prototype.onCalcDragStop=function(e){var t=document.getElementById(this.parent.element.id+"droppable"),i=sf.base.closest(e.element,".e-list-item");sf.base.removeClass([t],"e-copy-drop"),sf.base.removeClass([i.querySelector(".e-list-text")],"e-list-selected");var s=t.selectionStart;e.target.id===this.parent.element.id+"droppable"&&this.parent.dotNetRef.invokeMethodAsync("UpdateCalcDroppable",i.getAttribute("data-uid"),s,e.target.id),document.getElementById(this.parent.element.id+"_DragClone")&&sf.base.remove(e.helper),document.body.style.cursor="auto",this.parent.isDragging=!1},t.prototype.onCalcDragStart=function(e){var t=sf.base.closest(e.element,".e-list-item"),i=document.getElementById(this.parent.element.id+"_DragClone");if(i&&t&&("pivot"===this.parent.options.dataType&&e.target&&e.target.classList.contains("e-drag")||"olap"===this.parent.options.dataType&&(t.querySelector(".e-calc-dimension-icon,.e-calc-measure-icon,.e-measure-icon")||t.querySelector(".e-dimensionCDB-icon,.e-attributeCDB-icon,.e-hierarchyCDB-icon")||t.querySelector(".e-level-members,.e-namedSetCDB-icon")))){sf.base.addClass([t.querySelector(".e-list-text")],"e-list-selected");var s=sf.popups.getZindexPartial(t);i.style.zIndex=s?s.toString():document.querySelector(".e-pivot-calc-dialog-div.e-olap-calc-dialog-div").style.zIndex+1,i.style.display="inline",this.parent.isDragging=!0}else this.parent.isDragging=!1;e.bindEvents(e.dragElement)},t.prototype.calculatedDragClone=function(t){var i=sf.base.createElement("div",{id:this.parent.element.id+"_DragClone",className:"e-drag-item e-treeview e-pivot-calc"}),s=sf.base.createElement("div",{className:"e-text-content e-calcfieldmember"});return s.appendChild(sf.base.createElement("div",{className:e})),s.appendChild(sf.base.createElement("span",{className:"e-list-text"})),s.innerText=sf.base.closest(t.element,"li").getAttribute("data-caption"),i.appendChild(s),document.body.appendChild(i),i},t}(),y=function(){function e(e){this.parent=e,this.parent.toolbarModule=this}return e.prototype.renderToolbar=function(){this.parent.element.querySelector("."+r)&&this.updateItemElements(this.parent.element.querySelector("."+r))},e.prototype.updateItemElements=function(e){for(var t=0,i=[].slice.call(e.querySelectorAll(".e-toolbar-item"));t<i.length;t++){var s=i[t];s.querySelector("button")?s.classList.contains("e-overlay")||s.querySelector("button").setAttribute("tabindex","0"):s.querySelector(".e-menu.e-menu-parent")&&(s.querySelector(".e-menu.e-menu-parent").setAttribute("tabindex","-1"),!s.classList.contains("e-overlay")&&s.querySelector(".e-menu-item.e-menu-caret-icon")&&s.querySelector(".e-menu-item.e-menu-caret-icon").setAttribute("tabindex","0"))}},e.prototype.focusToolBar=function(){sf.base.removeClass(document.querySelector("."+r).querySelectorAll(".e-menu-item.e-focused"),"e-focused"),sf.base.removeClass(document.querySelector("."+r).querySelectorAll(".e-menu-item.e-selected"),"e-selected"),document.querySelector(".e-toolbar-items")&&sf.base.addClass([document.querySelector(".e-toolbar-items")],"e-focused")},e.prototype.selectInputRange=function(e){if(e.querySelector(".e-pivotview-report-input")){var t=e.querySelector(".e-pivotview-report-input input");t.setSelectionRange(t.value.length,t.value.length)}},e.prototype.copyMdxQuery=function(e){if(e.querySelector(".e-mdx-query-content")){var t=e.querySelector(".e-mdx-query-content");try{t.select(),document.execCommand("copy")}catch(e){window.alert("Oops, unable to copy")}}else;},e}(),M=function(){function t(e){this.parent=e,this.parent.treeRendererModule=this}return t.prototype.updateFieldListIcons=function(e,t){if(this.parent.fieldList)for(var i=document.getElementById(e),s=[].slice.call(i.querySelectorAll("ul li")),n=0;n<s.length;n++){var o=s[n].getAttribute("data-uid");this.updateTreeNode(s[n],o,t)}},t.prototype.updateTreeNode=function(t,i,s){var n=!1;n="olap"!==this.parent.options.dataType||this.updateOlapTreeNode(t);var o=t.querySelector(".e-text-content");if(t.querySelector("."+a)&&o){var r=t.querySelector("."+a);o.insertBefore(r,t.querySelector(".e-list-text"))}if(n&&!this.parent.isAdaptive){var l=this.parent.commonActionModule.getFieldInfo(i);n=!1;var h=sf.base.createElement("span",{attrs:{tabindex:"-1","aria-disabled":"false"}});h.appendChild(sf.base.createElement("span",{attrs:{tabindex:"-1",title:l.fieldItem?l.fieldItem.allowDragAndDrop?s:"":s,"aria-disabled":"false"},className:e+" e-drag "+(l.fieldItem?l.fieldItem.allowDragAndDrop?"":"e-disable-drag":"")})),t.querySelector(".e-checkbox-wrapper")&&!t.querySelector(".e-drag")&&o&&o.insertBefore(h,o.nextElementSibling),this.parent.pivotButtonModule.createDraggable(!0,h,l.fieldItem)}t.querySelector(".e-check")&&sf.base.addClass([t.querySelector(".e-list-text")],"e-selected-node")},t.prototype.updateOlapTreeNode=function(e){if("olap"!==this.parent.options.dataType||!e)return!0;var t=e.querySelector(".e-text-content");return!!(t.querySelector(".e-hierarchyCDB-icon,.e-attributeCDB-icon,.e-namedSetCDB-icon")||t.querySelector(".e-measure-icon,.e-kpiGoal-icon,.e-kpiStatus-icon,.e-kpiTrend-icon,.e-kpiValue-icon")||t.querySelector(".e-calc-measure-icon,.e-calc-dimension-icon"))},t}(),C=function(){function e(e,t,i,s){window.sfBlazor=window.sfBlazor,this.element=t,this.dotNetRef=s,this.dataId=e,window.sfBlazor.setCompInstance(this),this.getOptions(t,i)}return e.prototype.getOptions=function(e,t){this.element=e,this.options=t,this.parentElement=document.getElementById(e.id+"_Dialog_Container"),this.isAdaptive=sf.base.Browser.isDevice,this.pivotGridModule=t.pivotGridModule?window.sfBlazor.getCompInstance(t.pivotGridModule):this.pivotGridModule,this.pivotGridModule&&sf.base.isNullOrUndefined(this.pivotGridModule.pivotFieldListModule)&&(this.pivotGridModule.pivotFieldListModule=this),this.fieldList=t.fieldList?t.fieldList:this.fieldList,this.dataSourceSettings=t.dataSourceSettings,this.parentElement&&sf.base.select("#"+this.parentElement.id+"_title",this.parentElement)&&sf.base.setStyleAttribute(sf.base.select("#"+this.parentElement.id+"_title",this.parentElement),{width:"100%"})},e.prototype.initModules=function(){this.treeRendererModule=new M(this),this.commonActionModule=new S(this),this.pivotButtonModule=new m(this),this.options.allowCalculatedField&&(this.calculatedFieldModule=new b(this)),this.unWireEvents(),this.wireEvents()},e.prototype.contentReady=function(){this.initModules(),this.pivotButtonModule&&(this.pivotButtonModule.createPivotButtonDrop(),this.pivotButtonModule.setPivotButtonDrag()),this.parentElement&&sf.base.select("#"+this.parentElement.id+"_title",this.parentElement)&&sf.base.setStyleAttribute(sf.base.select("#"+this.parentElement.id+"_title",this.parentElement),{width:"100%"})},e.prototype.onShowFieldList=function(e,t){e.querySelector(".e-toggle-field-list")&&sf.base.addClass([e.querySelector(".e-toggle-field-list")],"e-hide"),t.style.top=parseInt(t.style.top,10)<0?"0px":t.style.top},e.prototype.removeFieldListIcon=function(e){document.getElementById(e.id+"calculateddialog")&&!document.getElementById(e.id+"calculateddialog").classList.contains("e-popup-close")||!e.querySelector(".e-toggle-field-list")||sf.base.removeClass([e.querySelector(".e-toggle-field-list")],"e-hide")},e.prototype.updateFieldList=function(e){var t=e.querySelector(".e-footer-content");sf.base.select("#"+e.id+"_dialog-content",e)?(sf.base.setStyleAttribute(sf.base.select("#"+e.id+"_dialog-content",e),{padding:"0"}),sf.base.addClass([t],"e-field-list-footer")):e.querySelector(".e-adaptive-container").appendChild(t)},e.prototype.updateSelectedNodes=function(e,t){e=sf.base.closest(e,".e-text-content"),"check"===t?sf.base.addClass([e.querySelector(".e-list-text")],"e-selected-node"):sf.base.removeClass([e.querySelector(".e-list-text")],"e-selected-node");var i=sf.base.closest(e,"li");if(i&&i.querySelector("ul"))for(var s=0,n=[].slice.call(i.querySelectorAll("li"));s<n.length;s++){var o=n[s];"check"===t?sf.base.addClass([o.querySelector(".e-list-text")],"e-selected-node"):sf.base.removeClass([o.querySelector(".e-list-text")],"e-selected-node")}},e.prototype.removeFocusedElements=function(){this.element.querySelectorAll(".e-btn-focused").length>0&&sf.base.removeClass(this.element.querySelectorAll(".e-btn-focused"),"e-btn-focused")},e.prototype.wireEvents=function(){sf.base.EventHandler.add(document,"click",this.removeFocusedElements,this)},e.prototype.unWireEvents=function(){sf.base.EventHandler.remove(document,"click",this.removeFocusedElements)},e.prototype.destroy=function(e){this.unWireEvents(),this.commonActionModule.destroy(),this.pivotButtonModule.destroy(),this.isDestroyed=e},e}(),w=function(){function e(e){this.keyConfigs={shiftF:"shift+F",shiftS:"shift+S",shiftE:"shift+E",delete:"delete",enter:"enter",escape:"escape",upArrow:"upArrow",downArrow:"downArrow"},this.parent=e,this.parent.parentElement.tabIndex=-1===this.parent.parentElement.tabIndex?0:this.parent.parentElement.tabIndex,this.keyboardModule=new sf.base.KeyboardEvents(this.parent.parentElement,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}return e.prototype.keyActionHandler=function(e){switch(e.action){case"shiftF":this.processFilter(e);break;case"shiftS":this.processSort(e);break;case"shiftE":this.processEdit(e);break;case"delete":this.processDelete(e);break;case"enter":this.processEnter(e);break;case"escape":this.processClose(e);break;case"upArrow":case"downArrow":this.processFilterNodeSelection(e)}},e.prototype.getButtonElement=function(e){for(var t=[].slice.call(this.parent.parentElement.querySelectorAll(".e-pivot-button")),i=0,s=t.length;i<s;i++)if(t[i].getAttribute("data-uid")===e.getAttribute("data-uid"))return t[i];return e},e.prototype.processEnter=function(e){var t=e.target;if(t&&sf.base.closest(t,".e-pivot-button"))return t.querySelector(".e-dropdown-icon")&&sf.base.closest(t,".e-values")?t.querySelector(".e-dropdown-icon").click():t.querySelector(".e-edit")?t.querySelector(".e-edit").click():!t.querySelector(".e-sort")||sf.base.closest(t,".e-values")||sf.base.closest(t,".e-axis-filter")?t.querySelector(".e-btn-filter")&&!sf.base.closest(t,".e-values")&&t.querySelector(".e-btn-filter").click():(t.querySelector(".e-sort").click(),this.getButtonElement(t).focus()),e.stopPropagation(),void e.preventDefault()},e.prototype.processSort=function(e){var t=e.target;if(t&&sf.base.closest(t,".e-pivot-button")&&t.querySelector(".e-sort")&&!sf.base.closest(t,".e-values")&&!sf.base.closest(t,".e-axis-filter"))return t.querySelector(".e-sort").click(),this.getButtonElement(t).focus(),e.stopPropagation(),void e.preventDefault()},e.prototype.processEdit=function(e){var t=e.target;if(t&&sf.base.closest(t,".e-pivot-button")&&t.querySelector(".e-edit"))return t.querySelector(".e-edit").click(),e.stopPropagation(),void e.preventDefault()},e.prototype.processFilter=function(e){var t=e.target;if(t&&sf.base.closest(t,".e-pivot-button")&&t.querySelector(".e-btn-filter")&&!sf.base.closest(t,".e-values"))return t.querySelector(".e-btn-filter").click(),e.stopPropagation(),void e.preventDefault()},e.prototype.processFilterNodeSelection=function(e){var t=e.target;if(t&&sf.base.closest(t,".e-select-all")&&40===e.keyCode){if((i=sf.base.closest(t,".e-member-editor-outer-container").querySelector(".e-member-editor-container"))&&i.querySelector("li"))return(n=i.querySelector("li"))&&sf.base.removeClass([n],["e-node-focus"]),sf.base.addClass([n],["e-node-focus"]),n.focus(),e.stopPropagation(),void e.preventDefault()}else if(t&&sf.base.closest(t,".e-member-editor-container")&&38===e.keyCode){var i;if((i=sf.base.closest(t,".e-member-editor-container")).querySelector("li.e-node-focus")&&i.querySelector("li")&&i.querySelector("li")===i.querySelector("li.e-node-focus")){sf.base.removeClass(i.querySelectorAll("li.e-prev-active-node"),"e-prev-active-node");var s=sf.base.closest(t,".e-member-editor-outer-container").querySelector(".e-select-all");if(s&&s.querySelector("li")){var n=s.querySelector("li");return sf.base.addClass([n],["e-node-focus"]),n.focus(),e.stopPropagation(),void e.preventDefault()}}}},e.prototype.processDelete=function(e){var t=e.target;if(t&&sf.base.closest(t,".e-pivot-button")&&t.querySelector(".e-remove"))return t.querySelector(".e-remove").click(),e.stopPropagation(),void e.preventDefault()},e.prototype.processClose=function(e){var t=e.target;if(t&&sf.base.closest(t,"."+l+"."+h)){var i=sf.base.closest(t,"."+l+"."+h).blazor__instance,s=this;if(i&&!i.closeOnEscape){var n=i.element.getAttribute("data-fieldName");i.dotNetRef.invokeMethodAsync("CloseDialog",{altKey:e.altKey,ctrlKey:e.ctrlKey,code:e.code,key:e.key,location:e.location,repeat:e.repeat,shiftKey:e.shiftKey,metaKey:e.metaKey,type:e.type}).then((function(){if(s.parent.parentElement)for(var t=0,i=[].slice.call(s.parent.parentElement.querySelectorAll(".e-pivot-button"));t<i.length;t++){var o=i[t];if(o.getAttribute("data-uid")===n){o.focus();break}}e.preventDefault()}))}else this.closeDialog(sf.base.closest(t,"."+l+"."+h),e)}},e.prototype.closeDialog=function(e,t){return e.querySelector("."+g)?(e.querySelector("."+g).click(),void t.preventDefault()):e.querySelector(".e-cancel-btn")?(e.querySelector(".e-cancel-btn").click(),void t.preventDefault()):void 0},e.prototype.destroy=function(){this.keyboardModule&&this.keyboardModule.destroy()},e}(),S=function(){function e(e){this.parent=e,this.parent.commonActionModule=this,this.keyboardModule=new w(e),this.getElementInfo()}return e.prototype.getElementInfo=function(){if(this.parent instanceof I){var e=this.parent.element.getBoundingClientRect();this.parent.dotNetRef.invokeMethodAsync("GetElementInfo",e.width,e.height,this.parent.element.clientWidth,this.parent.element.clientHeight)}},e.prototype.updateActiveNode=function(e,t){var i=e.querySelectorAll("li.e-node-focus");return sf.base.removeClass(e.querySelectorAll("li.e-prev-active-node"),"e-prev-active-node"),sf.base.addClass([e.querySelector('li[data-uid="'+t+'"]')],"e-prev-active-node"),i&&i.length>0&&e.querySelectorAll("li")[0]===i[0]},e.prototype.isFullRowElement=function(e,t){var i=document.elementFromPoint(t,e),s=i.classList.contains("e-fullrow");return JSON.stringify(this.parent instanceof C&&sf.base.closest(i,".e-field-list-tree-outer-div")?s&&!sf.base.isNullOrUndefined(i.parentElement.querySelector(".e-drag")):s)},e.prototype.validateInputs=function(e){var t=e.value1,i=e.value2,s=e.condition,n=e.type;if(sf.base.isNullOrUndefined(t)||""===t||["Between","NotBetween"].indexOf(s)>-1&&(sf.base.isNullOrUndefined(i)||""===i)){var o=sf.base.select("#"+this.parent.element.id+"_"+n.toLowerCase()+(sf.base.isNullOrUndefined(t)||""===t?"_input_option_1":"_input_option_2"),this.parent.parentElement);sf.base.addClass([o],"e-empty-field"),o.focus()}},e.prototype.updateDropIndicator=function(e){this.parent.isDragging&&e.target.classList.contains("e-axis-content")&&"mouseover"===e.type?(sf.base.removeClass([].slice.call(this.parent.parentElement.querySelectorAll(".e-drop-indicator")),"e-drop-hover"),sf.base.removeClass([].slice.call(this.parent.parentElement.querySelectorAll(".e-drop-indicator-last")),"e-drop-hover"),(t=[].slice.call(e.target.querySelectorAll(".e-pvt-btn-div"))).length>0&&sf.base.addClass([t[t.length-1].querySelector(".e-drop-indicator-last")],"e-drop-hover")):this.parent instanceof C&&(!this.parent.isDragging||!e.target.classList.contains("e-droppable")&&"mouseleave"===e.type)&&(sf.base.removeClass([].slice.call(this.parent.parentElement.querySelectorAll(".e-drop-indicator")),"e-drop-hover"),sf.base.removeClass([].slice.call(this.parent.parentElement.querySelectorAll(".e-drop-indicator-last")),"e-drop-hover"));if(this.parent.isDragging&&sf.base.closest(e.target,".e-pvt-btn-div")&&"mouseover"===e.type&&(sf.base.removeClass([].slice.call(this.parent.parentElement.querySelectorAll(".e-drop-indicator-last")),"e-drop-hover"),sf.base.removeClass([].slice.call(this.parent.parentElement.querySelectorAll(".e-drop-indicator")),"e-drop-hover"),sf.base.closest(e.target,".e-droppable"))){var t=sf.base.closest(e.target,".e-pvt-btn-div");sf.base.addClass([t.querySelector(".e-drop-indicator")],"e-drop-hover")}},e.prototype.getFieldInfo=function(e,t){for(var i=[this.parent.dataSourceSettings.rows,this.parent.dataSourceSettings.columns,this.parent.dataSourceSettings.values,this.parent.dataSourceSettings.filters],s=0,n=i.length;s<n;s++)for(var o=0,r=i[s]?i[s].length:0;o<r&&!t;o++)if(i[s][o]&&i[s][o].name===e)return{fieldName:e,fieldItem:i[s][o],axis:0===s?"rows":1===s?"columns":2===s?"values":"filters",position:o};var a=this.parent.fieldList[e];return{fieldName:e,fieldItem:a||t?{name:e,caption:a?a.caption:e,baseField:a?a.baseField:void 0,baseItem:a?a.baseItem:void 0,isCalculatedField:!!a&&a.isCalculatedField,isNamedSet:!!a&&a.isNamedSets,showNoDataItems:!!a&&a.showNoDataItems,showSubTotals:!!a&&a.showSubTotals,type:a?a.aggregateType:void 0,showFilterIcon:!!a&&a.showFilterIcon,showSortIcon:!!a&&a.showSortIcon,showRemoveIcon:!a||a.showRemoveIcon,showValueTypeIcon:!!a&&a.showValueTypeIcon,showEditIcon:!!a&&a.showEditIcon,allowDragAndDrop:!a||a.allowDragAndDrop}:void 0,axis:t?"row"===this.parent.dataSourceSettings.valueAxis?"rows":"columns":"fieldlist",position:-1}},e.prototype.getAggregateIcoPosition=function(e){var t=this.parent instanceof I?this.parent.parentElement.querySelector(".e-chart-grouping-bar"):void 0,i=(t&&"Chart"===this.parent.currentView?t:this.parent.parentElement).querySelector(".e-pivot-button."+e);if(i&&i.querySelector(".e-dropdown-icon")){var s=i.querySelector(".e-dropdown-icon").getBoundingClientRect(),n={};return n.top=s.top,n.left=s.left,n.bottom=s.bottom,n.right=s.right,JSON.stringify(n)}return null},e.prototype.destroy=function(){this.keyboardModule.destroy()},e}(),N=function(){function i(e){this.keyConfigs={tab:"tab",shiftTab:"shift+tab",enter:"enter",shiftEnter:"shift+enter",ctrlEnter:"ctrl+enter",ctrlShiftF:"ctrl+shift+f"},this.parent=e,this.event=void 0,this.parent.element.tabIndex=-1===this.parent.element.tabIndex?0:this.parent.element.tabIndex,this.pivotViewKeyboardModule=new sf.base.KeyboardEvents(this.parent.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}return i.prototype.keyActionHandler=function(e){var t=e.target;if(!t||!sf.base.closest(t,".e-pivotfieldlist-container"))switch(e.action){case"tab":this.processTab(e);break;case"shiftTab":this.processShiftTab(e);break;case"enter":case"shiftEnter":case"ctrlEnter":this.processEnter(e);break;case"ctrlShiftF":this.toggleFieldList(e)}},i.prototype.getAdjacentButton=function(e,t){var i=this.allpivotButtons(e);if(sf.base.removeClass(i,"e-btn-focused"),this.parent.internalGrid&&i)for(var s=i.length,n=0;n<s;n++)if(i[n].getAttribute("data-uid")===e.getAttribute("data-uid")){var o="next"===t?i[n+1]:i[n-1];return o||e}return e},i.prototype.allpivotButtons=function(e){var t=[];if(e&&this.parent.options.showGroupingBar){var i=sf.base.closest(e,".e-pivot-grouping-bar"),s=sf.base.closest(e,".e-group-pivot-rows"),n=sf.base.closest(e,".e-chart-grouping-bar"),o=e.classList.contains(d),r=void 0,a=void 0,l=void 0;if(null!==i?a=i.classList.contains("e-pivot-grouping-bar"):null!==s?l=s.classList.contains("e-group-pivot-rows"):null!==n&&(r=n.classList.contains("e-chart-grouping-bar")),a||l||o){var h=[].slice.call(this.parent.element.querySelector(".e-pivot-grouping-bar").querySelectorAll(".e-pivot-button")),c=[].slice.call(this.parent.element.querySelector(".e-group-pivot-rows").querySelectorAll(".e-pivot-button"));t=h.concat(c)}else r&&(t=[].slice.call(this.parent.element.querySelector(".e-chart-grouping-bar").querySelectorAll(".e-pivot-button")))}return t},i.prototype.processTab=function(e){var i=this,s=e.target;if(s&&(sf.base.closest(s,".e-pivot-button")||s.classList.contains(t))){if(this.parent.internalGrid){if(s.parentElement.parentElement.classList.contains("e-group-rows")&&s.classList.contains("e-btn-focused")){var n=this.getAdjacentButton(s,"next");return n.getAttribute("data-uid")!==s.getAttribute("data-uid")&&(sf.base.addClass([n],"e-btn-focused"),n.focus()),e.stopPropagation(),void e.preventDefault()}var o=this.getAdjacentButton(s,"next");return o.getAttribute("data-uid")!==s.getAttribute("data-uid")&&(sf.base.addClass([o],"e-btn-focused"),o.focus()),void e.preventDefault()}}else s&&sf.base.closest(s,"."+r)&&this.parent.options.showToolbar&&(clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout((function(){var e=i.getAdjacentToolbarItem(document.activeElement,"next");sf.base.removeClass(sf.base.closest(s,"."+r).querySelectorAll(".e-menu-item.e-focused"),"e-focused"),e&&e.classList.contains("e-menu-item")&&sf.base.addClass([e],"e-focused")})))},i.prototype.getAdjacentToolbarItem=function(e,t){if(e.classList.contains("e-menu-item")&&e.classList.contains("e-focused")){var i=sf.base.closest(e,".e-toolbar-item"),s=[].slice.call(sf.base.closest(e,"."+r).querySelectorAll(".e-toolbar-item:not(.e-overlay)"));if("next"===t){for(var n=0;n<s.length;n++)if(i.id===s[n].id)return this.getActiveElement(s[n+1])}else for(n=s.length-1;n>-1;n--)if(i.id===s[n].id)return this.getActiveElement(s[n-1])}return e},i.prototype.getActiveElement=function(e){if(e){if("button"===e.firstElementChild.tagName.toLowerCase())return e.firstElementChild.focus(),e.firstElementChild;if(e.querySelector(".e-menu-item"))return e.querySelector(".e-menu-item").focus(),e.querySelector(".e-menu-item")}return document.activeElement},i.prototype.processShiftTab=function(e){var i=this,s=e.target;if(s&&(sf.base.closest(s,".e-pivot-button")||s.classList.contains(t))){if(this.parent.internalGrid){if(s.classList.contains(t)&&s.querySelector(".e-btn-focused"))s=s.querySelector(".e-btn-focused");else if(s.classList.contains(t)){s=this.parent.element.querySelector(".e-btn-focused")?this.parent.element.querySelector(".e-btn-focused"):this.parent.element.querySelector(".e-pivot-grouping-bar");var n=this.allpivotButtons(s);if(n.length>0&&n[n.length-1])return n[n.length-1].focus(),sf.base.removeClass(n,"e-btn-focused"),sf.base.addClass([n[n.length-1]],"e-btn-focused"),e.stopPropagation(),void e.preventDefault()}var o=this.getAdjacentButton(s,"previous");if(o.getAttribute("data-uid")!==s.getAttribute("data-uid"))return o.focus(),e.stopPropagation(),void e.preventDefault()}}else if(s&&this.parent.internalGrid&&(s.classList.contains("e-movablefirst")||s.classList.contains(d)&&sf.base.closest(s,"tr").getAttribute("data-uid")===this.parent.internalGrid.element.querySelector(".e-frozencontent tr").getAttribute("data-uid"))){var a=this.allpivotButtons(s);if(a.length>0)return setTimeout((function(){a[a.length-1].focus()})),sf.base.removeClass(a,"e-btn-focused"),sf.base.addClass([a[a.length-1]],"e-btn-focused"),e.stopPropagation(),void e.preventDefault()}else s&&sf.base.closest(s,"."+r)&&this.parent.options.showToolbar&&(clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout((function(){var e=i.getAdjacentToolbarItem(document.activeElement,"previous");sf.base.removeClass(sf.base.closest(s,"."+r).querySelectorAll(".e-menu-item.e-focused"),"e-focused"),e&&e.classList.contains("e-menu-item")&&sf.base.addClass([e],"e-focused")})))},i.prototype.processEnter=function(t){var i=t.target;if(i&&sf.base.closest(i,".e-grid"))return 13!==t.keyCode||t.shiftKey||t.ctrlKey?13===t.keyCode&&t.shiftKey&&!t.ctrlKey?this.parent.options.enableValueSorting&&(this.event=t,i.click()):13===t.keyCode&&!t.shiftKey&&t.ctrlKey&&this.parent.options.hyperlinkSettings&&i.querySelector("a")&&i.querySelector("a").click():i.querySelector("."+e)?(this.event=t,i.querySelector("."+e).click()):i.classList.contains("e-valuescontent")&&i.dispatchEvent(new MouseEvent("dblclick",{view:window,bubbles:!0,cancelable:!0})),void t.preventDefault()},i.prototype.toggleFieldList=function(e){var t=this.parent,i=e.target;if(t&&t.element&&t.options.showFieldList&&t.pivotFieldListModule){t.pivotFieldListModule=t.pivotFieldListModule&&t.pivotFieldListModule.blazor__instance?t.pivotFieldListModule.blazor__instance:t.pivotFieldListModule;var s=t.element.querySelector("#"+t.element.id+"fieldlist");if(t.options.showToolbar&&t.toolbarModule&&s&&s.querySelector("button")&&t.pivotFieldListModule.parentElement.classList.contains("e-popup-close"))return s.click(),void e.preventDefault();if(t.element.querySelector(".e-toggle-field-list")){if(!t.element.querySelector(".e-toggle-field-list").classList.contains("e-hide"))return t.element.querySelector(".e-toggle-field-list").click(),void e.preventDefault();if((t.element.querySelector(".e-toggle-field-list").classList.contains("e-hide")||t.options.showToolbar)&&i&&sf.base.closest(i,".e-pivotview")&&t.pivotFieldListModule.parentElement&&t.pivotFieldListModule.parentElement.classList.contains(h)){var n=t.pivotFieldListModule.parentElement.blazor__instance;n&&!n.closeOnEscape?n.dotNetRef.invokeMethodAsync("CloseDialog",{altKey:e.altKey,ctrlKey:e.ctrlKey,code:e.code,key:e.key,location:e.location,repeat:e.repeat,shiftKey:e.shiftKey,metaKey:e.metaKey,type:e.type}):t.closeDialog(t.pivotFieldListModule.parentElement,e)}}}},i.prototype.destroy=function(){this.pivotViewKeyboardModule&&this.pivotViewKeyboardModule.destroy()},i}(),x=function(){function e(e){this.isPopupClicked=!1,this.shiftLockedPos=[],this.savedSelectedCellsPos=[],this.cellSelectionPos=[],this.parent=e,this.parent.selectionModule=this}return e.prototype.addInternalEvents=function(){this.wireEvents()},e.prototype.wireEvents=function(){this.unWireEvents(),sf.base.EventHandler.add(this.parent.element,this.parent.isAdaptive?"touchend":"click",this.mouseClickHandler,this)},e.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.parent.element,this.parent.isAdaptive?"touchend":"click",this.mouseClickHandler)},e.prototype.mouseClickHandler=function(e){(3===e.which||0===e.which)&&(this.lastCellClicked=e.target);var t=e.target;if((t.classList.contains(i)||t.classList.contains("e-headercelldiv")||t.classList.contains(d)||t.classList.contains("e-rowcell")||t.classList.contains("e-stackedheadercelldiv")||t.classList.contains("e-headertext")||t.classList.contains("e-stackedheadertext"))&&"pivot"===this.parent.options.dataType){t.classList.contains(i)||t.classList.contains(d)||t.classList.contains("e-rowcell")?t:t.classList.contains("e-stackedheadercelldiv")||t.classList.contains("e-cellvalue")||t.classList.contains("e-headercelldiv")||t.classList.contains("e-ascending")||t.classList.contains("e-descending")?t.parentElement:t.classList.contains("e-headertext")&&t.parentElement.parentElement,this.cellClicked(t,e)}else this.cellClicked(t,e)},e.prototype.cellClicked=function(e,t){var s=this,n=null;if(e.classList.contains(i)||e.classList.contains("e-stackedheadercell")||e.classList.contains("e-stackedheadercelldiv")||e.classList.contains("e-stackedheadertext")||e.classList.contains("e-pivotcell-container")||e.classList.contains("e-headertext")||e.classList.contains("e-headercelldiv")?n=sf.base.closest(e,"th."+i):e.classList.contains("e-cellvalue")||e.classList.contains("e-rowcell")?n=sf.base.closest(e,"td.e-rowcell"):e.classList.contains("e-rowselect")&&(e.classList.contains("e-spanclicked")?this.isPopupClicked=!1:this.isPopupClicked=!0),n){var o=Number(n.getAttribute("aria-colindex")),r=Number(n.getAttribute("index")),a=Number(n.getAttribute("aria-colspan"));this.parent.gridSettings.allowSelection&&(("Both"===this.parent.gridSettings.selectionSettings.mode?!n.classList.contains("e-rowcell"):"Cell"===this.parent.gridSettings.selectionSettings.mode?n.classList.contains(c):"Row"!==this.parent.gridSettings.selectionSettings.mode)?this.parent.dotNetRef.invokeMethodAsync("ColumnSelectHandler",r,o,t).then((function(e){s.clearSelection(n,t,o,r),e||(s.clearSelection(n,t,o,r),s.applyColumnSelection(t,n,o,o+(a>0?a-1:0),r),s.afterColumnSelected(n,t,o,r))})):(this.clearSelection(n,t,o,r),this.afterColumnSelected(n,t,o,r))),this.parent.gridSettings.allowSelection||e.classList.contains("e-expand")||e.classList.contains("e-collapse")||this.parent.dotNetRef.invokeMethodAsync("CellClickedHandler",r,o,t)}},e.prototype.afterColumnSelected=function(e,t,i,s){this.getSelectedCellsPos();var n=JSON.stringify(this.savedSelectedCellsPos);("Both"===this.parent.gridSettings.selectionSettings.mode?!e.classList.contains("e-rowcell"):"Cell"===this.parent.gridSettings.selectionSettings.mode?e.classList.contains(c):"Row"!==this.parent.gridSettings.selectionSettings.mode)&&(this.parent.dotNetRef.invokeMethodAsync("CellClickedHandler",s,i,t),this.parent.dotNetRef.invokeMethodAsync("SelectHandler",i,s,n),this.savedSelectedCellsPos=[])},e.prototype.clearSelection=function(e,t,i,s){if(sf.base.isNullOrUndefined(e))for(var n=0,o=[].slice.call(this.parent.element.querySelectorAll("."+u+", ."+p));n<o.length;n++){var r=o[n];sf.base.removeClass([r],["e-active",u,p])}else if(!t.shiftKey&&!t.ctrlKey||"Single"===this.parent.gridSettings.selectionSettings.type)if("Cell"===this.parent.gridSettings.selectionSettings.mode)e.classList.contains(c)?sf.base.removeClass(this.parent.element.querySelectorAll(".e-rowcell."+p),p):sf.base.removeClass(this.parent.element.querySelectorAll("."+c+".e-active"),["e-active",u]);else if("Both"===this.parent.gridSettings.selectionSettings.mode||"Row"===this.parent.gridSettings.selectionSettings.mode)if(e.classList.contains("e-rowcell"))for(var a=0,l=[].slice.call(this.parent.element.querySelectorAll("."+u+", ."+p));a<l.length;a++){r=l[a];sf.base.removeClass([r],["e-active",u,p])}else sf.base.removeClass(this.parent.element.querySelectorAll("."+p),p)},e.prototype.applyColumnSelection=function(e,t,s,n,o){var r=Number(t.getAttribute("index"));if(!t.classList.contains(d)||"Cell"!==this.parent.gridSettings.selectionSettings.mode||t.classList.contains(c)){var a=e.ctrlKey;"Multiple"===this.parent.gridSettings.selectionSettings.type&&null!==this.parent.element.querySelector(".e-rowselect")&&(this.isPopupClicked?(this.parent.element.querySelector(".e-rowselect").classList.add("e-spanclicked"),a=!0):(this.parent.element.querySelector(".e-rowselect").classList.remove("e-spanclicked"),a=!1));for(var l=[],h=this.parent.gridSettings.selectionSettings.type,f=t.classList.contains("e-active"),g=[],m={},v=s;v<=n;v++)g.push(v.toString());if(a&&"Single"!==h)f=!1;else{for(var b=0,y=[].slice.call(this.parent.element.querySelectorAll(".e-active"));b<y.length;b++){var M=y[b];sf.base.removeClass([M],["e-active",u]),-1===g.indexOf(M.getAttribute("aria-colindex"))&&(f=!1);var C=Number(M.getAttribute("aria-colindex"));m[C]=C}g=Object.keys(m).length>0?Object.keys(m).sort((function(e,t){return e-t})):g}"Multiple"===h&&e.shiftKey?(this.shiftLockedPos=0===this.shiftLockedPos.length?g:this.shiftLockedPos,Number(this.shiftLockedPos[0])<=s?s=Number(this.shiftLockedPos[0]):n=n<Number(this.shiftLockedPos[this.shiftLockedPos.length-1])?Number(this.shiftLockedPos[this.shiftLockedPos.length-1]):n):this.shiftLockedPos=[];var w=[];if(e.ctrlKey&&"Both"===this.parent.gridSettings.selectionSettings.mode&&"Multiple"===h&&!t.classList.contains(d))for(var S=0,N=[].slice.call(this.parent.element.querySelectorAll("."+d+"."+p));S<N.length;S++){M=N[S];w.push(M.getAttribute("index"))}for(var x=s;x<=n;)l.push('[aria-colindex="'+x+'"]'+("Cell"===this.parent.gridSettings.selectionSettings.mode?'[index="'+o+'"]':"")),x++;if(!f){o=t.classList.contains(i)?o:this.parent.scrollPageInfo.rowStartPos-1;for(var O=t.classList.contains("e-active"),E=0,I=[].slice.call(this.parent.element.querySelectorAll(l.toString()));E<I.length;E++){M=I[E];Number(M.getAttribute("index"))>=o&&(O&&a&&-1===w.indexOf(r.toString())?sf.base.removeClass([M],["e-active",u]):sf.base.addClass([M],["e-active",u]))}}}},e.prototype.getSelectedCellsPos=function(){for(var e=0,t=[].slice.call(this.parent.element.querySelectorAll("."+u));e<t.length;e++){var i=t[e];this.savedSelectedCellsPos.push({rowIndex:i.getAttribute("index"),colIndex:i.getAttribute("aria-colindex")})}for(var s=0,n=[].slice.call(this.parent.element.querySelectorAll("."+p));s<n.length;s++){i=n[s];this.cellSelectionPos.push({rowIndex:i.getAttribute("index"),colIndex:i.getAttribute("aria-colindex")})}},e.prototype.destroy=function(){this.unWireEvents()},e}(),O=function(){function e(e){this.previousValues={top:0,left:0},this.frozenPreviousValues={top:0,left:0},this.eventType="",this.isScrolling=!1,this.parent=e,this.parent.virtualScrollModule=this}return e.prototype.addInternalEvents=function(){this.wireEvents()},e.prototype.wireEvents=function(){if(this.unWireEvents(),"Chart"!==this.parent.displayOptions.view){var e=this.parent.element.querySelector(".e-movablecontent"),t=this.parent.element.querySelector(".e-frozencontent"),i=this.parent.element.querySelector(".e-movableheader"),s=e.parentElement.parentElement.querySelector(".e-movablescrollbar");sf.base.EventHandler.clearEvents(e),sf.base.EventHandler.clearEvents(t);var n=this.parent.isAdaptive?e:e.parentElement.parentElement.querySelector(".e-movablescrollbar");sf.base.EventHandler.add(n,"scroll touchmove pointermove",this.onHorizondalScroll(i,e,t),this),sf.base.EventHandler.add(e.parentElement,"scroll wheel touchmove pointermove keyup keydown",this.onVerticalScroll(t,e),this),sf.base.EventHandler.add(e.parentElement.parentElement,"mouseup touchend",this.common(i,e,t),this),sf.base.EventHandler.add(s,"scroll",this.onCustomScrollbarScroll(e,i),this),sf.base.EventHandler.add(e,"scroll",this.onCustomScrollbarScroll(s,i),this),sf.base.EventHandler.add(i,"scroll",this.onCustomScrollbarScroll(s,e),this),sf.base.EventHandler.add(i,"touchstart pointerdown",this.setPageXY(),this),sf.base.EventHandler.add(i,"touchmove pointermove",this.onTouchScroll(i,e,t),this),sf.base.EventHandler.add(e,"touchstart pointerdown",this.setPageXY(),this),sf.base.EventHandler.add(e,"touchmove pointermove",this.onTouchScroll(i,e,t),this)}},e.prototype.unWireEvents=function(){var e=this.parent.element.querySelector(".e-movablecontent"),t=this.parent.element.querySelector(".e-frozencontent"),i=this.parent.element.querySelector(".e-movableheader"),s=e.parentElement.parentElement.querySelector(".e-movablescrollbar"),n=this.parent.isAdaptive?e:e.parentElement.parentElement.querySelector(".e-movablescrollbar");sf.base.EventHandler.remove(n,"scroll touchmove pointermove",this.onHorizondalScroll(i,e,t)),sf.base.EventHandler.remove(e.parentElement,"scroll wheel touchmove pointermove keyup keydown",this.onVerticalScroll(t,e)),sf.base.EventHandler.remove(e.parentElement.parentElement,"mouseup touchend",this.common(i,e,t)),sf.base.EventHandler.remove(s,"scroll",this.onCustomScrollbarScroll(e,i)),sf.base.EventHandler.remove(e,"scroll",this.onCustomScrollbarScroll(s,i)),sf.base.EventHandler.remove(i,"scroll",this.onCustomScrollbarScroll(s,e)),sf.base.EventHandler.remove(i,"touchstart pointerdown",this.setPageXY()),sf.base.EventHandler.remove(i,"touchmove pointermove",this.onTouchScroll(i,e,t)),sf.base.EventHandler.remove(e,"touchstart pointerdown",this.setPageXY()),sf.base.EventHandler.remove(e,"touchmove pointermove",this.onTouchScroll(i,e,t))},e.prototype.onWheelScroll=function(e,t){var i=this,s=e;return function(e){var t=s.parentElement.scrollTop+(1===e.deltaMode?30*e.deltaY:e.deltaY);i.frozenPreviousValues.top!==t&&(e.preventDefault(),i.frozenPreviousValues.top=t,i.eventType=e.type)}},e.prototype.getPointXY=function(e){var t={x:0,y:0};return e.touches&&e.touches.length?(t.x=e.touches[0].pageX,t.y=e.touches[0].pageY):(t.x=e.pageX,t.y=e.pageY),t},e.prototype.onCustomScrollbarScroll=function(e,t){var i=this,s=e,n=t;return function(e){if(null!==i.parent.element.querySelector(".e-movablecontent").parentElement.querySelector("tbody")){var t=e.target.scrollLeft;i.previousValues.left!==t&&(s.scrollLeft=t,n.scrollLeft=t,i.previousValues.left=t)}}},e.prototype.onTouchScroll=function(e,t,i){var s=this,n=t;return function(i){if("mouse"!==i.pointerType){var o=s.getPointXY(i),r=n.parentElement.scrollTop+(s.pageXY.y-o.y),a=s.parent.isAdaptive?t:n.parentElement.parentElement.querySelector(".e-movablescrollbar"),l=a.scrollLeft+(s.pageXY.x-o.x);s.frozenPreviousValues.left===l||l<0||(e.scrollLeft=l,a.scrollLeft=l,s.pageXY.x=o.x,s.frozenPreviousValues.left=l,s.frozenPreviousValues.top===r||r<0||(s.pageXY.y=o.y,s.frozenPreviousValues.top=r,s.eventType=i.type))}}},e.prototype.update=function(e,t,i,s,n){var o=this;if(this.isScrolling=!0,this.parent.pageSettings)if("vertical"===this.direction){var r="pivot"===this.parent.options.dataType&&"row"===this.parent.dataSourceSettings.valueAxis?this.parent.dataSourceSettings.values.length:1,a=this.parent.pageSettings.rowPageSize*r*this.parent.gridSettings.rowHeight,l=Math.ceil(i/a);if(this.parent.scrollPosObject.vertical===l||this.parent.pageSettings.rowPageSize>=this.parent.scrollPageInfo.rowCount)return;this.parent.scrollPosObject.vertical=l,this.parent.pageSettings.currentRowPage=l>1?l:1;var h=0;"pivot"===this.parent.options.dataType&&this.parent.dotNetRef.invokeMethodAsync("UpdateScrollInfo",l,this.direction).then((function(e){o.parent.getScrollInfo(e),h=o.parent.scrollPageInfo.rowStartPos;var t=Math.ceil(h/(o.parent.pageSettings.rowPageSize*r)),i=a*t-o.parent.scrollPageInfo.rowFirstLvl*r*o.parent.gridSettings.rowHeight;o.parent.scrollPosObject.verticalSection=i}))}else{var d="pivot"===this.parent.options.dataType&&"column"===this.parent.dataSourceSettings.valueAxis?this.parent.dataSourceSettings.values.length:1,c=this.parent.pageSettings.columnPageSize*d*this.parent.gridSettings.columnWidth;l=Math.ceil(s/c);if(this.parent.scrollPosObject.horizontal===l)return;this.parent.scrollPosObject.horizontal=l,this.parent.pageSettings.currentColumnPage=l>1?l:1;var p=0;"pivot"===this.parent.options.dataType&&this.parent.dotNetRef.invokeMethodAsync("UpdateScrollInfo",l,this.direction).then((function(e){o.parent.getScrollInfo(e),p=o.parent.scrollPageInfo.colStartPos;var t=Math.ceil(p/(o.parent.pageSettings.columnPageSize*d)),i=c*t-o.parent.scrollPageInfo.colFirstLvl*d*o.parent.gridSettings.columnWidth;o.parent.scrollPosObject.horizontalSection=i}))}},e.prototype.setPageXY=function(){var e=this;return function(t){"mouse"!==t.pointerType&&(e.pageXY=e.getPointXY(t))}},e.prototype.common=function(e,t,i){var s=this;return function(i){s.parent.isAdaptive||t.parentElement.parentElement.querySelector(".e-movablescrollbar");s.update(e,t,t.parentElement.scrollTop*s.parent.verticalScrollScale,t.scrollLeft*s.parent.horizontalScrollScale,i)}},e.prototype.onHorizondalScroll=function(e,t,i){var s,n=this;return function(i){var o=n.parent.isAdaptive?t:t.parentElement.parentElement.querySelector(".e-movablescrollbar"),r=t.scrollLeft*n.parent.horizontalScrollScale;if("wheel"!==i.type&&"touchmove"!==i.type&&"wheel"!==n.eventType&&"touchmove"!==n.eventType||(clearTimeout(s),s=setTimeout((function(){r="touchmove"===i.type?t.scrollLeft:r,n.update(e,t,t.parentElement.scrollTop*n.parent.verticalScrollScale,r,i)}),300)),n.previousValues.left!==r){n.scrollDirection=n.direction="horizondal";var a=-(r-n.parent.scrollPosObject.horizontalSection-t.scrollLeft),l=t.querySelector("."+f).style.transform.split(",").length>1?t.querySelector("."+f).style.transform.split(",")[1].trim():"0px)";t.scrollLeft<n.parent.scrollerBrowserLimit&&(sf.base.setStyleAttribute(t.querySelector("."+f),{transform:"translate("+a+"px,"+l}),sf.base.setStyleAttribute(e.querySelector("."+f),{transform:"translate("+a+"px,0px)"}));var h=n.parent.scrollPosObject.horizontalSection>r?-(n.parent.scrollPosObject.horizontalSection-r):r+e.offsetWidth-(n.parent.scrollPosObject.horizontalSection+t.querySelector("."+f).offsetWidth),d=Math.ceil(n.parent.scrollPosObject.horizontalSection/n.parent.horizontalScrollScale)<n.parent.scrollerBrowserLimit;if(n.parent.scrollPosObject.horizontalSection>r||h>1&&d){r>e.clientWidth?(n.parent.scrollPosObject.left<1&&(n.parent.scrollPosObject.left=e.clientWidth),n.parent.scrollPosObject.left=n.parent.scrollPosObject.left-50,h=n.parent.scrollPosObject.horizontalSection>r?h-n.parent.scrollPosObject.left:h+n.parent.scrollPosObject.left):h=-n.parent.scrollPosObject.horizontalSection,a=-(r-(n.parent.scrollPosObject.horizontalSection+h)-t.parentElement.parentElement.querySelector(".e-movablescrollbar").scrollLeft);var c=n.parent.gridSettings.columnWidth*n.parent.scrollPageInfo.columnCount;c>n.parent.scrollerBrowserLimit&&(n.parent.horizontalScrollScale=c/n.parent.scrollerBrowserLimit,c=n.parent.scrollerBrowserLimit),a>c&&a>r&&(a=r,h=0),sf.base.setStyleAttribute(t.querySelector("."+f),{transform:"translate("+a+"px,"+l}),sf.base.setStyleAttribute(e.querySelector("."+f),{transform:"translate("+a+"px,0px)"}),n.parent.scrollPosObject.horizontalSection=n.parent.scrollPosObject.horizontalSection+h}var p=o.scrollWidth-(o.scrollLeft+o.offsetWidth);if(p<=0){var u=t.querySelector(".e-virtualtrack");u.style.display="none";var g=t.scrollWidth-(t.scrollLeft+t.offsetWidth);u.style.display="";var m=t.scrollWidth-(t.scrollLeft+t.offsetWidth);n.parent.scrollPosObject.horizontalSection-=g>p?g:-m,a=o.scrollLeft>n.parent.scrollerBrowserLimit?Number(t.querySelector("."+f).style.transform.split(",")[0].split("px")[0].trim()):-(o.scrollLeft*n.parent.horizontalScrollScale-n.parent.scrollPosObject.horizontalSection-o.scrollLeft),sf.base.setStyleAttribute(t.querySelector("."+f),{transform:"translate("+a+"px,"+l}),sf.base.setStyleAttribute(e.querySelector("."+f),{transform:"translate("+a+"px,0px)"})}n.previousValues.left=r,n.frozenPreviousValues.left=r,n.eventType="",e.scrollLeft=t.scrollLeft}}},e.prototype.onVerticalScroll=function(e,t){var i,s=this;return function(n){var o=t.parentElement.scrollTop*s.parent.verticalScrollScale;if("wheel"===n.type||"touchmove"===n.type||"wheel"===s.eventType||"touchmove"===s.eventType||"keyup"===n.type||"keydown"===n.type){s.parent.isAdaptive||t.parentElement.parentElement.querySelector(".e-movablescrollbar");clearTimeout(i),i=setTimeout((function(){s.update(null,t,t.parentElement.scrollTop*s.parent.verticalScrollScale,t.scrollLeft*s.parent.horizontalScrollScale,n)}),300)}if(s.previousValues.top!==o){s.scrollDirection=s.direction="vertical";var r=-(o-s.parent.scrollPosObject.verticalSection-t.parentElement.scrollTop),a=t.querySelector("."+f).style.transform.split(",")[0].trim();r>s.virtualDiv.clientHeight&&(r=s.virtualDiv.clientHeight),t.parentElement.scrollTop<s.parent.scrollerBrowserLimit&&(sf.base.setStyleAttribute(e.querySelector("."+f),{transform:"translate(0px,"+r+"px)"}),sf.base.setStyleAttribute(t.querySelector("."+f),{transform:a+","+r+"px)"}));var l=s.parent.scrollPosObject.verticalSection>o?-(s.parent.scrollPosObject.verticalSection-o):o+e.parentElement.clientHeight-(s.parent.scrollPosObject.verticalSection+e.querySelector("."+f).offsetHeight),h=Math.ceil(s.parent.scrollPosObject.verticalSection/s.parent.verticalScrollScale)<s.parent.scrollerBrowserLimit;if(s.parent.scrollPosObject.verticalSection>o||l>1&&h){o>e.parentElement.clientHeight?(s.parent.scrollPosObject.top<1&&(s.parent.scrollPosObject.top=e.parentElement.clientHeight),s.parent.scrollPosObject.top=s.parent.scrollPosObject.top-50,l=s.parent.scrollPosObject.verticalSection>o?l-s.parent.scrollPosObject.top:l+s.parent.scrollPosObject.top):l=-s.parent.scrollPosObject.verticalSection;var d=s.parent.element.querySelector(".e-movablecontent").querySelector("."+f);r=-(o-(s.parent.scrollPosObject.verticalSection+l)-t.parentElement.scrollTop);var c=s.parent.gridSettings.rowHeight*s.parent.scrollPageInfo.rowCount+.1-d.clientHeight;c>s.parent.scrollerBrowserLimit&&(s.parent.verticalScrollScale=c/s.parent.scrollerBrowserLimit,c=s.parent.scrollerBrowserLimit),r>c&&r>o&&(r=o,l=0),sf.base.setStyleAttribute(e.querySelector("."+f),{transform:"translate(0px,"+r+"px)"}),sf.base.setStyleAttribute(t.querySelector("."+f),{transform:a+","+r+"px)"}),s.parent.scrollPosObject.verticalSection=s.parent.scrollPosObject.verticalSection+l}s.previousValues.top=o,s.frozenPreviousValues.top=o,s.eventType=""}}},e.prototype.updateScrollInfo=function(e,t,i){if(this.parent.options.enableVirtualization){e.querySelector(".e-movablecontent")&&!e.querySelector(".e-movablecontent").querySelector(".e-virtualtrack")&&(this.virtualDiv=sf.base.createElement("div",{className:"e-virtualtrack"}),e.querySelector(".e-movablecontent").appendChild(this.virtualDiv)),e.querySelector(".e-movableheader")&&!e.querySelector(".e-movableheader").querySelector(".e-virtualtrack")?(this.virtualHeaderDiv=sf.base.createElement("div",{className:"e-virtualtrack"}),e.querySelector(".e-movableheader").appendChild(this.virtualHeaderDiv)):this.virtualHeaderDiv=e.querySelector(".e-movableheader").querySelector(".e-virtualtrack");var s=e.querySelector(".e-movablecontent").querySelector("."+f),n=this.parent.gridSettings.rowHeight*i+.1-s.clientHeight;n>this.parent.scrollerBrowserLimit&&(this.parent.verticalScrollScale=n/this.parent.scrollerBrowserLimit,n=this.parent.scrollerBrowserLimit);var o=this.parent.gridSettings.columnWidth*t;o>this.parent.scrollerBrowserLimit&&(this.parent.horizontalScrollScale=o/this.parent.scrollerBrowserLimit,o=this.parent.scrollerBrowserLimit),sf.base.setStyleAttribute(this.virtualDiv,{height:(n>.1?n:.1)+"px",width:(o>.1?o:.1)+"px"}),sf.base.setStyleAttribute(this.virtualHeaderDiv,{height:0,width:(o>.1?o:.1)+"px"});var r=e.querySelector(".e-movablecontent"),a=e.querySelector(".e-frozencontent"),l=e.querySelector(".e-movableheader");this.parent.isAdaptive&&(r.parentElement.parentElement.querySelector(".e-movablescrollbar").children[0].style.minHeight="1px",r.parentElement.parentElement.querySelector(".e-movablescrollbar").style.minHeight="1px");var h=this.parent.isAdaptive?r:r.parentElement.parentElement.querySelector(".e-movablescrollbar"),d=r.parentElement.scrollTop>this.parent.scrollerBrowserLimit?r.querySelector("."+f).style.transform.split(",")[1].trim():-(r.parentElement.scrollTop*this.parent.verticalScrollScale-this.parent.scrollPosObject.verticalSection-r.parentElement.scrollTop)+"px)",c=h.scrollLeft>this.parent.scrollerBrowserLimit?r.querySelector("."+f).style.transform.split(",")[0].trim()+",":"translate("+-(h.scrollLeft*this.parent.horizontalScrollScale-this.parent.scrollPosObject.horizontalSection-h.scrollLeft)+"px,";sf.base.setStyleAttribute(a.querySelector("."+f),{transform:"translate(0px,"+d}),sf.base.setStyleAttribute(r.querySelector("."+f),{transform:c+d}),sf.base.setStyleAttribute(l.querySelector("."+f),{transform:c+0+"px)"}),e.querySelector(".e-movablechild").style.width=o+(r.parentElement.offsetWidth-r.parentElement.clientWidth)+"px";var p="pivot"===this.parent.options.dataType&&"column"===this.parent.options.dataSourceSettings.valueAxis?this.parent.options.dataSourceSettings.values.length:1,u=this.parent.pageSettings.columnPageSize*p*this.parent.options.gridSettings.columnWidth,g=h.scrollWidth-(h.scrollLeft+h.offsetWidth);if(this.parent&&u>0&&g<=u&&h.scrollLeft>0){this.virtualDiv.style.display="none";var m=r.scrollWidth-(r.scrollLeft+r.offsetWidth);this.virtualDiv.style.display="";var v=r.scrollWidth-(r.scrollLeft+r.offsetWidth);this.parent.scrollPosObject.horizontalSection-=g<=0?m>g?m:-v:v===m?m-g:m<v&&(g===v||g>m)?-(v-m):0,c=h.scrollLeft>this.parent.scrollerBrowserLimit?r.querySelector("."+f).style.transform.split(",")[0].trim()+",":"translate("+-(h.scrollLeft*this.parent.horizontalScrollScale-this.parent.scrollPosObject.horizontalSection-h.scrollLeft)+"px,",sf.base.setStyleAttribute(r.querySelector(".e-table"),{transform:c+d}),sf.base.setStyleAttribute(l.querySelector(".e-table"),{transform:c+0+"px)"})}if(sf.base.closest(e.querySelector(".e-movablechild"),".e-scrollbar")){var b=e.querySelector(".e-movablechild").style.width;sf.base.closest(e.querySelector(".e-movablechild"),".e-scrollbar").style.display=b&&Number(b.replace("px",""))>0?"flex":"none"}this.parent.internalGrid&&this.parent.internalGrid.options&&"auto"!==this.parent.internalGrid.options.height||this.parent.internalGrid.element&&"auto"!==this.parent.internalGrid.element.style.height?(a.style.height=(this.virtualDiv.offsetHeight+s.clientHeight).toString()+"px",r.style.height=(this.virtualDiv.offsetHeight+s.clientHeight).toString()+"px"):(a.style.height=e.querySelector(".e-frozencontent ."+f).toString()+"px",r.style.height=e.querySelector(".e-frozencontent ."+f).toString()+"px")}},e.prototype.destroy=function(){this.unWireEvents()},e}(),E=function(){function e(e){this.keyConfigs={escape:"escape"},this.parent=e,this.event=void 0,this.parent.element.tabIndex=-1===this.parent.element.tabIndex?0:this.parent.element.tabIndex;var t=document.getElementById(this.parent.element.id+"_drillthrough");this.drillThroughKeyboardModule=new sf.base.KeyboardEvents(t,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}return e.prototype.keyActionHandler=function(e){switch(e.action){case"escape":this.processClose(e)}},e.prototype.processClose=function(e){var t=e.target;if(t&&sf.base.closest(t,"."+l+"."+h)){var i=sf.base.closest(t,"."+l+"."+h).blazor__instance,s=this;if(i&&!i.closeOnEscape){var n=i.element.getAttribute("data-fieldName");i.dotNetRef.invokeMethodAsync("CloseDialog",{altKey:e.altKey,ctrlKey:e.ctrlKey,code:e.code,key:e.key,location:e.location,repeat:e.repeat,shiftKey:e.shiftKey,metaKey:e.metaKey,type:e.type}).then((function(){if(s.parent.parentElement)for(var t=0,i=[].slice.call(s.parent.parentElement.querySelectorAll(".e-pivot-button"));t<i.length;t++){var o=i[t];if(o.getAttribute("data-uid")===n){o.focus();break}}e.preventDefault()}))}else s.parent.closeDialog(sf.base.closest(t,"."+l+"."+h),e)}},e.prototype.destroy=function(){this.drillThroughKeyboardModule&&!this.drillThroughKeyboardModule.isDestroyed&&this.drillThroughKeyboardModule.destroy()},e}(),I=function(){function t(e,t,i,s){this.scrollPageInfo={rowCount:0,columnCount:0,colFirstLvl:0,rowFirstLvl:0,colStartPos:0,rowStartPos:0},this.verticalScrollScale=1,this.horizontalScrollScale=1,this.scrollerBrowserLimit=8e6,this.scrollPosObject={vertical:0,horizontal:0,verticalSection:0,horizontalSection:0,top:0,left:0,scrollDirection:{direction:"",position:0}},window.sfBlazor=window.sfBlazor,this.element=t,this.dotNetRef=s,this.dataId=e,window.sfBlazor.setCompInstance(this),this.getOptions(t,i),this.initModules()}return t.prototype.getOptions=function(e,t){this.element=e,this.options=t,this.parentElement=e,this.isAdaptive=sf.base.Browser.isDevice,this.internalGrid=t.internalGrid?window.sfBlazor.getCompInstance(t.internalGrid):this.internalGrid,this.pivotFieldListModule=t.fieldListModule?window.sfBlazor.getCompInstance(t.fieldListModule):this.pivotFieldListModule,this.fieldList=t.fieldList?t.fieldList:this.fieldList,this.dataSourceSettings=t.dataSourceSettings,this.gridSettings=t.gridSettings,this.editSettings=t.editSettings,this.displayOptions=t.displayOptions,this.enableValueSorting=t.enableValueSorting,this.currentView="Both"===this.displayOptions.view?this.displayOptions.primary:this.displayOptions.view,this.groupingBarSettings=this.options.groupingBarsettings,this.pageSettings=this.options.pageSettings,this.options.scrollPageInfo&&this.getScrollInfo(this.options.scrollPageInfo)},t.prototype.initModules=function(){this.options.showGroupingBar&&(this.groupingBarModule=new v(this)),this.options.showToolbar&&(this.toolbarModule=new y(this)),this.options.allowCalculatedField&&(this.calculatedFieldModule=new b(this)),this.options.enableVirtualization&&(this.virtualScrollModule=new O(this)),this.gridSettings.allowSelection&&(this.selectionModule=new x(this)),this.keyboardModule=new N(this),this.commonActionModule=new S(this),this.contentReady(),this.unWireEvents(),this.wireEvents()},t.prototype.updateModuleProperties=function(){this.options.showGroupingBar&&(this.groupingBarModule?this.groupingBarModule.parent=this.pivotButtonModule.parent=this:this.groupingBarModule=new v(this)),this.options.showToolbar&&(this.toolbarModule?this.toolbarModule.parent=this:this.toolbarModule=new y(this)),this.options.allowCalculatedField&&(this.calculatedFieldModule?this.calculatedFieldModule.parent=this:this.calculatedFieldModule=new b(this)),this.gridSettings.allowSelection&&(this.selectionModule?this.selectionModule.parent=this:this.selectionModule=new x(this)),this.options.enableVirtualization&&(this.virtualScrollModule?this.virtualScrollModule.parent=this:this.virtualScrollModule=new O(this)),this.editSettings.allowEditing&&this.drillThroughModule&&(this.drillThroughModule.parent=this),this.keyboardModule.parent=this.commonActionModule.parent=this.commonActionModule.keyboardModule.parent=this},t.prototype.getChartHeight=function(e){var t;return this.element.querySelector(".e-pivotchart")&&this.element.querySelector(".e-chart-grouping-bar")&&(this.element.querySelector(".e-chart-grouping-bar").style.width=this.element.querySelector(".e-pivotchart").style.width,e=this.element.querySelector(".e-chart-grouping-bar").clientHeight),this.options.showToolbar&&this.options.showGroupingBar?t=(e-(this.element.querySelector(".e-pivot-toolbar")?this.element.querySelector(".e-pivot-toolbar").clientHeight:42)-(this.element.querySelector(".e-chart-grouping-bar")?this.element.querySelector(".e-chart-grouping-bar").clientHeight:76)).toString():this.options.showToolbar?t=(e-(this.element.querySelector(".e-pivot-toolbar")?this.element.querySelector(".e-pivot-toolbar").clientHeight:42)).toString():this.options.showGroupingBar&&(t=(e-(this.element.querySelector(".e-chart-grouping-bar")?this.element.querySelector(".e-chart-grouping-bar").clientHeight:76)).toString()),t},t.prototype.contentReady=function(){if(this.updateModuleProperties(),this.options.renderGrid){if(this.options.showGroupingBar&&this.groupingBarModule)this.groupingBarModule.refreshUI();else if(this.element&&this.element.querySelectorAll(".e-axis-container").length>0)for(var e=0,t=[].slice.call(this.element.querySelectorAll(".e-axis-container"));e<t.length;e++){var i=t[e];sf.base.closest(i,".e-pivotfieldlist-container")||sf.base.remove(i)}this.options.enableVirtualization&&this.virtualScrollModule&&this.virtualScrollModule.addInternalEvents(),this.gridSettings.allowSelection&&this.selectionModule&&this.selectionModule.addInternalEvents()}},t.prototype.getSelectedCellDom=function(e){return e?JSON.stringify(window.sfBlazor.getDomObject("currentCell",e)):null},t.prototype.selectedCell=function(e,t,i){return i?this.getSelectedCellDom(this.element.querySelector("."+(0===e?"e-frozenheader":"e-movableheader")+' th[index="'+t+'"][aria-colindex="'+e+'"]')):this.getSelectedCellDom(this.element.querySelector("."+(0===e?"e-frozencontent":"e-movablecontent")+' td[index="'+t+'"][aria-colindex="'+e+'"]'))},t.prototype.hyperlinkCellclick=function(e,t){if(null!=e){e.currentCell=window.sfBlazor.getElementByXpath(t);var i=e.currentCell.getAttribute("data-url")?e.currentCell.getAttribute("data-url"):e.currentCell.querySelector("a").getAttribute("data-url");window.open(i)}},t.prototype.createSheet=function(e,t,i){var s=".format"+t+i;this.createStyleSheet().insertRule(s+", "+s+" .e-cellvalue{"+e+"}",0)},t.prototype.getScrollInfo=function(e){e&&(this.scrollPageInfo.colFirstLvl=e.colFirstLvl,this.scrollPageInfo.rowFirstLvl=e.rowFirstLvl,this.scrollPageInfo.columnCount=e.columnCount,this.scrollPageInfo.rowCount=e.rowCount,this.scrollPageInfo.colStartPos=e.colStartPos,this.scrollPageInfo.rowStartPos=e.rowStartPos)},t.prototype.exportDocument=function(e,t){if(navigator.msSaveBlob){for(var i=window.atob(t),s=new Uint8Array(i.length),n=0;n<i.length;n++)s[n]=i.charCodeAt(n);var o=new Blob([s.buffer],{type:"application/octet-stream"});navigator.msSaveBlob(o,e)}else{var r=document.createElement("a");r.download=e,r.href="data:application/octet-stream;base64,"+t,document.body.appendChild(r),r.click(),document.body.removeChild(r)}},t.prototype.createStyleSheet=function(){var e=document.createElement("style");return e.appendChild(document.createTextNode("")),document.head.appendChild(e),e.sheet},t.prototype.getSelectedCells=function(){for(var e=[],t=0,i=[].slice.call(this.element.querySelectorAll("."+p+",."+u));t<i.length;t++){var s=i[t],n=Number(s.getAttribute("aria-colindex")),o=Number(s.getAttribute("index")),r={};sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(o)||(r.index=o,r["aria-colindex"]=n,e.push(r))}return JSON.stringify(e)},t.prototype.onContextMenuOpen=function(){if(this.options.allowGrouping&&this.lastCellClicked){var e=sf.base.closest(this.lastCellClicked,"td."+d+",th."+c);if(this.lastCellClicked=void 0,e&&!e.classList.contains("e-valuesheader")){var t=Number(e.getAttribute("aria-colindex")),i=Number(e.getAttribute("index")),s={};if(!sf.base.isNullOrUndefined(t)&&!sf.base.isNullOrUndefined(i))return s.index=i,s["aria-colindex"]=t,JSON.stringify(s)}return null}return null},t.prototype.mouseRclickHandler=function(e){this.lastCellClicked=e.target},t.prototype.mouseClickHandler=function(e){this.element.querySelectorAll(".e-btn-focused").length>0&&sf.base.removeClass(this.element.querySelectorAll(".e-btn-focused"),"e-btn-focused"),this.element.querySelector("."+r)&&this.element.querySelector("."+r).querySelectorAll(".e-menu-item.e-focused").length>0&&sf.base.removeClass(this.element.querySelector("."+r).querySelectorAll(".e-menu-item.e-focused"),"e-focused");var t=e.target;if(this.enableValueSorting&&"pivot"===this.options.dataType&&(t.classList.contains("e-sortfilterdiv")||t.classList.contains("e-stackedheadertext")||t.classList.contains("e-stackedheadercelldiv")||t.classList.contains("e-headertext")||t.classList.contains("e-stackedheadercelldiv")||t.classList.contains("e-headercelldiv")||t.classList.contains(i)||t.classList.contains("e-cellvalue")||t.classList.contains(c)||t.classList.contains(d)||t.classList.contains("e-pivotcell-container"))){if((o=sf.base.closest(t,"td."+d+",th."+c))&&(sf.base.closest(o,".e-movableheader")&&"column"===this.dataSourceSettings.valueAxis||sf.base.closest(o,"tr.e-row")&&"row"===this.dataSourceSettings.valueAxis&&(o.classList.contains(d)||o.classList.contains("e-stot")))){if(this.enableValueSorting){var s=Number(o.getAttribute("aria-colindex")),n=Number(o.getAttribute("index"));"column"===this.dataSourceSettings.valueAxis&&(this.dataSourceSettings.values.length>1||this.dataSourceSettings.alwaysShowValueHeader)&&(s=Number(o.getAttribute("aria-colindex"))+Number(o.getAttribute("aria-colspan"))-1),this.dotNetRef.invokeMethodAsync("MouseClickHandler",n,s)}e.preventDefault()}}else if(!this.gridSettings.allowSelection){var o;if(null!==(o=sf.base.closest(t,"td."+d+",th."+c+",td.e-rowcell"))){s=Number(o.getAttribute("aria-colindex")),n=Number(o.getAttribute("index"));t.classList.contains("e-expand")||t.classList.contains("e-collapse")||this.dotNetRef.invokeMethodAsync("CellClickedHandler",n,s,e)}}},t.prototype.getHeightAsNumber=function(){var e;return isNaN(this.options.height)?this.options.height.toString().indexOf("%")>-1?e=parseFloat(this.options.height.toString())/100*this.element.offsetHeight:this.options.height.toString().indexOf("px")>-1?e=Number(this.options.height.toString().split("px")[0]):"auto"===this.options.height&&(e=this.element.offsetHeight):e=Number(this.options.height),e<this.getminHeightAsNumber()&&(e=this.getminHeightAsNumber()),e},t.prototype.getminHeightAsNumber=function(){var e;return isNaN(this.options.minHeight)?this.options.minHeight.toString().indexOf("%")>-1?e=parseFloat(this.options.minHeight.toString())/100*this.element.offsetHeight:this.options.minHeight.toString().indexOf("px")>-1?e=Number(this.options.minHeight.toString().split("px")[0]):"auto"===this.options.minHeight&&(e=this.element.offsetHeight):e=300,e},t.prototype.calculateGridHeight=function(e,t,i){var s=this.options.height,n=this.getHeightAsNumber(),o=t*this.gridSettings.rowHeight;isNaN(n)&&(n=n>this.getminHeightAsNumber()?n:this.getminHeightAsNumber());var a=this.element.getBoundingClientRect(),l={width:a.width.toString(),height:a.height.toString(),clientWidth:this.element.clientWidth.toString(),clientHeight:this.element.clientHeight.toString(),gridHeight:s?s.toString():s};if("auto"===this.gridSettings.height&&n&&this.element.querySelector(".e-gridheader")){if(s=n-(i*this.gridSettings.rowHeight+(this.element.querySelector(".e-gridheader").offsetHeight-this.element.querySelector(".e-headercontent").offsetHeight)+(this.element.querySelector(".e-grouping-bar")?this.element.querySelector(".e-grouping-bar").offsetHeight:0)+(this.element.querySelector("."+r)?this.element.querySelector("."+r).clientHeight:0)+(this.element.querySelector(".pivot-pager-container")?this.element.querySelector(".pivot-pager-container").offsetHeight:0))-1,e){var h=this.internalGrid&&this.internalGrid.options&&!isNaN(this.internalGrid.options.height)?Number(this.internalGrid.options.height):this.element.querySelector(".e-movablecontent").offsetHeight,d=this.element.querySelector(".e-movablecontent ."+f).offsetWidth,c=this.element.querySelector(".e-movablecontent").offsetWidth<d;if(s>=o&&(!c||s>=h)&&!(h<o)&&!!!(c&&s-o<18))return l.gridHeight="auto",JSON.stringify(l)}else if(s>t*this.gridSettings.rowHeight)return l.gridHeight="auto",JSON.stringify(l)}else s=this.gridSettings.height;return l.gridHeight=s<this.gridSettings.rowHeight?this.gridSettings.rowHeight.toString():o<s?o.toString():s.toString(),JSON.stringify(l)},t.prototype.updateGridUI=function(e,t,i,s){if(t&&this.getOptions(e,t),this.options.showGroupingBar&&this.groupingBarModule)this.groupingBarModule.refreshUI();else{var n=e.querySelector(".e-frozenheader").querySelector(".e-columnheader");n&&n.querySelector(".e-rhandler")&&(n.style.height=n.querySelector(".e-rhandler").style.height="auto",n.style.height=n.querySelector(".e-rhandler").style.height=e.querySelector(".e-headercontent").offsetHeight+"px")}if(e.querySelector(".e-movableheader ."+f)&&"0px"===e.querySelector(".e-movableheader ."+f).style.width&&(e.querySelector(".e-movablecontent ."+f).style.width=e.querySelector(".e-movableheader ."+f).style.width=""),e.querySelector(".e-movableheader ."+f+" th.e-firstcell.e-lastcell")&&e.querySelector(".e-movableheader ."+f+" th.e-firstcell.e-lastcell").offsetWidth<=0){var o=e.querySelector(".e-movableheader ."+f+" colgroup").children,r=e.querySelector(".e-movablecontent ."+f+" colgroup").children,a=sf.base.formatUnit(this.options.gridSettings.columnWidth);o.length>1&&"auto"===o[o.length-1].style.width&&(o[o.length-1].style.width=a),r.length>1&&"auto"===r[r.length-1].style.width&&(r[r.length-1].style.width=a)}var l=e.querySelector(".e-frozenheader ."+f),h=e.querySelector(".e-frozencontent ."+f);if(l){var d=l.querySelector("colgroup").children[0].style.width;l.style.width=d}if(h){var c=h.querySelector("colgroup").children[0].style.width;h.style.width=c,e.querySelector(".e-frozenscrollbar")&&(e.querySelector(".e-frozenscrollbar").style.width=c)}t&&this.virtualScrollModule&&this.virtualScrollModule.updateScrollInfo(e,i,s);var p=e.querySelector(".e-gridcontent .e-content");if(p){var u=!(p.scrollHeight>p.clientHeight);u&&sf.base.setStyleAttribute(p,{overflow:"hidden auto"}),e.querySelector(".e-gridheader")&&sf.base.setStyleAttribute(e.querySelector(".e-gridheader"),this.options.enableRtl?{paddingLeft:u?"":"16px"}:{paddingRight:u?"":"16px"}),e.querySelector(".e-headercontent")&&sf.base.setStyleAttribute(e.querySelector(".e-headercontent"),this.options.enableRtl?{borderLeftWidth:u?"":"1px"}:{borderRightWidth:u?"":"1px"})}var g=e.querySelector(".e-movablescrollbar"),m=g&&g.querySelector(".e-movablechild");!g||!m||Number(m.style.width.split("px")[0])>Number(g.style.width.split("px")[0])||(e.querySelector(".e-scrollbar").style.display="none",e.querySelector(".e-gridcontent .e-frozencontent").style.borderBottom="0px")},t.prototype.updateView=function(e,t){e&&(this.displayOptions=JSON.parse(t),"Both"===this.displayOptions.view&&"Table"===this.displayOptions.primary?(this.element.querySelector(".e-pivotchart").style.display="none",sf.base.select("#"+this.element.id+"_grid",this.element).style.display="",this.options.showGroupingBar&&this.element.querySelector(".e-pivotchart")&&this.element.querySelector(".e-chart-grouping-bar")&&(this.element.querySelector(".e-chart-grouping-bar").style.display="none",this.element.querySelector(".e-pivot-grouping-bar").style.display="")):"Both"===this.displayOptions.view&&"Chart"===this.displayOptions.primary&&(this.element.querySelector(".e-pivotchart").style.display="",sf.base.select("#"+this.element.id+"_grid",this.element).style.display="none",this.options.showGroupingBar&&this.element.querySelector(".e-pivot-grouping-bar")&&(this.element.querySelector(".e-pivot-grouping-bar").style.display="none",this.element.querySelector(".e-chart-grouping-bar").style.display="")))},t.prototype.updateGridSettings=function(e,t,i){e&&null!==t&&(this.gridSettings=JSON.parse(t)),i&&this.selectionModule&&this.selectionModule.clearSelection()},t.prototype.getClientWidth=function(e,t){return e&&null!==t?document.getElementById(t).clientWidth:null},t.prototype.getTableCellNode=function(e,t,i){if(e){var s=document.elementFromPoint(i,t);if(s){var n=Number(s.getAttribute("aria-colindex")),o=Number(s.getAttribute("index")),r={};if(n&&o)return r.index=o,r["aria-colindex"]=n,JSON.stringify(r)}}return null},t.prototype.updateColorPickerUI=function(t){if(t){for(var i=[].slice.call(t.querySelectorAll(".e-colorpicker-container.e-format-font-color-picker-container")),s=[].slice.call(t.querySelectorAll(".e-colorpicker-container.e-format-back-color-picker-container")),n=0,o=i;n<o.length;n++){var r=o[n];sf.base.addClass([r],["e-format-color-picker","e-format-font-color-picker"]),sf.base.addClass([r.querySelector(".e-colorpicker")],"e-format-font-color"),sf.base.addClass([r.querySelector(".e-selected-color")],e)}for(var a=0,l=s;a<l.length;a++){r=l[a];sf.base.addClass([r],"e-format-color-picker"),sf.base.addClass([r.querySelector(".e-colorpicker")],"e-format-back-color"),sf.base.addClass([r.querySelector(".e-selected-color")],e)}}},t.prototype.onWindowResize=function(){var e=this;this.isDestroyed||(clearTimeout(this.timeOutObj),this.timeOutObj=setTimeout((function(){var t=e.element.getBoundingClientRect();e.dotNetRef.invokeMethodAsync("LayoutRefresh",t.width,t.height)}),500))},t.prototype.drillthroughIntialize=function(e){e&&this.editSettings.allowEditing&&(this.drillThroughModule=new E(this))},t.prototype.closeDialog=function(e,t){return e.querySelector("."+g)?(e.querySelector("."+g).click(),void t.preventDefault()):e.querySelector(".e-cancel-btn")?(e.querySelector(".e-cancel-btn").click(),void t.preventDefault()):void 0},t.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,this.isAdaptive?"touchend":"click",this.mouseClickHandler,this),sf.base.EventHandler.add(this.element,this.isAdaptive?"touchend":"contextmenu",this.mouseRclickHandler,this),window.addEventListener("resize",this.onWindowResize.bind(this),!0)},t.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,this.isAdaptive?"touchend":"click",this.mouseClickHandler),sf.base.EventHandler.remove(this.element,this.isAdaptive?"touchend":"contextmenu",this.mouseRclickHandler),window.removeEventListener("resize",this.onWindowResize.bind(this),!0)},t.prototype.destroy=function(e){this.unWireEvents(),this.keyboardModule.destroy(),this.commonActionModule.destroy(),this.options.showGroupingBar&&(this.groupingBarModule.destroy(),this.pivotButtonModule.destroy()),this.options.showFieldList&&this.pivotFieldListModule&&!this.pivotFieldListModule.isDestroyed&&this.pivotFieldListModule.destroy(e),this.options.enableVirtualization&&this.virtualScrollModule&&this.virtualScrollModule.destroy(),this.gridSettings.allowSelection&&this.selectionModule&&this.selectionModule.destroy(),this.editSettings.allowEditing&&this.drillThroughModule&&this.drillThroughModule.destroy(),this.isDestroyed=e},t}();return{initialize:function(e,t,i,s){sf.base.enableBlazorMode(),new I(e,t,i,s)},initializeFieldList:function(e,t,i,s){sf.base.enableBlazorMode(),new C(e,t,i,s)},contentReady:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);s&&s.element&&(s.options=t,s.getOptions(s.element,t),i||s.contentReady())},getChartHeight:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.getChartHeight(t)},onShowFieldList:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.onShowFieldList(i.element,document.getElementById(t))},removeFieldListIcon:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.removeFieldListIcon(t.element)},updateFieldListIcons:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);s&&s.element&&s.treeRendererModule.updateFieldListIcons(t,i)},setPivotButtonDraggable:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.pivotButtonModule&&(i.options=t,i.getOptions(i.element,t),i.pivotButtonModule.createPivotButtonDrop(),i.pivotButtonModule.setPivotButtonDrag())},isFullRowElement:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);return s&&s.element?s.commonActionModule.isFullRowElement(t,i):JSON.stringify(!1)},updateActiveNode:function(e,t,i){var s=!1,n=window.sfBlazor.getCompInstance(e);return n&&n.element&&(s=n.commonActionModule.updateActiveNode(document.getElementById(t),i)),JSON.stringify(s)},updateSelectedNodes:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);s&&s.element&&s.updateSelectedNodes(window.sfBlazor.getElementByXpath(t),i)},updateFieldList:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.updateFieldList(document.getElementById(t))},renderToolbar:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.toolbarModule.renderToolbar()},focusToolBar:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.toolbarModule.focusToolBar()},getButtonPosition:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);return s&&s.element?JSON.stringify(s.pivotButtonModule.getButtonPosition(window.sfBlazor.getElementByXpath(t),i)):null},selectInputRange:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.toolbarModule.selectInputRange(document.getElementById(t))},copyMdxQuery:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.toolbarModule.copyMdxQuery(document.getElementById(t))},validateInputs:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.commonActionModule.validateInputs(t)},selectedCell:function(e,t,i,s){var n=window.sfBlazor.getCompInstance(e);if(n&&n.element)return n.selectedCell(t,i,s)},hyperlinkCellclick:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);s&&s.element&&s.hyperlinkCellclick(JSON.parse(t),JSON.parse(i))},updateEditOptions:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.calculatedFieldModule.updateEditOptions(t)},accordionClick:function(e,t,i,s){var n=window.sfBlazor.getCompInstance(e);if(n&&n.element)return n.calculatedFieldModule.accordionClick(t,i,s)},getAccordionValue:function(e){var t=window.sfBlazor.getCompInstance(e);if(t&&t.element)return t.calculatedFieldModule.getAccordionValue()},updateAccordionLabel:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.calculatedFieldModule.updateAccordionLabel(t)},getNodeLocation:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);if(s&&s.element)return s.calculatedFieldModule.getNodeLocation(document.getElementById(t),i)},getIconInfo:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);if(s&&s.element)return s.calculatedFieldModule.getIconInfo(t,i)},emptyFieldName:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.calculatedFieldModule.emptyFieldName(t.element.id)},updateCalculatedFields:function(e,t,i,s,n){var o=window.sfBlazor.getCompInstance(e);o&&o.element&&o.calculatedFieldModule.editCalculatedFieldInfo(t,i,s,n)},updateCalculatedFieldExpandIcons:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);return s&&s.element?s.calculatedFieldModule.updateNodeExpandIcons(document.getElementById(t),i):JSON.stringify(!1)},createFormulaDroppable:function(e,t,i,s,n,o,r,a){var l=window.sfBlazor.getCompInstance(e);l&&l.element&&l.calculatedFieldModule.createFormulaDroppable(t,i,s,n,o,r,a)},createSheet:function(e,t,i,s){var n=window.sfBlazor.getCompInstance(e);n&&n.element&&n.createSheet(t,i,s)},updateScrollInfo:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);s&&s.element&&s.virtualScrollModule.updateScrollInfo(s.element,t,i)},getScrollInfo:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.getScrollInfo(t)},exportDocument:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);s&&s.element&&s.exportDocument(t,i)},calculateGridHeight:function(e,t,i,s){var n=window.sfBlazor.getCompInstance(e);return n&&n.element?n.calculateGridHeight(t,i,s):null},onContextMenuOpen:function(e){var t=window.sfBlazor.getCompInstance(e);return t&&t.element?t.onContextMenuOpen():null},getSelectedCells:function(e){var t=window.sfBlazor.getCompInstance(e);return t&&t.element?t.getSelectedCells():null},updateGridUI:function(e,t,i,s){var n=window.sfBlazor.getCompInstance(e);n&&n.element&&n.updateGridUI(n.element,t,i,s)},updateView:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.updateView(i.element,t)},updateGridSettings:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);s&&s.element&&s.updateGridSettings(s.element,t,i)},getClientWidth:function(e,t){var i=window.sfBlazor.getCompInstance(e);return i&&i.element?i.getClientWidth(i.element,t):null},getTableCellNode:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);return s&&s.element?s.getTableCellNode(s.element,t,i):null},updateColorPickerUI:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(i&&i.element)return i.updateColorPickerUI(document.getElementById(t))},drillthroughIntialize:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.drillthroughIntialize(t.element)},getElementInfo:function(e){var t=window.sfBlazor.getCompInstance(e);if(t&&t.element){var i=t.element.getBoundingClientRect(),s={width:i.width,height:i.height,clientWidth:t.element.clientWidth,clientHeight:t.element.clientHeight};return JSON.stringify(s)}return null},getAggregateIcoPosition:function(e,t){var i=window.sfBlazor.getCompInstance(e);return i&&i.element?i.commonActionModule.getAggregateIcoPosition(t):null},destroy:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.destroy(t)}}}()},"./modules/sf-progressbar.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Progressbar=function(){"use strict";var e=function(){function e(e,t,i){window.sfBlazor=window.sfBlazor,this.resizeTo=0,this.element=t,this.dotNetRef=i,this.dataId=e,window.sfBlazor.setCompInstance(this)}return e.prototype.wireEvents=function(){window.addEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.resize.bind(this))},e.prototype.unWireEvents=function(){window.removeEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.resize.bind(this)),this.element=null,this.dotNetRef=null},e.prototype.resize=function(){var e=this;(this.dotNetRef&&!this.cancelResize||this.lineardata&&this.lineardata.isActive||this.circularData&&this.circularData.isActive)&&(this.resizeTo&&clearTimeout(this.resizeTo),sf.base.isNullOrUndefined(this.dotNetRef)||(this.resizeTo=window.setTimeout((function(){e.dotNetRef.invokeMethodAsync("TriggerResize")}),500)))},e.prototype.getPathArc=function(e,t,i,s,n,o,r){var a=this.degreeToLocation(e,t,i,s),l=this.degreeToLocation(e,t,i,n),h="0",d=o?"0":"1";return h=o?(s>=n?s:s+360)-n<=180?"0":"1":(n>=s?n:n+360)-s<=180?"0":"1",r?"M "+e+" "+t+" L "+a.x+" "+a.y+" A "+i+" "+i+"  0  "+h+" "+d+" "+l.x+" "+l.y+" Z":"M"+a.x+" "+a.y+"A"+i+" "+i+" 0 "+h+" "+d+" "+l.x+" "+l.y},e.prototype.degreeToLocation=function(e,t,i,s){var n=(s-90)*(Math.PI/180);return{x:e+i*Math.cos(n),y:t+i*Math.sin(n)}},e.prototype.effect=function(e,t,i,s,n){return(n?i:-i)*Math.cos(e/s*(Math.PI/2))+(t+(n?-i:i))},e.prototype.activeAnimate=function(e,t,i,s){var n=1-Math.pow(1-e,3);return t+(s?-n*i:n*i)},e.prototype.getPathLine=function(e,t){var i=t.enableRtl?"Round"===t.cornerRadius?e+t.rectWidth-.45*t.thickness:e+t.rectWidth:"Round"===t.cornerRadius?e+.45*t.thickness:e,s=t.enableRtl?"Round"===t.cornerRadius&&t.progressWidth?i-t.progressWidth+.9*t.thickness:i-t.progressWidth:"Round"===t.cornerRadius&&t.progressWidth?i+t.progressWidth-.9*t.thickness:i+t.progressWidth;return"M"+i+" "+(t.rectX+t.rectHeight/2)+"L"+s+" "+(t.rectY+t.rectHeight/2)},e.prototype.circularAnimation=function(){var e=this,t=new sf.base.Animation({}),i=document.getElementById(this.element.id+"_clippathcircle"),s=0;i&&this.circularData&&(i.style.visibility="hidden",t.animate(i,{duration:this.circularData.duration,delay:this.circularData.delay,progress:function(t){if(e.cancelResize=!0,t.timeStamp>=t.delay){if(i.style.visibility="visible",e.circularData.isActive){s=e.activeAnimate(t.timeStamp/t.duration,e.circularData.startPos,e.circularData.endPos,e.circularData.enableRtl);var n=document.getElementById(e.element.id+"_CircularActiveProgress");n&&n.setAttribute("opacity",e.effect(t.timeStamp,.5,.5,t.duration,!0).toString())}else s=e.effect(t.timeStamp,e.circularData.startPos,e.circularData.endPos,t.duration,e.circularData.enableRtl);i.setAttribute("d",e.getPathArc(e.circularData.x,e.circularData.y,e.circularData.pathRadius,e.circularData.start,s%360,e.circularData.enableRtl,!0))}},end:function(){e.cancelResize=!1,i.setAttribute("d",e.getPathArc(e.circularData.x,e.circularData.y,e.circularData.pathRadius,e.circularData.start,e.circularData.progressEnd,e.circularData.enableRtl,!0)),e.circularData.isActive&&e.circularAnimation(),e.dotNetRef.invokeMethodAsync("TriggerAnimationComplete")}}))},e.prototype.circularBufferAnimation=function(){var e=this,t=new sf.base.Animation({}),i=document.getElementById(this.element.id+"_clippathBuffercircle"),s=0;i&&this.circularBufferData&&(i.style.visibility="hidden",t.animate(i,{duration:this.circularBufferData.duration,delay:this.circularBufferData.delay,progress:function(t){e.cancelResize=!0,t.timeStamp>=t.delay&&(i.style.visibility="visible",s=e.effect(t.timeStamp,e.circularBufferData.startPos,e.circularBufferData.endPos,t.duration,e.circularBufferData.enableRtl),i.setAttribute("d",e.getPathArc(e.circularBufferData.x,e.circularBufferData.y,e.circularBufferData.pathRadius,e.circularBufferData.start,s%360,e.circularBufferData.enableRtl,!0)))},end:function(){e.cancelResize=!1,i.setAttribute("d",e.getPathArc(e.circularBufferData.x,e.circularBufferData.y,e.circularBufferData.pathRadius,e.circularBufferData.start,e.circularBufferData.progressEnd,e.circularBufferData.enableRtl,!0)),e.dotNetRef.invokeMethodAsync("TriggerAnimationComplete")}}))},e.prototype.circularIndeterminateAnimation=function(e,t){var i=this;void 0===e&&(e=0),void 0===t&&(t=0);var s=document.getElementById(this.element.id+"_clippathcircle"),n=new sf.base.Animation({});s&&this.circularData&&(n.destroy(),n.animate(s,{duration:this.circularData.duration,delay:0,progress:function(){i.circularData&&i.circularData.enable&&i.circularData.isIndeterminate&&(s.style.visibility="visible",e+=i.circularData.enableRtl?-i.circularData.segmentValue:i.circularData.segmentValue,t+=i.circularData.enableRtl?-i.circularData.segmentValue:i.circularData.segmentValue,s.setAttribute("d",i.getPathArc(i.circularData.x,i.circularData.y,i.circularData.pathRadius,e%360,t%360,i.circularData.enableRtl,!i.circularData.enableProgressSegments)))},end:function(){i.circularData&&i.circularData.enable&&i.circularData.isIndeterminate&&i.circularIndeterminateAnimation(e,t)}}))},e.prototype.annotationAnimation=function(){var e,t,i=this,s=new sf.base.Animation({}),n=document.getElementById(this.element.id+"Annotation0").children[0];n&&n.children[0]&&"SPAN"===n.children[0].tagName&&(t=n.children[0]),t&&this.annotationData&&(e="Linear"===this.annotationData.type?document.getElementById(this.element.id+"_clippathrect"):document.getElementById(this.element.id+"_clippathcircle"),this.annotationData.isContent?t.innerHTML=this.annotationData.annotateValue+"%":e&&s.animate(e,{duration:this.annotationData.duration,delay:this.annotationData.delay,progress:function(e){i.cancelResize=!0;var s=i.effect(e.timeStamp,i.annotationData.startPos,i.annotationData.endPos,e.duration,!1),n=parseInt(((Math.round(s)-i.annotationData.start)/i.annotationData.totalAngle*100).toString(),10);t.innerHTML=n?n.toString()+"%":"0%"},end:function(){i.cancelResize=!1,t.innerHTML=i.annotationData.annotateValue+"%"}}))},e.prototype.labelAnimation=function(){var e,t=this;this.labelData&&(e="Linear"===this.labelData.type?document.getElementById(this.element.id+"_linearLabel"):document.getElementById(this.element.id+"_circularLabel"));var i=new sf.base.Animation({}),s=new sf.base.Animation({});e&&this.labelData&&!this.labelData.isStriped&&(e.style.visibility="hidden",i.animate(e,{duration:this.labelData.duration,delay:this.labelData.delay,progress:function(i){if(t.cancelResize=!0,"Linear"===t.labelData.type&&i.timeStamp>=i.delay&&""===t.labelData.labelText){e.style.visibility="visible";var s=t.effect(i.timeStamp,t.labelData.progressPos,Math.round(t.labelData.end-t.labelData.progressPos),i.duration,!1),n=parseInt((s/t.labelData.width*100).toString(),10);if(e.innerHTML=n.toString()+"%","Far"===t.labelData.labelPos||"Center"===t.labelData.labelPos){var o=t.effect(i.timeStamp,t.labelData.startPos,t.labelData.endPos-(t.labelData.enableRtl?0:t.labelData.startPos),i.duration,t.labelData.enableRtl);e.setAttribute("x",o.toString())}}else if("Circular"===t.labelData.type&&""===t.labelData.labelText){e.style.visibility="visible";s=t.effect(i.timeStamp,t.labelData.start,t.labelData.end-t.labelData.start,i.duration,!1),n=parseInt((s/t.labelData.totalAngle*100).toString(),10);e.innerHTML=n.toString()+"%"}},end:function(){t.cancelResize=!1,e&&""===t.labelData.labelText?(e.style.visibility="visible",e.innerHTML=t.labelData.text,e.setAttribute("x",t.labelData.x.toString())):s.animate(e,{progress:function(i){e.style.visibility="visible";var s=t.effect(i.timeStamp,0,1,i.duration,!1);e.setAttribute("opacity",s.toString())},end:function(){e.setAttribute("opacity","1")}})}}))},e.prototype.stripeAnimation=function(e){var t=this;void 0===e&&(e=0);var i=new sf.base.Animation({}),s=document.getElementById(this.element.id+"_LinearStriped");s&&this.stripeData&&i.animate(s,{duration:this.stripeData.duration,delay:this.stripeData.delay,progress:function(){t.stripeData.enable&&(e+=t.stripeData.enableRtl?-t.stripeData.durationValue:t.stripeData.durationValue,s.setAttribute("gradientTransform","translate("+e+") rotate(-45)"))},end:function(){t.stripeData.enable&&t.stripeAnimation(e)}})},e.prototype.linearIndeterminateAnimation=function(){var e=this,t=new sf.base.Animation({}),i=document.getElementById(this.element.id+"_clippathrect");i&&this.lineardata&&(i.style.visibility="hidden",t.animate(i,{duration:this.lineardata.duration,delay:0,progress:function(t){i.style.visibility="visible",e.lineardata.enableRtl&&e.lineardata.enableRtl&&e.lineardata.enable&&e.lineardata.isIndeterminate?e.animationProgress(i,t.timeStamp,e.lineardata.x||e.lineardata.rectX+e.lineardata.progressWidth,e.lineardata.end,t.duration,e.lineardata.enableRtl):e.lineardata.enable&&e.lineardata.isIndeterminate&&e.animationProgress(i,t.timeStamp,e.lineardata.start,e.lineardata.end,t.duration,e.lineardata.enableRtl)},end:function(){e.lineardata&&e.lineardata.enable&&e.lineardata.isIndeterminate&&(e.lineardata.enableRtl&&!e.lineardata.enableProgressSegments&&"Round4px"!==e.lineardata.cornerRadius?i.setAttribute("x",e.lineardata.x.toString()):e.lineardata.enableProgressSegments||i.setAttribute("x",e.lineardata.start.toString()),e.linearIndeterminateAnimation(),e.dotNetRef.invokeMethodAsync("TriggerAnimationComplete"))}}))},e.prototype.animationProgress=function(e,t,i,s,n,o){var r=this.effect(t,i,s,n,o);this.lineardata.enableProgressSegments?e.setAttribute("d",this.getPathLine(r,this.lineardata)):e.setAttribute("x",r.toString())},e.prototype.linearAnimation=function(){var e=this,t=new sf.base.Animation({}),i=document.getElementById(this.element.id+"_clippathrect"),s=0;i&&this.lineardata&&(i.style.visibility="hidden",t.animate(i,{duration:this.lineardata.duration,delay:this.lineardata.delay,progress:function(t){if(e.cancelResize=!0,e.lineardata.enableRtl&&"Round4px"!==e.lineardata.cornerRadius&&t.timeStamp>=t.delay)if(i.style.visibility="visible",e.lineardata.isActive){var n=document.getElementById(e.element.id+"_LinearActiveProgress");s=e.activeAnimate(t.timeStamp/t.duration,e.lineardata.x,e.lineardata.width,!0),n&&(n.setAttribute("opacity",e.effect(t.timeStamp,.5,.5,t.duration,!0).toString()),i.setAttribute("x",s.toString()))}else i.setAttribute("x",e.effect(t.timeStamp,e.lineardata.start,e.lineardata.end,t.duration,!0).toString());else if(t.timeStamp>=t.delay)if(i.style.visibility="visible",e.lineardata.isActive){n=document.getElementById(e.element.id+"_LinearActiveProgress");s=e.activeAnimate(t.timeStamp/t.duration,0,e.lineardata.width,e.lineardata.enableRtl),n&&(n.setAttribute("opacity",e.effect(t.timeStamp,.5,.5,t.duration,!0).toString()),i.setAttribute("width",s.toString()))}else i.setAttribute("width",e.effect(t.timeStamp,e.lineardata.start,e.lineardata.end,t.duration,!1).toString())},end:function(){e.cancelResize=!1,e.lineardata&&e.lineardata.enable&&e.lineardata.enableRtl&&"Round4px"!==e.lineardata.cornerRadius?e.lineardata.isActive?(i.setAttribute("x",e.lineardata.x.toString()),e.linearAnimation()):i.setAttribute("x",e.lineardata.rtlX.toString()):e.lineardata&&e.lineardata.enable&&(i.setAttribute("width",e.lineardata.width.toString()),e.lineardata.isActive&&e.linearAnimation()),e.dotNetRef.invokeMethodAsync("TriggerAnimationComplete")}}))},e.prototype.linearBufferAnimation=function(){var e=this,t=new sf.base.Animation({}),i=document.getElementById(this.element.id+"_clippathBufferrect");i&&this.linearBufferdata&&(i.style.visibility="hidden",t.animate(i,{duration:this.linearBufferdata.duration,delay:this.linearBufferdata.delay,progress:function(t){e.cancelResize=!0,e.linearBufferdata.enableRtl&&"Round4px"!==e.linearBufferdata.cornerRadius&&t.timeStamp>=t.delay?t.timeStamp>=t.delay&&(i.style.visibility="visible",i.setAttribute("x",e.effect(t.timeStamp,e.linearBufferdata.start,e.linearBufferdata.end,t.duration,!0).toString())):t.timeStamp>=t.delay&&(i.style.visibility="visible",i.setAttribute("width",e.effect(t.timeStamp,e.linearBufferdata.start,e.linearBufferdata.end,t.duration,!1).toString()))},end:function(){e.cancelResize=!1,i.style.visibility="",e.lineardata&&e.linearBufferdata.enable&&e.linearBufferdata.enableRtl&&"Round4px"!==e.linearBufferdata.cornerRadius?i.setAttribute("x",e.linearBufferdata.rtlX.toString()):e.linearBufferdata&&e.linearBufferdata.enable&&i.setAttribute("width",e.linearBufferdata.width.toString()),e.dotNetRef.invokeMethodAsync("TriggerAnimationComplete")}}))},e}();return{initialize:function(t,i,s,n,o){return new e(t,i,o).wireEvents(),this.getElementSize(i,s,n)},setSecondaryElementStyle:function(e){if(e){var t=document.getElementById(e.id+"SVG").getBoundingClientRect(),i=document.getElementById(e.id+"Secondary_Element"),s=e.getBoundingClientRect();i&&t&&(i.style.visibility="visible",i.style.left=Math.max(t.left-s.left,0)+"px",i.style.top=Math.max(t.top-s.top,0)+"px")}},getElementSize:function(e,t,i){var s,n;if(e){var o=e.style.display;e.style.display="block",e.style.height=t,e.style.width=i;var r=e.getBoundingClientRect();s=r.width,n=r.height,e.style.width="",e.style.height="",e.style.display=o}return{width:s,height:n}},doLinearBufferAnimation:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.linearBufferdata=t,i.linearBufferAnimation())},doLinearAnimation:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.lineardata=t,i.linearAnimation())},doLinearIndeterminate:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.lineardata=t,i.linearIndeterminateAnimation())},doStripedAnimation:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.stripeData=t,i.stripeAnimation())},doCircularAnimation:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.circularData=t,i.circularAnimation())},doCircularBufferAnimation:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.circularBufferData=t,i.circularBufferAnimation())},doCircularIndeterminate:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.circularData=t,i.circularIndeterminateAnimation(t.start,t.end))},doAnnotationAnimation:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.annotationData=t,i.annotationAnimation())},doLabelAnimation:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.labelData=t,i.labelAnimation())},update:function(e,t,i,s,n){var o=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(o)){if("Linear"===i){var r=t;r.isStriped?o.stripeData=r:o.lineardata=r}else o.circularData=t;s&&(o.labelData=t),n&&(o.annotationData=t)}},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);e&&t&&t.unWireEvents()}}}()},"./modules/sf-range-navigator.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.RangeNavigator=function(){"use strict";var e=function(){function e(e,t,i,s){window.sfBlazor=window.sfBlazor,this.mouseY=0,this.mouseX=0,this.reSizeTo=0,this.isTooltipHide=!0,this.isDrag=!1,this.tooltip=[],this.id=t,this.element=i,this.dotNetRef=s,this.dataId=e,window.sfBlazor.setCompInstance(this)}return e.prototype.destroy=function(){this.unWireEvents(this.id,this.dotNetRef)},e.prototype.unWireEvents=function(e,i){this.dotNetRef=i,t.dotnetrefCollection=t.dotnetrefCollection.filter((function(t){return t.id!==e}));var s=sf.base.Browser.isPointer?"pointerleave":"mouseleave";sf.base.EventHandler.remove(this.element,sf.base.Browser.touchStartEvent,this.rangeOnMouseDown),sf.base.EventHandler.remove(this.element,sf.base.Browser.touchMoveEvent,this.mouseMove),sf.base.EventHandler.remove(this.element,sf.base.Browser.touchEndEvent,this.mouseEnd),sf.base.EventHandler.remove(this.element,"click",this.rangeOnMouseClick),sf.base.EventHandler.remove(this.element,s,this.mouseLeave);var n=sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize";sf.base.EventHandler.remove(window,n,t.resizeBound)},e.prototype.wireEvents=function(e,i){this.dotNetRef=i,t.dotnetrefCollection.push({id:e,dotnetref:i});var s=sf.base.Browser.isPointer?"pointerleave":"mouseleave";sf.base.EventHandler.add(this.element,sf.base.Browser.touchStartEvent,this.rangeOnMouseDown,this),sf.base.EventHandler.add(this.element,sf.base.Browser.touchMoveEvent,this.mouseMove,this),sf.base.EventHandler.add(this.element,sf.base.Browser.touchEndEvent,this.mouseEnd,this),sf.base.EventHandler.add(this.element,"click",this.rangeOnMouseClick,this),sf.base.EventHandler.add(this.element,s,this.mouseLeave,this),t.resizeBound=t.rangeResize.bind(this,t.dotnetrefCollection);var n=sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize";sf.base.EventHandler.add(window,n,t.resizeBound)},e.prototype.rangeOnMouseDown=function(e){var t=window.sfBlazor.getCompInstance(this.dataId);this.setMouseX(this.getPageX(e)),e.target.id.indexOf("_Thumb")>-1&&(t.isDrag=!0),this.dotNetRef.invokeMethodAsync("OnRangeMouseDown",this.getEventArgs(e))},e.prototype.mouseMove=function(e){var t=window.sfBlazor.getCompInstance(this.dataId);document.getElementById(this.id.replace("_stockChart_rangeSelector","")+"_svg")&&(this.setMouseX(this.getPageX(e)),t.isDrag&&this.sliderChangeValue&&t.changeSlider())},e.prototype.changeSlider=function(){var e,t;if(this.sliderChangeValue.isDrag&&this.mouseX>=this.sliderChangeValue.boundsX){switch(this.sliderChangeValue.currentSlider){case"Left":this.sliderChangeValue.startValue=this.getRangeValue(Math.abs(this.mouseX-this.sliderChangeValue.boundsX));break;case"Right":this.sliderChangeValue.endValue=this.getRangeValue(Math.abs(this.mouseX-this.sliderChangeValue.boundsX));break;case"Middle":e=Math.max(this.getRangeValue(Math.abs(this.sliderChangeValue.startX-(this.sliderChangeValue.previousMoveX-this.mouseX)-this.sliderChangeValue.boundsX)),this.sliderChangeValue.rangeMin),t=Math.min(this.getRangeValue(Math.abs(this.sliderChangeValue.endX-(this.sliderChangeValue.previousMoveX-this.mouseX)-this.sliderChangeValue.boundsX)),this.sliderChangeValue.rangeMax),Math.floor(Math.abs(this.getXLocation(t)-this.getXLocation(e)))===Math.floor(this.sliderChangeValue.sliderWidth)&&(this.sliderChangeValue.startValue=e,this.sliderChangeValue.endValue=t)}this.setSlider(this.sliderChangeValue.startValue,this.sliderChangeValue.endValue),this.sliderChangeValue.previousMoveX=this.mouseX}},e.prototype.setSlider=function(e,t){var i=window.sfBlazor.getCompInstance(this.dataId),s=document.getElementById(i.id+"_SelectedArea"),n=document.getElementById(i.id+"_leftUnSelectedArea"),o=document.getElementById(i.id+"_rightUnSelectedArea"),r=document.getElementById(i.id+"_LeftSlider"),a=document.getElementById(i.id+"_RightSlider");t>=e||(e=[t,t=e][0]);var l=this.sliderChangeValue.boundsX;e=t>=e?e:[t,t=e][0],e=Math.max(e,this.sliderChangeValue.rangeMin),t=Math.min(t,this.sliderChangeValue.rangeMax),this.sliderChangeValue.startX=l+this.getXLocation(e),this.sliderChangeValue.endX=l+this.getXLocation(t);var h=this.sliderChangeValue.enableRtl?this.sliderChangeValue.endX:this.sliderChangeValue.startX,d=this.sliderChangeValue.enableRtl?this.sliderChangeValue.startX:this.sliderChangeValue.endX;this.sliderChangeValue.sliderWidth=Math.abs(this.sliderChangeValue.endX-this.sliderChangeValue.startX),s.setAttribute("x",h+""),s.setAttribute("width",this.sliderChangeValue.sliderWidth+""),n.setAttribute("width",h-l+""),o.setAttribute("x",d+""),o.setAttribute("width",this.sliderChangeValue.boundsWidth-(d-l)+""),r.setAttribute("transform","translate("+(this.sliderChangeValue.startX-this.sliderChangeValue.thumpPadding)+", 0)"),a.setAttribute("transform","translate("+(this.sliderChangeValue.endX-this.sliderChangeValue.thumpPadding)+", 0)");var c=this.sliderChangeValue.enableRtl?this.sliderChangeValue.endX:this.sliderChangeValue.startX,p=this.sliderChangeValue.enableRtl?this.sliderChangeValue.startX:this.sliderChangeValue.endX,u={x:this.sliderChangeValue.isLeightWeight?0+l:l,y:this.sliderChangeValue.isLeightWeight?0:this.sliderChangeValue.boundsY,width:this.sliderChangeValue.isLeightWeight?c-l:c,height:this.sliderChangeValue.isLeightWeight?this.sliderChangeValue.thumpY:this.sliderChangeValue.boundsHeight},f={x:this.sliderChangeValue.isLeightWeight?0+p:p,y:this.sliderChangeValue.isLeightWeight?0:this.sliderChangeValue.boundsY,width:this.sliderChangeValue.boundsWidth-(d-l),height:this.sliderChangeValue.isLeightWeight?this.sliderChangeValue.thumpY:this.sliderChangeValue.boundsHeight},g={x:this.sliderChangeValue.isLeightWeight?c+0:0,y:this.sliderChangeValue.isLeightWeight?0:this.sliderChangeValue.boundsY,width:this.sliderChangeValue.isLeightWeight?Math.abs(this.sliderChangeValue.endX-this.sliderChangeValue.startX):p,height:this.sliderChangeValue.isLeightWeight?this.sliderChangeValue.thumpY:this.sliderChangeValue.boundsHeight};i.tooltip.length>0&&this.updateTooltip(u,f,g,this.sliderChangeValue.startX,this.sliderChangeValue.endX)},e.prototype.updateTooltip=function(e,i,s,n,o){var r=window.sfBlazor.getCompInstance(this.dataId),a=this.getTooltipContent(this.sliderChangeValue.endValue),l=this.sliderChangeValue.enableRtl?e:i,h=r.tooltip[0].textStyle;t.measureText(a,h.size,h.fontWeight,h.fontStyle,h.fontFamily).Width>l.width&&(l=s),r.tooltip[0].location.x=o,r.tooltip[0].areaBounds=l,r.tooltip[0].content=[a],r.tooltip[0].dataBind(),a=this.getTooltipContent(this.sliderChangeValue.startValue),l=this.sliderChangeValue.enableRtl?i:e,h=r.tooltip[1].textStyle,t.measureText(a,h.size,h.fontWeight,h.fontStyle,h.fontFamily).Width>l.width&&((l=s).x=r.sliderChangeValue.isLeightWeight?0:l.x),r.tooltip[1].location.x=n,r.tooltip[1].content=[a],r.tooltip[1].areaBounds=l,r.tooltip[1].dataBind()},e.prototype.getTooltipContent=function(e){var t=this.sliderChangeValue.format,i=null!==t.match("{value}"),s=new Date(e);return s.setTime(s.getTime()+60*s.getTimezoneOffset()*1e3),"DateTime"===this.sliderChangeValue.valueType?(new sf.base.Internationalization).getDateFormat({format:t||"MM/dd/yyyy"})(s):(new sf.base.Internationalization).getNumberFormat({format:i?"":t,useGrouping:this.sliderChangeValue.useGrouping})("Logarithmic"===this.sliderChangeValue.valueType?Math.pow(this.sliderChangeValue.logBase,e):e)},e.prototype.getRangeValue=function(e){return(this.sliderChangeValue.enableRtl?1-e/this.sliderChangeValue.boundsWidth:e/this.sliderChangeValue.boundsWidth)*this.sliderChangeValue.rangeDelta+this.sliderChangeValue.rangeMin},e.prototype.getXLocation=function(e){var t=(e-this.sliderChangeValue.rangeMin)/this.sliderChangeValue.rangeDelta;return(this.sliderChangeValue.enableRtl?1-t:t)*this.sliderChangeValue.boundsWidth},e.prototype.mouseEnd=function(e){var t=window.sfBlazor.getCompInstance(this.dataId);t.isDrag&&this.sliderChangeValue&&(this.dotNetRef.invokeMethodAsync("SetStartEndValue",this.sliderChangeValue.startValue,this.sliderChangeValue.endValue,!0,this.sliderChangeValue.enableTooltip),t.isDrag=!1),this.dotNetRef.invokeMethodAsync("OnRangeMouseEnd",this.getEventArgs(e))},e.prototype.rangeOnMouseClick=function(e){this.dotNetRef.invokeMethodAsync("OnRangeMouseClick",this.getEventArgs(e))},e.prototype.mouseLeave=function(e){var t=window.sfBlazor.getCompInstance(this.dataId);this.setMouseX(this.getPageX(e)),t.isDrag=!1,this.dotNetRef.invokeMethodAsync("OnRangeMouseLeave",this.getEventArgs(e)),this.isTooltipHide&&this.fadeOutTooltip()},e.prototype.fadeOutTooltip=function(){if(this.sliderChangeValue&&this.sliderChangeValue.isTooltipHide){window.clearInterval(this.toolTipInterval);var e=window.sfBlazor.getCompInstance(this.dataId);e.tooltip[1]&&(this.toolTipInterval=window.setTimeout((function(){e.tooltip[0].fadeOut(),e.tooltip[1].fadeOut()}),1e3))}},e.prototype.getPageX=function(e){return e.type.indexOf("touch")>-1?e.changedTouches[0].clientX:e.clientX},e.prototype.setMouseX=function(e){var t=document.getElementById(this.id.replace("_stockChart_rangeSelector","")+"_svg");if(t){var i=t.getBoundingClientRect(),s=document.getElementById(this.id).getBoundingClientRect();this.mouseX=e-s.left-Math.max(i.left-s.left,0)}},e.prototype.getEventArgs=function(e){return{type:e.type,clientX:e.clientX,clientY:e.clientY,mouseX:this.mouseX,mouseY:this.mouseY,pointerType:e.pointerType,target:e.target.id,changedTouches:{clientX:e.changedTouches?e.changedTouches[0].clientX:0,clientY:e.changedTouches?e.changedTouches[0].clientY:0}}},e}(),t={getParentElementBoundsById:function(t,i,s){var n=document.getElementById(i);if(n){var o=new e(t,i,n,s);o.unWireEvents(i,s),o.wireEvents(i,s),n.style.width="100%",n.style.height="100%";var r=n.getBoundingClientRect();return{width:r.width||n.clientWidth||n.offsetWidth,height:r.height||n.clientHeight||n.offsetHeight,left:r.left,top:r.top,right:r.right,bottom:r.bottom}}return{width:0,height:0,left:0,top:0,right:0,bottom:0}},getElementBoundsById:function(t,i,s,n,o,r){if(n=document.getElementById(i)){var a=new e(t,i,n,s);return a.unWireEvents(i,s),a.wireEvents(i,s),this.getElementSize(n,o,r)}return{width:0,height:0}},getElementSize:function(e,t,i){return e?(e.style.height=t,e.style.width=i,{width:e.clientWidth||e.offsetWidth,height:e.clientHeight||e.offsetHeight}):{width:0,height:0}},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.destroy()},charCollection:["0","1","2","3","4","5","6","7","8","9","!",'"',"#","$","%","&","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~"," "],measureText:function(e,t,i,s,n){var o=document.getElementById("chartmeasuretext");return null===o&&(o=sf.base.createElement("text",{id:"chartmeasuretext"}),document.body.appendChild(o))," "===e&&(e="&nbsp;"),o.innerHTML=e,o.style.position="fixed",o.style.fontSize=t,o.style.fontWeight=i,o.style.fontStyle=s,o.style.fontFamily=n,o.style.visibility="hidden",o.style.top="-100",o.style.left="0",o.style.whiteSpace="nowrap",o.style.lineHeight="normal",{Width:o.clientWidth,Height:o.clientHeight}},getCharSizeByFontKeys:function(e){for(var t={},i=this.charCollection,s=e.length,n=0;n<s;n++)for(var o=e[n].split("_"),r=o[0],a=o[1],l=o[2],h="_"+r+"_"+a+"_"+l,d=0;d<i.length;d++)t[i[d]+h]=this.measureText(i[d],"100px",r,a,l);return JSON.stringify(t)},getCharSizeByCharKey:function(e){var t=e.split("_");return this.measureText(t[0],"100px",t[2],t[3],t[4])},dotnetref:{},setValueOnSliderSelect:function(e,t,i){t=document.getElementById(t.id);var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s)||(s.sliderChangeValue=i,s.isTooltipHide=i.isTooltipHide,s.isDrag=!0)},getElementRect:function(e){var t,i=document.getElementById(e);return i&&(t=i.getBoundingClientRect(),sf.base.remove(i)),{Left:t.left,Right:t.right,Top:t.top,Bottom:t.bottom,Width:t.width,Height:t.height}},dotnetrefCollection:[],renderTooltip:function(e,t,i,s,n,o){var r,a,l,h=window.sfBlazor.getCompInstance(o),d=[i,s],c=[e,t];n=document.getElementById(n.id);for(var p=1;p>=0;p--)a=d[p],!((r=document.getElementById(a.replace("_stockChart_rangeSelector","")+"_svg"))&&parseInt(r.getAttribute("opacity"),10)>0),l=JSON.parse(c[p]),h.tooltip[p]=new sf.svgbase.Tooltip(l),h.tooltip[p].appendTo("#"+a)},performSliderAnimation:function(e,t,i,s,n,o,r,a,l,h,d){var c=this;e=document.getElementById(e.id);var p=window.sfBlazor.getCompInstance(d);p.sliderChangeValue=h,new sf.base.Animation({}).animate(sf.base.createElement("div"),{duration:0===s?500:s,progress:function(e){var s=c.linear(e.timeStamp,0,t-n,e.duration)+n,r=c.linear(e.timeStamp,0,i-o,e.duration)+o;p.setSlider(s,r)},end:function(){p.setSlider(t,i),a?l.invokeMethodAsync("PerformSnapping",t,i,!0,r):p.dotNetRef.invokeMethodAsync("SetStartEndValue",t,i,!0,r)}})},linear:function(e,t,i,s){return-i*Math.cos(e/s*(Math.PI/2))+i+t},setAttribute:function(e,t,i){var s=document.getElementById(e);s&&s.setAttribute(t,i)},getAndSetTextContent:function(e,t,i){var s=document.getElementById(e);if(s){if(t)return s.textContent;s.textContent=i}return null},resizeBound:{},resize:{},rangeResize:function(e,t){var i=this;return window.sfBlazor.getCompInstance(this.dataId).isDrag=!1,this.resize&&clearTimeout(this.resize),this.resize=setTimeout((function(){for(var s,n=e.length,o=0;o<n;o++)s=e[o].dotnetref,e[o].id.indexOf("_stockChart_")<0&&s.invokeMethodAsync("OnRangeResize",t);clearTimeout(i.resize)}),500),!1}};return t}()},"./modules/sf-rating.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Rating=function(){"use strict";var e=function(){function e(e){window.sfBlazor=window.sfBlazor,this.isResetAdded=!1,this.updateContext(e),window.sfBlazor.setCompInstance(this),this.listElement=this.element.querySelector(".e-rating-item-list"),this.getElements(),this.bindEvent(),this.updateReset()}return e.prototype.updateContext=function(e){sf.base.extend(this,this,e)},e.prototype.getElements=function(){this.containerElements=this.element.querySelectorAll(".e-rating-item-container"),this.resetElement=this.allowReset?this.element.querySelector(".e-reset"):null,this.ratingLabel=this.showLabel?this.element.querySelector(".e-rating-label"):null},e.prototype.updateReset=function(e){void 0===e&&(e=!1),(e||this.isResetAdded!==this.allowReset)&&(this.resetElement=this.allowReset?this.element.querySelector(".e-reset"):null,!e&&this.allowReset?(sf.base.EventHandler.add(this.resetElement,"click",this.resetClickHandler,this),sf.base.EventHandler.add(this.resetElement,"keydown",this.resetKeyActionHandler.bind(this),this)):this.isResetAdded&&(sf.base.EventHandler.remove(this.resetElement,"click",this.resetClickHandler.bind(this)),sf.base.EventHandler.remove(this.resetElement,"keydown",this.resetKeyActionHandler.bind(this))),this.isResetAdded=this.allowReset)},e.prototype.bindItemEvent=function(e,t){var i=this;sf.base.EventHandler.add(e,"mousemove",(function(e){return i.mouseMoveHandler(t+1,e)}),this),sf.base.EventHandler.add(e,"mouseleave",this.mouseLeaveHandler.bind(this),this),sf.base.EventHandler.add(e,"click",this.clickHandler.bind(this),this)},e.prototype.bindEvent=function(){sf.base.EventHandler.add(this.listElement,"keydown",this.keyActionHandler.bind(this),this),sf.base.EventHandler.add(this.listElement,"touchmove",this.touchMoveHandler.bind(this),this),sf.base.EventHandler.add(this.listElement,"touchend",this.touchEndHandler.bind(this),this);for(var e=0;e<this.containerElements.length;e++)this.bindItemEvent(this.containerElements[e],e)},e.prototype.unBindItemEvent=function(e,t){var i=this;sf.base.EventHandler.remove(e,"mousemove",(function(e){return i.mouseMoveHandler(t+1,e)})),sf.base.EventHandler.remove(e,"mouseleave",this.mouseLeaveHandler.bind(this)),sf.base.EventHandler.remove(e,"click",this.clickHandler.bind(this))},e.prototype.unBindEvent=function(){sf.base.EventHandler.remove(this.listElement,"keydown",this.keyActionHandler),sf.base.EventHandler.remove(this.listElement,"touchmove",this.touchMoveHandler.bind(this)),sf.base.EventHandler.remove(this.listElement,"touchend",this.touchEndHandler.bind(this));for(var e=0;e<this.containerElements.length;e++)this.unBindItemEvent(this.containerElements[e],e)},e.prototype.getRatingValue=function(e,t){return this.enableSingleSelection&&0==this.precision?e==t+1?1:0:e>=t+1?1:e<t?0:e-t},e.prototype.UpdateItemValue=function(){for(var e=0;e<this.itemsCount;e++){this.containerElements[e].classList.remove("e-rating-selected","e-rating-intermediate","e-selected-value");var t=this.getRatingValue(this.currentValue,e);1==t?this.containerElements[e].classList.add("e-rating-selected"):t>0?this.containerElements[e].classList.add("e-rating-intermediate"):0===this.precision&&e<this.value&&!this.enableSingleSelection&&this.containerElements[e].classList.add("e-selected-value"),this.containerElements[e].style.setProperty("--rating-value",100*t+"%"),this.containerElements[e].classList[0===this.value&&0===e||this.value===e+1||t>0&&t<1?"add":"remove"]("e-rating-focus")}this.allowReset&&this.resetElement.classList[this.value>this.min?"remove":"add"]("e-disabled")},e.prototype.updateCurrentValue=function(e){this.currentValue=e,this.UpdateItemValue(),this.updateLabel()},e.prototype.updateLabel=function(){this.showLabel&&!this.labelTemplate&&(this.ratingLabel.textContent=this.currentValue+" / "+this.itemsCount)},e.prototype.mouseMoveHandler=function(e,t){if(!this.preventAction){var i=e;0!=this.precision&&(i=t.offsetX/this.containerElements[e-1].clientWidth,i=this.enableRtl?1-i:i,2==this.precision?i=i<=.25?.25:i<=.5?.5:i<.75?.75:1:1==this.precision?i=i<=.5?.5:1:3==this.precision&&(i=0==(i=Math.ceil(10*i)/10)?.1:i),i=i+e-1),i=this.validateValue(i);var s=t.target.classList.contains("e-rating-item-container")?t.target:t.target.closest(".e-rating-item-container");(this.currentValue!=i||this.value==i&&this.showTooltip&&!this.element.querySelector(".e-rating-tooltip").classList.contains("e-show-tooltip"))&&(this.updateCurrentValue(i),this.showTooltip&&s&&!this.tooltipTemplate&&this.openTooltip(s),(this.callMouseMoveHandler||this.tooltipTemplate||this.labelTemplate)&&this.dotNetRef.invokeMethodAsync("MouseMoveHandler",this.currentValue))}},e.prototype.openTooltip=function(e){var t=this.element.querySelector(".e-rating-tooltip");t.querySelector(".e-tip-content").innerHTML=this.currentValue.toString(),e.appendChild(t),t.classList.add("e-show-tooltip")},e.prototype.closeTooltip=function(){this.element.querySelector(".e-rating-tooltip").classList.remove("e-show-tooltip")},e.prototype.validateValue=function(e){return e=0==this.precision?Math.round(e):1==this.precision?Math.round(2*e)/2:2==this.precision?Math.round(4*e)/4:Math.round(10*e)/10},e.prototype.touchMoveHandler=function(e){if(!this.preventAction){var t=this.listElement.getBoundingClientRect(),i=(e.touches[0].clientX-t.x)/t.width*this.itemsCount;i=(i=this.enableRtl?this.itemsCount-i:i)<this.min?this.min:i>this.itemsCount?this.itemsCount:i;var s=0===(i=this.validateValue(i))?null:this.containerElements[Math.ceil(i)-1];(this.currentValue!=i||this.value==i&&this.showTooltip&&!this.element.querySelector(".e-rating-tooltip").classList.contains("e-show-tooltip"))&&(this.updateCurrentValue(i),this.showTooltip&&!this.tooltipTemplate&&(s?this.openTooltip(s):this.closeTooltip()),this.dotNetRef.invokeMethodAsync("TouchEventHandler",this.currentValue,!0))}},e.prototype.clickHandler=function(){this.preventAction||(this.value=this.min>0&&this.currentValue<this.min?this.min:this.currentValue,this.updateCurrentValue(this.value),this.dotNetRef.invokeMethodAsync("SetValue",this.value))},e.prototype.mouseLeaveHandler=function(){this.preventAction||(this.showTooltip&&this.closeTooltip(),this.updateCurrentValue(this.value),this.dotNetRef.invokeMethodAsync("MouseOutHandler",this.currentValue))},e.prototype.touchEndHandler=function(){this.showTooltip&&(this.closeTooltip(),this.dotNetRef.invokeMethodAsync("TouchEventHandler",this.currentValue,!1))},e.prototype.resetClickHandler=function(){this.preventAction||this.value>this.min&&(this.value=this.min,this.updateCurrentValue(this.value),this.dotNetRef.invokeMethodAsync("SetValue",this.min))},e.prototype.keyActionHandler=function(e){switch(e.key){case"ArrowUp":this.handleNavigation(!0);break;case"ArrowDown":this.handleNavigation(!1);break;case"ArrowLeft":this.handleNavigation(this.enableRtl);break;case"ArrowRight":this.handleNavigation(!this.enableRtl)}},e.prototype.resetKeyActionHandler=function(e){switch(e.key){case" ":this.resetClickHandler()}},e.prototype.handleNavigation=function(e){if((!e&&this.value>this.min||e&&this.value<this.itemsCount)&&!this.preventAction){var t=0==this.precision?1:1==this.precision?.5:2==this.precision?.25:Math.round(1)/10;t=e?this.value+t:this.value-t,this.value=this.validateValue(t),this.updateCurrentValue(this.value),this.dotNetRef.invokeMethodAsync("SetValue",this.value)}},e.prototype.destroy=function(){this.unBindEvent(),this.updateReset(!0)},e}();return{initialize:function(t){t.dataId&&new e(t)},updateRatingProps:function(e){if(e.dataId){var t=window.sfBlazor.getCompInstance(e.dataId);t.updateContext(e),t.getElements(),t.updateReset()}},destroy:function(e){e&&window.sfBlazor.getCompInstance(e).destroy()}}}()},"./modules/sf-richtexteditor.js":function(e,t,i){function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sfBlazor=window.sfBlazor||{},window.sfBlazor.RichTextEditor=function(){"use strict";var e="initial-end",t="destroy",i="keyUp",n="keyDown",o="selection-save",r="selection-restore",a="mouseDown",l="paste-content",h="checkUndoStack",d=function(){function e(e){this.parent=e,this.renderCount()}return e.prototype.renderCount=function(){this.parent.showCharCount&&(this.addEventListener(),this.appendCount(),-1!==this.parent.maxLength&&this.charCountBackground(this.htmlLength))},e.prototype.appendCount=function(){this.countElement=sf.base.createElement("span",{className:"e-rte-character-count",styles:"display: block"}),this.parent.element.appendChild(this.countElement),this.updateCount()},e.prototype.updateCount=function(){var e="Markdown"===this.parent.editorMode?this.parent.getEditPanel().value:this.parent.getEditPanel().textContent;"Markdown"!==this.parent.editorMode&&-1!==e.indexOf("​")?this.htmlLength=e.replace(/\u200B/g,"").length:this.htmlLength=e.length;var t=-1===this.parent.maxLength?this.htmlLength:this.htmlLength+" / "+this.parent.maxLength;this.countElement.innerHTML=t},e.prototype.charCountBackground=function(e){this.countElement=this.parent.element.querySelector(".e-rte-character-count");var t=e/this.parent.maxLength*100;t<85?(this.countElement.classList.remove("e-warning"),this.countElement.classList.remove("e-error")):t>85&&t<=90?(this.countElement.classList.remove("e-error"),this.countElement.classList.add("e-warning")):t>90&&(this.countElement.classList.remove("e-warning"),this.countElement.classList.add("e-error"))},e.prototype.refresh=function(){!sf.base.isNullOrUndefined(this.parent.element)&&this.parent.showCharCount&&(this.updateCount(),-1!==this.parent.maxLength&&this.charCountBackground(this.htmlLength))},e.prototype.destroy=function(){sf.base.detach(this.countElement),this.countElement=null,this.removeEventListener()},e.prototype.toggle=function(e){this.parent.showCharCount&&(this.countElement.style.display="viewSource"===e.member?"none":"block")},e.prototype.addEventListener=function(){this.parent.observer.on(i,this.refresh,this),this.parent.observer.on("count",this.refresh,this),this.parent.observer.on("refresh-begin",this.refresh,this),this.parent.observer.on(a,this.refresh,this),this.parent.observer.on(t,this.destroy,this),this.parent.observer.on("sourceCode",this.toggle,this),this.parent.observer.on("updateSource",this.toggle,this)},e.prototype.removeEventListener=function(){this.parent.observer.off(i,this.refresh),this.parent.observer.off("refresh-begin",this.refresh),this.parent.observer.off("count",this.refresh),this.parent.observer.off(a,this.refresh),this.parent.observer.off(t,this.destroy),this.parent.observer.off("sourceCode",this.toggle),this.parent.observer.off("updateSource",this.toggle)},e}(),c=function(){function e(e){this.parent=e,this.renderResizable()}return e.prototype.addEventListener=function(){this.parent.observer.on(t,this.destroy,this)},e.prototype.renderResizable=function(){if(this.parent.enableResize){var e="e-icons e-resize-handle ";e+=this.parent.enableRtl?"e-south-west":"e-south-east",this.resizer=sf.base.createElement("div",{id:this.parent.id+"-resizable",className:e}),this.parent.element.classList.add("e-rte-resize"),this.parent.element.appendChild(this.resizer),this.parent.setContentHeight(),this.touchStartEvent="msie"===sf.base.Browser.info.name?"pointerdown":"touchstart",sf.base.EventHandler.add(this.resizer,"mousedown",this.resizeStart,this),sf.base.EventHandler.add(this.resizer,this.touchStartEvent,this.resizeStart,this)}this.addEventListener()},e.prototype.resizeStart=function(e){var t=this;e.cancelable&&e.preventDefault(),this.wireResizeEvents(),this.parent.observer.notify("resizeInitialized",{});this.parent.onResizeStartEnabled&&this.parent.dotNetRef.invokeMethodAsync("ResizeStartEvent",{requestType:"editor"}).then((function(e){e.cancel&&t.unwireResizeEvents()}))},e.prototype.performResize=function(e){var t=this.parent.element.getBoundingClientRect();if(this.isMouseEvent(e)){this.parent.element.style.height=e.clientY-t.top+"px",this.parent.element.style.width=(this.parent.enableRtl?t.right-e.clientX:e.clientX-t.left)+"px";var i=this.parent.getToolbarElement();if(null!==i&&i.classList.contains("e-rte-tb-float")&&this.parent.toolbarSettings.enableFloating&&this.parent.getToolbar()&&!this.parent.inlineMode.enable){var s=this.parent.contentPanel.getBoundingClientRect().width;i.style.width=s+"px"}}else{var n="msie"!==sf.base.Browser.info.name?e.touches[0]:e;this.parent.element.style.height=n.clientY-t.top+"px",this.parent.element.style.width=(this.parent.enableRtl?t.right-n.clientX:n.clientX-t.left)+"px"}this.parent.refresh()},e.prototype.stopResize=function(e){this.parent.refresh(),this.unwireResizeEvents();this.parent.onResizeStopEnabled&&this.parent.dotNetRef.invokeMethodAsync("ResizeStopEvent",{requestType:"editor"})},e.prototype.getEventType=function(e){return e.indexOf("mouse")>-1?"mouse":"touch"},e.prototype.isMouseEvent=function(e){var t=!1;return("mouse"===this.getEventType(e.type)||!sf.base.isNullOrUndefined(e.pointerType)&&"mouse"===this.getEventType(e.pointerType))&&(t=!0),t},e.prototype.wireResizeEvents=function(){sf.base.EventHandler.add(document,"mousemove",this.performResize,this),sf.base.EventHandler.add(document,"mouseup",this.stopResize,this),this.touchMoveEvent="msie"===sf.base.Browser.info.name?"pointermove":"touchmove",this.touchEndEvent="msie"===sf.base.Browser.info.name?"pointerup":"touchend",sf.base.EventHandler.add(document,this.touchMoveEvent,this.performResize,this),sf.base.EventHandler.add(document,this.touchEndEvent,this.stopResize,this)},e.prototype.unwireResizeEvents=function(){sf.base.EventHandler.remove(document,"mousemove",this.performResize),sf.base.EventHandler.remove(document,"mouseup",this.stopResize),sf.base.EventHandler.remove(document,this.touchMoveEvent,this.performResize),sf.base.EventHandler.remove(document,this.touchEndEvent,this.stopResize)},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.removeEventListener=function(){this.parent.element.classList.remove("e-rte-resize"),sf.base.EventHandler.remove(this.resizer,"mousedown",this.resizeStart),sf.base.EventHandler.remove(this.resizer,this.touchStartEvent,this.resizeStart),this.resizer&&sf.base.detach(this.resizer),this.parent.observer.off(t,this.destroy)},e}(),p=["a","abbr","acronym","audio","b","bdi","bdo","big","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","font","i","iframe","img","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","script","select","slot","small","span","strong","strike","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"];function u(){var e=!1;return sf.base.Browser.isDevice&&sf.base.Browser.isIos&&(e=!0),e}function f(e,t){if("BODY"===e.nodeName&&!sf.base.isNullOrUndefined(t)){var i=top.window.document.querySelector(t);sf.base.isNullOrUndefined(i)||i.contentWindow.focus()}}var g,m,v,b=["a","abbr","acronym","audio","b","bdi","bdo","big","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","font","i","iframe","img","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","script","select","slot","small","span","strong","strike","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"],y={bold:{command:"Style",subCommand:"Bold",value:"strong"},italic:{command:"Style",subCommand:"Italic",value:"em"},underline:{command:"Style",subCommand:"Underline",value:"span"},strikeThrough:{command:"Style",subCommand:"StrikeThrough",value:"span"},insertCode:{command:"Formats",subCommand:"Pre",value:"pre"},superscript:{command:"Effects",subCommand:"SuperScript",value:"sup"},subscript:{command:"Effects",subCommand:"SubScript",value:"sub"},uppercase:{command:"Casing",subCommand:"UpperCase"},lowercase:{command:"Casing",subCommand:"LowerCase"},fontColor:{command:"font",subCommand:"fontcolor",value:"#ff0000"},fontName:{command:"font",subCommand:"fontname",value:"Segoe UI"},fontSize:{command:"font",subCommand:"fontsize",value:"10pt"},backColor:{command:"font",subCommand:"backgroundcolor",value:"#ffff00"},justifyCenter:{command:"Alignments",subCommand:"JustifyCenter"},justifyFull:{command:"Alignments",subCommand:"JustifyFull"},justifyLeft:{command:"Alignments",subCommand:"JustifyLeft"},justifyRight:{command:"Alignments",subCommand:"JustifyRight"},undo:{command:"Actions",subCommand:"Undo"},redo:{command:"Actions",subCommand:"Redo"},createLink:{command:"Links",subCommand:"createLink"},editLink:{command:"Links",subCommand:"createLink"},createImage:{command:"Images",subCommand:"Images"},formatBlock:{command:"Formats",value:"P"},heading:{command:"Formats",value:"H1"},indent:{command:"Indents",subCommand:"Indent"},outdent:{command:"Indents",subCommand:"Outdent"},insertHTML:{command:"InsertHTML",subCommand:"InsertHTML",value:""},insertText:{command:"InsertText",subCommand:"InsertText",value:""},insertHorizontalRule:{command:"InsertHTML",subCommand:"InsertHTML",value:"<hr/>"},insertImage:{command:"Images",subCommand:"Image"},editImage:{command:"Images",subCommand:"Image"},insertTable:{command:"Table",subCommand:"CreateTable"},insertBrOnReturn:{command:"InsertHTML",subCommand:"InsertHTML",value:"<br/>"},insertOrderedList:{command:"Lists",value:"OL"},insertUnorderedList:{command:"Lists",value:"UL"},insertParagraph:{command:"Formats",value:"P"},removeFormat:{command:"Clear",subCommand:"ClearFormat"}};function M(e,t){if(t.enableHtmlSanitizer){var i=sf.base.SanitizeHtmlHelper.beforeSanitize();if(sf.base.extend(i,i,{cancel:!1,helper:null}),!sf.base.isNullOrUndefined(t.deniedSanitizeSelectors)&&t.deniedSanitizeSelectors.length>0)for(var s=function(e){for(var s=0;s<i.selectors.tags.length;s++)i.selectors.tags[s]===t.deniedSanitizeSelectors[e]&&(i.selectors.tags=i.selectors.tags.filter((function(i){return i!=t.deniedSanitizeSelectors[e]})));for(var n=function(s){(i.selectors.attributes[s].attribute||i.selectors.attributes[s].selector)===t.deniedSanitizeSelectors[e]&&(i.selectors.attributes=i.selectors.attributes.filter((function(e){return e!=i.selectors.attributes[s]})))},o=0;o<i.selectors.attributes.length;o++)n(o)},n=0;n<t.deniedSanitizeSelectors.length;n++)s(n);return i.cancel||(e=sf.base.SanitizeHtmlHelper.serializeValue(i,e)),e}return e}function C(e,t){var i=-1;return t.some((function(t,s){return!sf.base.isNullOrUndefined(t)&&"string"==typeof t.subCommand&&e===t.subCommand.toLocaleLowerCase()&&(i=s,!0)})),i}function w(e,t,i,s){for(var n,o,r=0;r<e.length;r++){if("value"===i&&e[r].value.toLocaleLowerCase()===t.toLocaleLowerCase()){n=e[r];break}if("text"===i&&e[r].text.toLocaleLowerCase()===t.toLocaleLowerCase()){n=e[r];break}if("subCommand"===i&&e[r].subCommand.toLocaleLowerCase()===t.toLocaleLowerCase()){n=e[r];break}}if(!sf.base.isNullOrUndefined(n))switch(s){case"text":o=n.text;break;case"value":o=n.value;break;case"cssClass":o=n.cssClass}return o}function S(e,t){var i;return null!==e&&""!==e?(i=t.enableHtmlEncode?t.encode(x(O(e),t)):x(e,t),t.value=i):i="DIV"===t.enterKey?t.enableHtmlEncode?"&lt;div&gt;&lt;br/&gt;&lt;/div&gt;":"<div><br/></div>":"BR"===t.enterKey?t.enableHtmlEncode?"&lt;br/&gt;":"<br/>":t.enableHtmlEncode?"&lt;p&gt;&lt;br/&gt;&lt;/p&gt;":"<p><br/></p>",i}function N(e){return"DIV"===e.enterKey?"<div><br/></div>":"BR"===e.enterKey?"<br/>":"<p><br/></p>"}function x(e,t){var i=document.createElement("div"),s=document.createElement("div"),n=i.childNodes;if(i.innerHTML=e,i.setAttribute("class","tempDiv"),n.length>0){for(var o=void 0,r=void 0,a=void 0;i.firstChild;)"BR"!==t.enterKey&&("#text"===i.firstChild.nodeName&&(i.firstChild.textContent.indexOf("\n")<0||""!==i.firstChild.textContent.trim())||b.indexOf(i.firstChild.nodeName.toLocaleLowerCase())>=0)?(o?r.appendChild(i.firstChild):(a="DIV"===t.enterKey?sf.base.createElement("div"):sf.base.createElement("p"),s.appendChild(a),a.appendChild(i.firstChild)),r=a,o=!0):"#text"===i.firstChild.nodeName&&("\n"===i.firstChild.textContent||i.firstChild.textContent.indexOf("\n")>=0&&""===i.firstChild.textContent.trim())?sf.base.detach(i.firstChild):(s.appendChild(i.firstChild),o=!1);for(var l=s.querySelectorAll("img"),h=0;h<l.length;h++)l[h].classList.contains("e-rte-image")||l[h].classList.add("e-rte-image"),l[h].classList.contains("e-imginline")||l[h].classList.contains("e-imgbreak")||l[h].classList.add("e-imginline")}return s.innerHTML}function O(e){return e.replace(/&amp;/g,"&").replace(/&amp;lt;/g,"<").replace(/&lt;/g,"<").replace(/&amp;gt;/g,">").replace(/&gt;/g,">").replace(/&nbsp;/g," ").replace(/&amp;nbsp;/g," ").replace(/&quot;/g,"")}function E(e,t){var i=document.createEvent("HTMLEvents");i.initEvent(t,!1,!0),e.dispatchEvent(i)}function I(e,t){var i=!1;return e.classList.contains(t)&&(i=!0),i}function D(e){var t=sf.base.createElement("template");return t.innerHTML=e,t.content instanceof DocumentFragment?t.content:document.createRange().createContextualFragment(e)}function T(e){for(var t=e.split(","),i=t[0].match(/:(.*?);/)[1],s=atob(t[1]),n=s.length,o=new Uint8Array(n);n--;)o[n]=s.charCodeAt(n);return new Blob([o],{type:i})}function j(e){return sf.base.isNullOrUndefined(e)?"":e}function A(e,t){e.dropDownModule;for(var i=e.args,s=0,n=Object.keys(e.args);s<n.length;s++)for(var o=n[s],r=0;r<e.tbItems.length;r++){var a=e.tbItems[r]&&e.tbItems[r].subCommand,l=a&&a.toLocaleLowerCase();if(a&&l===o||"UL"===a&&"unorderedlist"===o||"OL"===a&&"orderedlist"===o||"pre"===l&&"insertcode"===o)if("boolean"==typeof i[o])!0===i[o]?sf.base.addClass([e.tbElements[r]],["e-active"]):sf.base.removeClass([e.tbElements[r]],["e-active"]);else if(("string"==typeof i[o]||null===i[o])&&C(o,e.parent.toolbarSettings.items)>-1){var h=i[o]?i[o]:"",d="",c=void 0;switch(o){case"formats":if(t)break;var p=e.parent.format.items;d=w(p,h,"subCommand","text");var u=sf.base.isNullOrUndefined(e.parent.format.default)?p[0].text:e.parent.format.default;(c=e.tbElements[r].querySelector(".e-rte-dropdown-btn-text")).innerText=sf.base.isNullOrUndefined(d)?u:d,c.parentElement.style.width=e.parent.format.width;break;case"alignments":d=w(e.parent.alignments,h,"subCommand","cssClass"),c=e.tbElements[r].querySelector(".e-btn-icon.e-icons"),sf.base.removeClass([c],["e-justify-left","e-justify-center","e-justify-right","e-justify-full"]),sf.base.addClass([c],sf.base.isNullOrUndefined(d)?["e-icons","e-justify-left"]:d.split(" "));break;case"fontname":if(t)break;var f=e.parent.fontFamily.items;d=w(f,h,"value","text");var g=sf.base.isNullOrUndefined(e.parent.fontFamily.default)?f[0].text:e.parent.fontFamily.default,m=sf.base.isNullOrUndefined(d)?g:d;e.tbElements[r].title=m,(c=e.tbElements[r].querySelector(".e-rte-dropdown-btn-text")).innerText=m,c.parentElement.style.width=e.parent.fontFamily.width;break;case"fontsize":var v=e.parent.fontSize.items,b=sf.base.isNullOrUndefined(e.parent.fontSize.default)?v[1].value:e.parent.fontSize.default;d=w(v,""===h?b.replace(/\s/g,""):h,"value","text"),(c=e.tbElements[r].querySelector(".e-rte-dropdown-btn-text")).innerText=j(d),c.parentElement.style.width=e.parent.fontSize.width}}}}!function(e){e[e.Toolbar=0]="Toolbar",e[e.Content=1]="Content",e[e.Popup=2]="Popup",e[e.LinkToolbar=3]="LinkToolbar",e[e.TextToolbar=4]="TextToolbar",e[e.ImageToolbar=5]="ImageToolbar",e[e.AudioToolbar=6]="AudioToolbar",e[e.VideoToolbar=7]="VideoToolbar",e[e.InlineToolbar=8]="InlineToolbar",e[e.TableToolbar=9]="TableToolbar"}(g||(g={})),function(e){e.Expand="Expand",e.MultiRow="MultiRow",e.Scrollable="Scrollable"}(m||(m={})),function(e){e.InsertLink="InsertLink",e.InsertImage="InsertImage",e.InsertAudio="InsertAudio",e.InsertVideo="InsertVideo",e.InsertTable="InsertTable"}(v||(v={}));var z,L,k=function(){function e(e){this.isToolbar=!1,this.isTransformChild=!1,this.parent=e,this.tbElement=this.parent.getToolbarElement(),this.checkIsTransformChild(),this.addEventListener(),this.wireEvents()}return e.prototype.getToolbarHeight=function(){return this.parent.getToolbar().offsetHeight},e.prototype.getExpandTBarPopHeight=function(){var e=0;if(this.parent.toolbarSettings.type===m.Expand&&this.parent.getToolbar().classList.contains("e-extended-toolbar")){var t=sf.base.select(".e-toolbar-extended",this.parent.getToolbar());t&&this.parent.getToolbar().classList.contains("e-expand-open")||t&&t.classList.contains("e-popup-open")?(sf.base.addClass([t],["e-visible"]),e+=t.offsetHeight,sf.base.removeClass([t],["e-visible"])):sf.base.removeClass([this.parent.getToolbar()],["e-expand-open"])}return e},e.prototype.updateToolbarStatus=function(e){this.parent.getToolbarElement()&&(!this.parent.inlineMode.enable||!u()&&sf.base.Browser.isDevice)&&A({args:e,dropDownModule:null,parent:this.parent,tbElements:sf.base.selectAll(".e-toolbar-item:not(.e-rte-custom-toolbar)",this.parent.getToolbarElement()),tbItems:this.parent.toolbarSettings.items},!!this.parent.inlineMode.enable)},e.prototype.checkIsTransformChild=function(){this.isTransformChild=!1;for(var e=sf.base.selectAll('[style*="transform"]',document),t=0;t<e.length;t++)if(!sf.base.isNullOrUndefined(e[t].contains)&&e[t].contains(this.parent.element)){this.isTransformChild=!0;break}},e.prototype.toggleFloatClass=function(e){var t,i,s=!1,n=!1,o=this.parent.floatingToolbarOffset;e&&this.parent.iframeSettings.enable&&this.parent.inputElement.ownerDocument===e.target?i=e.target.body:e&&e.target!==document?i=e.target:(s=!0,i=document.body);var r=this.getToolbarHeight()+this.getExpandTBarPopHeight();if(this.isTransformChild){t=0;var a=0,l=this.parent.element.offsetHeight;if(s){var h=window.getComputedStyle(i);a=parseFloat(h.marginTop.split("px")[0])+parseFloat(h.paddingTop.split("px")[0])}var d=this.parent.element.getBoundingClientRect().top,c=sf.base.Browser.isMSPointer&&s?window.pageYOffset:i.parentElement.scrollTop,p=i.getBoundingClientRect(),u=s?p.top+c:p.top;d>u+o||d<-l||d<0&&!(d-(s?0:u)+l>r+o)?(n=!1,sf.base.removeClass([this.tbElement],["e-rte-tb-abs-float"])):d<u+o&&(t=d<0?-d+u:u-d,t=s?t-a:t,sf.base.addClass([this.tbElement],["e-rte-tb-abs-float"]),n=!0)}else{var f=this.parent.element.getBoundingClientRect();if(window.innerHeight<f.top)return;t=e&&e.target!==document?i.getBoundingClientRect().top:0,f.bottom<o+r+t||f.bottom<0||f.top>o+t?n=!1:f.top<o&&(n=!0)}n?(sf.base.addClass([this.tbElement],["e-rte-tb-float"]),sf.base.setStyleAttribute(this.tbElement,{width:this.parent.element.offsetWidth+"px",top:o+t+"px"})):(sf.base.removeClass([this.tbElement],["e-rte-tb-float"]),sf.base.setStyleAttribute(this.tbElement,{top:"0px",width:"100%"}))},e.prototype.getDOMVisibility=function(e){return!(!e.offsetParent&&0===e.offsetWidth&&0===e.offsetHeight)},e.prototype.showFixedTBar=function(){this.tbElement=this.parent.getToolbarElement(),sf.base.addClass([this.tbElement],["e-show"]),sf.base.Browser.isIos&&sf.base.addClass([this.tbElement],["e-tbar-ios-fixed"])},e.prototype.hideFixedTBar=function(){this.tbElement=this.parent.getToolbarElement(),this.isToolbar?this.isToolbar=!1:sf.base.removeClass([this.tbElement],["e-show","e-tbar-ios-fixed"])},e.prototype.dropDownBeforeOpenHandler=function(e){this.isToolbar=!0,!sf.base.isNullOrUndefined(sf.base.closest(e.element,".e-rte-toolbar"))&&sf.base.isNullOrUndefined(sf.base.closest(e.element,".e-rte-quick-toolbar"))&&this.parent.hideTableQuickToolbar()},e.prototype.addEventListener=function(){this.parent.observer.on("scroll",this.scrollHandler,this),this.parent.observer.on("refresh-begin",this.onRefresh,this),this.parent.observer.on(a,this.mouseDownHandler,this),this.parent.observer.on("focusChange",this.focusChangeHandler,this),this.parent.observer.on("toolbar-updated",this.updateToolbarStatus,this),this.parent.observer.on("beforeDropDownOpen",this.dropDownBeforeOpenHandler,this)},e.prototype.removeEventListener=function(){this.parent.observer.off("scroll",this.scrollHandler),this.parent.observer.off("refresh-begin",this.onRefresh),this.parent.observer.off(a,this.mouseDownHandler),this.parent.observer.off("focusChange",this.focusChangeHandler),this.parent.observer.off("toolbar-updated",this.updateToolbarStatus),this.parent.observer.off("beforeDropDownOpen",this.dropDownBeforeOpenHandler)},e.prototype.wireEvents=function(){this.parent.inlineMode.enable&&u()||(this.tbElement=this.parent.getToolbarElement(),this.tbElement&&(sf.base.EventHandler.add(this.tbElement,"focusin",this.tbFocusHandler,this),sf.base.EventHandler.add(this.tbElement,"keydown",this.tbKeydownHandler,this),this.parent.inlineMode.enable||(this.keyBoardModule=new sf.base.KeyboardEvents(this.tbElement,{eventName:"keydown",keyAction:this.toolBarKeyDown.bind(this),keyConfigs:this.parent.formatter&&this.parent.formatter.keyConfig}))))},e.prototype.unWireEvents=function(){this.tbElement&&(sf.base.EventHandler.remove(this.tbElement,"focusin",this.tbFocusHandler),sf.base.EventHandler.remove(this.tbElement,"keydown",this.tbKeydownHandler))},e.prototype.onRefresh=function(){this.parent.dotNetRef.invokeMethodAsync("RefreshToolbarOverflow"),this.parent.setContentHeight("",!0)},e.prototype.tbFocusHandler=function(e){var t=document.activeElement,i=sf.base.closest(t,".e-rte-toolbar");if(t===this.parent.getToolbarElement()||i===this.parent.getToolbarElement())for(var s=this.parent.getToolbarElement().querySelectorAll(".e-expended-nav"),n=0;n<s.length;n++)sf.base.isNullOrUndefined(this.parent.getToolbarElement().querySelector(".e-insert-table-btn"))?s[n].setAttribute("tabindex","0"):s[n].setAttribute("tabindex","1")},e.prototype.tbKeydownHandler=function(e){(e.target.classList.contains("e-dropdown-btn")||e.target.getAttribute("id")===this.parent.id+"_toolbar_CreateTable")&&e.target.setAttribute("tabindex","0")},e.prototype.toolBarKeyDown=function(e){switch(e.action){case"escape":this.parent.getEditPanel().focus()}},e.prototype.scrollHandler=function(e){this.parent.inlineMode.enable||(this.tbElement=this.parent.getToolbarElement(),this.parent.toolbarSettings.enableFloating&&this.getDOMVisibility(this.tbElement)&&this.toggleFloatClass(e.args))},e.prototype.mouseDownHandler=function(){sf.base.Browser.isDevice&&this.parent.inlineMode.enable&&!u()&&this.showFixedTBar()},e.prototype.focusChangeHandler=function(){sf.base.Browser.isDevice&&this.parent.inlineMode.enable&&!u()&&(this.isToolbar=!1,this.hideFixedTBar())},e.prototype.destroy=function(){this.removeEventListener(),this.unWireEvents()},e}(),P=function(){return(P=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},B=function(){function e(e){this.parent=e,this.rteId=this.parent.element.id,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on(t,this.destroy,this),this.parent.observer.on(n,this.onKeyDown,this),this.parent.observer.on("unLink",this.removeLink,this),this.parent.observer.on("insertLink",this.linkDialog,this),this.parent.observer.on("link-toolbar-action",this.onToolbarAction,this),this.parent.observer.on("iframe-click",this.onIframeMouseDown,this),this.parent.observer.on("editAreaClick",this.editAreaClickHandler,this),this.parent.observer.on("insertCompleted",this.showLinkQuickToolbar,this)},e.prototype.removeEventListener=function(){this.parent.observer.off(t,this.destroy),this.parent.observer.off(n,this.onKeyDown),this.parent.observer.off("unLink",this.removeLink),this.parent.observer.off("insertLink",this.linkDialog),this.parent.observer.off("link-toolbar-action",this.onToolbarAction),this.parent.observer.off("iframe-click",this.onIframeMouseDown),this.parent.observer.off("editAreaClick",this.editAreaClickHandler),this.parent.observer.off("insertCompleted",this.showLinkQuickToolbar),sf.base.EventHandler.remove(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick)},e.prototype.linkDialog=function(e,t){if("HTML"===this.parent.editorMode&&e.selectParent.length>0&&!sf.base.isNullOrUndefined(e.selectParent[0].classList)&&e.selectParent[0].classList.contains("e-rte-anchor")&&sf.base.isNullOrUndefined(t))this.editLink(e);else{this.selectionObj={selection:e.selection,selectParent:e.selectParent,args:e.args};var i={url:"",text:"",title:"",target:!0};sf.base.isNullOrUndefined(t)||(i={url:t.url,text:t.text,title:t.title,target:""!==t.target});var s="HTML"===this.parent.editorMode?e.selection.getRange(this.parent.getDocument()).toString():e.text;("HTML"===this.parent.editorMode&&sf.base.isNullOrUndefined(t)&&(!sf.base.isNullOrUndefined(s)&&""!==s&&0===e.selection.range.startOffset||e.selection.range.startOffset!==e.selection.range.endOffset)||"Markdown"===e.module)&&(i.text=s),sf.base.EventHandler.add(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick,this),sf.base.isNullOrUndefined(sf.base.select(".e-rte-link-dialog",this.parent.element))?this.parent.dotNetRef.invokeMethodAsync("ShowLinkDialog",i,sf.base.isNullOrUndefined(t)?null:"Edit"):this.parent.dotNetRef.invokeMethodAsync("CloseLinkDialog"),this.quickToolObj&&(this.hideLinkQuickToolbar(),this.quickToolObj.hideInlineQTBar())}},e.prototype.insertLink=function(e){var t,i=e.url,s=e.text;"HTML"===this.parent.editorMode&&(t=e.title);var n=e.target?"_blank":null;if(""!==i){if(this.isUrl(i)?this.checkUrl(!1):(s=""===s?i:s,i=this.parent.enableAutoUrl||i.indexOf("http")>-1?i:"http://"+i),"HTML"===this.parent.editorMode&&sf.base.isNullOrUndefined(sf.base.closest(this.selectionObj.selection.range.startContainer.parentNode,"#"+this.parent.getPanel().id))){this.parent.getEditPanel().focus(),sf.base.Browser.isIE&&this.parent.iframeSettings.enable&&this.selectionObj.selection.restore();var o=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument());this.selectionObj.selection=this.parent.formatter.editorManager.nodeSelection.save(o,this.parent.getDocument()),this.selectionObj.selectParent=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(o)}var r,a={url:i,text:s,title:t,target:n,selection:this.selectionObj.selection,selectParent:this.selectionObj.selectParent};if(this.parent.dotNetRef.invokeMethodAsync("CloseLinkDialog"),u()&&this.parent.iframeSettings.enable&&sf.base.select("iframe",this.parent.element).contentWindow.focus(),"HTML"===this.parent.editorMode&&this.selectionObj.selection.restore(),0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),sf.base.isNullOrUndefined(this.selectionObj.args)||"KeyK"!==this.selectionObj.args.code)r=this.selectionObj.args;else{var l=this.selectionObj.args,h={item:{command:"Links",subCommand:"CreateLink"},originalEvent:l=P({},l,{target:null})};sf.base.extend(this.selectionObj.args,h,!0),r=h}this.parent.formatter.process(this.parent,r,!sf.base.isNullOrUndefined(this.selectionObj.args)&&this.selectionObj.args.originalEvent,a),this.parent.getEditPanel().focus()}else this.checkUrl(!0)},e.prototype.isUrl=function(e){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/gi.test(e)},e.prototype.checkUrl=function(e){var t=this.parent.element.querySelector(".e-rte-link-dialog .e-rte-linkurl");e?(sf.base.addClass([t],"e-error"),t.setSelectionRange(0,t.value.length),t.focus()):sf.base.removeClass([t],"e-error")},e.prototype.cancelDialog=function(){u()?this.selectionObj.selection.restore():this.parent.getEditPanel().focus()},e.prototype.linkDialogClosed=function(){"HTML"===this.parent.editorMode?this.selectionObj.selection.restore():this.parent.formatter.editorManager.markdownSelection.restore(this.parent.getEditPanel())},e.prototype.getAnchorNode=function(e){var t=sf.base.closest(e,"a");return t||e},e.prototype.openLink=function(e){var t=this.getAnchorNode(e.selectParent[0]);(t.classList.contains("e-rte-anchor")||"A"===t.tagName)&&this.parent.formatter.process(this.parent,e.args,e.args,{url:t.href,text:t.innerText,target:""===t.target?"_self":"_blank",selectNode:e.selectNode,subCommand:e.args.item.subCommand})},e.prototype.editLink=function(e){var t=this.getAnchorNode(e.selectNode[0]),i=this.getAnchorNode(e.selectParent[0]);if((i="A"===t.nodeName?t:i).classList.contains("e-rte-anchor")||"A"===i.tagName){var s={url:i.getAttribute("href"),text:i.innerText,title:i.title,target:i.target};this.linkDialog(e,s)}},e.prototype.removeLink=function(e){0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData();var t=this.getAnchorNode(e.selectParent[0]);this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,selectParent:e.selectParent,selection:e.selection,text:t.innerText,subCommand:e.args.item.subCommand}),u()&&this.parent.iframeSettings.enable?sf.base.select("iframe",this.parent.element).contentWindow.focus():this.parent.getEditPanel().focus(),this.hideLinkQuickToolbar()},e.prototype.onToolbarAction=function(e){switch(e.args.item.subCommand){case"OpenLink":this.openLink(e);break;case"EditLink":this.editLink(e);break;case"RemoveLink":this.removeLink(e)}},e.prototype.editAreaClickHandler=function(e){if(this.parent.readonly)this.hideLinkQuickToolbar();else{var t=e.args,i=this.parent.quickToolbarSettings.showOnRightClick;if(!(2===t.which||i&&1===t.which||!i&&3===t.which)&&"HTML"===this.parent.editorMode&&this.parent.quickToolbarModule){var s=t.target;s=this.getAnchorNode(s);var n;if(n=document.body.querySelector("#"+this.rteId+"_Link_Quick_Popup").classList.contains("e-rte-pop"),"A"===s.nodeName&&s.childNodes.length>0&&"IMG"!==s.childNodes[0].nodeName&&"IMG"!==e.args.target.nodeName){if(n)return;this.showLinkQuickToolbar({args:t,isNotify:!1,type:"Links",elements:[t.target]})}else this.hideLinkQuickToolbar()}}},e.prototype.showLinkQuickToolbar=function(e){if("enter"!==e.args.action&&"space"!==e.args.action){var t=void 0,i=void 0;if("Links"!==e.type||sf.base.isNullOrUndefined(this.parent.quickToolbarModule))return;this.quickToolObj=this.parent.quickToolbarModule;var s,n=this.parent.element.getBoundingClientRect().top,o=this.parent.element.getBoundingClientRect().left,r=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),a=this.parent.getToolbarElement(),l=a?a.offsetHeight+this.parent.toolbarModule.getExpandTBarPopHeight():0;if([].forEach.call(e.elements,(function(e,t){0===t&&(s="#text"===e.nodeName?e.parentNode:e)})),e.isNotify){var h=s.getBoundingClientRect(),d=h.top,c=h.left,p=d-n;t=this.parent.iframeSettings.enable?o+c:c,i=window.pageYOffset+(this.parent.iframeSettings.enable?n+l+d:n+p)}else{var u=void 0;u=e.args.touches?e.args.changedTouches[0]:u=e.args,t=this.parent.iframeSettings.enable?window.pageXOffset+o+u.clientX:u.pageX,i=this.parent.iframeSettings.enable?window.pageYOffset+n+l+u.clientY:u.pageY}this.quickToolObj.showLinkQTBar(t,i,r.endContainer,"Link")}},e.prototype.hideLinkQuickToolbar=function(){this.quickToolObj&&this.quickToolObj.hideLinkQTBar()},e.prototype.showDialog=function(e,t){if(e&&this.parent.getEditPanel().focus(),"HTML"===this.parent.editorMode){var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),s=this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.getDocument()),n=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(i),o=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(i),r={args:e?{item:{command:"Links",subCommand:"CreateLink"},originalEvent:void 0}:t.args,selectNode:n,selection:s,selectParent:o};this.linkDialog(r)}else{var a=this.parent.getEditPanel();this.parent.formatter.editorManager.markdownSelection.save(a.selectionStart,a.selectionEnd),this.linkDialog({args:{item:{command:"Links",subCommand:"Link"},originalEvent:e?void 0:t.args},member:"link",text:this.parent.formatter.editorManager.markdownSelection.getSelectedText(this.parent.getEditPanel()),module:"Markdown",name:"insertLink"})}},e.prototype.onKeyDown=function(e){var t=e.args;switch(t.action){case"escape":this.parent.dotNetRef.invokeMethodAsync("CloseLinkDialog");break;case"insert-link":this.showDialog(!1,e),t.preventDefault()}},e.prototype.onDocumentClick=function(e){var t=e.target,i="#"+this.rteId+"_rtelink",s=this.parent.getToolbarElement(),n="#"+this.rteId+"_toolbar_CreateLink",o=this.parent.element.querySelector(i);!sf.base.isNullOrUndefined(o)&&(!sf.base.closest(t,i)&&this.parent.toolbarSettings.enable&&s&&!s.contains(e.target)||(s&&s.contains(e.target)||this.parent.inlineMode.enable&&!sf.base.closest(t,i))&&!sf.base.closest(t,n)&&!t.querySelector(n))&&(this.parent.dotNetRef.invokeMethodAsync("CloseLinkDialog"),sf.base.EventHandler.remove(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick),this.parent.isBlur=!0,sf.base.Browser.isIE&&E(this.parent.element,"focusout"))},e.prototype.onIframeMouseDown=function(){this.parent.dotNetRef.invokeMethodAsync("CloseLinkDialog")},e.prototype.destroy=function(){this.removeEventListener()},e}(),U=function(){function s(e){this.pageX=null,this.pageY=null,this.moveEle=null,this.rzProgress=!1,this.ensureInsideTableList=!0,this.currentColumnResize="",this.currentMarginLeft=0,this.parent=e,this.addEventListener()}return s.prototype.addEventListener=function(){this.parent.observer.on(i,this.keyUp,this),this.parent.observer.on(n,this.keyDown,this),this.parent.observer.on(t,this.destroy,this),this.parent.observer.on("docClick",this.docClick,this),this.parent.observer.on(e,this.afterRender,this),this.parent.observer.on("mouseUp",this.selectionTable,this),this.parent.observer.on("createTable",this.renderDlgContent,this),this.parent.observer.on("dropDownSelect",this.dropdownSelect,this),this.parent.observer.on("iframe-click",this.onIframeMouseDown,this),this.parent.observer.on("editAreaClick",this.editAreaClickHandler,this),this.parent.observer.on("table-toolbar-action",this.onToolbarAction,this)},s.prototype.removeEventListener=function(){this.parent.observer.off(i,this.keyUp),this.parent.observer.off(n,this.keyDown),this.parent.observer.off(t,this.destroy),this.parent.observer.off("docClick",this.docClick),this.parent.observer.off(a,this.cellSelect),this.parent.observer.off(e,this.afterRender),this.parent.observer.off("mouseUp",this.selectionTable),this.parent.observer.off("createTable",this.renderDlgContent),this.parent.observer.off("dropDownSelect",this.dropdownSelect),this.parent.observer.off("iframe-click",this.onIframeMouseDown),this.parent.observer.off("tableColorPickerChanged",this.setBGColor),this.parent.observer.off("editAreaClick",this.editAreaClickHandler),this.parent.observer.off("table-toolbar-action",this.onToolbarAction)},s.prototype.afterRender=function(){this.parent.observer.on(a,this.cellSelect,this),this.parent.observer.on("tableColorPickerChanged",this.setBGColor,this),this.parent.tableSettings.resize&&sf.base.EventHandler.add(this.parent.getEditPanel(),sf.base.Browser.touchStartEvent,this.resizeStart,this),!sf.base.Browser.isDevice&&this.parent.tableSettings.resize&&sf.base.EventHandler.add(this.parent.getEditPanel(),"mouseover",this.resizeHelper,this)},s.prototype.selectionTable=function(e){var t=e.args.target;"mozilla"!==sf.base.Browser.info.name||sf.base.isNullOrUndefined(sf.base.closest(t,"table"))||"TABLE"!==sf.base.closest(t,"table").tagName||this.parent.getEditPanel().setAttribute("contenteditable","true")},s.prototype.tabSelection=function(e,t,i){var s=this.insideList(t.range);if((37!==e.keyCode&&39!==e.keyCode||3!==t.range.startContainer.nodeType)&&!s)if(e.preventDefault(),i.classList.remove("e-cell-select"),e.shiftKey||37===e.keyCode){var n=sf.base.isNullOrUndefined(i.previousSibling)?sf.base.isNullOrUndefined(sf.base.closest(i,"tr").previousSibling)?sf.base.isNullOrUndefined(sf.base.closest(i,"table").previousSibling)?i:"td"===sf.base.closest(i,"table").previousSibling.nodeName.toLowerCase()?sf.base.closest(i,"table").previousSibling:i:sf.base.closest(i,"tr").previousSibling.childNodes[sf.base.closest(i,"tr").previousSibling.childNodes.length-1]:i.previousSibling;if(i===n&&0===i.cellIndex&&sf.base.closest(i,"table").tHead){var o=sf.base.closest(i,"table");n=o.rows[0].cells[o.rows[0].cells.length-1]}37===e.keyCode&&i===n&&(n=sf.base.closest(i,"table").previousSibling),n&&(""!==n.textContent.trim()&&sf.base.closest(n,"td")?t.setSelectionNode(this.parent.getDocument(),n):t.setSelectionText(this.parent.getDocument(),n,n,0,0))}else{var r=sf.base.isNullOrUndefined(i.nextSibling)?sf.base.isNullOrUndefined(sf.base.closest(i,"tr").nextSibling)?sf.base.isNullOrUndefined(sf.base.closest(i,"table").nextSibling)?i:"td"===sf.base.closest(i,"table").nextSibling.nodeName.toLowerCase()?sf.base.closest(i,"table").nextSibling:i:sf.base.closest(i,"tr").nextSibling.childNodes[0]:i.nextSibling;i===r&&"TH"===i.nodeName&&(r=sf.base.closest(i,"table").rows[1].cells[0]),39===e.keyCode&&i===r&&(r=sf.base.closest(i,"table").nextSibling),r&&(""!==r.textContent.trim()&&sf.base.closest(r,"td")?t.setSelectionNode(this.parent.getDocument(),r):t.setSelectionText(this.parent.getDocument(),r,r,0,0)),i===r&&39!==e.keyCode&&r&&(i.classList.add("e-cell-select"),this.addRow(t,e,!0),i.classList.remove("e-cell-select"),""!==(r=r.parentElement.nextSibling?r.parentElement.nextSibling.firstChild:r.parentElement.firstChild).textContent.trim()&&sf.base.closest(r,"td")?t.setSelectionNode(this.parent.getDocument(),r):t.setSelectionText(this.parent.getDocument(),r,r,0,0))}},s.prototype.insideList=function(e){for(var t=this.parent.formatter.editorManager.domNode.blockNodes(),i=[],s=0;s<t.length;s++)"LI"===t[s].parentNode.tagName?i.push(t[s].parentNode):"LI"===t[s].tagName&&"P"!==t[s].childNodes[0].tagName&&"OL"!==t[s].childNodes[0].tagName&&"UL"!==t[s].childNodes[0].tagName&&i.push(t[s]);return i.length>1||i.length&&0===e.startOffset&&0===e.endOffset?(this.ensureInsideTableList=!0,!0):(this.ensureInsideTableList=!1,!1)},s.prototype.tableArrowNavigation=function(e,t,i){var s=t.range.startContainer;40===e.keyCode&&3===s.nodeType&&(s.nextSibling&&"BR"===s.nextSibling.nodeName||s.parentNode&&"TD"!==s.parentNode.nodeName)||38===e.keyCode&&3===s.nodeType&&(s.previousSibling&&"BR"===s.previousSibling.nodeName||s.parentNode&&"TD"!==s.parentNode.nodeName)||(e.preventDefault(),i.classList.remove("e-cell-select"),(i=40===e.keyCode?sf.base.isNullOrUndefined(sf.base.closest(i,"tr").nextSibling)?sf.base.closest(i,"table").tHead&&"TH"===i.nodeName?sf.base.closest(i,"table").rows[1].cells[i.cellIndex]:sf.base.isNullOrUndefined(sf.base.closest(i,"table").nextSibling)?i:sf.base.closest(i,"table").nextSibling:sf.base.closest(i,"tr").nextSibling.children[i.cellIndex]:sf.base.isNullOrUndefined(sf.base.closest(i,"tr").previousSibling)?sf.base.closest(i,"table").tHead&&"TH"!==i.nodeName?sf.base.closest(i,"table").tHead.rows[0].cells[i.cellIndex]:sf.base.isNullOrUndefined(sf.base.closest(i,"table").previousSibling)?i:sf.base.closest(i,"table").previousSibling:sf.base.closest(i,"tr").previousSibling.children[i.cellIndex])&&t.setSelectionText(this.parent.getDocument(),i,i,0,0))},s.prototype.cellSelect=function(e){var t=e.args.target,i=sf.base.closest(t,"td,th");t="TD"!==t.nodeName&&i&&this.parent.getEditPanel().contains(i)?i:t,sf.base.removeClass(this.parent.getEditPanel().querySelectorAll("table td, table th"),"e-cell-select"),!t||"TD"!==t.tagName&&"TH"!==t.tagName||(t.removeAttribute("class"),sf.base.addClass([t],"e-cell-select"),this.activeCell=t,this.curTable=this.curTable?this.curTable:sf.base.closest(t,"table"),sf.base.EventHandler.add(this.curTable,"mousemove",this.tableMove,this),sf.base.EventHandler.add(this.curTable,"mouseup",this.tableMouseUp,this),this.removeResizeEle(),this.helper&&this.parent.getEditPanel().contains(this.helper)&&sf.base.detach(this.helper)),"mozilla"!==sf.base.Browser.info.name||sf.base.isNullOrUndefined(sf.base.closest(t,"table"))||"TABLE"!==sf.base.closest(t,"table").tagName||this.parent.getEditPanel().setAttribute("contenteditable","false")},s.prototype.tableMove=function(e){this.parent.formatter.editorManager.observer.notify("TABLE_MOVE",{event:e,selectNode:[this.activeCell]})},s.prototype.renderDlgContent=function(e){if(this.tableNotifyArgs=e,this.parent.observer.notify(o,{}),sf.base.Browser.isDevice||this.parent.inlineMode.enable)this.insertTableDialog();else{this.hideTableQuickToolbar();var t=this.parent.getToolbarElement(),i=this.parent.element.querySelector("#"+this.parent.element.id+"_toolbar_CreateTable"),s=0;s=this.parent.getToolbar().classList.contains("e-expand-open")?i.offsetTop+i.offsetHeight+t.offsetHeight:i.offsetTop+i.offsetHeight,sf.base.isNullOrUndefined(sf.base.select(".e-rte-table-popup",this.parent.element))?this.parent.dotNetRef.invokeMethodAsync("ShowCreateTableDialog",i.offsetLeft,s):this.parent.dotNetRef.invokeMethodAsync("CloseCreateTableDialog")}},s.prototype.createTablePopupOpened=function(){for(var e=sf.base.selectAll(".e-rte-table-popup .e-rte-table-row",this.parent.element),t=0;t<e.length;t++){sf.base.EventHandler.add(e[t],"mouseleave",this.tableCellLeave,this);for(var i=sf.base.selectAll(".e-rte-tablecell",e[t]),s=0;s<i.length;s++)sf.base.EventHandler.add(i[s],"mouseup",this.tableCellClick,this),sf.base.EventHandler.add(i[s],"mousemove",this.tableCellSelect,this)}var n=this.parent.element.querySelector(".e-rte-table-popup");n&&n.focus(),sf.base.isNullOrUndefined(this.parent.getToolbarElement().querySelector(".e-expended-nav"))||this.parent.getToolbarElement().querySelector(".e-expended-nav").setAttribute("tabindex","1")},s.prototype.insertTableDialog=function(){this.createDialog()},s.prototype.createDialog=function(e,t){e&&t?this.parent.dotNetRef.invokeMethodAsync("ShowEditTableDialog",e,t):this.parent.dotNetRef.invokeMethodAsync("ShowTableDialog"),this.quickToolObj&&this.quickToolObj.inlineQTBar&&document.body.contains(this.quickToolObj.inlineQTBar.element)&&this.quickToolObj.hideInlineQTBar()},s.prototype.tableCellSelect=function(e){var t=e.target,i=this.parent.element.querySelector(".e-rte-table-popup"),s=this.parent.element.querySelector(".e-rte-table-popup .e-rte-popup-header"),n=Array.prototype.slice.call(t.parentElement.parentElement.children).indexOf(t.parentElement),o=Array.prototype.slice.call(t.parentElement.children).indexOf(t),r=i.querySelectorAll(".e-rte-tablecell");Array.prototype.forEach.call(r,(function(e){var t=Array.prototype.slice.call(e.parentElement.parentElement.children).indexOf(e.parentElement),i=Array.prototype.slice.call(e.parentElement.children).indexOf(e);sf.base.removeClass([e],"e-active"),t<=n&&i<=o&&sf.base.addClass([e],"e-active")})),s.innerHTML=o+1+"x"+(n+1)},s.prototype.tableCellLeave=function(e){var t=this.parent.element.querySelector(".e-rte-table-popup"),i=this.parent.element.querySelector(".e-rte-table-popup .e-rte-popup-header");sf.base.removeClass(t.querySelectorAll(".e-rte-tablecell"),"e-active"),sf.base.addClass([t.querySelector(".e-rte-tablecell")],"e-active"),i.innerHTML="1x1"},s.prototype.tableCellClick=function(e){var t=e.target,i=Array.prototype.slice.call(t.parentElement.parentElement.children).indexOf(t.parentElement)+1,s=Array.prototype.slice.call(t.parentElement.children).indexOf(t)+1;this.tableInsert(i,s,"Create",this)},s.prototype.tableInsert=function(e,t,i,s){var n=s.self?s.self:this,o=this.tableNotifyArgs.selection.range.startContainer;"P"!==o.nodeName||""!==o.textContent.trim()||o.childNodes.length>0||(o.innerHTML="<br />");var l=o.parentNode;if("HTML"===n.parent.editorMode&&(n.parent.iframeSettings.enable&&!I(l.ownerDocument.querySelector("body"),"e-lib")||!n.parent.iframeSettings.enable&&sf.base.isNullOrUndefined(sf.base.closest(l,"#"+n.parent.getPanel().id)))){n.parent.getEditPanel().focus();var h=n.parent.formatter.editorManager.nodeSelection.getRange(n.parent.getDocument());this.tableNotifyArgs.selection=n.parent.formatter.editorManager.nodeSelection.save(h,n.parent.getDocument())}var d={rows:e,columns:t,width:{minWidth:n.parent.tableSettings.minWidth,maxWidth:n.parent.tableSettings.maxWidth,width:n.parent.tableSettings.width},selection:this.tableNotifyArgs.selection};"Create"===i?this.parent.dotNetRef.invokeMethodAsync("CloseCreateTableDialog"):this.parent.dotNetRef.invokeMethodAsync("CloseTableDialog"),this.parent.observer.notify(r,{}),n.parent.formatter.process(n.parent,this.tableNotifyArgs.args,this.tableNotifyArgs.args.originalEvent,d),n.parent.getEditPanel().focus(),n.parent.observer.on(a,n.cellSelect,n)},s.prototype.customTable=function(e,t){if(e&&t){var i=sf.base.Browser.isDevice||!sf.base.isNullOrUndefined(this.tableNotifyArgs.args)&&!sf.base.isNullOrUndefined(this.tableNotifyArgs.args.originalEvent)&&"insert-table"===this.tableNotifyArgs.args.originalEvent.action||this.parent.inlineMode.enable?this.tableNotifyArgs:this;this.tableInsert(e,t,"",i)}},s.prototype.applyTableProperties=function(e){var t=sf.base.closest(this.tableNotifyArgs.selectNode[0],"table");if(t.style.width=e.width+"px",""!==e.padding.toString()){var i=t.querySelectorAll("th");this.applyCellPadding(i,e.padding);var s=t.querySelectorAll("td");this.applyCellPadding(s,e.padding)}t.cellSpacing=e.spacing.toString(),t.cellSpacing&&"0"!==t.cellSpacing?sf.base.addClass([t],"e-rte-table-border"):sf.base.removeClass([t],"e-rte-table-border"),this.parent.formatter.saveData(),this.parent.dotNetRef.invokeMethodAsync("CloseTableDialog")},s.prototype.applyCellPadding=function(e,t){for(var i=0;i<e.length;i++){var s="";if(""===e[i].style.padding){var n=e[i].getAttribute("style");s=(sf.base.isNullOrUndefined(n)?"":n)+" padding:"+t+"px;"}else e[i].style.padding=t+"px",s=e[i].getAttribute("style");e[i].setAttribute("style",s)}},s.prototype.resizeHelper=function(e){if(!this.parent.readonly){var t=e.target||e.targetTouches[0].target,i=sf.base.closest(t,"table.e-rte-table");sf.base.isNullOrUndefined(this.curTable)||sf.base.isNullOrUndefined(i)||i===this.curTable||!this.parent.getEditPanel().contains(i)||(this.removeResizeEle(),this.removeHelper(e),this.cancelResizeAction()),"TABLE"!==t.nodeName&&"TD"!==t.nodeName&&"TH"!==t.nodeName||this.rzProgress||(this.curTable=i&&this.parent.getEditPanel().contains(i)&&("TD"===t.nodeName||"TH"===t.nodeName)?i:t,this.removeResizeEle(),this.tableResizeEleCreation(this.curTable,e))}},s.prototype.tableResizeEleCreation=function(e,t){this.parent.defaultResize(t,!1);for(var i=e.rows[this.calMaxCol(e)].cells,s=[],n=0;n<e.rows.length;n++)s.push(Array.prototype.slice.call(e.rows[n].cells,0,1)[0]);var o=parseInt(getComputedStyle(e).height,10),r=parseInt(getComputedStyle(e).width,10),a=this.calcPos(e);for(n=0;i.length>=n;n++){var l=sf.base.createElement("span",{attrs:{"data-col":n.toString(),unselectable:"on",contenteditable:"false"}});l.classList.add("e-rte-table-resize","e-column-resize"),i.length===n?l.style.cssText="height: "+o+"px; width: 4px; top: "+a.top+"px; left:"+(a.left+this.calcPos(i[n-1]).left+i[n-1].offsetWidth)+"px;":l.style.cssText="height: "+o+"px; width: 4px; top: "+a.top+"px; left:"+(a.left+this.calcPos(i[n]).left)+"px;",this.parent.getEditPanel().appendChild(l)}for(n=0;s.length>n;n++){var h=sf.base.createElement("span",{attrs:{"data-row":n.toString(),unselectable:"on",contenteditable:"false"}});h.classList.add("e-rte-table-resize","e-row-resize");var d=sf.base.isNullOrUndefined(e.getAttribute("cellspacing"))&&""===e.getAttribute("cellspacing")?this.calcPos(s[n]).left:0;h.style.cssText="width: "+r+"px; height: 4px; top: "+(this.calcPos(s[n]).top+a.top+s[n].offsetHeight-2)+"px; left:"+(d+a.left)+"px;",this.parent.getEditPanel().appendChild(h)}var c=sf.base.createElement("span",{className:"e-table-box",attrs:{"data-col":i.length.toString(),unselectable:"on",contenteditable:"false"}});c.style.cssText="top: "+(a.top+o-4)+"px; left:"+(a.left+r-4)+"px;",sf.base.Browser.isDevice&&c.classList.add("e-rmob"),this.parent.getEditPanel().appendChild(c)},s.prototype.resizeStart=function(e){var t=this;if(!this.parent.readonly){sf.base.Browser.isDevice&&this.resizeHelper(e);var i=e.target;if(i.classList.contains("e-column-resize")||i.classList.contains("e-row-resize")||i.classList.contains("e-table-box")){if(e.preventDefault(),this.parent.defaultResize(e,!1),!i.classList.contains("e-table-box")){var s=this.parent.getEditPanel().querySelector(".e-table-box");sf.base.isNullOrUndefined(s)||(s.classList.add("e-hide"),this.rzProgress=!0)}if(sf.base.removeClass(this.curTable.querySelectorAll("td,th"),"e-cell-select"),this.parent.formatter.editorManager.nodeSelection.Clear(this.parent.getDocument()),this.pageX=this.getPointX(e),this.pageY=this.getPointY(e),this.resizeBtnInit(),this.hideTableQuickToolbar(),i.classList.contains("e-column-resize")&&(this.resizeBtnStat.column=!0,parseInt(i.getAttribute("data-col"),10)===this.curTable.rows[this.calMaxCol(this.curTable)].cells.length?(this.currentColumnResize="last",this.columnEle=this.curTable.rows[this.calMaxCol(this.curTable)].cells[parseInt(i.getAttribute("data-col"),10)-1]):(0===parseInt(i.getAttribute("data-col"),10)?this.currentColumnResize="first":this.currentColumnResize="middle",this.columnEle=this.curTable.rows[this.calMaxCol(this.curTable)].cells[parseInt(i.getAttribute("data-col"),10)]),this.colIndex=this.columnEle.cellIndex,this.moveEle=e.target,this.appendHelper()),i.classList.contains("e-row-resize")&&(this.rowEle=this.curTable.rows[parseInt(i.getAttribute("data-row"),10)],this.resizeBtnStat.row=!0,this.appendHelper()),i.classList.contains("e-table-box")&&(this.resizeBtnStat.tableBox=!0),sf.base.Browser.isDevice&&this.helper&&!this.helper.classList.contains("e-reicon"))this.helper.classList.add("e-reicon"),sf.base.EventHandler.add(document,sf.base.Browser.touchStartEvent,this.removeHelper,this),sf.base.EventHandler.add(this.helper,sf.base.Browser.touchStartEvent,this.resizeStart,this);else{this.parent.onResizeStartEnabled&&this.parent.dotNetRef.invokeMethodAsync("ResizeStartEvent",{requestType:"Table"}).then((function(e){e.cancel&&t.cancelResizeAction()}))}sf.base.EventHandler.add(this.parent.getDocument(),sf.base.Browser.touchMoveEvent,this.resizing,this),sf.base.EventHandler.add(this.parent.getDocument(),sf.base.Browser.touchEndEvent,this.resizeEnd,this)}}},s.prototype.calMaxCol=function(e){for(var t,i=0,s=0;s<e.rows.length;s++)i<e.rows[s].cells.length&&(t=s,i=e.rows[s].cells.length);return t},s.prototype.resizing=function(e){var t,i=this.getPointX(e),s=this.getPointY(e),n=this.parent.enableRtl?-(i-this.pageX):i-this.pageX,o=this.parent.enableRtl?-(s-this.pageY):s-this.pageY;this.pageX=i,this.pageY=s;var r,a=this.curTable.closest("td"),l=this.parent.getEditPanel().querySelector(".e-table-box"),h=parseInt(getComputedStyle(this.curTable).width,10),d=parseInt(getComputedStyle(this.curTable).height,10),c=+getComputedStyle(this.parent.getEditPanel()).paddingRight.match(/\d/g).join(""),p=this.parent.getEditPanel().offsetWidth-2*c;if(sf.base.isNullOrUndefined(this.curTable.parentElement.closest("table"))||sf.base.isNullOrUndefined(this.curTable.closest("td"))||!this.parent.getEditPanel().contains(this.curTable.closest("td")))r=p;else{var u=this.curTable.closest("td"),f=+getComputedStyle(u).paddingRight.match(/\d/g).join("");r=u.offsetWidth-(u.offsetWidth-u.clientWidth)-2*f}if(this.resizeBtnStat.column){var g=parseFloat(this.columnEle.offsetWidth.toString()),m="TH"===this.curTable.rows[0].cells[0].nodeName?1:0,v=parseFloat(this.curTable.style.width.split("%")[0]),b=parseFloat(this.curTable.rows[m].cells[this.colIndex].style.width.split("%")[0]);if("first"===this.currentColumnResize){if(n-=.75,this.removeResizeEle(),a&&(t=this.curTable.getBoundingClientRect().right-this.calcPos(a).left,this.curTable.style.maxWidth=t+"px"),(0!==n&&5<b||n<0)&&v<=100&&this.convertPixelToPercentage(h-n,r)<=100){var y=this.findFirstLastColCells(this.curTable,!0);this.curTable.style.width=this.convertPixelToPercentage(h-n,r)>100?"100%":this.convertPixelToPercentage(h-n,r)+"%";var M=v-this.convertPixelToPercentage(h-n,r);this.currentMarginLeft=this.currentMarginLeft+M,this.curTable.style.marginLeft="calc("+("100%"===this.curTable.style.width?0:this.currentMarginLeft)+"%)";for(var C=0;C<y.length;C++)this.curTable.rows[C].cells[this.colIndex].style.width=b-M+"%"}}else if("last"===this.currentColumnResize){if(n+=.75,this.removeResizeEle(),a&&(t=a.getBoundingClientRect().right-this.curTable.getBoundingClientRect().left,this.curTable.style.maxWidth=t+"px"),(0!==n&&5<b||n>0)&&v<=100&&this.convertPixelToPercentage(h+n,r)<=100){var w=this.findFirstLastColCells(this.curTable,!1);this.curTable.style.width=this.convertPixelToPercentage(h+n,r)>100?"100%":this.convertPixelToPercentage(h+n,r)+"%";for(M=v-this.convertPixelToPercentage(h+n,r),C=0;C<w.length;C++)this.curTable.rows[C].cells[this.colIndex].style.width=b-M+"%"}}else{var S=this.curTable.rows[this.calMaxCol(this.curTable)].cells,N=g-n,x=parseFloat(this.columnEle.offsetWidth.toString())+parseFloat(S[this.colIndex-1].offsetWidth.toString());for(C=0;C<this.curTable.rows.length;C++)if(x-N>20&&N>20){var O=x-N,E=N;sf.base.isNullOrUndefined(this.curTable.rows[C].cells[this.colIndex-1])||(this.curTable.rows[C].cells[this.colIndex-1].style.width=this.convertPixelToPercentage(O,h)+"%"),sf.base.isNullOrUndefined(this.curTable.rows[C].cells[this.colIndex])||(this.curTable.rows[C].cells[this.colIndex].style.width=this.convertPixelToPercentage(E,h)+"%")}}this.updateHelper()}else if(this.resizeBtnStat.row){this.parent.defaultResize(e,!1);var I=parseFloat(this.rowEle.clientHeight.toString())+o;I>20&&(this.rowEle.style.height=I+"px"),this.curTable.style.height="",sf.base.isNullOrUndefined(l)||(l.style.cssText="top: "+(this.calcPos(this.curTable).top+d-4)+"px; left:"+(this.calcPos(this.curTable).left+h-4)+"px;"),this.updateHelper()}else if(this.resizeBtnStat.tableBox){if(sf.base.Browser.isDevice||sf.base.EventHandler.remove(this.parent.getEditPanel(),"mouseover",this.resizeHelper),a){var D=this.curTable.getBoundingClientRect().left-a.getBoundingClientRect().left;t=Math.abs(D-a.getBoundingClientRect().width)-5,this.curTable.style.maxWidth=t+"px"}var T=this.curTable.style.width.indexOf("%")>-1;this.curTable.style.width=T?this.convertPixelToPercentage(h+n,r)+"%":h+n+"px",this.curTable.style.height=d+o+"px",sf.base.isNullOrUndefined(l)||(l.classList.add("e-rbox-select"),l.style.cssText="top: "+(this.calcPos(this.curTable).top+d-4)+"px; left:"+(this.calcPos(this.curTable).left+h-4)+"px;")}},s.prototype.resizeEnd=function(e){this.resizeBtnInit();var t=this.parent.getEditPanel().querySelector(".e-table-box");sf.base.isNullOrUndefined(t)||(t.classList.remove("e-hide"),this.rzProgress=!1),sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchMoveEvent,this.resizing),sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchEndEvent,this.resizeEnd),t&&this.parent.getEditPanel().contains(t)&&(sf.base.Browser.isDevice||sf.base.EventHandler.add(this.parent.getEditPanel(),"mouseover",this.resizeHelper,this),this.removeResizeEle()),this.helper&&this.parent.getEditPanel().contains(this.helper)&&(sf.base.detach(this.helper),this.helper=null),this.pageX=null,this.pageY=null,this.moveEle=null;this.parent.onResizeStopEnabled&&this.parent.dotNetRef.invokeMethodAsync("ResizeStopEvent",{requestType:"Table"}),this.parent.formatter.saveData()},s.prototype.resizeBtnInit=function(){return this.resizeBtnStat={column:!1,row:!1,tableBox:!1}},s.prototype.removeResizeEle=function(){var e=this.parent.getEditPanel().querySelectorAll(".e-column-resize, .e-row-resize, .e-table-box");if(e.length>0)for(var t=0;t<e.length;t++)sf.base.detach(e[t])},s.prototype.appendHelper=function(){this.helper=sf.base.createElement("div",{className:"e-table-rhelper"}),sf.base.Browser.isDevice&&this.helper.classList.add("e-reicon"),this.parent.getEditPanel().appendChild(this.helper),this.setHelperHeight()},s.prototype.setHelperHeight=function(){var e=this.calcPos(this.curTable);this.resizeBtnStat.column?(this.helper.classList.add("e-column-helper"),this.helper.style.cssText="height: "+getComputedStyle(this.curTable).height+"; top: "+e.top+"px; left:"+(e.left+this.calcPos(this.columnEle).left+("last"===this.currentColumnResize?this.columnEle.offsetWidth+2:0)-1)+"px;"):(this.helper.classList.add("e-row-helper"),this.helper.style.cssText="width: "+getComputedStyle(this.curTable).width+"; top: "+(this.calcPos(this.rowEle).top+e.top+this.rowEle.offsetHeight)+"px; left:"+(this.calcPos(this.rowEle).left+e.left)+"px;")},s.prototype.updateHelper=function(){var e=this.calcPos(this.curTable);if(this.resizeBtnStat.column){var t=e.left+this.calcPos(this.columnEle).left+("last"===this.currentColumnResize?this.columnEle.offsetWidth+2:0)-1;this.helper.style.left=t+"px"}else{var i=this.calcPos(this.rowEle).top+e.top+this.rowEle.offsetHeight;this.helper.style.top=i+"px"}},s.prototype.removeHelper=function(e){!e.target.classList.contains("e-reicon")&&this.helper&&(sf.base.EventHandler.remove(document,sf.base.Browser.touchStartEvent,this.removeHelper),sf.base.EventHandler.remove(this.helper,sf.base.Browser.touchStartEvent,this.resizeStart),this.helper&&this.parent.getEditPanel().contains(this.helper)&&sf.base.detach(this.helper),this.pageX=null,this.helper=null)},s.prototype.findFirstLastColCells=function(e,t){for(var i=[],s=e.querySelectorAll("tr"),n=0;n<s.length;n++)if(s[n].closest("table")===e){var o=s[n].querySelectorAll("th, td");i.push(t?o[0]:o[o.length-1])}return i},s.prototype.convertPixelToPercentage=function(e,t){return e/t*100},s.prototype.cancelResizeAction=function(){sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchMoveEvent,this.resizing),sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchEndEvent,this.resizeEnd),this.removeResizeEle()},s.prototype.calcPos=function(e){for(var t={top:0,left:0},i=e.getBoundingClientRect(),s=e.ownerDocument,n=e.offsetParent||s.documentElement,o=!1;n&&(n===s.body||n===s.documentElement)&&"static"===n.style.position;)n=n.parentNode;return"TD"===n.nodeName&&"TABLE"===e.nodeName&&(n=sf.base.closest(n,".e-rte-content"),o=!0),n&&n!==e&&1===n.nodeType&&(t=n.getBoundingClientRect()),o?(o=!1,{top:this.parent.inputElement&&this.parent.inputElement.scrollTop>0?this.parent.inputElement.scrollTop+i.top-t.top:i.top-t.top,left:this.parent.inputElement&&this.parent.inputElement.scrollLeft>0?this.parent.inputElement.scrollLeft+i.left-t.left:i.left-t.left}):{top:e.offsetTop,left:e.offsetLeft}},s.prototype.getPointX=function(e){return e.touches&&e.touches.length?e.touches[0].pageX:e.pageX},s.prototype.getPointY=function(e){return e.touches&&e.touches.length?e.touches[0].pageY:e.pageY},s.prototype.editAreaClickHandler=function(e){if(!this.parent.readonly&&sf.base.isNullOrUndefined(sf.base.closest(e.args.target,".e-img-caption"))){var t=e.args,i=this.parent.quickToolbarSettings.showOnRightClick;if(!(2===t.which||i&&1===t.which||!i&&3===t.which)&&"HTML"===this.parent.editorMode&&this.parent.quickToolbarModule){this.quickToolObj=this.parent.quickToolbarModule;var s=this.parent.element.getBoundingClientRect(),n=t.target,o=this.parent.getToolbarElement(),r=o?o.offsetHeight+this.parent.toolbarModule.getExpandTBarPopHeight():0,a=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),l=sf.base.closest(n,"table");if(n&&"A"!==n.nodeName&&"IMG"!==n.nodeName&&"VIDEO"!==n.nodeName&&!n.classList.contains("e-clickelem")&&"AUDIO"!==n.nodeName&&("TD"===n.nodeName||"TH"===n.nodeName||"TABLE"===n.nodeName||l&&this.parent.getEditPanel().contains(l))&&(3!==a.startContainer.nodeType||a.collapsed)){var h=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument());this.parent.formatter.editorManager.nodeSelection.save(h,this.parent.getDocument()),this.parent.formatter.editorManager.nodeSelection.Clear(this.parent.getDocument());var d=void 0,c=void 0;sf.base.Browser.isDevice&&e.args.changedTouches[0]?(d=e.args.changedTouches[0].pageX,c=e.args.changedTouches[0].pageY):(d=this.parent.iframeSettings.enable?window.pageXOffset+s.left+t.clientX:t.pageX,c=this.parent.iframeSettings.enable?window.pageYOffset+s.top+r+t.clientY:t.pageY),this.quickToolObj.showTableQTBar(d,c,n,"Table"),this.parent.formatter.editorManager.nodeSelection.restore()}else this.hideTableQuickToolbar()}}},s.prototype.hideTableQuickToolbar=function(){this.quickToolObj&&this.quickToolObj.hideTableQTBar()},s.prototype.onToolbarAction=function(e){switch(e.args.item.subCommand){case"TableHeader":this.tableHeader(e.selection,e.args);break;case"TableRemove":this.removeTable(e.selection,e.args);break;case"TableEditProperties":this.editTable(e)}},s.prototype.tableHeader=function(e,t){this.parent.formatter.process(this.parent,t,t.originalEvent,{selection:e,subCommand:t.item.subCommand})},s.prototype.removeTable=function(e,t,i){var s;i&&(s={item:{command:"Table",subCommand:"TableRemove"}});var n={selection:e,subCommand:i?s.item.subCommand:t.item.subCommand};this.parent.formatter.process(this.parent,i?s:t,t.originalEvent,n),this.parent.getEditPanel().focus(),this.removeResizeEle(),this.hideTableQuickToolbar()},s.prototype.editTable=function(e){var t=e.selectParent[0];this.tableNotifyArgs.selectNode=e.selectParent;var i=sf.base.closest(t,"table").getClientRects()[0].width,s=sf.base.closest(t,"td").style.padding,n=sf.base.closest(t,"table").getAttribute("cellspacing");this.hideTableQuickToolbar(),this.createDialog({width:i,padding:parseFloat((""!==s?parseInt(s,null):0).toString()),spacing:parseFloat((""===n||sf.base.isNullOrUndefined(n)?0:parseInt(n,null)).toString())},"Edit")},s.prototype.dropdownSelect=function(e){this.parent.observer.notify(o,{});var t=e.item;if(document.body.contains(document.body.querySelector(".e-rte-quick-toolbar"))&&"Table"===t.command){var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),s={args:e,selection:this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.getDocument()),selectParent:this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(i)};switch(t.subCommand){case"InsertRowBefore":case"InsertRowAfter":this.addRow(s.selection,e);break;case"InsertColumnLeft":case"InsertColumnRight":this.addColumn(s.selection,e);break;case"DeleteColumn":case"DeleteRow":this.removeRowColumn(s.selection,e);break;case"AlignTop":case"AlignMiddle":case"AlignBottom":this.verticalAlign(s,e);break;case"Dashed":case"Alternate":case"Custom":this.tableStyles(s,t.subCommand);break;case"Merge":case"VerticalSplit":case"HorizontalSplit":this.UpdateCells(s.selection,e)}}},s.prototype.tableMouseUp=function(e){sf.base.EventHandler.remove(this.curTable,"mousemove",this.tableMove)},s.prototype.UpdateCells=function(e,t){this.parent.formatter.process(this.parent,t,t,{selection:e,subCommand:t.item.subCommand}),this.hideTableQuickToolbar()},s.prototype.addRow=function(e,t,i){var s;i&&(s={item:{command:"Table",subCommand:"InsertRowAfter"}});var n={selection:e,subCommand:i?s.item.subCommand:t.item.subCommand};this.parent.formatter.process(this.parent,i?s:t,t,n)},s.prototype.addColumn=function(e,t){this.parent.formatter.process(this.parent,t,t,{selection:e,width:this.parent.tableSettings.width,subCommand:t.item.subCommand})},s.prototype.removeRowColumn=function(e,t){this.parent.observer.notify(r,{}),this.parent.formatter.process(this.parent,t,t,{selection:e,subCommand:t.item.subCommand}),this.hideTableQuickToolbar(),this.parent.observer.notify(o,{})},s.prototype.verticalAlign=function(e,t){var i=sf.base.closest(e.selectParent[0],"td")||sf.base.closest(e.selectParent[0],"th");i&&this.parent.formatter.process(this.parent,t,t,{tableCell:i,subCommand:t.item.subCommand})},s.prototype.tableStyles=function(e,t){var i=sf.base.closest(e.selectParent[0],"table");if("Dashed"===t&&(this.parent.element.classList.contains("e-dashed-border")?this.parent.element.classList.remove("e-dashed-border"):this.parent.element.classList.add("e-dashed-border"),i.classList.contains("e-dashed-border")?i.classList.remove("e-dashed-border"):i.classList.add("e-dashed-border")),"Alternate"===t&&(this.parent.element.classList.contains("e-alternate-border")?this.parent.element.classList.remove("e-alternate-border"):this.parent.element.classList.add("e-alternate-border"),i.classList.contains("e-alternate-border")?i.classList.remove("e-alternate-border"):i.classList.add("e-alternate-border")),e.args&&e.args.item.cssClass)for(var s=e.args.item.cssClass.split(" "),n=0;n<s.length;n++)i.classList.contains(s[n])?i.classList.remove(s[n]):i.classList.add(s[n]);this.parent.formatter.saveData(),this.parent.formatter.editorManager.nodeSelection.restore(),this.hideTableQuickToolbar()},s.prototype.setBGColor=function(e){var t=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),i=this.parent.formatter.editorManager.nodeSelection.save(t,this.parent.getDocument()).range.startContainer;if((i=3===i.nodeType?sf.base.closest(i.parentNode,"td,th"):sf.base.closest(i,"td, th"))&&("TD"===i.nodeName||"TH"===i.nodeName)){for(var s=sf.base.closest(i,"table").querySelectorAll(".e-cell-select"),n=0;n<s.length;n++)s[n].style.backgroundColor=e.item.value;this.parent.formatter.saveData()}this.hideTableQuickToolbar()},s.prototype.closeOpenedDialog=function(){var e=this.parent.element.querySelector(".e-rte-table-popup"),t=this.parent.element.querySelector(".e-rte-edit-table");e&&this.parent.dotNetRef.invokeMethodAsync("CloseCreateTableDialog"),t&&this.parent.dotNetRef.invokeMethodAsync("CloseTableDialog")},s.prototype.showDialog=function(e,t){if(e&&this.parent.getEditPanel().focus(),"HTML"===this.parent.editorMode){var i=this.parent.getDocument(),s=this.parent.formatter.editorManager.nodeSelection.getRange(i),n=this.parent.formatter.editorManager.nodeSelection.save(s,i);this.parent.observer.notify(o,{});var r={originalEvent:e?void 0:t.args,item:{command:"Table",subCommand:"CreateTable"}};this.tableNotifyArgs={args:r,selection:n},this.insertTableDialog()}},s.prototype.keyDown=function(e){var t=e.args;switch(t.action){case"escape":break;case"insert-table":this.showDialog(!1,e),t.preventDefault()}if(!sf.base.isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection)&&this.parent.getEditPanel()&&"KeyK"!==t.code){var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),s=this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.getDocument()),n=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(i),o=n[0!==i.endOffset&&9===t.keyCode?n.length-1:0];if(o=o&&"TD"!==o.tagName&&"TH"!==o.tagName?o.parentElement:o,(8===t.keyCode||46===t.keyCode||t.ctrlKey&&88===t.keyCode)&&(o&&"TBODY"===o.tagName?(t.preventDefault(),this.removeTable(s,t,!0)):o&&o.querySelectorAll("table").length>0&&this.removeResizeEle()),o&&"TD"!==o.tagName&&"TH"!==o.tagName){var r=sf.base.closest(o,"td");o=!sf.base.isNullOrUndefined(r)&&this.parent.inputElement.contains(r)?r:o}if(o&&("TD"===o.tagName||"TH"===o.tagName))switch(t.keyCode){case 9:case 37:case 39:this.tabSelection(t,s,o);break;case 40:case 38:this.tableArrowNavigation(t,s,o)}}},s.prototype.docClick=function(e){var t=e.args.target,i=this.parent.element.querySelector(".e-rte-table-popup"),s=this.parent.element.querySelector(".e-rte-edit-table");t&&t.classList&&(i&&!sf.base.closest(t,"#"+i.id)||s&&!sf.base.closest(t,"#"+s.id))&&!t.classList.contains("e-create-table")&&t.offsetParent&&!t.offsetParent.classList.contains("e-rte-backgroundcolor-dropdown")&&(this.closeOpenedDialog(),this.parent.isBlur=!0,sf.base.Browser.isIE&&E(this.parent.element,"focusout"));var n=sf.base.closest(t,"td"),o=!(!n||!this.parent.getEditPanel().contains(n));!t||"TD"===t.tagName||"TH"===t.tagName||o||null!==sf.base.closest(t,".e-rte-quick-popup")||!t.offsetParent||t.offsetParent.classList.contains("e-quick-dropdown")||t.offsetParent.classList.contains("e-rte-backgroundcolor-dropdown")||sf.base.closest(t,".e-rte-dropdown-popup")||sf.base.closest(t,".e-rte-elements")||(sf.base.removeClass(this.parent.inputElement.querySelectorAll("table td"),"e-cell-select"),sf.base.Browser.isIE||this.hideTableQuickToolbar()),!t||!t.classList||t.classList.contains("e-column-resize")||t.classList.contains("e-row-resize")||t.classList.contains("e-table-box")||this.removeResizeEle()},s.prototype.onIframeMouseDown=function(){this.closeOpenedDialog()},s.prototype.keyUp=function(e){var t=e.args;(8===t.which&&"Backspace"===t.code||46===t.which&&"Delete"===t.code)&&this.hideTableQuickToolbar()},s.prototype.destroy=function(){this.removeEventListener()},s}(),R=function(){function s(e){this.pageX=null,this.pageY=null,this.deletedImg=[],this.parent=e,this.rteId=e.element.id,this.addEventListener()}return s.prototype.addEventListener=function(){this.parent.observer.on(i,this.onKeyUp,this),this.parent.observer.on("docClick",this.docClick,this),this.parent.observer.on(t,this.destroy,this),this.parent.observer.on(l,this.imagePaste,this),this.parent.observer.on(n,this.onKeyDown,this),this.parent.observer.on("imageSize",this.imageSize,this),this.parent.observer.on("caption",this.caption,this),this.parent.observer.on("delete",this.deleteImg,this),this.parent.observer.on("imgAltText",this.insertAltText,this),this.parent.observer.on(e,this.afterRender,this),this.parent.observer.on("insertImgLink",this.insertImgLink,this),this.parent.observer.on("insertImage",this.imageDialog,this),this.parent.observer.on("resize",this.onWindowResize,this),this.parent.observer.on("dropDownSelect",this.alignmentSelect,this),this.parent.observer.on("iframe-click",this.onIframeMouseDown,this),this.parent.observer.on("image-toolbar-action",this.onToolbarAction,this),this.parent.observer.on("editAreaClick",this.editAreaClickHandler,this),this.parent.observer.on("insertCompleted",this.showImageQuickToolbar,this)},s.prototype.removeEventListener=function(){this.parent.observer.off(i,this.onKeyUp),this.parent.observer.off("docClick",this.docClick),this.parent.observer.off(t,this.destroy),this.parent.observer.off(l,this.imagePaste),this.parent.observer.off(n,this.onKeyDown),this.parent.observer.off("imageSize",this.imageSize),this.parent.observer.off("caption",this.caption),this.parent.observer.off("delete",this.deleteImg),this.parent.observer.off("imgAltText",this.insertAltText),this.parent.observer.off(e,this.afterRender),this.parent.observer.off("insertImgLink",this.insertImgLink),this.parent.observer.off("insertImage",this.imageDialog),this.parent.observer.off("resize",this.onWindowResize),this.parent.observer.off("dropDownSelect",this.alignmentSelect),this.parent.observer.off("iframe-click",this.onIframeMouseDown),this.parent.observer.off("image-toolbar-action",this.onToolbarAction),this.parent.observer.off("editAreaClick",this.editAreaClickHandler),this.parent.observer.off("insertCompleted",this.showImageQuickToolbar);var s=this.parent.iframeSettings.enable?this.parent.inputElement.ownerDocument:this.parent.inputElement;s.removeEventListener("drop",this.dragDrop.bind(this),!0),s.removeEventListener("dragstart",this.dragStart.bind(this),!0),s.removeEventListener("dragenter",this.dragEnter.bind(this),!0),s.removeEventListener("dragover",this.dragOver.bind(this),!0),sf.base.isNullOrUndefined(this.parent.getEditPanel())||(sf.base.EventHandler.remove(this.parent.getEditPanel(),sf.base.Browser.touchEndEvent,this.imageClick),this.parent.formatter.editorManager.observer.off(h,this.undoStack),this.parent.insertImageSettings.resize&&(sf.base.EventHandler.remove(this.parent.getEditPanel(),sf.base.Browser.touchStartEvent,this.resizeStart),sf.base.EventHandler.remove(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick),sf.base.EventHandler.remove(this.parent.getEditPanel(),"cut",this.onCutHandler)))},s.prototype.docClick=function(e){var t=e.args.target,i=sf.base.closest(t,"img"),s=!(!i||!this.parent.getEditPanel().contains(i));!t||"IMG"===t.tagName||s||null!==sf.base.closest(t,".e-rte-quick-popup")||!t.offsetParent||t.offsetParent.classList.contains("e-quick-dropdown")||t.offsetParent.classList.contains("e-rte-backgroundcolor-dropdown")||sf.base.closest(t,".e-rte-dropdown-popup")||sf.base.closest(t,".e-rte-elements")||this.hideImageQuickToolbar()},s.prototype.afterRender=function(){sf.base.EventHandler.add(this.parent.getEditPanel(),sf.base.Browser.touchEndEvent,this.imageClick,this),this.parent.insertImageSettings.resize&&(sf.base.EventHandler.add(this.parent.getEditPanel(),sf.base.Browser.touchStartEvent,this.resizeStart,this),sf.base.EventHandler.add(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick,this),sf.base.EventHandler.add(this.parent.getEditPanel(),"cut",this.onCutHandler,this));var e=this.parent.iframeSettings.enable?this.parent.inputElement.ownerDocument:this.parent.inputElement;e.addEventListener("drop",this.dragDrop.bind(this),!0),e.addEventListener("dragstart",this.dragStart.bind(this),!0),e.addEventListener("dragenter",this.dragEnter.bind(this),!0),e.addEventListener("dragover",this.dragOver.bind(this),!0)},s.prototype.imageDialog=function(e){if(this.parent.dotNetRef.invokeMethodAsync("CloseImageDialog",null),this.uploadUrl={url:""},this.selectionObj={selfImage:this,selection:e.selection,args:e.args,selectParent:e.selectParent},!sf.base.isNullOrUndefined(this.parent.insertImageSettings.path)&&"Markdown"===this.parent.editorMode||"HTML"===this.parent.editorMode){var t=this.parent.iframeSettings.enable;if("HTML"===this.parent.editorMode&&(!t&&sf.base.isNullOrUndefined(sf.base.closest(e.selection.range.startContainer.parentNode,"#"+this.parent.getPanel().id))||t&&sf.base.isNullOrUndefined(e.selection.range.startContainer.parentNode.ownerDocument.querySelector("body")))){this.parent.getEditPanel().focus();var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument());this.imgUploadSave=this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.getDocument()),this.imgUploadSelectedParent=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(i)}else this.imgUploadSave=e.selection,this.imgUploadSelectedParent=e.selectParent}var s={mode:e.selectNode&&"IMG"===e.selectNode[0].nodeName?"Edit":"Insert"};this.parent.dotNetRef.invokeMethodAsync("ShowImageDialog",s),this.quickToolObj&&(this.quickToolObj.hideImageQTBar(),sf.base.isNullOrUndefined(e.selectParent)||sf.base.removeClass([e.selectParent[0]],"e-img-focus"),this.quickToolObj.hideInlineQTBar())},s.prototype.checkImageBack=function(e){"#text"!==e.startContainer.nodeName||0!==e.startOffset||sf.base.isNullOrUndefined(e.startContainer.previousSibling)||"IMG"!==e.startContainer.previousSibling.nodeName?"#text"===e.startContainer.nodeName||sf.base.isNullOrUndefined(e.startContainer.childNodes[e.startOffset-1])||"IMG"!==e.startContainer.childNodes[e.startOffset-1].nodeName||this.deletedImg.push(e.startContainer.childNodes[e.startOffset-1]):this.deletedImg.push(e.startContainer.previousSibling)},s.prototype.checkImageDel=function(e){"#text"!==e.startContainer.nodeName||e.startOffset!==e.startContainer.textContent.length||sf.base.isNullOrUndefined(e.startContainer.nextSibling)||"IMG"!==e.startContainer.nextSibling.nodeName?"#text"===e.startContainer.nodeName||sf.base.isNullOrUndefined(e.startContainer.childNodes[e.startOffset])||"IMG"!==e.startContainer.childNodes[e.startOffset].nodeName||this.deletedImg.push(e.startContainer.childNodes[e.startOffset]):this.deletedImg.push(e.startContainer.nextSibling)},s.prototype.getDropRange=function(e,t){var i=this.parent.getDocument().createRange();this.parent.formatter.editorManager.nodeSelection.setRange(this.parent.getDocument(),i);var s=this.parent.getDocument().elementFromPoint(e,t),n=s.childNodes.length>0?s.childNodes[0]:s,o=0;if("<br>"===this.parent.inputElement.firstChild.innerHTML)i.setStart(n,o),i.setEnd(n,o);else{var r=void 0;do{o++,i.setStart(n,o),i.setEnd(n,o+1),r=i.getBoundingClientRect()}while(r.left<e&&o<n.length-1)}return i},s.prototype.selectRange=function(e){var t;this.parent.getDocument().caretRangeFromPoint?t=this.parent.getDocument().caretRangeFromPoint(e.clientX,e.clientY):e.rangeParent?(t=this.parent.getDocument().createRange()).setStart(e.rangeParent,e.rangeOffset):t=this.getDropRange(e.clientX,e.clientY),this.parent.observer.notify("selectRange",{range:t})},s.prototype.imageDropInitialized=function(e){var t=this.imageDragArgs;if(this.parent.element.querySelector(".e-img-resize")&&sf.base.detach(this.imgResizeDiv),this.selectRange(this.imageDragArgs),!(this.dropFiles.length>1)){this.parent.observer.notify("drop",{args:t});for(var i=this.dropFiles,s=i[0].name,n=s.substring(s.lastIndexOf(".")),o=this.parent.insertImageSettings.allowedTypes,r=0;r<o.length;r++)if(n.toLocaleLowerCase()===o[r].toLowerCase())if(this.parent.insertImageSettings.saveUrl||e)this.onSelect(this.dropFiles);else{var a={text:"",file:i[0]};this.imagePaste(a)}}},s.prototype.insertDragImage=function(e,t){var i=this;e.preventDefault();var s=this.parent.element.querySelector("e-popup-open");this.parent.observer.notify("drop",{args:e}),s&&s.classList.add("e-hide");var n=this.parent.inputElement.ownerDocument.querySelector(".e-rte-drag-image");if(t.length<=0||!sf.base.isNullOrUndefined(n)){var o=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),r=this.parent.inputElement.ownerDocument.querySelector(".e-rte-drag-image");if(r&&"IMG"===r.tagName){r.nextElementSibling&&r.nextElementSibling.classList.contains("e-img-inner")?o.insertNode(r.parentElement.parentElement):o.insertNode(r),r.classList.remove("e-rte-drag-image"),r.addEventListener("load",(function(){i.parent.actionCompleteEnabled&&i.parent.dotNetRef.invokeMethodAsync("ActionCompleteEvent",null)})),this.parent.formatter.editorManager.nodeSelection.Clear(this.parent.getDocument());var a=e;this.resizeStart(a,r),this.hideImageQuickToolbar()}}},s.prototype.onSelect=function(e){var t=this,i=this,s=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),n={name:"",size:0,status:"",statusCode:"",type:"",rawFile:e[0],validationMessages:{}};this.droppedImage=sf.base.createElement("IMG"),this.droppedImage.style.opacity="0.5",this.droppedImage.classList.add("e-rte-image"),this.droppedImage.classList.add("e-imginline"),this.droppedImage.classList.add("e-resize");var o=n.rawFile,r=new FileReader;r.addEventListener("load",(function(){var e=URL.createObjectURL(T(r.result));t.droppedImage.src="Blob"===i.parent.insertImageSettings.saveFormat?e:r.result})),o&&r.readAsDataURL(o),s.insertNode(this.droppedImage),s.selectNodeContents(this.droppedImage),this.parent.formatter.editorManager.nodeSelection.setRange(this.parent.getDocument(),s),this.droppedImage.addEventListener("load",(function(){t.parent.actionCompleteEnabled&&t.parent.dotNetRef.invokeMethodAsync("ActionCompleteEvent",null)}))},s.prototype.removeDroppedImage=function(){sf.base.detach(this.droppedImage)},s.prototype.dropUploadSuccess=function(e,t){this.droppedImage.style.opacity="1",this.droppedImage.classList.add("e-img-focus"),this.droppedImage.src=e,this.droppedImage.alt=t,this.showImageQuickToolbar({args:this.imageDragArgs,type:"Images",isNotify:void 0,elements:this.droppedImage}),this.resizeStart(this.imageDragArgs,this.droppedImage)},s.prototype.dropUploadChange=function(e,t){t&&(this.droppedImage.src=e,this.droppedImage.style.opacity="1")},s.prototype.imagePaste=function(e){var t=this;if(0===e.text.length&&!sf.base.isNullOrUndefined(e.file)){var i=this,s=new FileReader;e.args&&e.args.preventDefault(),s.addEventListener("load",(function(n){var o={cssClass:"inline"===i.parent.insertImageSettings.display?"e-imginline":"e-imgbreak",url:"Base64"!==t.parent.insertImageSettings.saveFormat&&sf.base.isNullOrUndefined(e.callBack)?URL.createObjectURL(T(s.result)):s.result,width:{width:i.parent.insertImageSettings.width,minWidth:i.parent.insertImageSettings.minWidth,maxWidth:i.getMaxWidth()},height:{height:i.parent.insertImageSettings.height,minHeight:i.parent.insertImageSettings.minHeight,maxHeight:i.parent.insertImageSettings.maxHeight}};sf.base.isNullOrUndefined(e.callBack)?(i.parent.formatter.process(i.parent,{item:{command:"Images",subCommand:"Image"}},e.args,o),t.showPopupToolBar(e,o)):e.callBack(o)})),s.readAsDataURL(e.file)}},s.prototype.showPopupToolBar=function(e,t){var i=this,s='img[src="'+t.url+'"]',n=this.parent.inputElement.querySelector(s),o={args:e.args,type:"Images",isNotify:void 0,elements:n};n&&setTimeout((function(){i.showImageQuickToolbar(o),i.resizeStart(e.args,n)}),0)},s.prototype.undoStack=function(e){if("undo"===e.subCommand.toLowerCase()||"redo"===e.subCommand.toLowerCase())for(var t=0;t<this.parent.formatter.getUndoRedoStack().length;t++){var i=sf.base.createElement("div"),s=D(this.parent.formatter.getUndoRedoStack()[t].text);i.appendChild(s);var n=i.querySelectorAll("img");if(i.querySelector(".e-img-resize")&&n.length>0){for(var o=0;o<n.length;o++)n[o].style.outline="";sf.base.detach(i.querySelector(".e-img-resize")),this.parent.formatter.getUndoRedoStack()[t].text=i.innerHTML}}},s.prototype.imageResize=function(e){this.resizeBtnInit(),this.imgEle=e,sf.base.addClass([this.imgEle],"e-resize"),this.imgResizeDiv=sf.base.createElement("span",{className:"e-img-resize",id:this.rteId+"_imgResize"}),this.imgResizeDiv.appendChild(sf.base.createElement("span",{className:"e-rte-imageboxmark e-rte-topLeft",styles:"cursor: nwse-resize"})),this.imgResizeDiv.appendChild(sf.base.createElement("span",{className:"e-rte-imageboxmark e-rte-topRight",styles:"cursor: nesw-resize"})),this.imgResizeDiv.appendChild(sf.base.createElement("span",{className:"e-rte-imageboxmark e-rte-botLeft",styles:"cursor: nesw-resize"})),this.imgResizeDiv.appendChild(sf.base.createElement("span",{className:"e-rte-imageboxmark e-rte-botRight",styles:"cursor: nwse-resize"})),sf.base.Browser.isDevice&&sf.base.addClass([this.imgResizeDiv],"e-mob-rte"),e.style.outline="2px solid #4a90e2",this.imgResizePos(e,this.imgResizeDiv),this.resizeImgDupPos(e),this.parent.getEditPanel().appendChild(this.imgResizeDiv),sf.base.EventHandler.add(this.parent.getDocument(),sf.base.Browser.touchMoveEvent,this.resizing,this)},s.prototype.resizeBtnInit=function(){return this.resizeBtnStat={botLeft:!1,botRight:!1,topRight:!1,topLeft:!1}},s.prototype.imgResizePos=function(e,t){var i=this.calcPos(e),s=i.top,n=i.left,o=e.getBoundingClientRect().width,r=e.getBoundingClientRect().height,a=sf.base.Browser.isDevice?4*parseInt(e.style.outline.slice(-3),10)+2:2*parseInt(e.style.outline.slice(-3),10)+2,l=sf.base.Browser.isDevice?0:2;t.querySelector(".e-rte-botLeft").style.left=n-a+"px",t.querySelector(".e-rte-botLeft").style.top=r-a+s+"px",t.querySelector(".e-rte-botRight").style.left=o-(a-l)+n+"px",t.querySelector(".e-rte-botRight").style.top=r-a+s+"px",t.querySelector(".e-rte-topRight").style.left=o-(a-l)+n+"px",t.querySelector(".e-rte-topRight").style.top=s-a+"px",t.querySelector(".e-rte-topLeft").style.left=n-a+"px",t.querySelector(".e-rte-topLeft").style.top=s-a+"px"},s.prototype.resizeImgDupPos=function(e){this.imgDupPos={width:""!==e.style.height?this.imgEle.style.width:e.width+"px",height:""!==e.style.height?this.imgEle.style.height:e.height+"px"}},s.prototype.calcPos=function(e){for(var t,i={top:0,left:0},s=e.ownerDocument,n=(e.offsetParent&&(e.offsetParent.classList.contains("e-img-caption")||["TD","TH","TABLE","A"].indexOf(e.offsetParent.tagName)>-1)?sf.base.closest(e,"#"+this.rteId+"_rte-edit-view"):e.offsetParent)||s.documentElement;n&&(n===s.body||n===s.documentElement)&&"static"===n.style.position;)n=n.parentNode;return n&&n!==e&&1===n.nodeType&&(i=n.getBoundingClientRect()),e.offsetParent&&e.offsetParent.classList.contains("e-img-caption")?{top:(t=e.getBoundingClientRect()).top-i.top,left:t.left-i.left}:{top:e.offsetTop,left:e.offsetLeft}},s.prototype.getPointX=function(e){return e.touches&&e.touches.length?e.touches[0].pageX:e.pageX},s.prototype.getPointY=function(e){return e.touches&&e.touches.length?e.touches[0].pageY:e.pageY},s.prototype.pixToPercent=function(e,t){return e/parseFloat(getComputedStyle(t).width)*100},s.prototype.imgDupMouseMove=function(e,t,i){parseInt(this.parent.insertImageSettings.minWidth,10)>=parseInt(e,10)||parseInt(this.getMaxWidth(),10)<=parseInt(e,10)||!this.parent.insertImageSettings.resizeByPercent&&(parseInt(this.parent.insertImageSettings.minHeight,10)>=parseInt(t,10)||parseInt(this.parent.insertImageSettings.maxHeight,10)<=parseInt(t,10))||(this.imgEle.parentElement.style.cursor="pointer",this.setAspectRatio(this.imgEle,parseInt(e,10),parseInt(t,10),i),this.resizeImgDupPos(this.imgEle),this.imgResizePos(this.imgEle,this.imgResizeDiv),this.parent.setContentHeight("",!1))},s.prototype.setAspectRatio=function(e,t,i,s){if(!sf.base.isNullOrUndefined(e.width)){var n=""!==e.style.width?parseInt(e.style.width,10):e.width,o=""!==e.style.height?parseInt(e.style.height,10):e.height;n>o?this.parent.insertImageSettings.resizeByPercent?(e.style.width=this.pixToPercent(n/o*i,e.previousElementSibling||e.parentElement)+"%",e.style.height=null,e.removeAttribute("height")):""===e.style.width&&""!==e.style.height?e.style.height=i+"px":""!==e.style.width&&""===e.style.height?e.style.width=(n/o*i+n/o).toString()+"px":""!==e.style.width?(e.style.width=n/o*i+"px",e.style.height=i+"px"):e.setAttribute("width",(n/o*i+n/o).toString()):o>n?this.parent.insertImageSettings.resizeByPercent?(e.style.width=this.pixToPercent(t,e.previousElementSibling||e.parentElement)+"%",e.style.height=null,e.removeAttribute("height")):""!==e.style.width?(e.style.width=t+"px",e.style.height=o/n*t+"px"):e.setAttribute("width",this.resizeBtnStat.botRight?(this.getPointX(s)-e.getBoundingClientRect().left).toString():t.toString()):this.parent.insertImageSettings.resizeByPercent?(e.style.width=this.pixToPercent(t,e.previousElementSibling||e.parentElement)+"%",e.style.height=null,e.removeAttribute("height")):(e.style.width=t+"px",e.style.height=t+"px")}},s.prototype.getMaxWidth=function(){var e=this.parent.insertImageSettings.maxWidth,t=this.parent.getEditPanel(),i=window.getComputedStyle(t),s=t.offsetWidth-(14+parseFloat(i.paddingLeft.split("px")[0])+parseFloat(i.paddingRight.split("px")[0])+parseFloat(i.marginLeft.split("px")[0])+parseFloat(i.marginRight.split("px")[0]));return sf.base.isNullOrUndefined(e)?s:e},s.prototype.cancelResizeAction=function(){sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchMoveEvent,this.resizing),sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchEndEvent,this.resizeEnd),this.imgEle&&this.imgResizeDiv&&this.parent.getEditPanel().contains(this.imgResizeDiv)&&(sf.base.detach(this.imgResizeDiv),this.imgEle.style.outline="",this.imgResizeDiv=null,this.pageX=null,this.pageY=null)},s.prototype.removeResizeEle=function(){sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchMoveEvent,this.resizing),sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchEndEvent,this.resizeEnd),sf.base.detach(this.parent.getEditPanel().querySelector(".e-img-resize"))},s.prototype.onWindowResize=function(){sf.base.isNullOrUndefined(this.parent)||sf.base.isNullOrUndefined(this.parent.getEditPanel().querySelector(".e-img-resize"))||this.cancelResizeAction()},s.prototype.editAreaClickHandler=function(e){if(this.parent.readonly)this.hideImageQuickToolbar();else{var t=e.args,i=this.parent.quickToolbarSettings.showOnRightClick;if(2===t.which||i&&1===t.which||!i&&3===t.which)i&&1===t.which&&!sf.base.isNullOrUndefined(t.target)&&"IMG"===t.target.tagName&&(this.parent.formatter.editorManager.nodeSelection.Clear(this.parent.getDocument()),this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.parent.getDocument(),t.target));else if("HTML"===this.parent.editorMode&&this.parent.quickToolbarModule){this.quickToolObj=this.parent.quickToolbarModule;var s,n=t.target;if(s=document.body.querySelector("#"+this.rteId+"_Image_Quick_Popup").classList.contains("e-rte-pop"),"IMG"===n.nodeName&&this.parent.quickToolbarModule){if(s)return;this.parent.formatter.editorManager.nodeSelection.Clear(this.parent.getDocument()),this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.parent.getDocument(),n),u()&&this.parent.observer.notify(o,e),sf.base.addClass([n],"e-img-focus"),this.showImageQuickToolbar({args:t,type:"Images",elements:[t.target]})}else this.hideImageQuickToolbar()}}},s.prototype.showImageQuickToolbar=function(e){var t=this,i="ImageLink";if("Images"===e.type&&!sf.base.isNullOrUndefined(this.parent.quickToolbarModule)){this.quickToolObj=this.parent.quickToolbarModule;var s=e.args,n=e.elements,o=this.parent.element.getBoundingClientRect(),r=this.parent.getToolbarElement(),a=r?r.offsetHeight+this.parent.toolbarModule.getExpandTBarPopHeight():0;[].forEach.call(e.elements,(function(e,t){0===t&&(n=e)})),n&&!sf.base.closest(n,"a")&&(i="Image"),"IMG"===n.nodeName&&sf.base.addClass([n],["e-img-focus"]);var l=this.parent.iframeSettings.enable?window.pageXOffset+o.left+(sf.base.isNullOrUndefined(s)?this.imageDragArgs.clientX:s.clientX):sf.base.isNullOrUndefined(s)?this.imageDragArgs.pageX:s.pageX,h=this.parent.iframeSettings.enable?window.pageYOffset+o.top+a+(sf.base.isNullOrUndefined(s)?this.imageDragArgs.clientY:s.clientY):sf.base.isNullOrUndefined(s)?this.imageDragArgs.pageY:s.pageY;this.quickToolObj&&(e.isNotify?setTimeout((function(){t.parent.formatter.editorManager.nodeSelection.Clear(t.parent.getDocument()),t.parent.formatter.editorManager.nodeSelection.setSelectionContents(t.parent.getDocument(),n),t.quickToolObj.showImageQTBar(l,h,n,i)}),400):this.quickToolObj.showImageQTBar(l,h,n,i))}},s.prototype.hideImageQuickToolbar=function(){sf.base.isNullOrUndefined(this.parent.getEditPanel().querySelector(".e-img-focus"))||(sf.base.removeClass([this.parent.getEditPanel().querySelector(".e-img-focus")],"e-img-focus"),this.quickToolObj&&this.quickToolObj.hideImageQTBar())},s.prototype.onToolbarAction=function(e){switch(this.quickToolObj&&(this.quickToolObj.hideImageQTBar(),sf.base.removeClass([e.selectNode[0]],"e-img-focus")),this.selectionObj=e,u()&&this.parent.observer.notify(r,{}),e.args.item.subCommand){case"Replace":this.parent.observer.notify("insertImage",e);break;case"Caption":this.parent.observer.notify("caption",e);break;case"InsertLink":this.parent.observer.notify("insertImgLink",e);break;case"AltText":this.parent.observer.notify("imgAltText",e);break;case"Remove":this.parent.observer.notify("delete",e);break;case"Dimension":this.parent.observer.notify("imageSize",e);break;case"OpenImageLink":this.openImgLink(e);break;case"EditImageLink":this.editImgLink(e);break;case"RemoveImageLink":this.removeImgLink(e)}},s.prototype.openImgLink=function(e){var t=""===e.selectParent[0].parentNode.target?"_self":"_blank";this.parent.formatter.process(this.parent,e.args,e.args,{url:e.selectParent[0].parentNode.href,target:t,selectNode:e.selectNode,subCommand:e.args.item.subCommand})},s.prototype.editImgLink=function(e){var t=e.selectParent[0].parentNode,i={url:t.href,target:t.target};this.insertImgLink(e,i)},s.prototype.removeImgLink=function(e){sf.base.Browser.isIE&&this.parent.getEditPanel().focus(),e.selection.restore();var t=!(!this.parent.getEditPanel().contains(this.captionEle)||!sf.base.select("a",this.captionEle)),i=t?[this.captionEle]:[e.selectNode[0].parentElement];this.parent.formatter.process(this.parent,e.args,e.args,{insertElement:e.selectNode[0],selectParent:i,selection:e.selection,subCommand:e.args.item.subCommand}),this.quickToolObj&&(this.quickToolObj.hideImageQTBar(),sf.base.isNullOrUndefined(e.selectParent)||sf.base.removeClass([e.selectParent[0]],"e-img-focus")),t&&sf.base.select(".e-img-inner",this.captionEle).focus()},s.prototype.caption=function(e){var t=e.selectNode[0];if("IMG"===t.nodeName){e.selection.restore(),0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),this.cancelResizeAction(),sf.base.addClass([t],"e-rte-image");var i=e.args.item?e.args.item.subCommand:"Caption";if(sf.base.isNullOrUndefined(sf.base.closest(t,".e-img-caption"))){this.captionEle=sf.base.createElement("span",{className:"e-img-caption e-rte-img-caption",attrs:{contenteditable:"false",draggable:"false"}});var s=sf.base.createElement("span",{className:"e-img-wrap"}),n=sf.base.createElement("span",{className:"e-img-inner",attrs:{contenteditable:"true"}}),o=e.selectNode[0].parentElement;"A"===o.tagName&&o.setAttribute("contenteditable","true"),s.appendChild("A"===o.tagName?o:e.selectNode[0]),s.appendChild(n);var r=this.parent.localeData.imageCaption;n.innerHTML=r,this.captionEle.appendChild(s),t.classList.contains("e-imginline")&&sf.base.addClass([this.captionEle],"e-caption-inline"),t.classList.contains("e-imgbreak")&&sf.base.addClass([this.captionEle],"e-imgbreak"),t.classList.contains("e-imgleft")&&sf.base.addClass([this.captionEle],"e-imgleft"),t.classList.contains("e-imgright")&&sf.base.addClass([this.captionEle],"e-imgright"),t.classList.contains("e-imgcenter")&&sf.base.addClass([this.captionEle],"e-imgcenter"),this.parent.formatter.process(this.parent,e.args,e.args,{insertElement:this.captionEle,selectNode:e.selectNode,subCommand:i}),this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.parent.getDocument(),n.childNodes[0],n.childNodes[0],0,n.childNodes[0].textContent.length)}else sf.base.detach(sf.base.closest(t,".e-img-caption")),sf.base.Browser.isIE&&(this.parent.getEditPanel().focus(),e.selection.restore()),"A"===t.parentElement.tagName?this.parent.formatter.process(this.parent,e.args,e.args,{insertElement:t.parentElement,selectNode:e.selectNode,subCommand:i}):this.parent.formatter.process(this.parent,e.args,e.args,{insertElement:t,selectNode:e.selectNode,subCommand:i});this.quickToolObj&&(this.quickToolObj.hideImageQTBar(),sf.base.removeClass([t],"e-img-focus"))}},s.prototype.insertImgLink=function(e,t){var i;"IMG"===e.selectNode[0].nodeName&&(i=sf.base.isNullOrUndefined(t)?{mode:"InsertLink",newWindow:!0,url:""}:{mode:"EditLink",newWindow:!!t.target,url:t.url},this.parent.dotNetRef.invokeMethodAsync("ShowImageDialog",i))},s.prototype.isUrl=function(e){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/gi.test(e)},s.prototype.insertLink=function(e,t){if("IMG"===this.selectionObj.selectNode[0].nodeName){var i=document.querySelector(".e-rte-img-dialog .e-img-link");if(""===e)return sf.base.addClass([i],"e-error"),i.setSelectionRange(0,e.length),void i.focus();if(this.isUrl(e)?sf.base.removeClass([i],"e-error"):e="http://"+e,"HTML"===this.parent.editorMode&&this.selectionObj.selection.restore(),0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),"A"===this.selectionObj.selectNode[0].parentElement.nodeName)return this.parent.formatter.process(this.parent,this.selectionObj.args,this.selectionObj.args,{url:e,target:t,selectNode:this.selectionObj.selectNode,subCommand:this.selectionObj.args.item.subCommand}),void this.parent.dotNetRef.invokeMethodAsync("CloseImageDialog",null);this.parent.formatter.process(this.parent,this.selectionObj.args,this.selectionObj.args,{url:e,target:t,selectNode:this.selectionObj.selectNode,subCommand:this.selectionObj.args.item.subCommand,selection:this.selectionObj.selection});var s=sf.base.closest(this.selectionObj.selectNode[0],".e-img-caption");s&&sf.base.select(".e-img-inner",s).focus(),this.parent.dotNetRef.invokeMethodAsync("CloseImageDialog",null)}},s.prototype.insertAltText=function(e){if("IMG"===e.selectNode[0].nodeName){var t=e.selectNode[0].getAttribute("alt"),i={mode:"AltText",altText:null===t?"":t};this.parent.dotNetRef.invokeMethodAsync("ShowImageDialog",i)}},s.prototype.insertAlt=function(e){this.selectionObj.selection.restore(),0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),this.parent.formatter.process(this.parent,this.selectionObj.args,this.selectionObj.args,{altText:e,selectNode:this.selectionObj.selectNode,subCommand:this.selectionObj.args.item.subCommand}),this.parent.dotNetRef.invokeMethodAsync("CloseImageDialog",null)},s.prototype.deleteImg=function(e,t){if("IMG"===e.selectNode[0].nodeName){var i={src:e.selectNode[0].getAttribute("src")};0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),e.selection.restore(),this.parent.getEditPanel().querySelector(".e-img-resize")&&this.removeResizeEle(),this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,captionClass:"e-img-caption",subCommand:e.args.item.subCommand}),this.quickToolObj&&this.quickToolObj.hideImageQTBar(),this.cancelResizeAction(),sf.base.isNullOrUndefined(t)&&this.parent.imageDeleteEnabled&&this.parent.dotNetRef.invokeMethodAsync("AfterImageDeleteEvent",i)}},s.prototype.imageSize=function(e){if("IMG"===e.selectNode[0].nodeName){var t=e.selectNode[0],i={mode:"Dimension",width:"auto"===t.style.width.toString()||t.style.width.toString()?t.style.width.toString():parseInt(t.getClientRects()[0].width.toString()).toString(),height:"auto"===t.style.height.toString()||t.style.height.toString()?t.style.height.toString():parseInt(t.getClientRects()[0].height.toString()).toString(),maxWidth:parseFloat(this.getMaxWidth())};this.parent.dotNetRef.invokeMethodAsync("ShowImageDialog",i)}},s.prototype.insertSize=function(e,t){this.selectionObj.selection.restore(),0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),this.parent.formatter.process(this.parent,this.selectionObj.args,this.selectionObj.args,{width:e,height:t,selectNode:this.selectionObj.selectNode,subCommand:this.selectionObj.args.item.subCommand}),this.imgResizeDiv&&this.imgResizePos(this.selectionObj.selectNode[0],this.imgResizeDiv),this.parent.dotNetRef.invokeMethodAsync("CloseImageDialog",null)},s.prototype.alignmentSelect=function(e){var t=e.item;if(document.body.contains(document.body.querySelector(".e-rte-quick-toolbar"))&&"Images"===t.command){var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),s=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(i),n={args:e,selectNode:s="IMG"===s[0].nodeName?s:[this.imgEle]};switch(0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),t.subCommand){case"JustifyLeft":this.alignImage(n,"JustifyLeft");break;case"JustifyCenter":this.alignImage(n,"JustifyCenter");break;case"JustifyRight":this.alignImage(n,"JustifyRight");break;case"Inline":this.inline(n);break;case"Break":this.break(n)}this.quickToolObj&&(this.quickToolObj.hideImageQTBar(),sf.base.removeClass([s[0]],"e-img-focus")),this.cancelResizeAction()}},s.prototype.alignImage=function(e,t){var i=e.args.item?e.args.item.subCommand:t;this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,subCommand:i})},s.prototype.inline=function(e){if("IMG"===e.selectNode[0].nodeName){var t=e.args.item?e.args.item.subCommand:"Inline";this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,subCommand:t})}},s.prototype.break=function(e){if("IMG"===e.selectNode[0].nodeName){var t=e.args.item?e.args.item.subCommand:"Break";this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,subCommand:t})}},s.prototype.imageBrowseClick=function(){document.getElementById(this.rteId+"_image").querySelector(".e-rte-img-dialog .e-file-select-wrap button").click()},s.prototype.dialogOpened=function(){var e=sf.base.Browser.isDevice?document.getElementById(this.rteId+"_image").querySelector(".e-img-content"):this.parent.element.querySelector(".e-rte-img-dialog .e-img-content");if(!sf.base.isNullOrUndefined(e)){var t=document.getElementById(this.rteId+"_dropText"),i=document.getElementById(this.rteId+"_insertImage");this.buttonClickElement=sf.base.Browser.isDevice?t:i,sf.base.EventHandler.add(this.buttonClickElement,"click",this.imageBrowseClick,this),!sf.base.isNullOrUndefined(this.parent.insertImageSettings.path)&&"Markdown"===this.parent.editorMode||"HTML"===this.parent.editorMode?e.querySelector("#"+this.rteId+"_insertImage").focus():e.querySelector(".e-img-url").focus()}},s.prototype.imageSelected=function(){this.inputUrl.setAttribute("disabled","true")},s.prototype.imageUploadSuccess=function(e,t){this.inputUrl=this.parent.element.querySelector(".e-rte-img-dialog .e-img-url"),sf.base.isNullOrUndefined(this.parent.insertImageSettings.path)||(this.uploadUrl={url:e,selection:this.imgUploadSave,altText:t,selectParent:this.imgUploadSelectedParent,width:{width:this.parent.insertImageSettings.width,minWidth:this.parent.insertImageSettings.minWidth,maxWidth:this.getMaxWidth()},height:{height:this.parent.insertImageSettings.height,minHeight:this.parent.insertImageSettings.minHeight,maxHeight:this.parent.insertImageSettings.maxHeight}},this.inputUrl.setAttribute("disabled","true"))},s.prototype.imageUploadComplete=function(e,t){if("HTML"===this.parent.editorMode&&sf.base.isNullOrUndefined(this.parent.insertImageSettings.path)){var i="Base64"===this.parent.insertImageSettings.saveFormat?e:URL.createObjectURL(T(e));this.uploadUrl={url:i,selection:this.imgUploadSave,altText:t,selectParent:this.imgUploadSelectedParent,width:{width:this.parent.insertImageSettings.width,minWidth:this.parent.insertImageSettings.minWidth,maxWidth:this.getMaxWidth()},height:{height:this.parent.insertImageSettings.height,minHeight:this.parent.insertImageSettings.minHeight,maxHeight:this.parent.insertImageSettings.maxHeight}},this.inputUrl.setAttribute("disabled","true")}},s.prototype.imageUploadChange=function(e,t){this.modifiedUrl=e,this.isStreamUrl=t},s.prototype.removing=function(){this.inputUrl.removeAttribute("disabled"),this.uploadUrl&&(this.uploadUrl.url="")},s.prototype.dialogClosed=function(){"HTML"===this.parent.editorMode?this.selectionObj.selection.restore():this.parent.formatter.editorManager.markdownSelection.restore(this.parent.getEditPanel()),this.buttonClickElement&&sf.base.EventHandler.remove(this.buttonClickElement,"click",this.imageBrowseClick)},s.prototype.insertImageUrl=function(){sf.base.Browser.isDevice?this.inputUrl=this.parent.inputElement.ownerDocument.querySelector("#"+this.rteId+"_image").querySelector(".e-rte-img-dialog .e-img-url"):this.inputUrl=this.parent.element.querySelector(".e-rte-img-dialog .e-img-url");var e=this.inputUrl.value;if(this.isStreamUrl&&""!==this.modifiedUrl&&(this.uploadUrl.url=this.modifiedUrl,this.modifiedUrl=""),0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),sf.base.isNullOrUndefined(this.uploadUrl)||""===this.uploadUrl.url){if(""!==e){if("HTML"===this.parent.editorMode&&sf.base.isNullOrUndefined(sf.base.closest(this.selectionObj.selection.range.startContainer.parentNode,"#"+this.parent.getPanel().id))){this.parent.getEditPanel().focus();var t=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument());this.selectionObj.selection=this.parent.formatter.editorManager.nodeSelection.save(t,this.parent.getDocument()),this.selectionObj.selectParent=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(t)}var i=/[\w-]+.(jpg|png|jpeg|gif)/g,s=sf.base.isNullOrUndefined(e.match(i))||"HTML"!==this.parent.editorMode?"":e.match(i)[0],n={cssClass:"inline"===this.parent.insertImageSettings.display?"e-imginline":"e-imgbreak",url:e,selection:this.selectionObj.selection,altText:s,selectParent:this.selectionObj.selectParent,width:{width:this.parent.insertImageSettings.width,minWidth:this.parent.insertImageSettings.minWidth,maxWidth:this.getMaxWidth()},height:{height:this.parent.insertImageSettings.height,minHeight:this.parent.insertImageSettings.minHeight,maxHeight:this.parent.insertImageSettings.maxHeight}};this.parent.formatter.process(this.parent,this.selectionObj.args,this.selectionObj.args.originalEvent,n),this.parent.dotNetRef.invokeMethodAsync("CloseImageDialog",null)}}else this.uploadUrl.cssClass="inline"===this.parent.insertImageSettings.display?"e-imginline":"e-imgbreak",this.parent.dotNetRef.invokeMethodAsync("CloseImageDialog",null),this.parent.formatter.process(this.parent,this.selectionObj.args,this.selectionObj.args.originalEvent,this.uploadUrl),this.parent.getEditPanel().querySelector(".e-img-resize")&&(this.imgEle.style.outline="",this.removeResizeEle())},s.prototype.showDialog=function(e,t,i,s,n){var o,r,a,l;e&&!sf.base.isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection)?(o=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),r=this.parent.formatter.editorManager.nodeSelection.save(o,this.parent.getDocument()),a=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(o),l=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(o)):(r=i,a=s,l=n),"HTML"===this.parent.editorMode?this.imageDialog({args:{item:{command:"Images",subCommand:"Image"},originalEvent:e?void 0:t},selectNode:a,selection:r,selectParent:l}):this.imageDialog({args:{item:{command:"Images",subCommand:"Image"},originalEvent:e?void 0:t},member:"image",text:this.parent.formatter.editorManager.markdownSelection.getSelectedText(this.parent.getEditPanel()),module:"Markdown",name:"insertImage"})},s.prototype.onCutHandler=function(){this.imgResizeDiv&&this.parent.getEditPanel().contains(this.imgResizeDiv)&&this.cancelResizeAction()},s.prototype.onIframeMouseDown=function(e){this.parent.dotNetRef.invokeMethodAsync("CloseImageDialog",null),this.onDocumentClick(e)},s.prototype.onDocumentClick=function(e){var t=e.target;"IMG"===t.nodeName&&(this.imgEle=t);var i=document.body.querySelector("#"+this.rteId+"_image.e-rte-img-dialog");!sf.base.isNullOrUndefined(i)&&(!sf.base.closest(t,"#"+this.rteId+"_image")&&this.parent.toolbarSettings.enable&&this.parent.getToolbarElement()&&!this.parent.getToolbarElement().contains(e.target)||this.parent.getToolbarElement()&&this.parent.getToolbarElement().contains(e.target)&&!sf.base.closest(t,"#"+this.rteId+"_toolbar_Image")&&!t.querySelector("#"+this.rteId+"_toolbar_Image"))&&(e.offsetX>e.target.clientWidth||e.offsetY>e.target.clientHeight||(this.parent.dotNetRef.invokeMethodAsync("CloseImageDialog","Outside Click"),this.parent.isBlur=!0,sf.base.Browser.isIE&&E(this.parent.element,"focusout"))),"IMG"!==e.target.tagName&&this.imgResizeDiv&&!this.quickToolObj&&this.parent.getEditPanel().contains(this.imgResizeDiv)&&this.cancelResizeAction(),this.parent.getEditPanel().querySelector(".e-img-resize")&&("IMG"!==t.tagName&&this.removeResizeEle(),"IMG"===t.tagName||sf.base.isNullOrUndefined(this.imgEle)?sf.base.isNullOrUndefined(this.prevSelectedImgEle)||this.prevSelectedImgEle===t||(this.prevSelectedImgEle.style.outline=""):this.imgEle.style.outline="")},s.prototype.imageClick=function(e){sf.base.Browser.isDevice&&("IMG"===e.target.tagName&&"A"===e.target.parentElement.tagName||"IMG"===e.target.tagName?(this.parent.getEditPanel().setAttribute("contenteditable","false"),e.target.focus()):this.parent.readonly||this.parent.getEditPanel().setAttribute("contenteditable","true")),"IMG"===e.target.tagName&&"A"===e.target.parentElement.tagName&&e.preventDefault()},s.prototype.onKeyDown=function(e){var t,i,s,n,o,r=e.args;this.deletedImg=[];if("HTML"===this.parent.editorMode&&(o=(t=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument())).startContainer===t.endContainer&&t.startOffset===t.endOffset),!o&&"HTML"===this.parent.editorMode&&[27,112,113,114,115,116,117,118,119,120,121,122,123,44,45,9,16,17,18,19,20,33,34,35,36,37,38,39,40,91,92,93,144,145,182,183].indexOf(r.which)<0)for(var a=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(t),l=0;l<a.length;l++)"IMG"===a[l].nodeName&&this.deletedImg.push(a[l]);if("HTML"===this.parent.editorMode&&(8===r.which&&"Backspace"===r.code||46===r.which&&"Delete"===r.code)){var h=t.startContainer===t.endContainer&&t.startOffset===t.endOffset;8===r.which&&"Backspace"===r.code&&h?this.checkImageBack(t):46===r.which&&"Delete"===r.code&&h&&this.checkImageDel(t)}if(!sf.base.isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection)&&"KeyK"!==r.code&&(t=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),i=this.parent.formatter.editorManager.nodeSelection.save(t,this.parent.getDocument()),s=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(t),n=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(t),!r.ctrlKey&&r.key&&(1===r.key.length||"enter"===r.action||37===r.keyCode||38===r.keyCode||39===r.keyCode||40===r.keyCode)&&"IMG"===n[0].tagName&&n[0].parentElement)){var d=n[0].parentElement.childNodes[0];this.parent.getEditPanel().querySelector(".e-img-resize")&&this.removeResizeEle(),this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.parent.getDocument(),d,d,d.textContent.length,d.textContent.length),sf.base.removeClass([n[0]],"e-img-focus"),this.quickToolObj.hideImageQTBar(),sf.base.isNullOrUndefined(this.imgEle)||(this.imgEle.style.outline="")}if(!r.ctrlKey||89!==r.keyCode&&90!==r.keyCode||this.undoStack({subCommand:90===r.keyCode?"undo":"redo"}),8===r.keyCode||46===r.keyCode){if(s&&"IMG"===s[0].nodeName){r.preventDefault();var c={selectNode:s,selection:i,selectParent:n,args:{item:{command:"Images",subCommand:"Remove"},originalEvent:r}};this.deleteImg(c,r.keyCode)}this.parent.getEditPanel().querySelector(".e-img-resize")&&this.removeResizeEle()}switch(r.action){case"escape":this.parent.dotNetRef.invokeMethodAsync("CloseImageDialog",null);break;case"insert-image":this.showDialog(!1,r,i,s,n),r.preventDefault()}},s.prototype.onKeyUp=function(e){if(!sf.base.isNullOrUndefined(this.deletedImg)&&this.deletedImg.length>0)for(var t=0;t<this.deletedImg.length;t++){var i={src:this.deletedImg[t].getAttribute("src")};this.parent.imageDeleteEnabled&&this.parent.dotNetRef.invokeMethodAsync("AfterImageDeleteEvent",i)}},s.prototype.resizeStart=function(e,t){var i=this;if(!this.parent.readonly){var s=t||e.target;if(this.prevSelectedImgEle=this.imgEle,"IMG"===s.tagName){this.parent.defaultResize(e,!1);var n=s;this.imgResizeDiv&&this.parent.getEditPanel().contains(this.imgResizeDiv)&&sf.base.detach(this.imgResizeDiv),this.imageResize(n)}if(s.classList.contains("e-rte-imageboxmark")){if(0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),this.pageX=this.getPointX(e),this.pageY=this.getPointY(e),e.preventDefault(),e.stopImmediatePropagation(),this.resizeBtnInit(),this.quickToolObj&&this.quickToolObj.hideImageQTBar(),s.classList.contains("e-rte-topLeft")&&(this.resizeBtnStat.topLeft=!0),s.classList.contains("e-rte-topRight")&&(this.resizeBtnStat.topRight=!0),s.classList.contains("e-rte-botLeft")&&(this.resizeBtnStat.botLeft=!0),s.classList.contains("e-rte-botRight")&&(this.resizeBtnStat.botRight=!0),sf.base.Browser.isDevice&&this.parent.getEditPanel().contains(this.imgResizeDiv)&&!this.imgResizeDiv.classList.contains("e-mob-span"))sf.base.addClass([this.imgResizeDiv],"e-mob-span");else{this.parent.onResizeStartEnabled&&this.parent.dotNetRef.invokeMethodAsync("ResizeStartEvent",{requestType:"Images"}).then((function(e){e.cancel&&i.cancelResizeAction()}))}sf.base.EventHandler.add(this.parent.getDocument(),sf.base.Browser.touchEndEvent,this.resizeEnd,this)}}},s.prototype.resizing=function(e){this.imgEle.offsetWidth>=this.getMaxWidth()&&(this.imgEle.style.maxHeight=this.imgEle.offsetHeight+"px");var t=this.getPointX(e),i=this.getPointY(e),s=this.resizeBtnStat.botLeft||this.resizeBtnStat.topLeft?-(t-this.pageX):t-this.pageX,n=this.resizeBtnStat.topLeft||this.resizeBtnStat.topRight?-(i-this.pageY):i-this.pageY,o=parseInt(this.imgDupPos.width,10)+s,r=parseInt(this.imgDupPos.height,10)+n;this.pageX=t,this.pageY=i,(this.resizeBtnStat.botRight||this.resizeBtnStat.botLeft||this.resizeBtnStat.topRight||this.resizeBtnStat.topLeft)&&this.imgDupMouseMove(o+"px",r+"px",e)},s.prototype.resizeEnd=function(e){this.resizeBtnInit(),this.imgEle.parentElement.style.cursor="auto",sf.base.Browser.isDevice&&sf.base.removeClass([e.target.parentElement],"e-mob-span");this.parent.onResizeStopEnabled&&this.parent.dotNetRef.invokeMethodAsync("ResizeStopEvent",{requestType:"Images"}),this.parent.formatter.editorManager.observer.on(h,this.undoStack,this),this.parent.formatter.saveData()},s.prototype.dragStart=function(e){if("IMG"!==e.target.nodeName)return!0;this.parent.dotNetRef.invokeMethodAsync("ActionBeginEvent",e).then((function(t){t.cancel?e.preventDefault():(e.dataTransfer.effectAllowed="copyMove",e.target.classList.add("e-rte-drag-image"))}))},s.prototype.dragOver=function(e){if(!("edge"===sf.base.Browser.info.name&&e.dataTransfer.items[0].type.split("/")[0].indexOf("image")>-1||sf.base.Browser.isIE&&"Files"===e.dataTransfer.types[0]))return!0;e.preventDefault()},s.prototype.dragEnter=function(e){e.dataTransfer.dropEffect="copy",e.preventDefault()},s.prototype.dragDrop=function(e){var t=this;this.imageDragArgs=e,this.dropFiles=e.dataTransfer.files;var i=this.parent.inputElement.ownerDocument.querySelector(".e-rte-drag-image");if(!i||"IMG"!==i.tagName)return!0;e.preventDefault(),e.stopPropagation(),(e.dataTransfer.files.length<=0||i)&&this.parent.dotNetRef.invokeMethodAsync("ActionBeginEvent",e).then((function(i){if(!i.cancel){if(sf.base.closest(e.target,"#"+t.rteId+"_toolbar")||"false"===t.parent.inputElement.contentEditable)return;if(t.parent.element.querySelector(".e-img-resize")&&sf.base.detach(t.imgResizeDiv),t.selectRange(e),t.parent.element.querySelector(".e-droparea"))return;t.insertDragImage(e,t.dropFiles)}}))},s.prototype.destroy=function(){this.prevSelectedImgEle=void 0,this.removeEventListener()},s}(),H=function(){function s(e){this.deletedAud=[],this.parent=e,this.rteId=e.element.id,this.addEventListener()}return s.prototype.addEventListener=function(){this.parent.observer.on(i,this.onKeyUp,this),this.parent.observer.on("docClick",this.docClick,this),this.parent.observer.on(t,this.destroy,this),this.parent.observer.on(n,this.onKeyDown,this),this.parent.observer.on("delete",this.deleteAud,this),this.parent.observer.on(e,this.afterRender,this),this.parent.observer.on("insertAudio",this.audioDialog,this),this.parent.observer.on("dropDownSelect",this.alignmentSelect,this),this.parent.observer.on("iframe-click",this.onIframeMouseDown,this),this.parent.observer.on("audio-toolbar-action",this.onToolbarAction,this),this.parent.observer.on("editAreaClick",this.editAreaClickHandler,this),this.parent.observer.on("insertCompleted",this.showAudioQuickToolbar,this)},s.prototype.removeEventListener=function(){this.parent.observer.off(i,this.onKeyUp),this.parent.observer.off("docClick",this.docClick),this.parent.observer.off(t,this.destroy),this.parent.observer.off(n,this.onKeyDown),this.parent.observer.off("dropDownSelect",this.alignmentSelect),this.parent.observer.off("iframe-click",this.onIframeMouseDown),this.parent.observer.off("audio-toolbar-action",this.onToolbarAction),this.parent.observer.off("editAreaClick",this.editAreaClickHandler),this.parent.observer.off("insertCompleted",this.showAudioQuickToolbar),sf.base.isNullOrUndefined(this.parent.getEditPanel())||(sf.base.EventHandler.remove(this.parent.getEditPanel(),sf.base.Browser.touchEndEvent,this.audioClick),this.parent.formatter.editorManager.observer.off(h,this.undoStack),sf.base.EventHandler.remove(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick))},s.prototype.docClick=function(e){var t=e.args.target,i=sf.base.closest(t,"audio"),s=!(!i||!this.parent.getEditPanel().contains(i));!t||"audio"===t.tagName||s||null!==sf.base.closest(t,".e-rte-quick-popup")||!t.offsetParent||t.offsetParent.classList.contains("e-quick-dropdown")||t.offsetParent.classList.contains("e-rte-backgroundcolor-dropdown")||sf.base.closest(t,".e-rte-dropdown-popup")||sf.base.closest(t,".e-rte-elements")||this.hideAudioQuickToolbar()},s.prototype.afterRender=function(){sf.base.EventHandler.add(this.parent.getEditPanel(),sf.base.Browser.touchEndEvent,this.audioClick,this),sf.base.EventHandler.add(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick,this)},s.prototype.isAudioElem=function(e){return!(!e||3===e.nodeType||"BR"===e.nodeName||!e.classList||!e.classList.contains("e-audio-wrap")&&!e.classList.contains("e-clickelem"))},s.prototype.audioDialog=function(e){if(this.parent.dotNetRef.invokeMethodAsync("CloseAudioDialog",null),this.uploadUrl={url:""},this.selectionObj={selfAudio:this,selection:e.selection,args:e.args,selectParent:e.selectParent},!sf.base.isNullOrUndefined(this.parent.insertAudioSettings.path)||"HTML"===this.parent.editorMode){var t=this.parent.iframeSettings.enable;if("HTML"===this.parent.editorMode&&(!t&&sf.base.isNullOrUndefined(sf.base.closest(e.selection.range.startContainer.parentNode,"#"+this.parent.getPanel().id))||t&&sf.base.isNullOrUndefined(e.selection.range.startContainer.parentNode.ownerDocument.querySelector("body")))){this.parent.getEditPanel().focus();var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument());this.audUploadSave=this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.getDocument()),this.audUploadSelectedParent=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(i)}else this.audUploadSave=e.selection,this.audUploadSelectedParent=e.selectParent}var s={mode:e.selectNode&&this.isAudioElem(e.selectNode[0])?"Edit":"Insert"};this.parent.dotNetRef.invokeMethodAsync("ShowAudioDialog",s),this.quickToolObj&&(this.quickToolObj.hideAudioQTBar(),sf.base.isNullOrUndefined(e.selectParent)||sf.base.removeClass([e.selectParent[0]],"e-audio-focus"),this.quickToolObj.hideInlineQTBar())},s.prototype.checkAudioBack=function(e){"#text"===e.startContainer.nodeName&&0===e.startOffset&&!sf.base.isNullOrUndefined(e.startContainer.previousSibling)&&this.isAudioElem(e.startContainer.previousSibling)?this.deletedAud.push(e.startContainer.previousSibling):"#text"!==e.startContainer.nodeName&&!sf.base.isNullOrUndefined(e.startContainer.childNodes[e.startOffset-1])&&this.isAudioElem(e.startContainer.childNodes[e.startOffset-1])&&this.deletedAud.push(e.startContainer.childNodes[e.startOffset-1])},s.prototype.checkAudioDel=function(e){"#text"===e.startContainer.nodeName&&e.startOffset===e.startContainer.textContent.length&&!sf.base.isNullOrUndefined(e.startContainer.nextSibling)&&this.isAudioElem(e.startContainer.nextSibling)?this.deletedAud.push(e.startContainer.nextSibling):"#text"!==e.startContainer.nodeName&&!sf.base.isNullOrUndefined(e.startContainer.childNodes[e.startOffset])&&this.isAudioElem(e.startContainer.childNodes[e.startOffset])&&this.deletedAud.push(e.startContainer.childNodes[e.startOffset])},s.prototype.undoStack=function(e){if("undo"===e.subCommand.toLowerCase()||"redo"===e.subCommand.toLowerCase())for(var t=0;t<this.parent.formatter.getUndoRedoStack().length;t++){var i=sf.base.createElement("div"),s=D(this.parent.formatter.getUndoRedoStack()[t].text);i.appendChild(s)}},s.prototype.editAreaClickHandler=function(e){if(this.parent.readonly)this.hideAudioQuickToolbar();else{var t=e.args,i=this.parent.quickToolbarSettings.showOnRightClick;if(2===t.which||i&&1===t.which||!i&&3===t.which)i&&1===t.which&&!sf.base.isNullOrUndefined(t.target)&&this.isAudioElem(t.target)&&(this.parent.formatter.editorManager.nodeSelection.Clear(this.parent.getDocument()),this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.parent.getDocument(),t.target));else if("HTML"===this.parent.editorMode&&this.parent.quickToolbarModule){this.quickToolObj=this.parent.quickToolbarModule;var s,n=t.target;if(s=document.body.querySelector("#"+this.rteId+"_Audio_Quick_Popup").classList.contains("e-rte-pop"),this.isAudioElem(n)&&this.parent.quickToolbarModule){if(s)return;this.parent.formatter.editorManager.nodeSelection.Clear(this.parent.getDocument()),this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.parent.getDocument(),n),u()&&this.parent.observer.notify(o,e),n.querySelector("audio").style.outline="2px solid #4a90e2",this.showAudioQuickToolbar({args:t,type:"Audios",elements:[t.target]})}else this.hideAudioQuickToolbar()}}},s.prototype.showAudioQuickToolbar=function(e){var t=this,i="AudioLink";if("Audios"===e.type&&!sf.base.isNullOrUndefined(this.parent.quickToolbarModule)){this.quickToolObj=this.parent.quickToolbarModule;var s=e.args,n=e.elements,o=this.parent.element.getBoundingClientRect(),r=this.parent.getToolbarElement(),a=r?r.offsetHeight+this.parent.toolbarModule.getExpandTBarPopHeight():0;[].forEach.call(e.elements,(function(e,t){0===t&&(n=e)})),this.isAudioElem(n)&&(sf.base.addClass([n.querySelector("audio")],["e-audio-focus"]),n.querySelector("audio").style.outline="2px solid #4a90e2"),n&&!sf.base.closest(n,"a")&&(i="Audio"),this.isAudioElem(n)&&sf.base.addClass([n],["e-audio-focus"]);var l=this.parent.iframeSettings.enable?window.pageXOffset+o.left+s.clientX:s.pageX,h=this.parent.iframeSettings.enable?window.pageYOffset+o.top+a+s.clientY:s.pageY;this.quickToolObj&&(e.isNotify?setTimeout((function(){t.quickToolObj.showAudioQTBar(l,h,n,i)}),400):this.quickToolObj.showAudioQTBar(l,h,n,i))}},s.prototype.hideAudioQuickToolbar=function(){sf.base.isNullOrUndefined(this.parent.getEditPanel().querySelector(".e-audio-focus"))||(sf.base.removeClass([this.parent.getEditPanel().querySelector(".e-audio-focus")],"e-audio-focus"),sf.base.isNullOrUndefined(this.audEle)||(this.audEle.style.outline=""),this.quickToolObj&&this.quickToolObj.hideAudioQTBar())},s.prototype.onToolbarAction=function(e){switch(this.quickToolObj&&(this.quickToolObj.hideAudioQTBar(),sf.base.removeClass([e.selectNode[0]],"e-audio-focus")),this.selectionObj=e,u()&&this.parent.observer.notify(r,{}),e.args.item.subCommand){case"AudioReplace":this.parent.observer.notify("insertAudio",e);break;case"AudioRemove":this.parent.observer.notify("delete",e)}},s.prototype.isUrl=function(e){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/gi.test(e)},s.prototype.deleteAud=function(e,t){if(this.isAudioElem(e.selectNode[0])){var i={src:e.selectNode[0].getAttribute("src")};0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),e.selection.restore(),this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,captionClass:"e-img-caption",subCommand:e.args.item.subCommand}),this.quickToolObj&&this.quickToolObj.hideAudioQTBar(),sf.base.isNullOrUndefined(t)&&this.parent.mediaDeleteEnabled&&this.parent.dotNetRef.invokeMethodAsync("MediaDeleted",i)}},s.prototype.alignmentSelect=function(e){var t=e.item;if(document.body.contains(document.body.querySelector(".e-rte-quick-toolbar"))&&"Audios"===t.command){var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),s=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(i),n={args:e,selectNode:s=[this.audEle]};switch(0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),t.subCommand){case"Inline":this.inline(n);break;case"Break":this.break(n)}this.quickToolObj&&(this.quickToolObj.hideAudioQTBar(),sf.base.removeClass([s[0]],"e-audio-focus"))}},s.prototype.inline=function(e){if("AUDIO"===e.selectNode[0].nodeName){var t=e.args.item?e.args.item.subCommand:"Inline";this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,subCommand:t})}},s.prototype.break=function(e){if("AUDIO"===e.selectNode[0].nodeName){var t=e.args.item?e.args.item.subCommand:"Break";this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,subCommand:t})}},s.prototype.audioBrowseClick=function(){document.getElementById(this.rteId+"_audio").querySelector(".e-rte-audio-dialog .e-file-select-wrap button").click()},s.prototype.dialogOpened=function(){var e=sf.base.Browser.isDevice?document.getElementById(this.rteId+"_audio").querySelector(".e-audio-content"):this.parent.element.querySelector(".e-rte-audio-dialog .e-audio-content");if(!sf.base.isNullOrUndefined(e)){var t=document.getElementById(this.rteId+"_dropText"),i=document.getElementById(this.rteId+"_insertAudio");this.buttonClickElement=sf.base.Browser.isDevice?t:i,sf.base.EventHandler.add(this.buttonClickElement,"click",this.audioBrowseClick,this),!sf.base.isNullOrUndefined(this.parent.insertAudioSettings.path)&&"Markdown"===this.parent.editorMode||"HTML"===this.parent.editorMode?e.querySelector("#"+this.rteId+"_insertAudio").focus():e.querySelector(".e-audio-url").focus()}},s.prototype.fileSelected=function(){this.inputUrl&&this.inputUrl.setAttribute("disabled","true")},s.prototype.fileUploadSuccess=function(e,t){this.inputUrl=this.parent.element.querySelector(".e-rte-audio-dialog .e-audio-url"),sf.base.isNullOrUndefined(this.parent.insertAudioSettings.path)||(this.uploadUrl={url:e,selection:this.audUploadSave,fileName:t,selectParent:this.audUploadSelectedParent},this.inputUrl&&this.inputUrl.setAttribute("disabled","true"))},s.prototype.fileUploadComplete=function(e,t){if(this.inputUrl=this.parent.element.querySelector(".e-rte-audio-dialog .e-audio-url"),"HTML"===this.parent.editorMode&&sf.base.isNullOrUndefined(this.parent.insertAudioSettings.path)){var i="Base64"===this.parent.insertAudioSettings.saveFormat?e:URL.createObjectURL(T(e));this.uploadUrl={url:i,selection:this.audUploadSave,fileName:t,selectParent:this.audUploadSelectedParent},this.inputUrl&&this.inputUrl.setAttribute("disabled","true")}},s.prototype.fileUploadChange=function(e,t){this.modifiedUrl=e,this.isStreamUrl=t},s.prototype.fileRemoving=function(){this.inputUrl.removeAttribute("disabled"),this.uploadUrl&&(this.uploadUrl.url="")},s.prototype.dialogClosed=function(){"HTML"===this.parent.editorMode?this.selectionObj.selection.restore():this.parent.formatter.editorManager.markdownSelection.restore(this.parent.getEditPanel()),this.buttonClickElement&&sf.base.EventHandler.remove(this.buttonClickElement,"click",this.audioBrowseClick)},s.prototype.insertAudioUrl=function(){sf.base.Browser.isDevice?this.inputUrl=this.parent.inputElement.ownerDocument.querySelector("#"+this.rteId+"_Audio").querySelector(".e-rte-audio-dialog .e-audio-url"):this.inputUrl=this.parent.element.querySelector(".e-rte-audio-dialog .e-audio-url");var e=this.inputUrl.value;if(this.isStreamUrl&&""!==this.modifiedUrl&&(this.uploadUrl.url=this.modifiedUrl,this.modifiedUrl=""),0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),sf.base.isNullOrUndefined(this.uploadUrl)||""===this.uploadUrl.url){if(""!==e){if("HTML"===this.parent.editorMode&&sf.base.isNullOrUndefined(sf.base.closest(this.selectionObj.selection.range.startContainer.parentNode,"#"+this.parent.getPanel().id))){this.parent.getEditPanel().focus();var t=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument());this.selectionObj.selection=this.parent.formatter.editorManager.nodeSelection.save(t,this.parent.getDocument()),this.selectionObj.selectParent=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(t)}var i="HTML"===this.parent.editorMode?e.split("/")[e.split("/").length-1]:"",s={cssClass:"Inline"===this.parent.insertAudioSettings.layoutOption?"e-audio-inline":"e-audio-break",url:e,selection:this.selectionObj.selection,fileName:i,selectParent:this.selectionObj.selectParent};this.parent.formatter.process(this.parent,this.selectionObj.args,this.selectionObj.args.originalEvent,s),this.parent.dotNetRef.invokeMethodAsync("CloseAudioDialog",null)}}else this.uploadUrl.cssClass="Inline"===this.parent.insertAudioSettings.layoutOption?"e-audio-inline":"e-audio-break",this.parent.dotNetRef.invokeMethodAsync("CloseAudioDialog",null),this.parent.formatter.process(this.parent,this.selectionObj.args,this.selectionObj.args.originalEvent,this.uploadUrl)},s.prototype.showDialog=function(e,t,i,s,n){var o,r,a,l;e&&!sf.base.isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection)?(o=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),r=this.parent.formatter.editorManager.nodeSelection.save(o,this.parent.getDocument()),a=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(o),l=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(o)):(r=i,a=s,l=n),"HTML"===this.parent.editorMode&&this.audioDialog({args:{item:{command:"Audios",subCommand:"Audio"},originalEvent:e?void 0:t},selectNode:a,selection:r,selectParent:l})},s.prototype.onIframeMouseDown=function(e){this.parent.dotNetRef.invokeMethodAsync("CloseAudioDialog",null),this.onDocumentClick(e)},s.prototype.onDocumentClick=function(e){var t=e.target;this.isAudioElem(t)&&(this.audEle=t.querySelector("audio"));var i=document.body.querySelector("#"+this.rteId+"_audio.e-rte-audio-dialog");!sf.base.isNullOrUndefined(i)&&(!sf.base.closest(t,"#"+this.rteId+"_audio")&&this.parent.toolbarSettings.enable&&this.parent.getToolbarElement()&&!this.parent.getToolbarElement().contains(e.target)||this.parent.getToolbarElement()&&this.parent.getToolbarElement().contains(e.target)&&!sf.base.closest(t,"#"+this.rteId+"_toolbar_Audio")&&!t.querySelector("#"+this.rteId+"_toolbar_Audio"))&&(e.offsetX>e.target.clientWidth||e.offsetY>e.target.clientHeight||(this.parent.dotNetRef.invokeMethodAsync("CloseAudioDialog","Outside Click"),this.parent.isBlur=!0,sf.base.Browser.isIE&&E(this.parent.element,"focusout"))),this.parent.getEditPanel().querySelector(".e-audio-focus")&&(this.isAudioElem(t)||sf.base.isNullOrUndefined(this.audEle)?sf.base.isNullOrUndefined(this.prevSelectedAudEle)||this.prevSelectedAudEle===t||(this.prevSelectedAudEle.style.outline=""):this.audEle.style.outline="")},s.prototype.audioClick=function(e){sf.base.Browser.isDevice&&(this.isAudioElem(e.target)&&"A"===e.target.parentElement.tagName||this.isAudioElem(e.target)?(this.parent.getEditPanel().setAttribute("contenteditable","false"),e.target.focus()):this.parent.readonly||this.parent.getEditPanel().setAttribute("contenteditable","true")),this.isAudioElem(e.target)&&"A"===e.target.parentElement.tagName&&e.preventDefault()},s.prototype.onKeyDown=function(e){var t,i,s,n,o,r=e.args;this.deletedAud=[];if("HTML"===this.parent.editorMode&&(o=(t=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument())).startContainer===t.endContainer&&t.startOffset===t.endOffset),!o&&"HTML"===this.parent.editorMode&&[27,112,113,114,115,116,117,118,119,120,121,122,123,44,45,9,16,17,18,19,20,33,34,35,36,37,38,39,40,91,92,93,144,145,182,183].indexOf(r.which)<0)for(var a=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(t),l=0;l<a.length;l++)this.isAudioElem(a[l])&&this.deletedAud.push(a[l]);if("HTML"===this.parent.editorMode&&(8===r.which&&"Backspace"===r.code||46===r.which&&"Delete"===r.code)){var h=t.startContainer===t.endContainer&&t.startOffset===t.endOffset;8===r.which&&"Backspace"===r.code&&h?this.checkAudioBack(t):46===r.which&&"Delete"===r.code&&h&&this.checkAudioDel(t)}if(!sf.base.isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection)&&"KeyK"!==r.code&&(t=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),i=this.parent.formatter.editorManager.nodeSelection.save(t,this.parent.getDocument()),s=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(t),n=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(t),!r.ctrlKey&&r.key&&(1===r.key.length||"enter"===r.action||37===r.keyCode||38===r.keyCode||39===r.keyCode||40===r.keyCode)&&this.isAudioElem(n[0])&&n[0].parentElement)){var d=n[0].parentElement.childNodes[0];this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.parent.getDocument(),d,d,d.textContent.length,d.textContent.length),sf.base.removeClass([n[0]],"e-audio-focus"),this.quickToolObj.hideAudioQTBar(),sf.base.isNullOrUndefined(this.audEle)||(this.audEle.style.outline="")}if(!r.ctrlKey||89!==r.keyCode&&90!==r.keyCode||this.undoStack({subCommand:90===r.keyCode?"undo":"redo"}),(8===r.keyCode||46===r.keyCode)&&s&&this.isAudioElem(s[0])){r.preventDefault();var c={selectNode:s,selection:i,selectParent:n,args:{item:{command:"Audios",subCommand:"Remove"},originalEvent:r}};this.deleteAud(c,r.keyCode)}switch(r.action){case"escape":this.parent.dotNetRef.invokeMethodAsync("CloseAudioDialog",null);break;case"insert-audio":this.showDialog(!1,r,i,s,n),r.preventDefault()}},s.prototype.onKeyUp=function(e){if(!sf.base.isNullOrUndefined(this.deletedAud)&&this.deletedAud.length>0)for(var t=0;t<this.deletedAud.length;t++){var i={src:this.deletedAud[t].getAttribute("src")};this.parent.mediaDeleteEnabled&&this.parent.dotNetRef.invokeMethodAsync("MediaDeleted",i)}},s.prototype.destroy=function(){this.prevSelectedAudEle=void 0,this.removeEventListener()},s}(),Y=function(){function s(e){this.pageX=null,this.pageY=null,this.deletedVid=[],this.parent=e,this.rteId=e.element.id,this.addEventListener()}return s.prototype.addEventListener=function(){this.parent.observer.on(i,this.onKeyUp,this),this.parent.observer.on("docClick",this.docClick,this),this.parent.observer.on(t,this.destroy,this),this.parent.observer.on(n,this.onKeyDown,this),this.parent.observer.on("videoSize",this.videoSize,this),this.parent.observer.on("delete",this.deleteVid,this),this.parent.observer.on(e,this.afterRender,this),this.parent.observer.on("insertVideo",this.videoDialog,this),this.parent.observer.on("resize",this.onWindowResize,this),this.parent.observer.on("dropDownSelect",this.alignmentSelect,this),this.parent.observer.on("iframe-click",this.onIframeMouseDown,this),this.parent.observer.on("video-toolbar-action",this.onToolbarAction,this),this.parent.observer.on("editAreaClick",this.editAreaClickHandler,this),this.parent.observer.on("insertCompleted",this.showVideoQuickToolbar,this)},s.prototype.removeEventListener=function(){this.parent.observer.off(i,this.onKeyUp),this.parent.observer.off("docClick",this.docClick),this.parent.observer.off(t,this.destroy),this.parent.observer.off(n,this.onKeyDown),this.parent.observer.off("videoSize",this.videoSize),this.parent.observer.off("delete",this.deleteVid),this.parent.observer.off(e,this.afterRender),this.parent.observer.off("insertVideo",this.videoDialog),this.parent.observer.off("resize",this.onWindowResize),this.parent.observer.off("dropDownSelect",this.alignmentSelect),this.parent.observer.off("iframe-click",this.onIframeMouseDown),this.parent.observer.off("video-toolbar-action",this.onToolbarAction),this.parent.observer.off("editAreaClick",this.editAreaClickHandler),this.parent.observer.off("insertCompleted",this.showVideoQuickToolbar),sf.base.isNullOrUndefined(this.parent.getEditPanel())||(sf.base.EventHandler.remove(this.parent.getEditPanel(),sf.base.Browser.touchEndEvent,this.videoClick),this.parent.formatter.editorManager.observer.off(h,this.undoStack),this.parent.insertVideoSettings.resize&&(sf.base.EventHandler.remove(this.parent.getEditPanel(),sf.base.Browser.touchStartEvent,this.resizeStart),sf.base.EventHandler.remove(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick),sf.base.EventHandler.remove(this.parent.getEditPanel(),"cut",this.onCutHandler)))},s.prototype.docClick=function(e){var t=e.args.target,i=sf.base.closest(t,"video"),s=!(!i||!this.parent.getEditPanel().contains(i));!t||"video"===t.tagName||s||null!==sf.base.closest(t,".e-rte-quick-popup")||!t.offsetParent||t.offsetParent.classList.contains("e-quick-dropdown")||t.offsetParent.classList.contains("e-rte-backgroundcolor-dropdown")||sf.base.closest(t,".e-rte-dropdown-popup")||sf.base.closest(t,".e-rte-elements")||this.hideVideoQuickToolbar()},s.prototype.afterRender=function(){sf.base.EventHandler.add(this.parent.getEditPanel(),sf.base.Browser.touchEndEvent,this.videoClick,this),this.parent.insertVideoSettings.resize&&(sf.base.EventHandler.add(this.parent.getEditPanel(),sf.base.Browser.touchStartEvent,this.resizeStart,this),sf.base.EventHandler.add(this.parent.element.ownerDocument,"mousedown",this.onDocumentClick,this),sf.base.EventHandler.add(this.parent.getEditPanel(),"cut",this.onCutHandler,this))},s.prototype.isEmbedVidElem=function(e){return!!(e&&3!==e.nodeType&&"BR"!==e.nodeName&&e.classList&&e.classList.contains("e-video-clickelem")||"IFRAME"===e.nodeName)},s.prototype.videoDialog=function(e){if(this.parent.dotNetRef.invokeMethodAsync("CloseVideoDialog",null),this.uploadUrl={url:""},this.selectionObj={selfVideo:this,selection:e.selection,args:e.args,selectParent:e.selectParent},!sf.base.isNullOrUndefined(this.parent.insertVideoSettings.path)||"HTML"===this.parent.editorMode){var t=this.parent.iframeSettings.enable;if("HTML"===this.parent.editorMode&&(!t&&sf.base.isNullOrUndefined(sf.base.closest(e.selection.range.startContainer.parentNode,"#"+this.parent.getPanel().id))||t&&sf.base.isNullOrUndefined(e.selection.range.startContainer.parentNode.ownerDocument.querySelector("body")))){this.parent.getEditPanel().focus();var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument());this.vidUploadSave=this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.getDocument()),this.vidUploadSelectedParent=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(i)}else this.vidUploadSave=e.selection,this.vidUploadSelectedParent=e.selectParent}var s={mode:e.selectNode&&this.isEmbedVidElem(e.selectNode[0])?"Edit":"Insert"};this.parent.dotNetRef.invokeMethodAsync("ShowVideoDialog",s),this.quickToolObj&&(this.quickToolObj.hideVideoQTBar(),sf.base.isNullOrUndefined(e.selectParent)||sf.base.removeClass([e.selectParent[0]],"e-video-focus"),this.quickToolObj.hideInlineQTBar())},s.prototype.checkVideoBack=function(e){"#text"!==e.startContainer.nodeName||0!==e.startOffset||sf.base.isNullOrUndefined(e.startContainer.previousSibling)||"VIDEO"!==e.startContainer.previousSibling.nodeName&&!this.isEmbedVidElem(e.startContainer.previousSibling)?"#text"!==e.startContainer.nodeName&&!sf.base.isNullOrUndefined(e.startContainer.childNodes[e.startOffset-1])&&this.isEmbedVidElem(e.startContainer.childNodes[e.startOffset-1])&&this.deletedVid.push(e.startContainer.childNodes[e.startOffset-1]):this.deletedVid.push(e.startContainer.previousSibling)},s.prototype.checkVideoDel=function(e){"#text"!==e.startContainer.nodeName||e.startOffset!==e.startContainer.textContent.length||sf.base.isNullOrUndefined(e.startContainer.nextSibling)||"VIDEO"!==e.startContainer.nextSibling.nodeName&&!this.isEmbedVidElem(e.startContainer.nextSibling)?"#text"===e.startContainer.nodeName||sf.base.isNullOrUndefined(e.startContainer.childNodes[e.startOffset])||"VIDEO"!==e.startContainer.childNodes[e.startOffset].nodeName&&!this.isEmbedVidElem(e.startContainer.childNodes[e.startOffset])||this.deletedVid.push(e.startContainer.childNodes[e.startOffset]):this.deletedVid.push(e.startContainer.nextSibling)},s.prototype.getDropRange=function(e,t){var i=this.parent.getDocument().createRange();this.parent.formatter.editorManager.nodeSelection.setRange(this.parent.getDocument(),i);var s=this.parent.getDocument().elementFromPoint(e,t),n=s.childNodes.length>0?s.childNodes[0]:s,o=0;if("<br>"===this.parent.inputElement.firstChild.innerHTML)i.setStart(n,o),i.setEnd(n,o);else{var r=void 0;do{o++,i.setStart(n,o),i.setEnd(n,o+1),r=i.getBoundingClientRect()}while(r.left<e&&o<n.length-1)}return i},s.prototype.undoStack=function(e){if("undo"===e.subCommand.toLowerCase()||"redo"===e.subCommand.toLowerCase())for(var t=0;t<this.parent.formatter.getUndoRedoStack().length;t++){var i=sf.base.createElement("div"),s=D(this.parent.formatter.getUndoRedoStack()[t].text);i.appendChild(s);var n=i.querySelectorAll("video");if(i.querySelector(".e-vid-resize")&&n&&n.length>0){for(var o=0;o<n.length;o++)n[o].style.outline="";sf.base.detach(i.querySelector(".e-vid-resize")),this.parent.formatter.getUndoRedoStack()[t].text=i.innerHTML}}},s.prototype.videoResize=function(e){this.resizeBtnInit(),this.vidEle=e,sf.base.addClass([this.vidEle],"e-resize"),this.vidResizeDiv=sf.base.createElement("span",{className:"e-vid-resize",id:this.rteId+"_vidResize"}),this.vidResizeDiv.appendChild(sf.base.createElement("span",{className:"e-rte-videoboxmark e-rte-topLeft",styles:"cursor: nwse-resize"})),this.vidResizeDiv.appendChild(sf.base.createElement("span",{className:"e-rte-videoboxmark e-rte-topRight",styles:"cursor: nesw-resize"})),this.vidResizeDiv.appendChild(sf.base.createElement("span",{className:"e-rte-videoboxmark e-rte-botLeft",styles:"cursor: nesw-resize"})),this.vidResizeDiv.appendChild(sf.base.createElement("span",{className:"e-rte-videoboxmark e-rte-botRight",styles:"cursor: nwse-resize"})),sf.base.Browser.isDevice&&sf.base.addClass([this.vidResizeDiv],"e-mob-rte"),e.style.outline="2px solid #4a90e2",this.vidResizePos(e,this.vidResizeDiv),this.resizeVidDupPos(e),this.parent.getEditPanel().appendChild(this.vidResizeDiv),sf.base.EventHandler.add(this.parent.getDocument(),sf.base.Browser.touchMoveEvent,this.resizing,this)},s.prototype.resizeBtnInit=function(){return this.resizeBtnStat={botLeft:!1,botRight:!1,topRight:!1,topLeft:!1}},s.prototype.vidResizePos=function(e,t){var i=this.calcPos(e),s=i.top,n=i.left,o=0===e.width||sf.base.isNullOrUndefined(e.width)||"auto"===e.width?e.getBoundingClientRect().width:e.width,r=0===e.height||sf.base.isNullOrUndefined(e.height)||"auto"===e.height?e.getBoundingClientRect().height:e.height,a=sf.base.Browser.isDevice?4*parseInt(e.style.outline.slice(-3),10)+2:2*parseInt(e.style.outline.slice(-3),10)+2,l=sf.base.Browser.isDevice?0:2;t.querySelector(".e-rte-botLeft").style.left=n-a+"px",t.querySelector(".e-rte-botLeft").style.top=parseInt(r.toString(),10)-a+s+"px",t.querySelector(".e-rte-botRight").style.left=parseInt(o.toString(),10)-(a-l)+n+"px",t.querySelector(".e-rte-botRight").style.top=parseInt(r.toString(),10)-a+s+"px",t.querySelector(".e-rte-topRight").style.left=parseInt(o.toString(),10)-(a-l)+n+"px",t.querySelector(".e-rte-topRight").style.top=s-a+"px",t.querySelector(".e-rte-topLeft").style.left=n-a+"px",t.querySelector(".e-rte-topLeft").style.top=s-a+"px"},s.prototype.resizeVidDupPos=function(e){this.vidDupPos={width:""!==e.style.width?this.vidEle.style.width:0===e.width||sf.base.isNullOrUndefined(e.width)||"auto"===e.width?parseInt(getComputedStyle(e).width,10)+"px":e.width+"px",height:""!==e.style.height?this.vidEle.style.height:0===e.height||sf.base.isNullOrUndefined(e.height)||"auto"===e.height?parseInt(getComputedStyle(e).height,10)+"px":e.height+"px"}},s.prototype.calcPos=function(e){for(var t,i={top:0,left:0},s=e.ownerDocument,n=(e.offsetParent&&(e.offsetParent.classList.contains("e-video-clickelem")||["TD","TH","TABLE","A"].indexOf(e.offsetParent.tagName)>-1)?sf.base.closest(e,"#"+this.rteId+"_rte-edit-view"):e.offsetParent)||s.documentElement;n&&(n===s.body||n===s.documentElement)&&"static"===n.style.position;)n=n.parentNode;return n&&n!==e&&1===n.nodeType&&(i=n.getBoundingClientRect()),e&&1===e.nodeType&&"IFRAME"===e.tagName?{top:(t=e.getBoundingClientRect()).top-i.top,left:t.left-i.left}:{top:e.offsetTop,left:e.offsetLeft}},s.prototype.getPointX=function(e){return e.touches&&e.touches.length?e.touches[0].pageX:e.pageX},s.prototype.getPointY=function(e){return e.touches&&e.touches.length?e.touches[0].pageY:e.pageY},s.prototype.pixToPercent=function(e,t){return e/parseFloat(getComputedStyle(t).width)*100},s.prototype.vidDupMouseMove=function(e,t,i){parseInt(this.parent.insertVideoSettings.minWidth,10)>=parseInt(e,10)||parseInt(this.getMaxWidth(),10)<=parseInt(e,10)||!this.parent.insertVideoSettings.resizeByPercent&&(parseInt(this.parent.insertVideoSettings.minHeight,10)>=parseInt(t,10)||parseInt(this.parent.insertVideoSettings.maxHeight,10)<=parseInt(t,10))||(this.vidEle.parentElement.style.cursor="pointer",this.setAspectRatio(this.vidEle,parseInt(e,10),parseInt(t,10),i),this.resizeVidDupPos(this.vidEle),this.vidResizePos(this.vidEle,this.vidResizeDiv),this.parent.setContentHeight("",!1))},s.prototype.setAspectRatio=function(e,t,i,s){var n=getComputedStyle(e);if(!sf.base.isNullOrUndefined(n)){var o=""!==n.width?n.width.match(/^\d+(\.\d*)?%$/g)?parseFloat(n.width):parseInt(n.width,10):""!==e.style.width?parseInt(e.style.width,10):e.width,r=""!==n.height?parseInt(n.height,10):""!==e.style.height?parseInt(e.style.height,10):e.height;o>r?(e.style.minWidth=0===parseInt(this.parent.insertVideoSettings.minWidth.toString(),10)?"140px":sf.base.formatUnit(this.parent.insertVideoSettings.minWidth),e.style.minHeight=0===parseInt(this.parent.insertVideoSettings.minHeight.toString(),10)?"50px":sf.base.formatUnit(this.parent.insertVideoSettings.minHeight),this.parent.insertVideoSettings.resizeByPercent?(e.style.width=this.pixToPercent(parseInt(o.toString(),10)/parseInt(r.toString(),10)*i,e.previousElementSibling||e.parentElement)+"%",e.style.height=null,e.removeAttribute("height")):""===e.style.width&&""!==e.style.height||""===n.width&&""!==n.height?e.style.height=i+"px":""!==e.style.width&&""===e.style.height||""!==n.width&&""===n.height?e.style.width=(parseInt(o.toString(),10)/parseInt(r.toString(),10)*i+parseInt(o.toString(),10)/parseInt(r.toString(),10)).toString()+"px":""!==e.style.width||""!==n.width?(e.style.width=parseInt(o.toString(),10)/parseInt(r.toString(),10)*i+"px",e.style.height=i+"px"):e.setAttribute("width",(parseInt(o.toString(),10)/parseInt(r.toString(),10)*i+parseInt(o.toString(),10)/parseInt(r.toString(),10)).toString())):r>o?this.parent.insertVideoSettings.resizeByPercent?(e.style.width=this.pixToPercent(t,e.previousElementSibling||e.parentElement)+"%",e.style.height=null,e.removeAttribute("height")):""!==e.style.width||""!==n.width?(e.style.width=t+"px",e.style.height=parseInt(r.toString(),10)/parseInt(o.toString(),10)*t+"px"):e.setAttribute("width",this.resizeBtnStat.botRight?(this.getPointX(s)-e.getBoundingClientRect().left).toString():t.toString()):this.parent.insertVideoSettings.resizeByPercent?(e.style.width=this.pixToPercent(t,e.previousElementSibling||e.parentElement)+"%",e.style.height=null,e.removeAttribute("height")):(e.style.width=t+"px",e.style.height=t+"px")}},s.prototype.getMaxWidth=function(){var e=this.parent.insertVideoSettings.maxWidth,t=this.parent.getEditPanel(),i=window.getComputedStyle(t),s=t.offsetWidth-(14+parseFloat(i.paddingLeft.split("px")[0])+parseFloat(i.paddingRight.split("px")[0])+parseFloat(i.marginLeft.split("px")[0])+parseFloat(i.marginRight.split("px")[0]));return sf.base.isNullOrUndefined(e)?s:e},s.prototype.cancelResizeAction=function(){sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchMoveEvent,this.resizing),sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchEndEvent,this.resizeEnd),this.vidEle&&this.vidResizeDiv&&this.parent.getEditPanel().contains(this.vidResizeDiv)&&(sf.base.detach(this.vidResizeDiv),this.vidEle.style.outline="",this.vidResizeDiv=null,this.pageX=null,this.pageY=null)},s.prototype.removeResizeEle=function(){sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchMoveEvent,this.resizing),sf.base.EventHandler.remove(this.parent.getDocument(),sf.base.Browser.touchEndEvent,this.resizeEnd),sf.base.detach(this.parent.getEditPanel().querySelector(".e-vid-resize"))},s.prototype.onWindowResize=function(){sf.base.isNullOrUndefined(this.parent)||sf.base.isNullOrUndefined(this.parent.getEditPanel().querySelector(".e-vid-resize"))||this.cancelResizeAction()},s.prototype.editAreaClickHandler=function(e){if(this.parent.readonly)this.hideVideoQuickToolbar();else{var t=e.args,i=this.parent.quickToolbarSettings.showOnRightClick;if(2===t.which||i&&1===t.which||!i&&3===t.which)!i||1!==t.which||sf.base.isNullOrUndefined(t.target)||"VIDEO"!==t.target.tagName&&!this.isEmbedVidElem(t.target)||(this.parent.formatter.editorManager.nodeSelection.Clear(this.parent.getDocument()),this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.parent.getDocument(),t.target));else if("HTML"===this.parent.editorMode&&this.parent.quickToolbarModule){this.quickToolObj=this.parent.quickToolbarModule;var s,n=t.target;if(s=document.body.querySelector("#"+this.rteId+"_Video_Quick_Popup").classList.contains("e-rte-pop"),("VIDEO"===n.nodeName||this.isEmbedVidElem(n))&&this.parent.quickToolbarModule){if(s)return;this.parent.formatter.editorManager.nodeSelection.Clear(this.parent.getDocument()),this.parent.formatter.editorManager.nodeSelection.setSelectionContents(this.parent.getDocument(),n),u()&&this.parent.observer.notify(o,e),sf.base.addClass([this.isEmbedVidElem(n)?n.querySelector("iframe"):n],"e-video-focus"),this.showVideoQuickToolbar({args:t,type:"Videos",elements:[t.target]})}else this.hideVideoQuickToolbar()}}},s.prototype.showVideoQuickToolbar=function(e){var t=this,i="VideoLink";if("Videos"===e.type&&2!==e.args.detail&&!sf.base.isNullOrUndefined(this.parent.quickToolbarModule)){this.quickToolObj=this.parent.quickToolbarModule;var s=e.args,n=e.elements,o=this.parent.element.getBoundingClientRect(),r=this.parent.getToolbarElement(),a=r?r.offsetHeight+this.parent.toolbarModule.getExpandTBarPopHeight():0;[].forEach.call(e.elements,(function(e,t){0===t&&(n=e)})),n&&!sf.base.closest(n,"a")&&(i="Video"),("VIDEO"===n.tagName||this.isEmbedVidElem(n))&&sf.base.addClass([this.isEmbedVidElem(n)&&"IFRAME"!==n.tagName?n.querySelector("iframe"):n],["e-video-focus"]);var l=this.parent.iframeSettings.enable?window.pageXOffset+o.left+s.clientX:s.pageX,h=this.parent.iframeSettings.enable?window.pageYOffset+o.top+a+s.clientY:s.pageY;this.quickToolObj&&(e.isNotify?setTimeout((function(){t.quickToolObj.showVideoQTBar(l,h,n,i)}),400):this.quickToolObj.showVideoQTBar(l,h,n,i))}},s.prototype.hideVideoQuickToolbar=function(){sf.base.isNullOrUndefined(this.parent.getEditPanel().querySelector(".e-video-focus"))||(sf.base.removeClass([this.parent.getEditPanel().querySelector(".e-video-focus")],"e-video-focus"),this.quickToolObj&&this.quickToolObj.hideVideoQTBar())},s.prototype.onToolbarAction=function(e){switch(this.quickToolObj&&(this.quickToolObj.hideVideoQTBar(),sf.base.removeClass([e.selectNode[0]],"e-video-focus")),this.selectionObj=e,u()&&this.parent.observer.notify(r,{}),e.args.item.subCommand){case"VideoReplace":this.parent.observer.notify("insertVideo",e);break;case"VideoRemove":this.parent.observer.notify("delete",e);break;case"VideoDimension":this.parent.observer.notify("videoSize",e)}},s.prototype.deleteVid=function(e,t){if("VIDEO"===e.selectNode[0].nodeName||this.isEmbedVidElem(e.selectNode[0])){var i={src:e.selectNode[0].getAttribute("src")};0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),e.selection.restore(),this.parent.getEditPanel().querySelector(".e-vid-resize")&&this.removeResizeEle(),this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,captionClass:"e-img-caption",subCommand:e.args.item.subCommand}),this.quickToolObj&&this.quickToolObj.hideVideoQTBar(),this.cancelResizeAction(),sf.base.isNullOrUndefined(t)&&this.parent.mediaDeleteEnabled&&this.parent.dotNetRef.invokeMethodAsync("MediaDeleted",i)}},s.prototype.videoSize=function(e){if("VIDEO"===e.selectNode[0].nodeName||this.isEmbedVidElem(e.selectNode[0])){var t=e.selectNode[0],i={mode:"Dimension",width:"auto"===t.style.width.toString()||t.style.width.toString()?t.style.width.toString():parseInt(t.getClientRects()[0].width.toString()).toString(),height:"auto"===t.style.height.toString()||t.style.height.toString()?t.style.height.toString():parseInt(t.getClientRects()[0].height.toString()).toString(),maxWidth:this.getMaxWidth()};this.parent.dotNetRef.invokeMethodAsync("ShowVideoDialog",i)}},s.prototype.insertVideoSize=function(e,t){this.selectionObj.selection.restore(),0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),this.parent.formatter.process(this.parent,this.selectionObj.args,this.selectionObj.args,{width:e,height:t,selectNode:this.selectionObj.selectNode,subCommand:this.selectionObj.args.item.subCommand}),this.vidResizeDiv&&this.vidResizePos(this.selectionObj.selectNode[0],this.vidResizeDiv),this.parent.dotNetRef.invokeMethodAsync("CloseVideoDialog",null)},s.prototype.alignmentSelect=function(e){var t=e.item;if(document.body.contains(document.body.querySelector(".e-rte-quick-toolbar"))&&"Videos"===t.command){var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),s=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(i),n={args:e,selectNode:s=this.isEmbedVidElem(s[0])?s:[this.vidEle]};switch(0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),t.subCommand){case"JustifyLeft":this.alignVideo(n,"JustifyLeft");break;case"JustifyCenter":this.alignVideo(n,"JustifyCenter");break;case"JustifyRight":this.alignVideo(n,"JustifyRight");break;case"Inline":this.inline(n);break;case"Break":this.break(n)}this.quickToolObj&&(this.quickToolObj.hideVideoQTBar(),sf.base.removeClass([s[0]],"e-video-focus")),this.cancelResizeAction()}},s.prototype.alignVideo=function(e,t){var i=e.args.item?e.args.item.subCommand:t;this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,subCommand:i})},s.prototype.inline=function(e){if("VIDEO"===e.selectNode[0].nodeName||this.isEmbedVidElem(e.selectNode[0])){var t=e.args.item?e.args.item.subCommand:"Inline";this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,subCommand:t})}},s.prototype.break=function(e){if("VIDEO"===e.selectNode[0].nodeName||this.isEmbedVidElem(e.selectNode[0])){var t=e.args.item?e.args.item.subCommand:"Break";this.parent.formatter.process(this.parent,e.args,e.args,{selectNode:e.selectNode,subCommand:t})}},s.prototype.videoBrowseClick=function(){document.getElementById(this.rteId+"_video").querySelector(".e-rte-video-dialog .e-file-select-wrap button").click()},s.prototype.dialogOpened=function(){var e=sf.base.Browser.isDevice?document.getElementById(this.rteId+"_video").querySelector(".e-video-content"):this.parent.element.querySelector(".e-rte-video-dialog .e-video-content");if(!sf.base.isNullOrUndefined(e)){var t=document.getElementById(this.rteId+"_dropText"),i=document.getElementById(this.rteId+"_insertVideo");this.buttonClickElement=sf.base.Browser.isDevice?t:i,sf.base.EventHandler.add(this.buttonClickElement,"click",this.videoBrowseClick,this),sf.base.isNullOrUndefined(this.parent.insertVideoSettings.path)&&"HTML"!==this.parent.editorMode?e.querySelector(".e-video-url").focus():e.querySelector("#"+this.rteId+"_insertVideo").focus()}},s.prototype.fileSelected=function(){this.inputUrl&&this.inputUrl.setAttribute("disabled","true"),this.embedInputUrl&&this.embedInputUrl.setAttribute("disabled","true")},s.prototype.fileUploadSuccess=function(e,t){this.inputUrl=this.parent.element.querySelector(".e-rte-video-dialog .e-video-url"),this.embedInputUrl=this.parent.element.querySelector(".e-rte-video-dialog .e-embed-video-url"),sf.base.isNullOrUndefined(this.parent.insertVideoSettings.path)||(this.uploadUrl={url:e,selection:this.vidUploadSave,fileName:t,selectParent:this.vidUploadSelectedParent,width:{width:this.parent.insertVideoSettings.width,minWidth:this.parent.insertVideoSettings.minWidth,maxWidth:this.getMaxWidth()},height:{height:this.parent.insertVideoSettings.height,minHeight:this.parent.insertVideoSettings.minHeight,maxHeight:this.parent.insertVideoSettings.maxHeight}},this.inputUrl&&this.inputUrl.setAttribute("disabled","true"),this.embedInputUrl&&this.embedInputUrl.setAttribute("disabled","true"))},s.prototype.fileUploadComplete=function(e,t){if(this.inputUrl=this.parent.element.querySelector(".e-rte-video-dialog .e-video-url"),"HTML"===this.parent.editorMode&&sf.base.isNullOrUndefined(this.parent.insertVideoSettings.path)){var i="Base64"===this.parent.insertVideoSettings.saveFormat?e:URL.createObjectURL(T(e));this.uploadUrl={url:i,selection:this.vidUploadSave,fileName:t,selectParent:this.vidUploadSelectedParent,width:{width:this.parent.insertVideoSettings.width,minWidth:this.parent.insertVideoSettings.minWidth,maxWidth:this.getMaxWidth()},height:{height:this.parent.insertVideoSettings.height,minHeight:this.parent.insertVideoSettings.minHeight,maxHeight:this.parent.insertVideoSettings.maxHeight}},this.inputUrl&&this.inputUrl.setAttribute("disabled","true"),this.embedInputUrl&&this.embedInputUrl.setAttribute("disabled","true")}},s.prototype.fileUploadChange=function(e,t){this.modifiedUrl=e,this.isStreamUrl=t},s.prototype.fileRemoving=function(){this.inputUrl.removeAttribute("disabled"),this.embedInputUrl.removeAttribute("disabled"),this.uploadUrl&&(this.uploadUrl.url="")},s.prototype.dialogClosed=function(){"HTML"===this.parent.editorMode&&this.selectionObj.selection.restore(),this.buttonClickElement&&sf.base.EventHandler.remove(this.buttonClickElement,"click",this.videoBrowseClick)},s.prototype.insertVideoUrl=function(){var e,t;if(sf.base.Browser.isDevice?(this.inputUrl=this.parent.inputElement.ownerDocument.querySelector("#"+this.rteId+"_video").querySelector(".e-rte-video-dialog .e-video-url"),this.embedInputUrl=this.parent.inputElement.ownerDocument.querySelector("#"+this.rteId+"_video").querySelector(".e-rte-video-dialog .e-embed-video-url")):(this.inputUrl=this.parent.element.querySelector(".e-rte-video-dialog .e-video-url"),this.embedInputUrl=this.parent.element.querySelector(".e-rte-video-dialog .e-embed-video-url")),sf.base.isNullOrUndefined(this.inputUrl)||(e=this.inputUrl.value),sf.base.isNullOrUndefined(this.embedInputUrl)||(t=this.embedInputUrl.value),this.isStreamUrl&&""!==this.modifiedUrl&&(this.uploadUrl.url=this.modifiedUrl,this.modifiedUrl=""),0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),sf.base.isNullOrUndefined(this.uploadUrl)||""===this.uploadUrl.url){if(!("HTML"!==this.parent.editorMode||sf.base.isNullOrUndefined(e)&&sf.base.isNullOrUndefined(t))){if("HTML"===this.parent.editorMode&&sf.base.isNullOrUndefined(sf.base.closest(this.selectionObj.selection.range.startContainer.parentNode,"#"+this.parent.getPanel().id))){this.parent.getEditPanel().focus();var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument());this.selectionObj.selection=this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.getDocument()),this.selectionObj.selectParent=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(i)}var s=sf.base.isNullOrUndefined(e)?t:e.split("/")[e.split("/").length-1],n={cssClass:"Inline"===this.parent.insertVideoSettings.layoutOption?"e-video-inline":"e-video-break",url:e,selection:this.selectionObj.selection,fileName:s,isEmbedUrl:!sf.base.isNullOrUndefined(t),selectParent:this.selectionObj.selectParent,width:{width:this.parent.insertVideoSettings.width,minWidth:this.parent.insertVideoSettings.minWidth,maxWidth:this.getMaxWidth()},height:{height:this.parent.insertVideoSettings.height,minHeight:this.parent.insertVideoSettings.minHeight,maxHeight:this.parent.insertVideoSettings.maxHeight}};this.parent.formatter.process(this.parent,this.selectionObj.args,this.selectionObj.args.originalEvent,n),this.parent.dotNetRef.invokeMethodAsync("CloseVideoDialog",null)}}else this.uploadUrl.cssClass="Inline"===this.parent.insertVideoSettings.layoutOption?"e-video-inline":"e-video-break",this.parent.dotNetRef.invokeMethodAsync("CloseVideoDialog",null),this.uploadUrl.isEmbedUrl=!1,this.parent.formatter.process(this.parent,this.selectionObj.args,this.selectionObj.args.originalEvent,this.uploadUrl),this.parent.getEditPanel().querySelector(".e-video-resize")&&(this.vidEle.style.outline="",this.removeResizeEle())},s.prototype.showDialog=function(e,t,i,s,n){var o,r,a,l;e&&!sf.base.isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection)?(o=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),r=this.parent.formatter.editorManager.nodeSelection.save(o,this.parent.getDocument()),a=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(o),l=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(o)):(r=i,a=s,l=n),"HTML"===this.parent.editorMode&&this.videoDialog({args:{item:{command:"Videos",subCommand:"Video"},originalEvent:e?void 0:t},selectNode:a,selection:r,selectParent:l})},s.prototype.onCutHandler=function(){this.vidResizeDiv&&this.parent.getEditPanel().contains(this.vidResizeDiv)&&this.cancelResizeAction()},s.prototype.onIframeMouseDown=function(e){this.parent.dotNetRef.invokeMethodAsync("CloseVideoDialog",null),this.onDocumentClick(e)},s.prototype.onDocumentClick=function(e){var t=e.target;("VIDEO"===t.nodeName||this.isEmbedVidElem(t))&&(this.vidEle=this.isEmbedVidElem(t)?t.querySelector("iframe"):t);var i=document.body.querySelector("#"+this.rteId+"_video.e-rte-video-dialog");!sf.base.isNullOrUndefined(i)&&(!sf.base.closest(t,"#"+this.rteId+"_video")&&this.parent.toolbarSettings.enable&&this.parent.getToolbarElement()&&!this.parent.getToolbarElement().contains(e.target)||this.parent.getToolbarElement()&&this.parent.getToolbarElement().contains(e.target)&&!sf.base.closest(t,"#"+this.rteId+"_toolbar_Video")&&!t.querySelector("#"+this.rteId+"_toolbar_Video"))&&(e.offsetX>e.target.clientWidth||e.offsetY>e.target.clientHeight||(this.parent.dotNetRef.invokeMethodAsync("CloseVideoDialog","Outside Click"),this.parent.isBlur=!0,sf.base.Browser.isIE&&E(this.parent.element,"focusout"))),!this.isEmbedVidElem(e.target)&&this.vidResizeDiv&&!this.quickToolObj&&this.parent.getEditPanel().contains(this.vidResizeDiv)&&this.cancelResizeAction(),this.parent.getEditPanel().querySelector(".e-vid-resize")&&("VIDEO"===t.tagName||this.isEmbedVidElem(t)||this.removeResizeEle(),"VIDEO"===t.tagName||this.isEmbedVidElem(t)||sf.base.isNullOrUndefined(this.vidEle)?sf.base.isNullOrUndefined(this.prevSelectedVidEle)||this.prevSelectedVidEle===("IFRAME"===t.tagName||"VIDEO"===t.tagName?t:t.querySelector("iframe"))||(this.prevSelectedVidEle.style.outline=""):this.vidEle.style.outline="")},s.prototype.videoClick=function(e){sf.base.Browser.isDevice&&("VIDEO"===e.target.tagName||this.isEmbedVidElem(e.target)?(this.parent.getEditPanel().setAttribute("contenteditable","false"),e.target.focus()):this.parent.readonly||this.parent.getEditPanel().setAttribute("contenteditable","true")),("VIDEO"===e.target.tagName||this.isEmbedVidElem(e.target))&&e.preventDefault()},s.prototype.onKeyDown=function(e){var t,i,s,n,o,r=e.args;this.deletedVid=[];if("HTML"===this.parent.editorMode&&(o=(t=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument())).startContainer===t.endContainer&&t.startOffset===t.endOffset),!o&&"HTML"===this.parent.editorMode&&[27,112,113,114,115,116,117,118,119,120,121,122,123,44,45,9,16,17,18,19,20,33,34,35,36,37,38,39,40,91,92,93,144,145,182,183].indexOf(r.which)<0)for(var a=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(t),l=0;l<a.length;l++)"VIDEO"!==a[l].nodeName&&"IFRAME"!==a[l].nodeName||this.deletedVid.push(a[l]);if("HTML"===this.parent.editorMode&&(8===r.which&&"Backspace"===r.code||46===r.which&&"Delete"===r.code)){var h=t.startContainer===t.endContainer&&t.startOffset===t.endOffset;8===r.which&&"Backspace"===r.code&&h?this.checkVideoBack(t):46===r.which&&"Delete"===r.code&&h&&this.checkVideoDel(t)}if(!sf.base.isNullOrUndefined(this.parent.formatter.editorManager.nodeSelection)&&"KeyK"!==r.code&&(t=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),i=this.parent.formatter.editorManager.nodeSelection.save(t,this.parent.getDocument()),s=this.parent.formatter.editorManager.nodeSelection.getNodeCollection(t),n=this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(t),!r.ctrlKey&&r.key&&(1===r.key.length||"enter"===r.action||37===r.keyCode||38===r.keyCode||39===r.keyCode||40===r.keyCode)&&("VIDEO"===n[0].tagName||this.isEmbedVidElem(n[0]))&&n[0].parentElement)){var d=n[0].parentElement.childNodes[0];this.parent.getEditPanel().querySelector(".e-vid-resize")&&this.removeResizeEle(),this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.parent.getDocument(),d,d,d.textContent.length,d.textContent.length),sf.base.removeClass([n[0]],"e-video-focus"),this.quickToolObj.hideVideoQTBar(),sf.base.isNullOrUndefined(this.vidEle)||(this.vidEle.style.outline="")}if(!r.ctrlKey||89!==r.keyCode&&90!==r.keyCode||this.undoStack({subCommand:90===r.keyCode?"undo":"redo"}),8===r.keyCode||46===r.keyCode){if(s&&("VIDEO"===s[0].nodeName||this.isEmbedVidElem(s[0]))){r.preventDefault();var c={selectNode:s,selection:i,selectParent:n,args:{item:{command:"Videos",subCommand:"Remove"},originalEvent:r}};this.deleteVid(c,r.keyCode)}this.parent.getEditPanel().querySelector(".e-vid-resize")&&this.removeResizeEle()}switch(r.action){case"escape":this.parent.dotNetRef.invokeMethodAsync("CloseVideoDialog",null);break;case"insert-video":this.showDialog(!1,r,i,s,n),r.preventDefault()}},s.prototype.onKeyUp=function(e){if(!sf.base.isNullOrUndefined(this.deletedVid)&&this.deletedVid.length>0)for(var t=0;t<this.deletedVid.length;t++){var i={src:this.deletedVid[t].getAttribute("src")};this.parent.mediaDeleteEnabled&&this.parent.dotNetRef.invokeMethodAsync("MediaDeleted",i)}},s.prototype.resizeStart=function(e,t){var i=this;if(!this.parent.readonly){var s=t||(this.isEmbedVidElem(e.target)?e.target.querySelector("iframe"):e.target);if(this.prevSelectedVidEle=this.vidEle,"VIDEO"===s.tagName||"IFRAME"===s.tagName){this.parent.defaultResize(e,!1);var n=s;this.vidResizeDiv&&this.parent.getEditPanel().contains(this.vidResizeDiv)&&sf.base.detach(this.vidResizeDiv),this.videoResize(n)}if(s.classList.contains("e-rte-videoboxmark")){if(0===this.parent.formatter.getUndoRedoStack().length&&this.parent.formatter.saveData(),this.pageX=this.getPointX(e),this.pageY=this.getPointY(e),e.preventDefault(),e.stopImmediatePropagation(),this.resizeBtnInit(),this.quickToolObj&&this.quickToolObj.hideVideoQTBar(),s.classList.contains("e-rte-topLeft")&&(this.resizeBtnStat.topLeft=!0),s.classList.contains("e-rte-topRight")&&(this.resizeBtnStat.topRight=!0),s.classList.contains("e-rte-botLeft")&&(this.resizeBtnStat.botLeft=!0),s.classList.contains("e-rte-botRight")&&(this.resizeBtnStat.botRight=!0),sf.base.Browser.isDevice&&this.parent.getEditPanel().contains(this.vidResizeDiv)&&!this.vidResizeDiv.classList.contains("e-mob-span"))sf.base.addClass([this.vidResizeDiv],"e-mob-span");else{this.parent.onResizeStartEnabled&&this.parent.dotNetRef.invokeMethodAsync("ResizeStartEvent",{requestType:"Videos"}).then((function(e){e.cancel&&i.cancelResizeAction()}))}sf.base.EventHandler.add(this.parent.getDocument(),sf.base.Browser.touchEndEvent,this.resizeEnd,this)}}},s.prototype.resizing=function(e){this.vidEle.offsetWidth>=this.getMaxWidth()&&(this.vidEle.style.maxHeight=this.vidEle.offsetHeight+"px");var t=this.getPointX(e),i=this.getPointY(e),s=this.resizeBtnStat.botLeft||this.resizeBtnStat.topLeft?-(t-this.pageX):t-this.pageX,n=this.resizeBtnStat.topLeft||this.resizeBtnStat.topRight?-(i-this.pageY):i-this.pageY,o=parseInt(this.vidDupPos.width,10)+s,r=parseInt(this.vidDupPos.height,10)+n;this.pageX=t,this.pageY=i,(this.resizeBtnStat.botRight||this.resizeBtnStat.botLeft||this.resizeBtnStat.topRight||this.resizeBtnStat.topLeft)&&this.vidDupMouseMove(o+"px",r+"px",e)},s.prototype.resizeEnd=function(e){this.resizeBtnInit(),this.vidEle.parentElement.style.cursor="auto",sf.base.Browser.isDevice&&sf.base.removeClass([e.target.parentElement],"e-mob-span");this.parent.onResizeStopEnabled&&this.parent.dotNetRef.invokeMethodAsync("ResizeStopEvent",{requestType:"Videos"}),this.parent.formatter.editorManager.observer.on(h,this.undoStack,this),this.parent.formatter.saveData()},s.prototype.destroy=function(){this.prevSelectedVidEle=void 0,this.removeEventListener()},s}(),F=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("xhtmlValidation",this.enableXhtmlValidation,this),this.parent.observer.on(t,this.removeEventListener,this)},e.prototype.removeEventListener=function(){this.parent.observer.off("xhtmlValidation",this.enableXhtmlValidation),this.parent.observer.off(t,this.removeEventListener)},e.prototype.enableXhtmlValidation=function(){this.parent.enableXhtml&&(sf.base.isNullOrUndefined(this.parent.inputElement)?this.currentElement=this.parent.element:this.currentElement=this.parent.inputElement,this.clean(this.currentElement),this.AddRootElement(),this.ImageTags(),this.removeTags(),this.RemoveUnsupported(),this.currentElement.innerHTML=this.selfEncloseValidation(this.currentElement.innerHTML))},e.prototype.selfEncloseValidation=function(e){var t;e=e.replace(/<br>/g,"<br/>").replace(/<hr>/g,"<hr/>").replace(/ /g," ");for(var i=[],s=[],n=[/<img(.*?)>/gi,/<area(.*?)>/gi,/<base(.*?)>/gi,/<col (.*?)>/gi,/<embed(.*?)>/gi,/<input(.*?)>/gi,/<link(.*?)>/gi,/<meta(.*?)>/gi,/<param(.*?)>/gi,/<source(.*?)>/gi,/<track(.*?)>/gi,/<wbr(.*?)>/gi],o=0;o<n.length;o++){for(t=n[o].exec(e);null!==t;)i.push(t[0].toString()),t=n[o].exec(e);s=i.slice(0);for(var r=0;r<i.length;r++)-1!==i[r].indexOf("/")&&i[r].lastIndexOf("/")===i[r].length-2||(i[r]=i[r].substr(0,i[r].length-1)+" /"+i[r].substr(i[r].length-1,i[r].length));for(var a=0;a<=i.length-1;a++)e=e.replace(s[a],i[a])}return e},e.prototype.AddRootElement=function(){if(1===this.currentElement.childNodes.length&&"DIV"!==this.currentElement.firstChild.nodeName||this.currentElement.childNodes.length>1){for(var e=document.createElement("div");this.currentElement.childNodes.length>0;)e.appendChild(this.currentElement.childNodes[0]);this.currentElement.appendChild(e)}},e.prototype.clean=function(e){for(var t=0;t<e.childNodes.length;t++){var i=e.childNodes[t];8===i.nodeType||"V:IMAGE"===i.nodeName?(e.removeChild(i),t--):1===i.nodeType&&this.clean(i)}return this.currentElement.innerHTML},e.prototype.ImageTags=function(){for(var e=this.currentElement.querySelectorAll("IMG"),t=e.length-1;t>=0;t--){if(!e[t].hasAttribute("alt"))e[t].setAttribute("alt","")}},e.prototype.removeTags=function(){for(var e=[["br","ul"],["br","ol"],["table","span"],["div","span"],["p","span"]],t=0;t<e.length;t++)this.RemoveElementNode(e[t][0],e[t][1])},e.prototype.RemoveElementNode=function(e,t){for(var i=this.currentElement.querySelectorAll(t),s=0;s<i.length;s++)for(var n=i[s].querySelectorAll(e),o=n.length;o>0;o--)sf.base.detach(n[o-1])},e.prototype.RemoveUnsupported=function(){for(var e=this.currentElement.querySelectorAll("u"),t=e.length-1;t>=0;t--){var i=document.createElement("span");i.style.textDecoration="underline",i.innerHTML=e[t].innerHTML,e[t].parentNode.insertBefore(i,e[t]),sf.base.detach(e[t])}var s=this.currentElement.querySelectorAll("strong");for(t=s.length-1;t>=0;t--){var n=document.createElement("b");n.innerHTML=s[t].innerHTML,s[t].parentNode.insertBefore(n,s[t]),sf.base.detach(s[t])}var o=["language","role","target","contenteditable","cellspacing","cellpadding","border","valign","colspan"];for(t=0;t<=o.length;t++)this.RemoveAttributeByName(o[t])},e.prototype.RemoveAttributeByName=function(e){if(null!==this.currentElement.firstChild&&3!==this.currentElement.firstChild.nodeType)for(var t=0;t<this.currentElement.childNodes.length;t++){var i=this.currentElement.childNodes[t];if(3!==i.nodeType&&"TABLE"!==i.nodeName&&"TBODY"!==i.nodeName&&"THEAD"!==i.nodeName&&"TH"!==i.nodeName&&"TR"!==i.nodeName&&"TD"!==i.nodeName&&(i.hasAttribute(e)&&i.removeAttribute(e),i.hasChildNodes()))for(var s=0;s<i.childNodes.length;s++){var n=i.childNodes[s];if(3!==n.nodeType&&"TABLE"!==n.nodeName&&"TBODY"!==n.nodeName&&"THEAD"!==n.nodeName&&"TH"!==n.nodeName&&"TR"!==n.nodeName&&"TD"!==n.nodeName&&n.hasAttribute(e)&&!n.classList.contains("e-mention-chip")&&n.removeAttribute(e),n.hasChildNodes())for(var o=0;o<n.childNodes.length;o++)3!==n.childNodes[o].nodeType&&"TABLE"!==n.childNodes[o].nodeName&&"TBODY"!==n.childNodes[o].nodeName&&"THEAD"!==n.childNodes[o].nodeName&&"TH"!==n.childNodes[o].nodeName&&"TR"!==n.childNodes[o].nodeName&&"TD"!==n.childNodes[o].nodeName&&n.childNodes[o].hasAttribute(e)&&n.childNodes[o].removeAttribute(e)}}},e}(),q=function(){function e(){}return e.prototype.getFormattedNode=function(e,t,i){var s=this.getFormatParent(e,t,i);return null!==s&&s!==i?s:null},e.prototype.getFormatParent=function(e,t,i){do{e=e.parentNode}while(e&&e!==i&&!this.isFormattedNode(e,t));return e},e.prototype.isFormattedNode=function(t,i){switch(i){case"bold":return e.isBold(t);case"italic":return e.isItalic(t);case"underline":return e.isUnderline(t);case"strikethrough":return e.isStrikethrough(t);case"superscript":return e.isSuperscript(t);case"subscript":return e.isSubscript(t);case"fontcolor":return this.isFontColor(t);case"fontname":return this.isFontName(t);case"fontsize":return this.isFontSize(t);case"backgroundcolor":return this.isBackgroundColor(t);default:return!1}},e.isBold=function(e){return-1!==["strong","b"].indexOf(e.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(e.nodeName.toLowerCase())||!e.style||"bold"!==e.style.fontWeight)},e.isItalic=function(e){return-1!==["em","i"].indexOf(e.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(e.nodeName.toLowerCase())||!e.style||"italic"!==e.style.fontStyle)},e.isUnderline=function(e){return-1!==["u"].indexOf(e.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(e.nodeName.toLowerCase())||!e.style||"underline"!==e.style.textDecoration)},e.isStrikethrough=function(e){return-1!==["del","strike"].indexOf(e.nodeName.toLowerCase())||!(-1===this.inlineTags.indexOf(e.nodeName.toLowerCase())||!e.style||"line-through"!==e.style.textDecoration)},e.isSuperscript=function(e){return-1!==["sup"].indexOf(e.nodeName.toLowerCase())},e.isSubscript=function(e){return-1!==["sub"].indexOf(e.nodeName.toLowerCase())},e.prototype.isFontColor=function(t){var i=t.style&&t.style.color;return-1!==e.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==i&&""!==i&&void 0!==i},e.prototype.isBackgroundColor=function(t){var i=t.style&&t.style.backgroundColor;return-1!==e.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==i&&""!==i&&void 0!==i},e.prototype.isFontSize=function(t){var i=t.style&&t.style.fontSize;return-1!==e.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==i&&""!==i&&void 0!==i},e.prototype.isFontName=function(t){var i=t.style&&t.style.fontFamily;return-1!==e.inlineTags.indexOf(t.nodeName.toLowerCase())&&null!==i&&""!==i&&void 0!==i},e.inlineTags=["a","abbr","acronym","b","bdo","big","cite","code","dfn","em","font","i","kbd","label","q","samp","small","span","strong","sub","sup","tt","u","var","del"],e}(),V="INSERT-IMAGE",W=["address","article","aside","audio","blockquote","canvas","details","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","section","table","tbody","td","tfoot","th","thead","tr","ul","video","body"],_=["td","th"],Q=["table","tbody","td","tfoot","th","thead","tr"],X=["area","base","br","embed","hr","img","input","param","source","track","wbr","iframe","td"],G=function(){function e(){this.startNodeName=[],this.endNodeName=[]}return e.prototype.saveInstance=function(e,t){return this.range=e.cloneRange(),this.rootNode=this.documentFromRange(e),this.body=t,this.startContainer=this.getNodeArray(e.startContainer,!0),this.endContainer=this.getNodeArray(e.endContainer,!1),this.startOffset=e.startOffset,this.endOffset=e.endOffset,this.html=this.body.innerHTML,this},e.prototype.documentFromRange=function(e){return 9===e.startContainer.nodeType?e.startContainer:e.startContainer.ownerDocument},e.prototype.getRange=function(e){var t=this.get(e),i=t&&t.rangeCount>0?t.getRangeAt(t.rangeCount-1):e.createRange();return i.startContainer!==e||i.endContainer!==e||i.startOffset||i.endOffset||(i.setStart(e.body,0),i.collapse(!0)),i},e.prototype.get=function(e){return e.defaultView.getSelection()},e.prototype.save=function(e,t){return e=e?e.cloneRange():this.getRange(t),this.saveInstance(e,t.body)},e.prototype.getIndex=function(e){var t=0;if(e=e.previousSibling||"BR"!==e.tagName?e.previousSibling:e)for(e.nodeType;e;null)t++,e.nodeType,e=e.previousSibling;return t},e.prototype.isChildNode=function(e,t){for(var i=0;i<t.childNodes.length;i++)if(e.indexOf(t.childNodes[i])>-1)return!0;return!1},e.prototype.getNode=function(e,t,i){return t!==e||3!==e.nodeType&&e.firstChild&&-1===i.indexOf(e.firstChild)&&!this.isChildNode(i,e)?-1===i.indexOf(e.firstChild)&&e.firstChild&&!this.isChildNode(i,e)?e.firstChild:e.nextSibling?e.nextSibling:e.parentNode?e.parentNode:null:null},e.prototype.getNodeCollection=function(e){var t=e.startContainer.childNodes[e.startOffset]||e.startContainer,i=e.endContainer.childNodes[e.endOffset>0?e.endOffset-1:e.endOffset]||e.endContainer;if((t===i||"BR"===t.nodeName&&t===e.endContainer.childNodes[e.endOffset])&&0===t.childNodes.length)return[t];if(e.startOffset===e.endOffset&&0!==e.startOffset&&"PRE"===e.startContainer.nodeName)return["BR"===t.nodeName||"#text"===t.nodeName?t:t.childNodes[0]];var s=[];do{-1===s.indexOf(t)&&s.push(t),t=this.getNode(t,i,s)}while(t);return s},e.prototype.getParentNodeCollection=function(e){return this.getParentNodes(this.getNodeCollection(e),e)},e.prototype.getParentNodes=function(e,t){e=e.reverse();for(var i=0;i<e.length;i++)-1!==e.indexOf(e[i].parentNode)||3===e[i].nodeType&&t.startContainer!==t.endContainer&&t.startContainer.parentNode!==t.endContainer.parentNode?(e.splice(i,1),i--):3===e[i].nodeType&&(e[i]=e[i].parentNode);return e},e.prototype.getSelectionNodeCollection=function(e){return this.getSelectionNodes(this.getNodeCollection(e))},e.prototype.getSelectionNodeCollectionBr=function(e){return this.getSelectionNodesBr(this.getNodeCollection(e))},e.prototype.getSelectionNodes=function(e){e=e.reverse();for(var t=new RegExp(String.fromCharCode(8203),"g"),i=0;i<e.length;i++)(3!==e[i].nodeType||""===e[i].textContent.trim()||1===e[i].textContent.length&&e[i].textContent.match(t))&&(e.splice(i,1),i--);return e.reverse()},e.prototype.getSelectionNodesBr=function(e){e=e.reverse();for(var t=new RegExp(String.fromCharCode(8203),"g"),i=0;i<e.length;i++)"BR"!==e[i].nodeName&&(3!==e[i].nodeType||""===e[i].textContent.trim()||1===e[i].textContent.length&&e[i].textContent.match(t))&&(e.splice(i,1),i--);return e.reverse()},e.prototype.getInsertNodeCollection=function(e){return this.getInsertNodes(this.getNodeCollection(e))},e.prototype.getInsertNodes=function(e){e=e.reverse();for(var t=0;t<e.length;t++)(0!==e[t].childNodes.length&&3!==e[t].nodeType||3===e[t].nodeType&&""===e[t].textContent)&&(e.splice(t,1),t--);return e.reverse()},e.prototype.getNodeArray=function(e,t,i){var s=[];for(t?this.startNodeName=[]:this.endNodeName=[];e!==(i||this.rootNode)&&!sf.base.isNullOrUndefined(e);null)t?this.startNodeName.push(e.nodeName.toLowerCase()):this.endNodeName.push(e.nodeName.toLowerCase()),s.push(this.getIndex(e)),e=e.parentNode;return s},e.prototype.setRangePoint=function(e,t,i,s){for(var n=this.rootNode,o=i.length,r=s;o--;null)n=n&&n.childNodes[i[o]];return n&&r>=0&&"html"!==n.nodeName&&(3===n.nodeType&&"&nbsp;"===n.nodeValue.replace(/\u00a0/g,"&nbsp;")&&(r=n.textContent.length),e[t?"setStart":"setEnd"](n,r)),e},e.prototype.restore=function(){var e=this.range.cloneRange();return e=this.setRangePoint(e,!0,this.startContainer,this.startOffset),e=this.setRangePoint(e,!1,this.endContainer,this.endOffset),this.selectRange(this.rootNode,e),e},e.prototype.selectRange=function(e,t){this.setRange(e,t),this.save(t,e)},e.prototype.setRange=function(e,t){var i=this.get(e);i.removeAllRanges(),i.addRange(t)},e.prototype.setSelectionText=function(e,t,i,s,n){var o=e.createRange();o.setStart(t,s),o.setEnd(i,n),this.setRange(e,o)},e.prototype.setSelectionContents=function(e,t){var i=e.createRange();i.selectNode(t),this.setRange(e,i)},e.prototype.setSelectionNode=function(e,t){var i=e.createRange();i.selectNodeContents(t),this.setRange(e,i)},e.prototype.getSelectedNodes=function(e){return this.getNodeCollection(this.getRange(e))},e.prototype.Clear=function(e){this.get(e).removeAllRanges()},e.prototype.insertParentNode=function(e,t,i){i.surroundContents(t),this.selectRange(e,i)},e.prototype.setCursorPoint=function(e,t,i){var s=e.createRange(),n=e.defaultView.getSelection();s.setStart(t,i),s.collapse(!0),n.removeAllRanges(),n.addRange(s)},e}(),K={bold:!1,italic:!1,subscript:!1,superscript:!1,strikethrough:!1,orderedlist:!1,unorderedlist:!1,underline:!1,alignments:null,backgroundcolor:null,fontcolor:null,fontname:null,fontsize:null,formats:null,createlink:!1,insertcode:!1},Z=function(){function e(){}return e.get=function(e,t,i,s,n,o){for(var r=JSON.parse(JSON.stringify(K)),a=JSON.parse(JSON.stringify(K)),l=new G,h=l.getRange(e),d=o?[o]:h.collapsed?l.getNodeCollection(h):l.getSelectionNodeCollectionBr(h),c=d.length,p=!1,u=0;u<d.length;u++){for(;3===d[u].nodeType&&3===h.startContainer.nodeType&&d[u].parentNode&&d[u].parentNode.lastElementChild&&"BR"!==d[u].parentNode.lastElementChild.nodeName&&0===this.getImmediateBlockNode(d[u].parentNode).textContent.replace(/\u200B/g,"").length&&0===h.startContainer.textContent.replace(/\u200B/g,"").length&&0===l.get(e).toString().replace(/\u200B/g,"").length;)d[u]=d[u].parentNode.lastElementChild.firstChild,p=!0;p&&d[u]&&(l.setCursorPoint(e,d[u],d[u].textContent.length),p=!1),("BR"!==d[u].nodeName&&3!==d[u].nodeType||c>1&&3===d[u].nodeType&&""===d[u].textContent.trim())&&(d.splice(u,1),u--)}for(u=0;u<d.length;u++)r=this.getFormatParent(e,r,d[u],t,i,s,n),(0===u&&r.bold||!r.bold)&&(a.bold=r.bold),(0===u&&r.insertcode||!r.insertcode)&&(a.insertcode=r.insertcode),(0===u&&r.italic||!r.italic)&&(a.italic=r.italic),(0===u&&r.underline||!r.underline)&&(a.underline=r.underline),(0===u&&r.strikethrough||!r.strikethrough)&&(a.strikethrough=r.strikethrough),(0===u&&r.superscript||!r.superscript)&&(a.superscript=r.superscript),(0===u&&r.subscript||!r.subscript)&&(a.subscript=r.subscript),(0===u&&r.fontcolor||!r.fontcolor)&&(a.fontcolor=r.fontcolor),(0===u&&r.fontname||!r.fontname)&&(a.fontname=r.fontname),(0===u&&r.fontsize||!r.fontsize)&&(a.fontsize=r.fontsize),(0===u&&r.backgroundcolor||!r.backgroundcolor)&&(a.backgroundcolor=r.backgroundcolor),(0===u&&r.orderedlist||!r.orderedlist)&&(a.orderedlist=r.orderedlist),(0===u&&r.unorderedlist||!r.unorderedlist)&&(a.unorderedlist=r.unorderedlist),(0===u&&r.alignments||!r.alignments)&&(a.alignments=r.alignments),(0===u&&r.formats||!r.formats)&&(a.formats=r.formats),(0===u&&r.createlink||!r.createlink)&&(a.createlink=r.createlink),(0===u&&r.numberFormatList||!r.numberFormatList)&&(a.numberFormatList=r.numberFormatList),(0===u&&r.bulletFormatList||!r.bulletFormatList)&&(a.bulletFormatList=r.bulletFormatList),r=JSON.parse(JSON.stringify(K));return a},e.getImmediateBlockNode=function(e){do{e=e.parentNode}while(e&&W.indexOf(e.nodeName.toLocaleLowerCase())<0);return e},e.getFormatParent=function(e,t,i,s,n,o,r){if(s.contains(i)||3===i.nodeType&&3!==s.nodeType&&s.contains(i.parentNode))do{t=this.isFormattedNode(e,t,i,n,o,r),i=i.parentNode}while(i&&i!==s);return t},e.isFormattedNode=function(e,t,i,s,n,o){return t.bold||(t.bold=q.isBold(i)),t.italic||(t.italic=q.isItalic(i)),t.underline||(t.underline=q.isUnderline(i)),t.strikethrough||(t.strikethrough=q.isStrikethrough(i)),t.superscript||(t.superscript=q.isSuperscript(i)),t.subscript||(t.subscript=q.isSubscript(i)),t.fontcolor||(t.fontcolor=this.isFontColor(e,i)),t.fontname||(t.fontname=this.isFontName(e,i,o)),t.fontsize||(t.fontsize=this.isFontSize(e,i,n)),t.backgroundcolor||(t.backgroundcolor=this.isBackgroundColor(i)),t.orderedlist||(t.orderedlist=this.isOrderedList(i)),t.unorderedlist||(t.unorderedlist=this.isUnorderedList(i)),t.alignments||(t.alignments=this.isAlignment(i)),t.formats||(t.formats=this.isFormats(i,s),"pre"===t.formats&&(t.insertcode=!0)),t.createlink||(t.createlink=this.isLink(i)),t.numberFormatList||(t.numberFormatList=this.isNumberFormatList(i)),t.bulletFormatList||(t.bulletFormatList=this.isBulletFormatList(i)),t},e.isFontColor=function(e,t){var i=t.style&&t.style.color;return null!=i&&""!==i||3===t.nodeType||(i=this.getComputedStyle(e,t,"color")),null!==i&&""!==i&&void 0!==i?i:null},e.isLink=function(e){return"a"===e.nodeName.toLocaleLowerCase()},e.isBackgroundColor=function(e){var t=e.style&&e.style.backgroundColor;return null!==t&&""!==t&&void 0!==t?t:null},e.isFontSize=function(e,t,i){var s=t.style&&t.style.fontSize;return null!=s&&""!==s||3===t.nodeType||!t.parentElement.classList.contains("e-content")||(s=this.getComputedStyle(e,t,"font-size")),null!==s&&""!==s&&void 0!==s&&(null==i||i.indexOf(s)>-1)?s:null},e.isFontName=function(e,t,i){var s=t.style&&t.style.fontFamily;null!=s&&""!==s||3===t.nodeType||(s=this.getComputedStyle(e,t,"font-family"));var n=null;return null!==s&&""!==s&&void 0!==s&&(null==i||i.filter((function(e,t){var i=new RegExp(s,"i");(e.replace(/"/g,"").replace(/ /g,"").toLowerCase()===s.replace(/"/g,"").replace(/ /g,"").toLowerCase()||e.split(",")[0]&&e.split(",")[0].search(i)>-1)&&(n=t)}))&&null!==n)?null!==n?i[n]:s.replace(/"/g,""):null},e.isOrderedList=function(e){return"ol"===e.nodeName.toLocaleLowerCase()},e.isUnorderedList=function(e){return"ul"===e.nodeName.toLocaleLowerCase()},e.isAlignment=function(e){var t=e.style&&e.style.textAlign;return"left"===t?"justifyleft":"center"===t?"justifycenter":"right"===t?"justifyright":"justify"===t?"justifyfull":null},e.isFormats=function(e,t){return null==t&&W.indexOf(e.nodeName.toLocaleLowerCase())>-1||null!=t&&t.indexOf(e.nodeName.toLocaleLowerCase())>-1?e.nodeName.toLocaleLowerCase():null},e.getComputedStyle=function(e,t,i){return e.defaultView.getComputedStyle(t,null).getPropertyValue(i)},e.isNumberFormatList=function(e){var t=e.style&&e.style.listStyleType;return"lower-alpha"===t?"Lower Alpha":"number"===t?"Number":"upper-alpha"===t?"Upper Alpha":"lower-roman"===t?"Lower Roman":"upper-roman"===t?"Upper Roman":"lower-greek"===t?"Lower Greek":"none"===t?"None":null},e.isBulletFormatList=function(e){var t=e.style&&e.style.listStyleType;return"circle"===t?"Circle":"square"===t?"Square":"none"===t?"None":"disc"===t?"Disc":null},e}(),J=function(){function e(e){this.parent=e,this.toolbarStatus=this.prevToolbarStatus={bold:!1,italic:!1,subscript:!1,superscript:!1,strikethrough:!1,orderedlist:!1,unorderedlist:!1,underline:!1,alignments:null,backgroundcolor:null,fontcolor:null,fontname:null,fontsize:null,formats:null,createlink:!1,insertcode:!1},this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("toolbar-refresh",this.onRefreshHandler,this),this.parent.observer.on(t,this.removeEventListener,this)},e.prototype.removeEventListener=function(){this.parent.observer.off("toolbar-refresh",this.onRefreshHandler),this.parent.observer.off(t,this.removeEventListener)},e.prototype.onRefreshHandler=function(e){var t=this;if(!this.parent.readonly){var i=[],s=[],n=[];this.parent.fontSize.items.forEach((function(e){i.push(e.value)})),this.parent.fontFamily.items.forEach((function(e){s.push(e.value)})),this.parent.format.items.forEach((function(e){n.push(e.value.toLocaleLowerCase())})),this.toolbarStatus=Z.get(this.parent.getDocument(),this.parent.getEditPanel(),n,i,s,e.documentNode);var o=JSON.stringify(this.toolbarStatus);this.parent.inlineMode.enable?setTimeout((function(){document.querySelector("#"+t.parent.id+"_Inline_Quick_Popup")&&document.querySelector("#"+t.parent.id+"_Inline_Quick_Popup").classList.contains("e-rte-pop")&&(t.parent.observer.notify("toolbar-updated",t.toolbarStatus),JSON.stringify(t.prevToolbarStatus)!==o&&(t.parent.observer.notify("updateTbItemsStatus",{html:JSON.parse(o),markdown:null}),t.prevToolbarStatus=JSON.parse(o)))}),100):(this.parent.observer.notify("toolbar-updated",this.toolbarStatus),JSON.stringify(this.prevToolbarStatus)!==o&&(this.parent.observer.notify("updateTbItemsStatus",{html:JSON.parse(o),markdown:null}),this.prevToolbarStatus=JSON.parse(o)))}},e}(),$=function(){return($=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},ee=function(){function e(){}return e.prototype.process=function(e,t,i,s){var n,o=this,r=e.getDocument().getSelection(),a=r.rangeCount>0?r.getRangeAt(r.rangeCount-1):null;if("HTML"===e.editorMode&&(n=this.editorManager.nodeSelection.save(a,e.getDocument())),sf.base.isNullOrUndefined(t)||!t.item.command||"Table"===t.item.command||"Actions"===t.item.command||"Links"===t.item.command||"Images"===t.item.command||"Audios"===t.item.command||"Videos"===t.item.command||!a||e.getEditPanel().contains(this.getAncestorNode(a.commonAncestorContainer))||e.getEditPanel()===a.commonAncestorContainer||e.getPanel()===a.commonAncestorContainer){if(sf.base.isNullOrUndefined(t)){var l=i.action;if("tab"!==l&&"enter"!==l&&"space"!==l&&"escape"!==l){t={},"Markdown"===e.editorMode&&"insert-table"===l&&(s={headingText:e.localeData.headingText,colText:e.localeData.colText});var h={originalEvent:i,cancel:!1,requestType:l||i.key+"Key"};sf.base.extend(t,t,h,!0),delete t.item,t.originalEvent=$({},t.originalEvent,{target:null}),e.actionBeginEnabled&&e.dotNetRef.invokeMethodAsync("ActionBeginEvent",t).then((function(e){t.cancel&&("paste"!==l&&"cut"!==l&&"copy"!==l||i.preventDefault())}))}var d=!!sf.base.isNullOrUndefined(e.tableModule)||!!e.tableModule&&e.tableModule.ensureInsideTableList;(9===i.which&&d||9!==i.which)&&(13===i.which&&"HTML"===e.editorMode&&(s={enterAction:e.enterKey}),this.editorManager.observer.notify("keydown"===i.type?"keydown":"keyup",{event:i,callBack:this.onSuccess.bind(this,e),value:s,enterAction:e.enterKey}))}else!sf.base.isNullOrUndefined(t)&&t.item.command&&t.item.subCommand&&(t.item.command!==t.item.subCommand&&"Font"!==t.item.command||("FontName"===t.item.subCommand||"FontSize"===t.item.subCommand)&&"dropDownSelect"===t.name||("BackgroundColor"===t.item.subCommand||"FontColor"===t.item.subCommand)&&"colorPickerChanged"===t.name)&&(t.originalEvent=$({},t.originalEvent,{target:null}),sf.base.extend(t,t,{requestType:t.item.subCommand,cancel:!1},!0),e.actionBeginEnabled?e.dotNetRef.invokeMethodAsync("ActionBeginEvent",t).then((function(r){r.cancel||o.actionBeginCallBack(e,t,n,i,s)})):this.actionBeginCallBack(e,t,n,i,s));(sf.base.isNullOrUndefined(i)||i&&"copy"!==i.action)&&this.enableUndo(e)}},e.prototype.getAncestorNode=function(e){return e=3===e.nodeType?e.parentNode:e},e.prototype.onKeyHandler=function(e,t){var i=this;this.editorManager.observer.notify("keyup",{event:t,callBack:function(){e.observer.notify("content-changed",{}),i.enableUndo(e)}})},e.prototype.onSuccess=function(e,t){var i=this;e.observer.notify("content-changed",{}),t&&(sf.base.isNullOrUndefined(t.event)||"copy"!==t.event.action)&&("Paste"===t.requestType?(e.observer.notify("execCommandCallBack",t),this.enableUndo(e)):(this.enableUndo(e),e.observer.notify("execCommandCallBack",t))),t.event=$({},t.event,{target:null}),this.successArgs=$({},t),delete t.elements,delete t.range,e.actionCompleteEnabled?e.dotNetRef.invokeMethodAsync("ActionCompleteEvent",t).then((function(t){i.actionCompleteCallBack(e,t)})):this.actionCompleteCallBack(e,t),"VideosPlayPause"===t.requestType&&e.observer.notify("editAreaClick",{args:event})},e.prototype.saveData=function(e){this.editorManager.undoRedoManager.saveData(e)},e.prototype.getUndoStatus=function(){return this.editorManager.undoRedoManager.getUndoStatus()},e.prototype.getUndoRedoStack=function(){return this.editorManager.undoRedoManager.undoRedoStack},e.prototype.enableUndo=function(e){if(e.undoRedoStatus){var t=this.getUndoStatus();!e.inlineMode.enable||sf.base.Browser.isDevice&&!u()?e.toolbarModule&&e.dotNetRef.invokeMethodAsync("UpdateUndoRedoStatus",t):e.dotNetRef.invokeMethodAsync("UpdateUndoRedoStatus",t)}},e.prototype.actionBeginCallBack=function(e,t,i,s,n){0===this.getUndoRedoStack().length&&"Links"!==t.item.command&&"Images"!==t.item.command&&"Audios"!==t.item.command&&"Videos"!==t.item.command&&this.saveData(),e.isBlur=!1,e.getEditPanel().focus(),"HTML"===e.editorMode&&i.restore();var o=t.item.subCommand.toLocaleLowerCase();"paste"===o||"cut"===o||"copy"===o?e.clipboardAction(o,s):(this.editorManager.observer.notify(h,{subCommand:t.item.subCommand}),this.editorManager.execCommand(t.item.command,t.item.subCommand,s,this.onSuccess.bind(this,e),t.item.value,"Pre"===t.item.subCommand&&"dropDownSelect"===t.name?{name:t.name}:n,"# iframe",e.enterKey))},e.prototype.actionCompleteCallBack=function(e,t){if(e.setPlaceHolder(),"Images"===t.requestType||"Audios"===t.requestType||"Videos"===t.requestType||"Links"===t.requestType&&"HTML"===t.editorMode){var i=this.successArgs;if("Links"===t.requestType&&t.event&&"keydown"===t.event.type&&32===t.event.keyCode)return;e.observer.notify("insertCompleted",{args:i.event,type:t.requestType,isNotify:!0,elements:i.elements})}e.autoResize()},e}(),te={h6:"###### ",h5:"##### ",h4:"#### ",h3:"### ",h2:"## ",h1:"# ",blockquote:"> ",pre:"```\n",p:""},ie={Bold:"**",Italic:"*",StrikeThrough:"~~",InlineCode:"`",SubScript:"<sub>",SuperScript:"<sup>",UpperCase:"A-Z",LowerCase:"a-z"},se={OL:"1. ",UL:"- "},ne={"toolbar-focus":"alt+f10",escape:"27","insert-link":"ctrl+k","insert-image":"ctrl+shift+i","insert-audio":"ctrl+shift+a","insert-video":"ctrl+shift+v","insert-table":"ctrl+shift+e",undo:"ctrl+z",redo:"ctrl+y",copy:"ctrl+c",cut:"ctrl+x",paste:"ctrl+v",bold:"ctrl+b",italic:"ctrl+i",underline:"ctrl+u",strikethrough:"ctrl+shift+s",uppercase:"ctrl+shift+u",lowercase:"ctrl+shift+l",superscript:"ctrl+shift+=",subscript:"ctrl+=",indents:"ctrl+]",outdents:"ctrl+[","html-source":"ctrl+shift+h","full-screen":"ctrl+shift+f","decrease-fontsize":"ctrl+shift+<","increase-fontsize":"ctrl+shift+>","justify-center":"ctrl+e","justify-full":"ctrl+j","justify-left":"ctrl+l","justify-right":"ctrl+r","clear-format":"ctrl+shift+r","ordered-list":"ctrl+shift+o","unordered-list":"ctrl+alt+o",space:"32",enter:"13",tab:"tab",delete:"46","format-copy":"ctrl+shift+c","format-paste":"ctrl+shift+v"},oe={"toolbar-focus":"alt+f10",escape:"27","insert-link":"ctrl+k","insert-image":"ctrl+shift+i","insert-table":"ctrl+shift+e",undo:"ctrl+z",redo:"ctrl+y",copy:"ctrl+c",cut:"ctrl+x",paste:"ctrl+v",bold:"ctrl+b",italic:"ctrl+i",strikethrough:"ctrl+shift+s",uppercase:"ctrl+shift+u",lowercase:"ctrl+shift+l",superscript:"ctrl+shift+=",subscript:"ctrl+=","full-screen":"ctrl+shift+f","ordered-list":"ctrl+shift+o","unordered-list":"ctrl+alt+o"},re={b:["strong"],strong:["b"],i:["emp","cite"],emp:["i","cite"],cite:["i","emp"]},ae=["BR","IMG"],le="e-editor-select-start",he="e-editor-select-end",de=function(){function e(e,t){this.parent=e,this.nodeSelection=new G,this.currentDocument=t}return e.prototype.contents=function(e){return e&&"IFRAME"!==e.tagName?Array.prototype.slice.call(e.childNodes||[]):[]},e.prototype.isBlockNode=function(e){return!!e&&e.nodeType===Node.ELEMENT_NODE&&W.indexOf(e.tagName.toLowerCase())>=0},e.prototype.isLink=function(e){return!!e&&e.nodeType===Node.ELEMENT_NODE&&"a"===e.tagName.toLowerCase()},e.prototype.blockParentNode=function(e){for(;e&&e.parentNode!==this.parent&&(!e.parentNode||!this.hasClass(e.parentNode,"e-node-inner"));null)if(e=e.parentNode,this.isBlockNode(e))return e;return e},e.prototype.rawAttributes=function(e){var t={},i=e.attributes;if(i.length>0)for(var s=0;s<i.length;s++){var n=i[s];t[n.nodeName]=n.value}return t},e.prototype.attributes=function(e){if(!e)return"";for(var t="",i=this.rawAttributes(e),s=Object.keys(i).sort(),n=0;n<s.length;n++){var o=s[n],r=i[""+o];r.indexOf("'")<0&&r.indexOf('"')>=0?t+=" "+o+"='"+r+"'":r.indexOf('"')>=0&&r.indexOf("'")>=0?t+=" "+o+'="'+(r=r.replace(/"/g,"&quot;"))+'"':t+=" "+o+'="'+r+'"'}return t},e.prototype.clearAttributes=function(e){for(var t=e.attributes,i=t.length-1;i>=0;i--){var s=t[i];e.removeAttribute(s.nodeName)}},e.prototype.openTagString=function(e){return"<"+e.tagName.toLowerCase()+this.attributes(e)+">"},e.prototype.closeTagString=function(e){return"</"+e.tagName.toLowerCase()+">"},e.prototype.createTagString=function(e,t,i){return"<"+e.toLowerCase()+this.attributes(t)+">"+i+"</"+e.toLowerCase()+">"},e.prototype.isList=function(e){return!!e&&["UL","OL"].indexOf(e.tagName)>=0},e.prototype.isElement=function(e){return e===this.parent},e.prototype.isEditable=function(e){return(!e.getAttribute||"true"===e.getAttribute("contenteditable"))&&["STYLE","SCRIPT"].indexOf(e.tagName)<0},e.prototype.hasClass=function(e,t){return e&&e.classList&&e.classList.contains(t)},e.prototype.replaceWith=function(e,t){e.parentNode.insertBefore(this.parseHTMLFragment(t),e),sf.base.detach(e)},e.prototype.parseHTMLFragment=function(e){var t=sf.base.createElement("template");return t.innerHTML=e,t.content instanceof DocumentFragment?t.content:document.createRange().createContextualFragment(e)},e.prototype.wrap=function(e,t){return e.parentNode.insertBefore(t,e),(t=e.previousSibling).appendChild(e),t},e.prototype.insertAfter=function(e,t){t.parentNode.insertBefore(e,t.nextSibling)},e.prototype.wrapInner=function(e,t){for(e.appendChild(t),(t=e.querySelector(".e-rte-wrap-inner")).classList.remove("e-rte-wrap-inner"),0===t.classList.length&&t.removeAttribute("class");e.firstChild!==t;)t.appendChild(e.firstChild);return t},e.prototype.unWrap=function(e){for(var t=e.parentNode,i=[];e.firstChild;)i.push(e.firstChild),t.insertBefore(e.firstChild,e);return i=i.length>0?i:[e.parentNode],t.removeChild(e),i},e.prototype.getSelectedNode=function(e,t){return e.nodeType===Node.ELEMENT_NODE&&e.childNodes.length>0&&e.childNodes[t-1]&&e.childNodes[t-1].nodeType===Node.ELEMENT_NODE&&(e.childNodes[t-1].classList.contains(le)||e.childNodes[t-1].classList.contains(he))?e=e.childNodes[t-1]:e.nodeType===Node.ELEMENT_NODE&&e.childNodes.length>0&&e.childNodes[t]&&(e=e.childNodes[t]),e.nodeType===Node.TEXT_NODE&&(e=e.parentNode),e},e.prototype.nodeFinds=function(e,t){for(var i=[],s=0;s<t.length;s++)e.contains(t[s])&&e!==t[s]&&i.push(t[s]);return i},e.prototype.isEditorArea=function(){var e;for(e=this.getRangePoint(0).commonAncestorContainer;e&&!this.isElement(e);null)e=e.parentNode;return!!this.isElement(e)},e.prototype.getRangePoint=function(e){var t=this.getSelection(),i=[];if(t&&t.getRangeAt&&t.rangeCount){i=[];for(var s=0;s<t.rangeCount;s++)i.push(t.getRangeAt(s))}else i=[this.currentDocument.createRange()];return void 0!==e?i[e]:i},e.prototype.getSelection=function(){return this.nodeSelection.get(this.currentDocument)},e.prototype.getPreviousNode=function(e){for(e=e.previousElementSibling;e&&"\n"===e.textContent;null)e=e.previousElementSibling;return e},e.prototype.encode=function(e){var t=document.createElement("div");return t.innerText=e,t.innerHTML.replace(/<br\s*[\/]?>/gi,"\n")},e.prototype.saveMarker=function(e,t){var i,s,n=this.parent.querySelector("."+le),o=this.parent.querySelector("."+he);if(""===n.textContent&&sf.base.isNullOrUndefined(o)&&"tab"!==t&&(1===n.childNodes.length&&"BR"===n.childNodes[0].nodeName?n.innerHTML="&#65279;&#65279;<br>":n.innerHTML="&#65279;&#65279;"),this.hasClass(n,le)&&n.classList.length>1){var r=this.createTagString("p",n,this.encode(n.textContent));this.replaceWith(n,r),(n=this.parent.querySelector("."+le)).classList.remove(le),i=n.childNodes[0]}else i=this.unWrap(n)[0];if(this.hasClass(o,he)&&o.classList.length>1){r=this.createTagString("p",o,this.encode(o.textContent));this.replaceWith(o,r),(o=this.parent.querySelector("."+he)).classList.remove(he),s=o.childNodes[0]}else s=o?this.unWrap(o)[0]:i;return e.startContainer=e.getNodeArray(i,!0),e.endContainer=e.getNodeArray(s,!1),e},e.prototype.marker=function(e,t){return'<span class="'+e+'">'+t+"</span>"},e.prototype.setMarker=function(e){var t=e.range,i=t.startContainer.childNodes,s=(i.length>1&&"TABLE"===i[0].nodeName?function(e){var t=e;do{t.childNodes.length>0&&(t=t.childNodes[0])}while(t.childNodes.length>0);return t}(i[t.startOffset+1]):i[t.startOffset>0?t.startOffset-1:t.startOffset])||t.startContainer,n=t.endContainer.childNodes[t.endOffset>0?t.endOffset-1:t.endOffset]||t.endContainer;if(s.nodeType===Node.ELEMENT_NODE&&n.nodeType===Node.ELEMENT_NODE&&(s.contains(n)||n.contains(s))){var o=s.contains(n)?s:n;if(o.nodeType!==Node.TEXT_NODE){for(var r=[],a=[],l=o;o.contains(l);null)r.indexOf(l)<0&&l.childNodes&&l.childNodes.length?(r.push(l),l=l.childNodes[0]):l.nextSibling?l=l.nextSibling:l.parentNode&&(l=l.parentNode,r.push(l)),a.indexOf(l)<0&&(l.nodeType===Node.TEXT_NODE||_.indexOf(l.parentNode.tagName.toLocaleLowerCase())>=0&&("BR"===l.tagName||"IMG"===l.tagName))&&a.push(l);a.length&&(s=s.contains(n)?a[0]:s,n=a[a.length-1])}}if(s!==n){if(s.nodeType!==Node.TEXT_NODE&&("BR"===s.tagName&&_.indexOf(s.parentNode.tagName.toLocaleLowerCase())>=0||"IMG"===s.tagName))this.replaceWith(s,this.marker(le,this.encode(s.textContent))),t.startContainer.querySelector("."+le).appendChild(s);else if(3!==s.nodeType&&"#text"!==s.nodeName){var h=this.marker(le,"");sf.base.append([this.parseHTMLFragment(h)],s)}else this.replaceWith(s,this.marker(le,this.encode(s.textContent)));if(n.nodeType!==Node.TEXT_NODE&&"BR"===n.tagName&&_.indexOf(n.parentNode.tagName.toLocaleLowerCase())>=0)this.replaceWith(n,this.marker(he,this.encode(n.textContent))),t.endContainer.querySelector("."+he).appendChild(n);else this.ensureSelfClosingTag(n,he,t)}else this.ensureSelfClosingTag(s,le,t)},e.prototype.ensureSelfClosingTag=function(e,t,i){var s=!1;if(3===e.nodeType)this.replaceWith(e,this.marker(t,this.encode(e.textContent)));else if("BR"===e.tagName){this.replaceWith(e,this.marker(t,this.encode(e.textContent))),i.startContainer.querySelector("."+t).appendChild(e)}else{if("IMG"===e.tagName){var n=document.createElement("p");e.parentElement.insertBefore(n,e),n.appendChild(e),e=n.children[0]}if("TABLE"===e.tagName)if(s=!0,""===e.textContent){var o=e.querySelectorAll("td");e=o[o.length-1],e=sf.base.isNullOrUndefined(e.childNodes[0])?e:e.childNodes[0]}else{for(var r=e.lastChild;3!==r.nodeType&&"#text"!==r.nodeName&&"BR"!==r.nodeName;)r=r.lastChild;e=r}for(var a=0;a<ae.length;a++)e=e.tagName!==ae[a]||s?e:e.parentNode;if(3===e.nodeType&&"#text"===e.nodeName)this.replaceWith(e,this.marker(t,this.encode(e.textContent)));else if("BR"===e.nodeName){this.replaceWith(e,this.marker(he,this.encode(e.textContent))),i.endContainer.querySelector("."+he).appendChild(e)}else{var l=this.marker(t,"");sf.base.append([this.parseHTMLFragment(l)],e)}}},e.prototype.createTempNode=function(e){var t=e.textContent;if("BR"===e.tagName){var i="<p></p>",s=e.parentNode;_.indexOf(s.tagName.toLocaleLowerCase())>=0&&(e=this.wrap(e,this.parseHTMLFragment(i)))}else if(e.nodeType!==Node.TEXT_NODE&&(e.classList.contains(le)||e.classList.contains(he))||t.replace(/\n/g,"").replace(/(^ *)|( *$)/g,"").length>0||t.length&&t.indexOf("\n")<0){i="<p></p>";var n=e;e=this.wrap(e,this.parseHTMLFragment(i)),!(n.nodeType===Node.ELEMENT_NODE&&n.firstChild&&"BR"===n.firstChild.nodeName&&(n.classList.contains(le)||n.classList.contains(he)))&&e.nextElementSibling&&"BR"===e.nextElementSibling.tagName&&e.appendChild(e.nextElementSibling)}return e},e.prototype.getImageTagInSelection=function(){var e=this.getSelection();return this.isEditorArea()&&e.rangeCount?e.focusNode.querySelectorAll("img"):null},e.prototype.blockNodes=function(){var e=[],t=this.getSelection();if(this.isEditorArea()&&t.rangeCount)for(var i=this.getRangePoint(),s=0;s<i.length;s++){var n=void 0,o=i[s],r=this.getSelectedNode(o.startContainer,o.startOffset),a=this.getSelectedNode(o.endContainer,o.endOffset);if(this.isBlockNode(r)&&e.indexOf(r)<0&&e.push(r),(n=this.blockParentNode(r))&&e.indexOf(n)<0)if(_.indexOf(n.tagName.toLocaleLowerCase())>=0&&("BR"===r.tagName||r.nodeType===Node.TEXT_NODE||r.classList.contains(le)||r.classList.contains(he))){var l=r.previousSibling&&r.previousSibling.nodeType===Node.TEXT_NODE?r.previousSibling:r;r.nextSibling||r.previousSibling||"BR"!==r.tagName?e.push(this.createTempNode(l)):e.push(l)}else e.push(n);for(var h=[],d=r;d!==a&&d!==this.parent;null)h.indexOf(d)<0&&d.childNodes&&d.childNodes.length?(h.push(d),d=d.childNodes[0]):d&&8!==d.nodeType&&("BR"===d.tagName||d.nodeType===Node.TEXT_NODE&&""!==d.textContent.trim()||d.nodeType!==Node.TEXT_NODE&&(d.classList.contains(le)||d.classList.contains(he)))&&_.indexOf(d.parentNode.tagName.toLocaleLowerCase())>=0?d=this.createTempNode(d):d.nextSibling&&8!==d.nextSibling.nodeType&&("BR"===d.nextSibling.tagName||d.nextSibling.nodeType===Node.TEXT_NODE||d.nextSibling.classList.contains(le)||d.nextSibling.classList.contains(he))&&_.indexOf(d.nextSibling.parentNode.tagName.toLocaleLowerCase())>=0?d=this.createTempNode(d.nextSibling):d.nextSibling?d=d.nextSibling:d.parentNode&&(d=d.parentNode,h.push(d)),e.indexOf(d)<0&&d.nodeType===Node.ELEMENT_NODE&&_.indexOf(d.parentNode.tagName.toLocaleLowerCase())>=0&&(d.classList.contains(le)||d.classList.contains(he))&&e.push(this.createTempNode(d)),this.isBlockNode(d)&&this.ignoreTableTag(d)&&h.indexOf(d)<0&&e.indexOf(d)<0&&(d!==a||o.endOffset>0)&&e.push(d),"IMG"===d.nodeName&&"true"===d.parentElement.contentEditable&&e.push(d);(n=this.blockParentNode(a))&&this.ignoreTableTag(n)&&e.indexOf(n)<0&&!sf.base.isNullOrUndefined(n.previousElementSibling)&&"IMG"!==n.previousElementSibling.tagName&&e.push(n)}for(var c=e.length-1;c>0;c--){if((h=this.nodeFinds(e[c],e)).length){var p=e[c].querySelectorAll("ul, ol");if("LI"===e[c].tagName&&p.length>0)continue;e.splice(c,1)}}return e},e.prototype.ignoreTableTag=function(e){return!(Q.indexOf(e.tagName.toLocaleLowerCase())>=0)},e}(),ce=function(){function e(e){this.parent=e,this.domNode=this.parent.domNode,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("list-type",this.applyListsHandler,this),this.parent.observer.on("keyup-handler",this.onKeyUp,this),this.parent.observer.on("keydown-handler",this.keyDownHandler,this),this.parent.observer.on("actionBegin",this.spaceKeyAction,this)},e.prototype.testList=function(e){var t=[/^[\d]+[.]+$/,/^(?=[MDCLXVI])M*(C[MD]|D?C{0,3})(X[CL]|L?X{0,3})(I[XV]|V?I{0,3})[.]$/gi,/^[a-zA-Z][.]+$/],i=sf.base.isNullOrUndefined(e)?null:e.innerText.trim().split(".")[0]+".";if(!sf.base.isNullOrUndefined(i))for(var s=0;s<t.length;s++)if(t[s].test(i))return!0;return!1},e.prototype.testCurrentList=function(e){var t=[/^[1]+[.]+$/,/^[i]+[.]+$/,/^[a]+[.]+$/];if(!sf.base.isNullOrUndefined(e.startContainer.textContent.slice(0,e.startOffset)))for(var i=e.startContainer.textContent.replace(/\u200B/g,"").slice(0,e.startOffset).trim(),s=0;s<t.length;s++)if(t[s].test(i)&&2===i.length)return!0;return!1},e.prototype.spaceList=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument);this.saveSelection=this.parent.nodeSelection.save(t,this.parent.currentDocument);var i=this.parent.domNode.getSelectedNode(t.startContainer,t.startOffset),s=(this.parent.domNode.getSelectedNode(t.endContainer,t.endOffset),i.previousElementSibling),n=i.nextElementSibling,o=sf.base.isNullOrUndefined(s)?null:s.innerText.trim().substring(0,1),r=sf.base.isNullOrUndefined(n)?null:n.innerText.trim().substring(0,1),a=this.testCurrentList(t),l=this.testList(s),h=this.testList(n);l||h||"*"===o||"*"===r||(a?(t.startContainer.textContent=t.startContainer.textContent.slice(t.startOffset,t.startContainer.textContent.length),this.applyListsHandler({subCommand:"OL",callBack:e.callBack}),e.event.preventDefault()):"*"!==t.startContainer.textContent.replace(/\u200B/g,"").slice(0,t.startOffset).trim()&&"-"!==t.startContainer.textContent.replace(/\u200B/g,"").slice(0,t.startOffset).trim()||(t.startContainer.textContent=t.startContainer.textContent.slice(t.startOffset,t.startContainer.textContent.length),this.applyListsHandler({subCommand:"UL",callBack:e.callBack}),e.event.preventDefault()))},e.prototype.enterList=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),i="LI"===t.startContainer.nodeName?t.startContainer:t.startContainer.parentElement.closest("LI"),s="LI"===t.endContainer.nodeName?t.endContainer:t.endContainer.parentElement.closest("LI"),n=!1;if(!sf.base.isNullOrUndefined(i)){var o=i.querySelectorAll(".e-video-clickelem"),r=o.length>0&&"IFRAME"===o[0].childNodes[0].nodeName;n=i.querySelectorAll("IMG").length>0||i.querySelectorAll("AUDIO").length>0||i.querySelectorAll("VIDEO").length>0||r}if(!sf.base.isNullOrUndefined(i)&&!sf.base.isNullOrUndefined(s)&&i===s&&"LI"===i.tagName&&""===i.textContent.trim()&&!n){if(i.innerHTML.indexOf("&nbsp;")>=0)return;65279===i.textContent.charCodeAt(0)&&(i.textContent="");var a=i.parentElement;if(sf.base.isNullOrUndefined(a.parentElement.closest("UL"))&&sf.base.isNullOrUndefined(a.parentElement.closest("OL"))){if(!sf.base.isNullOrUndefined(i.nextElementSibling)){var l=this.parent.domNode.blockParentNode(i);this.parent.nodeCutter.GetSpliceNode(t,l)}var h=void 0;"DIV"===e.enterAction?(h=sf.base.createElement("div")).innerHTML="<br>":"P"===e.enterAction?(h=sf.base.createElement("p")).innerHTML="<br>":h=sf.base.createElement("br"),this.parent.domNode.insertAfter(h,a),e.event.preventDefault(),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,h,0),""===a.textContent&&0===a.querySelectorAll("audio,video").length?sf.base.detach(a):sf.base.detach(i)}}},e.prototype.backspaceList=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=this.parent.domNode.getSelectedNode(t.startContainer,t.startOffset),s=this.parent.domNode.getSelectedNode(t.endContainer,t.endOffset);if((i="BR"===i.nodeName?i.parentElement:i)===(s="BR"===s.nodeName?s.parentElement:s)&&!sf.base.isNullOrUndefined(sf.base.closest(i,"li"))&&(""===i.textContent.trim()&&65279===i.textContent.charCodeAt(0)||1===i.textContent.length&&8203===i.textContent.charCodeAt(0))&&(i.textContent=""),i===s&&"LI"===i.tagName&&0===i.textContent.length&&sf.base.isNullOrUndefined(i.previousElementSibling)&&i.removeAttribute("style"),i===s&&""===i.textContent){if("LI"===i.parentElement.tagName&&"LI"===s.parentElement.tagName)sf.base.detach(i);else if(i.closest("ul")||i.closest("ol")){if((n=sf.base.isNullOrUndefined(i.closest("ul"))?i.closest("ol"):i.closest("ul")).firstElementChild===i&&!sf.base.isNullOrUndefined(n.children[1])&&("OL"===n.children[1].tagName||"UL"===n.children[1].tagName))if(n.tagName===n.children[1].tagName){for(;n.children[1].lastChild;)this.parent.domNode.insertAfter(n.children[1].lastChild,n.children[1]);sf.base.detach(n.children[1])}else n.parentElement.insertBefore(n.children[1],n)}}else if(!(sf.base.isNullOrUndefined(i.firstChild)||"BR"!==i.firstChild.nodeName||sf.base.isNullOrUndefined(i.childNodes[1])||"UL"!==i.childNodes[1].nodeName&&"OL"!==i.childNodes[1].nodeName)){var n;if((n=sf.base.isNullOrUndefined(i.closest("ul"))?i.closest("ol"):i.closest("ul")).tagName===i.childNodes[1].nodeName){for(;i.childNodes[1].lastChild;)this.parent.domNode.insertAfter(i.children[1].lastChild,i);sf.base.detach(i.childNodes[1])}else n.parentElement.insertBefore(i.children[1],n)}this.removeList(t,e),this.firstListBackSpace(t,e)},e.prototype.removeList=function(e,t){var i=this.parent.domNode.getSelectedNode(e.startContainer,e.startOffset),s=this.parent.domNode.getSelectedNode(e.endContainer,e.endOffset);i="BR"===i.nodeName?i.parentElement:i,s="BR"===s.nodeName?s.parentElement:s,i="LI"===i.nodeName||sf.base.isNullOrUndefined(i.closest("LI"))?i:i.closest("LI"),s="LI"===s.nodeName||sf.base.isNullOrUndefined(s.closest("LI"))?s:s.closest("LI"),(("OL"===e.commonAncestorContainer.nodeName||"UL"===e.commonAncestorContainer.nodeName||"LI"===e.commonAncestorContainer.nodeName)&&sf.base.isNullOrUndefined(s.nextElementSibling)&&s.textContent.length===e.endOffset&&sf.base.isNullOrUndefined(i.previousElementSibling)&&0===e.startOffset||-1!==sf.base.Browser.userAgent.indexOf("Firefox")&&e.startContainer===e.endContainer&&e.startContainer===this.parent.editableElement&&0===e.startOffset&&1===e.endOffset)&&(-1!==sf.base.Browser.userAgent.indexOf("Firefox")?sf.base.detach(e.commonAncestorContainer.childNodes[0]):"LI"===e.commonAncestorContainer.nodeName?sf.base.detach(e.commonAncestorContainer.parentElement):sf.base.detach(e.commonAncestorContainer),t.event.preventDefault())},e.prototype.onKeyUp=function(){if(!sf.base.isNullOrUndefined(this.commonLIParent)&&!sf.base.isNullOrUndefined(this.commonLIParent.querySelector(".removeList"))){for(var e=this.commonLIParent.querySelector(".removeList");!sf.base.isNullOrUndefined(e.firstChild);)this.parent.domNode.insertAfter(e.firstChild,e);sf.base.detach(e)}},e.prototype.firstListBackSpace=function(e,t){var i=this.parent.domNode.getSelectedNode(e.startContainer,e.startOffset);if(sf.base.isNullOrUndefined(i.closest("OL"))?sf.base.isNullOrUndefined(i.closest("UL"))||(this.commonLIParent=i.closest("UL")):this.commonLIParent=i.closest("OL"),"LI"===i.nodeName&&0===e.startOffset&&0===e.endOffset&&sf.base.isNullOrUndefined(i.previousSibling)&&!sf.base.isNullOrUndefined(this.commonLIParent)&&sf.base.isNullOrUndefined(this.commonLIParent.previousSibling)&&sf.base.isNullOrUndefined(this.commonLIParent.parentElement.closest("OL"))&&sf.base.isNullOrUndefined(this.commonLIParent.parentElement.closest("UL"))&&sf.base.isNullOrUndefined(this.commonLIParent.parentElement.closest("LI"))){var s=sf.base.createElement("P");s.innerHTML="&#8203;",i.classList.add("removeList"),this.commonLIParent.parentElement.insertBefore(s,this.commonLIParent)}},e.prototype.keyDownHandler=function(e){if(13===e.event.which&&this.enterList(e),32===e.event.which&&this.spaceList(e),8===e.event.which&&this.backspaceList(e),46===e.event.which&&"delete"===e.event.action){var t=(r=this.parent.nodeSelection.getRange(this.parent.currentDocument)).commonAncestorContainer,i=r.startContainer,s=r.endContainer,n=3===i.nodeType?i.parentElement:i,o=3===s.nodeType?s.parentElement:s;"UL"!==t.nodeName&&"OL"!==t.nodeName||n===o||sf.base.isNullOrUndefined(sf.base.closest(n,"ul"))&&sf.base.isNullOrUndefined(sf.base.closest(n,"ol"))||sf.base.isNullOrUndefined(sf.base.closest(o,"ul"))&&sf.base.isNullOrUndefined(sf.base.closest(o,"ol"))||t.lastElementChild!==sf.base.closest(o,"li")||r.collapsed||sf.base.detach(t),this.removeList(r,e)}if(9===e.event.which){var r=this.parent.nodeSelection.getRange(this.parent.currentDocument);e.event.action&&"indent"===e.event.action||(this.saveSelection=this.parent.nodeSelection.save(r,this.parent.currentDocument));var a=void 0,l=r.startOffset,h=r.endOffset;if((n=this.parent.domNode.getSelectedNode(r.startContainer,r.startOffset))===(o=this.parent.domNode.getSelectedNode(r.endContainer,r.endOffset))&&("BR"===n.nodeName||"#text"===n.nodeName)&&_.indexOf(n.parentNode.tagName.toLocaleLowerCase())>=0)return;e.event.action&&"indent"===e.event.action||this.domNode.setMarker(this.saveSelection),a=this.domNode.blockNodes();for(var d=[],c=!0,p=0;p<a.length;p++)"LI"===a[p].parentNode.tagName?d.push(a[p].parentNode):"LI"===a[p].tagName&&"P"!==a[p].childNodes[0].tagName&&"OL"!==a[p].childNodes[0].tagName&&"UL"!==a[p].childNodes[0].tagName&&d.push(a[p]);d.length>1||d.length&&(0===l&&0===h||e.ignoreDefault)?(e.event.preventDefault(),e.event.stopPropagation(),this.currentAction=this.getAction(d[0]),e.event.shiftKey?(this.revertList(d,e),this.revertClean()):c=this.nestedList(d),c&&(this.cleanNode(),this.parent.editableElement.focus()),e.event.action&&"indent"===e.event.action||(this.saveSelection=this.domNode.saveMarker(this.saveSelection),this.saveSelection.restore(),e.callBack&&e.callBack({requestType:this.currentAction,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes(),event:e.event}))):e.event.action&&"indent"===e.event.action||(e.event&&e.event.shiftKey&&"Tab"===e.event.key&&(e.event.action="tab"),this.saveSelection=this.domNode.saveMarker(this.saveSelection,e.event.action),this.saveSelection.restore())}else switch(e.event.action){case"ordered-list":this.applyListsHandler({subCommand:"OL",callBack:e.callBack}),e.event.preventDefault();break;case"unordered-list":this.applyListsHandler({subCommand:"UL",callBack:e.callBack}),e.event.preventDefault()}},e.prototype.spaceKeyAction=function(e){32===e.event.which&&this.spaceList(e)},e.prototype.getAction=function(e){return"OL"===e.parentNode.nodeName?"OL":"UL"},e.prototype.revertClean=function(){for(var e=this.parent.editableElement.querySelectorAll("ul, ol"),t=0;t<e.length;t++){var i=e[t].querySelectorAll("ul, ol");if(i.length>0)for(var s=0;s<i.length;s++){var n=i[s].previousSibling;n&&"LI"===n.tagName&&n.appendChild(i[s])}}},e.prototype.noPreviousElement=function(e){var t,i,s=e.querySelectorAll("ol, ul"),n=e.querySelectorAll("li"),o=this.domNode.contents(n[0])[0];if(n.length>0&&("OL"===o.nodeName||"UL"===o.nodeName)?t=n[0]:i=s[0],t)for(var r=this.domNode.contents(e)[0];r&&!this.domNode.isList(r);null){var a=r.nextSibling;sf.base.prepend([r],t),sf.base.setStyleAttribute(e,{"list-style-type":"none"}),sf.base.setStyleAttribute(t,{"list-style-type":""}),r=a}else if(i){var l=sf.base.createElement("li");sf.base.prepend([l],i);for(r=this.domNode.contents(e)[0];r&&!this.domNode.isList(r);null){a=r.nextSibling;l.appendChild(r),r=a}sf.base.prepend([i],e.parentNode),sf.base.detach(e);var h=sf.base.createElement("li",{styles:"list-style-type: none;"});sf.base.prepend([h],i.parentNode),sf.base.append([i],h)}else{h=sf.base.createElement("li",{styles:"list-style-type: none;"});sf.base.prepend([h],e.parentNode);l=sf.base.createElement(e.parentNode.tagName);sf.base.prepend([l],h),sf.base.append([e],l)}},e.prototype.nestedList=function(e){for(var t=!1,i=0;i<e.length;i++){var s=this.domNode.getPreviousNode(e[i]);if(s){t=!0;var n=void 0,o=void 0,r=e[i].querySelectorAll("ol, ul"),a=e[i].querySelectorAll("li"),l=this.domNode.contents(a[0])[0];if(a.length>0&&("OL"===l.nodeName||"UL"===l.nodeName)?o=a[0]:n=r[0],n){var h=sf.base.createElement("li");sf.base.prepend([h],n);for(var d=this.domNode.contents(e[i])[0];d&&!this.domNode.isList(d);null){var c=d.nextSibling;h.appendChild(d),d=c}sf.base.append([n],s),sf.base.detach(e[i])}else if(o){if("LI"===s.tagName){for(d=this.domNode.contents(e[i])[0];d&&!this.domNode.isList(d);null){c=d.nextSibling;sf.base.prepend([d],o),sf.base.setStyleAttribute(e[i],{"list-style-type":"none"}),sf.base.setStyleAttribute(o,{"list-style-type":""}),d=c}sf.base.append([o.parentNode],s),sf.base.detach(e[i])}}else if("LI"===s.tagName){h=sf.base.createElement(e[i].parentNode.tagName);sf.base.append([h],s),sf.base.append([e[i]],h)}else"OL"!==s.tagName&&"UL"!==s.tagName||sf.base.append([e[i]],s)}else{var p=e[i];t=!0,this.noPreviousElement(p)}}return t},e.prototype.applyListsHandler=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument);if(-1!==sf.base.Browser.userAgent.indexOf("Firefox")&&t.startContainer===t.endContainer&&t.startContainer===this.parent.editableElement){for(var i=t.startContainer.childNodes[t.startOffset>0?t.startOffset-1:t.startOffset]||t.startContainer,s=t.endContainer.childNodes[t.endOffset>0?t.endOffset-1:t.endOffset]||t.endContainer,n="BR"===s.lastChild.nodeName?sf.base.isNullOrUndefined(s.lastChild.previousSibling)?s:s.lastChild.previousSibling:s.lastChild;!sf.base.isNullOrUndefined(n)&&"#text"!==n.nodeName&&"IMG"!==n.nodeName&&"BR"!==n.nodeName&&"HR"!==n.nodeName;)n=n.lastChild;this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,i,n,0,n.textContent.length),t=this.parent.nodeSelection.getRange(this.parent.currentDocument)}if(t.startContainer===t.endContainer&&t.startContainer===this.parent.editableElement&&t.startOffset===t.endOffset&&0===t.startOffset&&0===this.parent.editableElement.textContent.length&&"TABLE"!==this.parent.editableElement.childNodes[0].nodeName&&"IMG"!==this.parent.editableElement.childNodes[0].nodeName){var o=t.startContainer.childNodes[0];this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,o,o,0,0),t=this.parent.nodeSelection.getRange(this.parent.currentDocument)}this.saveSelection=this.parent.nodeSelection.save(t,this.parent.currentDocument),this.currentAction=e.subCommand,this.currentAction=e.subCommand="NumberFormatList"===this.currentAction?"OL":"BulletFormatList"===this.currentAction?"UL":this.currentAction,this.domNode.setMarker(this.saveSelection);var r=this.domNode.blockNodes();if("BR"===e.enterAction){this.setSelectionBRConfig();var a=this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),l=this.parent.nodeSelection.getSelectionNodes(a),h=[];0===l.length&&l.push(r[0]);for(var d=0;d<l.length;d++){for(var c=l[d],p=void 0;!this.parent.domNode.isBlockNode(c)&&c!==this.parent.editableElement;)p=c,c=c.parentElement;this.parent.domNode.isBlockNode(c)&&c===this.parent.editableElement&&h.push(p)}for(d=0;d<h.length;d++)if(!this.parent.domNode.isBlockNode(h[d])){for(var u=c=h[d];c===this.parent.editableElement;)u=c,c=c.parentElement;var f=void 0;this.parent.domNode.isBlockNode(u.parentElement)&&u.parentElement===this.parent.editableElement?(f=sf.base.createElement("p"),u.parentElement.insertBefore(f,u),f.appendChild(u)):f=u;for(var g=f.previousSibling;!sf.base.isNullOrUndefined(g)&&"BR"!==g.nodeName&&!this.parent.domNode.isBlockNode(g);)f.firstChild.parentElement.insertBefore(g,f.firstChild),g=f.previousSibling;sf.base.isNullOrUndefined(g)||"BR"!==g.nodeName||sf.base.detach(g);for(var m=f.nextSibling;!sf.base.isNullOrUndefined(m)&&"BR"!==m.nodeName&&!this.parent.domNode.isBlockNode(m);)f.appendChild(m),m=f.nextSibling;sf.base.isNullOrUndefined(m)||"BR"!==m.nodeName||sf.base.detach(m)}this.setSelectionBRConfig(),r=this.parent.domNode.blockNodes()}for(d=0;d<r.length;d++)"TABLE"!==r[d].tagName||t.collapsed||r.splice(d,1),r.length>0&&"LI"!==r[d].tagName&&"LI"===r[d].parentNode.tagName&&(r[d]=r[d].parentNode);this.applyLists(r,this.currentAction,e.selector,e.item,e),e.callBack&&e.callBack({requestType:this.currentAction,event:e.event,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes()})},e.prototype.setSelectionBRConfig=function(){var e=this.parent.editableElement.querySelector("."+le),t=this.parent.editableElement.querySelector("."+he);sf.base.isNullOrUndefined(t)?this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,e,0):this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,e,t,0,0)},e.prototype.applyLists=function(e,t,i,s,n){if(this.isRevert(e,t,s)&&sf.base.isNullOrUndefined(s))this.revertList(e,n),this.removeEmptyListElements();else{this.checkLists(e,t,s);for(var o=0;o<e.length;o++)if(sf.base.isNullOrUndefined(s)||sf.base.isNullOrUndefined(s.listStyle)||("listImage"===s.listStyle?sf.base.setStyleAttribute(e[o],{"list-style-image":s.listImage}):(sf.base.setStyleAttribute(e[o],{"list-style-image":"none"}),sf.base.setStyleAttribute(e[o],{"list-style-type":s.listStyle.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}))),"true"===e[o].getAttribute("contenteditable")&&1===e[o].childNodes.length&&"TABLE"===e[o].childNodes[0].nodeName){var r=document.createElement(t);r.innerHTML="<li><br/></li>",e[o].appendChild(r)}else if("LI"!==e[o].tagName&&sf.base.isNullOrUndefined(s)){var a="<"+t+">",l="</"+t+">",h="li"+("IMG"===e[o].tagName?"":this.domNode.attributes(e[o])),d="p"===e[o].tagName.toLowerCase()?e[o].innerHTML:e[o].outerHTML,c=a+this.domNode.createTagString(h,null,d)+l;this.domNode.replaceWith(e[o],c)}else if(!sf.base.isNullOrUndefined(s)&&"LI"!==e[o].tagName){a="<"+t+("IMG"===e[o].tagName?"":this.domNode.attributes(e[o]))+">",l="</"+t+">",h="li",d="p"===e[o].tagName.toLowerCase()?e[o].innerHTML:e[o].outerHTML,c=a+this.domNode.createTagString(h,null,d)+l;this.domNode.replaceWith(e[o],c)}}this.cleanNode(),this.parent.editableElement.focus(),u()&&f(this.parent.editableElement,i),this.saveSelection=this.domNode.saveMarker(this.saveSelection),this.saveSelection.restore()},e.prototype.removeEmptyListElements=function(){for(var e=this.parent.editableElement.querySelectorAll("ol, ul"),t=0;t<e.length;t++)""===e[t].textContent.trim()&&sf.base.detach(e[t])},e.prototype.isRevert=function(e,t,i){for(var s=!0,n=0;n<e.length;n++){if("LI"!==e[n].tagName)return!1;(e[n].parentNode.tagName!==t||sf.base.isNullOrUndefined(i)&&""!==e[n].parentNode.style.listStyleType)&&(s=!1)}return s},e.prototype.checkLists=function(e,t,i){for(var s=[],n=0;n<e.length;n++){var o=e[n].parentNode;sf.base.isNullOrUndefined(i)||"LI"!==e[n].tagName||sf.base.isNullOrUndefined(i.listStyle)||("listImage"===i.listStyle?sf.base.setStyleAttribute(o,{"list-style-image":i.listImage}):(sf.base.setStyleAttribute(o,{"list-style-image":"none"}),sf.base.setStyleAttribute(o,{"list-style-type":i.listStyle.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}))),("LI"===e[n].tagName&&o.tagName!==t&&s.indexOf(o)<0||"LI"===e[n].tagName&&o.tagName===t&&s.indexOf(o)<0&&null!==i)&&s.push(o),sf.base.isNullOrUndefined(i)&&(o.tagName===t||("UL"===o.tagName||"OL"===o.tagName)&&o.hasAttribute("style"))&&o.hasAttribute("style")&&o.removeAttribute("style")}for(var r=s.length-1;r>=0;r--){var a=s[r],l="<"+t.toLowerCase()+" "+this.domNode.attributes(a)+">"+a.innerHTML+"</"+t.toLowerCase()+">";this.domNode.replaceWith(s[r],l)}},e.prototype.cleanNode=function(){for(var e=this.parent.editableElement.querySelectorAll("ol + ol, ul + ul"),t=0;t<e.length;t++){var i=e[t];if(this.domNode.isList(i.previousElementSibling)&&this.domNode.openTagString(i)===this.domNode.openTagString(i.previousElementSibling)){for(var s=this.domNode.contents(i),n=0;n<s.length;n++)i.previousElementSibling.appendChild(s[n]);i.parentNode.removeChild(i)}else sf.base.isNullOrUndefined(i.getAttribute("level"))||i.tagName===i.previousElementSibling.tagName&&i.previousElementSibling.lastChild.append(i)}},e.prototype.findUnSelected=function(e,t){if((e=e.slice().reverse()).length>0){var i=[],s=[],n=[],o=[];n=t[t.length-1].childNodes;for(var r=0;r<n.length;r++)if("OL"===n[r].tagName||"UL"===n[r].tagName){var a=n[r].querySelectorAll("li");if(a.length>0)for(var l=0;l<a.length;l++)o.push(a[l])}for(var h=0;h<o.length;h++){for(var d=0,c=0;c<e.length;c++)o[h].contains(e[c])||(d+=1);d===e.length&&s.push(o[h])}if(s.length>0)for(var p=0;p<s.length;p++)"OL"!==this.domNode.contents(s[p])[0].nodeName&&"UL"!==this.domNode.contents(s[p])[0].nodeName&&i.push(s[p]);i.length>0&&this.nestedList(i)}},e.prototype.revertList=function(e,t){for(var i=[],s=e.length-1;s>=0;s--)for(var n=s-1;n>=0;n--)if(e[n].contains(e[s])||e[n]===e[s]){i.push(e[s]),e.splice(s,1);break}this.findUnSelected(i,e);var o=[];for(s=0;s<e.length;s++){var r=e[s];3===this.domNode.contents(r)[0].nodeType&&0===this.domNode.contents(r)[0].textContent.trim().length&&sf.base.detach(this.domNode.contents(r)[0]);var a=e[s].parentNode,l=r.getAttribute("class");if(0===i.length){var h=e[s].querySelectorAll("ul, ol")[0];if(h)if(h.querySelectorAll("li")){var d=sf.base.createElement(h.tagName);sf.base.append([d],h.parentNode);var c=sf.base.createElement("li",{styles:"list-style-type: none;"});sf.base.append([c],d),sf.base.append([h],c)}}if(r.parentNode.insertBefore(this.closeTag(a.tagName),r),"LI"===a.parentNode.tagName||"OL"===a.parentNode.tagName||"UL"===a.parentNode.tagName)r.parentNode.insertBefore(this.closeTag("LI"),r);else{if(0===r.querySelectorAll(W.join(", ")).length){var p="<p"+(sf.base.isNullOrUndefined(l)?' class="e-rte-wrap-inner"':' class="'+l+' e-rte-wrap-inner"')+this.domNode.attributes(a)+"></p>";"BR"!==t.enterAction&&this.domNode.wrapInner(r,this.domNode.parseHTMLFragment(p))}else if(3===this.domNode.contents(r)[0].nodeType){var u=this.domNode.createTagString("p",a,this.parent.domNode.encode(this.domNode.contents(r)[0].textContent));this.domNode.replaceWith(this.domNode.contents(r)[0],u)}else if(this.domNode.contents(r)[0].classList.contains(le)||this.domNode.contents(r)[0].classList.contains(he)){u=this.domNode.createTagString("p",a,this.domNode.contents(r)[0].outerHTML);this.domNode.replaceWith(this.domNode.contents(r)[0],u)}else{var f=r.firstChild;l=f.getAttribute("class"),sf.base.attributes(f,this.domNode.rawAttributes(a)),l&&f.getAttribute("class")&&sf.base.attributes(f,{class:l+" "+f.getAttribute("class")})}sf.base.append([this.openTag("LI")],r),sf.base.prepend([this.closeTag("LI")],r)}this.domNode.insertAfter(this.openTag(a.tagName),r),"LI"===a.parentNode.tagName&&(a=a.parentNode.parentNode),o.indexOf(a)<0&&o.push(a)}for(s=0;s<o.length;s++){var g=o[s],m=g.innerHTML;m=(m=m.replace(/<span class="e-rte-list-close-([a-z]*)"><\/span>/g,"</$1>")).replace(/<span class="e-rte-list-open-([a-z]*)"><\/span>/g,"<$1 "+this.domNode.attributes(g)+">"),this.domNode.replaceWith(g,this.domNode.openTagString(g)+m.trim()+this.domNode.closeTagString(g))}var v=this.parent.editableElement.querySelectorAll("ul:empty, ol:empty");for(s=0;s<v.length;s++)sf.base.detach(v[s]);var b=this.parent.editableElement.querySelectorAll("li:empty");for(s=0;s<b.length;s++)sf.base.detach(b[s])},e.prototype.openTag=function(e){return this.domNode.parseHTMLFragment('<span class="e-rte-list-open-'+e.toLowerCase()+'"></span>')},e.prototype.closeTag=function(e){return this.domNode.parseHTMLFragment('<span class="e-rte-list-close-'+e.toLowerCase()+'"></span>')},e}(),pe=function(){function e(){}return e.WrapBefore=function(e,t,i){return t.innerText=e.textContent,i?this.AppendBefore(t,e,!0):this.AppendBefore(t,e),e.parentNode&&e.parentNode.removeChild(e),t.childNodes[0]},e.Wrap=function(e,t){return this.AppendBefore(t,e),t.appendChild(e),e},e.unwrap=function(e){for(var t=e.parentNode,i=[];e.firstChild;null)i.push(t.insertBefore(e.firstChild,e));return t.removeChild(e),i},e.AppendBefore=function(e,t,i){return t.parentNode?i?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.insertBefore(e,t):t},e}(),ue=function(){function e(){this.enterAction="P",this.position=-1,this.nodeSelection=new G}return e.prototype.GetSpliceNode=function(e,t){return t=this.SplitNode(e,t,!0),t=this.SplitNode(e,t,!1)},e.prototype.SplitNode=function(e,t,i){if(t){var s=e.cloneRange(),n=t.parentNode,o=this.nodeSelection.getIndex(t);s.collapse(i),i?s.setStartBefore(t):s.setEndAfter(t);var r,a=s.extractContents();if(i){if(t=n.childNodes[o],(a=this.spliceEmptyNode(a,!1))&&a.childNodes.length>0)if(!!(1!==a.childNodes.length||"IMG"===a.childNodes[0].nodeName||!this.isRteElm(a)||""!==a.textContent))if(t)pe.AppendBefore(a,t);else n.appendChild(a),(r=document.createElement("div")).innerHTML="&#65279;&#65279;",t=r.firstChild,n.appendChild(t)}else if(t=n.childNodes.length>1?n.childNodes[o]:n.childNodes[0],(a=this.spliceEmptyNode(a,!0))&&a.childNodes.length>0)if(!!(1!==a.childNodes.length||"IMG"===a.childNodes[0].nodeName||!this.isRteElm(a)||""!==a.textContent))if(t)pe.AppendBefore(a,t,!0);else n.appendChild(a),(r=document.createElement("div")).innerHTML="&#65279;&#65279;",n.insertBefore(r.firstChild,n.firstChild),t=n.firstChild;return t}return null},e.prototype.isRteElm=function(e){var t=!0;if(1===e.childNodes.length&&"IMG"!==e.childNodes[0].nodeName)for(var i=e.childNodes[0],s=0;!sf.base.isNullOrUndefined(i.childNodes)&&s<i.childNodes.length;s++)("IMG"===i.childNodes[s].nodeName||"SPAN"===i.childNodes[s].nodeName&&(i.childNodes[s].classList.contains("e-video-wrap")||i.childNodes[s].classList.contains("e-embed-video-wrap")||i.childNodes[s].classList.contains("e-audio-wrap")))&&(t=!1);else t=!0;return t},e.prototype.spliceEmptyNode=function(e,t){var i;return(i=1===e.childNodes.length&&"#text"===e.childNodes[0].nodeName&&""===e.childNodes[0].textContent||""===e.textContent?-1:e.childNodes.length-1)>-1&&!t?this.spliceEmptyNode(e.childNodes[i],t):i>-1?this.spliceEmptyNode(e.childNodes[0],t):3===e.nodeType||11===e.nodeType||"IMG"===e.nodeName||e.classList.contains("e-video-wrap")||e.classList.contains("e-audio-wrap")||e.parentNode.removeChild(e),e},e.prototype.GetCursorStart=function(e,t,i){for(var s=(e=i?e:e.reverse())[0],n=0;n<e.length&&(i?e[n]<t:e[n]>=t);n++)s=e[n];return s},e.prototype.GetCursorRange=function(e,t,i){var s=e.createRange(),n=[];n.push(0);for(var o=this.TrimLineBreak(i.data),r=o.indexOf(" ",0);-1!==r;)n.indexOf(r)<0&&n.push(r),new RegExp("\\s").test(o[r-1])&&n.indexOf(r-1)<0&&n.push(r-1),new RegExp("\\s").test(o[r+1])&&n.push(r+1),r=o.indexOf(" ",r+1);if(n.push(o.length),n.indexOf(t.startOffset)>=0||n.indexOf(t.startOffset-1)>=0&&(1!==t.startOffset||1===t.startOffset&&new RegExp("\\s").test(o[0]))||n[n.length-1]-1===t.startOffset)s=t,this.position=1;else{var a=this.GetCursorStart(n,t.startOffset,!0);this.position=t.startOffset-a,s.setStart(t.startContainer,a),s.setEnd(t.startContainer,this.GetCursorStart(n,t.startOffset,!1))}return s},e.prototype.GetCursorNode=function(e,t,i){return this.GetSpliceNode(this.GetCursorRange(e,t,i),i)},e.prototype.TrimLineBreak=function(e){return e.replace(/(\r\n\t|\n|\r\t)/gm," ")},e}(),fe=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("format-type",this.applyFormats,this),this.parent.observer.on("keyup-handler",this.onKeyUp,this),this.parent.observer.on("keydown-handler",this.onKeyDown,this)},e.prototype.getParentNode=function(e){for(;e.parentNode&&e.parentNode!==this.parent.editableElement;null)e=e.parentNode;return e},e.prototype.onKeyUp=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=t.endContainer,s=i.lastChild;if(13===e.event.which&&t.startContainer===i&&3!==i.nodeType){var n=sf.base.createElement("p");if(n.innerHTML="<br>",!sf.base.isNullOrUndefined(s)&&s&&"BR"===s.nodeName&&s.previousSibling&&"TABLE"===s.previousSibling.nodeName)i.replaceChild(n,s),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,n,0);else{var o=this.parent.nodeSelection.getSelectionNodeCollectionBr(t)[0];!sf.base.isNullOrUndefined(o)&&"BR"===o.nodeName&&o.previousSibling&&"TABLE"===o.previousSibling.nodeName&&(i.replaceChild(n,o),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,n,0))}}},e.prototype.onKeyDown=function(e){if(13===e.event.which){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=0===t.startContainer.textContent.length||"PRE"===t.startContainer.nodeName?t.startContainer:t.startContainer.parentElement,s=0===t.endContainer.textContent.length||"PRE"===t.endContainer.nodeName?t.endContainer:t.endContainer.parentElement,n=sf.base.closest(i,"pre"),o=sf.base.closest(s,"pre");if(!sf.base.isNullOrUndefined(n)&&!sf.base.isNullOrUndefined(n.parentElement)&&"LI"===n.parentElement.tagName)return;if((sf.base.isNullOrUndefined(n)&&!sf.base.isNullOrUndefined(o)||!sf.base.isNullOrUndefined(n)&&sf.base.isNullOrUndefined(o))&&(e.event.preventDefault(),this.deleteContent(t),this.removeCodeContent(t),t=this.parent.nodeSelection.getRange(this.parent.currentDocument),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,s,0)),13===e.event.which&&!sf.base.isNullOrUndefined(n)&&!sf.base.isNullOrUndefined(o)){e.event.preventDefault(),this.deleteContent(t),this.removeCodeContent(t);var r=(t=this.parent.nodeSelection.getRange(this.parent.currentDocument)).startContainer.childNodes[t.endOffset],a=t.startContainer.childNodes[t.endOffset-1],l=t.startContainer;if(sf.base.isNullOrUndefined(r)||sf.base.isNullOrUndefined(a)||!sf.base.isNullOrUndefined(r.nextSibling)||"BR"!==r.nodeName||"BR"!==a.nodeName)if(8203===l.textContent.charCodeAt(0)&&1===l.textContent.length||0===l.textContent.length){for(;"PRE"!==l.parentElement.nodeName&&(1===l.textContent.length||0===l.textContent.length);)l=l.parentElement;!sf.base.isNullOrUndefined(l.previousSibling)&&"BR"===l.previousSibling.nodeName&&sf.base.isNullOrUndefined(l.nextSibling)?this.paraFocus(l.parentElement):this.isNotEndCursor(n,t)}else this.isNotEndCursor(n,t);else this.paraFocus(t.startContainer,e.enterAction)}}},e.prototype.removeCodeContent=function(e){var t=new RegExp(String.fromCharCode(65279),"g");if(!sf.base.isNullOrUndefined(e.endContainer.textContent.match(t))){var i=65279===e.endContainer.textContent.charCodeAt(e.endOffset-1)?e.endOffset-2:e.endOffset;e.endContainer.textContent=e.endContainer.textContent.replace(t,""),""===e.endContainer.textContent?this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,e.endContainer.parentElement,0):this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,e.endContainer,i)}},e.prototype.deleteContent=function(e){e.startContainer===e.endContainer&&e.startOffset===e.endOffset||e.deleteContents()},e.prototype.paraFocus=function(e,t){var i;"DIV"===t?(i=sf.base.createElement("div")).innerHTML="<br>":"BR"===t?i=sf.base.createElement("br"):(i=sf.base.createElement("p")).innerHTML="<br>",this.parent.domNode.insertAfter(i,e),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,i,0),sf.base.detach(e.lastChild)},e.prototype.isNotEndCursor=function(e,t){var i=new ue,s=t.startOffset===e.lastChild.textContent.length&&e.lastChild.textContent===t.startContainer.textContent;if(0===e.textContent.indexOf(t.startContainer.textContent)&&(0===t.startOffset&&0===t.endOffset||"PRE"===t.startContainer.nodeName)){this.insertMarker(e,t);var n=sf.base.createElement("br");e.childNodes[t.endOffset].parentElement.insertBefore(n,e.childNodes[t.endOffset])}else{var o=i.SplitNode(t,e,!0);this.insertMarker(e,t);var r=e.previousElementSibling;"PRE"===r.tagName&&(r.insertAdjacentHTML("beforeend","<br>"+o.innerHTML),sf.base.detach(e))}this.setCursorPosition(s,e)},e.prototype.setCursorPosition=function(e,t){var i=!1,s=this.parent.editableElement.querySelector(".tempSpan"),n=s.parentElement;if(""===s.parentNode.textContent?i=!0:this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,s,0),e)if(i)n===t?(this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,s,0),sf.base.detach(s)):this.focusSelectionParent(s,n);else{var o=sf.base.createElement("br");this.parent.domNode.insertAfter(o,s),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,s,0),sf.base.detach(s)}else i?this.focusSelectionParent(s,n):sf.base.detach(s)},e.prototype.focusSelectionParent=function(e,t){sf.base.detach(e),t.innerHTML="​",this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,t,0)},e.prototype.insertMarker=function(e,t){var i=sf.base.createElement("span",{className:"tempSpan"});"PRE"===t.startContainer.nodeName?e.childNodes[t.endOffset].parentElement.insertBefore(i,e.childNodes[t.endOffset]):t.startContainer.parentElement.insertBefore(i,t.startContainer)},e.prototype.applyFormats=function(e){var t=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=!1;this.parent.editableElement!==t.endContainer||sf.base.isNullOrUndefined(this.parent.editableElement.children[t.endOffset-1])||"TABLE"!==this.parent.editableElement.children[t.endOffset-1].tagName||t.collapsed||(i=!0);var s=this.parent.nodeSelection.save(t,this.parent.currentDocument);this.parent.domNode.setMarker(s);var n=this.parent.domNode.blockNodes();if("BR"===e.enterAction){this.setSelectionBRConfig();var o=this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),r=this.parent.nodeSelection.getSelectionNodes(o),a=[];0===r.length&&r.push(n[0]);for(var l=0;l<r.length;l++){for(var h=r[l],d=void 0;!this.parent.domNode.isBlockNode(h)&&h!==this.parent.editableElement;)d=h,h=h.parentElement;this.parent.domNode.isBlockNode(h)&&h===this.parent.editableElement&&a.push(d)}for(l=0;l<a.length;l++)if(!this.parent.domNode.isBlockNode(a[l])){for(var c=h=a[l];h===this.parent.editableElement;)c=h,h=h.parentElement;var p=void 0;this.parent.domNode.isBlockNode(c.parentElement)&&c.parentElement===this.parent.editableElement?(p=sf.base.createElement("div"),c.parentElement.insertBefore(p,c),p.appendChild(c)):p=c;for(var g=p.previousSibling;!sf.base.isNullOrUndefined(g)&&"BR"!==g.nodeName&&!this.parent.domNode.isBlockNode(g);)p.firstChild.parentElement.insertBefore(g,p.firstChild),g=p.previousSibling;sf.base.isNullOrUndefined(g)||"BR"!==g.nodeName||sf.base.detach(g);for(var m=p.nextSibling;!sf.base.isNullOrUndefined(m)&&"BR"!==m.nodeName&&!this.parent.domNode.isBlockNode(m);)p.appendChild(m),m=p.nextSibling;sf.base.isNullOrUndefined(m)||"BR"!==m.nodeName||sf.base.detach(m)}this.setSelectionBRConfig(),n=this.parent.domNode.blockNodes()}for(l=0;l<n.length;l++){var v=void 0,b=void 0;if("blockquote"===e.subCommand.toLowerCase()?(v=this.getParentNode(n[l]),b=this.parent.domNode.isList(v)||"TABLE"===v.tagName?v.outerHTML:v.innerHTML):b=(v=n[l]).innerHTML,!(e.subCommand.toLowerCase()===v.tagName.toLowerCase()&&("pre"!==e.subCommand.toLowerCase()||!sf.base.isNullOrUndefined(e.exeValue)&&"dropDownSelect"===e.exeValue.name)||sf.base.isNullOrUndefined(v.parentNode)||"TABLE"===v.tagName&&"pre"===e.subCommand.toLowerCase())){this.cleanFormats(v,e.subCommand);var y="pre"===e.subCommand.toLowerCase()&&"pre"===v.tagName.toLowerCase()?"p":e.subCommand,M=this.parent.domNode.createTagString(y,v,b.replace(/>\s+</g,"><"));"LI"===v.tagName?(v.innerHTML="",v.insertAdjacentHTML("beforeend",M)):this.parent.domNode.replaceWith(v,M)}}this.preFormatMerge();var C=this.parent.editableElement.querySelector("."+le),w=this.parent.editableElement.querySelector("."+he);sf.base.isNullOrUndefined(C)||sf.base.isNullOrUndefined(w)||(C=C.lastChild,w=w.lastChild),s=this.parent.domNode.saveMarker(s,null),u()&&f(this.parent.editableElement,e.selector),i?this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,C,w,0,w.textContent.length):s.restore(),e.callBack&&e.callBack({requestType:e.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes()})},e.prototype.setSelectionBRConfig=function(){var e=this.parent.editableElement.querySelector("."+le),t=this.parent.editableElement.querySelector("."+he);sf.base.isNullOrUndefined(t)?this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,e,0):this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,e,t,0,0)},e.prototype.preFormatMerge=function(){var e=this.parent.editableElement.querySelectorAll("PRE");if(!sf.base.isNullOrUndefined(e))for(var t=0;t<e.length;t++){var i=e[t].previousElementSibling;sf.base.isNullOrUndefined(i)||"PRE"!==i.tagName||(i.insertAdjacentHTML("beforeend","<br>"+e[t].innerHTML),sf.base.detach(e[t]))}},e.prototype.cleanFormats=function(e,t){var i=["display","font-size","margin-top","margin-bottom","margin-left","margin-right","font-weight"];t=t.toLowerCase();for(var s=0;s<i.length&&"p"!==t&&"blockquote"!==t&&"pre"!==t;s++)e.style.removeProperty(i[s])},e}(),ge=function(){function e(){}return e.Insert=function(e,t,i,s,n){var o,r;"string"==typeof t?((r=document.createElement("div")).innerHTML=t,o=s?r:r.firstChild):s&&(sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(t.classList)||!t.classList.contains("pasteContent"))?((r=document.createElement("div")).appendChild(t),o=r):o=t;var a=new G,l=new ue,h=a.getRange(e);if(h.startContainer!==i||h.startContainer!==h.endContainer||0!==h.startOffset||h.startOffset!==h.endOffset||0!==i.textContent.length||"P"!==i.children[0].tagName&&"BR"!==i.children[0].tagName||(a.setSelectionText(e,h.startContainer.children[0],h.startContainer.children[0],0,0),h=a.getRange(e)),"BR"===h.startContainer.nodeName&&0===h.startOffset&&h.startOffset===h.endOffset&&h.startContainer===h.endContainer){var d=Array.prototype.slice.call(h.startContainer.parentElement.childNodes).indexOf(h.startContainer);a.setSelectionText(e,h.startContainer.parentElement,h.startContainer.parentElement,d,d),h=a.getRange(e)}var c=h.startOffset===h.endOffset&&0===h.startOffset&&h.startContainer===h.endContainer,p=h.collapsed,u=this.getNodeCollection(h,a,o),f="table"===o.nodeName.toLowerCase()?this.closestEle(u[0].parentNode,i):u[0];if(s||!sf.base.isNullOrUndefined(o)&&!sf.base.isNullOrUndefined(o.classList)&&o.classList.contains("pasteContent"))this.pasteInsertHTML(u,o,h,a,l,e,p,f,i,n);else if(i!==h.startContainer&&(!p&&(f.nodeType!==Node.ELEMENT_NODE||-1===Q.indexOf(f.tagName.toLocaleLowerCase()))||"table"===o.nodeName.toLowerCase()&&f&&-1===Q.indexOf(f.tagName.toLocaleLowerCase()))){var g=l.GetSpliceNode(h,f),m=g.previousSibling,v=g.parentNode;if(1===u.length||"table"===o.nodeName.toLowerCase()&&0===g.childElementCount)a.setSelectionContents(e,g),h=a.getRange(e);else{var b=l.GetSpliceNode(h,u[u.length-1].parentElement);b=sf.base.isNullOrUndefined(b)?g:b,a.setSelectionText(e,g,b,0,3===b.nodeType?b.textContent.length:b.childNodes.length),h=a.getRange(e)}h.extractContents(),"TABLE"===t.tagName&&this.removeEmptyElements(i);for(var y=0;y<u.length;y++)if(3!==u[y].nodeType&&null!=u[y].parentNode){if("IMG"===u[y].nodeName)continue;u[y].parentNode.removeChild(u[y])}if(m)pe.AppendBefore(o,m,!0);else{for(var M=null;v!==i&&v.firstChild&&""===v.textContent.trim();){M=v,v=v.parentNode}null!==M&&(v=M),v.firstChild&&(v!==i||"TABLE"===o.nodeName&&c&&v===h.startContainer&&v===h.endContainer)?""===v.textContent.trim()&&v!==i?(pe.AppendBefore(o,v,!1),sf.base.detach(v)):pe.AppendBefore(o,v.firstChild,!1):v.appendChild(o)}"IMG"===o.nodeName?this.imageFocus(o,a,e):3!==o.nodeType?a.setSelectionText(e,o,o,0,o.childNodes.length):a.setSelectionText(e,o,o,0,o.textContent.length)}else{if(h.deleteContents(),c&&""===h.startContainer.textContent&&"BR"!==h.startContainer.nodeName&&(h.startContainer.innerHTML=""),sf.base.Browser.isIE){var C=e.createDocumentFragment();C.appendChild(o),h.insertNode(C)}else if(1===h.startContainer.nodeType&&"hr"===h.startContainer.nodeName.toLowerCase()&&"hr"===h.endContainer.nodeName.toLowerCase()){var w=h.startContainer.nextElementSibling;w&&(w.querySelector("br")&&sf.base.detach(w.querySelector("br")),w.appendChild(o))}else"BR"===h.startContainer.nodeName?h.startContainer.parentElement.insertBefore(o,h.startContainer):h.insertNode(o);3!==o.nodeType&&o.childNodes.length>0?a.setSelectionText(e,o,o,1,1):"IMG"===o.nodeName?this.imageFocus(o,a,e):3!==o.nodeType?a.setSelectionContents(e,o):a.setSelectionText(e,o,o,o.textContent.length,o.textContent.length)}},e.pasteInsertHTML=function(e,t,i,s,n,o,r,a,l,h){var d,c,p,u,f=i.startOffset===i.endOffset&&i.startContainer===i.endContainer;if(f&&i.startContainer===l&&""===l.textContent){var g=this.getImmediateBlockNode(e[e.length-1],l);s.setSelectionText(o,g,g,0,0),i=s.getRange(o)}l!==i.startContainer&&(!r&&(a.nodeType!==Node.ELEMENT_NODE||-1===Q.indexOf(a.tagName.toLocaleLowerCase()))||"table"===t.nodeName.toLowerCase()&&a&&-1===Q.indexOf(a.tagName.toLocaleLowerCase()))&&(u=n.GetSpliceNode(i,a),c=sf.base.isNullOrUndefined(u.previousSibling)?u.parentNode.previousSibling:u.previousSibling,1===e.length?(s.setSelectionContents(o,u),i=s.getRange(o),p=!0):(d=n.GetSpliceNode(i,e[e.length-1].parentElement),d=sf.base.isNullOrUndefined(d)?u:d,s.setSelectionText(o,u,d,0,3===d.nodeType?d.textContent.length:d.childNodes.length),i=s.getRange(o),p=!1));var m=!1;this.removingComments(t);for(var v,b=t.childNodes,y=0;y<b.length;y++)if(W.indexOf(b[y].nodeName.toLocaleLowerCase())>=0){m=!0;break}var M=document.createDocumentFragment();if(m){for(var C=i.startContainer;!sf.base.isNullOrUndefined(C)&&"PRE"!==C.nodeName&&C!==l;)C=C.parentElement;if(sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(C)||"PRE"!==C.nodeName){this.insertTempNode(i,t,e,n,l);var w=!0,S=void 0,N=void 0,x=void 0;for(this.contentsDeleted||i.deleteContents();t.firstChild;)if("#text"!==t.firstChild.nodeName||""!==t.firstChild.textContent.trim())if("#text"===t.firstChild.nodeName&&w||this.inlineNode.indexOf(t.firstChild.nodeName.toLocaleLowerCase())>=0&&w){if(v=t.firstChild,sf.base.isNullOrUndefined(t.previousElementSibling)){var O=sf.base.createElement("p");t.parentElement.insertBefore(O,t)}"BR"===t.previousElementSibling.nodeName?t.parentElement.insertBefore(t.firstChild,t):t.previousElementSibling.appendChild(t.firstChild)}else v=t.firstChild,"#text"===t.firstChild.nodeName||this.inlineNode.indexOf(t.firstChild.nodeName.toLocaleLowerCase())>=0?(S?(x.appendChild(t.firstChild),M.appendChild(x)):((N=sf.base.createElement("p")).appendChild(t.firstChild),M.appendChild(N)),x=N,S=!0):(M.appendChild(t.firstChild),S=!1),w=!1;else sf.base.detach(t.firstChild);t.parentNode.replaceChild(M,t)}else i.insertNode(t),v=t.lastChild}else if(f){var E=sf.base.createElement("span",{className:"tempSpan"}),I=sf.base.closest(i.startContainer.parentElement,"a");if(3===i.startContainer.nodeType&&I&&sf.base.closest(I,"span")){var D=this.getImmediateBlockNode(i.startContainer,l);D.querySelectorAll("br").length>0&&sf.base.detach(D.querySelector("br")),sf.base.closest(I,"span").appendChild(E)}else i.insertNode(E);for(;t.firstChild;)v=t.firstChild,M.appendChild(t.firstChild);E.parentNode.replaceChild(M,E)}else{for(;t.firstChild;)v=t.firstChild,M.appendChild(t.firstChild);p?u.parentNode.replaceChild(M,u):(i.deleteContents(),sf.base.isNullOrUndefined(d)||sf.base.detach(d),sf.base.isNullOrUndefined(c)?l.appendChild(M):c.parentNode.appendChild(M))}"#text"===v.nodeName?this.placeCursorEnd(v,t,s,o,l):this.cursorPos(v,t,s,o,l,h)},e.placeCursorEnd=function(e,t,i,s,n){for(e="BR"===e.nodeName?sf.base.isNullOrUndefined(e.previousSibling)?e.parentNode:e.previousSibling:e;!sf.base.isNullOrUndefined(e)&&"#text"!==e.nodeName&&"IMG"!==e.nodeName&&"BR"!==e.nodeName&&"HR"!==e.nodeName;)e=e.lastChild;"IMG"===(e=sf.base.isNullOrUndefined(e)?t:e).nodeName?this.imageFocus(e,i,s):i.setSelectionText(s,e,e,e.textContent.length,e.textContent.length),this.removeEmptyElements(n)},e.getNodeCollection=function(e,t,i){var s=[];return e.startOffset===e.endOffset&&e.startContainer===e.endContainer&&"BR"!==e.startContainer.nodeName&&e.startContainer.childNodes.length>0&&("TD"===e.startContainer.nodeName||3!==e.startContainer.nodeType&&i.classList&&i.classList.contains("pasteContent"))?s.push(e.startContainer.childNodes[e.endOffset]):s=t.getInsertNodeCollection(e),s},e.insertTempNode=function(e,t,i,s,n){if(e.startContainer!==n||sf.base.isNullOrUndefined(e.startContainer.childNodes[e.endOffset-1])||"TABLE"!==e.startContainer.childNodes[e.endOffset-1].nodeName)if(e.startContainer!==n||sf.base.isNullOrUndefined(e.startContainer.childNodes[e.endOffset])||"TABLE"!==e.startContainer.childNodes[e.endOffset].nodeName)if(e.startContainer===e.endContainer&&3!==e.startContainer.nodeType&&"HR"===t.firstChild.nodeName)e.startContainer.classList.contains("e-content")||"BODY"===e.startContainer.nodeName?e.startContainer.appendChild(t):e.startContainer.parentNode.insertBefore(t,e.startContainer);else{var o=this.getImmediateBlockNode(i[i.length-1],n);if((sf.base.isNullOrUndefined(o)||sf.base.isNullOrUndefined(o.parentElement))&&3!==e.endContainer.nodeType&&(o=e.endContainer,e.setEnd(o,e.endContainer.textContent.length)),"BODY"===o.nodeName&&e.startContainer===e.endContainer&&1===e.startContainer.nodeType&&(o=e.startContainer),o.closest("LI")&&t&&t.firstElementChild&&("OL"===t.firstElementChild.tagName||"UL"===t.firstElementChild.tagName))for(var r=void 0;t.firstElementChild.lastElementChild&&"LI"===t.firstElementChild.lastElementChild.tagName;)(r=t.firstElementChild.lastElementChild).style.removeProperty("margin-left"),r.style.removeProperty("margin-top"),r.style.removeProperty("margin-bottom"),t.firstElementChild.insertAdjacentElement("afterend",r);if("TD"===o.nodeName||"TH"===o.nodeName||"TR"===o.nodeName){var a=sf.base.createElement("span",{className:"tempSpan"});e.insertNode(a),a.parentNode.replaceChild(t,a)}else{var l=new G,h=this.getNodeCollection(e,l,t)[this.getNodeCollection(e,l,t).length-1],d=void 0;if("BR"!==h.nodeName&&"HR"!==h.nodeName&&("#text"!==h.nodeName||sf.base.isNullOrUndefined(h.parentElement)||"LI"!==h.parentElement.nodeName)||sf.base.isNullOrUndefined(h.parentElement)||0!==h.parentElement.textContent.trim().length){if(("#text"===h.nodeName||"BR"===h.nodeName)&&!sf.base.isNullOrUndefined(h.parentElement)&&("LI"===h.parentElement.nodeName||o===n&&h.parentElement===o)&&h.parentElement.textContent.trim().length>0)return d=h,"LI"!==h.parentElement.nodeName||sf.base.isNullOrUndefined(h.nextSibling)||"BR"!==h.nextSibling.nodeName||sf.base.detach(h.nextSibling),e.collapsed||e.deleteContents(),e.insertNode(t),void(this.contentsDeleted=!0);d=s.GetSpliceNode(e,o)}else d=h,"LI"!==h.parentElement.nodeName||sf.base.isNullOrUndefined(h.nextSibling)||"BR"!==h.nextSibling.nodeName||sf.base.detach(h.nextSibling);d.parentNode.replaceChild(t,d)}}else e.startContainer.insertBefore(t,e.startContainer.childNodes[e.endOffset]);else sf.base.isNullOrUndefined(e.startContainer.childNodes[e.endOffset-1].nextSibling)?e.startContainer.appendChild(t):e.startContainer.insertBefore(t,e.startContainer.childNodes[e.endOffset-1].nextSibling)},e.cursorPos=function(e,t,i,s,n,o){e.classList.add("lastNode"),n.innerHTML=function(e,t){var i=document.createElement("div");i.innerHTML=e,i.setAttribute("class","tempDiv");var s=document.createElement("div");if(i.childNodes.length>0){for(var n=void 0,o=void 0,r=void 0;i.firstChild;)"#text"===i.firstChild.nodeName&&(i.firstChild.textContent.indexOf("\n")<0||""!==i.firstChild.textContent.trim())||p.indexOf(i.firstChild.nodeName.toLocaleLowerCase())>=0?n?(o.appendChild(i.firstChild),o=r,n=!0):"BR"===t?(s.appendChild(i.firstChild),o=s):(r=sf.base.createElement("p"),s.appendChild(r),r.appendChild(i.firstChild),o=r,n=!0):"#text"===i.firstChild.nodeName&&("\n"===i.firstChild.textContent||i.firstChild.textContent.indexOf("\n")>=0&&""===i.firstChild.textContent.trim())?sf.base.detach(i.firstChild):(s.appendChild(i.firstChild),n=!1);for(var a=s.querySelectorAll("table"),l=0;l<a.length;l++){"0"===a[l].getAttribute("border")&&a[l].removeAttribute("border");for(var h=a[l].querySelectorAll("td"),d=0;d<h.length;d++)"none"===h[d].style.borderLeft&&h[d].style.removeProperty("border-left"),"none"===h[d].style.borderRight&&h[d].style.removeProperty("border-right"),"none"===h[d].style.borderBottom&&h[d].style.removeProperty("border-bottom"),"none"===h[d].style.borderTop&&h[d].style.removeProperty("border-top"),"none"===h[d].style.border&&h[d].style.removeProperty("border");a[l].classList.contains("e-rte-table")||a[l].classList.add("e-rte-table")}var c=s.querySelectorAll("img");for(l=0;l<c.length;l++)c[l].classList.contains("e-rte-image")||c[l].classList.add("e-rte-image"),c[l].classList.contains("e-imginline")||c[l].classList.contains("e-imgbreak")||c[l].classList.add("e-imginline")}return s.innerHTML}(n.innerHTML,o),e=n.querySelector(".lastNode"),sf.base.isNullOrUndefined(e)||(this.placeCursorEnd(e,t,i,s,n),e.classList.remove("lastNode"),0===e.classList.length&&e.removeAttribute("class"))},e.imageFocus=function(e,t,i){var s=document.createTextNode(" ");e.parentNode.insertBefore(s,e.nextSibling),t.setSelectionText(i,e.nextSibling,e.nextSibling,0,0)},e.getImmediateBlockNode=function(e,t){do{e=e.parentNode}while(e&&W.indexOf(e.nodeName.toLocaleLowerCase())<0);return e},e.removingComments=function(e){var t=e.innerHTML;t=t.replace(/<!--[\s\S]*?-->/g,""),e.innerHTML=t},e.findDetachEmptyElem=function(e){return sf.base.isNullOrUndefined(e.parentElement)?null:""===e.parentElement.textContent.trim()&&"true"!==e.parentElement.contentEditable?this.findDetachEmptyElem(e.parentElement):e},e.removeEmptyElements=function(e){for(var t=e.querySelectorAll(":empty"),i=0;i<t.length;i++)if(X.indexOf(t[i].tagName.toLowerCase())<0){var s=this.findDetachEmptyElem(t[i]);sf.base.isNullOrUndefined(s)||sf.base.detach(s)}},e.closestEle=function(e,t){for(var i=e;i&&1===i.nodeType;){if(i.parentNode===t||!sf.base.isNullOrUndefined(i.parentNode.tagName)&&-1!==_.indexOf(i.parentNode.tagName.toLocaleLowerCase()))return i;i=i.parentNode}return null},e.inlineNode=["a","abbr","acronym","audio","b","bdi","bdo","big","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","font","i","iframe","img","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","script","select","slot","small","span","strong","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"],e.contentsDeleted=!1,e}(),me=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("INSERT-LINK",this.linkCommand,this)},e.prototype.linkCommand=function(e){switch(e.value.toString().toLocaleLowerCase()){case"createlink":case"editlink":this.createLink(e);break;case"openlink":this.openLink(e);break;case"removelink":this.removeLink(e)}},e.prototype.createLink=function(e){var t=!sf.base.isNullOrUndefined(e.item.selectParent)&&e.item.selectParent.length>0&&sf.base.closest(e.item.selectParent[0],"a");if(t=sf.base.isNullOrUndefined(t)?!sf.base.isNullOrUndefined(e.item.selectParent)&&e.item.selectParent.length>0?e.item.selectParent[0]:null:t,sf.base.isNullOrUndefined(t)||"A"!==t.tagName){var i=new G,s=i.getRange(this.parent.currentDocument);"#text"===s.endContainer.nodeName&&s.startContainer.textContent.length===s.endOffset+1&&" "===s.endContainer.textContent.charAt(s.endOffset)&&"A"===s.endContainer.nextSibling.nodeName&&(i.setSelectionText(this.parent.currentDocument,s.startContainer,s.endContainer,s.startOffset,s.endOffset+1),s=i.getRange(this.parent.currentDocument));var n=!!sf.base.isNullOrUndefined(e.item.text)||e.item.text.replace(/ /g,"").localeCompare(s.toString().replace(/\n/g," ").replace(/ /g,""))<0;if(e.event&&"keydown"===e.event.type&&(32===e.event.keyCode||13===e.event.keyCode)||"Paste"===e.item.action||s.collapsed||n){var o=this.createAchorNode(e);if(o.innerText=""===e.item.text?e.item.url:e.item.text,e.item.selection.restore(),ge.Insert(this.parent.currentDocument,o,this.parent.editableElement),!e.event||"keydown"!==e.event.type||32!==e.event.keyCode&&13!==e.event.keyCode){h="Paste"===e.item.action?o.childNodes[0].textContent.length:0;e.item.selection.setSelectionText(this.parent.currentDocument,o.childNodes[0],o.childNodes[0],h,o.childNodes[0].textContent.length)}else{var r=e.item.selection.range.startContainer;r.textContent=this.removeText(r.textContent,e.item.text)}}else this.createLinkNode(e)}else{var a=t,l="";if(sf.base.isNullOrUndefined(e.item.url)||a.setAttribute("href",e.item.url),sf.base.isNullOrUndefined(e.item.title)||a.setAttribute("title",e.item.title),sf.base.isNullOrUndefined(e.item.text)||""===e.item.text||(l=a.innerText,a.innerText=e.item.text),sf.base.isNullOrUndefined(e.item.target)?a.removeAttribute("target"):a.setAttribute("target",e.item.target),l===e.item.text)e.item.selection.setSelectionText(this.parent.currentDocument,a,a,1,1),e.item.selection.restore();else{var h="Paste"===e.item.action?a.childNodes[0].textContent.length:0;e.item.selection.setSelectionText(this.parent.currentDocument,a.childNodes[0],a.childNodes[0],h,a.childNodes[0].textContent.length)}}e.callBack&&e.callBack({requestType:"Links",editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e.prototype.createLinkNode=function(e){for(var t,i,s=new G,n=new ue,o=s.getRange(this.parent.currentDocument),r=this.getSelectionNodes(s.getNodeCollection(o)),a=s.save(o,this.parent.currentDocument),l=[],h=[],d=[],c=[],p=[],u=0;u<r.length;u++)r[u]=n.GetSpliceNode(o,r[u]),l[u]=r[u];for(var f=0;f<l.length;f++){var g=!0;for(t=l[f];!0===g;){if("A"===t.parentNode.nodeName){var m=t.parentNode;t.parentNode.parentNode.insertBefore(m.firstChild,m),t.parentNode.removeChild(m)}this.isBlockNode(t.parentNode)||0===l.length||0===f||f===l.length-1||3===o.startContainer.nodeType?(h[f]=t,g=!1):t=t.parentNode}}f=0;for(var v=0;f<h.length;f++)if(0===f&&(p[v]=h[f]),h.length>1&&f<h.length-1){if(h[f].parentElement===h[f+1].parentElement&&h[f]===h[f+1])continue;p[v+1]=h[f+1],v++}var b=0;c[b]=this.createAchorNode(e);for(f=0;f<p.length;f++)if(0===f&&(i=p[f].cloneNode(!0),c[f].appendChild(i)),f<p.length-1)if(p[f].parentNode===p[f+1].parentNode){var y=p[f+1].cloneNode(!0);c[b].appendChild(y)}else c[b+=1]=this.createAchorNode(e),i=p[f+1].cloneNode(!0),c[b].appendChild(i);this.parent.nodeSelection.setRange(document,a.range);f=0;for(var M=0,C=0;f<=p.length;f++)0===f&&(p[f].parentNode.insertBefore(c[M],p[f].nextSibling),1===this.parent.domNode.blockNodes().length&&this.parent.nodeSelection.setSelectionNode(this.parent.currentDocument,c[M]),d[C]=p[f],C++),f<p.length-1&&(p[f].parentNode===p[f+1].parentNode?(d[C]=p[f+1],C++):(M+=1,p[f+1].parentNode.insertBefore(c[M],p[f+1]),d[C]=p[f+1],C++));for(f=0;f<d.length;f++)d[f].parentNode&&d[f].parentNode.removeChild(d[f])},e.prototype.createAchorNode=function(e){var t=sf.base.createElement("a",{className:"e-rte-anchor",attrs:{href:e.item.url,title:sf.base.isNullOrUndefined(e.item.title)||""===e.item.title?e.item.url:e.item.title}});return sf.base.isNullOrUndefined(e.item.target)||t.setAttribute("target",e.item.target),t},e.prototype.getSelectionNodes=function(e){e=e.reverse();for(var t=0;t<e.length;t++)3===e[t].nodeType&&""!==e[t].textContent.trim()||"IMG"!==e[t].nodeName&&(e.splice(t,1),t--);return e.reverse()},e.prototype.isBlockNode=function(e){return!!e&&e.nodeType===Node.ELEMENT_NODE&&W.indexOf(e.tagName.toLowerCase())>=0},e.prototype.removeText=function(e,t){for(var i=e.split(" "),s=0;s<i.length;s++)i[s]===t&&(i.splice(s,1),s--);return i.join(" ")+" "},e.prototype.openLink=function(e){document.defaultView.open(e.item.url,e.item.target),this.callBack(e)},e.prototype.removeLink=function(e){var t=this.parent.domNode.blockNodes();if(t.length<2){this.parent.domNode.setMarker(e.item.selection);for(var i=sf.base.closest(e.item.selectParent[0],"a"),s=i||e.item.selectParent[0],n=s.parentNode,o=[];s.firstChild;null)o.push(n.insertBefore(s.firstChild,s));n.removeChild(s),o&&1===o.length&&(e.item.selection.startContainer=e.item.selection.getNodeArray(o[o.length-1],!0),e.item.selection.endContainer=e.item.selection.startContainer),e.item.selection=this.parent.domNode.saveMarker(e.item.selection)}else for(var r=0;r<t.length;r++)for(var a=t[r].querySelectorAll("a"),l=0;l<a.length;l++)document.getSelection().containsNode(a[l],!0)&&(a[l].outerHTML=a[l].innerHTML);e.item.selection.restore(),this.callBack(e)},e.prototype.callBack=function(e){e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),ve=function(){function e(e){this.alignments={JustifyLeft:"left",JustifyCenter:"center",JustifyRight:"right",JustifyFull:"justify"},this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("alignment-type",this.applyAlignment,this),this.parent.observer.on("keydown-handler",this.onKeyDown,this)},e.prototype.onKeyDown=function(e){switch(e.event.action){case"justify-center":this.applyAlignment({subCommand:"JustifyCenter",callBack:e.callBack}),e.event.preventDefault();break;case"justify-full":this.applyAlignment({subCommand:"JustifyFull",callBack:e.callBack}),e.event.preventDefault();break;case"justify-left":this.applyAlignment({subCommand:"JustifyLeft",callBack:e.callBack}),e.event.preventDefault();break;case"justify-right":this.applyAlignment({subCommand:"JustifyRight",callBack:e.callBack}),e.event.preventDefault()}},e.prototype.getTableNode=function(e){var t=e.startContainer.nodeType===Node.ELEMENT_NODE?e.startContainer:e.startContainer.parentNode;return[sf.base.closest(t,"td,th")]},e.prototype.applyAlignment=function(e){var t="Table"===e.value,i=this.parent.nodeSelection.getRange(this.parent.currentDocument),s=this.parent.nodeSelection.save(i,this.parent.currentDocument);if(t)sf.base.setStyleAttribute(this.getTableNode(i)[0],{"text-align":this.alignments[e.subCommand]});else{this.parent.domNode.setMarker(s);for(var n=this.parent.domNode.blockNodes(),o=0;o<n.length;o++){var r=n[o];sf.base.setStyleAttribute(r,{"text-align":this.alignments[e.subCommand]})}var a=this.parent.domNode.getImageTagInSelection();for(o=0;o<a.length;o++){var l=[];l.push(a[o]),this.parent.imgObj.imageCommand({item:{selectNode:l},subCommand:e.subCommand,value:e.subCommand,callBack:e.callBack,selector:e.selector})}this.parent.editableElement.focus(),s=this.parent.domNode.saveMarker(s),u()&&f(this.parent.editableElement,e.selector),s.restore()}e.callBack&&e.callBack({requestType:e.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:t?this.getTableNode(i):this.parent.domNode.blockNodes()})},e}(),be=function(){function e(e){this.indentValue=20,this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("indent-type",this.applyIndents,this),this.parent.observer.on("keydown-handler",this.onKeyDown,this)},e.prototype.onKeyDown=function(e){switch(e.event.action){case"indents":this.applyIndents({subCommand:"Indent",callBack:e.callBack}),e.event.preventDefault();break;case"outdents":this.applyIndents({subCommand:"Outdent",callBack:e.callBack}),e.event.preventDefault()}},e.prototype.applyIndents=function(e){var t=this.parent.editableElement,i=t.classList.contains("e-rtl"),s=this.parent.nodeSelection.getRange(this.parent.currentDocument),n=this.parent.nodeSelection.save(s,this.parent.currentDocument);this.parent.domNode.setMarker(n);for(var o=this.parent.domNode.blockNodes(),r=o.slice(),a=[],l=0;l<r.length;l++)"LI"!==r[l].tagName&&"LI"===r[l].parentNode.tagName?(o.splice(o.indexOf(r[l]),1),a.push(r[l].parentNode)):"LI"===r[l].tagName&&(o.splice(o.indexOf(r[l]),1),a.push(r[l]));a.length>0&&this.parent.observer.notify("keydown-handler",{event:{preventDefault:function(){},stopPropagation:function(){},shiftKey:"Indent"!==e.subCommand,which:9,action:"indent"},ignoreDefault:!0});for(l=0;l<o.length;l++){var h=o[l],d=i?h.style.marginRight:h.style.marginLeft,c=void 0;"Indent"===e.subCommand?(c=""===d?this.indentValue+"px":parseInt(d,null)+this.indentValue+"px",i?h.style.marginRight=c:h.style.marginLeft=c):(c=""===d||"0px"===d?"":parseInt(d,null)-this.indentValue+"px",i?h.style.marginRight=c:h.style.marginLeft=c)}t.focus(),u()&&f(t,e.selector),(n=this.parent.domNode.saveMarker(n)).restore(),e.callBack&&e.callBack({requestType:e.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.domNode.blockNodes()})},e}(),ye="e-img-caption",Me=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on(V,this.imageCommand,this)},e.prototype.imageCommand=function(e){switch(e.value.toString().toLowerCase()){case"image":case"replace":this.createImage(e);break;case"insertlink":this.insertImageLink(e);break;case"openimagelink":this.openImageLink(e);break;case"editimagelink":this.editImageLink(e);break;case"removeimagelink":this.removeImageLink(e);break;case"remove":this.removeImage(e);break;case"alttext":this.insertAltTextImage(e);break;case"dimension":this.imageDimension(e);break;case"caption":this.imageCaption(e);break;case"justifyleft":this.imageJustifyLeft(e);break;case"justifycenter":this.imageJustifyCenter(e);break;case"justifyright":this.imageJustifyRight(e);break;case"inline":this.imageInline(e);break;case"break":this.imageBreak(e)}},e.prototype.createImage=function(e){var t=this,i=!1;if(e.item.url=sf.base.isNullOrUndefined(e.item.url)||"undefined"===e.item.url?e.item.src:e.item.url,sf.base.isNullOrUndefined(e.item.selectParent)||"IMG"!==e.item.selectParent[0].tagName){var s=sf.base.createElement("img");this.setStyle(s,e),sf.base.isNullOrUndefined(e.item.selection)||e.item.selection.restore(),sf.base.isNullOrUndefined(e.selector)||"pasteCleanupModule"!==e.selector?ge.Insert(this.parent.currentDocument,s,this.parent.editableElement):e.callBack({requestType:"Images",editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:[s]})}else{var n=e.item.selectParent[0];this.setStyle(n,e),i=!0}if(e.callBack&&(sf.base.isNullOrUndefined(e.selector)||!sf.base.isNullOrUndefined(e.selector)&&"pasteCleanupModule"!==e.selector)){var o=this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)[0],r="Replace"===e.value||i?e.item.selectParent[0]:sf.base.Browser.isIE?o.previousSibling:o.previousElementSibling;r.addEventListener("load",(function(){"Replace"===e.value&&i||e.callBack({requestType:"Images",editorMode:"HTML",event:e.event,range:t.parent.nodeSelection.getRange(t.parent.currentDocument),elements:[r]})}))}},e.prototype.setStyle=function(e,t){sf.base.isNullOrUndefined(t.item.url)||e.setAttribute("src",t.item.url),e.setAttribute("class","e-rte-image"+(sf.base.isNullOrUndefined(t.item.cssClass)?"":" "+t.item.cssClass)),sf.base.isNullOrUndefined(t.item.altText)||e.setAttribute("alt",t.item.altText),sf.base.isNullOrUndefined(t.item.width)||sf.base.isNullOrUndefined(t.item.width.width)||e.setAttribute("width",this.calculateStyleValue(t.item.width.width)),sf.base.isNullOrUndefined(t.item.height)||sf.base.isNullOrUndefined(t.item.height.height)||e.setAttribute("height",this.calculateStyleValue(t.item.height.height)),sf.base.isNullOrUndefined(t.item.width)||sf.base.isNullOrUndefined(t.item.width.minWidth)||(e.style.minWidth=this.calculateStyleValue(t.item.width.minWidth)),sf.base.isNullOrUndefined(t.item.width)||sf.base.isNullOrUndefined(t.item.width.maxWidth)||(e.style.maxWidth=this.calculateStyleValue(t.item.width.maxWidth)),sf.base.isNullOrUndefined(t.item.height)||sf.base.isNullOrUndefined(t.item.height.minHeight)||(e.style.minHeight=this.calculateStyleValue(t.item.height.minHeight)),sf.base.isNullOrUndefined(t.item.height)||sf.base.isNullOrUndefined(t.item.height.maxHeight)||(e.style.maxHeight=this.calculateStyleValue(t.item.height.maxHeight))},e.prototype.calculateStyleValue=function(e){return"string"==typeof e&&(e.indexOf("px")||e.indexOf("%")||e.indexOf("auto"))?e:e+"px"},e.prototype.insertImageLink=function(e){var t=sf.base.createElement("a",{attrs:{href:e.item.url}});e.item.selectNode[0].parentElement.classList.contains("e-img-wrap")&&(e.item.selection.restore(),t.setAttribute("contenteditable","true")),t.appendChild(e.item.selectNode[0]),sf.base.isNullOrUndefined(e.item.target)||t.setAttribute("target",e.item.target),ge.Insert(this.parent.currentDocument,t,this.parent.editableElement),this.callBack(e)},e.prototype.openImageLink=function(e){document.defaultView.open(e.item.url,e.item.target),this.callBack(e)},e.prototype.removeImageLink=function(e){var t=e.item.selectParent[0];if(t.classList.contains("e-img-caption")){var i=sf.base.select(".e-img-wrap",t),s=sf.base.select(".e-img-inner",t),n=s.cloneNode(!0);sf.base.detach(sf.base.select("a",t)),sf.base.detach(s),i.appendChild(e.item.insertElement),i.appendChild(n)}else sf.base.detach(t),sf.base.Browser.isIE&&e.item.selection&&e.item.selection.restore(),ge.Insert(this.parent.currentDocument,e.item.insertElement,this.parent.editableElement);this.callBack(e)},e.prototype.editImageLink=function(e){e.item.selectNode[0].parentElement.href=e.item.url,sf.base.isNullOrUndefined(e.item.target)?e.item.selectNode[0].parentElement.removeAttribute("target"):e.item.selectNode[0].parentElement.target=e.item.target,this.callBack(e)},e.prototype.removeImage=function(e){sf.base.closest(e.item.selectNode[0],"a")&&("A"!==e.item.selectNode[0].parentElement.nodeName||sf.base.isNullOrUndefined(e.item.selectNode[0].parentElement.innerText))?sf.base.detach(sf.base.closest(e.item.selectNode[0],"a")):sf.base.isNullOrUndefined(sf.base.closest(e.item.selectNode[0],"."+ye))?sf.base.detach(e.item.selectNode[0]):sf.base.detach(sf.base.closest(e.item.selectNode[0],"."+ye)),this.callBack(e)},e.prototype.insertAltTextImage=function(e){e.item.selectNode[0].setAttribute("alt",e.item.altText),this.callBack(e)},e.prototype.imageDimension=function(e){var t=e.item.selectNode[0];t.style.height="",t.style.width="","auto"!==e.item.width?t.style.width=sf.base.formatUnit(e.item.width):t.removeAttribute("width"),"auto"!==e.item.height?t.style.height=sf.base.formatUnit(e.item.height):t.removeAttribute("height"),this.callBack(e)},e.prototype.imageCaption=function(e){ge.Insert(this.parent.currentDocument,e.item.insertElement,this.parent.editableElement),this.callBack(e)},e.prototype.imageJustifyLeft=function(e){var t=e.item.selectNode[0];sf.base.isNullOrUndefined(t)||(t.removeAttribute("class"),sf.base.addClass([t],"e-rte-image"),sf.base.isNullOrUndefined(sf.base.closest(t,"."+ye))||(sf.base.removeClass([sf.base.closest(t,"."+ye)],"e-imgright"),sf.base.addClass([sf.base.closest(t,"."+ye)],"e-imgleft")),"A"===t.parentElement.nodeName?(sf.base.removeClass([t.parentElement],"e-imgright"),sf.base.addClass([t.parentElement],"e-imgleft"),sf.base.addClass([t],"e-imgleft")):sf.base.addClass([t],"e-imgleft"),this.callBack(e))},e.prototype.imageJustifyCenter=function(e){var t=e.item.selectNode[0];sf.base.isNullOrUndefined(t)||(t.removeAttribute("class"),sf.base.addClass([t],"e-rte-image"),sf.base.isNullOrUndefined(sf.base.closest(t,"."+ye))||(sf.base.removeClass([sf.base.closest(t,"."+ye)],"e-imgleft"),sf.base.removeClass([sf.base.closest(t,"."+ye)],"e-imgright"),sf.base.addClass([sf.base.closest(t,"."+ye)],"e-imgcenter")),"A"===t.parentElement.nodeName?(sf.base.removeClass([t.parentElement],"e-imgleft"),sf.base.removeClass([t.parentElement],"e-imgright"),sf.base.addClass([t.parentElement],"e-imgcenter"),sf.base.addClass([t],"e-imgcenter")):sf.base.addClass([t],"e-imgcenter"),this.callBack(e))},e.prototype.imageJustifyRight=function(e){var t=e.item.selectNode[0];sf.base.isNullOrUndefined(t)||(t.removeAttribute("class"),sf.base.addClass([t],"e-rte-image"),sf.base.isNullOrUndefined(sf.base.closest(t,"."+ye))||(sf.base.removeClass([sf.base.closest(t,"."+ye)],"e-imgleft"),sf.base.addClass([sf.base.closest(t,"."+ye)],"e-imgright")),"A"===t.parentElement.nodeName?(sf.base.removeClass([t.parentElement],"e-imgleft"),sf.base.addClass([t.parentElement],"e-imgright"),sf.base.addClass([t],"e-imgright")):sf.base.addClass([t],"e-imgright"),this.callBack(e))},e.prototype.imageInline=function(e){var t=e.item.selectNode[0];t.removeAttribute("class"),sf.base.addClass([t],"e-rte-image"),sf.base.addClass([t],"e-imginline"),sf.base.isNullOrUndefined(sf.base.closest(t,"."+ye))||(sf.base.removeClass([sf.base.closest(t,"."+ye)],"e-imgbreak"),sf.base.removeClass([sf.base.closest(t,"."+ye)],"e-imgcenter"),sf.base.removeClass([sf.base.closest(t,"."+ye)],"e-imgleft"),sf.base.removeClass([sf.base.closest(t,"."+ye)],"e-imgright"),sf.base.addClass([sf.base.closest(t,"."+ye)],"e-caption-inline")),this.callBack(e)},e.prototype.imageBreak=function(e){var t=e.item.selectNode[0];t.removeAttribute("class"),sf.base.addClass([t],"e-imgbreak"),sf.base.addClass([t],"e-rte-image"),sf.base.isNullOrUndefined(sf.base.closest(t,"."+ye))||(sf.base.removeClass([sf.base.closest(t,"."+ye)],"e-caption-inline"),sf.base.removeClass([sf.base.closest(t,"."+ye)],"e-imgcenter"),sf.base.removeClass([sf.base.closest(t,"."+ye)],"e-imgleft"),sf.base.removeClass([sf.base.closest(t,"."+ye)],"e-imgright"),sf.base.addClass([sf.base.closest(t,"."+ye)],"e-imgbreak")),this.callBack(e)},e.prototype.callBack=function(e){e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),Ce=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("INSERT-AUDIO",this.audioCommand,this)},e.prototype.audioCommand=function(e){var t,i=e.value.toString().toLowerCase();switch("inline"!==i&&"break"!==i&&"audioremove"!==i||(t=e.item.selectNode[0]),i){case"audio":case"audioreplace":this.createAudio(e);break;case"inline":t.removeAttribute("class"),t.closest(".e-audio-wrap").style.display="inline-block",sf.base.addClass([t],["e-rte-audio","e-audio-inline","e-audio-focus"]),this.callBack(e);break;case"break":t.removeAttribute("class"),t.closest(".e-audio-wrap").style.display="block",sf.base.addClass([t],["e-audio-break","e-rte-audio","e-audio-focus"]),this.callBack(e);break;case"audioremove":sf.base.detach(t),this.callBack(e)}},e.prototype.createAudio=function(e){var t,i=this,s=!1;if(!sf.base.isNullOrUndefined(e.item.selectParent)&&e.item.selectParent[0].classList&&(e.item.selectParent[0].classList.contains("e-clickelem")||e.item.selectParent[0].classList.contains("e-audio-wrap"))){var n=e.item.selectParent[0].querySelector("source");this.setStyle(n,e),s=!0}else{t=sf.base.createElement("span",{className:"e-audio-wrap",attrs:{contentEditable:"false",title:e.item.fileName}});var o=sf.base.createElement("audio",{className:"e-rte-audio e-audio-inline",attrs:{controls:""}}),r=sf.base.createElement("source"),a=sf.base.createElement("span",{className:"e-clickelem"});if(this.setStyle(r,e),o.appendChild(r),a.appendChild(o),t.appendChild(a),sf.base.isNullOrUndefined(e.item.selection)||e.item.selection.restore(),ge.Insert(this.parent.currentDocument,t,this.parent.editableElement),null===t.nextElementSibling){var l=sf.base.createElement("br");t.parentNode.insertBefore(l,t.nextSibling)}}if(e.callBack&&(sf.base.isNullOrUndefined(e.selector)||!sf.base.isNullOrUndefined(e.selector)&&"pasteCleanupModule"!==e.selector)){var h=this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)[0],d="AudioReplace"===e.value||s?e.item.selectParent[0].querySelector("audio"):sf.base.Browser.isIE?h:h.querySelector("audio");d.addEventListener("loadeddata",(function(){"AudioReplace"===e.value&&s||e.callBack({requestType:"Audios",editorMode:"HTML",event:e.event,range:i.parent.nodeSelection.getRange(i.parent.currentDocument),elements:[d]})})),s&&d.load()}},e.prototype.setStyle=function(e,t){sf.base.isNullOrUndefined(t.item.url)||e.setAttribute("src",t.item.url),e.type=t.item.fileName&&t.item.fileName.split(".").length>0?"audio/"+t.item.fileName.split(".")[t.item.fileName.split(".").length-1]:t.item.url&&t.item.url.split(".").length>0?"audio/"+t.item.url.split(".")[t.item.url.split(".").length-1]:""},e.prototype.callBack=function(e){e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),we=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("INSERT-VIDEO",this.videoCommand,this)},e.prototype.videoCommand=function(e){var t,i,s,n=e.value.toString().toLowerCase();switch("video"!==n&&"videoreplace"!==n&&(i=(t=e.item.selectNode[0]).closest(".e-embed-video-wrap"),s=t.closest(".e-video-clickelem")),n){case"video":case"videoreplace":this.createVideo(e);break;case"videodimension":this.videoDimension(e);break;case"inline":t.removeAttribute("class"),i&&(i.style.display="inline-block"),s&&(t.parentElement.style.cssFloat=""),sf.base.addClass([t],["e-rte-video","e-video-inline","e-video-focus"]),this.callBack(e);break;case"break":t.removeAttribute("class"),i&&(i.style.display="block"),s&&(t.parentElement.style.cssFloat=""),sf.base.addClass([t],["e-video-break","e-rte-video","e-video-focus"]),this.callBack(e);break;case"justifyleft":t.removeAttribute("class"),i&&(i.style.display="block"),s&&(t.parentElement.style.cssFloat="left"),sf.base.addClass([t],["e-rte-video","e-video-left"]),this.callBack(e);break;case"justifycenter":t.removeAttribute("class"),i&&(i.style.display="block"),s&&(t.parentElement.style.cssFloat=""),sf.base.addClass([t],["e-rte-video","e-video-center"]),this.callBack(e);break;case"justifyright":t.removeAttribute("class"),i&&(i.style.display="block"),s&&(t.parentElement.style.cssFloat="right"),sf.base.addClass([t],["e-rte-video","e-video-right"]),this.callBack(e);break;case"videoremove":sf.base.detach(t.parentElement),this.callBack(e)}},e.prototype.createVideo=function(e){var t,i,s,n=this,o=!1;if("VideoReplace"!==e.value||sf.base.isNullOrUndefined(e.item.selectParent)||"VIDEO"!==e.item.selectParent[0].tagName)if("VideoReplace"===e.value&&!sf.base.isNullOrUndefined(e.item.selectParent)&&e.item.selectParent[0].classList&&e.item.selectParent[0].classList.contains("e-video-clickelem"))e.item.selectParent[0].innerHTML=e.item.fileName,this.setStyle(e.item.selectParent[0].firstElementChild,e,e.item.selectParent[0].firstElementChild);else{if(e.item.isEmbedUrl){t=sf.base.createElement("span",{className:"e-embed-video-wrap",attrs:{contentEditable:"false"}});var r=sf.base.createElement("span",{className:"e-video-clickelem"}),a=sf.base.createElement("template");a.innerHTML=e.item.fileName,r.appendChild(a.content),i=s=r.firstElementChild,this.setStyle(s,e,i),t.appendChild(r)}else t=sf.base.createElement("span",{className:"e-video-wrap",attrs:{contentEditable:"false",title:e.item.fileName}}),i=sf.base.createElement("video",{className:"e-rte-video e-video-inline",attrs:{controls:""}}),s=sf.base.createElement("source"),this.setStyle(s,e,i),i.appendChild(s),t.appendChild(i);if(sf.base.isNullOrUndefined(e.item.selection)||e.item.selection.restore(),ge.Insert(this.parent.currentDocument,t,this.parent.editableElement),null===t.nextElementSibling){var l=sf.base.createElement("br");t.parentNode.insertBefore(l,t.nextSibling)}}else{var h=e.item.selectParent[0].querySelector("source");this.setStyle(h,e,h),o=!0}if(e.callBack&&(sf.base.isNullOrUndefined(e.selector)||!sf.base.isNullOrUndefined(e.selector)&&"pasteCleanupModule"!==e.selector)){var d=this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)[0],c="VideoReplace"===e.value||o?e.item.isEmbedUrl?e.item.selectParent[0].querySelector("iframe"):e.item.selectParent[0]:sf.base.Browser.isIE?d:e.item.isEmbedUrl?d.querySelector("iframe"):d.lastElementChild;c.addEventListener("IFRAME"!==c.tagName?"loadeddata":"load",(function(){"VideoReplace"===e.value&&o||(e.item.isEmbedUrl&&c&&c.classList.add("e-rte-embed-url"),e.callBack({requestType:"Videos",editorMode:"HTML",event:e.event,range:n.parent.nodeSelection.getRange(n.parent.currentDocument),elements:[c]}))})),o&&c.load(),-1!==sf.base.Browser.userAgent.indexOf("Firefox")&&(i.addEventListener("play",(function(){n.editAreaVideoClick(e)})),i.addEventListener("pause",(function(){n.editAreaVideoClick(e)})))}},e.prototype.editAreaVideoClick=function(e){e.callBack({requestType:"VideosPlayPause",editorMode:"HTML",event:e.event})},e.prototype.setStyle=function(e,t,i){""===t.item.url||sf.base.isNullOrUndefined(t.item.url)||e.setAttribute("src",t.item.url),t.item.isEmbedUrl||(e.type=t.item.fileName&&t.item.fileName.split(".").length>0?"video/"+t.item.fileName.split(".")[t.item.fileName.split(".").length-1]:t.item.url&&t.item.url.split(".").length>0?"video/"+t.item.url.split(".")[t.item.url.split(".").length-1]:""),sf.base.isNullOrUndefined(t.item.width)||sf.base.isNullOrUndefined(t.item.width.width)||i.setAttribute("width",sf.base.formatUnit(t.item.width.width)),sf.base.isNullOrUndefined(t.item.height)||sf.base.isNullOrUndefined(t.item.height.height)||i.setAttribute("height",sf.base.formatUnit(t.item.height.height)),sf.base.isNullOrUndefined(t.item.width)||sf.base.isNullOrUndefined(t.item.width.minWidth)||(i.style.minWidth=sf.base.formatUnit(t.item.width.minWidth)),sf.base.isNullOrUndefined(t.item.width)||sf.base.isNullOrUndefined(t.item.width.maxWidth)||(i.style.maxWidth=sf.base.formatUnit(t.item.width.maxWidth)),sf.base.isNullOrUndefined(t.item.height)||sf.base.isNullOrUndefined(t.item.height.minHeight)||(i.style.minHeight=sf.base.formatUnit(t.item.height.minHeight)),sf.base.isNullOrUndefined(t.item.height)||sf.base.isNullOrUndefined(t.item.height.maxHeight)||(i.style.maxHeight=sf.base.formatUnit(t.item.height.maxHeight))},e.prototype.videoDimension=function(e){var t=e.item.selectNode[0].classList.contains("e-video-clickelem")?e.item.selectNode[0].querySelector("iframe"):e.item.selectNode[0];t.style.height="",t.style.width="","auto"!==e.item.width?t.style.width=sf.base.formatUnit(e.item.width):t.removeAttribute("width"),"auto"!==e.item.height?t.style.height=sf.base.formatUnit(e.item.height):t.removeAttribute("height"),this.callBack(e)},e.prototype.callBack=function(e){e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),Se=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("INSERT-TABLE",this.createTable,this),this.parent.observer.on("INSERT-ROW",this.insertRow,this),this.parent.observer.on("INSERT-COLUMN",this.insertColumn,this),this.parent.observer.on("DELETE-ROW",this.deleteRow,this),this.parent.observer.on("DELETE-COLUMN",this.deleteColumn,this),this.parent.observer.on("REMOVE-TABLE",this.removeTable,this),this.parent.observer.on("TABLE-HEADER",this.tableHeader,this),this.parent.observer.on("TABLE_VERTICAL_ALIGN",this.tableVerticalAlign,this),this.parent.observer.on("TABLE_MERGE",this.cellMerge,this),this.parent.observer.on("TABLE_HORIZONTAL_SPLIT",this.HorizontalSplit,this),this.parent.observer.on("TABLE_VERTICAL_SPLIT",this.VerticalSplit,this),this.parent.observer.on("TABLE_MOVE",this.tableMove,this)},e.prototype.createTable=function(e){var t=sf.base.createElement("table",{className:"e-rte-table"}),i=sf.base.createElement("tbody");sf.base.isNullOrUndefined(e.item.width.width)||(t.style.width=this.calculateStyleValue(e.item.width.width)),sf.base.isNullOrUndefined(e.item.width.minWidth)||(t.style.minWidth=this.calculateStyleValue(e.item.width.minWidth)),sf.base.isNullOrUndefined(e.item.width.maxWidth)||(t.style.maxWidth=this.calculateStyleValue(e.item.width.maxWidth));for(var s=parseInt(e.item.width.width,10)>100?100/e.item.columns:parseInt(e.item.width.width,10)/e.item.columns,n=0;n<e.item.rows;n++){for(var o=sf.base.createElement("tr"),r=0;r<e.item.columns;r++){var a=sf.base.createElement("td");a.appendChild(sf.base.createElement("br")),a.style.width=s+"%",o.appendChild(a)}i.appendChild(o)}if(t.appendChild(i),e.item.selection.restore(),ge.Insert(this.parent.currentDocument,t,this.parent.editableElement),this.removeEmptyNode(),e.item.selection.setSelectionText(this.parent.currentDocument,t.querySelector("td"),t.querySelector("td"),0,0),null===t.nextElementSibling){var l=void 0;"DIV"===e.enterAction?(l=sf.base.createElement("div")).appendChild(sf.base.createElement("br")):"BR"===e.enterAction?l=sf.base.createElement("br"):(l=sf.base.createElement("p")).appendChild(sf.base.createElement("br")),this.insertAfter(l,t)}return t.querySelector("td").classList.add("e-cell-select"),e.callBack&&e.callBack({requestType:"Table",editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:[t]}),t},e.prototype.calculateStyleValue=function(e){return"string"==typeof e&&(e.indexOf("px")||e.indexOf("%")||e.indexOf("auto"))?e:e+"px"},e.prototype.removeEmptyNode=function(){for(var e=this.parent.editableElement.querySelectorAll("ul:empty, ol:empty"),t=0;t<e.length;t++)sf.base.detach(e[t]);var i=this.parent.editableElement.querySelectorAll("li *:empty:not(img)");for(t=0;t<i.length;t++)sf.base.detach(i[t]),i.length===t+1&&(i=this.parent.editableElement.querySelectorAll("li *:empty:not(img)"),t=-1);var s=this.parent.editableElement.querySelectorAll("li:empty");for(t=0;t<s.length;t++)sf.base.detach(s[t])},e.prototype.insertAfter=function(e,t){t.parentNode.insertBefore(e,t.nextSibling)},e.prototype.getSelectedCellMinMaxIndex=function(e){for(var t=this.curTable.querySelectorAll(".e-cell-select"),i=0,s=e.length,n=0,o=e[0].length,r=0;i<t.length;i++){var a=this.getCorrespondingIndex(t[i],e),l=this.FindIndex(a[0],a[1],e);s=Math.min(a[0],s),n=Math.max(l[0],n),o=Math.min(a[1],o),r=Math.max(l[1],r)}return{startRow:s,endRow:n,startColumn:o,endColumn:r}},e.prototype.insertRow=function(e){var t="InsertRowBefore"!==e.item.subCommand,i=e.item.selection.range.startContainer;if("TH"!==i.nodeName&&"TD"!==i.nodeName&&(i=sf.base.closest(i.parentElement,"td,th")),"th"!==i.nodeName.toLowerCase()||"InsertRowBefore"!==e.item.subCommand){if(this.curTable=sf.base.closest(this.parent.nodeSelection.range.startContainer.parentElement,"table"),0===this.curTable.querySelectorAll(".e-cell-select").length){var s=this.curTable.rows[this.curTable.rows.length-1],n=s.cloneNode(!0);n.removeAttribute("rowspan"),this.insertAfter(n,s)}else{for(var o=this.getCorrespondingColumns(),r=this.getSelectedCellMinMaxIndex(o),a=t?r.endRow:r.startRow,l=sf.base.createElement("tr"),h=this.curTable.querySelectorAll("th.e-cell-select").length>0,d=0;d<o[a].length;d++)if(t&&a<o.length-1&&o[a][d]===o[a+1][d]||!t&&0<a&&o[a][d]===o[a-1][d])(0===d||0<d&&o[a][d]!==o[a][d-1])&&o[a][d].setAttribute("rowspan",(parseInt(o[a][d].getAttribute("rowspan"),10)+1).toString());else{var c=sf.base.createElement("td");c.appendChild(sf.base.createElement("br")),l.appendChild(c),c.setAttribute("style",o[h&&t&&o[a+1]?a+1:a][d].getAttribute("style"))}var p=void 0;p=h&&t?this.curTable.querySelector("tbody").childNodes[0]:this.curTable.rows[a],"InsertRowBefore"===e.item.subCommand||h?p.parentElement.insertBefore(l,p):this.insertAfter(l,p)}e.item.selection.setSelectionText(this.parent.currentDocument,e.item.selection.range.startContainer,e.item.selection.range.startContainer,0,0),e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}},e.prototype.insertColumn=function(e){var t=e.item.selection.range.startContainer;"TH"!==t.nodeName&&"TD"!==t.nodeName&&(t=sf.base.closest(t.parentElement,"td,th"));for(var i,s=sf.base.closest(t,"tr"),n=sf.base.closest(s,"table").rows,o=Array.prototype.slice.call(s.querySelectorAll(":scope > td, :scope > th")).indexOf(t),r=parseInt(e.item.width,10)/s.querySelectorAll(":scope > td, :scope > th").length,a=parseInt(e.item.width,10)/(s.querySelectorAll(":scope > td, :scope > th").length+1),l=sf.base.closest(s,"table"),h=sf.base.closest(s,"table").querySelectorAll("th,td"),d=0;d<h.length;d++)h[d].dataset.oldWidth=h[d].offsetWidth/l.offsetWidth*100+"%";for(d=0;d<n.length;d++){var c=(i=n[d].querySelectorAll(":scope > td, :scope > th")[o]).cloneNode(!0);c.innerHTML="",c.appendChild(sf.base.createElement("br")),c.removeAttribute("class"),c.removeAttribute("colspan"),c.removeAttribute("rowspan"),"InsertColumnLeft"===e.item.subCommand?i.parentElement.insertBefore(c,i):this.insertAfter(c,i),c.style.width=a.toFixed(4)+"%",delete c.dataset.oldWidth}for(d=0;d<h.length;d++)h[d].style.width=(Number(h[d].dataset.oldWidth.split("%")[0])*a/r).toFixed(4)+"%",delete h[d].dataset.oldWidth;e.item.selection.setSelectionText(this.parent.currentDocument,t,t,0,0),e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e.prototype.deleteColumn=function(e){var t=e.item.selection.range.startContainer;3===t.nodeType&&(t=sf.base.closest(t.parentElement,"td,th"));var i=sf.base.closest(t,"TH"===t.tagName?"thead":"tbody"),s=i&&Array.prototype.indexOf.call(i.childNodes,t.parentNode);if(this.curTable=sf.base.closest(t,"table"),1===sf.base.closest(t,"tr").querySelectorAll("th,td").length)e.item.selection.restore(),sf.base.detach(sf.base.closest(t.parentElement,"table"));else{for(var n=void 0,o=this.getCorrespondingColumns(),r=this.getSelectedCellMinMaxIndex(o),a=r.startColumn,l=r.endColumn,h=0;h<o.length;h++)for(var d=o[h],c=0;c<d.length;c++){var p=d[c],u=this.getCorrespondingIndex(p,o),f=parseInt(p.getAttribute("colspan"),10)||1;u[1]+(f-1)>=a&&u[1]<=l&&(f>1?p.setAttribute("colspan",(f-1).toString()):(sf.base.detach(p),n=c,sf.base.Browser.isIE&&(e.item.selection.setSelectionText(this.parent.currentDocument,this.curTable.querySelector("td"),this.curTable.querySelector("td"),0,0),this.curTable.querySelector("td, th").classList.add("e-cell-select"))))}if(n>-1){var g=i.children[s],m=g&&g.children[n<=g.children.length-1?n:n-1];m&&(e.item.selection.setSelectionText(this.parent.currentDocument,m,m,0,0),m.classList.add("e-cell-select"))}}if(e.callBack){var v=this.parent.nodeSelection.getRange(this.parent.currentDocument).startContainer;if("TD"!==v.nodeName){var b=this.parent.nodeSelection.getRange(this.parent.currentDocument).startOffset,y=v.children[b];y&&this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,y,0)}e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}},e.prototype.deleteRow=function(e){var t=e.item.selection.range.startContainer;3===t.nodeType&&(t=sf.base.closest(t.parentElement,"td,th"));var i,s=Array.prototype.indexOf.call(t.parentNode.childNodes,t);this.curTable=sf.base.closest(t,"table");var n,o,r=this.getCorrespondingColumns(),a=this.getSelectedCellMinMaxIndex(r);if(1===this.curTable.rows.length)e.item.selection.restore(),sf.base.detach(sf.base.closest(t.parentElement,"table"));else for(n=a.endRow;n>=a.startRow;n--){for(i=this.curTable.rows[n],o=0;o<r[n].length;o++){if((0===o||r[n][o]!==r[n][o-1])&&1<parseInt(r[n][o].getAttribute("rowspan"),10)){var l=parseInt(r[n][o].getAttribute("rowspan"),10)-1;if(1===l){r[n][o].removeAttribute("rowspan");var h=r[n][o].cloneNode(!0);(r=this.getCorrespondingColumns())[l][o]&&r[l][o].parentElement&&r[l][o].parentElement.insertBefore(h,r[l][o])}else r[n][o].setAttribute("rowspan",l.toString())}if(n<r.length-1&&r[n][o]===r[n+1][o]&&(0===n||r[n][o]!==r[n-1][o])){var d=r[n][o],c=void 0;for(c=o;0<c&&r[n][c]===r[n][c-1];c--)0===c?this.curTable.rows[n+1].prepend(d):r[n+1][c-1].insertAdjacentElement("afterend",d)}}var p=i.rowIndex;this.curTable.deleteRow(p);var u=sf.base.isNullOrUndefined(this.curTable.rows[p])?this.curTable.querySelectorAll("tbody tr")[p-1]:this.curTable.querySelectorAll("tbody tr")[p],f=u&&u.querySelectorAll("td")[s];f?(e.item.selection.setSelectionText(this.parent.currentDocument,f,f,0,0),f.classList.add("e-cell-select")):(e.item.selection.setSelectionText(this.parent.currentDocument,this.curTable.querySelector("td"),this.curTable.querySelector("td"),0,0),this.curTable.querySelector("td, th").classList.add("e-cell-select"))}e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e.prototype.removeTable=function(e){var t=e.item.selection.range.startContainer;t=3===t.nodeType?t.parentNode:t;var i=sf.base.closest(t.parentElement,"table");i&&(e.item.selection.restore(),sf.base.detach(i)),e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e.prototype.tableHeader=function(e){var t=!1,i=e.item.selection.range.startContainer;i=3===i.nodeType?i.parentNode:i;var s=sf.base.closest(i.parentElement,"table");if([].slice.call(s.childNodes).forEach((function(e){"THEAD"===e.nodeName&&(t=!0)})),s&&!t){for(var n=s.querySelector("tr").childElementCount,o=0,r=0;r<n;r++)o+=parseInt(s.querySelector("tr").children[r].getAttribute("colspan"),10)||1;for(var a=s.createTHead().insertRow(0),l=0;l<o;l++){var h=sf.base.createElement("th");h.appendChild(sf.base.createElement("br")),a.appendChild(h)}}else s.deleteTHead();e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e.prototype.tableVerticalAlign=function(e){"AlignTop"===e.item.subCommand?e.item.tableCell.style.verticalAlign="top":"AlignMiddle"===e.item.subCommand?e.item.tableCell.style.verticalAlign="middle":e.item.tableCell.style.verticalAlign="bottom",e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e.prototype.cellMerge=function(e){sf.base.isNullOrUndefined(this.curTable)&&(this.curTable=sf.base.closest(this.parent.nodeSelection.range.startContainer.parentElement,"table"));var t=this.curTable.querySelectorAll(".e-cell-select");if(!(t.length<2)){this.mergeCellContent();var i=this.getSelectedMinMaxIndexes(this.getCorrespondingColumns()),s=t[0],n=s.parentElement.querySelectorAll(".e-cell-select");i.startColumn<i.endColumn&&s.setAttribute("colspan",(i.endColumn-i.startColumn+1).toString()),i.startRow<i.endRow&&s.setAttribute("rowspan",(i.endRow-i.startRow+1).toString());for(var o=0,r=n.length-1;r>=0;r--)o+=parseFloat(n[r].style.width);s.style.width=o+"%";for(var a=1;a<=t.length-1;a++)sf.base.detach(t[a]);for(a=0;a<this.curTable.rows.length;a++)""===this.curTable.rows[a].innerHTML&&sf.base.detach(this.curTable.rows[a]);this.updateRowSpanStyle(i.startRow,i.endRow,this.getCorrespondingColumns()),this.updateColSpanStyle(i.startColumn,i.endColumn,this.getCorrespondingColumns()),e.item.selection.setSelectionText(this.parent.currentDocument,e.item.selection.range.startContainer,e.item.selection.range.startContainer,0,0),this.parent.nodeSelection.range&&this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,this.parent.nodeSelection.range.endContainer,0),e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}},e.prototype.updateColSpanStyle=function(e,t,i){var s,n,o,r,a=0,l=0,h=i;if(e<(t=Math.min(t,h[0].length-1))){for(;n<=t;n++)if(!(e<n&&h[0][n]===h[0][n-1])&&1<(a=Math.min(parseInt(h[0][n].getAttribute("colspan"),10)||1,t-e+1))&&h[0][n]===h[0][n+1])for(l=a-1,s=1;s<h.length;s++){if(h[s][n]!==h[s-1][n])for(o=n;o<n+a;o++)if(1<(r=parseInt(h[s][o].getAttribute("colspan"),10)||1)&&h[s][o]===h[s][o+1])o+=l=Math.min(l,r-1);else if(!(l=Math.max(0,l-1)))break;if(!l)break}l&&this.updateCellAttribute(h,l,"colspan",0,h.length-1,e,t)}},e.prototype.updateRowSpanStyle=function(e,t,i){var s,n,o,r,a=0,l=0,h=i;if(e<(t=Math.min(t,h.length-1))){for(s=e;s<=t;s++)if(!(e<s&&h[s][0]===h[s-1][0])&&h[s][0]&&1<(a=Math.min(parseInt(h[s][0].getAttribute("rowspan"),10)||1,t-e+1))&&h[s][0]===h[s+1][0])for(l=a-1,n=1;n<h[0].length;n++)if(h[s][n]!==h[s][n-1]){for(o=s;o<s+a;o++)if(1<(r=parseInt(h[o][n].getAttribute("rowspan"),10)||1)&&h[o][n]===h[o+1][n])o+=l=Math.min(l,r-1);else if(!(l=Math.max(0,l-1)))break;if(!l)break}l&&this.updateCellAttribute(h,l,"rowspan",e,t,0,h[0].length-1)}},e.prototype.updateCellAttribute=function(e,t,i,s,n,o,r){var a,l,h;for(a=s;a<=n;a++)for(l=o;l<=r;l++)s<a&&e[a][l]===e[a-1][l]||o<l&&e[a][l]===e[a][l-1]||1<(h=parseInt(e[a][l].getAttribute(i),10)||1)&&(1<h-t?e[a][l].setAttribute(i,(h-t).toString()):e[a][l].removeAttribute(i))},e.prototype.mergeCellContent=function(){for(var e=this.curTable.querySelectorAll(".e-cell-select"),t="<br>"===e[0].innerHTML?"":e[0].innerHTML,i=1;i<e.length;i++)"<br>"!==e[i].innerHTML&&(t=t?t+"<br>"+e[i].innerHTML:t+e[i].innerHTML);e[0].innerHTML=t},e.prototype.getSelectedMinMaxIndexes=function(e){var t=this.curTable.querySelectorAll(".e-cell-select");if(0<t.length){for(var i=e.length,s=0,n=e[0].length,o=0,r=0;r<t.length;r++){var a=this.getCorrespondingIndex(t[r],e),l=this.FindIndex(a[0],a[1],e);i=Math.min(a[0],i),s=Math.max(l[0],s),n=Math.min(a[1],n),o=Math.max(l[1],o)}return{startRow:i,endRow:s,startColumn:n,endColumn:o}}return null},e.prototype.HorizontalSplit=function(e){var t=e.item.selection.range.startContainer;if(this.curTable=sf.base.closest(t.parentElement,"table"),!(this.curTable.querySelectorAll(".e-cell-select").length>1)){this.activeCell=this.curTable.querySelector(".e-cell-select");var i=this.activeCell.cloneNode(!0);i.removeAttribute("class"),i.innerHTML="</br>";var s=this.getCorrespondingIndex(this.activeCell,this.getCorrespondingColumns()),n=this.getCorrespondingColumns(),o=this.activeCell.getAttribute("rowspan")?parseInt(this.activeCell.getAttribute("rowspan"),10):1;if(o>1){var r=Math.ceil(o/2);1<r?this.activeCell.setAttribute("rowspan",r.toString()):this.activeCell.removeAttribute("rowspan"),1<o-r?i.setAttribute("rowspan",(o-r).toString()):i.removeAttribute("rowspan");var a,l=void 0;for(a=s[0]+Math.ceil(o/2),l=0===s[1]?s[1]:s[1]-1;0<=l&&(n[a][l]===n[a][l-1]||0<a&&n[a][l]===n[a-1][l]);)l--;-1===l?this.curTable.rows[a].firstChild?this.curTable.rows[a].prepend(i):this.curTable.appendChild(i):n[a][l].insertAdjacentElement("afterend",i)}else{var h=sf.base.createElement("tr");h.appendChild(i);for(var d=n[s[0]],c=0;c<=d.length-1;c++)d[c]!==d[c-1]&&d[c]!==this.activeCell&&d[c].setAttribute("rowspan",((parseInt(d[c].getAttribute("rowspan"),10)?parseInt(d[c].getAttribute("rowspan"),10):1)+1).toString());this.activeCell.parentNode.insertAdjacentElement("afterend",h)}e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}},e.prototype.VerticalSplit=function(e){var t=e.item.selection.range.startContainer;if(this.curTable=sf.base.closest(t.parentElement,"table"),!(this.curTable.querySelectorAll(".e-cell-select").length>1)){this.activeCell=this.curTable.querySelector(".e-cell-select");var i=this.curTable.rows,s=this.activeCell.cloneNode(!0);s.removeAttribute("class"),s.innerHTML="</br>";var n=parseFloat(this.activeCell.style.width)/2;if("TH"===this.activeCell.tagName&&isNaN(n)){for(var o=this.curTable.querySelector("tr").childElementCount,r=0;r<o;r++)parseInt(this.curTable.querySelector("tr").children[r].getAttribute("colspan"),10)||1;n=parseFloat((this.activeCell.offsetWidth/2/this.curTable.offsetWidth*100).toFixed(1))}var a=this.getCorrespondingIndex(this.activeCell,this.getCorrespondingColumns()),l=this.getCorrespondingColumns(),h=parseInt(this.activeCell.getAttribute("colspan"),10);if(h>1)1<Math.ceil(h/2)?this.activeCell.setAttribute("colspan",(h/2).toString()):this.activeCell.removeAttribute("colspan"),1<h-h/2?s.setAttribute("colspan",(h-h/2).toString()):s.removeAttribute("colspan");else for(r=0;r<=i.length-1;r++)if(0===r||l[r][a[1]]!==l[r-1][a[1]]){var d=l[r][a[1]];d!==this.activeCell&&d.setAttribute("colspan",((parseInt(d.getAttribute("colspan"),10)?parseInt(d.getAttribute("colspan"),10):1)+1).toString())}this.activeCell.style.width=n+"%",s.style.width=n+"%",this.activeCell.parentNode.insertBefore(s,this.activeCell.nextSibling),e.callBack&&e.callBack({requestType:e.item.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})}},e.prototype.getCorrespondingColumns=function(){for(var e=[],t=this.curTable.rows,i=0;i<=t.length-1;i++)for(var s=t[i],n=0,o=0;o<=s.children.length-1;o++){for(var r=s.children[o],a=r,l=parseInt(a.getAttribute("colspan"),10)||1,h=parseInt(a.getAttribute("rowspan"),10)||1,d=i;d<i+h;d++)for(var c=n;c<n+l;c++)e[d]||(e[d]=[]),e[d][c]?n++:e[d][c]=r;n+=0}return e},e.prototype.FindIndex=function(e,t,i){var s,n;for(s=e+1,n=t+1;s<i.length;){if(i[s][t]!==i[e][t]){s--;break}s++}for(s===i.length&&s--;n<i[e].length;){if(i[e][n]!==i[e][t]){n--;break}n++}return n===i[e].length&&n--,[s,n]},e.prototype.getCorrespondingIndex=function(e,t){for(var i=0;i<t.length;i++)for(var s=0;s<t[i].length;s++)if(t[i][s]===e)return[i,s];return[]},e.prototype.highlightCells=function(e,t,i,s,n){var o,r,a,l,h=e,d=t,c=i,p=s,u=new Ne;for(o=h;o<=d;o++){for(((1<(parseInt(n[o][c].getAttribute("rowspan"),10)||1)||1<(parseInt(n[o][c].getAttribute("colspan"),10)||1))&&(l=this.FindIndex((a=this.getCorrespondingIndex(n[o][c],n))[0],a[1],n))||(1<(parseInt(n[o][p].getAttribute("rowspan"),10)||1)||1<(parseInt(n[o][p].getAttribute("colspan"),10)||1))&&(l=this.FindIndex((a=this.getCorrespondingIndex(n[o][p],n))[0],a[1],n)))&&(h=Math.min(a[0],h),d=Math.max(l[0],d),c=Math.min(a[1],c),p=Math.max(l[1],p)),r=c;r<=p;r++)((1<(parseInt(n[h][r].getAttribute("rowspan"),10)||1)||1<(parseInt(n[h][r].getAttribute("colspan"),10)||1))&&(l=this.FindIndex((a=this.getCorrespondingIndex(n[h][r],n))[0],a[1],n))||(1<(parseInt(n[d][r].getAttribute("rowspan"),10)||1)||1<(parseInt(n[d][r].getAttribute("colspan"),10)||1))&&(l=this.FindIndex((a=this.getCorrespondingIndex(n[d][r],n))[0],a[1],n)))&&(h=Math.min(a[0],h),d=Math.max(l[0],d),c=Math.min(a[1],c),p=Math.max(l[1],p));u=h===e&&d===t&&c===i&&p===s?{startRow:e,endRow:t,startColumn:i,endColumn:s}:this.highlightCells(h,d,c,p,n)}return u},e.prototype.tableMove=function(e){this.activeCell=e.selectNode[0];var t=e.event.target,i=this.activeCell.tagName,s=t.tagName;if(this.curTable=sf.base.closest(t,"table"),this.curTable.querySelectorAll(".e-cell-select").length>1&&this.parent.nodeSelection.Clear(this.parent.currentDocument),"TD"===t.tagName||"TH"===t.tagName||i===s){for(var n=Array.prototype.slice.call(this.activeCell.parentElement.parentElement.children).indexOf(this.activeCell.parentElement),o=Array.prototype.slice.call(this.activeCell.parentElement.children).indexOf(this.activeCell),r=Array.prototype.slice.call(t.parentElement.parentElement.children).indexOf(t.parentElement),a=Array.prototype.slice.call(t.parentElement.children).indexOf(t),l=this.curTable.querySelectorAll(".e-cell-select"),h=l.length-1;h>=0;h--)this.activeCell!==l[h]&&l[h].classList.remove("e-cell-select");if(n!==r||o!==a){for(var d=this.getCorrespondingColumns(),c=this.getCorrespondingIndex(this.activeCell,d),p=this.getCorrespondingIndex(t,d),u=this.highlightCells(Math.min(c[0],p[0]),Math.max(c[0],p[0]),Math.min(c[1],p[1]),Math.max(c[1],p[1]),d),f=u.startRow;f<=u.endRow;f++)for(var g=u.startColumn;g<=u.endColumn;g++)d[f][g].classList.add("e-cell-select");this.parent.nodeSelection.range&&(this.parent.nodeSelection.setSelectionText(this.parent.currentDocument,this.parent.nodeSelection.range.endContainer,this.parent.nodeSelection.range.endContainer,0,0),this.parent.nodeSelection.setCursorPoint(this.parent.currentDocument,this.parent.nodeSelection.range.endContainer,0))}}},e}(),Ne=function(){},xe=function(){function e(){}return e.applyFormat=function(e,t,i,s,n,o,r){this.enterAction=s;if(["bold","italic","underline","strikethrough","superscript","subscript","uppercase","lowercase","fontcolor","fontname","fontsize","backgroundcolor"].indexOf(t)>-1||"formatPainter"===n){"backgroundcolor"===t&&""===n&&(n="transparent");var a,l=new G,h=new de(i,e),d=new ue,c=new q,p=l.getRange(e),g=l.save(p,e),m=p.collapsed?l.getSelectionNodeCollection(p):l.getSelectionNodeCollectionBr(p),v=!1,b=!1,y=!1,M=["fontcolor","fontname","fontsize","backgroundcolor"].indexOf(t)>-1;if(p.collapsed){var C=c.getFormattedNode(p.startContainer,t,i),w=sf.base.isNullOrUndefined(C)?null:null===C.getAttribute("style")?C.nodeName:C.nodeName+"[style='"+C.getAttribute("style")+"']";if(m.length>0)v=!0,p=d.GetCursorRange(e,p,m[0]);else if(3===p.startContainer.nodeType&&(p.startContainer.parentElement.childElementCount>0&&p.startOffset>0&&"br"!==p.startContainer.parentElement.firstElementChild.tagName.toLowerCase()||!sf.base.isNullOrUndefined(C)&&C===p.startContainer.parentElement.closest(w)&&0!==p.startContainer.parentElement.closest(w).textContent.replace(new RegExp(String.fromCharCode(8203),"g"),"").trim().length))v=!0,p=d.GetCursorRange(e,p,p.startContainer),m.push(p.startContainer);else{var S=this.insertCursorNode(e,l,p,c,d,t,n,i);l.endContainer=l.startContainer=l.getNodeArray(S,!0);var N="BR"===S.nodeName&&S.parentNode.childNodes;sf.base.isNullOrUndefined(N)||1!==N.length||"BR"!==N[0].nodeName||0!==m.length?l.endOffset=l.startOffset=1:(l.setSelectionText(e,p.startContainer,p.endContainer,0,0),y=!0),"BR"===S.nodeName&&0===S.parentNode.textContent.length&&(y=!0)}}a=p.collapsed;for(var x=!1,O=0;O<m.length;O++){var E=c.getFormattedNode(m[O],t,i);null===E&&("subscript"===t?x=null!==(E=c.getFormattedNode(m[O],"superscript",i)):"superscript"===t&&(x=null!==(E=c.getFormattedNode(m[O],"subscript",i)))),0===O&&null===E&&(b=!0),m[O]=null===E||b&&!M?this.insertFormat(e,m,O,E,a,b,M,p,d,t,n,r,h,i):this.removeFormat(m,O,E,a,b,M,p,d,t,n,l,i,h),l=this.applySelection(m,l,d,O,v)}u()&&f(i,o),y||g.restore(),x&&this.applyFormat(e,t,i,s)}},e.insertCursorNode=function(e,t,i,s,n,o,r,a){var l=t.getNodeCollection(i),h=new de(a,e),d=l.length>0?l.length>1&&i.startContainer===i.endContainer?this.getCursorFormat(s,l,o,a):s.getFormattedNode(l[0],o,a):null,c=null;if(d){if(c=l[0],8203===d.firstChild.textContent.charCodeAt(0)&&3===d.firstChild.nodeType){var p=new RegExp(String.fromCharCode(8203),"g"),u=void 0;d.firstChild===c?(c.textContent=d.parentElement&&(h.isBlockNode(d.parentElement)&&d.parentElement.textContent.length<=1?d.parentElement.childElementCount>1:0===d.childElementCount)&&(d.parentElement.textContent.length>1||d.parentElement.firstChild&&1===d.parentElement.firstChild.nodeType)?c.textContent:c.textContent.replace(p,""),u=c):(d.firstChild.textContent=d.firstChild.textContent.replace(p,""),u=d.firstChild);var f=void 0;if(0===u.textContent.length)if(sf.base.isNullOrUndefined(u.previousSibling)){if(!sf.base.isNullOrUndefined(u.parentElement)&&0===u.parentElement.textContent.length){var g=document.createElement("BR");u.parentElement.appendChild(g),sf.base.detach(u),c=g,t.setCursorPoint(e,c.parentElement,0)}}else c=u.previousSibling,f=u.textContent.length-1,t.setCursorPoint(e,u,f)}["fontcolor","fontname","fontsize","backgroundcolor"].indexOf(o)>-1?("fontcolor"===o?d.style.color=r:"fontname"===o?d.style.fontFamily=r:"fontsize"===o?d.style.fontSize=r:d.style.backgroundColor=r,c=d):pe.unwrap(d)}else l.length>1&&i.startOffset>0&&l[0].firstElementChild&&"br"===l[0].firstElementChild.tagName.toLowerCase()&&(l[0].innerHTML=""),1!==l.length||0!==i.startOffset||"BR"!==l[0].nodeName&&"BR"!==l[0].nextSibling.nodeName||sf.base.detach("#text"===l[0].nodeName?l[0].nextSibling:l[0]),c=this.getInsertNode(e,i,o,r).firstChild;return c},e.getCursorFormat=function(e,t,i,s){for(var n,o=0;o<t.length;o++)n=t[o].lastElementChild?t[o].lastElementChild:t[o];return e.getFormattedNode(n,i,s)},e.removeFormat=function(e,t,i,s,n,o,r,a,l,h,d,c,p){var u,f,g=null,m="#text"===r.startContainer.nodeName?r.startContainer.textContent.substring(r.startOffset,r.startContainer.textContent.length):r.startContainer.textContent,v=e[t].textContent;if(r.startContainer!==r.endContainer||0!==r.startOffset||r.endOffset!==r.startContainer.length){var b=[],y=e[t];do{b.push(d.getIndex(y)),y=y.parentNode}while(y&&y!==i);if("BR"!==e[t].nodeName&&(y=g=s&&i.textContent.length-1===r.startOffset?a.SplitNode(r,i,!0):a.GetSpliceNode(r,i)),s){for(var M=g;null!==M.firstChild&&3!==M.firstChild.nodeType;null)M=M.firstChild;M.innerHTML="&#8203;",e[t]=M.firstChild}else{for(;y&&y.childNodes.length>0&&b.length-1>=0&&y.childNodes.length>b[b.length-1];)y=y.childNodes[b[b.length-1]],b.pop();if("BR"!==e[t].nodeName)if(3!==y.nodeType||s&&""===y.nodeValue){var C=document.createElement("div");C.innerHTML="&#8203;",3!==y.nodeType?(y.insertBefore(C.firstChild,y.firstChild),e[t]=y.firstChild):(y.parentNode.insertBefore(C.firstChild,y),e[t]=y.previousSibling,y.parentNode.removeChild(y))}else e[t]=y}}else if(o&&!e[t].contains(i)&&3===e[t].nodeType&&e[t].textContent!==i.textContent){for(var w=e[t].textContent===e[t].wholeText,S=e[t],N=this.GetFormatNode(l,h);S&&S.textContent===S.parentElement.textContent;)S=S.parentElement;if(w&&i.textContent!==S.textContent){var x=[],O=this.getPriorityFormatNode(S,c);return O&&O.textContent===S.textContent&&(S=O),x.push(S),this.applyStyles(x,0,N),e[t]}}if("backgroundcolor"===l&&(u=i.style.fontSize),"fontsize"===l){var E=sf.base.closest(e[t].parentElement,"span[style*=background-color]");sf.base.isNullOrUndefined(E)||(f=E.style.backgroundColor)}var I=i.getAttribute("style"),D=i.tagName,T=pe.unwrap(i);if(T[0]&&!o)for(var j=S=T[t]?T[t]:T[0];S&&S.parentElement&&S.parentElement!==c;S=S){var A=void 0;if(A="SPAN"===i.nodeName?S.parentElement.tagName.toLocaleLowerCase()===i.tagName.toLocaleLowerCase()&&S.parentElement.getAttribute("style")===I:S.parentElement.tagName.toLocaleLowerCase()===i.tagName.toLocaleLowerCase(),S.parentElement&&A&&(S.parentElement.childElementCount>1||r.startOffset>1)){if(j.parentElement&&j.parentElement.tagName.toLocaleLowerCase()===i.tagName.toLocaleLowerCase()&&r.startOffset===r.endOffset&&1!==j.nodeType&&!sf.base.isNullOrUndefined(j.textContent)&&j.parentElement.childElementCount>1&&(r.setStart(j,0),r.setEnd(j,j.textContent.length),a.SplitNode(r,j.parentElement,!1)),"span"===S.parentElement.tagName.toLocaleLowerCase()&&"underline"===i.style.textDecoration&&"underline"!==S.parentElement.style.textDecoration){S=S.parentElement;continue}pe.unwrap(S.parentElement),S=sf.base.isNullOrUndefined(S.parentElement)||p.isBlockNode(S.parentElement)?S.parentElement:j}else S=S.parentElement}if(T.length>0&&o){for(var z=0;z<T.length;z++)(3!==T[z].nodeType||T[z].textContent&&T[z].textContent.trim().length>0)&&(T[z]=pe.Wrap(T[z],this.GetFormatNode(l,h,D,I)),T[z].textContent===m&&(0===z?r.setStartBefore(T[z]):z===T.length-1&&r.setEndAfter(T[z])));var L=e[t].parentElement;if(sf.base.isNullOrUndefined(u)||""===u||(L.style.fontSize=u),sf.base.isNullOrUndefined(f)||""===f||(L.style.backgroundColor=f),"backgroundcolor"===l&&!sf.base.isNullOrUndefined(u)&&""!==u&&L.parentElement.innerHTML===L.outerHTML){var k=L.parentElement;k.parentElement.insertBefore(L,k),sf.base.detach(k)}if("fontsize"===l||"fontcolor"===l){for(var P=e[t].parentElement,B=e[t].parentElement;!sf.base.isNullOrUndefined(B)&&"li"!==B.tagName.toLowerCase();)P=B=B.parentElement;z=t;for(var U="";z>=0&&!sf.base.isNullOrUndefined(P)&&"li"===P.tagName.toLowerCase()&&P.textContent.replace("/​/g","").trim().includes(e[z].textContent.trim());)U=" "+e[z].textContent.trim()+U,z--;var R=!1,H=0,Y=!1;if(!sf.base.isNullOrUndefined(P)&&P.childNodes)for(var F=0;F<P.childNodes.length;F++)"OL"===P.childNodes[F].nodeName&&(H++,R=!0);if(sf.base.isNullOrUndefined(P)||"li"!==P.tagName.toLowerCase()||P.textContent.split("​").join("").trim()!==U.split("​").join("").trim()){if(!sf.base.isNullOrUndefined(P)&&"li"===P.tagName.toLowerCase()&&R){if(R&&H>0)for(var q=0;q<P.childNodes.length;q++)e[t].textContent===P.childNodes[q].textContent&&e[t].textContent===v&&P.textContent.replace("/​/g","").trim().includes(U.split("​").join("").trim())&&(Y=!0);if(Y){for(var V=0;V<P.childNodes.length;V++)"OL"===P.childNodes[V].nodeName&&(P.childNodes[V].style.fontSize="initial");"fontsize"===l?P.style.fontSize=h:(P.style.color=h,P.style.textDecoration="inherit")}}}else"fontsize"===l?P.style.fontSize=h:(P.style.color=h,P.style.textDecoration="inherit")}}return e[t]},e.insertFormat=function(e,t,i,s,n,o,r,a,l,h,d,c,p,u){if(n)if("uppercase"!==h&&"lowercase"!==h){f=this.getInsertNode(e,a,h,d);t[i]=f.firstChild,l.position=1}else l.position=a.startOffset;else if(null===s&&o||r){if("BR"!==t[i].nodeName&&(t[i]=l.GetSpliceNode(a,t[i]),t[i].textContent=l.TrimLineBreak(t[i].textContent)),"uppercase"===h||"lowercase"===h)t[i].textContent="uppercase"===h?t[i].textContent.toLocaleUpperCase():t[i].textContent.toLocaleLowerCase();else if(!0!==r||""!==d){var f=this.GetFormatNode(h,d);if("formatPainter"===d||r){for(var g=t[i].parentElement,m=t[i].parentElement;!sf.base.isNullOrUndefined(m)&&"li"!==m.tagName.toLowerCase();)g=m=m.parentElement;if(sf.base.isNullOrUndefined(g)||"li"!==g.tagName.toLowerCase()||g.textContent.trim()!==t[i].textContent.trim()||("fontsize"===h?g.style.fontSize=d:"fontcolor"===h&&(g.style.color=d,g.style.textDecoration="inherit")),"formatPainter"===d)return this.insertFormatPainterElem(t,i,a,l,c,p);var v=t[i],b=this.getPriorityFormatNode(v,u);if(!sf.base.isNullOrUndefined(b)||r){var y=sf.base.isNullOrUndefined(b)?v:b;if(y=sf.base.isNullOrUndefined(b)||""===b.style.fontSize?y:y.firstChild,sf.base.isNullOrUndefined(b)||"fontsize"===h)for(;y;){var M=y.parentElement.textContent.trim()===t[i].textContent.trim();if(p.isBlockNode(y.parentElement)||!M)break;y=y.parentElement}var C=[];if("fontcolor"===h){var w=sf.base.closest(t[i].parentElement,"A");sf.base.isNullOrUndefined(w)||w.firstChild.textContent.trim()!==t[i].textContent.trim()||(y=t[i])}t[i].textContent.trim()!==y.textContent.trim()&&(y=t[i]),C[0]=y,this.applyStyles(C,0,f)}else t[i]=this.applyStyles(t,i,f)}else t[i]=this.applyStyles(t,i,f)}}else t[i]=l.GetSpliceNode(a,t[i]);return t[i]},e.applyStyles=function(e,t,i){return"BR"===e[t].nodeName&&"BR"===this.enterAction||(e[t]=t===e.length-1||"BR"===e[t].nodeName?pe.Wrap(e[t],i):pe.WrapBefore(e[t],i,!0),e[t]=this.getChildNode(e[t],i)),e[t]},e.getPriorityFormatNode=function(e,t){var i,s,n,o=new q,r=o.getFormattedNode(e,"fontsize",t);return sf.base.isNullOrUndefined(r)?(s=o.getFormattedNode(e,"backgroundcolor",t),sf.base.isNullOrUndefined(s)?(n=o.getFormattedNode(e,"fontname",t),sf.base.isNullOrUndefined(n)?(i=o.getFormattedNode(e,"fontcolor",t),sf.base.isNullOrUndefined(i)?null:i):n):s):r},e.getInsertNode=function(e,t,i,s){var n=this.GetFormatNode(i,s);if(n.innerHTML="&#8203;",sf.base.Browser.isIE){var o=e.createDocumentFragment();o.appendChild(n),t.insertNode(o)}else t.insertNode(n);return n},e.getChildNode=function(e,t){return null==e&&(t.innerHTML="&#8203;",e=t.firstChild),e},e.applySelection=function(e,t,i,s,n){return 1!==e.length||n?1===e.length&&n?(t.startContainer=t.getNodeArray(e[s],!0),t.endContainer=t.startContainer,t.startOffset=i.position,t.endOffset=i.position):0===s?(t.startContainer=t.getNodeArray(e[s],!0),t.startOffset=0):s===e.length-1&&(t.endContainer=t.getNodeArray(e[s],!1),t.endOffset=e[s].textContent.length):(t.startContainer=t.getNodeArray(e[s],!0),t.endContainer=t.startContainer,t.startOffset=0,t.endOffset=e[s].textContent.length),t},e.GetFormatNode=function(e,t,i,s){var n;switch(e){case"bold":return document.createElement("strong");case"italic":return document.createElement("em");case"underline":return n=document.createElement("span"),this.updateStyles(n,i,s),n.style.textDecoration="underline",n;case"strikethrough":return n=document.createElement("span"),this.updateStyles(n,i,s),n.style.textDecoration="line-through",n;case"superscript":return document.createElement("sup");case"subscript":return document.createElement("sub");case"fontcolor":return n=document.createElement("span"),this.updateStyles(n,i,s),n.style.color=t,n.style.textDecoration="inherit",n;case"fontname":return n=document.createElement("span"),this.updateStyles(n,i,s),n.style.fontFamily=t,n;case"fontsize":return n=document.createElement("span"),this.updateStyles(n,i,s),n.style.fontSize=t,n;default:return n=document.createElement("span"),this.updateStyles(n,i,s),n.style.backgroundColor=t,n}},e.updateStyles=function(e,t,i){null!==i&&"SPAN"===t&&e.setAttribute("style",i)},e.insertFormatPainterElem=function(e,t,i,s,n,o){var r=e[t].parentElement;if(!o.isBlockNode(r)){for(;r.textContent.trim()===r.parentElement.textContent.trim()&&!o.isBlockNode(r.parentElement);)r=r.parentElement;if(r.textContent.trim()!==e[t].textContent.trim()){s.SplitNode(i,r,!0);for(var a=e[t].parentElement.childNodes,l=0;l<a.length;l++)if(a[l].textContent.trim()===e[l].textContent.trim()){r.parentNode.insertBefore(a[l],r);break}for(var h=r.parentElement.childNodes,d=0;d<h.length;d++)""!==h[d].textContent.trim()&&0!==h[d].textContent.length||sf.base.detach(h[d])}else pe.unwrap(r)}var c=n.element;if(!sf.base.isNullOrUndefined(c)){var p=c.cloneNode(!0),u=p.querySelectorAll(n.lastChild.nodeName),f=void 0;u.length>0?f=u[u.length-1]:sf.base.isNullOrUndefined(p)||p.nodeName!==n.lastChild.nodeName||(f=p),f.textContent=e[t].textContent;var g=f.childNodes[0];e[t]=pe.Wrap(e[t],p),e[t].textContent="",e[t]=g}return e[t]},e.enterAction="P",e}(),Oe=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("selection-type",this.applySelection,this),this.parent.observer.on("keydown-handler",this.keyDownHandler,this)},e.prototype.keyDownHandler=function(e){e.event.ctrlKey&&["bold","italic","underline","strikethrough","superscript","subscript","uppercase","lowercase"].indexOf(e.event.action)>-1&&(e.event.preventDefault(),xe.applyFormat(this.parent.currentDocument,e.event.action,this.parent.editableElement,e.enterAction),this.callBack(e,e.event.action))},e.prototype.applySelection=function(e){xe.applyFormat(this.parent.currentDocument,e.subCommand.toLocaleLowerCase(),this.parent.editableElement,e.enterAction,e.value,e.selector),this.callBack(e,e.subCommand)},e.prototype.callBack=function(e,t){e.callBack&&e.callBack({requestType:t,event:e.event,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),Ee=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("inserthtml-type",this.applyHtml,this)},e.prototype.applyHtml=function(e){if(ge.Insert(this.parent.currentDocument,e.value,this.parent.editableElement,!0,e.enterAction),"pasteCleanup"===e.subCommand){var t=this.parent.editableElement.querySelectorAll(".pasteContent_RTE"),i=[].slice.call(t),s=this.parent.editableElement.querySelectorAll(".pasteContent_Img"),n=[].slice.call(s);e.callBack({requestType:e.subCommand,editorMode:"HTML",elements:i,imgElem:n})}else e.callBack&&e.callBack({requestType:e.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),Ie=function(){function e(){}return e.clear=function(e,t,i,s,n){this.domNode=new de(t,e),this.defaultTag="P"===i?this.defaultTag:"div";var o=new G,r=new ue,a=o.getRange(e),l=a.collapsed?o.getSelectionNodeCollection(a):o.getSelectionNodeCollectionBr(a),h=o.save(a,e),d=!1;if(a.collapsed&&"ClearFormat"!==n&&(d=!0,a=r.GetCursorRange(e,a,l[0])),!a.collapsed){var c=void 0;if(c=l.length>0&&"BR"===l[0].nodeName&&sf.base.closest(l[0],"table")?r.GetSpliceNode(a,sf.base.closest(l[0],"table")):r.GetSpliceNode(a,l[l.length>1&&"IMG"===l[0].nodeName?1:0]),1===l.length)o.setSelectionContents(e,c),a=o.getRange(e);else if(l.length>1){for(var p=1,g=l[l.length-p];l.length<=p&&"BR"===l[l.length-p].nodeName;)p++,g=l[l.length-p];var m=r.GetSpliceNode(a,g);o.setSelectionText(e,c,m,0,3===m.nodeType?m.textContent.length:m.childNodes.length),a=o.getRange(e)}var v=o.getNodeCollection(a),b=v.slice();this.clearInlines(o.getSelectionNodes(b),b,o.getRange(e),r,t),this.reSelection(e,h,v),a=o.getRange(e);var y=(v=o.getNodeCollection(a)).slice();this.clearBlocks(e,y,t,r,o),u()&&f(t,s),this.reSelection(e,h,v)}d&&o.setCursorPoint(e,a.endContainer,a.endOffset)},e.reSelection=function(e,t,i){var s=t.getInsertNodes(i);t.startContainer=t.getNodeArray(s[0],!0,e),t.startOffset=0,t.endContainer=t.getNodeArray(s[s.length-1],!1,e);var n=s[s.length-1];t.endOffset=3===n.nodeType?n.textContent.length:n.childNodes.length,t.restore()},e.clearBlocks=function(e,t,i,s,n){for(var o=[],r=0;r<t.length;r++)this.BLOCK_TAGS.indexOf(t[r].nodeName.toLocaleLowerCase())>-1&&-1===o.indexOf(t[r])?o.push(t[r]):this.BLOCK_TAGS.indexOf(t[r].parentNode.nodeName.toLocaleLowerCase())>-1&&-1===o.indexOf(t[r].parentNode)&&i!==t[r].parentNode&&o.push(t[r].parentNode);o=this.spliceParent(o,t)[0],o=this.removeParent(o),this.unWrap(e,o,s,n)},e.spliceParent=function(e,t){for(var i=0;i<e.length;i++)for(var s=e[i].childNodes.length,n=0;n<s;n++)if(t.indexOf(e[i].childNodes[n])>0&&e[i].childNodes[n].childNodes.length>0&&(t=this.spliceParent([e[i].childNodes[n]],t)[1]),t.indexOf(e[i].childNodes[n])<=-1&&""!==e[i].childNodes[n].textContent.trim()){for(var o=0;o<s;o++)t.indexOf(e[i].childNodes[o])>-1&&t.splice(t.indexOf(e[i].childNodes[o]),1);n=e[i].childNodes.length;var r=e.indexOf(e[i].parentNode),a=t.indexOf(e[i].parentNode);r>-1&&e.splice(r,1),a>-1&&t.splice(a,1);var l=t.indexOf(e[i]);l>-1&&t.splice(l,1),e.splice(i,1),i--}return[e,t]},e.removeChild=function(e,t){var i=t.childNodes.length;if(i>0)for(var s=0;s<i;s++)e.indexOf(t.childNodes[s])>-1&&(e=this.removeChild(e,t.childNodes[s])).splice(e.indexOf(t.childNodes[s]),1);return e},e.removeParent=function(e){for(var t=0;t<e.length;t++)e.indexOf(e[t].parentNode)>-1&&((e=this.removeChild(e,e[t])).splice(t,1),t--);return e},e.unWrap=function(e,t,i,s){for(var n=0;n<t.length;n++)if(this.NONVALID_TAGS.indexOf(t[n].nodeName.toLowerCase())>-1&&t[n].parentNode&&this.NONVALID_PARENT_TAGS.indexOf(t[n].parentNode.nodeName.toLowerCase())>-1&&(s.setSelectionText(e,t[n],t[n],0,t[n].childNodes.length),pe.unwrap(i.GetSpliceNode(s.getRange(e),t[n].parentNode))),"p"!==t[n].nodeName.toLocaleLowerCase()){!(this.NONVALID_PARENT_TAGS.indexOf(t[n].nodeName.toLowerCase())<0&&"p"!==t[n].parentNode.nodeName.toLocaleLowerCase())||("blockquote"===t[n].nodeName.toLocaleLowerCase()||"li"===t[n].nodeName.toLocaleLowerCase())&&this.IGNORE_PARENT_TAGS.indexOf(t[n].childNodes[0].nodeName.toLocaleLowerCase())>-1||1===t[n].childNodes.length&&"p"===t[n].childNodes[0].nodeName.toLocaleLowerCase()||pe.Wrap(t[n],e.createElement(this.defaultTag));var o=pe.unwrap(t[n]);1===o.length&&"p"===o[0].parentNode.nodeName.toLocaleLowerCase()&&(pe.Wrap(t[n],e.createElement(this.defaultTag)),pe.unwrap(t[n]));for(var r=0;r<o.length;r++)if(this.NONVALID_TAGS.indexOf(o[r].nodeName.toLowerCase())>-1)this.unWrap(e,[o[r]],i,s);else if(this.BLOCK_TAGS.indexOf(o[r].nodeName.toLocaleLowerCase())>-1&&"p"!==o[r].nodeName.toLocaleLowerCase()){var a=this.removeParent([o[r]]);this.unWrap(e,a,i,s)}else this.BLOCK_TAGS.indexOf(o[r].nodeName.toLocaleLowerCase())>-1&&o[r].parentNode.nodeName.toLocaleLowerCase()===o[r].nodeName.toLocaleLowerCase()?pe.unwrap(o[r]):this.BLOCK_TAGS.indexOf(o[r].nodeName.toLocaleLowerCase())>-1&&"p"===o[r].nodeName.toLocaleLowerCase()&&(pe.Wrap(o[r],e.createElement(this.defaultTag)),pe.unwrap(o[r]))}else pe.Wrap(t[n],e.createElement(this.defaultTag)),pe.unwrap(t[n])},e.clearInlines=function(e,t,i,s,n){for(var o=0;o<e.length;o++){for(var r=e[o],a=void 0;!this.domNode.isBlockNode(r)&&r.parentElement&&!r.parentElement.classList.contains("e-img-inner");)a=r,r=r.parentElement;a&&q.inlineTags.indexOf(a.nodeName.toLocaleLowerCase())>-1&&(s.GetSpliceNode(i,a),this.removeInlineParent(a))}},e.removeInlineParent=function(e){for(var t=pe.unwrap(e),i=0;i<t.length;i++)1===t[i].parentNode.childNodes.length&&!t[i].parentNode.classList.contains("e-img-inner")&&q.inlineTags.indexOf(t[i].parentNode.nodeName.toLocaleLowerCase())>-1?this.removeInlineParent(t[i].parentNode):q.inlineTags.indexOf(t[i].nodeName.toLocaleLowerCase())>-1&&this.removeInlineParent(t[i])},e.BLOCK_TAGS=["address","article","aside","blockquote","details","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","li","main","nav","noscript","ol","p","pre","section","ul"],e.NONVALID_PARENT_TAGS=["thead","tbody","ul","ol","table","tfoot","tr"],e.IGNORE_PARENT_TAGS=["ul","ol","table"],e.NONVALID_TAGS=["thead","tbody","figcaption","td","tr","th","tfoot","figcaption","li"],e.defaultTag="p",e}(),De=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("clear-type",this.applyClear,this),this.parent.observer.on("keydown-handler",this.onKeyDown,this)},e.prototype.onKeyDown=function(e){switch(e.event.action){case"clear-format":this.applyClear({subCommand:"ClearFormat",callBack:e.callBack,enterAction:e.enterAction}),e.event.preventDefault()}},e.prototype.applyClear=function(e){"ClearFormat"===e.subCommand&&(Ie.clear(this.parent.currentDocument,this.parent.editableElement,e.enterAction,e.selector,e.subCommand),e.callBack&&e.callBack({requestType:e.subCommand,event:e.event,editorMode:"HTML",range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)}))},e}(),Te=function(){function e(e,t){this.undoRedoStack=[],this.parent=e,this.undoRedoSteps=sf.base.isNullOrUndefined(t)?30:t.undoRedoSteps,this.undoRedoTimer=sf.base.isNullOrUndefined(t)?300:t.undoRedoTimer,this.addEventListener()}return e.prototype.addEventListener=function(){var e=sf.base.debounce(this.keyUp,this.undoRedoTimer);this.parent.observer.on("keyup-handler",e,this),this.parent.observer.on("keydown-handler",this.keyDown,this),this.parent.observer.on("action",this.onAction,this),this.parent.observer.on("model_changed_plugin",this.onPropertyChanged,this)},e.prototype.onPropertyChanged=function(e){for(var t=0,i=Object.keys(e.newProp);t<i.length;t++){switch(i[t]){case"undoRedoSteps":this.undoRedoSteps=e.newProp.undoRedoSteps;break;case"undoRedoTimer":this.undoRedoTimer=e.newProp.undoRedoTimer}}},e.prototype.removeEventListener=function(){this.parent.observer.off("keyup-handler",this.keyUp),this.parent.observer.off("keydown-handler",this.keyDown),this.parent.observer.off("action",this.onAction)},e.prototype.onAction=function(e){"Undo"===e.subCommand?this.undo(e):this.redo(e)},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.keyDown=function(e){var t=e.event;switch(t.action){case"undo":t.preventDefault(),this.undo(e);break;case"redo":t.preventDefault(),this.redo(e)}},e.prototype.keyUp=function(e){17===e.event.keyCode||e.event.ctrlKey||this.saveData(e)},e.prototype.saveData=function(e){for(var t=(new G).getRange(this.parent.currentDocument),i=this.parent.editableElement===t.startContainer.parentElement?t.startContainer.parentElement:t.startContainer,s=i.childNodes.length-1;s>=0;s--)!sf.base.isNullOrUndefined(i.childNodes[s])&&"#text"===i.childNodes[s].nodeName&&0===i.childNodes[s].textContent.length&&"IMG"!==i.childNodes[s].nodeName&&"BR"!==i.childNodes[s].nodeName&&i.childNodes[s].nodeName&&sf.base.detach(i.childNodes[s]);t=(new G).getRange(this.parent.currentDocument);var n=(new G).save(t,this.parent.currentDocument),o={text:this.parent.editableElement.innerHTML,range:n};this.undoRedoStack.length>=this.steps&&(this.undoRedoStack=this.undoRedoStack.slice(0,this.steps+1)),this.undoRedoStack.length>1&&this.undoRedoStack[this.undoRedoStack.length-1].range.range.collapsed===t.collapsed&&this.undoRedoStack[this.undoRedoStack.length-1].range.startOffset===n.range.startOffset&&this.undoRedoStack[this.undoRedoStack.length-1].range.endOffset===n.range.endOffset&&this.undoRedoStack[this.undoRedoStack.length-1].range.range.startContainer===n.range.startContainer&&this.undoRedoStack[this.undoRedoStack.length-1].text.trim()===o.text.trim()||(this.undoRedoStack.push(o),this.steps=this.undoRedoStack.length-1,this.steps>this.undoRedoSteps&&(this.undoRedoStack.shift(),this.steps--),e&&e.callBack&&e.callBack())},e.prototype.undo=function(e){if(this.steps>0){var t=this.undoRedoStack[this.steps-1].range,i=this.undoRedoStack[this.steps-1].text;this.parent.editableElement.innerHTML=i,this.parent.editableElement.focus(),u()&&f(this.parent.editableElement,e.selector),t.restore(),this.steps--,e.callBack&&e.callBack({requestType:"Undo",editorMode:"HTML",range:t,elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),event:e.event})}},e.prototype.redo=function(e){if(null!=this.undoRedoStack[this.steps+1]){var t=this.undoRedoStack[this.steps+1].range;this.parent.editableElement.innerHTML=this.undoRedoStack[this.steps+1].text,this.parent.editableElement.focus(),u()&&f(this.parent.editableElement,e.selector),t.restore(),this.steps++,e.callBack&&e.callBack({requestType:"Redo",editorMode:"HTML",range:t,elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument),event:e.event})}},e.prototype.getUndoStatus=function(){var e={undo:!1,redo:!1};return this.steps>0&&(e.undo=!0),null!=this.undoRedoStack[this.steps+1]&&(e.redo=!0),e},e}(),je=function(){function e(e){this.olData=["decimal","lower-alpha","lower-roman","upper-alpha","upper-roman","lower-greek"],this.ulData=["disc","square","circle","disc","square","circle"],this.ignorableNodes=["A","APPLET","B","BLOCKQUOTE","BR","BUTTON","CENTER","CODE","COL","COLGROUP","DD","DEL","DFN","DIR","DIV","DL","DT","EM","FIELDSET","FONT","FORM","FRAME","FRAMESET","H1","H2","H3","H4","H5","H6","HR","I","IMG","IFRAME","INPUT","INS","LABEL","LI","OL","OPTION","P","PARAM","PRE","Q","S","SELECT","SPAN","STRIKE","STRONG","SUB","SUP","TABLE","TBODY","TD","TEXTAREA","TFOOT","TH","THEAD","TITLE","TR","TT","U","UL"],this.blockNode=["div","p","h1","h2","h3","h4","h5","h6","address","blockquote","button","center","dd","dir","dl","dt","fieldset","frameset","hr","iframe","isindex","li","map","menu","noframes","noscript","object","ol","pre","table","tbody","td","tfoot","th","thead","tr","ul","header","article","nav","footer","section","aside","main","figure","figcaption"],this.borderStyle=["border-top","border-right","border-bottom","border-left"],this.upperRomanNumber=["I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII","XIII","XIV","XV","XVI","XVII","XVIII","XIX","XX"],this.lowerRomanNumber=["i","ii","iii","iv","v","vi","vii","viii","ix","x","xi","xii","xiii","xiv","xv","xvi","xvii","xviii","xix","xx"],this.lowerGreekNumber=["α","β","γ","δ","ε","ζ","η","θ","ι","κ","λ","μ","ν","ξ","ο","π","ρ","σ","τ","υ","φ","χ","ψ","ω"],this.removableElements=["o:p","style"],this.listContents=[],this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("ms_word_cleanup_plugin",this.wordCleanup,this)},e.prototype.wordCleanup=function(e){var t=sf.base.isNullOrUndefined(e.allowedStylePropertiesArray)?[]:e.allowedStylePropertiesArray,i=[],s=e.args.clipboardData.getData("text/HTML"),n=e.args.clipboardData.getData("text/rtf"),o=sf.base.createElement("p");o.setAttribute("id","MSWord-Content"),o.innerHTML=s;var r=/style='mso-width-source:/i;if(/class='?Mso|style='[^ ]*\bmso-/i.test(s)||/class="?Mso|style="[^ ]*\bmso-/i.test(s)||/(class="?Mso|class='?Mso|class="?Xl|class='?Xl|class=Xl|style="[^"]*\bmso-|style='[^']*\bmso-|w:WordDocument)/gi.test(s)||r.test(s)){this.imageConversion(o,n),s=s.replace(/<img[^>]+>/i,""),this.addListClass(o),i=this.cleanUp(o,i),sf.base.isNullOrUndefined(i[0])||"UL"===i[0].parentElement.tagName||"OL"===i[0].parentElement.tagName||this.listConverter(i),this.styleCorrection(o,t),this.removingComments(o),this.removeUnwantedElements(o),this.removeEmptyElements(o),this.breakLineAddition(o),this.removeClassName(o),r.test(s)&&this.addTableBorderClass(o);var a=o.querySelectorAll("li");if(a.length>0)for(var l=0;l<a.length;l++)sf.base.isNullOrUndefined(a[l].style.marginLeft)||(a[l].style.marginLeft="");e.callBack(o.innerHTML)}else e.callBack(o.innerHTML)},e.prototype.addListClass=function(e){for(var t=e.querySelectorAll("*"),i=0;i<t.length;i++)!sf.base.isNullOrUndefined(t[i].getAttribute("style"))&&t[i].getAttribute("style").replace(/ /g,"").replace("\n","").indexOf("mso-list:l")>=0&&-1===t[i].className.toLowerCase().indexOf("msolistparagraph")&&"H"!==t[i].tagName.charAt(0)&&t[i].classList.add("msolistparagraph")},e.prototype.addTableBorderClass=function(e){for(var t=e.querySelectorAll("table"),i=!1,s=0;s<t.length;s++){for(var n=0;n<this.borderStyle.length;n++)if(t[s].innerHTML.indexOf(this.borderStyle[n])>=0){i=!0;break}i&&(t[s].classList.add("e-rte-table-border"),i=!1)}},e.prototype.imageConversion=function(e,t){this.checkVShape(e);for(var i=e.querySelectorAll("img"),s=0;s<i.length;s++)!sf.base.isNullOrUndefined(i[s].getAttribute("v:shapes"))&&i[s].getAttribute("v:shapes").indexOf("Picture")<0&&i[s].getAttribute("v:shapes").indexOf("圖片")<0&&i[s].getAttribute("v:shapes").indexOf("Grafik")<0&&i[s].getAttribute("v:shapes").indexOf("Image")<0&&sf.base.detach(i[s]);i=e.querySelectorAll("img");var n=[],o=[],r=[],a=new RegExp(/([^\S]|^)(((https?\:\/\/)|(www\.))(\S+))/gi);if(i.length>0){for(s=0;s<i.length;s++)n.push(i[s].getAttribute("src")),r.push(i[s].getAttribute("src").split("/")[i[s].getAttribute("src").split("/").length-1].split(".")[0]);var l=this.hexConversion(t);for(s=0;s<l.length;s++)o.push(this.convertToBase64(l[s]));for(s=0;s<i.length;s++)n[s].match(a)?i[s].setAttribute("src",n[s]):i[s].setAttribute("src",o[s]),i[s].setAttribute("id","msWordImg-"+r[s])}},e.prototype.checkVShape=function(e){for(var t=e.querySelectorAll("*"),i=0;i<t.length;i++)switch(t[i].nodeName){case"V:SHAPETYPE":sf.base.detach(t[i]);break;case"V:SHAPE":if("V:IMAGEDATA"===t[i].firstElementChild.nodeName){var s=t[i].firstElementChild.getAttribute("src"),n=sf.base.createElement("img");n.setAttribute("src",s),t[i].parentElement.insertBefore(n,t[i]),sf.base.detach(t[i])}}},e.prototype.convertToBase64=function(e){var t=this.conHexStringToBytes(e.hex),i=this.conBytesToBase64(t);return e.type?"data:"+e.type+";base64,"+i:null},e.prototype.conBytesToBase64=function(e){for(var t="",i=e.length,s=0;s<i;s+=3){var n=e.slice(s,s+3),o=n.length,r=[];if(o<3)for(var a=o;a<3;a++)n[a]=0;r[0]=(252&n[0])>>2,r[1]=(3&n[0])<<4|n[1]>>4,r[2]=(15&n[1])<<2|(192&n[2])>>6,r[3]=63&n[2];for(a=0;a<4;a++)t+=a<=o?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r[a]):"="}return t},e.prototype.conHexStringToBytes=function(e){for(var t=[],i=e.length/2,s=0;s<i;s++)t.push(parseInt(e.substr(2*s,2),16));return t},e.prototype.hexConversion=function(e){var t,i=/\{\\pict[\s\S]+?\\bliptag\-?\d+(\\blipupi\-?\d+)?(\{\\\*\\blipuid\s?[\da-fA-F]+)?[\s\}]*?/,s=new RegExp("(?:("+i.source+"))([\\da-fA-F\\s]+)\\}","g"),n=e.match(s),o=[];if(!sf.base.isNullOrUndefined(n))for(var r=0;r<n.length;r++)if(i.test(n[r])){if(-1!==n[r].indexOf("\\pngblip"))t="image/png";else{if(-1===n[r].indexOf("\\jpegblip"))continue;t="image/jpeg"}o.push({hex:t?n[r].replace(i,"").replace(/[^\da-fA-F]/g,""):null,type:t})}return o},e.prototype.removeClassName=function(e){for(var t=e.querySelectorAll("*[class]"),i=0;i<t.length;i++)t[i].removeAttribute("class")},e.prototype.breakLineAddition=function(e){for(var t=e.querySelectorAll("*"),i=0;i<t.length;i++)if(0===t[i].children.length&&"&nbsp;"===t[i].innerHTML&&"&nbsp;"===t[i].innerHTML&&!t[i].closest("li")&&!t[i].closest("td")&&("SPAN"!==t[i].nodeName||"SPAN"===t[i].nodeName&&sf.base.isNullOrUndefined(t[i].previousElementSibling)&&sf.base.isNullOrUndefined(t[i].nextElementSibling))){var s=this.findDetachElem(t[i]),n=sf.base.createElement("br");sf.base.isNullOrUndefined(s.parentElement)||(s.parentElement.insertBefore(n,s),sf.base.detach(s))}},e.prototype.findDetachElem=function(e){return!sf.base.isNullOrUndefined(e.parentElement)&&""===e.parentElement.textContent.trim()&&"TD"!==e.parentElement.tagName&&sf.base.isNullOrUndefined(e.parentElement.querySelector("img"))?this.findDetachElem(e.parentElement):e},e.prototype.removeUnwantedElements=function(e){for(var t=e.innerHTML,i=0;i<this.removableElements.length;i++){var s=new RegExp("<"+this.removableElements[i]+">","g"),n=new RegExp("</"+this.removableElements[i]+">","g");t=(t=t.replace(s,"")).replace(n,"")}e.innerHTML=t,e.querySelectorAll(":empty")},e.prototype.findDetachEmptyElem=function(e){return sf.base.isNullOrUndefined(e.parentElement)?null:""===e.parentElement.textContent.trim()&&"MSWord-Content"!==e.parentElement.getAttribute("id")&&sf.base.isNullOrUndefined(e.parentElement.querySelector("img"))?this.findDetachEmptyElem(e.parentElement):e},e.prototype.removeEmptyElements=function(e){for(var t=e.querySelectorAll(":empty"),i=0;i<t.length;i++)if(sf.base.isNullOrUndefined(t[i].closest("td"))||sf.base.isNullOrUndefined(t[i].closest("td").querySelector(".MsoNormal"))||(t[i].innerHTML="-"),"IMG"!==t[i].tagName&&"BR"!==t[i].tagName&&"IFRAME"!==t[i].tagName&&"TD"!==t[i].tagName&&"HR"!==t[i].tagName){var s=this.findDetachEmptyElem(t[i]);sf.base.isNullOrUndefined(s)||sf.base.detach(s)}},e.prototype.styleCorrection=function(e,t){var i=e.querySelectorAll("style");if(i.length>0){var s=i[0].innerHTML.match(/[\S ]+\s+{[\s\S]+?}/gi),n=sf.base.isNullOrUndefined(s)?null:this.findStyleObject(s),o=Object.keys(n),r=o.map((function(e){return n[""+e]}));r=this.removeUnwantedStyle(r,t),this.filterStyles(e,t);for(var a=void 0,l=!1,h=0;h<o.length;h++){if(""===o[h].split(".")[0])a=e.getElementsByClassName(o[h].split(".")[1]),l=!0;else{if(1===o[h].split(".").length&&o[h].split(".")[0].indexOf("@")>=0)continue;a=1===o[h].split(".").length&&o[h].split(".")[0].indexOf("@")<0?e.getElementsByTagName(o[h]):e.querySelectorAll(o[h])}for(var d=0;d<a.length;d++){var c=a[d].getAttribute("style");if(sf.base.isNullOrUndefined(c)||""===c.trim())r[h]=r[h].replace(/text-indent:-(.*?)(?=;|$)/gm,""),a[d].setAttribute("style",r[h]);else{var p=r[h].split(";");if(!l)for(var u=0;u<p.length;u++)c.indexOf(p[u].split(":")[0])>=0&&(p.splice(u,1),u--);var f=c+p.join(";")+";";a[d].setAttribute("style",f)}}l=!1}var g=["MsoListParagraphCxSpFirst","MsoListParagraphCxSpMiddle","MsoListParagraphCxSpLast"];for(h=0;h<g.length;h++)if(o.indexOf("li."+g[h])>-1){var m=e.querySelectorAll("ol."+g[h]+", ul."+g[h]);for(d=0;d<m.length;d++){c=m[d].getAttribute("style");if(!sf.base.isNullOrUndefined(c)&&""!==c.trim()&&""!==m[d].style.marginLeft)for(p=r[o.indexOf("li."+g[h])].split(";"),u=0;u<p.length;u++)if("margin-left".indexOf(p[u].split(":")[0])>=0&&!sf.base.isNullOrUndefined(p[u].split(":")[1])&&p[u].split(":")[1].indexOf("in")>=0&&m[d].style.marginLeft.indexOf("in")>=0){var v=parseFloat(p[u].split(":")[1].split("in")[0]),b=parseFloat(m[d].style.marginLeft.split("in")[0]);m[d].style.marginLeft=b-v+"in"}}}}},e.prototype.filterStyles=function(e,t){for(var i=e.querySelectorAll("*[style]"),s=0;s<i.length;s++){for(var n=i[s].getAttribute("style").split(";"),o="",r=0;r<n.length;r++)t.indexOf(n[r].split(":")[0].trim())>=0&&(o+=n[r]+";");i[s].setAttribute("style",o)}},e.prototype.removeUnwantedStyle=function(e,t){for(var i=0;i<e.length;i++){var s=e[i].split(";");e[i]="";for(var n=0;n<s.length;n++)t.indexOf(s[n].split(":")[0])>=0&&(e[i]+=s[n]+";")}return e},e.prototype.findStyleObject=function(e){for(var t={},i=0;i<e.length;i++){var s=e[i],n=s.replace(/([\S ]+\s+){[\s\S]+?}/gi,"$1"),o=s.replace(/[\S ]+\s+{([\s\S]+?)}/gi,"$1");n=n.replace(/^[\s]|[\s]$/gm,""),o=o.replace(/^[\s]|[\s]$/gm,""),n=n.replace(/\n|\r|\n\r/g,""),o=o.replace(/\n|\r|\n\r/g,"");for(var r=n.split(", "),a=0;a<r.length;a++)t[r[a]]=o}return t},e.prototype.removingComments=function(e){var t=e.innerHTML;t=t.replace(/<!--[\s\S]*?-->/g,""),e.innerHTML=t},e.prototype.cleanUp=function(e,t){for(var i,s=[],n=e.querySelectorAll("*"),o=0;o<n.length;o++)-1===this.ignorableNodes.indexOf(n[o].nodeName)||3===n[o].nodeType&&""===n[o].textContent.trim()?s.push(n[o]):(n[o].className&&-1!==n[o].className.toLowerCase().indexOf("msolistparagraph")&&1!==n[o].childElementCount&&!sf.base.isNullOrUndefined(n[o].getAttribute("style"))&&n[o].getAttribute("style").indexOf("mso-list:")>=0&&(n[o].className.indexOf("MsoListParagraphCxSpFirst")>=0&&t.length>0&&null!==t[t.length-1]&&t.push(null),t.push(n[o])),!i||-1===this.blockNode.indexOf(n[o].nodeName.toLowerCase())||n[o].className&&-1!==n[o].className.toLowerCase().indexOf("msolistparagraph")&&!sf.base.isNullOrUndefined(n[o].getAttribute("style"))&&n[o].getAttribute("style").indexOf("mso-list:")>=0||t.push(null),-1!==this.blockNode.indexOf(n[o].nodeName.toLowerCase())&&(i=!!(n[o].className&&-1!==n[o].className.toLowerCase().indexOf("msolistparagraph")&&!sf.base.isNullOrUndefined(n[o].getAttribute("style"))&&n[o].getAttribute("style").indexOf("mso-list:")>=0)));return t.length&&null!==t[t.length-1]&&t.push(null),t},e.prototype.listConverter=function(e){for(var t,i,s=[],n=[],o="",r="",a=0;a<e.length;a++)if(null!==e[a]){e[a].getAttribute("style")&&-1!==e[a].getAttribute("style").indexOf("mso-outline-level")&&e[a].setAttribute("style",e[a].getAttribute("style").replace("mso-outline-level","mso-outline")),t=(o=e[a].getAttribute("style"))&&-1!==o.indexOf("level")?parseInt(o.charAt(o.indexOf("level")+5),null):1,this.listContents=[],this.getListContent(e[a]);var l=void 0,h=void 0,d=void 0,c=void 0;if(!sf.base.isNullOrUndefined(this.listContents[0])){if(l=this.listContents[0].trim().length>1?"ol":"ul",h=this.getlistStyleType(this.listContents[0],l),"ol"===l&&(0===a||null===e[a-1])){var p=this.listContents[0].split(".")[0];-1===["A","a","I","i","α","1","1-"].indexOf(p)&&("decimal"===h?isNaN(parseInt(p,10))||(d=parseInt(p,10)):"upper-alpha"===h?d=p.split(".")[0].charCodeAt(0)-64:"lower-alpha"===h?d=p.split(".")[0].charCodeAt(0)-96:"upper-roman"===h?d=this.upperRomanNumber.indexOf(this.listContents[0].split(".")[0])+1:"lower-roman"===h?d=this.lowerRomanNumber.indexOf(this.listContents[0].split(".")[0])+1:"lower-greek"===h&&(d=this.lowerGreekNumber.indexOf(this.listContents[0].split(".")[0])+1)),""!==e[a].style.marginLeft&&(c=e[a].style.marginLeft)}for(var u=[],f=1;f<this.listContents.length;f++)u.push(this.listContents[f]);var g=void 0;sf.base.isNullOrUndefined(e[a].className)||(g=e[a].className),sf.base.isNullOrUndefined(e[a].getAttribute("style"))||(e[a].setAttribute("style",e[a].getAttribute("style").replace("text-align:start;","")),""!==e[a].style.textAlign&&(e[a].setAttribute("style","text-align:"+e[a].style.textAlign),r=e[a].getAttribute("style"))),n.push({listType:l,content:u,nestedLevel:t,class:g,listStyle:r,listStyleTypeName:h,start:d,styleMarginLeft:c})}}else s.push({content:this.makeConversion(n),node:e[a-1]}),n=[];for(i=e.shift();i;){for(var m=[],v=0;v<s.length;v++)if(s[v].node===i){for(var b=0;b<s[v].content.childNodes.length;b++)m.push(s[v].content.childNodes[b]);for(b=0;b<m.length;b++)i.parentElement.insertBefore(m[b],i);break}i.remove(),(i=e.shift())||(i=e.shift())}},e.prototype.getlistStyleType=function(e,t){var i;if("ol"===t){var s=e.split(".")[0].charCodeAt(0);switch(!0){case this.upperRomanNumber.indexOf(e.split(".")[0])>-1:i="upper-roman";break;case this.lowerRomanNumber.indexOf(e.split(".")[0])>-1:i="lower-roman";break;case this.lowerGreekNumber.indexOf(e.split(".")[0])>-1:i="lower-greek";break;case s>64&&s<91:i="upper-alpha";break;case s>96&&s<123:i="lower-alpha";break;default:i="decimal"}}else switch(e.split(".")[0]){case"o":i="circle";break;case"§":i="square";break;default:i="disc"}return i},e.prototype.makeConversion=function(e){for(var t,i,s,n=sf.base.createElement("div"),o=1,r=0,a=0;a<e.length;a++){var l=sf.base.createElement("p");if(l.innerHTML=e[a].content.join(" "),1===e[a].nestedLevel&&0===r&&e[a].content)n.appendChild(t=sf.base.createElement(e[a].listType,{className:e[a].class})),(i=sf.base.createElement("li")).appendChild(l),t.appendChild(i),t.setAttribute("level",e[a].nestedLevel.toString()),t.style.marginLeft=e[a].styleMarginLeft,t.style.listStyleType=e[a].listStyleTypeName;else if(e[a].nestedLevel===o)i.parentElement.tagName.toLowerCase()===e[a].listType?(i.parentElement.appendChild(i=sf.base.createElement("li")),i.appendChild(l)):((t=sf.base.createElement(e[a].listType)).style.listStyleType=e[a].listStyleTypeName,i.parentElement.parentElement.appendChild(t),(i=sf.base.createElement("li")).appendChild(l),t.appendChild(i),t.setAttribute("level",e[a].nestedLevel.toString()));else if(e[a].nestedLevel>o)if(sf.base.isNullOrUndefined(i))n.appendChild(t=sf.base.createElement(e[a].listType)),(i=sf.base.createElement("li")).appendChild(l),t.appendChild(i),t.setAttribute("level",e[a].nestedLevel.toString()),t.style.listStyleType=e[a].listStyleTypeName;else{for(var h=0;h<e[a].nestedLevel-o;h++)i.appendChild(t=sf.base.createElement(e[a].listType)),i=sf.base.createElement("li"),h!==e[a].nestedLevel-o-1&&e[a].nestedLevel-o>1&&(i.style.listStyleType="none"),t.appendChild(i);i.appendChild(l),t.setAttribute("level",e[a].nestedLevel.toString()),t.style.listStyleType=e[a].listStyleTypeName}else if(1===e[a].nestedLevel)n.lastChild.tagName.toLowerCase()===e[a].listType?t=n.lastChild:(n.appendChild(t=sf.base.createElement(e[a].listType)),t.style.listStyleType=e[a].listStyleTypeName),(i=sf.base.createElement("li")).appendChild(l),t.appendChild(i),t.setAttribute("level",e[a].nestedLevel.toString());else for(s=i;s.parentElement;)if((s=s.parentElement).attributes.getNamedItem("level")){if(parseInt(s.attributes.getNamedItem("level").textContent,null)===e[a].nestedLevel){(i=sf.base.createElement("li")).appendChild(l),s.appendChild(i);break}if(e[a].nestedLevel>parseInt(s.attributes.getNamedItem("level").textContent,null)){s.appendChild(t=sf.base.createElement(e[a].listType)),(i=sf.base.createElement("li")).appendChild(l),t.appendChild(i),t.setAttribute("level",e[a].nestedLevel.toString()),t.style.listStyleType=e[a].listStyleTypeName;break}}i.setAttribute("class",e[a].class);var d=i.getAttribute("style");i.setAttribute("style",sf.base.isNullOrUndefined(d)?"":d),o=e[a].nestedLevel,r++,sf.base.isNullOrUndefined(e[a].start)||t.setAttribute("start",e[a].start.toString())}return n},e.prototype.getListContent=function(e){var t="",i=e.firstElementChild;if(""!==i.textContent.trim()||sf.base.isNullOrUndefined(i.firstElementChild)||"IMG"!==i.firstElementChild.nodeName){var s=["b","em"];if(i.childNodes.length>0&&(i.querySelectorAll("b").length>0||i.querySelectorAll("em").length>0))for(var n=0;n<i.childNodes.length;n++){var o=i.childNodes[n].nodeName.toLowerCase();i.childNodes[n].textContent.trim().length>1&&-1!==s.indexOf(o)?(t="<"+o+">"+i.childNodes[n].textContent+"</"+o+">",this.listContents.push(t)):1===i.childNodes[n].textContent.trim().length&&this.listContents.push(i.childNodes[n].textContent.trim())}else t=i.textContent.trim(),this.listContents.push(t)}else t=e.innerHTML.trim(),this.listContents.push(""),this.listContents.push(t);sf.base.detach(i),this.listContents.push(e.innerHTML)},e}(),Ae=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("insert-text-type",this.insertText,this)},e.prototype.insertText=function(e){var t=document.createTextNode(e.value);ge.Insert(this.parent.currentDocument,t,this.parent.editableElement),e.callBack&&e.callBack({requestType:e.subCommand,editorMode:"HTML",event:e.event,range:this.parent.nodeSelection.getRange(this.parent.currentDocument),elements:this.parent.nodeSelection.getSelectedNodes(this.parent.currentDocument)})},e}(),ze=function(){function e(e,t){this.parent=e,this.settings=t,this.addEventListener(),this.setDeniedFormats()}return e.prototype.addEventListener=function(){this.parent.observer.on("format_painter_actions",this.actionHandler,this)},e.prototype.actionHandler=function(e){if(!sf.base.isNullOrUndefined(e)&&!sf.base.isNullOrUndefined(e.item)&&!sf.base.isNullOrUndefined(e.item.formatPainterAction))switch(e.item.formatPainterAction){case"format-copy":this.copyAction();break;case"format-paste":this.pasteAction();break;case"escape":this.escapeAction()}},e.prototype.generateElement=function(){var e=this.copyCollection.slice();e.reverse();for(var t,i=e.length,s=sf.base.createElement("div",{className:"e-format-paste-wrapper"}),n=0;n<i;n++){var o=e[n],r=o.attrs,a=o.className,l=o.styles,h=o.tagName,d=sf.base.createElement(h);""!==a&&(d.className=a);for(var c=0;c<r.length;c++){var p=r[c].name,u=r[c].value;d.setAttribute(p,u)}for(var f=0;f<l.length;f++){p=l[f].property,u=l[f].value;var g=l[f].priority;d.style.setProperty(p,u,g)}0===s.childElementCount?(s.append(d),t=d):(t.append(d),t=d)}for(var m=this.removeDeniedFormats(s),v=m;v;)null===v.firstChild?(t=v,v=void 0):v=v.firstChild;this.newElem=m,this.newElemLastChild=t},e.prototype.pasteAction=function(){sf.base.isNullOrUndefined(this.copyCollection)||0===this.copyCollection.length?this.paintPlainTextFormat():(this.insertFormatNode(this.newElem,this.newElemLastChild),this.parent.undoRedoManager.saveData())},e.prototype.removeDeniedFormats=function(e){if(!sf.base.isNullOrUndefined(this.deniedFormatsCollection)&&this.deniedFormatsCollection.length>0)for(var t=this.deniedFormatsCollection,i=t.length,s=0;s<i;s++){var n=t[s].tag;if(t[s].tag)for(var o=e.querySelectorAll(n),r=0;r<o.length;r++){if(t[s].classes.length>0){for(var a=t[s].classes,l=a.length,h=0;h<l;h++)o[r].classList.contains(a[h])&&sf.base.removeClass([o[r]],a[h]);0===o[r].classList.length&&o[r].removeAttribute("class")}if(t[s].styles.length>0){var d=t[s].styles,c=d.length;for(h=0;h<c;h++)o[r].style.removeProperty(d[h]);0===o[r].style.length&&o[r].removeAttribute("style")}if(t[s].attributes.length>0){var p=t[s].attributes,u=p.length;for(h=0;h<u;h++)o[r].removeAttribute(p[h])}}}return e.firstElementChild},e.prototype.copyAction=function(){for(var e=[],t=this.parent.nodeSelection.getRange(document),i=t.startContainer.parentElement,s=this.findCurrentContext(i),n=this.settings.allowedFormats.split(";"),o=0;o<n.length;o++)n[o]=n[o].trim();var r=this.getRangeParentElem(s,t),a=r[0],l=r[1];if(null===s&&(s=l),!sf.base.isNullOrUndefined(s)&&this.settings.allowedContext.indexOf(s)>-1){"#text"===t.startContainer.nodeName&&(i=t.startContainer.parentElement);var h=i;do{if(n.indexOf(i.nodeName.toLowerCase())>-1){var d=i.attributes,c=[];for(o=0;o<d.length;o++)"class"!==d[o].name&&"style"!==d[o].name&&c.push(d[o]);var p=i.className,u=i.style,f=[];for(o=0;o<u.length;o++){var g=u[o],m=u.getPropertyValue(g),v=u.getPropertyPriority(g);f.push({property:g,value:m,priority:v})}e.push({attrs:c,className:p,styles:f,tagName:i.nodeName})}if(a===i?i=void 0:sf.base.isNullOrUndefined(i.parentElement)||(i=i.parentElement),h===i)break}while(!sf.base.isNullOrUndefined(i)||i===this.parent.editableElement);this.copyCollection=e}this.generateElement()},e.prototype.getRangeParentElem=function(e,t){var i,s=t.startContainer;switch(3===s.nodeType&&(s=s.parentElement),e){case"Table":i=sf.base.closest(s,"td"),sf.base.isNullOrUndefined(i)&&(i=sf.base.closest(s,"th"));break;case"List":i=sf.base.closest(s,"li");break;case"Text":i=sf.base.closest(s,"p")}if(sf.base.isNullOrUndefined(i)){var n=this.getNearestBlockParentElement(t);sf.base.isNullOrUndefined(n)||"UL"===n||"OL"===n||"LI"===n||(i=sf.base.closest(s,n),e="Text")}return"List"===e&&(i=i.parentElement),[i,e]},e.prototype.getNearestBlockParentElement=function(e){var t=e.commonAncestorContainer;for(3===t.nodeType&&(t=t.parentNode);t&&t!==this.parent.editableElement;){if(!sf.base.isNullOrUndefined(t)&&this.isBlockElement(t))return t.nodeName;t=t.parentNode}return null},e.prototype.isBlockElement=function(e){return["P","DIV","UL","OL","LI","H1","H2","H3","H4","H5","H6","ADDRESS","ARTICLE","ASIDE","BLOCKQUOTE","FIGCAPTION","FIGURE","FOOTER","HEADER","HR","MAIN","NAV","SECTION","SUMMARY","PRE"].indexOf(e.nodeName)>-1},e.prototype.escapeAction=function(){this.copyCollection=[]},e.prototype.paintPlainTextFormat=function(){var e,t=this.parent.nodeSelection.getRange(this.parent.currentDocument),i=this.parent.nodeSelection,s=t.collapsed?i.getSelectionNodeCollection(t):i.getSelectionNodeCollectionBr(t);if(s.length>1)for(var n=0;n<s.length;n++)e=this.validateELementTag(s[n]);else e=this.validateELementTag(t.startContainer)&&this.validateELementTag(t.endContainer);e||this.parent.execCommand("Clear","ClearFormat",null,null)},e.prototype.validateELementTag=function(e){return 3===e.nodeType&&(e=e.parentElement),["A","AUDIO","IMG","VIDEO","IFRAME"].indexOf(e.tagName)>-1},e.prototype.findCurrentContext=function(e){return sf.base.closest(e,"td")||sf.base.closest(e,"tr")||sf.base.closest(e,"tbody")?"Table":sf.base.closest(e,"li")?"List":sf.base.closest(e,"p")?"Text":null},e.prototype.insertFormatNode=function(e,t){for(var i,s=this.parent.editableElement,n=this.parent.currentDocument,o=this.parent.nodeSelection,r=e.cloneNode(!0).firstChild;r;){if(!this.isBlockElement(r)){i=r.parentNode.removeChild(r);break}r=r.firstChild}var a,l={element:i,lastChild:t};xe.applyFormat(n,null,s,"P","formatPainter",null,l);var h=this.parent.nodeSelection.getRange(n),d=h.collapsed,c=h.collapsed?o.getSelectionNodeCollection(h):o.getSelectionNodeCollectionBr(h);if(1===c.length){for(;!this.isBlockElement(c[0]);)c[0]=c[0].parentElement;a=c[0].textContent.trim()===h.commonAncestorContainer.wholeText.trim()}(this.isBlockElement(e)&&d||c.length>1||a)&&this.insertBlockNode(e,h,n,s,c)},e.prototype.insertBlockNode=function(e,t,i,s,n){var o,r,a=this.parent.nodeSelection;"UL"!==e.nodeName&&"OL"!==e.nodeName||(o=(r=e.cloneNode(!0)).firstChild);for(var l=t.startContainer,h=0;h<n.length;h++){var d=n[h];for(3===n[h].nodeType&&(n[h]=n[h].parentElement);!this.isBlockElement(n[h]);)n[h]=n[h].parentElement;var c=void 0;for(c=sf.base.isNullOrUndefined(r)?e.cloneNode(!0):o.cloneNode(!0);n[h].firstChild;)"LI"===c.nodeName?c.appendChild(n[h].firstChild):(3===n[h].nodeType?c.appendChild(n[h].firstChild):(c.innerHTML=n[h].innerHTML,n[h].innerHTML=""),n[h]=n[h].parentNode.replaceChild(c,n[h]));if("LI"===c.nodeName){if(r.append(c),0===h){var p=n[h].nodeName;n[h]=n[h].parentNode.replaceChild(r,n[h]);var u="LI"===p?r.parentElement:r;this.parent.nodeCutter.SplitNode(t,u,!0),sf.base.isNullOrUndefined(u.previousElementSibling)?u.parentElement.insertBefore(r,u):u.parentNode.insertBefore(r,u.nextElementSibling)}sf.base.detach(n[h])}if("LI"!==c.nodeName&&("OL"===c.parentElement.nodeName||"UL"===c.parentElement.nodeName)){var f=c.parentElement;this.parent.nodeCutter.SplitNode(t,f,!0),sf.base.isNullOrUndefined(f.previousElementSibling)?f.parentElement.prepend(c):f.previousElementSibling.after(c)}n[h]=d}if(!sf.base.isNullOrUndefined(o)&&sf.base.detach(o),this.cleanEmptyLists(),n.length>1){var g=n[0],m=n[n.length-1];a.setSelectionText(i,g,m,0,m.textContent.length)}else a.setCursorPoint(i,l,l.textContent.length)},e.prototype.cleanEmptyLists=function(){for(var e=this.parent.editableElement.querySelectorAll("ol, ul"),t=0;t<e.length;t++)""===e[t].textContent.trim()&&sf.base.detach(e[t])},e.prototype.setDeniedFormats=function(){var e=[];if(!sf.base.isNullOrUndefined(this.settings)&&!sf.base.isNullOrUndefined(this.settings.deniedFormats)){for(var t=this.settings.deniedFormats.split(";"),i=t.length,s=0;s<i;s++){var n=t[s];if(""!==n){n.trim();var o=this.makeDeniedFormatsCollection(n);sf.base.isNullOrUndefined(o)||e.push(o)}}this.deniedFormatsCollection=e}},e.prototype.makeDeniedFormatsCollection=function(e){var t=e.indexOf("("),i=e.indexOf(")"),s=e.indexOf("["),n=e.indexOf("]"),o=e.indexOf("{"),r=e.indexOf("}"),a="",l=[],h=[],d=[];t>-1&&i>-1&&(l=e.substring(t+1,i).split(" ")[0].split(")")[0].split(",")),s>-1&&n>-1&&(h=e.substring(s+1,n).split(",")),o>-1&&r>-1&&(d=e.substring(o+1,r).split(","));var c,p=[t,s,o],u=(p=p.filter((function(e){return e>-1}))).length;return 1===u?c=p[0]:2===u?c=Math.min(p[0],p[1]):3===u&&(c=Math.min(p[0],p[1],p[2])),(a=e.substring(0,c)).trim(),{tag:a,styles:d,classes:l,attributes:h}},e}(),Le=function(){function e(e){this.currentDocument=e.document,this.editableElement=e.editableElement,this.nodeSelection=new G,this.nodeCutter=new ue,this.domNode=new de(this.editableElement,this.currentDocument),this.observer=new sf.base.Observer(this),this.listObj=new ce(this),this.formatObj=new fe(this),this.alignmentObj=new ve(this),this.indentsObj=new be(this),this.linkObj=new me(this),this.imgObj=new Me(this),this.audioObj=new Ce(this),this.videoObj=new we(this),this.selectionObj=new Oe(this),this.inserthtmlObj=new Ee(this),this.insertTextObj=new Ae(this),this.clearObj=new De(this),this.tableObj=new Se(this),this.undoRedoManager=new Te(this,e.options),this.msWordPaste=new je(this),this.formatPaintetrObj=new ze(this,e.formatPainterSettings),this.wireEvents()}return e.prototype.wireEvents=function(){this.observer.on("keydown",this.editorKeyDown,this),this.observer.on("keyup",this.editorKeyUp,this),this.observer.on("keyup",this.editorKeyUp,this),this.observer.on("model_changed",this.onPropertyChanged,this),this.observer.on("ms_word_cleanup",this.onWordPaste,this),this.observer.on("onBegin",this.onBegin,this)},e.prototype.onWordPaste=function(e){this.observer.notify("ms_word_cleanup_plugin",e)},e.prototype.onPropertyChanged=function(e){this.observer.notify("model_changed_plugin",e)},e.prototype.editorKeyDown=function(e){this.observer.notify("keydown-handler",e)},e.prototype.editorKeyUp=function(e){this.observer.notify("keyup-handler",e)},e.prototype.onBegin=function(e){this.observer.notify("actionBegin",e)},e.prototype.execCommand=function(e,t,i,s,n,o,r,a){switch(e.toLowerCase()){case"lists":this.observer.notify("list-type",{subCommand:t,event:i,callBack:s,selector:r,item:o,enterAction:a});break;case"formats":this.observer.notify("format-type",{subCommand:t,event:i,callBack:s,selector:r,exeValue:o,enterAction:a});break;case"alignments":this.observer.notify("alignment-type",{subCommand:t,event:i,callBack:s,selector:r,value:o});break;case"indents":this.observer.notify("indent-type",{subCommand:t,event:i,callBack:s,selector:r});break;case"links":this.observer.notify("INSERT-LINK",{command:e,value:t,item:o,event:i,callBack:s});break;case"files":this.observer.notify(V,{command:e,value:"Image",item:o,event:i,callBack:s,selector:r});break;case"images":this.observer.notify(V,{command:e,value:t,item:o,event:i,callBack:s,selector:r});break;case"audios":this.observer.notify("INSERT-AUDIO",{command:e,value:t,item:o,event:i,callBack:s,selector:r});break;case"videos":this.observer.notify("INSERT-VIDEO",{command:e,value:t,item:o,event:i,callBack:s,selector:r});break;case"table":switch(t.toString().toLocaleLowerCase()){case"createtable":this.observer.notify("INSERT-TABLE",{item:o,event:i,callBack:s,enterAction:a});break;case"insertrowbefore":case"insertrowafter":this.observer.notify("INSERT-ROW",{item:o,event:i,callBack:s});break;case"insertcolumnleft":case"insertcolumnright":this.observer.notify("INSERT-COLUMN",{item:o,event:i,callBack:s});break;case"deleterow":this.observer.notify("DELETE-ROW",{item:o,event:i,callBack:s});break;case"deletecolumn":this.observer.notify("DELETE-COLUMN",{item:o,event:i,callBack:s});break;case"tableremove":this.observer.notify("REMOVE-TABLE",{item:o,event:i,callBack:s});break;case"tableheader":this.observer.notify("TABLE-HEADER",{item:o,event:i,callBack:s});break;case"aligntop":case"alignmiddle":case"alignbottom":this.observer.notify("TABLE_VERTICAL_ALIGN",{item:o,event:i,callBack:s});break;case"merge":this.observer.notify("TABLE_MERGE",{item:o,event:i,callBack:s});break;case"horizontalsplit":this.observer.notify("TABLE_HORIZONTAL_SPLIT",{item:o,event:i,callBack:s});break;case"verticalsplit":this.observer.notify("TABLE_VERTICAL_SPLIT",{item:o,event:i,callBack:s})}break;case"font":case"style":case"effects":case"casing":this.observer.notify("selection-type",{subCommand:t,event:i,callBack:s,value:n,selector:r,enterAction:a});break;case"inserthtml":this.observer.notify("inserthtml-type",{subCommand:t,callBack:s,value:n,enterAction:a});break;case"inserttext":this.observer.notify("insert-text-type",{subCommand:t,callBack:s,value:n});break;case"clear":this.observer.notify("clear-type",{subCommand:t,event:i,callBack:s,selector:r,enterAction:a});break;case"actions":this.observer.notify("action",{subCommand:t,event:i,callBack:s,selector:r});break;case"formatpainter":this.observer.notify("format_painter_actions",{item:o,subCommand:t,event:i,callBack:s})}},e}(),ke=(z=function(e,t){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}z(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Pe=function(e){function t(t){var i=e.call(this)||this;return i.initialize(),sf.base.extend(i,i,t,!0),i.currentDocument&&i.element&&i.updateFormatter(i.element,i.currentDocument,t.options),i}return ke(t,e),t.prototype.initialize=function(){this.keyConfig=ne},t.prototype.updateFormatter=function(e,t,i){e&&t&&(this.editorManager=new Le({document:t,editableElement:e,options:i}))},t}(ee),Be=function(){function s(e){this.rangeCollection=[],this.isImageDelete=!1,this.parent=e,this.xhtmlValidation=new F(e),this.addEventListener()}return s.prototype.addEventListener=function(){this.nodeSelectionObj=new G,this.parent.observer.on("html-toolbar-click",this.onToolbarClick,this),this.parent.observer.on(n,this.onKeyDown,this),this.parent.observer.on(i,this.onKeyUp,this),this.parent.observer.on(e,this.render,this),this.parent.observer.on(t,this.destroy,this),this.parent.observer.on("selectAll",this.selectAll,this),this.parent.observer.on("selectRange",this.selectRange,this),this.parent.observer.on("getSelectedHtml",this.getSelectedHtml,this),this.parent.observer.on(o,this.onSelectionSave,this),this.parent.observer.on(r,this.onSelectionRestore,this),this.parent.observer.on("readOnlyMode",this.updateReadOnly,this),this.parent.observer.on(l,this.onPaste,this),this.parent.observer.on("tableclass",this.isTableClassAdded,this)},s.prototype.isTableClassAdded=function(){for(var e=this.parent.inputElement.querySelectorAll("table"),t=0;t<e.length;t++)e[t].classList.contains("e-rte-table")||e[t].classList.add("e-rte-table")},s.prototype.sanitizeHelper=function(e){return e=M(e,this.parent)},s.prototype.updateReadOnly=function(){this.parent.readonly?(sf.base.attributes(this.parent.getEditPanel(),{contenteditable:"false"}),sf.base.addClass([this.parent.element],"e-rte-readonly")):(sf.base.attributes(this.parent.getEditPanel(),{contenteditable:"true"}),sf.base.removeClass([this.parent.element],"e-rte-readonly"))},s.prototype.onSelectionSave=function(){var e=this.parent.getDocument(),t=this.nodeSelectionObj.getRange(e);this.saveSelection=this.nodeSelectionObj.save(t,e)},s.prototype.onSelectionRestore=function(e){this.parent.isBlur=!1,this.parent.getEditPanel().focus(),(sf.base.isNullOrUndefined(e.items)||e.items)&&this.saveSelection.restore()},s.prototype.onKeyUp=function(e){var t,i=e.args,s=this.parent.getRange(),n=new RegExp(String.fromCharCode(8203),"g");if([8,9,13,16,17,18,20,27,37,38,39,40,44,45,46,91,112,113,114,115,116,117,118,119,120,121,122,123].indexOf(i.keyCode)<0&&!i.shiftKey&&!i.ctrlKey&&!i.altKey){if(t=s.startOffset,"#text"===s.startContainer.nodeName?s.startContainer.parentElement.classList.add("currentStartMark"):s.startContainer.classList.add("currentStartMark"),8203===s.startContainer.textContent.charCodeAt(0)&&(t=0===s.startOffset?s.startOffset:s.startOffset-1,s.startContainer.textContent=s.startContainer.textContent.replace(n,""),this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.getDocument(),s.startContainer,t)),this.parent.inputElement.innerHTML.length>this.parent.inputElement.innerHTML.replace(n,"").length){for(var o=this.parent.inputElement.firstChild;!sf.base.isNullOrUndefined(o)&&o.textContent.replace(n,"").trim().length>0;)o.innerHTML=o.innerHTML.replace(n,""),o=o.nextElementSibling;if(this.parent.inputElement.querySelector(".currentStartMark").childNodes.length>1)for(var r=this.parent.inputElement.querySelector(".currentStartMark").childNodes,a=0;a<r.length;a++)"#text"===r[a].nodeName&&0===r[a].textContent.length&&(sf.base.detach(r[a]),a--);this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.getDocument(),this.parent.inputElement.querySelector(".currentStartMark").childNodes[0],t)}var l=this.parent.inputElement.querySelector(".currentStartMark");sf.base.isNullOrUndefined(l)||(l.classList.remove("currentStartMark"),""===l.getAttribute("class").trim()&&l.removeAttribute("class")),!sf.base.isNullOrUndefined(s.startContainer.previousSibling)&&!sf.base.isNullOrUndefined(s.startContainer.previousSibling.parentElement)&&s.startContainer.parentElement===s.startContainer.previousSibling.parentElement&&8203===s.startContainer.previousSibling.textContent.charCodeAt(0)&&s.startContainer.previousSibling.textContent.length<=1&&(s.startContainer.previousSibling.textContent=s.startContainer.previousSibling.textContent.replace(n,"")),8203===s.endContainer.textContent.charCodeAt(s.endOffset)&&(t=s.startOffset,s.endContainer.textContent=s.endContainer.textContent.replace(n,""),this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.getDocument(),s.startContainer,t))}},s.prototype.onKeyDown=function(e){var t,i=this,s=e.args;if("chrome"===sf.base.Browser.info.name&&(t=this.parent.getRange(),this.backSpaceCleanup(e,t),this.deleteCleanup(e,t)),9===s.keyCode&&sf.base.isNullOrUndefined(sf.base.closest(s.target,".e-rte-toolbar"))&&this.parent.enableTabKey){var n=this.nodeSelectionObj.getRange(this.parent.getDocument()),o=this.nodeSelectionObj.getParentNodeCollection(n);if("LI"!==o[0].nodeName&&!sf.base.closest(o[0],"li")&&!sf.base.closest(o[0],"table")||0!==n.startOffset)if(s.preventDefault(),s.shiftKey){if(this.rangeCollection.length>0&&4===this.rangeCollection[this.rangeCollection.length-1].startContainer.textContent.length){var r=this.rangeCollection[this.rangeCollection.length-1].startContainer;this.nodeSelectionObj.setSelectionText(this.parent.getDocument(),r,r,0,r.textContent.length),ge.Insert(this.parent.getDocument(),document.createTextNode("")),this.rangeCollection.pop()}}else ge.Insert(this.parent.getDocument(),"&nbsp;&nbsp;&nbsp;&nbsp;"),this.rangeCollection.push(this.nodeSelectionObj.getRange(this.parent.getDocument()))}if("space"===e.args.action){var a=this.parent.getRange(),l=a.startContainer.textContent.slice(0,a.startOffset),h=this.isOrderedList(l),d=this.isUnOrderedList(l);if(h&&!d||d&&!h){var c={callBack:null,event:e.args,name:"keydown-handler"};this.parent.dotNetRef.invokeMethodAsync("ActionBeginEvent",{requestType:h?"OL":"UL",cancel:!1}).then((function(e){e.cancel||(i.parent.formatter.editorManager.observer.notify("onBegin",c),i.parent.dotNetRef.invokeMethodAsync("ActionCompleteEvent",{editorMode:i.parent.editorMode,name:"ActionCompleteEvent",requestType:h?"OL":"UL"}))}))}}if("space"===e.args.action||"enter"===e.args.action||13===e.args.keyCode){var p=this.parent.getRange(),u="#text"===p.endContainer.nodeName?p.endContainer.parentElement:p.endContainer,f=sf.base.closest(u,"a");sf.base.isNullOrUndefined(f)&&this.spaceLink(s),"HTML"===this.parent.editorMode&&this.parent.observer.notify("enterHandler",{args:e.args})}"chrome"!==sf.base.Browser.info.name||(sf.base.isNullOrUndefined(this.rangeElement)||sf.base.isNullOrUndefined(this.oldRangeElement))&&(sf.base.isNullOrUndefined(this.deleteRangeElement)||sf.base.isNullOrUndefined(this.deleteOldRangeElement))||"TD"===t.startContainer.parentElement.tagName||"TH"===t.startContainer.parentElement.tagName||(this.rangeElement=null,this.oldRangeElement=null,this.deleteRangeElement=null,this.deleteOldRangeElement=null,this.isImageDelete||s.preventDefault(),s.preventDefault())},s.prototype.isOrderedList=function(e){e=e.replace(/\u200B/g,"");var t=[/^[1]+[.]+$/,/^[i]+[.]+$/,/^[a]+[.]+$/];if(!sf.base.isNullOrUndefined(e))for(var i=0;i<t.length;i++)if(t[i].test(e))return!0;return!1},s.prototype.isUnOrderedList=function(e){e=e.replace(/\u200B/g,"");var t=[/^[*]$/,/^[-]$/];if(!sf.base.isNullOrUndefined(e))for(var i=0;i<t.length;i++)if(t[i].test(e))return!0;return!1},s.prototype.backSpaceCleanup=function(e,t){var i=!1;if("Backspace"===e.args.code&&8===e.args.keyCode&&0===t.startOffset&&0===t.endOffset&&0===this.parent.getSelection().length&&t.startContainer.textContent.length>0&&"TD"!==t.startContainer.parentElement.tagName&&"TH"!==t.startContainer.parentElement.tagName){if(this.rangeElement=this.getRootBlockNode(t.startContainer),"OL"===this.rangeElement.tagName||"UL"===this.rangeElement.tagName){var s=this.getRangeLiNode(t.startContainer);s.previousElementSibling&&s.previousElementSibling.childElementCount>0&&(this.oldRangeElement=s.previousElementSibling.lastElementChild,sf.base.isNullOrUndefined(s.lastElementChild)?this.rangeElement=s:(this.rangeElement=s.lastElementChild,i=!0))}else{if(this.rangeElement===this.parent.inputElement||"TABLE"===this.rangeElement.tagName||!sf.base.isNullOrUndefined(this.rangeElement.previousElementSibling)&&"TABLE"===this.rangeElement.previousElementSibling.tagName)return;this.oldRangeElement=this.rangeElement.previousElementSibling}if(sf.base.isNullOrUndefined(this.oldRangeElement))return;if("OL"!==this.oldRangeElement.tagName&&"UL"!==this.oldRangeElement.tagName||(this.oldRangeElement=this.oldRangeElement.lastElementChild.lastElementChild?this.oldRangeElement.lastElementChild.lastElementChild:this.oldRangeElement.lastElementChild),this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.getDocument(),this.oldRangeElement,this.oldRangeElement.childNodes.length),this.oldRangeElement.querySelector("BR")&&sf.base.detach(this.oldRangeElement.querySelector("BR")),!sf.base.isNullOrUndefined(this.rangeElement)&&this.oldRangeElement!=this.rangeElement){for(;this.rangeElement.firstChild;)this.oldRangeElement.appendChild(this.rangeElement.childNodes[0]);i?sf.base.detach(this.rangeElement.parentElement):sf.base.detach(this.rangeElement),this.oldRangeElement.normalize()}}},s.prototype.deleteCleanup=function(e,t){var i,s,n=!1;if("Delete"===e.args.code&&46===e.args.keyCode&&0!==this.parent.getText().trim().length&&0===this.parent.getSelection().length&&"TD"!==t.startContainer.parentElement.tagName&&"TH"!==t.startContainer.parentElement.tagName){if(this.deleteRangeElement=s=this.getRootBlockNode(t.startContainer),"OL"===this.deleteRangeElement.tagName||"UL"===this.deleteRangeElement.tagName)(i=this.getRangeLiNode(t.startContainer)).nextElementSibling&&i.nextElementSibling.childElementCount>0&&!i.nextElementSibling.querySelector("BR")?sf.base.isNullOrUndefined(i.lastElementChild)?this.deleteRangeElement=i:(this.deleteRangeElement=i.lastElementChild,n=!0):this.deleteRangeElement=this.getRangeElement(i);else if(3===this.deleteRangeElement.nodeType||"TABLE"===this.deleteRangeElement.tagName||!sf.base.isNullOrUndefined(this.deleteRangeElement.nextElementSibling)&&"TABLE"===this.deleteRangeElement.nextElementSibling.tagName)return;if(this.getCaretIndex(t,this.deleteRangeElement)===this.deleteRangeElement.textContent.length){if(sf.base.isNullOrUndefined(i)?this.deleteOldRangeElement=this.deleteRangeElement.nextElementSibling:n||!sf.base.isNullOrUndefined(i.nextElementSibling)?this.deleteOldRangeElement=this.getRangeElement(i.nextElementSibling):this.deleteOldRangeElement=s.nextElementSibling,sf.base.isNullOrUndefined(this.deleteOldRangeElement))return;0===t.startOffset&&1===t.endOffset&&"IMG"===this.deleteRangeElement.childNodes[0].nodeName?(this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.parent.getDocument(),this.deleteRangeElement,this.deleteRangeElement,0,1),this.isImageDelete=!0):(this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.getDocument(),this.deleteRangeElement,this.deleteRangeElement.childNodes.length),this.isImageDelete=!1),this.deleteRangeElement.querySelector("BR")&&sf.base.detach(this.deleteRangeElement.querySelector("BR"));var o="SPAN"!==this.deleteOldRangeElement.tagName&&"e-img-resize"===this.deleteRangeElement.className;if(!sf.base.isNullOrUndefined(this.deleteRangeElement)&&"OL"!==this.deleteOldRangeElement.tagName&&"UL"!==this.deleteOldRangeElement.tagName&&this.deleteOldRangeElement!==this.deleteRangeElement&&o&&"LI"!==this.deleteOldRangeElement.tagName&&this.deleteOldRangeElement!==this.deleteRangeElement){for(;this.deleteOldRangeElement.firstChild;)this.deleteRangeElement.appendChild(this.deleteOldRangeElement.childNodes[0]);n?sf.base.detach(this.deleteOldRangeElement.parentElement):sf.base.detach(this.deleteOldRangeElement),this.deleteRangeElement.normalize()}else this.deleteRangeElement=null,this.deleteOldRangeElement=null}else this.deleteRangeElement=null}},s.prototype.getCaretIndex=function(e,t){var i=0;if(0!==this.parent.getDocument().getSelection().rangeCount){var s=e.cloneRange();s.selectNodeContents(t),s.setEnd(e.endContainer,e.endOffset),i=s.toString().length}return i},s.prototype.getRangeElement=function(e){return e.lastElementChild?"BR"===e.lastElementChild.tagName?e.lastElementChild.previousElementSibling?e.lastElementChild.previousElementSibling:e:e.lastElementChild:e},s.prototype.getRootBlockNode=function(e){for(;e&&this.parent&&this.parent.inputElement!=e&&e.parentElement!==this.parent.inputElement;e=e)e=e.parentElement;return e},s.prototype.getRangeLiNode=function(e){for(var t=e.parentElement;t!=this.parent.inputElement&&(1!==t.nodeType||"LI"!==t.tagName);)t=t.parentElement;return t},s.prototype.onPaste=function(e){var t=new RegExp(/([^\S]|^)(((https?\:\/\/)|(www\.))(\S+))/gi);if(e.text.match(t)){e.args.preventDefault();for(var i=this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()),s=(this.parent.formatter.editorManager.nodeSelection.save(i,this.parent.getDocument()),new RegExp(/([^\S]|^)(((https?\:\/\/)))/gi)),n=new RegExp(/([^\S]|^)(((www\.))(\S+))/gi),o=e.text.split("\n"),r="",a=0;a<o.length;a++)if(""===o[a].trim())r+=N(this.parent);else{for(var l="",h=!0,d=o[a].split(" "),c=0;c<d.length;c++)""===d[c].trim()?l+=h?"&nbsp;":" ":(h=!1,l+=d[c]+" ");r+=0===a?"<span>"+l.trim()+"</span>":"<p>"+l.trim()+"</p>"}var p=document.createElement("div");p.setAttribute("class","pasteContent"),p.style.display="inline",p.innerHTML=r;var u=p.querySelectorAll("span, p");for(a=0;a<u.length;a++){var f=u[a].innerHTML.split(" "),g="";for(c=0;c<f.length;c++)f[c].match(s)||f[c].match(n)?g+='<a className="e-rte-anchor" href="'+f[c]+'" title="'+f[c]+'">'+f[c]+" </a>":g+=f[c]+" ";u[a].innerHTML=g.trim()}e.callBack(p.innerHTML)}},s.prototype.spaceLink=function(e){var t=this.nodeSelectionObj.getRange(this.parent.getDocument()),i=this.nodeSelectionObj.getParentNodeCollection(t),s=t.startContainer.textContent.substr(0,t.endOffset),n=s.split(" "),o=n[n.length-1],r=t.startOffset-(s.length-n[n.length-1].length);o=o.slice(0,r);var a=new RegExp(/([^\S]|^)(((https?\:\/\/)|(www\.))(\S+))/gi);if("A"!==i[0].nodeName&&o.match(a)){var l=this.nodeSelectionObj.save(t,this.parent.getDocument()),h={url:o.indexOf("http")>-1?o:"http://"+o,selection:l,selectParent:this.parent.formatter.editorManager.nodeSelection.getParentNodeCollection(t),text:o,title:"",target:"_blank"};this.parent.formatter.process(this.parent,{item:{command:"Links",subCommand:"CreateLink"}},e,h)}},s.prototype.onToolbarClick=function(e){var t,i,s,n=e.item,o=e.originalEvent.target,r=o&&sf.base.closest(o,".e-rte-quick-popup");if(r&&!r.classList.contains("e-rte-inline-popup")){if("SourceCode"!==n.subCommand&&"Preview"!==n.subCommand&&"FontColor"!==n.subCommand&&"BackgroundColor"!==n.subCommand){!u()||"Images"!==n.command&&"Audios"!==n.command&&"Videos"!==n.command||this.nodeSelectionObj.restore();var a=this.nodeSelectionObj.getRange(this.parent.getDocument());t=this.nodeSelectionObj.save(a,this.parent.getDocument()),i=this.nodeSelectionObj.getNodeCollection(a),s=this.nodeSelectionObj.getParentNodeCollection(a)}"Images"===n.command&&this.parent.observer.notify("image-toolbar-action",{member:"image",args:e,selectNode:i,selection:t,selectParent:s}),"Audios"===n.command&&this.parent.observer.notify("audio-toolbar-action",{member:"audio",args:e,selectNode:i,selection:t,selectParent:s}),"Videos"===n.command&&this.parent.observer.notify("video-toolbar-action",{member:"video",args:e,selectNode:i,selection:t,selectParent:s}),"Links"===n.command&&this.parent.observer.notify("link-toolbar-action",{member:"link",args:e,selectNode:i,selection:t,selectParent:s}),"Table"===n.command&&this.parent.observer.notify("table-toolbar-action",{member:"table",args:e,selectNode:i,selection:t,selectParent:s})}else{if("SourceCode"!==n.subCommand&&"Preview"!==n.subCommand&&"FontColor"!==n.subCommand&&"BackgroundColor"!==n.subCommand){a=this.nodeSelectionObj.getRange(this.parent.getDocument());t=this.nodeSelectionObj.save(a,this.parent.getDocument()),i=this.nodeSelectionObj.getNodeCollection(a),s=this.nodeSelectionObj.getParentNodeCollection(a)}switch(n.subCommand){case"Maximize":this.parent.observer.notify("enableFullScreen",{args:e});break;case"Minimize":this.parent.observer.notify("disableFullScreen",{args:e});break;case"CreateLink":this.parent.observer.notify("insertLink",{member:"link",args:e,selectNode:i,selection:t,selectParent:s});break;case"RemoveLink":this.parent.observer.notify("unLink",{member:"link",args:e,selectNode:i,selection:t,selectParent:s});break;case"Print":this.parent.print();break;case"Image":this.parent.observer.notify("insertImage",{member:"image",args:e,selectNode:i,selection:t,selectParent:s});break;case"Audio":this.parent.observer.notify("insertAudio",{member:"audio",args:e,selectNode:i,selection:t,selectParent:s});break;case"Video":this.parent.observer.notify("insertVideo",{member:"video",args:e,selectNode:i,selection:t,selectParent:s});break;case"CreateTable":this.parent.observer.notify("createTable",{member:"table",args:e,selection:t});break;case"SourceCode":this.parent.observer.notify("sourceCode",{member:"viewSource",args:e});break;case"Preview":this.parent.observer.notify("updateSource",{member:"updateSource",args:e});break;case"FontColor":case"BackgroundColor":break;default:this.parent.formatter.process(this.parent,e,e.originalEvent,null)}}},s.prototype.render=function(){var e=this.parent.getEditPanel(),t={undoRedoSteps:this.parent.undoRedoSteps,undoRedoTimer:this.parent.undoRedoTimer};this.parent.formatter=new Pe({currentDocument:this.parent.getDocument(),element:e,options:t}),this.parent.toolbarSettings.enable&&(this.toolbarUpdate=new J(this.parent)),this.parent.inlineMode.enable&&(sf.base.isNullOrUndefined(this.parent.fontFamily.default)||(e.style.fontFamily=this.parent.fontFamily.default),sf.base.isNullOrUndefined(this.parent.fontSize.default)||(e.style.fontSize=this.parent.fontSize.default)),this.parent.observer.notify("bind-on-end",{})},s.prototype.selectAll=function(){var e=function e(t,i){var s=[];for(i=i.firstChild;i;i=i.nextSibling)3===i.nodeType?s.push(i):s=s.concat(e(t,i));return s}(this.parent.getDocument(),this.parent.getEditPanel());e.length>0&&this.parent.formatter.editorManager.nodeSelection.setSelectionText(this.parent.getDocument(),e[0],e[e.length-1],0,e[e.length-1].textContent.length)},s.prototype.selectRange=function(e){this.parent.formatter.editorManager.nodeSelection.setRange(this.parent.getDocument(),e.range)},s.prototype.getSelectedHtml=function(e){e.callBack(this.parent.formatter.editorManager.nodeSelection.getRange(this.parent.getDocument()).toString())},s.prototype.removeEventListener=function(){this.parent.observer.off(e,this.render),this.parent.observer.off("html-toolbar-click",this.onToolbarClick),this.parent.observer.off(t,this.destroy),this.parent.observer.off(n,this.onKeyDown),this.parent.observer.off(i,this.onKeyUp),this.parent.observer.off("selectAll",this.selectAll),this.parent.observer.off("selectRange",this.selectRange),this.parent.observer.off("getSelectedHtml",this.getSelectedHtml),this.parent.observer.off(o,this.onSelectionSave),this.parent.observer.off(r,this.onSelectionRestore),this.parent.observer.off("readOnlyMode",this.updateReadOnly),this.parent.observer.off(l,this.onPaste),this.parent.observer.off("tableclass",this.isTableClassAdded)},s.prototype.destroy=function(){this.removeEventListener()},s}(),Ue=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.showFullScreen=function(e){var t=this;!0===this.parent.toolbarSettings.enable&&"Markdown"!==this.parent.editorMode&&this.parent.quickToolbarModule.hideQuickToolbars(),this.scrollableParent=sf.popups.getScrollableParent(this.parent.element),this.parent.actionBeginEnabled?this.parent.dotNetRef.invokeMethodAsync("ActionBeginEvent",{requestType:"Maximize",cancel:!1}).then((function(e){e.cancel||t.showActionBeginCallback()})):this.showActionBeginCallback(),setTimeout((function(){t.parent.setContentHeight(),t.parent.inputElement.focus()}),100)},e.prototype.showActionBeginCallback=function(){this.toggleParentOverflow(!0),this.parent.setContentHeight(),this.invokeActionComplete("Maximize")},e.prototype.hideFullScreen=function(e){var t=this;!0===this.parent.toolbarSettings.enable&&"Markdown"!==this.parent.editorMode&&this.parent.quickToolbarModule.hideQuickToolbars();for(var i=document.querySelectorAll(".e-rte-overflow"),s=0;s<i.length;s++)sf.base.removeClass([i[s]],["e-rte-overflow"]);this.parent.actionBeginEnabled?this.parent.dotNetRef.invokeMethodAsync("ActionBeginEvent",{requestType:"Minimize",cancel:!1}).then((function(e){e.cancel||t.hideActionBeginCallback()})):this.hideActionBeginCallback(),setTimeout((function(){t.parent.setContentHeight(),t.parent.inputElement.focus()}),100)},e.prototype.hideActionBeginCallback=function(){this.parent.setContentHeight(),this.invokeActionComplete("Minimize")},e.prototype.invokeActionComplete=function(e){this.parent.actionCompleteEnabled&&this.parent.dotNetRef.invokeMethodAsync("ActionCompleteEvent",{requestType:e})},e.prototype.toggleParentOverflow=function(e){if(!sf.base.isNullOrUndefined(this.scrollableParent))for(var t=0;t<this.scrollableParent.length;t++)if("#document"===this.scrollableParent[t].nodeName){var i=document.querySelector("body");sf.base.addClass([i],["e-rte-overflow"])}else{i=this.scrollableParent[t];sf.base.addClass([i],["e-rte-overflow"])}},e.prototype.onKeyDown=function(e){var t=e.args;switch(t.action){case"full-screen":this.parent.dotNetRef.invokeMethodAsync("ShowFullScreenClient"),this.showFullScreen(e.args),t.preventDefault();break;case"escape":this.parent.dotNetRef.invokeMethodAsync("HideFullScreenClient"),this.hideFullScreen(e.args),t.preventDefault()}},e.prototype.addEventListener=function(){this.parent.observer.on("enableFullScreen",this.showFullScreen,this),this.parent.observer.on("disableFullScreen",this.hideFullScreen,this),this.parent.observer.on(n,this.onKeyDown,this),this.parent.observer.on(t,this.destroy,this)},e.prototype.removeEventListener=function(){this.parent.observer.off("enableFullScreen",this.showFullScreen),this.parent.observer.off("disableFullScreen",this.hideFullScreen),this.parent.observer.off(n,this.onKeyDown),this.parent.observer.off(t,this.destroy)},e.prototype.destroy=function(){this.parent.element.classList.contains("e-rte-full-screen")&&this.toggleParentOverflow(!1);for(var e=document.querySelectorAll(".e-rte-overflow"),t=0;t<e.length;t++)sf.base.removeClass([e[t]],["e-rte-overflow"]);this.removeEventListener()},e}(),Re=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("enterHandler",this.enterHandler,this),this.parent.observer.on(t,this.destroy,this)},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.removeEventListener=function(){this.parent.observer.off("enterHandler",this.enterHandler),this.parent.observer.off(t,this.destroy)},e.prototype.getRangeNode=function(){this.range=this.parent.getRange(),this.startNode="#text"===this.range.startContainer.nodeName?this.range.startContainer.parentElement:this.range.startContainer,this.endNode="#text"===this.range.endContainer.nodeName?this.range.endContainer.parentElement:this.range.endContainer},e.prototype.enterHandler=function(e){var t=this;if(sf.base.isNullOrUndefined(document.querySelector(".e-mention.e-popup-open"))){this.getRangeNode();var i=!0;if(this.formatTags=["h1","h2","h3","h4","h5","h6","blockquote"],!sf.base.isNullOrUndefined(this.startNode.closest("TABLE"))&&!sf.base.isNullOrUndefined(this.endNode.closest("TABLE"))){i=!1;for(var s=this.startNode,n=s;!this.parent.formatter.editorManager.domNode.isBlockNode(s);)n=s=s.parentElement;i="TD"!==n.tagName&&"TBODY"!==n.tagName}if(13===e.args.which&&"Enter"===e.args.code&&sf.base.isNullOrUndefined(this.startNode.closest("LI, UL, OL"))&&sf.base.isNullOrUndefined(this.endNode.closest("LI, UL, OL"))&&i&&sf.base.isNullOrUndefined(this.startNode.closest("PRE"))&&sf.base.isNullOrUndefined(this.endNode.closest("PRE"))){var o={name:"actionBegin",requestType:e.args.shiftKey?"ShiftEnterAction":"EnterAction",originalEvent:e.args,cancel:!1};e.args.preventDefault(),this.parent.dotNetRef.invokeMethodAsync("ActionBeginEvent",o).then((function(s){if(!s.cancel){var n=e.args.shiftKey;if("SPAN"!==t.range.startContainer.nodeName||!t.range.startContainer.classList.contains("e-video-wrap")&&!t.range.startContainer.classList.contains("e-audio-wrap"))if(t.range.deleteContents(),"#text"===t.range.startContainer.nodeName&&0===t.range.startContainer.textContent.length&&t.range.startContainer.parentElement!==t.parent.inputElement)"BR"===t.parent.enterKey?t.range.startContainer.parentElement.innerHTML="&#8203;":t.range.startContainer.parentElement.innerHTML="<br>";else if(t.range.startContainer===t.parent.inputElement&&""===t.range.startContainer.innerHTML){t.range.startContainer.innerHTML="<br>";var o=t.range.startContainer.childNodes[t.range.startOffset];t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),o,0)}else if(t.parent.inputElement===t.range.startContainer){if("#text"===(o=t.range.startContainer.childNodes[t.range.startOffset]).nodeName&&0===o.textContent.length)t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),o,0===o.textContent.length?0:o.previousSibling.textContent.length);else if(t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),o,o.textContent.length>=0?0:1),0===o.previousSibling.textContent.length){if(sf.base.detach(o.previousSibling),!n){for(var r=sf.base.isNullOrUndefined(o.lastChild)?o:o.lastChild;!sf.base.isNullOrUndefined(r)&&"#text"!==r.nodeName&&"BR"!==r.nodeName;)r=r.lastChild;"BR"!==r.nodeName&&0===r.parentElement.textContent.length&&0===r.parentElement.innerHTML.length&&"BR"!==r.parentElement.nodeName&&r.parentElement.appendChild(sf.base.createElement("BR")),t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),"BR"===r.nodeName?r:r.parentElement,r.parentElement.textContent.length>=0||"BR"===r.nodeName?0:1)}}else if(0===o.textContent.length){for(r="#text"===o.previousSibling.nodeName?o.previousSibling:o.previousSibling.lastChild;!sf.base.isNullOrUndefined(r)&&"#text"!==r.nodeName;)r=r.lastChild;t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),r,r.textContent.length),sf.base.detach(o)}else if("BR"!==t.parent.enterKey&&0!==o.previousSibling.textContent.length&&0!==o.textContent.length)return void e.args.preventDefault();t.getRangeNode()}if(t.range.startContainer===t.range.endContainer&&t.range.startOffset===t.range.endOffset&&t.range.startContainer===t.parent.inputElement){if(sf.base.isNullOrUndefined(t.range.startContainer.childNodes[t.range.startOffset])||sf.base.isNullOrUndefined(t.range.startContainer.childNodes[t.range.startOffset].previousElementSibling)||"TABLE"!==t.range.startContainer.childNodes[t.range.startOffset].previousElementSibling.nodeName||t.parent.tableModule.removeResizeEle(),1!==t.parent.inputElement.childNodes.length||"TABLE"!==t.parent.inputElement.childNodes[0].nodeName)if(sf.base.isNullOrUndefined(t.range.startContainer.childNodes[t.range.startOffset])){for(var a=t.range.startContainer.childNodes[t.range.startOffset-1];null!==a.lastChild&&"#text"!==a.nodeName;)a=a.lastChild;t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),a,"BR"===a.nodeName?0:a.textContent.length)}else t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),t.range.startContainer.childNodes[t.range.startOffset],0);t.getRangeNode()}if("P"===t.parent.enterKey&&!n||"DIV"===t.parent.enterKey&&!n||"P"===t.parent.shiftEnterKey&&n||"DIV"===t.parent.shiftEnterKey&&n){if(1===t.range.startOffset&&1===t.parent.inputElement.childNodes.length&&"TABLE"===t.parent.inputElement.childNodes[0].nodeName){(u=t.createInsertElement(n)).appendChild(sf.base.createElement("BR")),t.parent.inputElement.appendChild(u),t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),u,0)}else{var l=void 0;l=i&&t.parent.formatter.editorManager.domNode.isBlockNode(t.startNode)?t.startNode:t.parent.formatter.editorManager.domNode.blockParentNode(t.startNode);var h=!1,d=!1;if(0===t.range.startOffset||0===t.range.endOffset||t.range.startContainer!==t.range.endContainer||!sf.base.isNullOrUndefined(l.childNodes[0])&&"IMG"===l.childNodes[0].nodeName&&l.querySelectorAll("img, audio, video").length>0)0===t.range.startOffset&&0===t.range.endOffset&&(d=!0);else{var c=t.range.startContainer.textContent.substring(0,t.range.startOffset);160!==c.charCodeAt(t.range.startOffset-1)&&0===c.trim().length&&(d=!0)}if(t.removeBRElement(l),!(-1!==sf.base.Browser.userAgent.indexOf("Firefox")&&0===t.range.startOffset&&t.range.startContainer===t.range.endContainer&&"#text"===t.range.startContainer.nodeName&&!t.parent.formatter.editorManager.domNode.isBlockNode(t.range.startContainer.previousSibling)&&t.range.startContainer.parentElement===t.range.startContainer.previousSibling.parentElement)&&(0===t.range.startOffset&&0===t.range.endOffset||d)&&(sf.base.isNullOrUndefined(t.range.startContainer.previousSibling)||"IMG"!==t.range.startContainer.previousSibling.nodeName&&"BR"!==t.range.startContainer.previousSibling.nodeName)){var p=void 0,u=void 0;!sf.base.isNullOrUndefined(t.range.startContainer.childNodes)&&0===t.range.startContainer.textContent.length&&(t.range.startContainer.querySelectorAll("img, audio, video").length>0||"IMG"===t.range.startContainer.nodeName||"TABLE"===t.range.startContainer.nodeName)?(u=t.createInsertElement(n),h=!0,p=!1):0!==l.textContent.trim().length||"IMG"===l.childNodes[0].nodeName||""===l.textContent.trim()&&l.querySelectorAll("img, audio, video").length>0?(t.range.startOffset===t.range.endOffset&&0!==t.range.startOffset?u=t.parent.formatter.editorManager.nodeCutter.SplitNode(t.range,l,!1).cloneNode(!0):(u=t.parent.formatter.editorManager.nodeCutter.SplitNode(t.range,l,!0).cloneNode(!0),h=!0),p=!1):(u=t.parent.formatter.editorManager.nodeCutter.SplitNode(t.range,l,!0).cloneNode(!0),p=!0);var f=void 0;for(f=t.formatTags.indexOf(u.nodeName.toLocaleLowerCase())<0?t.createInsertElement(n):sf.base.createElement(u.nodeName);u.firstChild;)f.appendChild(u.firstChild);if(l.parentElement.insertBefore(f,l),!p){r=f;var g=void 0;if(t.range.startOffset===t.range.endOffset&&0!==t.range.startOffset)for(;!sf.base.isNullOrUndefined(r)&&"#text"!==r.nodeName&&"BR"!==r.nodeName;)g=r,r=r.lastChild;else g=r;g.innerHTML="<br>",h||sf.base.detach(l)}t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),f.nextElementSibling,0)}else if(0!==l.textContent.length||!sf.base.isNullOrUndefined(l.childNodes[0])&&"IMG"===l.childNodes[0].nodeName)if(t.range.startContainer===t.range.endContainer&&"SPAN"===t.range.startContainer.nodeName&&(t.range.startContainer.classList.contains("e-video-wrap")||t.range.startContainer.classList.contains("e-audio-wrap"))){if(l.textContent.trim().length>0){u=t.parent.formatter.editorManager.nodeCutter.SplitNode(t.range,l,!0);for(var m=sf.base.isNullOrUndefined(u.previousSibling.querySelector(".e-video-wrap"))?u.previousSibling.querySelector(".e-audio-wrap"):u.previousSibling.querySelector(".e-video-wrap"),v=!1,b=m.previousSibling;!sf.base.isNullOrUndefined(b)&&"#text"!==b.nodeName;)b=b.lastChild;if(sf.base.isNullOrUndefined(b)){var y=sf.base.createElement("br");m.parentElement.appendChild(y),v=!0}v?t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),m.parentElement,0):t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),b,b.textContent.length),sf.base.detach(m)}else{for(o=(u=t.parent.formatter.editorManager.nodeCutter.SplitNode(t.range,l,!0)).previousSibling;!sf.base.isNullOrUndefined(o.firstChild);)sf.base.detach(o.firstChild);y=sf.base.createElement("br");o.appendChild(y),t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),o,0)}sf.base.isNullOrUndefined(t.parent.audioModule)||t.parent.audioModule.hideAudioQuickToolbar(),sf.base.isNullOrUndefined(t.parent.videoModule)||t.parent.videoModule.hideVideoQuickToolbar()}else{u=t.parent.formatter.editorManager.nodeCutter.SplitNode(t.range,l,!0);if(sf.base.isNullOrUndefined(u.childNodes[0])||"#text"!==u.childNodes[0].nodeName||0!==u.childNodes[0].textContent.length||sf.base.detach(u.childNodes[0]),0===u.textContent.trim().length){y=sf.base.createElement("br");if("A"===t.startNode.nodeName){var M=t.startNode.parentElement;t.startNode.parentElement.insertBefore(y,t.startNode),sf.base.detach(t.startNode),t.startNode=M}else"BR"!==t.startNode.nodeName&&t.startNode.appendChild(y);"\n"===u.childNodes[0].textContent&&sf.base.detach(u.childNodes[0]),t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),t.startNode,0)}if(("P"===t.parent.enterKey||"DIV"===t.parent.enterKey)&&!n||("DIV"===t.parent.shiftEnterKey||"P"===t.parent.shiftEnterKey)&&n){var C=t.formatTags.indexOf(u.nodeName.toLocaleLowerCase());if(C<0||C>=0&&0===u.textContent.trim().length){for(var w=t.createInsertElement(n);u.firstChild;)w.appendChild(u.firstChild);t.parent.formatter.editorManager.domNode.insertAfter(w,u),sf.base.detach(u),t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),t.parent.formatter.editorManager.domNode.isBlockNode(t.startNode)?w:t.startNode,0)}}}else if(sf.base.isNullOrUndefined(l.children[0])||"BR"===l.children[0].tagName){(f=t.createInsertElement(n)).innerHTML="<br>",t.parent.formatter.editorManager.domNode.insertAfter(f,l),t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),f,0)}else{var u=t.parent.formatter.editorManager.nodeCutter.SplitNode(t.range,l,!1).cloneNode(!0);t.parent.formatter.editorManager.domNode.insertAfter(u,l),t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),u,u.textContent.length>=0?0:1)}}e.args.preventDefault()}if("BR"===t.parent.enterKey&&!n||"BR"===t.parent.shiftEnterKey&&n){var S=void 0;if(t.parent.formatter.editorManager.domNode.isBlockNode(t.startNode))S=t.startNode;else{for(var N=t.startNode,x=N;!t.parent.formatter.editorManager.domNode.isBlockNode(N);)x=N,N=N.parentElement;S=N===t.parent.inputElement?x:N}t.removeBRElement(S);for(var O=S.lastChild;!sf.base.isNullOrUndefined(O)&&"#text"!==O.nodeName&&"BR"!==O.nodeName&&"IMG"!==O.nodeName;)O=O.lastChild;var E=t.range.startContainer===O?t.range.startContainer.textContent.length:S.textContent.length,I="IMG"===t.range.startContainer.nodeName||t.range.startContainer.childNodes.length>0&&"IMG"===t.range.startContainer.childNodes[t.range.startOffset].nodeName;if(S!==t.parent.inputElement&&t.parent.formatter.editorManager.domNode.isBlockNode(S)&&t.range.startOffset===t.range.endOffset&&(t.range.startOffset===E||0===S.textContent.trim().length&&I)){var D=sf.base.createElement("br");if(0===t.range.startOffset&&"TABLE"===t.range.startContainer.nodeName)t.range.startContainer.parentElement.insertBefore(D,t.range.startContainer);else if("BR"===O.nodeName&&0===S.textContent.length)t.parent.formatter.editorManager.domNode.insertAfter(D,O);else if(0===t.range.startOffset&&0===t.range.endOffset&&I){var T="IMG"===t.range.startContainer.nodeName?t.range.startContainer:t.range.startContainer.childNodes[t.range.startOffset];S.insertBefore(D,T),D=T}else{var j=sf.base.createElement("br");t.parent.formatter.editorManager.domNode.insertAfter(D,t.range.startContainer),t.parent.formatter.editorManager.domNode.insertAfter(j,t.range.startContainer)}t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),D,0)}else if(sf.base.isNullOrUndefined(S)||S===t.parent.inputElement||"BR"===S.nodeName)t.insertBRElement();else if(0===S.textContent.trim().length||1===S.textContent.trim().length&&8203===S.textContent.charCodeAt(0)){u=t.parent.formatter.editorManager.nodeCutter.SplitNode(t.range,S,!0).cloneNode(!0);t.parent.formatter.editorManager.domNode.insertAfter(u,S);var A=sf.base.createElement("br");u.parentElement.insertBefore(A,u),t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),u,0)}else{u=void 0,A=sf.base.createElement("br");if(0!==t.range.startOffset||0!==t.range.endOffset||sf.base.isNullOrUndefined(S.previousSibling)||"BR"!==S.previousSibling.nodeName)t.insertBRElement();else{u=t.parent.formatter.editorManager.nodeCutter.SplitNode(t.range,S,!1).cloneNode(!0),t.parent.formatter.editorManager.domNode.insertAfter(A,S),t.insertFocusContent();for(r=A.nextSibling;!sf.base.isNullOrUndefined(r)&&"#text"!==r.nodeName;)r=r.lastChild;t.parent.formatter.editorManager.nodeSelection.setCursorPoint(t.parent.getDocument(),r,0)}}e.args.preventDefault()}var z={name:"actionComplete",requestType:n?"ShiftEnterAction":"EnterAction",event:e.args};t.parent.dotNetRef.invokeMethodAsync("ActionCompleteEvent",z)}}))}}},e.prototype.removeBRElement=function(e){-1!==sf.base.Browser.userAgent.indexOf("Firefox")&&this.range.endOffset===e.textContent.length&&(0!==e.textContent.length||e.querySelectorAll("BR").length>1)&&!sf.base.isNullOrUndefined(e.lastChild)&&"BR"===e.lastChild.nodeName&&sf.base.detach(e.lastChild)},e.prototype.insertBRElement=function(){var e=!1,t=!0;0===this.range.endContainer.textContent.length&&"BR"===this.range.startContainer.nodeName&&(t=!1);var i=sf.base.createElement("br");if("BR"===this.startNode.nodeName&&"BR"===this.endNode.nodeName&&0===this.range.startOffset&&this.range.startOffset===this.range.endOffset?(this.parent.formatter.editorManager.domNode.insertAfter(i,this.startNode),e=!0):(this.startNode!==this.parent.inputElement||sf.base.isNullOrUndefined(this.range.startContainer.previousSibling)||"BR"!==this.range.startContainer.previousSibling.nodeName||0!==this.range.startContainer.textContent.length||(e=!0),this.range.insertNode(i)),e||!sf.base.isNullOrUndefined(i.nextElementSibling)&&"BR"===i.nextElementSibling.tagName||!sf.base.isNullOrUndefined(i.nextSibling)&&i.nextSibling.textContent.length>0)this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.getDocument(),!sf.base.isNullOrUndefined(i.nextSibling)&&t?i.nextSibling:i,0),e=!1;else{var s=sf.base.createElement("br");this.range.insertNode(s),this.parent.formatter.editorManager.nodeSelection.setCursorPoint(this.parent.getDocument(),i,0)}},e.prototype.insertFocusContent=function(){0===this.range.startContainer.textContent.length&&("#text"===this.range.startContainer.nodeName?this.range.startContainer.parentElement.innerHTML="&#8203;":this.range.startContainer.innerHTML="&#8203;")},e.prototype.createInsertElement=function(e){var t;return"DIV"===this.parent.enterKey&&!e||"DIV"===this.parent.shiftEnterKey&&e?t=sf.base.createElement("div"):("P"===this.parent.enterKey&&!e||"P"===this.parent.shiftEnterKey&&e)&&(t=sf.base.createElement("p")),t},e}(),He={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222,"]":221,"[":219,"=":187},Ye=function(){function e(t,i){var s=this;this.keyPressHandler=function(t){for(var i=t.altKey,n=t.ctrlKey,o=t.shiftKey,r=t.metaKey,a=t.which,l=0,h=Object.keys(s.keyConfigs);l<h.length;l++)for(var d=h[l],c=0,p=s.keyConfigs[d].split(",");c<p.length;c++){var u=p[c],f=e.getKeyConfigData(u.trim());i!==f.altKey||n!==f.ctrlKey&&!r||o!==f.shiftKey||a!==f.keyCode||(t.action=d)}s.keyAction&&s.keyAction(t)},this.element=t,sf.base.extend(this,this,i),this.onKeyPressHandler=this.keyPressHandler.bind(this),this.bind()}return e.prototype.destroy=function(){this.unWireEvents()},e.prototype.bind=function(){this.wireEvents()},e.prototype.wireEvents=function(){this.element.addEventListener(this.eventName,this.onKeyPressHandler)},e.prototype.unWireEvents=function(){this.element.removeEventListener(this.eventName,this.onKeyPressHandler)},e.getKeyConfigData=function(t){if(t in this.configCache)return this.configCache[t];var i=t.toLowerCase().split("+"),s={altKey:-1!==i.indexOf("alt"),ctrlKey:-1!==i.indexOf("ctrl"),shiftKey:-1!==i.indexOf("shift"),keyCode:null};return i[i.length-1].length>1&&Number(i[i.length-1])?s.keyCode=Number(i[i.length-1]):s.keyCode=e.getKeyCode(i[i.length-1]),e.configCache[t]=s,s},e.getKeyCode=function(e){return He[e]||e.toUpperCase().charCodeAt(0)},e.configCache={},e}(),Fe=function(){function i(e){this.parent=e,this.addEventListener()}return i.prototype.addEventListener=function(){this.parent.observer.on("sourceCode",this.sourceCode,this),this.parent.observer.on(e,this.onInitialEnd,this),this.parent.observer.on("updateSource",this.updateSourceCode,this),this.parent.observer.on(t,this.destroy,this)},i.prototype.onInitialEnd=function(){this.parent.formatter.editorManager.observer.on("keydown-handler",this.onKeyDown,this)},i.prototype.removeEventListener=function(){this.unWireEvent(),this.parent.observer.off("sourceCode",this.sourceCode),this.parent.observer.off("updateSource",this.updateSourceCode),this.parent.observer.off(e,this.onInitialEnd),this.parent.observer.off(t,this.destroy),this.parent.formatter.editorManager.observer.off("keydown-handler",this.onKeyDown)},i.prototype.getSourceCode=function(){return sf.base.createElement("textarea",{className:"e-rte-srctextarea",attrs:{"aria-labelledby":this.parent.element.id+"_rte-edit-view"}})},i.prototype.wireEvent=function(e){this.keyboardModule=new Ye(e,{keyAction:this.previewKeyDown.bind(this),keyConfigs:this.parent.formatter.keyConfig,eventName:"keydown"}),sf.base.EventHandler.add(this.previewElement,"mousedown",this.mouseDownHandler,this)},i.prototype.unWireEvent=function(){this.keyboardModule&&this.keyboardModule.destroy(),this.previewElement&&sf.base.EventHandler.remove(this.previewElement,"mousedown",this.mouseDownHandler)},i.prototype.wireBaseKeyDown=function(){this.keyboardModule=new Ye(this.parent.getEditPanel(),{keyAction:this.parent.keyDown.bind(this.parent),keyConfigs:this.parent.formatter.keyConfig,eventName:"keydown"})},i.prototype.unWireBaseKeyDown=function(){this.parent.keyboardModule.destroy()},i.prototype.mouseDownHandler=function(e){this.parent.observer.notify("sourceCodeMouseDown",{args:e})},i.prototype.previewKeyDown=function(e){switch(e.action){case"html-source":this.parent.dotNetRef.invokeMethodAsync("PreviewCodeClient"),this.updateSourceCode(e),e.preventDefault();break;case"toolbar-focus":if(this.parent.toolbarSettings.enable){this.parent.getToolbar().querySelector('.e-toolbar-item[aria-disabled="false"][title] [tabindex]').focus()}}},i.prototype.onKeyDown=function(e){switch(e.event.action){case"html-source":e.event.preventDefault(),this.parent.dotNetRef.invokeMethodAsync("ViewSourceClient"),this.sourceCode(e),e.callBack({requestType:"SourceCode",editorMode:"HTML",event:e.event})}},i.prototype.sourceCode=function(e){var t=this;this.parent.isBlur=!1,this.parent.dotNetRef.invokeMethodAsync("ActionBeginEvent",{requestType:"SourceCode",cancel:!1}).then((function(e){if(!e.cancel){var i=sf.base.selectAll(".e-toolbar-item",t.parent.element);if(sf.base.isNullOrUndefined(t.previewElement)&&(t.previewElement=t.getSourceCode()),t.parent.updateValueData(),t.parent.iframeSettings.enable){var s=void 0;(s=sf.base.isNullOrUndefined(t.parent.element.querySelector("#"+t.parent.element.id+"_source-view"))?sf.base.createElement("div",{className:"e-source-content",id:t.parent.element.id+"_source-view"}):t.parent.element.querySelector("#"+t.parent.element.id+"_source-view")).appendChild(t.previewElement),t.parent.element.appendChild(s),s.style.height=t.parent.getPanel().style.height,s.style.marginTop=t.parent.getPanel().style.marginTop,t.getPanel().value=t.getTextAreaValue(t.parent.getEditPanel()),t.parent.getPanel().style.display="none",s.style.display="block",t.getPanel().style.display="block"}else t.parent.inputElement.parentElement.appendChild(t.previewElement),t.getPanel().value=t.getTextAreaValue(t.parent.getEditPanel()),t.previewElement.style.height=t.parent.inputElement.offsetHeight+"px",t.parent.inputElement.style.display="none",t.previewElement.style.display="block";if(t.parent.isBlur=!1,t.parent.getToolbar()&&sf.base.removeClass([t.parent.getToolbar()],["e-expand-open"]),sf.base.removeClass(i,["e-active"]),t.parent.setContentHeight("sourceCode",!0),t.wireEvent(t.previewElement),t.unWireBaseKeyDown(),t.previewElement.focus(),!sf.base.isNullOrUndefined(t.parent.placeholder)&&!t.parent.iframeSettings.enable)t.parent.element.querySelector(".rte-placeholder").style.display="none";t.parent.dotNetRef.invokeMethodAsync("ActionCompleteEvent",{requestType:"SourceCode"}).then((function(e){t.parent.invokeChangeEvent()}))}}))},i.prototype.updateSourceCode=function(e){var t=this;this.parent.isBlur=!1,this.parent.dotNetRef.invokeMethodAsync("ActionBeginEvent",{requestType:"Preview",cancel:!1}).then((function(e){if(!e.cancel){var i=t.getPanel(),s=t.parent.serializeValue(i.value),n=void 0;if(n=null===s||""===s?"DIV"===t.parent.enterKey?"<div><br/></div>":"BR"===t.parent.enterKey?"<br/>":"<p><br/></p>":s,t.parent.iframeSettings.enable?(i.parentElement.style.display="none",i.style.display="none",t.parent.contentPanel.style.display="block",t.parent.getEditPanel().innerHTML=t.parent.enableHtmlEncode?O(n):n):(i.style.display="none",t.parent.getEditPanel().style.display="block",t.parent.getEditPanel().innerHTML=t.parent.enableHtmlEncode?O(n):n),t.parent.isBlur=!1,t.parent.getToolbar()&&sf.base.removeClass([t.parent.getToolbar()],["e-expand-open"]),t.parent.setContentHeight("preview",!0),t.wireBaseKeyDown(),t.unWireEvent(),t.parent.getEditPanel().focus(),t.parent.updateValueData(),!sf.base.isNullOrUndefined(t.parent.placeholder)&&0===t.parent.getEditPanel().innerText.length)t.parent.element.querySelector(".rte-placeholder").style.display="block";t.parent.addAudioVideoWrapper(),t.parent.dotNetRef.invokeMethodAsync("ActionCompleteEvent",{requestType:"Preview"}).then((function(e){t.parent.invokeChangeEvent()})),t.parent.observer.notify("tableclass",{})}}))},i.prototype.getTextAreaValue=function(e){var t;return t=this.parent.enableXhtml?this.parent.getXhtmlString(this.parent.value):this.parent.value,"<p><br></p>"===e.innerHTML||"<div><br></div>"===e.innerHTML||"<br>"===e.innerHTML||1===e.childNodes.length&&("P"===e.childNodes[0].tagName&&7===e.innerHTML.length||"DIV"===e.childNodes[0].tagName&&11===e.innerHTML.length)?"":t},i.prototype.getPanel=function(){return this.parent.element.querySelector(".e-rte-srctextarea")},i.prototype.getViewPanel=function(){return this.parent.iframeSettings.enable&&this.getPanel()?this.getPanel().parentElement:this.getPanel()},i.prototype.destroy=function(){this.removeEventListener()},i}(),qe=function(){function e(e){this.parent=e}return e.prototype.quickToolbarOpen=function(){this.parent.dotNetRef.invokeMethodAsync("QuickToolbarOpenEvent",this.popupObj.element.classList.toString(),this.targetType)},e.prototype.renderPopup=function(e,t){this.targetType=t,e.popupObj=new sf.popups.Popup(e.element,{targetType:"relative",relateTo:this.parent.element,open:this.quickToolbarOpen.bind(this)}),this.popupObj=e.popupObj,e.popupObj.hide()},e}(),Ve=function(){function e(e){this.parent=e,this.isDOMElement=!1,this.popupRenderer=new qe(e)}return e.prototype.render=function(e,t){this.element=e,this.popupRenderer.renderPopup(this,t),this.addEventListener()},e.prototype.setPosition=function(e){var t,i,s=sf.base.closest(e.target,".e-img-caption"),n=!e.target.classList.contains("e-imginline")&&!e.target.classList.contains("e-imgbreak"),o=sf.base.isNullOrUndefined(s)?e.target:s,r=o.offsetTop,a=window.pageYOffset+e.parentData.top;i=r-e.editTop>e.popHeight?a+e.tBarElementHeight+(r-e.editTop)-e.popHeight-5:e.editTop+e.editHeight-(r+o.offsetHeight)>e.popHeight?a+e.tBarElementHeight+(r-e.editTop)+o.offsetHeight+5:e.y,t=(o=n?e.target:o).offsetWidth>e.popWidth?o.offsetWidth/2-e.popWidth/2+e.parentData.left+o.offsetLeft:e.parentData.left+o.offsetLeft,this.popupObj.position.X=t+e.popWidth>e.parentData.right?e.parentData.right-e.popWidth:t,this.popupObj.position.Y=i>=0?i:e.y+5,this.popupObj.dataBind()},e.prototype.checkCollision=function(e,t,i){var s,n,o=e.parentData.top,r=e.windowY+o+e.tBarElementHeight,a=[];a="document"===t?sf.popups.isCollide(e.popup):sf.popups.isCollide(e.popup,e.parentElement);for(var l=0;l<a.length;l++)switch(a[l]){case"top":n="document"===t?e.windowY:window.pageYOffset+o+e.tBarElementHeight;break;case"bottom":n="document"===t?"inline"===i?e.y-e.popHeight-10:e.windowHeight-(o+e.tBarElementHeight)>e.popHeight?r-e.windowHeight>e.popHeight?r+(e.windowHeight-o)-e.popHeight:r:e.windowY+(o+e.tBarElementHeight):"IMG"!==e.target.tagName?e.parentData.bottom+window.pageYOffset-e.popHeight-10:e.parentData.bottom+window.pageYOffset-e.popHeight-5;break;case"right":s="inline"===i?window.pageXOffset+(e.windowWidth-(e.popWidth+e.bodyRightSpace+10)):e.x-e.popWidth;break;case"left":s="inline"===i?0:e.parentData.left}this.popupObj.position.X=s||this.popupObj.position.X,this.popupObj.position.Y=n||this.popupObj.position.Y,this.popupObj.dataBind()},e.prototype.showPopup=function(e,t,i,s){var n=this;this.parent.onQuickTbOpenEnabled?this.parent.dotNetRef.invokeMethodAsync("BeforeQuickToolbarOpenEvent").then((function(o){o.cancel||n.onQuickTbOpenCallback(e,t,i,s)})):this.onQuickTbOpenCallback(e,t,i,s)},e.prototype.onQuickTbOpenCallback=function(e,t,i,s){var n,o,r,a=window.getComputedStyle(document.body),l=parseFloat(a.marginRight.split("px")[0])+parseFloat(a.paddingRight.split("px")[0]),h=window.innerHeight,d=window.innerWidth,c=this.parent.element,p=!sf.base.isNullOrUndefined(this.parent.getToolbar()),f=p&&this.parent.toolbarModule.getToolbarHeight(),g=p&&this.parent.toolbarModule.getExpandTBarPopHeight(),m=p?f+g:0;(sf.base.addClass([this.element],["e-hide"]),sf.base.Browser.isDevice&&!u()&&sf.base.addClass([this.parent.getToolbar()],["e-hide"]),this.parent.iframeSettings.enable)?(n=(r=this.parent.getPanel().contentWindow).pageYOffset,o=r.innerHeight):(n=(r=sf.base.closest(i,".e-rte-content"))?r.scrollTop:0,o=r?r.offsetHeight:0);!this.parent.inlineMode.enable&&sf.base.closest(i,"table"),sf.base.append([this.element],document.body),this.popupObj.position.X=e+20,this.popupObj.position.Y=t+20,this.popupObj.dataBind(),this.popupObj.element.classList.add("e-popup-open");var v={x:e,y:t,target:i,editTop:n,editHeight:o,popup:this.popupObj.element,popHeight:this.popupObj.element.offsetHeight,popWidth:this.popupObj.element.offsetWidth,parentElement:c,bodyRightSpace:l,windowY:window.pageYOffset,windowHeight:h,windowWidth:d,parentData:c.getBoundingClientRect(),tBarElementHeight:m};("IMG"===i.tagName||"AUDIO"===i.tagName||"VIDEO"===i.tagName||"IFRAME"===i.tagName||i.classList&&(i.classList.contains("e-audio-wrap")||i.classList.contains("e-clickelem")||i.classList.contains("e-video-clickelem")))&&this.setPosition(v),this.parent.inlineMode.enable||this.checkCollision(v,"parent",""),this.checkCollision(v,"document",this.parent.inlineMode.enable?"inline":""),this.popupObj.element.classList.remove("e-popup-close"),sf.base.removeClass([this.element],["e-hide"]),this.popupObj.show({name:"ZoomIn",duration:250}),sf.base.setStyleAttribute(this.element,{maxWidth:window.outerWidth+"px"}),sf.base.addClass([this.element],["e-rte-pop"]),this.isDOMElement=!0,this.parent.dotNetRef.invokeMethodAsync("UpdateClass",this.popupObj.element.classList.toString(),s)},e.prototype.hidePopup=function(){var e=this.parent.viewSourceModule.getViewPanel();sf.base.Browser.isDevice&&!u()&&sf.base.removeClass([this.parent.getToolbar()],["e-hide"]),sf.base.isNullOrUndefined(this.parent.getToolbar())||this.parent.inlineMode.enable||sf.base.isNullOrUndefined(e)||e.style.display,this.removeEleFromDOM(),this.isDOMElement=!1},e.prototype.removeEleFromDOM=function(){this.popupObj.hide(),this.element.classList.add("e-hide"),this.element.classList.add("e-rte-quick-popup-hide"),this.isDOMElement&&(sf.base.removeClass([this.element],["e-rte-pop"]),this.popupObj.element.removeAttribute("style"),this.popupObj.destroy(),this.parent.quickTbClosedEnabled&&this.parent.dotNetRef.invokeMethodAsync("QuickToolbarCloseEvent"))},e.prototype.updateStatus=function(e){if(this.element.classList.contains("e-rte-inline-popup")){var t=sf.base.selectAll(".e-toolbar-item",this.element);if(!(t.length<=0))A({args:e,dropDownModule:null,parent:this.parent,tbElements:t,tbItems:this.parent.toolbarSettings.items},!0)}},e.prototype.addEventListener=function(){this.parent.observer.on(t,this.destroy,this),this.parent.inlineMode.enable&&this.parent.observer.on("toolbar-updated",this.updateStatus,this)},e.prototype.removeEventListener=function(){this.parent.observer.off(t,this.destroy),this.parent.inlineMode.enable&&this.parent.observer.off("toolbar-updated",this.updateStatus)},e.prototype.destroy=function(){this.popupObj&&!this.popupObj.isDestroyed&&(this.popupObj.destroy(),this.removeEleFromDOM()),this.removeEventListener()},e}(),We=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.showImageQTBar=function(e,t,i,s){var n=this;if(!this.parent.readonly&&this.parent.quickToolbarSettings.enable){var o=document.querySelector("#"+this.parent.element.id+"_Image_Quick_Popup");this.imageQTBar=new Ve(this.parent),this.imageQTBar.render(o,s),this.parent.dotNetRef.invokeMethodAsync("ShowImagePopup",this.imageQTBar.popupObj.element.classList.toString(),s).then((function(){n.imageQTBar.showPopup(e,t,i,s)}))}},e.prototype.showAudioQTBar=function(e,t,i,s){var n=this;if(!this.parent.readonly&&this.parent.quickToolbarSettings.enable){var o=document.querySelector("#"+this.parent.element.id+"_Audio_Quick_Popup");this.audioQTBar=new Ve(this.parent),this.audioQTBar.render(o,s),this.parent.dotNetRef.invokeMethodAsync("ShowAudioQuickToolbar",this.audioQTBar.popupObj.element.classList.toString(),s).then((function(){n.audioQTBar.showPopup(e,t,i,s)}))}},e.prototype.showVideoQTBar=function(e,t,i,s){var n=this;if(!this.parent.readonly&&this.parent.quickToolbarSettings.enable){var o=document.querySelector("#"+this.parent.element.id+"_Video_Quick_Popup");this.videoQTBar=new Ve(this.parent),this.videoQTBar.render(o,s),this.parent.dotNetRef.invokeMethodAsync("ShowVideoQuickToolbar",this.videoQTBar.popupObj.element.classList.toString(),s).then((function(){n.videoQTBar.showPopup(e,t,i,s)}))}},e.prototype.hideImageQTBar=function(){this.imageQTBar&&(this.imageQTBar.hidePopup(),this.imageQTBar=void 0,this.parent.dotNetRef.invokeMethodAsync("HideImagePopup"))},e.prototype.hideAudioQTBar=function(){this.audioQTBar&&(this.audioQTBar.hidePopup(),this.audioQTBar=void 0,this.parent.dotNetRef.invokeMethodAsync("HideAudioQuickToolbar"))},e.prototype.hideVideoQTBar=function(){this.videoQTBar&&(this.videoQTBar.hidePopup(),this.videoQTBar=void 0,this.parent.dotNetRef.invokeMethodAsync("HideVideoQuickToolbar"))},e.prototype.showLinkQTBar=function(e,t,i,s){var n=this;if(!this.parent.readonly&&this.parent.quickToolbarSettings.enable){var o=document.querySelector("#"+this.parent.element.id+"_Link_Quick_Popup");this.linkQTBar=new Ve(this.parent),this.linkQTBar.render(o,s),this.parent.dotNetRef.invokeMethodAsync("ShowLinkPopup",this.linkQTBar.popupObj.element.classList.toString()).then((function(){n.linkQTBar.showPopup(e,t,i,s)}))}},e.prototype.hideLinkQTBar=function(){this.linkQTBar&&(this.linkQTBar.hidePopup(),this.linkQTBar=void 0,this.parent.dotNetRef.invokeMethodAsync("HideLinkPopup"))},e.prototype.showTableQTBar=function(e,t,i,s){var n=this;if(!this.parent.readonly&&this.parent.quickToolbarSettings.enable){var o=document.querySelector("#"+this.parent.element.id+"_Table_Quick_Popup");this.tableQTBar=new Ve(this.parent),this.tableQTBar.render(o,s),this.parent.dotNetRef.invokeMethodAsync("ShowTablePopup",this.tableQTBar.popupObj.element.classList.toString()).then((function(){n.tableQTBar.showPopup(e,t,i,s)}))}},e.prototype.hideTableQTBar=function(){this.tableQTBar&&(this.tableQTBar.hidePopup(),this.tableQTBar=void 0,this.parent.dotNetRef.invokeMethodAsync("HideTablePopup"))},e.prototype.showInlineQTBar=function(e,t,i){var s=this;if(!this.parent.readonly&&this.parent.inlineMode.enable&&this.parent.inlineMode.enable&&(!sf.base.Browser.isDevice||u())){var n=document.querySelector("#"+this.parent.element.id+"_Inline_Quick_Popup");this.inlineQTBar=new Ve(this.parent),this.inlineQTBar.render(n,"Inline"),sf.base.EventHandler.add(this.inlineQTBar.element,"mousedown",this.onMouseDown,this);var o=this.inlineQTBar.popupObj.element.classList.toString();this.parent.dotNetRef.invokeMethodAsync("ShowInlinePopup",o).then((function(){s.inlineQTBar.showPopup(e,t,i,"Inline")}))}},e.prototype.hideInlineQTBar=function(){this.inlineQTBar&&(this.inlineQTBar.hidePopup(),this.inlineQTBar=void 0,this.parent.dotNetRef.invokeMethodAsync("HideInlinePopup"))},e.prototype.hideQuickToolbars=function(){sf.base.isNullOrUndefined(this.linkQTBar)||this.hideLinkQTBar(),sf.base.isNullOrUndefined(this.imageQTBar)||this.hideImageQTBar(),sf.base.isNullOrUndefined(this.audioQTBar)||this.hideAudioQTBar(),sf.base.isNullOrUndefined(this.videoQTBar)||this.hideVideoQTBar(),sf.base.isNullOrUndefined(this.tableQTBar)||this.hideTableQTBar(),!this.parent.inlineMode.enable||sf.base.Browser.isDevice&&!u()||this.hideInlineQTBar()},e.prototype.scrollHandler=function(){"hide"===this.parent.quickToolbarSettings.actionOnScroll.toLocaleLowerCase()&&this.hideQuickToolbars()},e.prototype.selectionChangeHandler=function(e){var t=this;this.parent.inlineMode.onSelection&&(clearTimeout(this.deBouncer),this.deBouncer=window.setTimeout((function(){t.onSelectionChange(e)}),1e3))},e.prototype.onSelectionChange=function(e){sf.base.isNullOrUndefined(sf.base.select(".e-rte-inline-popup.e-popup",document.body))&&(this.parent.getDocument().getSelection().isCollapsed||this.mouseUpHandler({args:e}))},e.prototype.toolbarUpdated=function(e){sf.base.isNullOrUndefined(this.linkQTBar)||this.hideLinkQTBar(),sf.base.isNullOrUndefined(this.imageQTBar)||this.hideImageQTBar(),sf.base.isNullOrUndefined(this.audioQTBar)||this.hideAudioQTBar(),sf.base.isNullOrUndefined(this.videoQTBar)||this.hideVideoQTBar(),sf.base.isNullOrUndefined(this.tableQTBar)||this.hideTableQTBar()},e.prototype.deBounce=function(e,t,i){var s=this;clearTimeout(this.deBouncer),this.deBouncer=window.setTimeout((function(){s.showInlineQTBar(e,t,i)}),1e3)},e.prototype.onMouseDown=function(e){this.parent.isBlur=!1,this.parent.isRTE=!0},e.prototype.mouseUpHandler=function(e){if(this.parent.inlineMode.enable&&(!sf.base.Browser.isDevice||u())){var t=e.args.touches?e.args.changedTouches[0]:e.args,i=this.parent.getRange(),s=e.args.target,n=sf.base.select(".e-rte-inline-popup",document.body);if(sf.base.isNullOrUndefined(n)||n.classList.contains("e-hide")){if(u()&&e.touchData&&e.touchData.prevClientX!==e.touchData.clientX&&e.touchData.prevClientY!==e.touchData.clientY)return;this.hideInlineQTBar();var o=this.parent.element.getBoundingClientRect().left;if(this.offsetX=this.parent.iframeSettings.enable?window.pageXOffset+o+t.clientX:t.pageX,this.offsetY=function(e,t,i){return i?window.pageYOffset+t.getBoundingClientRect().top+e.clientY:e.pageY}(t,this.parent.element,this.parent.iframeSettings.enable),"TEXTAREA"===s.nodeName)this.showInlineQTBar(this.offsetX,this.offsetY,s);else{var r=sf.base.closest(s,"a");if(!("IMG"===(s=r||s).tagName||"A"===s.tagName||sf.base.closest(s,"td,th")&&i.collapsed)){if(this.parent.inlineMode.onSelection&&i.collapsed)return;this.target=s,this.showInlineQTBar(this.offsetX,this.offsetY,s)}}}}},e.prototype.keyDownHandler=function(){!this.parent.inlineMode.enable||sf.base.Browser.isDevice&&!u()||sf.base.isNullOrUndefined(sf.base.select(".e-rte-inline-popup.e-popup",document))||this.hideInlineQTBar()},e.prototype.inlineQTBarMouseDownHandler=function(){!this.parent.inlineMode.enable||sf.base.Browser.isDevice&&!u()||sf.base.isNullOrUndefined(sf.base.select(".e-rte-inline-popup.e-popup",document))||this.hideInlineQTBar()},e.prototype.keyUpHandler=function(e){if(this.parent.inlineMode.enable&&!sf.base.Browser.isDevice){var t=e.args;if(this.parent.inlineMode.onSelection)return void(this.parent.getSelection().length>0&&(t.ctrlKey&&65===t.keyCode||t.shiftKey&&(33===t.keyCode||34===t.keyCode||35===t.keyCode||36===t.keyCode||37===t.keyCode||38===t.keyCode||39===t.keyCode||40===t.keyCode))&&this.showInlineQTBar(this.offsetX,this.offsetY,t.target));this.deBounce(this.offsetX,this.offsetY,t.target)}},e.prototype.onKeyDown=function(e){var t=e.args;8!==t.which&&46!==t.which||(this.imageQTBar&&!I(this.imageQTBar.element,"e-popup-close")&&this.imageQTBar.hidePopup(),this.audioQTBar&&!I(this.audioQTBar.element,"e-popup-close")&&this.audioQTBar.hidePopup(),this.videoQTBar&&!I(this.videoQTBar.element,"e-popup-close")&&this.videoQTBar.hidePopup())},e.prototype.onIframeMouseDown=function(){this.hideQuickToolbars(),this.hideInlineQTBar()},e.prototype.addEventListener=function(){this.parent.inlineMode.enable&&this.parent.inlineMode.onSelection&&u()&&sf.base.EventHandler.add(this.parent.getDocument(),"selectionchange",this.selectionChangeHandler,this),this.parent.observer.on("toolbar-updated",this.toolbarUpdated,this),this.wireInlineQTBarEvents(),this.parent.observer.on("scroll",this.scrollHandler,this),this.parent.observer.on("contentscroll",this.scrollHandler,this),this.parent.observer.on("focusChange",this.hideQuickToolbars,this),this.parent.observer.on("iframe-click",this.onIframeMouseDown,this),this.parent.observer.on(t,this.destroy,this),this.parent.observer.on(n,this.onKeyDown,this)},e.prototype.removeEventListener=function(){sf.base.EventHandler.remove(this.parent.getDocument(),"selectionchange",this.selectionChangeHandler),this.parent.observer.off("toolbar-updated",this.toolbarUpdated),this.unWireInlineQTBarEvents(),this.parent.observer.off("scroll",this.scrollHandler),this.parent.observer.off("contentscroll",this.scrollHandler),this.parent.observer.off("focusChange",this.hideQuickToolbars),this.parent.observer.off(t,this.destroy),this.parent.observer.off("iframe-click",this.onIframeMouseDown),this.parent.observer.off(n,this.onKeyDown)},e.prototype.wireInlineQTBarEvents=function(){this.parent.observer.on("mouseUp",this.mouseUpHandler,this),this.parent.observer.on(a,this.inlineQTBarMouseDownHandler,this),this.parent.observer.on(n,this.keyDownHandler,this),this.parent.observer.on(i,this.keyUpHandler,this),this.parent.observer.on("sourceCodeMouseDown",this.mouseUpHandler,this)},e.prototype.unWireInlineQTBarEvents=function(){this.parent.observer.off("mouseUp",this.mouseUpHandler),this.parent.observer.off(a,this.inlineQTBarMouseDownHandler),this.parent.observer.off(n,this.keyDownHandler),this.parent.observer.off(i,this.keyUpHandler),this.parent.observer.off("sourceCodeMouseDown",this.mouseUpHandler)},e.prototype.destroy=function(){this.linkQTBar&&(sf.base.EventHandler.remove(this.linkQTBar.element,"mousedown",this.onMouseDown),this.linkQTBar.destroy()),this.imageQTBar&&(sf.base.EventHandler.remove(this.imageQTBar.element,"mousedown",this.onMouseDown),this.imageQTBar.destroy()),this.audioQTBar&&(sf.base.EventHandler.remove(this.audioQTBar.element,"mousedown",this.onMouseDown),this.audioQTBar.destroy()),this.videoQTBar&&(sf.base.EventHandler.remove(this.videoQTBar.element,"mousedown",this.onMouseDown),this.videoQTBar.destroy()),this.tableQTBar&&(sf.base.EventHandler.remove(this.tableQTBar.element,"mousedown",this.onMouseDown),this.tableQTBar.destroy()),this.inlineQTBar&&(sf.base.EventHandler.remove(this.inlineQTBar.element,"mousedown",this.onMouseDown),u()&&sf.base.EventHandler.remove(document,"selectionchange",this.selectionChangeHandler),this.inlineQTBar.destroy()),this.removeEventListener()},e}(),_e="e-file-status",Qe="e-upload-file-list",Xe="e-file-abort-btn",Ge="e-file-reload-btn",Ke="e-file-remove-btn",Ze="e-file-delete-btn",Je="e-upload-progress-bar",$e="e-upload-progress-wrap",et=function(){function e(e,t,i){this.fileList=[],this.filesData=[],this.files=[],this.minFileSize=0,this.maxFileSize=3e7,this.uploadedFilesData=[],this.base64String=[],this.isForm=!1,this.allTypes=!1,this.btnTabIndex="0",this.disableKeyboardNavigation=!1,this.actionCompleteCount=0,this.flag=!0,this.selectedFiles=[],this.uploaderName="UploadFiles",this.element=t,this.parent=i,this.cssClass=e.cssClass,this.asyncSettings=e.asyncSettings,this.allowedExtensions=e.allowedExtensions,this.addEventListener(),this.render()}return e.prototype.addEventListener=function(){this.parent.observer.on("beforePasteUploadCallBack",this.beforePasteUploadCallBack,this)},e.prototype.removeEventListener=function(){this.parent.observer.off("beforePasteUploadCallBack",this.beforePasteUploadCallBack)},e.prototype.render=function(){this.browserName=sf.base.Browser.info.name,this.uploaderName=this.element.getAttribute("name"),this.initializeUpload(),this.wireEvents(),this.setExtensions(this.allowedExtensions),this.setRTL(),this.setCSSClass()},e.prototype.initializeUpload=function(){this.element.setAttribute("aria-label","Uploader"),this.element.setAttribute("tabindex","-1");var e=sf.base.createElement("span",{className:"e-file-select",attrs:{style:"display: none;"}});this.element.parentElement.insertBefore(e,this.element),this.dropAreaWrapper=sf.base.createElement("div",{className:"e-file-select-wrap"}),this.element.parentElement.insertBefore(this.dropAreaWrapper,this.element),e.appendChild(this.element),this.dropAreaWrapper.appendChild(e),this.uploadWrapper=sf.base.createElement("div",{className:"e-upload e-lib e-control-wrapper",attrs:{style:"background: white"}}),this.dropAreaWrapper.parentElement.insertBefore(this.uploadWrapper,this.dropAreaWrapper),this.uploadWrapper.appendChild(this.dropAreaWrapper)},e.prototype.setExtensions=function(e){""===e||sf.base.isNullOrUndefined(e)?this.element.removeAttribute("accept"):this.element.setAttribute("accept",e)},e.prototype.setRTL=function(){this.enableRtl?sf.base.addClass([this.uploadWrapper],"e-rtl"):sf.base.removeClass([this.uploadWrapper],"e-rtl")},e.prototype.setCSSClass=function(e){var t=this.cssClass;sf.base.isNullOrUndefined(this.cssClass)||""===this.cssClass||(t=this.cssClass.replace(/\s+/g," ").trim()),sf.base.isNullOrUndefined(this.cssClass)||""===t||sf.base.addClass([this.uploadWrapper],t.split(t.indexOf(",")>-1?",":" "));var i=e;sf.base.isNullOrUndefined(e)||(i=e.replace(/\s+/g," ").trim()),sf.base.isNullOrUndefined(e)||""===i||sf.base.removeClass([this.uploadWrapper],i.split(" "))},e.prototype.createFileList=function(e,t){if(this.createParentUL(),this.isFormUpload())this.uploadWrapper.classList.add("e-form-upload"),this.formFileList(e,this.element.files);else for(var i=0,s=e;i<s.length;i++){var n=s[i],o=sf.base.createElement("li",{className:Qe,attrs:{"data-file-name":n.name,"data-files-count":"1"}}),r=sf.base.createElement("span",{className:"e-file-container"}),a=sf.base.createElement("span",{className:"e-file-name",attrs:{title:n.name}});a.innerHTML=this.getFileNameOnly(n.name);var l=sf.base.createElement("span",{className:"e-file-type"});if(l.innerHTML="."+this.getFileType(n.name),this.enableRtl){var h=sf.base.createElement("span",{className:"e-rtl-container"});h.appendChild(l),h.appendChild(a),r.appendChild(h)}else r.appendChild(a),r.appendChild(l);var d=sf.base.createElement("span",{className:"e-file-size"});d.innerHTML=this.bytesToSize(n.size),r.appendChild(d);var c=sf.base.createElement("span",{className:_e});r.appendChild(c),c.innerHTML=n.status,o.appendChild(r);var p=sf.base.createElement("span",{className:" e-icons",attrs:{tabindex:this.btnTabIndex}});"msie"===this.browserName&&p.classList.add("e-msie"),p.setAttribute("title","Remove"),o.appendChild(p),sf.base.EventHandler.add(p,"click",this.removeFiles,this),"2"===n.statusCode?(c.classList.add("e-upload-success"),p.classList.add(Ze),p.setAttribute("title","Delete file")):"1"!==n.statusCode&&(c.classList.remove("e-upload-success"),c.classList.add("e-validation-fails")),"1"===n.statusCode&&""!==this.asyncSettings.saveUrl&&(c.innerHTML=""),p.classList.contains(Ze)||p.classList.add(Ke),this.listParent.appendChild(o),this.fileList.push(o),this.truncateName(a);var u=this.flag;this.isPreLoadFile(n)&&(this.flag=!1,this.checkActionComplete(!0),this.flag=u)}},e.prototype.createParentUL=function(){sf.base.isNullOrUndefined(this.listParent)&&(this.listParent=sf.base.createElement("ul",{className:"e-upload-files"}),this.uploadWrapper.appendChild(this.listParent))},e.prototype.isFormUpload=function(){var e=!1;return!this.isForm||!sf.base.isNullOrUndefined(this.asyncSettings.saveUrl)&&""!==this.asyncSettings.saveUrl||!sf.base.isNullOrUndefined(this.asyncSettings.removeUrl)&&""!==this.asyncSettings.removeUrl||(e=!0),e},e.prototype.getFileType=function(e){var t,i=e.lastIndexOf(".");return i>=0&&(t=e.substring(i+1)),t||""},e.prototype.getFileNameOnly=function(e){var t=this.getFileType(e);return e.split("."+t)[0]},e.prototype.truncateName=function(e){var t=e;("edge"!==this.browserName&&t.offsetWidth<t.scrollWidth||t.offsetWidth+1<t.scrollWidth)&&this.getSlicedName(t)},e.prototype.getSlicedName=function(e){var t;t=e.textContent,e.dataset.tail=t.slice(t.length-10)},e.prototype.setListToFileInfo=function(e,t){for(var i=0,s=e;i<s.length;i++){s[i].list=t}},e.prototype.getFileSize=function(e){for(var t=0,i=0,s=e;i<s.length;i++){t+=s[i].size}return t},e.prototype.bytesToSize=function(e){var t=-1;if(!e)return"0.0 KB";do{e/=1024,t++}while(e>99);return t>=2&&(e*=1024,t=1),Math.max(e,0).toFixed(1)+" "+["KB","MB"][t]},e.prototype.createFormInput=function(e){var t=this.element.cloneNode(!0);t.classList.add("e-hidden-file-input");for(var i=0,s=e;i<s.length;i++){s[i].input=t}t.setAttribute("name",this.uploaderName),this.uploadWrapper.querySelector(".e-file-select").appendChild(t),"msie"!==this.browserName&&"edge"!==this.browserName&&(this.element.value="")},e.prototype.checkActionComplete=function(e){e?++this.actionCompleteCount:--this.actionCompleteCount,this.filesData.length===this.actionCompleteCount&&this.flag&&(this.flag=!1)},e.prototype.isPreLoadFile=function(e){for(var t=!1,i=0;i<this.files.length;i++)this.files[i].name===e.name.slice(0,e.name.lastIndexOf("."))&&this.files[i].type===e.type&&(t=!0);return t},e.prototype.validatedFileSize=function(e){var t="",i="";return e<this.minFileSize?t="File size is too small":e>this.maxFileSize?i="File size is too large":(t="",i=""),{minSize:t,maxSize:i}},e.prototype.isBlank=function(e){return!e||/^\s*$/.test(e)},e.prototype.addInvalidClass=function(e){e.classList.add("e-file-invalid")},e.prototype.checkExtension=function(e){var t=e;if(!this.isBlank(this.allowedExtensions)){for(var i=[],s=0,n=this.allowedExtensions.split(",");s<n.length;s++){var o=n[s];i.push(o.trim().toLocaleLowerCase())}for(var r=0;r<e.length;r++)-1===i.indexOf(("."+e[r].type).toLocaleLowerCase())&&(e[r].status="File type is not allowed",e[r].statusCode="0")}return t},e.prototype.getFilesData=function(e){return sf.base.isNullOrUndefined(e)?this.filesData:this.getSelectedFiles(e)},e.prototype.getFilesInArray=function(e){var t=[];return e instanceof Array?t=e:t.push(e),t},e.prototype.formValidateFileInfo=function(e,t){var i=e.status,s=this.validatedFileSize(e.size);""===s.minSize&&""===s.maxSize||(this.addInvalidClass(t),i=""!==s.minSize?"File size is too small":""!==s.maxSize?"File size is too large":i);var n=this.checkExtension(this.getFilesInArray(e))[0].status;return"File type is not allowed"===n&&(this.addInvalidClass(t),i=n),i},e.prototype.clearAll=function(){if(sf.base.isNullOrUndefined(this.listParent))return"msie"!==this.browserName&&(this.element.value=""),void(this.filesData=[]);this.clearData(),this.actionCompleteCount=0},e.prototype.clearData=function(e){sf.base.isNullOrUndefined(this.listParent)||(sf.base.detach(this.listParent),this.listParent=null),"msie"===this.browserName||e||(this.element.value=""),this.fileList=[],this.filesData=[],this.removeActionButtons()},e.prototype.removeActionButtons=function(){this.actionButtons&&(sf.base.detach(this.actionButtons),this.actionButtons=null)},e.prototype.checkActionButtonStatus=function(){if(this.actionButtons){var e=this.uploadWrapper.querySelectorAll(".e-validation-fails").length+this.uploadWrapper.querySelectorAll(".e-upload-fails:not(.e-upload-progress)").length+this.uploadWrapper.querySelectorAll("span.e-upload-success").length+this.uploadWrapper.querySelectorAll("span.e-upload-progress").length;e>0&&e===this.uploadWrapper.querySelectorAll("li").length?this.uploadButton.setAttribute("disabled","disabled"):this.uploadButton.removeAttribute("disabled")}},e.prototype.getSelectedFiles=function(e){for(var t=[],i=this.fileList[e],s=this.getFilesData(),n=+i.getAttribute("data-files-count"),o=0,r=0;r<e;r++)o+=+this.fileList[r].getAttribute("data-files-count");for(var a=o;a<o+n;a++)t.push(s[a]);return t},e.prototype.formFileList=function(e,t){var i=sf.base.createElement("li",{className:Qe});i.setAttribute("data-files-count",e.length+"");for(var s,n=sf.base.createElement("span",{className:"e-file-container"}),o=0,r=e;o<r.length;o++){var a=r[o],l=sf.base.createElement("span",{className:"e-file-name"});l.innerHTML=this.getFileNameOnly(a.name);var h=sf.base.createElement("span",{className:"e-file-type"});if(h.innerHTML="."+this.getFileType(a.name),this.enableRtl){var d=sf.base.createElement("span",{className:"e-rtl-container"});d.appendChild(h),d.appendChild(l),n.appendChild(d)}else n.appendChild(l),n.appendChild(h);this.truncateName(l),s=this.formValidateFileInfo(a,i)}i.appendChild(n),this.setListToFileInfo(e,i);var c=sf.base.createElement("span");if(i.classList.contains("e-file-invalid")?(c.classList.add(_e),c.classList.add("e-file-invalid"),c.innerText=e.length>1?"invalidFileSelection":s):(c.classList.add(e.length>1?"e-file-information":"e-file-size"),c.innerText=e.length>1?"totalFiles: "+e.length+" , size: "+this.bytesToSize(this.getFileSize(e)):this.bytesToSize(e[0].size),this.createFormInput(e)),n.appendChild(c),sf.base.isNullOrUndefined(i.querySelector(".e-icons"))){var p=sf.base.createElement("span",{className:"e-icons",attrs:{tabindex:this.btnTabIndex}});"msie"===this.browserName&&p.classList.add("e-msie"),p.setAttribute("title","Remove"),i.appendChild(n),i.appendChild(p),sf.base.EventHandler.add(p,"click",this.removeFiles,this),p.classList.add(Ke)}this.listParent.appendChild(i),this.fileList.push(i)},e.prototype.removeFiles=function(e){var t=e.target.parentElement,i=this.fileList.indexOf(t),s=this.fileList[i],n=this.isFormUpload(),o=n?this.getSelectedFiles(i):this.getFilesInArray(this.filesData[i]);if(!sf.base.isNullOrUndefined(o)){if(e.target.classList.contains(Xe)&&!n){if(o[0].statusCode="5",!sf.base.isNullOrUndefined(s)){var r=s.querySelector("."+Xe);sf.popups.createSpinner({target:r,width:"20px"}),sf.popups.showSpinner(r)}s.classList.contains("e-restrict-retry")||this.checkActionComplete(!0)}else sf.base.closest(e.target,".e-spinner-pane")||this.remove(o,!1,!1,!0,e);this.element.value="",this.checkActionButtonStatus()}},e.prototype.spliceFiles=function(e){for(var t=this.fileList[e],i=this.getFilesData(),s=+t.getAttribute("data-files-count"),n=0,o=0;o<e;o++)n+=+this.fileList[o].getAttribute("data-files-count");for(var r=n+s-1;r>=n;r--)i.splice(r,1)},e.prototype.remove=function(e,t,i,s,n){sf.base.isNullOrUndefined(s)&&(s=!0);var o={event:n,cancel:!1,filesData:[],customFormData:[],postRawFile:s,currentRequest:null};if(this.isFormUpload()){o.filesData=e,this.parent.observer.notify("removing",o);for(var r=!1,a=void 0,l=0,h=this.getFilesInArray(e);l<h.length;l++){var d=h[l];if(r||(a=this.fileList.indexOf(d.list)),a>-1){var c=sf.base.isNullOrUndefined(d.input)?null:d.input;c&&sf.base.detach(c),this.spliceFiles(a),sf.base.detach(this.fileList[a]),this.fileList.splice(a,1),r=!0,a=-1}}}else if(this.isForm&&(sf.base.isNullOrUndefined(this.asyncSettings.removeUrl)||""===this.asyncSettings.removeUrl))o.filesData=this.getFilesData(),this.parent.observer.notify("removing",o),this.clearAll();else{var p=[];(e=sf.base.isNullOrUndefined(e)?this.filesData:e)instanceof Array?p=e:p.push(e),o.filesData=p;for(var u=this.asyncSettings.removeUrl,f=""!==u&&!sf.base.isNullOrUndefined(u),g=0,m=p;g<m.length;g++){var v=m[g],b=this.uploadedFilesData.indexOf(v);("2"===v.statusCode||"4"===v.statusCode||"0"===v.statusCode&&-1!==b)&&f?this.removeUploadedFile(v,o,i,t):(i||this.parent.observer.notify("removing",o),this.removeFilesData(v,t)),n&&!n.target.classList.contains(Ke)&&this.checkActionComplete(!1)}}},e.prototype.updateCustomHeader=function(e,t){if(t.length>0&&t[0])for(var i=function(i){var s=t[i],n=Object.keys(s).map((function(e){return s[e]}));e.setRequestHeader(Object.keys(s)[0],n)},s=0;s<t.length;s++)i(s)},e.prototype.removeUploadedFile=function(e,t,i,s){var n=this,o=e,r=new sf.base.Ajax(this.asyncSettings.removeUrl,"POST",!0,null);r.emitError=!1;var a=new FormData;r.beforeSend=function(s){t.currentRequest=r.httpRequest,n.currentRequestHeader&&n.updateCustomHeader(r.httpRequest,n.currentRequestHeader),n.customFormDatas&&n.updateFormData(a,n.customFormDatas),i||n.parent.observer.notify("removing",t),n.removingEventCallback(t,a,o,e)},r.onLoad=function(e){return n.removeCompleted(e,o,s),{}},r.onError=function(e){return n.removeFailed(e,o,s),{}},r.send(a)},e.prototype.getResponse=function(e){var t=e.currentTarget;return{readyState:t.readyState,statusCode:t.status,statusText:t.statusText,headers:t.getAllResponseHeaders(),withCredentials:t.withCredentials}},e.prototype.removeCompleted=function(e,t,i){var s=e&&e.currentTarget?this.getResponse(e):null,n=e.target;if(4===n.readyState&&n.status>=200&&n.status<=299){var o={e:e,response:s,operation:"Remove",file:this.updateStatus(t,"File removed successfully","2")};this.parent.observer.notify("success",o),this.removeFilesData(t,i);var r=this.uploadedFilesData.indexOf(t);this.uploadedFilesData.splice(r,1)}else this.removeFailed(e,t,i)},e.prototype.removeFailed=function(e,t,i){var s={e:e,response:e&&e.currentTarget?this.getResponse(e):null,operation:"Remove",file:this.updateStatus(t,"Unable to remove file","0")};if(!i){var n=this.filesData.indexOf(t),o=this.fileList[n];if(o){o.classList.remove("e-upload-success"),o.classList.add("e-upload-fails");var r=o.querySelector("."+_e);r&&(r.classList.remove("e-upload-success"),r.classList.add("e-upload-fails"))}this.checkActionButtonStatus()}this.parent.observer.notify("failure",s);var a=this.getLiElement(t);if(!sf.base.isNullOrUndefined(a)&&!sf.base.isNullOrUndefined(a.querySelector("."+Ze))){var l=a.querySelector("."+Ze);sf.popups.hideSpinner(l),sf.base.detach(a.querySelector(".e-spinner-pane"))}},e.prototype.updateStatus=function(e,t,i,s){if(void 0===s&&(s=!0),""===t||sf.base.isNullOrUndefined(t)||""===i||sf.base.isNullOrUndefined(i)||(e.status=t,e.statusCode=i),s){var n=this.getLiElement(e);sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.querySelector("."+_e))||""===t||sf.base.isNullOrUndefined(t)||(n.querySelector("."+_e).textContent=t)}return e},e.prototype.removingEventCallback=function(e,t,i,s){var n=this.element.getAttribute("name"),o=this.getLiElement(s);if(!(sf.base.isNullOrUndefined(o)||sf.base.isNullOrUndefined(o.querySelector("."+Ze))&&sf.base.isNullOrUndefined(o.querySelector("."+Ke)))){var r;r=o.querySelector("."+Ze)?o.querySelector("."+Ze):o.querySelector("."+Ke),sf.popups.createSpinner({target:r,width:"20px"}),sf.popups.showSpinner(r)}e.postRawFile&&!sf.base.isNullOrUndefined(i.rawFile)&&""!==i.rawFile?t.append(n,i.rawFile,i.name):t.append(n,i.name),this.updateFormData(t,e.customFormData)},e.prototype.updateFormData=function(e,t){if(t.length>0&&t[0])for(var i=function(i){var s=t[i],n=Object.keys(s).map((function(e){return s[e]}));e.append(Object.keys(s)[0],n)},s=0;s<t.length;s++)i(s)},e.prototype.getLiElement=function(e){for(var t,i=0;i<this.filesData.length;i++)(sf.base.isNullOrUndefined(this.filesData[i].id)||sf.base.isNullOrUndefined(e.id)?this.filesData[i].name===e.name:this.filesData[i].name===e.name&&this.filesData[i].id===e.id)&&(t=i);return this.fileList[t]},e.prototype.removeFilesData=function(e,t){var i;if(!t){var s=this.getLiElement(e);sf.base.isNullOrUndefined(s)||(sf.base.detach(s),i=this.fileList.indexOf(s),this.fileList.splice(i,1),this.filesData.splice(i,1),0!==this.fileList.length||sf.base.isNullOrUndefined(this.listParent)||(sf.base.detach(this.listParent),this.listParent=null,this.removeActionButtons()))}},e.prototype.upload=function(e,t){e=e||this.filesData,this.beforeUploadCustom=!sf.base.isNullOrUndefined(t)&&t,this.beforeUploadFiles=this.getFilesInArray(e);this.parent.observer.notify("beforePasteUpload",{customFormData:[],currentRequest:null,cancel:!1})},e.prototype.beforePasteUploadCallBack=function(e){e.cancel||(this.currentRequestHeader=e.currentRequest?e.currentRequest:this.currentRequestHeader,this.customFormDatas=e.customFormData&&e.customFormData.length>0?e.customFormData:this.customFormDatas,this.uploadFiles(this.beforeUploadFiles,this.beforeUploadCustom))},e.prototype.filterfileList=function(e){for(var t=[],i=0;i<e.length;i++)this.getLiElement(e[i]).classList.contains("e-upload-success")||t.push(e[i]);return t},e.prototype.uploadFiles=function(e,t){var i=[];if(""!==this.asyncSettings.saveUrl&&!sf.base.isNullOrUndefined(this.asyncSettings.saveUrl)){i=!t||sf.base.isNullOrUndefined(t)?this.filterfileList(e):e;for(var s=0;s<i.length;s++)this.uploadFilesRequest(i,s,t)}},e.prototype.updateCustomheader=function(e,t){if(t.length>0&&t[0])for(var i=function(i){var s=t[i],n=Object.keys(s).map((function(e){return s[e]}));e.setRequestHeader(Object.keys(s)[0],n)},s=0;s<t.length;s++)i(s)},e.prototype.eventCancelByArgs=function(e,t,i){var s=this;if(e.cancel=!0,"5"!==t.fileData.statusCode){t.fileData.statusCode="5",t.fileData.status="File upload canceled";var n=this.getLiElement(t.fileData);if(n){sf.base.isNullOrUndefined(n.querySelector("."+_e))||(n.querySelector("."+_e).innerHTML="File upload canceled",n.querySelector("."+_e).classList.add("e-upload-fails")),this.pauseButton=sf.base.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}});var o=n.querySelector("."+Ke);o&&o.parentElement.insertBefore(this.pauseButton,o),this.pauseButton.setAttribute("title","Retry"),this.pauseButton.addEventListener("click",(function(e){s.reloadcanceledFile(e,i,n)}),!1),this.checkActionButtonStatus()}}},e.prototype.reloadcanceledFile=function(e,t,i,s){t.statusCode="1",t.status="Ready to upload",s||(i.querySelector("."+_e).classList.remove("e-upload-fails"),sf.base.isNullOrUndefined(i.querySelector("."+Ge))||sf.base.detach(i.querySelector("."+Ge)),this.pauseButton=null),i.classList.add("e-restrict-retry"),this.upload([t])},e.prototype.uploadFilesRequest=function(e,t,i){var s=this,n=new sf.base.Ajax(this.asyncSettings.saveUrl,"POST",!0,null);n.emitError=!1;var o={fileData:e[t],customFormData:[],cancel:!1},r=new FormData;if(n.beforeSend=function(i){o.currentRequest=n.httpRequest,o.fileData.rawFile=s.base64String[t],s.currentRequestHeader&&s.updateCustomheader(n.httpRequest,s.currentRequestHeader),s.customFormDatas&&s.updateFormData(r,s.customFormDatas),s.parent.observer.notify("uploading",o),o.cancel&&s.eventCancelByArgs(i,o,e[t]),s.updateFormData(r,o.customFormData)},"1"===e[t].statusCode){var a=this.element.getAttribute("name");r.append(a,e[t].rawFile,e[t].name),n.onLoad=function(n){return s.uploadComplete(n,e[t],i),{}},n.onUploadProgress=function(o){return s.uploadInProgress(o,e[t],i,n),{}},n.onError=function(i){return s.uploadFailed(i,e[t]),{}},n.send(r)}},e.prototype.cancelUploadingFile=function(e,t,i,s){var n=this;if("5"===e.statusCode){var o={event:t,fileData:e,cancel:!1,customFormData:[]};if(this.parent.observer.notify("canceling",o),o.cancel){if(e.statusCode="3",!sf.base.isNullOrUndefined(s)){var r=s.querySelector("."+Xe);sf.base.isNullOrUndefined(r)||(sf.popups.hideSpinner(r),sf.base.detach(s.querySelector(".e-spinner-pane")))}}else{i.emitError=!1,i.httpRequest.abort();var a=new FormData;if("5"===e.statusCode){var l=this.element.getAttribute("name");a.append(l,e.name),a.append("cancel-uploading",e.name),this.updateFormData(a,o.customFormData);var h=new sf.base.Ajax(this.asyncSettings.removeUrl,"POST",!0,null);h.emitError=!1,h.onLoad=function(t){return n.removecanceledFile(t,e),{}},h.send(a)}}}},e.prototype.removecanceledFile=function(e,t){var i=this.getLiElement(t);if(!i.querySelector("."+Ge)&&!sf.base.isNullOrUndefined(i.querySelector("."+Xe))){this.updateStatus(t,"File upload canceled","5"),this.renderFailureState(e,t,i);var s=i.querySelector("."+Ke);sf.base.isNullOrUndefined(i)||(sf.popups.hideSpinner(s),sf.base.detach(i.querySelector(".e-spinner-pane")));var n={event:e,response:e&&e.currentTarget?this.getResponse(e):null,operation:"Cancel",file:t};this.parent.observer.notify("success",n)}},e.prototype.uploadInProgress=function(e,t,i,s){var n=this.getLiElement(t);if(!sf.base.isNullOrUndefined(n)||i)if(sf.base.isNullOrUndefined(n))this.cancelUploadingFile(t,e,s);else{"5"===t.statusCode&&this.cancelUploadingFile(t,e,s,n),n.querySelectorAll("."+$e).length>0||!n.querySelector("."+_e)||(n.querySelector("."+_e).classList.add("e-upload-progress"),this.createProgressBar(n),this.updateProgressBarClasses(n,"e-upload-progress"),n.querySelector("."+_e).classList.remove("e-upload-fails")),this.updateProgressbar(e,n);var o=n.querySelector("."+Ke);sf.base.isNullOrUndefined(o)||(o.classList.add(Xe,"e-upload-progress"),o.setAttribute("title","Abort"),o.classList.remove(Ke))}},e.prototype.changeProgressValue=function(e,t){e.querySelector("."+Je).setAttribute("style","width:"+t),e.querySelector(".e-progress-bar-text").textContent=t},e.prototype.updateProgressbar=function(e,t){if(!isNaN(Math.round(e.loaded/e.total*100))&&!sf.base.isNullOrUndefined(t.querySelector("."+Je)))if(sf.base.isNullOrUndefined(this.progressInterval)||""===this.progressInterval)this.changeProgressValue(t,Math.round(e.loaded/e.total*100).toString()+"%");else{var i=Math.round(e.loaded/e.total*100)%parseInt(this.progressInterval,10);0!==i&&100!==i||this.changeProgressValue(t,Math.round(e.loaded/e.total*100).toString()+"%")}},e.prototype.createProgressBar=function(e){var t=sf.base.createElement("span",{className:$e}),i=sf.base.createElement("progressbar",{className:Je,attrs:{value:"0",max:"100"}}),s=sf.base.createElement("span",{className:"e-progress-inner-wrap"});i.setAttribute("style","width: 0%");var n=sf.base.createElement("span",{className:"e-progress-bar-text"});n.textContent="0%",s.appendChild(i),t.appendChild(s),t.appendChild(n),e.querySelector(".e-file-container").appendChild(t)},e.prototype.updateProgressBarClasses=function(e,t){var i=e.querySelector("."+Je);sf.base.isNullOrUndefined(i)||i.classList.add(t)},e.prototype.raiseSuccessEvent=function(e,t){var i={e:e,response:e&&e.currentTarget?this.getResponse(e):null,operation:"upload",file:this.updateStatus(t,"File uploaded successfully","2",!1),statusText:"File uploaded successfully"},s=this.getLiElement(t);if(!sf.base.isNullOrUndefined(s)){var n=s.querySelector(".e-spinner-pane");sf.base.isNullOrUndefined(n)||(sf.popups.hideSpinner(s),sf.base.detach(n))}this.parent.observer.notify("success",i),this.updateStatus(t,i.statusText,"2"),this.uploadedFilesData.push(t),this.checkActionButtonStatus(),this.fileList.length>0&&(this.getLiElement(t).classList.contains("e-restrict-retry")?this.getLiElement(t).classList.remove("e-restrict-retry"):this.checkActionComplete(!0))},e.prototype.uploadComplete=function(e,t,i){var s=e.target;if(4===s.readyState&&s.status>=200&&s.status<=299){var n=this.getLiElement(t);if(sf.base.isNullOrUndefined(n)&&(!i||sf.base.isNullOrUndefined(i)))return;if(!sf.base.isNullOrUndefined(n)){this.updateProgressBarClasses(n,"e-upload-success"),this.removeProgressbar(n,"success");var o=n.querySelector("."+Xe);sf.base.isNullOrUndefined(o)||(o.classList.add(Ze),o.setAttribute("title","Delete file"),o.classList.remove(Xe),o.classList.remove("e-upload-progress"))}this.raiseSuccessEvent(e,t)}else this.uploadFailed(e,t)},e.prototype.uploadFailed=function(e,t){var i=this.getLiElement(t),s={e:e,response:e&&e.currentTarget?this.getResponse(e):null,operation:"upload",file:this.updateStatus(t,"File failed to upload","0",!1),statusText:"File failed to upload"};sf.base.isNullOrUndefined(i)||this.renderFailureState(e,t,i),this.parent.observer.notify("failure",s),this.updateStatus(t,s.statusText,"0"),this.checkActionButtonStatus(),this.checkActionComplete(!0)},e.prototype.renderFailureState=function(e,t,i){var s=this;this.updateProgressBarClasses(i,"e-upload-fails"),this.removeProgressbar(i,"failure"),sf.base.isNullOrUndefined(i.querySelector(".e-file-status"))||i.querySelector(".e-file-status").classList.add("e-upload-fails");var n=i.querySelector("."+Xe);sf.base.isNullOrUndefined(n)||(n.classList.remove(Xe,"e-upload-progress"),n.classList.add(Ke),n.setAttribute("title","Remove"),this.pauseButton=sf.base.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}}),n.parentElement.insertBefore(this.pauseButton,n),this.pauseButton.setAttribute("title","Retry"),i.querySelector("."+Ge).addEventListener("click",(function(e){s.reloadcanceledFile(e,t,i,!1)}),!1))},e.prototype.removeProgressbar=function(e,t){var i=this;sf.base.isNullOrUndefined(e.querySelector("."+$e))||(this.progressAnimation=new sf.base.Animation({duration:1250}),this.progressAnimation.animate(e.querySelector("."+$e),{name:"FadeOut"}),this.progressAnimation.animate(e.querySelector(".e-progress-bar-text"),{name:"FadeOut"}),setTimeout((function(){i.animateProgressBar(e,t)}),750))},e.prototype.animateProgressBar=function(e,t){"success"===t?sf.base.isNullOrUndefined(e.querySelector("."+_e))||(e.querySelector("."+_e).classList.remove("e-upload-progress"),this.progressAnimation.animate(e.querySelector("."+_e),{name:"FadeIn"}),e.querySelector("."+_e).classList.add("e-upload-success")):sf.base.isNullOrUndefined(e.querySelector("."+_e))||(e.querySelector("."+_e).classList.remove("e-upload-progress"),this.progressAnimation.animate(e.querySelector("."+_e),{name:"FadeIn"}),e.querySelector("."+_e).classList.add("e-upload-fails")),e.querySelector("."+$e)&&sf.base.detach(e.querySelector("."+$e))},e.prototype.onSelectFiles=function(e){var t;if("drop"===e.type){var i=this.sortFilesList=e.dataTransfer.files;"msie"!==this.browserName&&"edge"!==this.browserName&&(this.element.files=i),i.length>0&&(t=this.sortFileList(i),this.renderSelectedFiles(e,t))}else t=[].slice.call(e.target.files),this.renderSelectedFiles(e,t)},e.prototype.sortFileList=function(e){for(var t=e=e||this.sortFilesList,i=[],s=0;s<t.length;s++)i.push(t[s].name);for(var n=[],o=0,r=i.sort();o<r.length;o++){var a=r[o];for(s=0;s<t.length;s++)a===t[s].name&&n.push(t[s])}return n},e.prototype.renderSelectedFiles=function(e,t,i,s){this.base64String=[];var n={event:e,cancel:!1,filesData:[],isModified:!1,modifiedFilesData:[],progressInterval:"",isCanceled:!1,currentRequest:null,customFormData:null};if(t.length<1)return n.isCanceled=!0,void this.parent.observer.notify("selected",n);this.flag=!0;for(var o=[],r=0;r<t.length;r++){var a=i?t[r].file:t[r];this.updateInitialFileDetails(e,t,a,r,o,i,s)}n.filesData=o,this.allowedExtensions.indexOf("*")>-1&&(this.allTypes=!0),this.allTypes||(o=this.checkExtension(o)),this.parent.observer.notify("selected",n),n.cancel=!0,this._internalRenderSelect(n,o)},e.prototype._internalRenderSelect=function(e,t){if(!e.cancel){if(this.currentRequestHeader=e.currentRequest,this.customFormDatas=e.customFormData,this.selectedFiles=this.selectedFiles.concat(t),this.btnTabIndex=this.disableKeyboardNavigation?"-1":"0",e.isModified&&e.modifiedFilesData.length>0){for(var i=0;i<e.modifiedFilesData.length;i++)for(var s=0;s<t.length;s++)e.modifiedFilesData[i].id===t[s].id&&(e.modifiedFilesData[i].rawFile=t[s].rawFile);var n=this.allTypes?e.modifiedFilesData:this.checkExtension(e.modifiedFilesData);this.updateSortedFileList(n),this.filesData=n,this.isForm&&!this.allowUpload()||this.checkAutoUpload(n)}else this.createFileList(t,!0),this.filesData=this.filesData.concat(t),this.isForm&&!this.allowUpload()||this.checkAutoUpload(t);sf.base.isNullOrUndefined(e.progressInterval)||""===e.progressInterval||(this.progressInterval=e.progressInterval),this.filesData.length===this.actionCompleteCount&&this.flag&&(this.flag=!1)}},e.prototype.allowUpload=function(){var e=!1;return this.isForm&&!sf.base.isNullOrUndefined(this.asyncSettings.saveUrl)&&""!==this.asyncSettings.saveUrl&&(e=!0),e},e.prototype.checkAutoUpload=function(e){this.upload(e),this.removeActionButtons(),this.checkActionButtonStatus()},e.prototype.updateSortedFileList=function(e){var t=sf.base.createElement("div",{id:"clonewrapper"}),i=-1;if(this.listParent){for(var s=0;s<this.listParent.querySelectorAll("li").length;s++){var n=this.listParent.querySelectorAll("li")[s];t.appendChild(n.cloneNode(!0))}for(var o=0,r=this.listParent.querySelectorAll("li");o<r.length;o++){var a=r[o];sf.base.detach(a)}this.removeActionButtons();var l=[].slice.call(t.childNodes);sf.base.detach(this.listParent),this.listParent=null,this.fileList=[],this.createParentUL();for(var h=0;h<e.length;h++){for(var d=0;d<this.filesData.length;d++)this.filesData[d].name===e[h].name&&(this.listParent.appendChild(l[d]),sf.base.EventHandler.add(l[d].querySelector(".e-icons"),"click",this.removeFiles,this),this.fileList.push(l[d]),i=h);i!==h&&this.createFileList([e[h]])}}else this.createFileList(e)},e.prototype.updateInitialFileDetails=function(e,t,i,s,n,o,r){var a={name:o?t[s].path.substring(1,t[s].path.length):r?sf.base.getUniqueID(i.name.substring(0,i.name.lastIndexOf(".")))+"."+this.getFileType(i.name):i.name,rawFile:i,size:i.size,status:"Ready to upload",type:this.getFileType(i.name),validationMessages:this.validatedFileSize(i.size),statusCode:"1",id:sf.base.getUniqueID(i.name.substring(0,i.name.lastIndexOf(".")))+"."+this.getFileType(i.name)};r&&(a.fileSource="paste"),a.status=""!==a.validationMessages.minSize?"File size is too small":""!==a.validationMessages.maxSize?"File size is too large":a.status,""===a.validationMessages.minSize&&""===a.validationMessages.maxSize||(a.statusCode="0"),n.push(a)},e.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"change",this.onSelectFiles,this)},e.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,"change",this.onSelectFiles)},e.prototype.destroy=function(){this.unWireEvents(),this.removeEventListener()},e}(),tt=function(){function e(e){this.containsHtml=!1,this.isNotFromHtml=!1,this.inlineNode=["a","abbr","acronym","audio","b","bdi","bdo","big","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","font","i","iframe","img","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","script","select","slot","small","span","strong","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"],this.blockNode=["div","h1","h2","h3","h4","h5","h6","address","blockquote","button","center","dd","dir","dl","dt","fieldset","frameset","hr","iframe","isindex","li","map","menu","noframes","noscript","object","ol","pre","td","tr","th","tbody","tfoot","thead","table","ul","header","article","nav","footer","section","aside","main","figure","figcaption"],this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.nodeSelectionObj=new G,this.parent.observer.on("success",this.success,this),this.parent.observer.on("failure",this.failure,this),this.parent.observer.on("selected",this.selected,this),this.parent.observer.on("uploading",this.uploading,this),this.parent.observer.on("pasteClean",this.pasteClean,this),this.parent.observer.on("removing",this.cancelingAndRemoving,this),this.parent.observer.on("canceling",this.cancelingAndRemoving,this),this.parent.observer.on("beforePasteUpload",this.beforeImageUpload,this),this.parent.observer.on(t,this.destroy,this),this.parent.observer.on("afterPasteCleanUp",this.pasteUpdatedValue,this)},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.removeEventListener=function(){this.parent.observer.off("success",this.success),this.parent.observer.off("failure",this.failure),this.parent.observer.off("selected",this.selected),this.parent.observer.off("uploading",this.uploading),this.parent.observer.off("pasteClean",this.pasteClean),this.parent.observer.off("removing",this.cancelingAndRemoving),this.parent.observer.off("canceling",this.cancelingAndRemoving),this.parent.observer.off("beforePasteUpload",this.beforeImageUpload),this.parent.observer.off(t,this.destroy),this.parent.observer.off("afterPasteCleanUp",this.pasteUpdatedValue)},e.prototype.pasteClean=function(e){var t,i=this,n={requestType:"Paste",editorMode:this.parent.editorMode,event:e},o=null;if(e.args&&!sf.base.isNullOrUndefined(e.args.clipboardData)&&(o=e.args.clipboardData.getData("text/html")),this.parent.beforePasteCleanupEnabled&&this.parent.dotNetRef.invokeMethodAsync("BeforePasteCleanUp",{value:o}),e.args&&null!==o&&"HTML"===this.parent.editorMode){var r=void 0;if(0===o.length){var a=new RegExp(/<\/[a-z][\s\S]*>/i);if(o=e.args.clipboardData.getData("text/plain"),this.isNotFromHtml=""!==o,o=(o=o.replace(/</g,"&lt;")).replace(/>/g,"&gt;"),this.containsHtml=a.test(o),r=e&&e.args.clipboardData&&e.args.clipboardData.items.length>0?null===e.args.clipboardData.items[0].getAsFile()?sf.base.isNullOrUndefined(e.args.clipboardData.items[1])?null:e.args.clipboardData.items[1].getAsFile():e.args.clipboardData.items[0].getAsFile():null,this.parent.observer.notify(l,{file:r,args:e.args,text:o,callBack:function(r){"object"===s(t=r)?i.parent.formatter.editorManager.execCommand("Images","Image",e.args,i.imageFormatting.bind(i,n),"pasteCleanup",t,"pasteCleanupModule"):o=t}}),!a.test(o)){var h=sf.base.createElement("div");h.innerHTML=this.splitBreakLine(o),o=h.innerHTML}}else o.length>0&&this.parent.formatter.editorManager.observer.notify("ms_word_cleanup",{args:e.args,text:e.text,allowedStylePropertiesArray:this.parent.pasteCleanupSettings.allowedStyleProps,callBack:function(e){o=e.trim()}});var d=document,c=this.nodeSelectionObj.getRange(d);this.saveSelection=this.nodeSelectionObj.save(c,d);var p=sf.base.createElement("div");p.innerHTML=o;var u=""!==p.textContent||!sf.base.isNullOrUndefined(p.querySelector("img"))||!sf.base.isNullOrUndefined(p.querySelector("table"));this.parent.pasteCleanupSettings.prompt?u?(e.args.preventDefault(),this.pasteDialog(o,n)):-1!==sf.base.Browser.userAgent.indexOf("Firefox")&&sf.base.isNullOrUndefined(r)&&this.fireFoxImageUpload():u||this.parent.pasteCleanupSettings.plainText||-1===sf.base.Browser.userAgent.indexOf("Firefox")?this.parent.pasteCleanupSettings.plainText?(e.args.preventDefault(),this.plainFormatting(o,n)):this.parent.pasteCleanupSettings.keepFormat?(e.args.preventDefault(),this.formatting(o,!1,n)):(e.args.preventDefault(),this.formatting(o,!0,n)):this.fireFoxImageUpload()}},e.prototype.fireFoxImageUpload=function(){var e=this;setTimeout((function(){if(-1!==sf.base.Browser.userAgent.indexOf("Firefox")){var t=e.nodeSelectionObj.getRange(document).startContainer;"#text"!==t.nodeName&&(t=t.childNodes[e.nodeSelectionObj.getRange(document).startOffset]),"IMG"===t.previousSibling.nodeName&&(t.previousSibling.classList.add("pasteContent_Img"),t.previousSibling.classList.add("e-rte-image"),"inline"===e.parent.insertImageSettings.display?t.previousSibling.classList.add("e-imginline"):t.previousSibling.classList.add("e-imgbreak"),t.previousSibling.classList.add(),e.setImageProperties(t.previousSibling))}e.imgUploading(e.parent.inputElement)}),500)},e.prototype.splitBreakLine=function(e){for(var t=e.split("\n"),i="",s=0;s<t.length;s++){if(""===t[s].trim())i+=N(this.parent);else i+="<p>"+this.makeSpace(t[s]).trim()+"</p>"}return i},e.prototype.makeSpace=function(e){for(var t="",i=!0,s=e.split(" "),n=0;n<s.length;n++)""===s[n].trim()?t+=i?"&nbsp;":" ":(i=!1,t+=s[n]+" ");return t},e.prototype.imgUploading=function(e){var t=e.querySelectorAll(".pasteContent_Img");if(this.parent.insertImageSettings.saveUrl&&t.length>0){for(var i=[],s=[],n=[],o=0;o<t.length;o++)t[o].getAttribute("src").split(",")[0].indexOf("base64")>=0&&(i.push(t[o].getAttribute("src")),s.push(sf.base.getUniqueID("rte_image")),n.push(t[o]));var r=[];for(o=0;o<i.length;o++)r.push(this.base64ToFile(i[o],s[o]));for(o=0;o<r.length;o++)this.uploadMethod(r[o],n[o]);(sf.base.isNullOrUndefined(this.parent.insertImageSettings.saveUrl)||sf.base.isNullOrUndefined(this.parent.insertImageSettings.path))&&"Blob"===this.parent.insertImageSettings.saveFormat&&this.getBlob(t)}else"Blob"===this.parent.insertImageSettings.saveFormat&&this.getBlob(t);var a=e.querySelectorAll(".pasteContent_Img");for(o=0;o<a.length;o++)a[o].classList.remove("pasteContent_Img"),""===a[o].getAttribute("class").trim()&&t[o].removeAttribute("class")},e.prototype.getBlob=function(e){for(var t=0;t<e.length;t++)if(!sf.base.isNullOrUndefined(e[t].getAttribute("src"))&&e[t].getAttribute("src").split(",")[0].indexOf("base64")>=0){var i=URL.createObjectURL(T(e[t].getAttribute("src")));e[t].setAttribute("src",i)}},e.prototype.uploadMethod=function(e,t){var i=this;this.uploadImgElem=t;var s=document.createElement("div");document.body.appendChild(s),s.setAttribute("display","none"),this.uploadImgElem.style.opacity="0.5";var n=sf.base.createElement("div");this.parent.element.appendChild(n);var o=sf.base.createElement("input",{id:this.parent.element.id+"_upload",attrs:{type:"File",name:"UploadFiles"}}),r=this.parent.iframeSettings.enable?-50:-90;this.popupObj=new sf.popups.Popup(n,{relateTo:this.uploadImgElem,height:"85px",width:"300px",offsetY:r,content:o,viewPortElement:this.parent.element,position:{X:"center",Y:"top"},enableRtl:this.parent.enableRtl,zIndex:10001,close:function(e){i.parent.isBlur=!1,i.popupObj.destroy(),sf.base.detach(i.popupObj.element)}}),this.popupObj.element.style.display="none",sf.base.addClass([this.popupObj.element],["e-popup-open","e-rte-upload-popup"]);var a=e.size>1e6?300:100;setTimeout((function(){i.refreshPopup(t,i.popupObj)}),a),this.rawFile=void 0;var l={asyncSettings:{saveUrl:this.parent.insertImageSettings.saveUrl},cssClass:"e-rte-dialog-upload",enableRtl:this.parent.enableRtl,allowedExtensions:this.parent.insertImageSettings.allowedTypes.toString()};this.uploadObj=new et(l,this.popupObj.element.childNodes[0],this.parent);var h=[{name:e.name,rawFile:e,size:e.size,type:e.type,validationMessages:{minSize:"",maxSize:""},statusCode:"1"}];this.uploadObj.createFileList(h),this.uploadObj.filesData.push(h[0]),this.rawFile=h,this.uploadObj.upload(h),this.popupObj.element.getElementsByClassName("e-file-select-wrap")[0].style.display="none",sf.base.detach(this.popupObj.element.querySelector(".e-rte-dialog-upload .e-file-select-wrap"))},e.prototype.uploading=function(e){this.parent.inputElement.contentEditable="false"},e.prototype.success=function(e){var t=this;setTimeout((function(){t.popupClose(t.popupObj,t.uploadImgElem,e)}),900)},e.prototype.failure=function(e){var t=this;setTimeout((function(){t.uploadFailure(t.uploadImgElem,t.popupObj,e)}),900)},e.prototype.selected=function(e){this.rawFile=e.filesData},e.prototype.cancelingAndRemoving=function(e){this.parent.inputElement.contentEditable="true"," "===this.uploadImgElem.nextSibling.textContent&&sf.base.detach(this.uploadImgElem.nextSibling),sf.base.detach(this.uploadImgElem),this.popupObj.close()},e.prototype.beforeImageUpload=function(e){var t,i=this;if(this.parent.beforeUploadImageEnabled)return(t=JSON.parse(JSON.stringify(e))).filesData=this.rawFile,new Promise((function(e){i.parent.dotNetRef.invokeMethodAsync("BeforeUpload",t).then((function(t){t.cancel||(i.uploadObj.currentRequestHeader=t.currentRequest?t.currentRequest:i.uploadObj.currentRequestHeader,i.uploadObj.customFormDatas=t.customFormData&&t.customFormData.length>0?t.customFormData:i.uploadObj.customFormDatas,sf.base.isNullOrUndefined(i.parent.insertImageSettings.saveUrl)?i.popupClose(i.popupObj,i.uploadImgElem,null):i.parent.observer.notify("beforePasteUploadCallBack",t),e())}))}));sf.base.isNullOrUndefined(this.parent.insertImageSettings.saveUrl)?this.popupClose(this.popupObj,this.uploadImgElem,null):this.parent.observer.notify("beforePasteUploadCallBack",e)},e.prototype.uploadFailure=function(e,t,i){this.parent.inputElement.contentEditable="true",sf.base.detach(e),t&&t.close(),this.parent.onImageUploadFailedEnabled&&this.parent.dotNetRef.invokeMethodAsync("PasteImageUploadFailed",i),this.uploadObj.destroy(),this.uploadObj=void 0},e.prototype.popupClose=function(e,t,i){var s=this;this.parent.inputElement.contentEditable="true",!sf.base.isNullOrUndefined(this.parent.insertImageSettings.saveUrl)&&this.parent.onImageUploadSuccessEnabled?this.parent.dotNetRef.invokeMethodAsync("PasteImageUploadSuccess",i).then((function(e){s.pasteUploadSuccessCallback(t,i,e)})):this.pasteUploadSuccessCallback(t,i),e.close(),t.style.opacity="1",this.uploadObj.destroy(),this.uploadObj=void 0},e.prototype.pasteUploadSuccessCallback=function(e,t,i){if(!sf.base.isNullOrUndefined(this.parent.insertImageSettings.path))if(sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.file)||sf.base.isNullOrUndefined(i.file.name)){s=this.parent.insertImageSettings.path+t.file.name;e.src=s,e.setAttribute("alt",t.file.name)}else{var s=this.parent.insertImageSettings.path+i.file.name;e.src=s,e.setAttribute("alt",i.file.name)}},e.prototype.refreshPopup=function(e,t){(this.parent.iframeSettings.enable?this.parent.element.offsetTop+e.offsetTop:e.offsetTop)>this.parent.element.offsetTop+this.parent.element.offsetHeight?(t.relateTo=this.parent.inputElement,t.offsetY=this.parent.iframeSettings.enable?-30:-65,t.element.style.display="block"):t&&(t.refreshPosition(e),t.element.style.display="block")},e.prototype.base64ToFile=function(e,t){for(var i=e.split(","),s=i[0].match(/:(.*?);/)[1].split("/")[1],n=atob(i[1]),o=n.length,r=new Uint8Array(o);o--;)r[o]=n.charCodeAt(o);if(sf.base.Browser.isIE||navigator.appVersion.indexOf("Edge")>-1){var a=new Blob([r],{type:s});return sf.base.extend(a,{name:t+"."+(sf.base.isNullOrUndefined(s)?"":s)}),a}return new File([r],t+"."+(sf.base.isNullOrUndefined(s)?"":s),{type:s})},e.prototype.imageFormatting=function(e,t){var i=sf.base.createElement("span");i.appendChild(t.elements[0]);var s=i.innerHTML,n=document,o=this.nodeSelectionObj.getRange(n);this.saveSelection=this.nodeSelectionObj.save(o,n),this.parent.pasteCleanupSettings.prompt?this.pasteDialog(s,e):this.parent.pasteCleanupSettings.plainText?this.plainFormatting(s,e):this.parent.pasteCleanupSettings.keepFormat?this.formatting(s,!1,e):this.formatting(s,!0,e)},e.prototype.selectFormatting=function(e){""!==this.newRTEHeight&&(this.parent.element.style.height=this.preRTEHeight),"KeepFormat"===e?this.formatting(this.currentValue,!1,this.currentArgs):"CleanFormat"===e?this.formatting(this.currentValue,!0,this.currentArgs):"PlainTextFormat"===e&&this.plainFormatting(this.currentValue,this.currentArgs)},e.prototype.pasteDialog=function(e,t){this.currentValue=e,this.currentArgs=t,this.preRTEHeight=this.parent.height.toString(),this.newRTEHeight="",this.parent.element.offsetHeight<265&&(this.newRTEHeight=305..toString()),""!==this.newRTEHeight&&(this.parent.element.style.height=this.newRTEHeight+"px"),this.parent.openPasteDialog()},e.prototype.formatting=function(e,t,i){var s=sf.base.createElement("div",{className:"pasteContent",styles:"display:inline;"});this.isNotFromHtml&&this.containsHtml&&(e=this.splitBreakLine(e)),s.innerHTML=e,null!==this.parent.pasteCleanupSettings.deniedTags&&(s=this.deniedTags(s)),(t||null!==this.parent.pasteCleanupSettings.deniedAttrs)&&(s=this.deniedAttributes(s,t)),null!==this.parent.pasteCleanupSettings.allowedStyleProps&&(s=this.allowedStyle(s)),this.saveSelection.restore(),s.innerHTML=this.sanitizeHelper(s.innerHTML);for(var n=s.querySelectorAll("img"),o=0;o<n.length;o++)n[o].classList.add("pasteContent_Img"),this.setImageProperties(n[o]);if(this.addTempClass(s),""!==s.textContent||!sf.base.isNullOrUndefined(s.querySelector("img"))||!sf.base.isNullOrUndefined(s.querySelector("table")))if(this.parent.afterPasteCleanupEnabled){var r=sf.base.createElement("div");r.innerHTML=s.innerHTML;var a=[];if(!sf.base.isNullOrUndefined(r.querySelector("img"))){var l=r.querySelectorAll("img"),h=[],d=[],c=[];for(o=0;o<l.length;o++)l[o].getAttribute("src").split(",")[0].indexOf("base64")>=0&&(h.push(l[o].getAttribute("src")),d.push(sf.base.getUniqueID("rte_image")),c.push(l[o]));var p=[],u=void 0;for(o=0;o<h.length;o++)p.push(this.base64ToFile(h[o],d[o])),u={name:p[o].name,rawFile:p[o],size:p[o].size,status:"",type:p[o].type,validationMessages:{minSize:"",maxSize:""},statusCode:"1"},a.push(u)}e=s.innerHTML,this.parent.dotNetRef.invokeMethodAsync("AfterPasteCleanUp",{value:e,filesData:a})}else this.pasteUpdatedValue(s.innerHTML)},e.prototype.pasteUpdatedValue=function(e){var t=this,i=this.parent.afterPasteCleanupEnabled?e.text:e,s=sf.base.createElement("div",{className:"pasteContent",styles:"display:inline;"});s.innerHTML=i,this.parent.formatter.editorManager.execCommand("inserthtml","pasteCleanup",e,(function(i){sf.base.extend(e,{elements:i.elements,imageElements:i.imgElem},!0),t.parent.formatter.onSuccess(t.parent,e)}),s),this.removeTempClass(),this.parent.observer.notify("toolbar-refresh",{}),this.imgUploading(this.parent.inputElement)},e.prototype.setImageProperties=function(e){"auto"!=this.parent.insertImageSettings.width&&e.setAttribute("width",this.parent.insertImageSettings.width),"0"!=this.parent.insertImageSettings.minWidth&&(e.style.minWidth=this.parent.insertImageSettings.minWidth.toString()),null!=this.parent.insertImageSettings.maxWidth&&(e.style.maxWidth=this.parent.imageModule.getMaxWidth().toString()),"auto"!=this.parent.insertImageSettings.height&&e.setAttribute("height",this.parent.insertImageSettings.height),"0"!=this.parent.insertImageSettings.minHeight&&(e.style.minHeight=this.parent.insertImageSettings.minHeight.toString()),null!=this.parent.insertImageSettings.maxHeight&&(e.style.maxHeight=this.parent.insertImageSettings.maxHeight.toString())},e.prototype.addTempClass=function(e){for(var t=e.children,i=0;i<t.length;i++)t[i].classList.add("pasteContent_RTE")},e.prototype.removeTempClass=function(){for(var e=this.parent.inputElement.querySelectorAll(".pasteContent_RTE"),t=0;t<e.length;t++)e[t].classList.remove("pasteContent_RTE"),""===e[t].getAttribute("class")&&e[t].removeAttribute("class")},e.prototype.sanitizeHelper=function(e){return e=M(e,this.parent)},e.prototype.plainFormatting=function(e,t){var i=sf.base.createElement("div",{className:"pasteContent",styles:"display:inline;"});if(i.innerHTML=e,this.detachInlineElements(i),this.getTextContent(i),""!==i.textContent.trim()){if(!sf.base.isNullOrUndefined(i.firstElementChild)&&"BR"!==i.firstElementChild.tagName){var s=i.firstElementChild;if(!sf.base.isNullOrUndefined(i.firstElementChild)){for(var n=sf.base.createElement("span"),o=0,r=0;o<s.childNodes.length;o++,r++)if("#text"===s.childNodes[o].nodeName)n.appendChild(s.childNodes[o]),i.insertBefore(n,i.firstElementChild),o--;else{if("#text"===s.childNodes[o].nodeName||0!==r)break;for(var a=0;a<s.childNodes[o].childNodes.length;a++)n.appendChild(s.childNodes[o].childNodes[a]),i.insertBefore(n,i.firstElementChild),a--;o--}s.hasChildNodes()||sf.base.detach(s)}}if(this.removeEmptyElements(i),this.saveSelection.restore(),i.innerHTML=this.sanitizeHelper(i.innerHTML),this.addTempClass(i),this.parent.afterPasteCleanupEnabled){e=i.innerHTML;this.parent.dotNetRef.invokeMethodAsync("AfterPasteCleanUp",{value:e,filesData:[]})}else this.pasteUpdatedValue(i.innerHTML)}else this.saveSelection.restore(),sf.base.extend(t,{elements:[]},!0),this.parent.formatter.onSuccess(this.parent,t)},e.prototype.getTextContent=function(e){for(var t=0;t<this.blockNode.length;t++)for(var i=e.querySelectorAll(this.blockNode[t]),s=0;s<i.length;s++){for(var n=void 0,o=0,r=0,a=void 0;o<i[s].childNodes.length;o++,r++)if("DIV"===i[s].childNodes[o].nodeName||"P"===i[s].childNodes[o].nodeName||"#text"===i[s].childNodes[o].nodeName&&"&nbsp;"!==i[s].childNodes[o].nodeValue.replace(/\u00a0/g,"&nbsp;")&&""===i[s].childNodes[o].textContent.trim())n=i[s].childNodes[o].parentElement,i[s].childNodes[o].parentElement.parentElement.insertBefore(i[s].childNodes[o],i[s].childNodes[o].parentElement),o--;else{if(n=i[s].childNodes[o].parentElement,"text"===a){n.previousElementSibling.appendChild(i[s].childNodes[o])}else{var l=sf.base.createElement("div",{id:"newDiv"});l.appendChild(i[s].childNodes[o]),n.parentElement.insertBefore(l,n)}o--,a="text"}sf.base.isNullOrUndefined(n)||sf.base.detach(n)}var h=e.querySelectorAll("*");for(t=0;t<h.length;t++){var d=h[t].attributes;for(s=0;s<d.length;s++)h[t].removeAttribute(d[s].name),s--}},e.prototype.detachInlineElements=function(e){for(var t=0;t<this.inlineNode.length;t++)for(var i=e.querySelectorAll(this.inlineNode[t]),s=0;s<i.length;s++){for(var n=void 0,o=0;o<i[s].childNodes.length;o++)n=i[s].childNodes[o].parentElement,i[s].childNodes[o].parentElement.parentElement.insertBefore(i[s].childNodes[o],i[s].childNodes[o].parentElement),o--;sf.base.isNullOrUndefined(n)||sf.base.detach(n)}},e.prototype.findDetachEmptyElem=function(e){return sf.base.isNullOrUndefined(e.parentElement)?null:""===e.parentElement.textContent.trim()&&"pasteContent"!==e.parentElement.getAttribute("class")?this.findDetachEmptyElem(e.parentElement):e},e.prototype.removeEmptyElements=function(e){for(var t=e.querySelectorAll(":empty"),i=0;i<t.length;i++)if("BR"!==t[i].tagName){var s=this.findDetachEmptyElem(t[i]);sf.base.isNullOrUndefined(s)||sf.base.detach(s)}},e.prototype.tagGrouping=function(e){for(var t=e.slice(),i=Object.keys(re),s=i.map((function(e){return re[e]})),n=[],o=0;o<t.length;o++)if(t[o].split("[").length>1&&(t[o]=t[o].split("[")[0].trim()),i.indexOf(t[o])>-1)for(var r=0;r<s[i.indexOf(t[o])].length;r++)t.indexOf(s[i.indexOf(t[o])][r])<0&&n.indexOf(s[i.indexOf(t[o])][r])<0&&n.push(s[i.indexOf(t[o])][r]);return e.concat(n)},e.prototype.attributesfilter=function(e){for(var t=0;t<e.length;t++)if(e[t].split("[").length>1){for(var i=e[t].split("[")[1].split("]")[0].split(","),s=[],n=[],o=0;o<i.length;o++)i[o].indexOf("!")<0?s.push(i[o].trim()):n.push(i[o].split("!")[1].trim());var r=s.length>1?s.join("]["):s.join(),a=n.length>1?n.join("]["):n.join();if(a.length>0){var l=""!==r?e[t].split("[")[0]+"["+r+"]":e[t].split("[")[0];e[t]=l+":not(["+a+"])"}else e[t]=e[t].split("[")[0]+"["+r+"]"}return e},e.prototype.deniedTags=function(e){var t=sf.base.isNullOrUndefined(this.parent.pasteCleanupSettings.deniedTags)?[]:this.parent.pasteCleanupSettings.deniedTags.slice();t=this.attributesfilter(t),t=this.tagGrouping(t);for(var i=0;i<t.length;i++)for(var s=e.querySelectorAll(t[i]),n=s.length-1;n>=0;n--){for(var o=s[n].parentNode;s[n].firstChild;)o.insertBefore(s[n].firstChild,s[n]);o.removeChild(s[n])}return e},e.prototype.deniedAttributes=function(e,t){var i=sf.base.isNullOrUndefined(this.parent.pasteCleanupSettings.deniedAttrs)?[]:this.parent.pasteCleanupSettings.deniedAttrs.slice();t&&i.push("style");for(var s=0;s<i.length;s++)for(var n=e.querySelectorAll("["+i[s]+"]"),o=0;o<n.length;o++)n[o].removeAttribute(i[s]);return e},e.prototype.allowedStyle=function(e){var t=sf.base.isNullOrUndefined(this.parent.pasteCleanupSettings.allowedStyleProps)?[]:this.parent.pasteCleanupSettings.allowedStyleProps.slice();t.push("list-style-type","list-style");for(var i=e.querySelectorAll("[style]"),s=0;s<i.length;s++){for(var n,o=[],r=i[s].getAttribute("style").split(";"),a=0;a<r.length;a++)t.indexOf(r[a].split(":")[0].trim())>=0&&o.push(r[a]);i[s].removeAttribute("style"),(n=""===o.join(";").trim()?o.join(";"):o.join(";")+";")&&i[s].setAttribute("style",n)}return e},e}(),it=function(){function e(){}return e.prototype.getLineNumber=function(e,t){return e.value.substr(0,t).split("\n").length},e.prototype.getSelectedText=function(e){var t=e.selectionStart,i=e.selectionEnd;return e.value.substring(t,i)},e.prototype.getAllParents=function(e){return e.split("\n")},e.prototype.getSelectedLine=function(e){return this.getAllParents(e.value)[this.getLineNumber(e,e.selectionStart)-1]},e.prototype.getLine=function(e,t){return this.getAllParents(e.value)[t]},e.prototype.getSelectedParentPoints=function(e){var t=this.getAllParents(e.value),i=this.getLineNumber(e,e.selectionStart),s=this.getLineNumber(e,e.selectionEnd),n=this.getSelectedText(e).split("\n"),o=[],r=t[i-1],a=t.slice(0,i-1).join("").length,l={};if(l.line=i-1,l.start=a+l.line,l.end=""!==r?l.start+r.length+1:l.start+r.length,l.text=r,o.push(l),n.length>1){for(var h=1;h<n.length-1;h++){var d={};d.line=o[h-1].line+1,d.start=(n[h],o[h-1].end),d.end=d.start+n[h].length+1,d.text=n[h],o.push(d)}var c={};c.line=o[o.length-1].line+1,c.start=o[o.length-1].end,c.end=c.start+t[s-1].length+1,c.text=t[s-1],o.push(c)}return o},e.prototype.setSelection=function(e,t,i){e.setSelectionRange(t,i),e.focus()},e.prototype.save=function(e,t){this.selectionStart=e,this.selectionEnd=t},e.prototype.restore=function(e){this.setSelection(e,this.selectionStart,this.selectionEnd)},e.prototype.isStartWith=function(e,t){var i=!1;e&&(i=(e.trim()===t.trim()?new RegExp("^("+this.replaceSpecialChar(t.trim())+")","gim"):new RegExp("^("+this.replaceSpecialChar(t)+")","gim")).test(e.trim()));return i},e.prototype.replaceSpecialChar=function(e){return e.replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/g,"\\$&")},e.prototype.isClear=function(e,t){for(var i=0;i<e.length;i++)if(new RegExp(t,"gim").test(e[i].text))return!0;return!1},e.prototype.getSelectedInlinePoints=function(e){return{start:e.selectionStart,end:e.selectionEnd,text:this.getSelectedText(e)}},e}(),st=function(){function e(e){this.toolbarStatus=this.prevToolbarStatus={bold:!1,italic:!1,subscript:!1,superscript:!1,strikethrough:!1,orderedlist:!1,uppercase:!1,lowercase:!1,inlinecode:!1,unorderedlist:!1,formats:null},this.selection=new it,this.parent=e,this.element=this.parent.getEditPanel(),this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("toolbar-refresh",this.onRefreshHandler,this),this.parent.observer.on(t,this.removeEventListener,this)},e.prototype.removeEventListener=function(){this.parent.observer.off("toolbar-refresh",this.onRefreshHandler),this.parent.observer.off(t,this.removeEventListener)},e.prototype.onRefreshHandler=function(e){var t=this.selection.getSelectedParentPoints(this.element);this.toolbarStatus={orderedlist:!e.documentNode&&this.isListsApplied(t,"OL"),unorderedlist:!e.documentNode&&this.isListsApplied(t,"UL"),formats:this.currentFormat(t,e.documentNode),bold:!e.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand("Bold"),italic:!e.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand("Italic"),inlinecode:!e.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand("InlineCode"),strikethrough:!e.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand("StrikeThrough"),subscript:!e.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand("SubScript"),superscript:!e.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand("SuperScript"),uppercase:!e.documentNode&&this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand("UpperCase")},this.parent.formatter.editorManager.mdSelectionFormats.isAppliedCommand("InlineCode")&&(this.toolbarStatus.formats="pre");var i=JSON.stringify(this.toolbarStatus);this.parent.observer.notify("toolbar-updated",this.toolbarStatus),JSON.stringify(this.prevToolbarStatus)!==i&&(this.parent.observer.notify("updateTbItemsStatus",{html:null,markdown:JSON.parse(i)}),this.prevToolbarStatus=JSON.parse(i))},e.prototype.isListsApplied=function(e,t){var i=!0;if("OL"===t)for(var s=0;s<e.length;s++){var n=e[s].text.trim().split(" ",2)[0]+" ";if(!/^[\d.]+[ ]+$/.test(n)){i=!1;break}}else for(s=0;s<e.length;s++)if(!this.selection.isStartWith(e[s].text,this.parent.formatter.listSyntax[t])){i=!1;break}return i},e.prototype.currentFormat=function(e,t){for(var i="p",s=Object.keys(this.parent.formatter.formatSyntax),n="backward"===this.element.selectionDirection?e[0].text:e[e.length-1].text,o=0;!t&&o<s.length;o++){if("pre"!==s[o]&&this.selection.isStartWith(n,this.parent.formatter.formatSyntax[s[o]])){i=s[o];break}if("pre"===s[o]&&this.codeFormat()){i=s[o];break}}return i},e.prototype.codeFormat=function(){var e,t=!1,i=this.parent.inputElement,s=i.selectionStart,n=(e=s,function(t){return[t.slice(0,e),t.slice(e)]})(i.value),o=this.parent.formatter.formatSyntax.pre,r=this.getSelectedText(i);if(""!==r&&r===r.toLocaleUpperCase())return!0;if(""===r){var a=i.value.substr(n[0].length-1,1),l=n[1].substr(0,1);if(""!==a&&""!==l&&a.match(/[a-z]/i)&&a===a.toLocaleUpperCase()&&l===l.toLocaleUpperCase())return!0}return this.isCode(n[0],o)&&this.isCode(n[1],o)&&n[0].match(this.multiCharRegx(o)).length%2==1&&n[1].match(this.multiCharRegx(o)).length%2==1&&(t=!0),t},e.prototype.getSelectedText=function(e){return e.value.substring(e.selectionStart,e.selectionEnd)},e.prototype.isCode=function(e,t){return-1!==e.search("\\"+t)},e.prototype.multiCharRegx=function(e){return new RegExp("(\\"+e+")","g")},e}(),nt=function(){function e(e){sf.base.extend(this,this,e,!0),this.selection=this.parent.markdownSelection,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("lists-commands",this.applyListsHandler,this),this.parent.observer.on("keydown-handler",this.keyDownHandler,this),this.parent.observer.on("keyup-handler",this.keyUpHandler,this)},e.prototype.keyDownHandler=function(e){switch(e.event.which){case 9:this.tabKey(e)}switch(e.event.action){case"ordered-list":this.applyListsHandler({subCommand:"OL",callBack:e.callBack}),e.event.preventDefault();break;case"unordered-list":this.applyListsHandler({subCommand:"UL",callBack:e.callBack}),e.event.preventDefault()}},e.prototype.keyUpHandler=function(e){switch(e.event.which){case 13:this.enterKey(e)}},e.prototype.tabKey=function(e){var t=this.parent.element;this.selection.save(t.selectionStart,t.selectionEnd);var i=t.selectionStart,s=t.selectionEnd,n=this.selection.getSelectedParentPoints(t),o=0,r=this.isNotFirstLine(t,n[0]);if(r||e.event.shiftKey){var a=this.olListType(),l=this.getListRegex();this.currentAction=this.getAction(n[0].text);for(var h=0;h<n.length;h++){var d=(e.event.shiftKey,n[h].line-1),c=this.selection.getLine(t,d);if(c&&(!e.event.shiftKey&&r||e.event.shiftKey)){var p=c.split(". "),u=e.event.shiftKey?-"\t".length:"\t".length,f=n[h].text.split("\t");if(e.event.shiftKey&&1===f.length)break;if("OL"===this.currentAction&&/^\d+$/.test(p[0].trim())&&a){e.event.preventDefault(),n[h].text=e.event.shiftKey?f.splice(1,f.length).join("\t"):"\t"+n[h].text;var g=this.getTabSpace(n[h].text),m=this.getTabSpace(c),v=n[h].text.split(". ");if(g===m)this.changeTextAreaValue(v,this.nextOrderedListValue(p[0].trim()),e,t,n,h,s);else if(m<g)this.changeTextAreaValue(v,"1. ",e,t,n,h,s);else for(;m.length>g.length;null){d-=1;var b=(c=this.selection.getLine(t,d)).trim().split(". ");if(/^\d+$/.test(b[0])&&(m=this.getTabSpace(c)).length<=g.length){this.changeTextAreaValue(v,this.nextOrderedListValue(b[0]),e,t,n,h,s);break}}}else("UL"===this.currentAction&&l.test(c.trim())||!a)&&(e.event.preventDefault(),n[h].text=e.event.shiftKey?f.splice(1,f.length).join("\t"):"\t"+n[h].text,t.value=t.value.substr(0,n[h].start)+n[h].text+"\n"+t.value.substr(n[h].end,t.value.length));if(i=0===h?i+u:i,o+=u,1!==n.length)for(var y=h;y<n.length;y++)n[y].start=0!==y?n[y].start+u:n[y].start,n[y].end=n[y].end+u}}this.restore(t,i,s+o,e)}else this.restore(t,i,s+o,e)},e.prototype.changeTextAreaValue=function(e,t,i,s,n,o,r){var a=t;e.splice(0,1);var l,h=this.selection.getAllParents(s.value).length,d="",c=this.getTabSpace(n[o].text),p=parseInt(a.split(".")[0],null),u=this.getTabSpace(n[o].text),f=!0,g=!0,m=-1,v=!0,b=0,y="";d=""!==this.selection.getLine(s,n[0].line+1)?"":d+s.value.substr(n[0].end,s.value.length);for(var M=1;M<h&&!sf.base.isNullOrUndefined(this.selection.getLine(s,n[0].line+M))&&""!==this.selection.getLine(s,n[0].line+M);M++){var C=this.selection.getLine(s,n[0].line+M),w=this.getTabSpace(C),S=C.split(". ");if(1===S.length){d+=s.value.substr(n[0].end+b,s.value.length);break}b+=C.length;var N=!1;if(l=i.event.shiftKey?c.length+1:c.length-1,w.length>u.length&&(v=!1),c.length!==w.length&&w.length<u.length?(g=!0,f=!1,N=!(!i.event.shiftKey||c.length!==w.length)&&(g=!1,!0)):v&&i.event.shiftKey&&c.length===w.length&&w.length===u.length&&(g=!1,N=!0),y=""===d?"":"\n",l===w.length&&g){var x=i.event.shiftKey?(m++,this.nextOrderedListValue(m.toString())):this.previousOrderedListValue(S[0]);S.splice(0,1),d=d+y+w+x+S.join(". ")}else if(c.length===w.length&&f||N){x=this.nextOrderedListValue(p.toString());p++,S.splice(0,1),d=d+y+w+x+S.join(". ")}else d=d+y+C,g=!1;u=this.getTabSpace(C)}n[o].text=this.getTabSpace(n[o].text)+a+e.join(". ")+"\n",s.value=s.value.substr(0,n[o].start)+n[o].text+d},e.prototype.getTabSpace=function(e){for(var t=e.split("\t"),i="",s=0;s<t.length&&""===t[s];s++)i+="\t";return i},e.prototype.isNotFirstLine=function(e,t){var i,s=t.text,n=t.line-1,o=this.selection.getLine(e,n),r=this.getListRegex(),a=!1;if(o){this.currentAction=this.getAction(o);var l=o.split(". ");i="OL"===this.currentAction?/^\d+$/.test(l[0].trim()):r.test(o.trim())}if(o&&i){var h=this.getTabSpace(s),d=this.getTabSpace(o);for(a=h===d||a;d.length>h.length;null){n-=1;l=(o=this.selection.getLine(e,n)).trim().split(". ");if(("OL"===this.currentAction?/^\d+$/.test(l[0]):r.test(o.trim()))&&(d=this.getTabSpace(o)).length<=h.length){a=!0;break}}}return a},e.prototype.getAction=function(e){var t=e.split(". ")[0],i=/^\d+$/.test(t.trim()),s=e.trim().split(new RegExp("^("+this.selection.replaceSpecialChar(this.syntax.UL).trim()+")"))[1];return i?"OL":s?"UL":"NOTLIST"},e.prototype.nextOrderedListValue=function(e){return(parseInt(e,null)+1).toString()+". "},e.prototype.previousOrderedListValue=function(e){return(parseInt(e,null)-1).toString()+". "},e.prototype.enterKey=function(e){var t=this.parent.element;this.selection.save(t.selectionStart,t.selectionEnd);var i=t.selectionStart,s=t.selectionEnd,n=this.selection.getSelectedParentPoints(t),o=this.selection.getLine(t,n[0].line-1),r=this.olListType(),a=this.getListRegex(),l=[];sf.base.isNullOrUndefined(o)||(l=o.split(". "),this.currentAction=this.getAction(o));var h=0;if("OL"===this.currentAction&&l.length>1&&/^\d+$/.test(l[0].trim())&&r&&""!==l[1]){var d=this.getTabSpace(o);this.currentAction=this.getAction(o);var c=this.nextOrderedListValue(l[0]);n[0].text=d+c+n[0].text;for(var p=this.selection.getAllParents(t.value).length,u="\n",f=this.getTabSpace(o),g=this.getTabSpace(n[0].text),m=!0,v=1;v<p&&""!==t.value.substr(n[0].end,t.value.length);v++){var b=this.selection.getLine(t,n[0].line+v);if(sf.base.isNullOrUndefined(b))u+="";else{var y=b.split(". "),M=this.getTabSpace(b);if(M.length<g.length&&(m=!1),y.length>1&&/^\d+$/.test(y[0].trim())&&f.length===M.length&&m){var C=this.nextOrderedListValue(y[0]);y.splice(0,1),u=u+M+C+y.join(". ")+"\n"}else u=u+b+"\n",g=this.getTabSpace(b)}}t.value=t.value.substr(0,n[0].start)+f+c+this.selection.getLine(t,n[0].line)+u,i=i+c.length+d.length,h+=c.length+d.length}else if("UL"===this.currentAction&&o&&a.test(o.trim())&&""!==o.trim().replace(a,"")||"OL"===this.currentAction&&!r){d=this.getTabSpace(o),c=this.syntax[this.currentAction];n[0].text=d+c+n[0].text+(n[0].text.trim().length>0?"\n":""),t.value=t.value.substr(0,n[0].start)+n[0].text+t.value.substr(n[0].end,t.value.length),i=i+c.length+d.length,h+=c.length+d.length}this.restore(t,i,s+h,e)},e.prototype.olListType=function(){var e=this.syntax.OL.split(".,");return(1===e.length?null:parseInt(e[2].trim(),null)-parseInt(e[0].trim(),null))?1:0},e.prototype.applyListsHandler=function(e){var t=this.parent.element;this.selection.save(t.selectionStart,t.selectionEnd),this.currentAction=e.subCommand;for(var i,s=t.selectionStart,n=t.selectionEnd,o=0,r=0,a=0,l=this.selection.getSelectedParentPoints(t),h="",d=this.olListType(),c={},p=0;p<l.length;p++)if(i=d?"OL"===this.currentAction?p+d+". ":this.syntax[this.currentAction]:"OL"===this.currentAction?this.syntax.OL:this.syntax[this.currentAction],this.selection.isStartWith(l[p].text,i))l[p].text=l[p].text.replace(i,""),t.value=t.value.substr(0,l[p].start+a)+l[p].text+"\n"+t.value.substr(l[p].end+a,t.value.length),a-=i.length,r=i.length,this.restore(t,s-r,n+a,null);else{if(""===l[p].text&&0===p&&(this.selection.save(s,n),1!==l.length))for(var u=p;u<l.length;u++)l[u].start=0!==u?1+l[u].start:l[u].start,l[u].end=1+l[u].end;var f=sf.base.isNullOrUndefined(l[p-1])?0:this.getTabSpace(l[p-1].text).length,g=this.appliedLine(l[p].text,i,c,f);if(h=g.line?h:i,l[p].text=g.line?g.line:h+l[p].text,g.space=g.space?g.space:0,t.value=t.value.substr(0,l[p].start+a)+l[p].text+"\n"+t.value.substr(l[p].end,t.value.length),s=0===p?s+h.length+g.space>0?s+h.length+g.space:0:s,o+=h.length+g.space,1!==l.length)for(u=p;u<l.length;u++)l[u].start=0!==u?h.length+l[u].start+g.space:l[u].start,l[u].end=h.length+l[u].end+g.space;this.restore(t,s,n+o,null)}this.restore(t,null,null,e)},e.prototype.appliedLine=function(e,t,i,s){var n={},o=new RegExp("^["+this.syntax.UL.trim()+"]"),r=e.split(". "),a=r[0]+". ",l=o.test(e.trim())||e.trim()===this.syntax.OL.trim()||e.trim()===this.syntax.UL.trim()||/^\d+$/.test(r[0].trim()),h=this.olListType(),d=this.getTabSpace(e).length;if("OL"===this.currentAction&&h&&(i[d.toString()]=sf.base.isNullOrUndefined(i[d.toString()])?1:i[d.toString()].valueOf()+1,t=i[d.toString()].valueOf().toString()+". ",!sf.base.isNullOrUndefined(s)&&s>d&&(i[s.toString()]=0)),l){var c=void 0,p=void 0;o.test(e.trim())?(p=this.syntax.UL,c=t,n.space=t.trim().length-this.syntax.UL.trim().length):/^\d+$/.test(r[0].trim())&&h?(p=r[0].trim()+". ",c=t,n.space=this.syntax.UL.trim().length-a.trim().length):/^\d+$/.test(r[0].trim())&&(p=r[0].trim()+". ",c=this.syntax.UL,n.space=this.syntax.UL.trim().length-a.trim().length),n.line=e.replace(p,c)}return n},e.prototype.restore=function(e,t,i,s){sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(t)||this.selection.save(t,i),sf.base.isNullOrUndefined(s)||this.selection.restore(e),s&&s.callBack&&s.callBack({requestType:this.currentAction,selectedText:this.selection.getSelectedText(e),editorMode:"Markdown",event:s.event})},e.prototype.getListRegex=function(){for(var e="",t=Object.keys(this.syntax),i=0;i<t.length;i++){var s=this.selection.replaceSpecialChar(this.syntax[t[i]]);e+=""===e?"^("+s+")|^("+s.trim()+")":"|^("+s+")|^("+s.trim()+")"}return new RegExp(e)},e}(),ot=function(){function e(e){sf.base.extend(this,this,e,!0),this.selection=this.parent.markdownSelection,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("format-type",this.applyFormats,this)},e.prototype.applyFormats=function(e){e.subCommand=e.subCommand.toLowerCase();var t=this.parent.element;this.selection.save(t.selectionStart,t.selectionEnd);var i=this.selection.getSelectedParentPoints(t);if(this.isAppliedFormat(i)===e.subCommand){if("pre"===e.subCommand){if(!(i.length>1))return;this.applyCodeBlock(t,e,i)}return this.cleanFormat(t),void this.restore(t,t.selectionStart,t.selectionEnd,e)}if("p"===e.subCommand)return this.cleanFormat(t),void this.restore(t,t.selectionStart,t.selectionEnd,e);("pre"===e.subCommand&&1!==i.length||"pre"!==e.subCommand)&&this.cleanFormat(t,e.subCommand);var s=t.selectionStart,n=t.selectionEnd,o=0;if(i=this.selection.getSelectedParentPoints(t),"pre"!==e.subCommand){for(var r=0;r<i.length;r++)if(""===i[r].text||this.selection.isStartWith(i[r].text,"\\"+this.syntax[e.subCommand])){if(""===i[r].text&&0===r&&(this.selection.save(s,n),0===this.selection.getSelectedText(t).length&&(i[r].text=this.syntax[e.subCommand],t.value=t.value.substr(0,i[r].start)+this.syntax[e.subCommand]+t.value.substr(i[r].end,t.value.length),s=0===r?s+this.syntax[e.subCommand].length:s,o+=this.syntax[e.subCommand].length),1!==i.length))for(a=r;a<i.length;a++)i[a].start=0!==a?1+i[a].start:i[a].start,i[a].end=1+i[a].end}else if(i[r].text=this.syntax[e.subCommand]+i[r].text,t.value=t.value.substr(0,i[r].start)+i[r].text+"\n"+t.value.substr(i[r].end,t.value.length),s=0===r?s+this.syntax[e.subCommand].length:s,o+=this.syntax[e.subCommand].length,1!==i.length)for(var a=r;a<i.length;a++)i[a].start=0!==a?this.syntax[e.subCommand].length+i[a].start:i[a].start,i[a].end=this.syntax[e.subCommand].length+i[a].end;this.restore(t,s,n+o,e)}else i.length>1?this.applyCodeBlock(t,e,i):(sf.base.extend(e,e,{subCommand:"InlineCode"},!0),this.parent.observer.notify("command-type",e))},e.prototype.clearRegex=function(){for(var e="",t=Object.keys(this.syntax),i=0;i<t.length&&"pre"!==t[i]&&"p"!==t[i];i++)e+=""===e?"^("+this.selection.replaceSpecialChar(this.syntax[t[i]].trim())+")":"|^("+this.selection.replaceSpecialChar(this.syntax[t[i]].trim())+")";return e},e.prototype.cleanFormat=function(e,t){var i=this.selection.getSelectedParentPoints(e),s=e.selectionStart,n=e.selectionEnd,o=0;if(this.selection.isClear(i,this.clearRegex())){for(var r=0;r<i.length;r++){for(var a=Object.keys(this.syntax),l=0;""!==i[r].text&&l<a.length;l++){var h=this.syntax[a[l]];if(a[l]!==t){var d=new RegExp("^("+this.selection.replaceSpecialChar(h)+")","gim");if(d.test(i[r].text)){if(i[r].text=i[r].text.replace(d,""),e.value=e.value.substr(0,i[r].start)+i[r].text+"\n"+e.value.substr(i[r].end,e.value.length),s=0===r?s-h.length>0?s-h.length:0:s,o+=h.length,1!==i.length)for(var c=0;c<i.length;c++)i[c].start=0!==c?i[c].start-h.length:i[c].start,i[c].end=i[c].end-h.length;break}}}if(""===i[r].text&&0===r&&(this.selection.save(s,n),1!==i.length))for(l=r;l<i.length;l++)i[l].start=0!==l?1+i[l].start:i[l].start,i[l].end=1+i[l].end}this.restore(e,s,n-o)}},e.prototype.applyCodeBlock=function(e,t,i){var s=t.subCommand,n=i[0].start,o=i[i.length-1].end,r=this.selection.getAllParents(e.value),a=r[i[0].line-1],l=r[i.length+1+1];if(this.selection.isStartWith(a,this.syntax.pre.split("\n")[0])||this.selection.isStartWith(l,this.syntax.pre.split("\n")[0])){var h=this.syntax[""+s],d=this.parent.markdownSelection.getSelectedInlinePoints(e),c=e.value.substr(0,e.selectionStart).lastIndexOf(h),p=e.value.substr(e.selectionEnd,e.selectionEnd).indexOf(h);p+=d.end;var u=this.replaceAt(e.value.substr(0,d.start),h,"",c,d.start),f=this.replaceAt(e.value.substr(d.end,e.value.length),h,"",0,p);e.value=u+d.text+f,n=this.selection.selectionStart-h.length,o=this.selection.selectionEnd-h.length}else{var g=e.value.substring(n,o).split("\n"),m=""===g[g.length-1]?"":"\n";e.value=e.value.substr(0,n)+this.syntax[""+s]+e.value.substring(n,o)+m+this.syntax[""+s]+e.value.substr(o,e.value.length),n=this.selection.selectionStart+this.syntax[""+s].length,o=this.selection.selectionEnd+this.syntax[""+s].length-1}this.restore(e,n,o,t)},e.prototype.replaceAt=function(e,t,i,s,n){return e.slice(0,s)+e.slice(s,n).replace(t,i)+e.slice(n)},e.prototype.restore=function(e,t,i,s){this.selection.save(t,i),this.selection.restore(e),s&&s.callBack&&s.callBack({requestType:s.subCommand,selectedText:this.selection.getSelectedText(e),editorMode:"Markdown",event:s.event})},e.prototype.isAppliedFormat=function(e,t){for(var i="p",s=(Object.keys(this.syntax),Object.keys(this.syntax)),n="backward"===this.parent.element.selectionDirection?e[0].text:e[e.length-1].text,o=0;!t&&o<s.length;o++){if("pre"!==s[o]&&this.selection.isStartWith(n,this.syntax[s[o]])){i=s[o];break}if("pre"===s[o]){var r=this.selection.getAllParents(this.parent.element.value),a=r[e[0].line-1],l=r[e.length+1];if(this.selection.isStartWith(a,this.syntax[s[o]].split("\n")[0])&&this.selection.isStartWith(l,this.syntax[s[o]].split("\n")[0])){i=s[o];break}}}return i},e}(),rt=function(){function e(e){sf.base.extend(this,this,e,!0),this.selection=this.parent.markdownSelection,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("command-type",this.applyCommands,this),this.parent.observer.on("keydown-handler",this.keyDownHandler,this)},e.prototype.keyDownHandler=function(e){switch(e.event.action){case"bold":this.applyCommands({subCommand:"Bold",callBack:e.callBack}),e.event.preventDefault();break;case"italic":this.applyCommands({subCommand:"Italic",callBack:e.callBack}),e.event.preventDefault();break;case"strikethrough":this.applyCommands({subCommand:"StrikeThrough",callBack:e.callBack}),e.event.preventDefault();break;case"uppercase":this.applyCommands({subCommand:"UpperCase",callBack:e.callBack}),e.event.preventDefault();break;case"lowercase":this.applyCommands({subCommand:"LowerCase",callBack:e.callBack}),e.event.preventDefault();break;case"superscript":this.applyCommands({subCommand:"SuperScript",callBack:e.callBack}),e.event.preventDefault();break;case"subscript":this.applyCommands({subCommand:"SubScript",callBack:e.callBack}),e.event.preventDefault()}},e.prototype.isBold=function(e,t){return-1!==e.search("\\"+t+"\\"+t)},e.prototype.isItalic=function(e,t){return-1!==e.search("\\"+t)},e.prototype.isMatch=function(e,t){var i=[""];switch(t){case this.syntax.Italic:case this.syntax.InlineCode:case this.syntax.StrikeThrough:i=e.match(this.singleCharRegx(t))}return i},e.prototype.multiCharRegx=function(e){return new RegExp("(\\"+e+"\\"+e+")","g")},e.prototype.singleCharRegx=function(e){return new RegExp("(\\"+e+")","g")},e.prototype.isAppliedCommand=function(e){var t,i=!1,s=this.parent.element,n=s.selectionStart,o=(t=n,function(e){return[e.slice(0,t),e.slice(t)]})(s.value),r=this.syntax.Bold.substr(0,1),a=this.syntax.Italic,l=this.parent.markdownSelection.getSelectedText(s);if(""!==l&&l===l.toLocaleUpperCase()&&"UpperCase"===e)return!0;if(""===l){var h=s.value.substr(o[0].length-1,1),d=o[1].substr(0,1);if(""!==h&&""!==d&&h.match(/[a-z]/i)&&h===h.toLocaleUpperCase()&&d===d.toLocaleUpperCase()&&"UpperCase"===e)return!0}return this.isBold(o[0],r)||this.isItalic(o[0],a)||this.isBold(o[1],r)||this.isItalic(o[1],a)||(sf.base.isNullOrUndefined(this.isMatch(o[0],this.syntax.StrikeThrough))||sf.base.isNullOrUndefined(this.isMatch(o[1],this.syntax.StrikeThrough))||this.isMatch(o[0],this.syntax.StrikeThrough).length%2!=1||this.isMatch(o[1],this.syntax.StrikeThrough).length%2!=1||"StrikeThrough"!==e||(i=!0),sf.base.isNullOrUndefined(this.isMatch(o[0],this.syntax.InlineCode))||sf.base.isNullOrUndefined(this.isMatch(o[1],this.syntax.InlineCode))||this.isMatch(o[0],this.syntax.InlineCode).length%2!=1||this.isMatch(o[1],this.syntax.InlineCode).length%2!=1||"InlineCode"!==e||(i=!0),sf.base.isNullOrUndefined(o[0].match(/\<sub>/g))||sf.base.isNullOrUndefined(o[1].match(/\<\/sub>/g))||o[0].match(/\<sub>/g).length%2!=1||o[1].match(/\<\/sub>/g).length%2!=1||"SubScript"!==e||(i=!0),sf.base.isNullOrUndefined(o[0].match(/\<sup>/g))||sf.base.isNullOrUndefined(o[1].match(/\<\/sup>/g))||o[0].match(/\<sup>/g).length%2!=1||o[1].match(/\<\/sup>/g).length%2!=1||"SuperScript"!==e||(i=!0)),this.isBold(o[0],r)&&this.isBold(o[1],r)&&o[0].match(this.multiCharRegx(r)).length%2==1&&o[1].match(this.multiCharRegx(r)).length%2==1&&"Bold"===e&&(i=!0),o[0]=this.isBold(o[0],r)?o[0].replace(this.multiCharRegx(r),"$%@"):o[0],o[1]=this.isBold(o[1],r)?o[1].replace(this.multiCharRegx(r),"$%@"):o[1],sf.base.isNullOrUndefined(this.isMatch(o[0],this.syntax.Italic))||sf.base.isNullOrUndefined(this.isMatch(o[1],this.syntax.Italic))||this.isMatch(o[0],this.syntax.Italic).length%2!=1||this.isMatch(o[1],this.syntax.Italic).length%2!=1||"Italic"!==e||(i=!0),sf.base.isNullOrUndefined(this.isMatch(o[0],this.syntax.StrikeThrough))||sf.base.isNullOrUndefined(this.isMatch(o[1],this.syntax.StrikeThrough))||this.isMatch(o[0],this.syntax.StrikeThrough).length%2!=1||this.isMatch(o[1],this.syntax.StrikeThrough).length%2!=1||"StrikeThrough"!==e||(i=!0),sf.base.isNullOrUndefined(this.isMatch(o[0],this.syntax.InlineCode))||sf.base.isNullOrUndefined(this.isMatch(o[1],this.syntax.InlineCode))||this.isMatch(o[0],this.syntax.InlineCode).length%2!=1||this.isMatch(o[1],this.syntax.InlineCode).length%2!=1||"InlineCode"!==e||(i=!0),sf.base.isNullOrUndefined(o[0].match(/\<sub>/g))||sf.base.isNullOrUndefined(o[1].match(/\<\/sub>/g))||o[0].match(/\<sub>/g).length%2!=1||o[1].match(/\<\/sub>/g).length%2!=1||"SubScript"!==e||(i=!0),sf.base.isNullOrUndefined(o[0].match(/\<sup>/g))||sf.base.isNullOrUndefined(o[1].match(/\<\/sup>/g))||o[0].match(/\<sup>/g).length%2!=1||o[1].match(/\<\/sup>/g).length%2!=1||"SuperScript"!==e||(i=!0),i},e.prototype.applyCommands=function(e){this.currentAction=e.subCommand;var t=this.parent.element;this.selection.save(t.selectionStart,t.selectionEnd);var i=t.selectionStart,s=t.selectionEnd,n=0,o=this.parent.markdownSelection.getSelectedInlinePoints(t);if(this.isAppliedCommand(e.subCommand)&&""!==o.text){var r=this.syntax[e.subCommand],a="SubScript"===e.subCommand?"</sub>":"SuperScript"===e.subCommand?"</sup>":this.syntax[e.subCommand],l="UpperCase"===e.subCommand||"LowerCase"===e.subCommand?0:r.length,h=t.value.substr(0,o.start).lastIndexOf(r),d=t.value.substr(o.end,t.value.length).indexOf(a);d+=o.end;var c=this.replaceAt(t.value.substr(0,o.start),r,"",h,o.start),p=this.replaceAt(t.value.substr(o.end,t.value.length),a,"",0,d);return t.value=c+o.text+p,void this.restore(t,i-l,s-l,e)}if(""===o.text||this.isApplied(o,e.subCommand))"UpperCase"!==e.subCommand&&"LowerCase"!==e.subCommand?("SubScript"===e.subCommand||"SuperScript"===e.subCommand?(o.text=this.textReplace(o.text,e.subCommand),o.text=this.syntax[e.subCommand]+o.text+"</"+this.syntax[e.subCommand].substring(1,5)):(o.text=this.textReplace(o.text,e.subCommand),o.text=this.syntax[e.subCommand]+o.text+this.syntax[e.subCommand]),t.value=t.value.substr(0,o.start)+o.text+t.value.substr(o.end,t.value.length),n=this.syntax[e.subCommand].length,o.start===o.end?this.restore(t,i+n,s+n,e):this.restore(t,i+n,s-n,e)):this.restore(t,i,s,e);else{n="UpperCase"===e.subCommand||"LowerCase"===e.subCommand?0:this.syntax[e.subCommand].length;var u=t.value.substr(o.start-this.syntax[e.subCommand].length,this.syntax[e.subCommand].length),f=void 0;if(u===e.subCommand||o.start-this.syntax[e.subCommand].length===t.value.indexOf(this.syntax[e.subCommand])&&(o.end===t.value.lastIndexOf(this.syntax[e.subCommand])||o.end===t.value.lastIndexOf("</"+this.syntax[e.subCommand].substring(1,5)))){f="SubScript"===e.subCommand||"SuperScript"===e.subCommand?t.value.substr(o.end,this.syntax[e.subCommand].length+1):t.value.substr(o.end,this.syntax[e.subCommand].length);c=this.replaceAt(t.value.substr(0,o.start),u,"",o.start-this.syntax[e.subCommand].length,o.start),p=this.replaceAt(t.value.substr(o.end,t.value.length),f,"",0,f.length);t.value=c+o.text+p,this.restore(t,i-n,s-n,e)}else"SubScript"===e.subCommand||"SuperScript"===e.subCommand?o.text=this.syntax[e.subCommand]+o.text+"</"+this.syntax[e.subCommand].substring(1,5):"UpperCase"===e.subCommand||"LowerCase"===e.subCommand?o.text="UpperCase"===e.subCommand?o.text.toUpperCase():o.text.toLowerCase():o.text=this.syntax[e.subCommand]+o.text+this.syntax[e.subCommand],t.value=t.value.substr(0,o.start)+o.text+t.value.substr(o.end,t.value.length),this.restore(t,i+n,s+n,e)}this.parent.undoRedoManager.saveData()},e.prototype.replaceAt=function(e,t,i,s,n){return e.slice(0,s)+e.slice(s,n).replace(t,i)+e.slice(n)},e.prototype.restore=function(e,t,i,s){this.selection.save(t,i),this.selection.restore(e),s&&s.callBack&&s.callBack({requestType:this.currentAction,selectedText:this.selection.getSelectedText(e),editorMode:"Markdown",event:s.event})},e.prototype.textReplace=function(e,t){var i=this.singleCharRegx(this.syntax[""+t]);switch(t){case"Bold":i=this.multiCharRegx(this.syntax[""+t].substr(0,1)),e=e.replace(i,"");break;case"Italic":if(this.isBold(e,this.syntax[""+t].substr(0,1))){var s=this.multiCharRegx(this.syntax[""+t].substr(0,1)),n=e;n=n.replace(s,"$%@").replace(i,"");var o=new RegExp("\\$%@","g");e=n.replace(o,this.syntax[""+t].substr(0,1)+this.syntax[""+t].substr(0,1))}else e=e.replace(i,"");break;case"StrikeThrough":case"InlineCode":e=e.replace(i,"");break;case"SubScript":e=e.replace(/<sub>/g,"").replace(/<\/sub>/g,"");break;case"SuperScript":e=e.replace(/<sup>/g,"").replace(/<\/sup>/g,"")}return e},e.prototype.isApplied=function(e,t){var i=this.singleCharRegx(this.syntax[""+t]);switch(t){case"SubScript":case"SuperScript":return(i=this.singleCharRegx(this.syntax[""+t])).test(e.text);case"Bold":case"StrikeThrough":return(i=this.multiCharRegx(this.syntax[""+t].substr(0,1))).test(e.text);case"UpperCase":case"LowerCase":return(i=new RegExp("^["+this.syntax[""+t]+"]*$","g")).test(e.text);case"Italic":var s=void 0,n=this.multiCharRegx(this.syntax[""+t].substr(0,1));if(n.test(e.text)){var o=e.text;o=o.replace(n,"$%#"),s=i.test(o)}else s=i.test(e.text);return s;case"InlineCode":return i.test(e.text)}},e}(),at=function(){function e(e,t){this.undoRedoStack=[],this.parent=e,this.undoRedoSteps=sf.base.isNullOrUndefined(t)?30:t.undoRedoSteps,this.undoRedoTimer=sf.base.isNullOrUndefined(t)?300:t.undoRedoTimer,this.selection=this.parent.markdownSelection,this.addEventListener()}return e.prototype.addEventListener=function(){var e=sf.base.debounce(this.keyUp,this.undoRedoTimer);this.parent.observer.on("keyup-handler",e,this),this.parent.observer.on("keydown-handler",this.keyDown,this),this.parent.observer.on("action",this.onAction,this),this.parent.observer.on("model_changed_plugin",this.onPropertyChanged,this)},e.prototype.onPropertyChanged=function(e){for(var t=0,i=Object.keys(e.newProp);t<i.length;t++){switch(i[t]){case"undoRedoSteps":this.undoRedoSteps=e.newProp.undoRedoSteps;break;case"undoRedoTimer":this.undoRedoTimer=e.newProp.undoRedoTimer}}},e.prototype.removeEventListener=function(){var e=sf.base.debounce(this.keyUp,300);this.parent.observer.off("keyup-handler",e),this.parent.observer.off("keydown-handler",this.keyDown),this.parent.observer.off("action",this.onAction),this.parent.observer.off("model_changed_plugin",this.onPropertyChanged)},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.onAction=function(e){"Undo"===e.subCommand?this.undo(e):this.redo(e)},e.prototype.keyDown=function(e){var t=e.event;switch(t.action){case"undo":t.preventDefault(),this.undo(e);break;case"redo":t.preventDefault(),this.redo(e)}},e.prototype.keyUp=function(e){17===e.event.keyCode||e.event.ctrlKey||this.saveData(e)},e.prototype.saveData=function(e){var t=this.parent.element;this.selection.save(t.selectionStart,t.selectionEnd);var i=t.selectionStart,s=t.selectionEnd,n={text:this.parent.element.value,start:i,end:s};this.undoRedoStack.length>=this.steps&&(this.undoRedoStack=this.undoRedoStack.slice(0,this.steps+1)),this.undoRedoStack.length>1&&this.undoRedoStack[this.undoRedoStack.length-1].start===i&&this.undoRedoStack[this.undoRedoStack.length-1].end===s||(this.undoRedoStack.push(n),this.steps=this.undoRedoStack.length-1,this.steps>this.undoRedoSteps&&(this.undoRedoStack.shift(),this.steps--),e&&e.callBack&&e.callBack())},e.prototype.undo=function(e){if(this.steps>0){this.currentAction="Undo";var t=this.undoRedoStack[this.steps-1].start,i=this.undoRedoStack[this.steps-1].end,s=this.undoRedoStack[this.steps-1].text;this.parent.element.value=s,this.parent.element.focus(),this.steps--,this.restore(this.parent.element,t,i,e)}},e.prototype.redo=function(e){if(null!=this.undoRedoStack[this.steps+1]){this.currentAction="Redo";var t=this.undoRedoStack[this.steps+1].start,i=this.undoRedoStack[this.steps+1].end;this.parent.element.value=this.undoRedoStack[this.steps+1].text,this.parent.element.focus(),this.steps++,this.restore(this.parent.element,t,i,e)}},e.prototype.restore=function(e,t,i,s){this.selection.save(t,i),this.selection.restore(e),s&&s.callBack&&s.callBack({requestType:this.currentAction,selectedText:this.selection.getSelectedText(e),editorMode:"Markdown",event:s.event})},e.prototype.getUndoStatus=function(){var e={undo:!1,redo:!1};return this.steps>0&&(e.undo=!0),null!=this.undoRedoStack[this.steps+1]&&(e.redo=!0),e},e}(),lt=function(){function e(e){this.parent=e,this.selection=this.parent.markdownSelection,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("link-commands",this.createLink,this)},e.prototype.createLink=function(e){var t=this.parent.element;t.focus();var i=t.selectionStart,s=t.selectionEnd,n="Image"===e.subCommand?this.selection.getSelectedText(t):e.item.text,o="Image"===e.subCommand?i+2:i+1,r="Image"===e.subCommand?s+2:s+1;n="Image"===e.subCommand?"!["+n+"]("+e.item.url+")":"["+n+"]("+e.item.url+")",t.value=t.value.substr(0,i)+n+t.value.substr(s,t.value.length),this.parent.markdownSelection.setSelection(t,o,r),this.restore(t,o,r,e)},e.prototype.restore=function(e,t,i,s){this.selection.save(t,i),this.selection.restore(e),s&&s.callBack&&s.callBack({requestType:s.subCommand,selectedText:this.selection.getSelectedText(e),editorMode:"Markdown",event:s.event})},e}(),ht=function(){function e(e){sf.base.extend(this,this,e,!0),this.selection=this.parent.markdownSelection,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("insert-table",this.createTable,this),this.parent.observer.on("keydown-handler",this.onKeyDown,this)},e.prototype.removeEventListener=function(){this.parent.observer.off("insert-table",this.createTable),this.parent.observer.off("keydown-handler",this.onKeyDown)},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.onKeyDown=function(e){"insert-table"===e.event.action&&(e.item=e.value,this.createTable(e))},e.prototype.createTable=function(e){this.element=this.parent.element;var t=this.element.selectionStart,i=this.element.selectionEnd,s=this.element.value;this.locale=e,this.selection.save(t,i),this.restore(this.element.selectionStart,this.element.selectionEnd,null),this.insertTable(t,i,s,e)},e.prototype.getTable=function(){var e="";return e+=this.textNonEmpty(),e+=this.tableHeader(this.locale),e+=this.tableCell(this.locale)},e.prototype.tableHeader=function(e){for(var t="",i=1;i<=2;i++){t+="|";for(var s=1;s<=2;s++)t+=1===i?e.item.headingText+" "+s+"|":"---------|";t+=this.insertLine()}return t},e.prototype.tableCell=function(e){for(var t="",i=1;i<=2;i++){t+="|";for(var s=1;s<=2;s++)t+=e.item.colText+" "+this.convertToLetters(i)+s+"|";t+=this.insertLine()}return t+=this.insertLine()},e.prototype.insertLine=function(){var e=document.createElement("div");return e.innerHTML="\n",e.textContent},e.prototype.insertTable=function(e,t,i,s){var n=this.selection.getSelectedParentPoints(this.element),o=n[n.length-1].text.split(" ",2),r=this.getFormatTag();o.length<2?(this.element.value=this.updateValue(this.getTable()),this.makeSelection(i,e,t)):this.ensureFormatApply(n[n.length-1].text)?this.checkValid(e,t,this.getTable(),i,s,o,n,r):(this.element.value=this.updateValue(this.getTable()),this.makeSelection(i,e,t)),this.restore(this.element.selectionStart,this.element.selectionEnd,s)},e.prototype.makeSelection=function(e,t,i){i=t+(e.length>0?12:10),t+=e.length>0?3:1,this.selection.setSelection(this.element,t,i)},e.prototype.getFormatTag=function(){for(var e=Object.keys(this.syntaxTag.Formats),t=Object.keys(this.syntaxTag.List),i=[],s=0;s<e.length;s++)i.push(this.syntaxTag.Formats[e[s]]);for(var n=0;n<t.length;n++)i.push(this.syntaxTag.List[t[n]]);return i},e.prototype.ensureFormatApply=function(e){for(var t=this.getFormatTag(),i=e.trim().split(" ",2)[0]+" ",s=0;s<t.length;s++)if(i===t[s]||/^[\d.]+[ ]+$/.test(i))return!0;return!1},e.prototype.ensureStartValid=function(e,t){for(var i=t[0].text.split(" ",2),s=e+1;s<=e+i[0].length+1;s++)if(this.element.selectionStart===s||this.element.selectionEnd===s)return!1;return!0},e.prototype.ensureEndValid=function(e,t){for(var i=e+1;i<=e+t+1;i++)if(this.element.selectionEnd===i)return!1;return!0},e.prototype.updateValueWithFormat=function(e,t){var i=this.element.value.substring(this.element.selectionEnd,this.element.value.length);return t+=i.replace(i,e[0]+" "+i),this.element.value.substr(0,this.element.selectionStart)+t},e.prototype.updateValue=function(e){return this.element.value.substr(0,this.element.selectionStart)+e+this.element.value.substr(this.element.selectionEnd,this.element.value.length)},e.prototype.checkValid=function(e,t,i,s,n,o,r,a){this.ensureStartValid(r[0].start,r)&&this.ensureEndValid(r[r.length-1].start,o[0].length)&&(e===r[0].start?e!==t&&t!==r[r.length-1].end-1?this.element.value=this.updateValueWithFormat(o,i):this.element.value=this.updateValue(i):t===r[r.length-1].end-1?this.element.value=this.updateValue(i):this.element.value=this.updateValueWithFormat(o,i),this.makeSelection(s,e,t))},e.prototype.convertToLetters=function(e){var t="A".charCodeAt(0),i="";do{e-=1,i=String.fromCharCode(t+e%26)+i,e=e/26>>0}while(e>0);return i},e.prototype.textNonEmpty=function(){var e="";return(this.isCursorBased()||this.isSelectionBased())&&this.element.value.length>0&&(e+=this.insertLine(),e+=this.insertLine()),e},e.prototype.isCursorBased=function(){return this.element.selectionStart===this.element.selectionEnd},e.prototype.isSelectionBased=function(){return this.element.selectionStart!==this.element.selectionEnd},e.prototype.restore=function(e,t,i){this.selection.save(e,t),this.selection.restore(this.element),i&&i.callBack&&i.callBack({requestType:i.subCommand,selectedText:this.selection.getSelectedText(this.element),editorMode:"Markdown",event:i.event})},e}(),dt=function(){function e(e){this.parent=e,this.selection=this.parent.markdownSelection,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("clear-commands",this.clear,this)},e.prototype.replaceRegex=function(e){return e.replace(/\*/gi,"\\*").replace(/\&/gi,"\\&").replace(/\-/gi,"\\-").replace(/\^/gi,"\\^").replace(/\$/gi,"\\$").replace(/\./gi,"\\.").replace(/\|/gi,"\\|").replace(/\?/gi,"\\?").replace(/\+/gi,"\\+").replace(/\-/gi,"\\-").replace(/\&/gi,"\\&")},e.prototype.clearSelectionTags=function(e){for(var t=this.parent.selectionTags,i=Object.keys(t),s=0;s<i.length;s++){var n=i[s];if(t.hasOwnProperty(n)&&""!==t[n]){var o=this.replaceRegex(t[""+n]),r=void 0,a=t[""+n].length,l="<sup>"===t[""+n]||"<sub>"===t[""+n]?t[""+n].length+1:t[""+n].length;r="<sup>"===t[""+n]?new RegExp("<sup>(.*?)</sup>","ig"):"<sub>"===t[""+n]?new RegExp("<sub>(.*?)</sub>","ig"):new RegExp(o+"(.*?)"+o,"ig");for(var h=e.match(r),d=0;h&&d<h.length&&""!==h[d];d++)e=e.replace(h[d],h[d].substr(a,h[d].length-l-a))}}return e},e.prototype.clearFormatTags=function(e){var t=e.split("\n");return this.clearFormatLines(t)},e.prototype.clearFormatLines=function(e){for(var t=[this.parent.formatTags,this.parent.listTags],i="",s=0;s<e.length;s++){for(var n=0;n<t.length;n++)for(var o=t[n],r=Object.keys(o),a=0;a<r.length;a++){var l=r[a];o.hasOwnProperty(l)&&""!==o[l]&&0===e[s].indexOf(o[""+l])&&(e[s]=e[s].replace(o[""+l],""),e[s]=this.clearFormatLines([e[s]]))}i=i+e[s]+(s!==e.length-1?"\n":"")}return i},e.prototype.clear=function(e){var t=this.parent.element;t.focus();var i=t.selectionStart,s=t.selectionEnd,n=this.selection.getSelectedText(t);n=this.clearSelectionTags(n),n=this.clearFormatTags(n),t.value=t.value.substr(0,i)+n+t.value.substr(s,t.value.length),this.parent.markdownSelection.setSelection(t,i,i+n.length),this.restore(t,i,i+n.length,e)},e.prototype.restore=function(e,t,i,s){this.selection.save(t,i),this.selection.restore(e),s&&s.callBack&&s.callBack({requestType:s.subCommand,selectedText:this.selection.getSelectedText(e),editorMode:"Markdown",event:s.event})},e}(),ct=function(){function e(e){this.parent=e,this.selection=this.parent.markdownSelection,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("insert-text",this.InsertTextExec,this)},e.prototype.InsertTextExec=function(e){var t=this.parent.element;t.focus();var i=t.selectionStart,s=t.selectionEnd,n=e.value.text,o=i+n.length,r=s+n.length;t.value=t.value.substr(0,i)+n+t.value.substr(s,t.value.length),this.parent.markdownSelection.setSelection(t,o,r),this.restore(t,o,r,e)},e.prototype.restore=function(e,t,i,s){this.selection.save(t,i),this.selection.restore(e),s&&s.callBack&&s.callBack({requestType:s.subCommand,selectedText:this.selection.getSelectedText(e),editorMode:"Markdown",event:s.event})},e}(),pt=function(){function e(e){this.initialize(),sf.base.extend(this,this,e,!0),this.observer=new sf.base.Observer(this),this.markdownSelection=new it,this.listObj=new nt({parent:this,syntax:this.listTags}),this.formatObj=new ot({parent:this,syntax:this.formatTags}),this.undoRedoManager=new at(this,e.options),this.mdSelectionFormats=new rt({parent:this,syntax:this.selectionTags}),this.linkObj=new lt(this),this.tableObj=new ht({parent:this,syntaxTag:{Formats:this.formatTags,List:this.listTags}}),this.clearObj=new dt(this),this.insertTextObj=new ct(this),this.wireEvents()}return e.prototype.initialize=function(){this.formatTags=te,this.listTags=se,this.selectionTags=ie},e.prototype.wireEvents=function(){this.observer.on("keydown",this.editorKeyDown,this),this.observer.on("keyup",this.editorKeyUp,this),this.observer.on("model_changed",this.onPropertyChanged,this)},e.prototype.onPropertyChanged=function(e){this.observer.notify("model_changed_plugin",e)},e.prototype.editorKeyDown=function(e){this.observer.notify("keydown-handler",e)},e.prototype.editorKeyUp=function(e){this.observer.notify("keyup-handler",e)},e.prototype.execCommand=function(e,t,i,s,n,o){switch(e.toLocaleLowerCase()){case"lists":this.observer.notify("lists-commands",{subCommand:t,event:i,callBack:s});break;case"formats":this.observer.notify("format-type",{subCommand:t,event:i,callBack:s});break;case"actions":this.observer.notify("action",{subCommand:t,event:i,callBack:s});break;case"style":case"effects":case"casing":this.observer.notify("command-type",{subCommand:t,event:i,callBack:s});break;case"links":case"images":this.observer.notify("link-commands",{subCommand:t,event:i,callBack:s,item:o});break;case"table":switch(t.toString().toLocaleLowerCase()){case"createtable":this.observer.notify("insert-table",{subCommand:t,item:o,event:i,callBack:s})}break;case"clear":this.observer.notify("clear-commands",{subCommand:t,event:i,callBack:s});break;case"inserttext":this.observer.notify("insert-text",{subCommand:t,event:i,callBack:s,value:{text:o}})}},e}(),ut=(L=function(e,t){return(L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}L(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),ft=function(e){function t(t){var i=e.call(this)||this;return i.initialize(),sf.base.extend(i,i,t,!0),t&&i.element&&i.updateFormatter(i.element,document,t.options),i}return ut(t,e),t.prototype.initialize=function(){this.keyConfig=oe,this.formatSyntax=te,this.listSyntax=se,this.selectionSyntax=ie},t.prototype.updateFormatter=function(e,t,i){e&&(this.editorManager=new pt({element:e,formatTags:this.formatSyntax,listTags:this.listSyntax,selectionTags:this.selectionSyntax,options:i}))},t}(ee),gt=function(){function i(e){this.parent=e,this.addEventListener()}return i.prototype.addEventListener=function(){this.saveSelection=new it,this.parent.observer.on(e,this.render,this),this.parent.observer.on("markdown-toolbar-click",this.onToolbarClick,this),this.parent.observer.on(t,this.destroy,this),this.parent.observer.on("selectAll",this.selectAll,this),this.parent.observer.on("getSelectedHtml",this.getSelectedHtml,this),this.parent.observer.on(o,this.onSelectionSave,this),this.parent.observer.on(r,this.onSelectionRestore,this),this.parent.observer.on("readOnlyMode",this.updateReadOnly,this)},i.prototype.updateReadOnly=function(){this.parent.readonly?(this.parent.getEditPanel().setAttribute("readonly","readonly"),sf.base.addClass([this.parent.element],"e-rte-readonly")):(this.parent.getEditPanel().removeAttribute("readonly"),sf.base.removeClass([this.parent.element],"e-rte-readonly"))},i.prototype.onSelectionSave=function(){var e=this.parent.getEditPanel();this.saveSelection.save(e.selectionStart,e.selectionEnd)},i.prototype.onSelectionRestore=function(e){this.parent.getEditPanel().focus();var t=this.parent.getEditPanel();this.saveSelection.restore(t)},i.prototype.onToolbarClick=function(e){var t,i,s,n=e.item,o=this.parent.getEditPanel();switch(o.focus(),i=o.selectionStart,s=o.selectionEnd,t=o.value.substring(i,s),n.subCommand){case"Maximize":this.parent.observer.notify("enableFullScreen",{args:e});break;case"Minimize":this.parent.observer.notify("disableFullScreen",{args:e});break;case"CreateLink":this.parent.observer.notify("insertLink",{member:"link",args:e,text:t,module:"Markdown"});break;case"Image":this.parent.observer.notify("insertImage",{member:"image",args:e,text:t,module:"Markdown"});break;case"CreateTable":var r={headingText:this.parent.localeData.headingText,colText:this.parent.localeData.colText};this.parent.formatter.process(this.parent,e,e.originalEvent,r);break;default:this.parent.formatter.process(this.parent,e,e.originalEvent,null)}},i.prototype.removeEventListener=function(){this.parent.observer.off(e,this.render),this.parent.observer.off(t,this.destroy),this.parent.observer.off("markdown-toolbar-click",this.onToolbarClick),this.parent.observer.off("selectAll",this.selectAll),this.parent.observer.off("getSelectedHtml",this.getSelectedHtml),this.parent.observer.off(o,this.onSelectionSave),this.parent.observer.off(r,this.onSelectionRestore),this.parent.observer.off("readOnlyMode",this.updateReadOnly)},i.prototype.render=function(){var e=this.parent.getEditPanel(),t={undoRedoSteps:this.parent.undoRedoSteps,undoRedoTimer:this.parent.undoRedoTimer};sf.base.isNullOrUndefined(this.parent.adapter)?this.parent.formatter=new ft({element:e,options:t}):this.parent.formatter=new ft(sf.base.extend({},this.parent.adapter,{element:e,options:t})),this.parent.toolbarSettings.enable&&(this.toolbarUpdate=new st(this.parent)),this.parent.observer.notify("bind-on-end",{})},i.prototype.selectAll=function(){this.parent.formatter.editorManager.markdownSelection.setSelection(this.parent.getEditPanel(),0,this.parent.getEditPanel().value.length)},i.prototype.getSelectedHtml=function(e){e.callBack(this.parent.formatter.editorManager.markdownSelection.getSelectedText(this.parent.getEditPanel()))},i.prototype.destroy=function(){this.removeEventListener()},i}(),mt=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.observer.on("execCommandCallBack",this.commandCallBack,this),this.parent.observer.on(t,this.removeEventListener,this)},e.prototype.commandCallBack=function(e){"Undo"!==e.requestType&&"Redo"!==e.requestType&&this.parent.formatter.saveData(),this.parent.observer.notify("toolbar-refresh",{args:e}),this.parent.observer.notify("count",{})},e.prototype.removeEventListener=function(){this.parent.observer.off("execCommandCallBack",this.commandCallBack),this.parent.observer.off(t,this.removeEventListener)},e}(),vt=function(){return(vt=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},bt=function(){function t(e){this.undoRedoSteps=30,this.undoRedoTimer=300,this.floatingToolbarOffset=0,this.enableHtmlEncode=!1,this.defaultResetValue=null,this.isInitial=!0,this.blurEnabled=!1,this.focusEnabled=!1,this.undoRedoStatus=!1,this.createdEnabled=!1,this.isIframeRteElement=!0,this.actionBeginEnabled=!1,this.imageDeleteEnabled=!1,this.mediaDeleteEnabled=!1,this.onResizeStopEnabled=!1,this.quickTbClosedEnabled=!1,this.quickTbOpenedEnabled=!1,this.onQuickTbOpenEnabled=!1,this.onResizeStartEnabled=!1,this.actionCompleteEnabled=!1,this.beforeUploadImageEnabled=!1,this.onImageUploadFailedEnabled=!1,this.onImageUploadSuccessEnabled=!1,this.beforeUploadMediaEnabled=!1,this.onMediaUploadFailedEnabled=!1,this.onMediaUploadSuccessEnabled=!1,this.beforePasteCleanupEnabled=!1,this.afterPasteCleanupEnabled=!1,this.clickPoints={clientX:0,clientY:0},this.inlineCloseItems=["CreateLink","Image","CreateTable","Maximize","Minimize"],window.sfBlazor=window.sfBlazor,this.updateContext(e),window.sfBlazor&&(sf.base.isNullOrUndefined(window.sfBlazor.instances)&&(window.sfBlazor.instances=[]),window.sfBlazor.instances[this.dataId]=this),this.observer=new sf.base.Observer(this),this.dotNetRef.invokeMethodAsync("UpdateDeviceData",{isDevice:sf.base.Browser.isDevice,isIDevice:sf.base.Browser.isDevice&&sf.base.Browser.isIos}),this.initModules(),this.initialize()}return t.prototype.updateContext=function(e){sf.base.extend(this,this,e)},t.prototype.initModules=function(){this.id=this.element.id,this.updateContentElements(),"HTML"===this.editorMode?(this.htmlEditorModule=new Be(this),this.pasteCleanupModule=new tt(this)):this.markdownEditorModule=new gt(this),this.toolbarSettings.enable&&(this.isUndoRedoStatus(),this.toolbarModule=new k(this)),this.fullScreenModule=new Ue(this),this.enterKeyModule=new Re(this),this.viewSourceModule=new Fe(this),this.showCharCount&&(this.countModule=new d(this)),this.enableResize&&(this.resizeModule=new c(this)),this.linkModule=new B(this),this.imageModule=new R(this),this.audioModule=new H(this),this.videoModule=new Y(this),this.tableModule=new U(this),this.quickToolbarSettings.enable&&(this.quickToolbarModule=new We(this))},t.prototype.initialize=function(){this.onBlurHandler=this.blurHandler.bind(this),this.onFocusHandler=this.focusHandler.bind(this),this.onResizeHandler=this.resizeHandler.bind(this,!1);new mt(this);this.inputElement=this.getEditPanel(),this.valueContainer=this.element.querySelector("textarea"),this.readonly&&this.setReadOnly(!0),this.setContentHeight(),this.iframeSettings&&this.iframeSettings.enable&&this.setIframeSettings(),(sf.base.isNullOrUndefined(this.value)||""===this.value)&&(this.value=this.element.querySelector(".e-rte-value-wrapper").innerHTML.replace(/<!--!-->/gi,"").trim()),this.setPanelValue(this.value),this.observer.notify(e,{}),this.enableXhtml&&(this.value=this.getXhtml()),null!==this.value&&(this.defaultResetValue=this.value),this.wireEvents(),this.observer.notify("tableclass",{}),this.addAudioVideoWrapper(),this.createdEnabled&&this.dotNetRef.invokeMethodAsync("CreatedEvent")},t.prototype.addAudioVideoWrapper=function(){for(var e,t=this,i=this.element.querySelectorAll("audio"),s=0;s<i.length;s++)if(i[s].classList.contains("e-rte-audio")||(i[s].classList.add("e-rte-audio"),i[s].classList.add("e-audio-inline")),!i[s].parentElement.classList.contains("e-clickelem")&&!i[s].parentElement.classList.contains("e-audio-wrap")){var n=sf.base.createElement("span",{className:"e-audio-wrap"});n.contentEditable="false";var o=sf.base.createElement("span",{className:"e-clickelem"});n.appendChild(o),i[s].parentNode.insertBefore(n,i[s].nextSibling),o.appendChild(i[s]),null===n.nextElementSibling&&(e=sf.base.createElement("br"),n.parentNode.insertBefore(e,n.nextSibling))}var r=this.element.querySelectorAll("video");for(s=0;s<r.length;s++){if(r[s].classList.contains("e-rte-video")||(r[s].classList.add("e-rte-video"),r[s].classList.add("e-video-inline")),!r[s].parentElement.classList.contains("e-clickelem")&&!r[s].parentElement.classList.contains("e-video-wrap")){var l=sf.base.createElement("span",{className:"e-video-wrap"});l.contentEditable="false",r[s].parentNode.insertBefore(l,r[s].nextSibling),l.appendChild(r[s]),null===l.nextElementSibling&&(e=sf.base.createElement("br"),l.parentNode.insertBefore(e,l.nextSibling))}-1!==sf.base.Browser.userAgent.indexOf("Firefox")&&(r[s].addEventListener("play",(function(e){t.observer.notify(a,{args:e}),t.observer.notify("editAreaClick",{args:e})})),r[s].addEventListener("pause",(function(e){t.observer.notify(a,{args:e}),t.observer.notify("editAreaClick",{args:e})})))}},t.prototype.isUndoRedoStatus=function(){for(var e=0;e<this.toolbarSettings.items.length;e++)if(!sf.base.isNullOrUndefined(this.toolbarSettings.items[e])&&("Undo"===this.toolbarSettings.items[e].subCommand||"Redo"===this.toolbarSettings.items[e].subCommand)){this.undoRedoStatus=!0;break}},t.prototype.setPanelValue=function(e,t){e=this.serializeValue(e),"HTML"===this.editorMode&&this.enableXhtml&&(this.inputElement.innerHTML=e,this.observer.notify("xhtmlValidation",{}),e=this.inputElement.innerHTML),"HTML"!==this.editorMode||t||(e=S(sf.base.isNullOrUndefined(e)?"":e,this),this.value=this.enableXhtml?this.htmlEditorModule.xhtmlValidation.selfEncloseValidation(e):e),this.updatePanelValue(),this.value!==this.cloneValue&&(this.enableXhtml&&(this.valueContainer.value=this.getXhtmlString(this.valueContainer.value)),E(this.valueContainer,"change"),this.isInitial?this.isInitial=!1:this.dotNetRef.invokeMethodAsync("UpdateValue",this.value),this.cloneValue=this.value),this.setPlaceHolder()},t.prototype.updateContentElements=function(){"HTML"===this.editorMode&&this.iframeSettings&&this.iframeSettings.enable?(this.contentPanel=this.element.querySelector("iframe"),this.updateIframeHtmlContents()):this.contentPanel=this.element.querySelector(".e-rte-content")},t.prototype.updateIframeHtmlContents=function(){var e='\n<!DOCTYPE html> \n    <html>\n         <head>\n            <meta charset=\'utf-8\' /> \n            <style>\n                @charset "UTF-8";\n                body {\n                    font-family: "Roboto", sans-serif;\n                    font-size: 14px;\n                }\n                html, body{height: 100%;margin: 0;}\n                body.e-cursor{cursor:default}\n                span.e-selected-node\t{background-color: #939393;color: white;}\n                span.e-selected-node.e-highlight {background-color: #1d9dd8;}\n                body{color:#333;word-wrap:break-word;padding: 8px;box-sizing: border-box;}\n                .e-rte-image, .e-rte-audio, .e-rte-video  {border: 0;cursor: pointer;display: block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}\n                .e-img-caption { display: inline-block; float: none; margin: 5px auto; max-width: 100%;position: relative;}\n                .e-img-caption.e-caption-inline {display: inline-block;float: none;margin: 5px auto;margin-left: 5px;margin-right: 5px;max-width: calc(100% - (2 * 5px));position: relativetext-align: center;vertical-align: bottom;}\n                .e-img-inner {box-sizing: border-box;display: block;font-size: 16px;font-weight: initial;margin: auto;opacity: .9;text-align: center;width: 100%;}\n                .e-img-wrap {display: inline-block;margin: auto;padding: 0;text-align: center;width: 100%;}\n                .e-imgleft, .e-video-left  {float: left;margin: 0 auto;margin-right: 5px;text-align: left;}\n                .e-imgright, .e-video-right {float: right;margin: 0 auto;margin-left: 5px;text-align: right;}\n                .e-imgcenter, .e-video-center {cursor: pointer;display: block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}\n                .e-control img:not(.e-resize) {border: 2px solid transparent; z-index: 1000}\n                .e-imginline, .e-audio-inline, .e-video-inline {display: inline-block;float: none;margin-left: 5px;margin-right: 5px;max-width: calc(100% - (2 * 5px));vertical-align: bottom;}\n                .e-imgbreak, .e-audio-break, .e-video-break {border: 0;cursor: pointer;display: block;float: none;height: auto;margin: 5px auto;max-width: 100%;position: relative;}\n                .e-rte-image.e-img-focus:not(.e-resize), .e-rte-audio.e-audio-focus:not(.e-resize), .e-rte-video.e-video-focus:not(.e-resize) {border: solid 2px #4a90e2;}\n                img.e-img-focus::selection, .e-audio-focus::selection, .e-video-focus::selection { background: transparent;color: transparent;}\n                span.e-rte-imageboxmark {  width: 10px; height: 10px; position: absolute; display: block; background: #4a90e2; border: 1px solid #fff; z-index: 1000;}\n                .e-mob-rte.e-mob-span span.e-rte-imageboxmark { background: #4a90e2; border: 1px solid #fff; }\n                .e-mob-rte span.e-rte-imageboxmark { background: #fff; border: 1px solid #4a90e2; border-radius: 15px; height: 20px; width: 20px; }\n                .e-mob-rte.e-mob-span span.e-rte-imageboxmark { background: #4a90e2; border: 1px solid #fff; }\n                .e-rte-content .e-content img.e-resize { z-index: 1000; }\n                .e-img-caption .e-img-inner { outline: 0; }\n                .e-img-caption a:focus-visible { outline: none; }\n                .e-rte-img-caption.e-imgcenter { display: block; margin-left: auto; margin-right: auto; }\n                .e-rte-img-caption.e-imgright { display: block; margin-left: auto; margin-right: 0; }\n                .e-rte-img-caption.e-imgleft { display: block; margin-left: 0; margin-right: auto; }\n                .e-img-caption .e-rte-image.e-imgright {float: none; margin-left: auto; margin-right: 0;}\n                .e-img-caption .e-rte-image.e-imgleft { float: none; margin: 0;}\n                .e-rte-img-caption.e-imgleft .e-img-inner {text-align: left;}\n                .e-rte-img-caption.e-imgright .e-img-inner {text-align: right;}\n                body{box-sizing: border-box;min-height: 100px;outline: 0 solid transparent;overflow-x: auto;padding: 16px;position: relative;text-align: inherit;z-index: 2;}\n                p{margin: 0 0 10px;margin-bottom: 10px;}\n                li{margin-bottom: 10px;}\n                h1{font-size: 2.17em;font-weight: 400;line-height: 1;margin: 10px 0;}\n                h2{font-size: 1.74em;font-weight: 400;margin: 10px 0;}\n                h3{font-size: 1.31em;font-weight: 400;margin: 10px 0;}\n                h4{font-size: 16px;font-weight: 400;line-height: 1.5;margin: 0;}\n                h5{font-size: 00.8em;font-weight: 400;margin: 0;}\n                h6{font-size: 00.65em;font-weight: 400;margin: 0;}\n                blockquote{margin: 10px 0;margin-left: 0;padding-left: 5px;border-left: solid 2px #5c5c5c;}\n                .e-rtl blockquote {padding-left: 0;padding-right: 5px;border-left: 0;border-right: 2px solid #5c5c5c;}\n                pre{background-color: inherit;border: 0;border-radius: 0;color: #333;font-size: inherit;line-height: inherit;margin: 0 0 10px;overflow: visible;padding: 0;white-space: pre-wrap;word-break: inherit;word-wrap: break-word;}\n                strong, b{font-weight: 700;}\n                a{text-decoration: none;user-select: auto;}\n                a:hover{text-decoration: underline;};\n                p:last-child, pre:last-child, blockquote:last-child{margin-bottom: 0;}\n                h3+h4, h4+h5, h5+h6{margin-top: 00.6em;}\n                ul:last-child{margin-bottom: 0;}\n                .e-rte-table { border-collapse: collapse; empty-cells: show;}\n                .e-rte-table td, .e-rte-table th {border: 1px solid #BDBDBD; height: 20px; vertical-align: middle;padding: 2px 5px; min-width: 20px;}\n                .e-rte-table.e-rte-table-border { border: 1px solid #BDBDBD; border-collapse: separate; }\n                table.e-alternate-border tbody tr:nth-child(2n) {background-color: #F5F5F5;}\n                table th {background-color: #E0E0E0;}\n                table.e-dashed-border td,table.e-dashed-border th { border: 1px dashed #BDBDBD} \n                table .e-cell-select {border: 1px double #4a90e2;}\n                span.e-table-box { cursor: nwse-resize; display: block; height: 10px; position: absolute; width: 10px; }\n                span.e-table-box.e-hide { display: none; }\n                span.e-table-box.e-rmob {height: 14px;width: 14px;}\n                .e-row-resize, .e-column-resize { background-color: transparent; background-repeat: repeat; bottom: 0;cursor: col-resize;height: 1px;overflow: visible;position: absolute;width: 1px; }\n                .e-row-resize { cursor: row-resize; height: 1px;}\n                .e-table-rhelper { cursor: col-resize; opacity: .87;position: absolute;}\n                .e-table-rhelper.e-column-helper { width: 1px; }\n                .e-table-rhelper.e-row-helper {height: 1px;}\n                .e-reicon::before { border-bottom: 6px solid transparent; border-right: 6px solid; border-top: 6px solid transparent; content: \'\'; display: block; height: 0; position: absolute; right: 4px; top: 4px; width: 20px; }\n                .e-reicon::after { border-bottom: 6px solid transparent; border-left: 6px solid; border-top: 6px solid transparent; content: \'\'; display: block; height: 0; left: 4px; position: absolute; top: 4px; width: 20px; z-index: 3; }\n                .e-row-helper.e-reicon::after { top: 10px; transform: rotate(90deg); }\n                .e-row-helper.e-reicon::before { left: 4px; top: -20px; transform: rotate(90deg); }\n                span.e-table-box { background-color: #ffffff; border: 1px solid #BDBDBD; }\n                span.e-table-box.e-rbox-select { background-color: #BDBDBD; border: 1px solid #BDBDBD; }\n                .e-table-rhelper { background-color: #4a90e2;}\n                .e-rtl { direction: rtl; }\n            </style>\n        </head><body spellcheck="false" autocorrect="off" contenteditable="true"></body></html>',t=this.contentPanel;t.srcdoc=e,t.contentDocument.body.id=this.id+"_rte-edit-view",t.contentDocument.body.setAttribute("aria-owns",this.id),t.contentDocument.open(),e=this.setThemeColor(e,{color:"#333"}),t.contentDocument.write(e),t.contentDocument.close(),this.enableRtl&&t.contentDocument.body.setAttribute("class","e-rtl")},t.prototype.setThemeColor=function(e,t){return e.replace(t.color,getComputedStyle(this.element,".e-richtexteditor").getPropertyValue("color"))},t.prototype.refresh=function(e){void 0===e&&(e={requestType:"refresh"}),this.observer.notify(e.requestType+"-begin",e)},t.prototype.openPasteDialog=function(){this.dotNetRef.invokeMethodAsync("PasteDialog")},t.prototype.setContentHeight=function(e,t){var i="",s=0,n="",o="string"==typeof this.height&&this.height.indexOf("%")>-1,r=this.element.querySelector(".e-rte-content .e-rte-srctextarea"),a=sf.base.isNullOrUndefined(r)||"block"!==r.parentElement.style.display?this.getPanel():r.parentElement,l=this.element.offsetHeight;0!==l||"auto"===this.height||this.getToolbar()||(l=parseInt(this.height,10),o&&(n=this.height));var h=this.getToolbar()?this.toolbarModule.getToolbarHeight():0,d=this.element.querySelector(".e-resize-handle"),c=this.enableResize?sf.base.isNullOrUndefined(d)?0:d.offsetHeight+8:0,p=this.getToolbar()&&this.getToolbar().classList.contains("e-expand-open")?this.toolbarModule.getExpandTBarPopHeight():0;if("Expand"===this.toolbarSettings.type&&t&&"preview"!==e?(i="auto"!==this.height||0!==c||this.element.classList.contains("e-rte-full-screen")?l-(h+p+c)+"px":"auto",s=this.toolbarSettings.enableFloating?0:p):i="auto"!==this.height||this.element.classList.contains("e-rte-full-screen")||this.isResizeInitialized?o&&n?n:(this.element.classList.contains("e-rte-full-screen")?window.innerHeight:l)-(h+p+c)+"px":"auto","windowResize"!==e&&sf.base.setStyleAttribute(a,{height:i,marginTop:s+"px"}),this.iframeSettings.enable&&"sourceCode"===e){var u=sf.base.select(".e-rte-content",this.element);sf.base.setStyleAttribute(u,{height:i,marginTop:s+"px"})}if(this.toolbarSettings.enableFloating&&this.getToolbar()&&!this.inlineMode.enable){var f=(!sf.base.isNullOrUndefined(this.element.querySelector(".e-rte-toolbar .e-hor-nav.e-nav-active"))?h+this.toolbarModule.getExpandTBarPopHeight():h)+"px";sf.base.setStyleAttribute(this.getToolbar().parentElement,{height:f})}0===c&&this.autoResize()},t.prototype.getXhtml=function(){var e=this.value;return this.enableXhtml&&(e=this.htmlEditorModule.xhtmlValidation.selfEncloseValidation(e)),e},t.prototype.getXhtmlString=function(e){return this.htmlEditorModule.xhtmlValidation.selfEncloseValidation(e)},t.prototype.getPanel=function(){return this.contentPanel},t.prototype.saveSelection=function(){this.formatter.editorManager.nodeSelection.save(this.getRange(),this.getDocument())},t.prototype.restoreSelection=function(){this.formatter.editorManager.nodeSelection.restore()},t.prototype.getEditPanel=function(){return this.iframeSettings&&this.iframeSettings.enable?sf.base.isNullOrUndefined(this.contentPanel.contentDocument)?this.inputElement:this.contentPanel.contentDocument.body:this.element.querySelector(".e-rte-content .e-content")},t.prototype.getText=function(){return this.getEditPanel().innerText},t.prototype.getDocument=function(){return this.getEditPanel().ownerDocument},t.prototype.getRange=function(){return this.formatter.editorManager.nodeSelection.getRange(this.getDocument())},t.prototype.updateValueContainer=function(e){this.enableXhtml&&!sf.base.isNullOrUndefined(e)&&(e=this.getXhtmlString(e)),this.valueContainer.value=e,this.value!==this.cloneValue&&E(this.valueContainer,"change")},t.prototype.getInputInnerHtml=function(){return this.inputElement.innerHTML.replace(/<!--!-->/gi,"")},t.prototype.refreshUI=function(){this.refresh()},t.prototype.getUpdatedValue=function(){var e;sf.base.isNullOrUndefined(this.tableModule)||this.tableModule.removeResizeEle();var t=this.element.querySelector(".e-rte-srctextarea");if("HTML"===this.editorMode){var i=this.getInputInnerHtml();e=i===N(this)?null:this.enableHtmlEncode?this.encode(O(i)):i,t&&"block"===t.style.display&&(e=t.value)}else e=""===this.inputElement.value?null:this.inputElement.value;return e},t.prototype.updateEnable=function(){this.enabled?(sf.base.removeClass([this.element],"e-disabled"),this.element.setAttribute("aria-disabled","false"),sf.base.isNullOrUndefined(this.htmlAttributes.tabindex)?this.inputElement.setAttribute("tabindex","0"):this.inputElement.setAttribute("tabindex",this.htmlAttributes.tabindex)):(this.getToolbar()&&(sf.base.removeClass(this.getToolbar().querySelectorAll(".e-active"),"e-active"),sf.base.removeClass([this.getToolbar()],["e-rte-tb-float","e-rte-tb-abs-float"])),sf.base.addClass([this.element],"e-disabled"),this.element.tabIndex=-1,this.element.setAttribute("aria-disabled","true"),this.inputElement.setAttribute("tabindex","-1"))},t.prototype.setEnable=function(){this.updateEnable(),this.enabled?this.wireEvents():this.unWireEvents()},t.prototype.executeCommand=function(e,t,i){if(t=this.htmlPurifier(e,t),"HTML"===this.editorMode){var s=this.getRange();this.iframeSettings.enable&&this.formatter.editorManager.nodeSelection.Clear(this.element.ownerDocument),(!(!this.iframeSettings.enable||s.startContainer!==this.inputElement)||!this.inputElement.contains(s.startContainer))&&this.focusIn()}var n=y[e];i&&i.undo&&i.undo&&0===this.formatter.getUndoRedoStack().length&&this.formatter.saveData(),this.formatter.editorManager.execCommand(n.command,n.subCommand?n.subCommand:t||n.value,null,null,t||n.value,t||n.value),i&&i.undo&&(this.formatter.saveData(),this.formatter.enableUndo(this)),this.setPlaceHolder(),this.observer.notify("content-changed",{}),this.value=this.inputElement.innerHTML,this.dotNetRef.invokeMethodAsync("UpdateValue",this.value)},t.prototype.htmlPurifier=function(e,t){if("HTML"===this.editorMode)switch(e){case"insertTable":sf.base.isNullOrUndefined(t.width)&&(t.width={minWidth:this.tableSettings.minWidth,maxWidth:this.tableSettings.maxWidth,width:this.tableSettings.width}),t.selection=this.formatter.editorManager.nodeSelection.save(this.getRange(),this.getDocument());break;case"insertImage":var i=sf.base.createElement("img",{attrs:{src:t.url}}).outerHTML,s=""!==i&&sf.base.createElement("div",{innerHTML:i}).firstElementChild.getAttribute("src")||null;s=sf.base.isNullOrUndefined(s)?"":s,t.url=s,sf.base.isNullOrUndefined(t.width)&&(t.width={minWidth:this.insertImageSettings.minWidth,maxWidth:this.insertImageSettings.maxWidth,width:this.insertImageSettings.width}),sf.base.isNullOrUndefined(t.height)&&(t.height={minHeight:this.insertImageSettings.minHeight,maxHeight:this.insertImageSettings.maxHeight,height:this.insertImageSettings.height}),t.selection=this.formatter.editorManager.nodeSelection.save(this.getRange(),this.getDocument());break;case"createLink":var n=sf.base.createElement("a",{attrs:{href:t.url}}).outerHTML,o=""!==n&&sf.base.createElement("div",{innerHTML:n}).firstElementChild.getAttribute("href")||null;o=sf.base.isNullOrUndefined(o)?"":o,t.url=o,t.selection=this.formatter.editorManager.nodeSelection.save(this.getRange(),this.getDocument())}return t},t.prototype.serializeValue=function(e){return"HTML"!==this.editorMode||sf.base.isNullOrUndefined(e)||(this.enableHtmlEncode?(e=this.htmlEditorModule.sanitizeHelper(O(e)),e=this.encode(e)):e=this.htmlEditorModule.sanitizeHelper(e)),e},t.prototype.selectAll=function(){this.observer.notify("selectAll",{})},t.prototype.selectRange=function(e){this.observer.notify("selectRange",{range:e})},t.prototype.showFullScreen=function(){this.fullScreenModule.showFullScreen()},t.prototype.sanitizeHtml=function(e){return this.serializeValue(e)},t.prototype.clipboardAction=function(e,t){switch(e.toLowerCase()){case"cut":this.onCut(),this.formatter.onSuccess(this,{requestType:"Cut",editorMode:this.editorMode,event:t});break;case"copy":this.onCopy(),this.formatter.onSuccess(this,{requestType:"Copy",editorMode:this.editorMode,event:t});break;case"paste":this.onPaste(t)}},t.prototype.getContent=function(){return this.iframeSettings.enable?this.inputElement:this.getPanel()},t.prototype.getSelectedHtml=function(){var e=sf.base.createElement("div"),t=this.getDocument().getSelection();if(t.rangeCount>0){var i=t.getRangeAt(0).cloneContents();e.appendChild(i)}return e.innerHTML},t.prototype.getSelection=function(){var e="";return this.observer.notify("getSelectedHtml",{callBack:function(t){e=t}}),e},t.prototype.showInlineToolbar=function(){if(this.inlineMode.enable){var e=this.getRange();sf.base.isNullOrUndefined(sf.base.closest(e.startContainer.parentNode,".e-content"))&&(this.inputElement.focus(),e=this.getRange());var t="#text"===e.endContainer.nodeName?e.endContainer.parentElement:e.endContainer,i=e.getClientRects()[0].left,s=e.getClientRects()[0].top;this.quickToolbarModule.showInlineQTBar(i,s,t)}},t.prototype.hideInlineToolbar=function(){this.quickToolbarModule.hideInlineQTBar()},t.prototype.updateValueData=function(){if(this.enableHtmlEncode)this.setPanelValue(this.encode(O(this.inputElement.innerHTML)));else{var e=/<[a-z][\s\S]*>/i.test(this.inputElement.innerHTML)?this.inputElement.innerHTML:O(this.inputElement.innerHTML);this.setPanelValue(e)}},t.prototype.removeSheets=function(e){var t;for(t=0;t<e.length;t++)sf.base.detach(e[t])},t.prototype.updateReadOnly=function(){this.observer.notify("readOnlyMode",{editPanel:this.inputElement,mode:this.readonly})},t.prototype.setReadOnly=function(e){this.updateReadOnly(),e||(this.readonly&&this.enabled?this.unBindEvents():this.enabled&&this.bindEvents())},t.prototype.setIframeSettings=function(){if(this.iframeSettings.resources){var e=this.iframeSettings.resources.styles,t=this.iframeSettings.resources.scripts;this.iframeSettings.resources.styles.length>0&&this.InjectSheet(!1,e),this.iframeSettings.resources.scripts.length>0&&this.InjectSheet(!0,t)}this.iframeSettings.attributes&&function(e,t,i,s){var n;if(n=i?t.getDocument().querySelector("body"):t.element,Object.keys(e).length)for(var o=0,r=Object.keys(e);o<r.length;o++){var a=r[o];if("class"===a)n.classList.add(e[a]);else if("disabled"===a&&"disabled"===e[a])t.enabled=!1,t.setEnable();else if("readonly"===a&&"readonly"===e[a])t.readonly=!0,t.setReadOnly(s);else if("style"===a)n.setAttribute("style",e[a]);else if("tabindex"===a)t.inputElement.setAttribute("tabindex",e[a]);else if("placeholder"===a)t.placeholder=e[a],t.setPlaceHolder();else{["name","required"].indexOf(a)>-1?t.valueContainer.setAttribute(a,e[a]):n.setAttribute(a,e[a])}}}(this.iframeSettings.attributes,this,!0,!1),this.iframeSettings.enable&&this.enableRtl?this.inputElement.setAttribute("class","e-rtl"):this.iframeSettings.enable&&!this.enableRtl&&this.inputElement.hasAttribute("class")&&this.inputElement.classList.contains("e-rtl")&&this.inputElement.classList.remove("e-rtl")},t.prototype.InjectSheet=function(e,t){try{if(t&&t.length>0)for(var i=this.getDocument().querySelector("head"),s=0;s<t.length;s++)if(e){var n=this.createScriptElement();n.src=t[s],i.appendChild(n)}else{var o=this.createStyleElement();o.href=t[s],i.appendChild(o)}}catch(e){return}},t.prototype.createScriptElement=function(){var e=sf.base.createElement("script",{className:"rte-iframe-script-sheet"});return e.type="text/javascript",e},t.prototype.createStyleElement=function(){var e=sf.base.createElement("link",{className:"rte-iframe-style-sheet"});return e.rel="stylesheet",e},t.prototype.updateResizeFlag=function(){this.isResizeInitialized=!0},t.prototype.getHtml=function(){return this.serializeValue(this.getEditPanel().innerHTML)},t.prototype.showSourceCode=function(){this.readonly||this.observer.notify("sourceCode",{})},t.prototype.getCharCount=function(){var e="Markdown"===this.editorMode?this.getEditPanel().value.trim():this.getEditPanel().textContent.trim();return"Markdown"!==this.editorMode&&-1!==e.indexOf("​")?e.replace(/\u200B/g,"").length:e.length},t.prototype.focusOut=function(){this.enabled&&(this.inputElement.blur(),this.blurHandler({}))},t.prototype.getToolbar=function(){return this.toolbarSettings.enable?this.element.querySelector("#"+this.id+"_toolbar"):null},t.prototype.getToolbarElement=function(){return this.toolbarSettings.enable?this.element.querySelector("#"+this.id+"_toolbar"):null},t.prototype.updateIntervalValue=function(){clearTimeout(this.idleInterval),this.idleInterval=setTimeout(this.updateValueOnIdle.bind(this),0)},t.prototype.updateValueOnIdle=function(){(sf.base.isNullOrUndefined(this.tableModule)||sf.base.isNullOrUndefined(this.inputElement.querySelector(".e-table-box.e-rbox-select")))&&(this.value=this.getUpdatedValue(),this.updateValueContainer(this.value),this.invokeChangeEvent())},t.prototype.invokeChangeEvent=function(){this.enableXhtml&&!sf.base.isNullOrUndefined(this.value)&&(this.value=this.getXhtml()),this.value!==this.cloneValue&&(this.enablePersistence&&window.localStorage.setItem(this.id,this.value),this.dotNetRef.invokeMethodAsync("ChangeEvent"),this.cloneValue=this.value)},t.prototype.preventImgResize=function(e){"img"===e.target.nodeName.toLocaleLowerCase()&&e.preventDefault()},t.prototype.defaultResize=function(e,t){if("msie"===sf.base.Browser.info.name)t?this.getEditPanel().removeEventListener("mscontrolselect",this.preventImgResize):this.getEditPanel().addEventListener("mscontrolselect",this.preventImgResize);else if("mozilla"===sf.base.Browser.info.name){var i=t?"true":"false";this.getDocument().execCommand("enableObjectResizing",t,i),this.getDocument().execCommand("enableInlineTableEditing",t,i)}},t.prototype.encode=function(e){var t=document.createElement("div");return t.innerText=e.trim(),t.innerHTML.replace(/<br\s*[\/]?>/gi,"\n")},t.prototype.print=function(){var e,t=this;this.dotNetRef.invokeMethodAsync("ActionBeginEvent",{requestType:"print",cancel:!1}).then((function(i){if(e=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth),"msie"===sf.base.Browser.info.name&&e.resizeTo(screen.availWidth,screen.availHeight),e=sf.base.print(t.inputElement,e),!i.cancel){t.dotNetRef.invokeMethodAsync("ActionCompleteEvent",{requestType:"print"})}}))},t.prototype.autoResize=function(){var e=this;if("auto"===this.height){if("Markdown"===this.editorMode)setTimeout((function(){e.setAutoHeight(e.inputElement)}),0);else if(this.iframeSettings.enable){var t=this.element.querySelector("#"+this.element.id+"_rte-view");setTimeout((function(){e.setAutoHeight(t)}),100),this.inputElement.style.overflow="hidden"}}else this.inputElement.style.overflow=null},t.prototype.setAutoHeight=function(e){sf.base.isNullOrUndefined(e)||(e.style.height=this.inputElement.scrollHeight+"px",e.style.overflow="hidden")},t.prototype.restrict=function(e){if(this.maxLength>=0){for(var t="Markdown"===this.editorMode?this.getText():e.currentTarget.textContent,i=[8,16,17,37,38,39,40,46,65],s=void 0,n=0;n<=i.length-1;n++)if(e.which===i[n]){if(e.ctrlKey&&65===e.which)return;if(65!==e.which)return void(s=i[n])}t.length>=this.maxLength&&-1!==this.maxLength&&e.which!==s&&e.preventDefault()}},t.prototype.setPlaceHolder=function(){this.inputElement&&this.placeholder&&!0!==this.iframeSettings.enable&&("Markdown"!==this.editorMode?(this.placeHolderContainer||(this.placeHolderContainer=this.element.querySelector(".e-rte-placeholder")),this.placeHolderContainer.innerHTML=this.placeholder,!(0===this.inputElement.textContent.length&&this.inputElement.childNodes.length<2)||sf.base.isNullOrUndefined(this.inputElement.firstChild)||"BR"!==this.inputElement.firstChild.nodeName&&("P"!==this.inputElement.firstChild.nodeName&&"DIV"!==this.inputElement.firstChild.nodeName||sf.base.isNullOrUndefined(this.inputElement.firstChild.firstChild)||"BR"!==this.inputElement.firstChild.firstChild.nodeName)?this.placeHolderContainer.style.display="none":this.placeHolderContainer.style.display="block"):this.inputElement.setAttribute("placeholder",this.placeholder))},t.prototype.updatePanelValue=function(){var e=this.value;e=this.enableHtmlEncode&&this.value?O(e):e;var t=this.element.querySelector(".e-rte-srctextarea");e?(t&&"block"===t.style.display&&(t.value=this.value),this.valueContainer&&(this.valueContainer.value=this.enableHtmlEncode?this.value:e),"HTML"===this.editorMode&&this.inputElement&&this.inputElement.innerHTML.replace("&amp;","&").trim()!==e.trim()?this.inputElement.innerHTML=e:"Markdown"===this.editorMode&&this.inputElement&&this.inputElement.value.trim()!==e.trim()&&(this.inputElement.value=e)):(t&&"block"===t.style.display&&(t.value=""),"HTML"===this.editorMode?this.inputElement.innerHTML=N(this):this.inputElement.value="",this.valueContainer&&(this.valueContainer.value="")),this.showCharCount&&this.countModule&&this.countModule.refresh()},t.prototype.contentChanged=function(){this.autoSaveOnIdle&&(sf.base.isNullOrUndefined(this.saveInterval)||(clearTimeout(this.timeInterval),this.timeInterval=setTimeout(this.updateIntervalValue.bind(this),this.saveInterval)))},t.prototype.notifyMouseUp=function(e){var t=e.touches?e.changedTouches[0]:e;this.observer.notify("mouseUp",{member:"mouseUp",args:e,touchData:{prevClientX:this.clickPoints.clientX,prevClientY:this.clickPoints.clientY,clientX:t.clientX,clientY:t.clientY}}),this.inputElement&&("HTML"===this.editorMode&&0!==this.inputElement.textContent.length||"Markdown"===this.editorMode&&0!==this.inputElement.value.length)&&this.observer.notify("toolbar-refresh",{args:e}),this.triggerEditArea(e)},t.prototype.triggerEditArea=function(e){if(sf.base.Browser.isDevice&&sf.base.Browser.isIos){var t=e.touches?e.changedTouches[0]:e;this.clickPoints.clientX===t.clientX&&this.clickPoints.clientY===t.clientY&&this.observer.notify("editAreaClick",{member:"editAreaClick",args:e})}else this.observer.notify("editAreaClick",{member:"editAreaClick",args:e})},t.prototype.updateStatus=function(e){if(!sf.base.isNullOrUndefined(e.html)||!sf.base.isNullOrUndefined(e.markdown)){var t=this.formatter.editorManager.undoRedoManager.getUndoStatus();this.dotNetRef.invokeMethodAsync("UpdatedToolbarStatusEvent",{undo:t.undo,redo:t.redo,html:e.html,markdown:e.markdown})}},t.prototype.onListDropDownButtonClick=function(e){sf.base.isNullOrUndefined(e)||(e.item.subCommand="BulletFormatList"===e.item.subCommand?"UL":"OL",this.inlineCloseItems.indexOf(e.item.subCommand)>-1&&this.quickToolbarModule.hideInlineQTBar(),"HTML"===this.editorMode&&this.observer.notify("html-toolbar-click",e))},t.prototype.toolbarItemClick=function(e,t,i){var s;sf.base.isNullOrUndefined(e)||(s="Root"!==i||this.inlineMode.enable?sf.base.select("#"+t,document.body):sf.base.select("#"+t,this.element),e.originalEvent=vt({},e.originalEvent,{target:s}),this.inlineCloseItems.indexOf(e.item.subCommand)>-1&&this.quickToolbarModule.hideInlineQTBar(),"HTML"===this.editorMode?this.observer.notify("html-toolbar-click",e):this.observer.notify("markdown-toolbar-click",e))},t.prototype.toolbarClick=function(e){var t=sf.base.select("#"+e+" .e-hor-nav",this.element);t&&"Expand"===this.toolbarSettings.type&&!sf.base.isNullOrUndefined(t)?t.classList.contains("e-nav-active")?(sf.base.addClass([this.getToolbar()],["e-expand-open"]),this.setContentHeight("toolbar",!0)):(sf.base.removeClass([this.getToolbar()],["e-expand-open"]),this.setContentHeight("toolbar",!1)):sf.base.Browser.isDevice||this.inlineMode.enable,sf.base.isNullOrUndefined(t)&&"Expand"===this.toolbarSettings.type&&sf.base.removeClass([this.getToolbar()],["e-expand-open"])},t.prototype.hideTableQuickToolbar=function(){this.quickToolbarModule.hideTableQTBar()},t.prototype.dropDownBeforeOpen=function(e){this.observer.notify(o,e),this.observer.notify("beforeDropDownOpen",e)},t.prototype.dropDownAfterOpen=function(e){if("Merge cells"===e.element.querySelector("li").innerHTML){var t=e.element.querySelectorAll("li");1===this.inputElement.querySelectorAll(".e-cell-select").length?(sf.base.addClass([t[0]],"e-disabled"),sf.base.removeClass([t[1],t[2]],"e-disabled")):this.inputElement.querySelectorAll(".e-cell-select").length>1&&(sf.base.removeClass([t[0]],"e-disabled"),sf.base.addClass([t[1],t[2]],"e-disabled"))}},t.prototype.dropDownClose=function(e){this.observer.notify(r,e)},t.prototype.dropDownSelect=function(e){if(e.name="dropDownSelect",!document.body.contains(document.body.querySelector(".e-rte-quick-toolbar"))||!e.item||"Images"!==e.item.command&&"Audios"!==e.item.command&&"Videos"!==e.item.command&&"Display"!==e.item.command&&"Table"!==e.item.command){this.observer.notify(r,{});if("Lists"===e.item.command){var t={listStyle:e.item.value,listImage:e.item.listImage,type:e.item.subCommand};this.formatter.process(this,e,e.originalEvent,t)}else this.formatter.process(this,e,e.originalEvent,null);this.observer.notify(o,{})}this.observer.notify("dropDownSelect",e)},t.prototype.colorDropDownBeforeOpen=function(){this.observer.notify(o,{})},t.prototype.colorIconSelected=function(e,t,i){this.observer.notify(o,{}),this.observer.notify(r,{}),e.value=sf.base.isNullOrUndefined(t)?e.value:t;var s=this.formatter.editorManager.nodeSelection.getRange(this.getDocument()),n=s.startContainer.parentNode;("TD"===s.startContainer.nodeName||"TH"===s.startContainer.nodeName||sf.base.closest(s.startContainer.parentNode,"td,th")||this.iframeSettings.enable&&!I(n.ownerDocument.querySelector("body"),"e-lib"))&&s.collapsed&&"BackgroundColor"===e.subCommand&&"quick"===i?this.observer.notify("tableColorPickerChanged",{item:e,name:"colorPickerChanged"}):(this.observer.notify(r,{}),this.formatter.process(this,{item:e,name:"colorPickerChanged"},void 0,null),this.observer.notify(o,{}))},t.prototype.colorChanged=function(e,t,i){this.observer.notify(r,{}),e.value=sf.base.isNullOrUndefined(t)?e.value:t;var s=this.formatter.editorManager.nodeSelection.getRange(this.getDocument());("TD"===s.startContainer.nodeName||"TH"===s.startContainer.nodeName||sf.base.closest(s.startContainer.parentNode,"td,th"))&&s.collapsed&&"BackgroundColor"===e.subCommand&&"quick"===i?this.observer.notify("tableColorPickerChanged",{item:e,name:"colorPickerChanged"}):(this.observer.notify(r,{}),this.formatter.process(this,{item:e,name:"colorPickerChanged"},void 0,null),this.observer.notify(o,{}))},t.prototype.cancelLinkDialog=function(){this.isBlur=!1,this.linkModule.cancelDialog()},t.prototype.cancelImageDialog=function(){this.isBlur=!1},t.prototype.cancelAudioDialog=function(){this.isBlur=!1},t.prototype.cancelVideoDialog=function(){this.isBlur=!1},t.prototype.linkDialogClosed=function(){this.isBlur=!1,this.linkModule.linkDialogClosed()},t.prototype.dialogClosed=function(e){this.isBlur=!1,"restore"===e&&this.observer.notify(r,{})},t.prototype.insertLink=function(e){this.linkModule.insertLink(e)},t.prototype.imageRemoving=function(){this.imageModule.removing()},t.prototype.uploadSuccess=function(e,t){this.imageModule.imageUploadSuccess(e,t)},t.prototype.imageSelected=function(){this.imageModule.imageSelected()},t.prototype.imageUploadComplete=function(e,t){this.imageModule.imageUploadComplete(e,t)},t.prototype.imageUploadChange=function(e,t){this.imageModule.imageUploadChange(e,t)},t.prototype.audioRemoving=function(){this.audioModule.fileRemoving()},t.prototype.audioUploadSuccess=function(e,t){this.audioModule.fileUploadSuccess(e,t)},t.prototype.audioSelected=function(){this.audioModule.fileSelected()},t.prototype.audioUploadComplete=function(e,t){this.audioModule.fileUploadComplete(e,t)},t.prototype.audioUploadChange=function(e,t){this.audioModule.fileUploadChange(e,t)},t.prototype.videoRemoving=function(){this.videoModule.fileRemoving()},t.prototype.videoUploadSuccess=function(e,t){this.videoModule.fileUploadSuccess(e,t)},t.prototype.videoSelected=function(){this.videoModule.fileSelected()},t.prototype.videoUploadComplete=function(e,t){this.videoModule.fileUploadComplete(e,t)},t.prototype.videoUploadChange=function(e,t){this.videoModule.fileUploadChange(e,t)},t.prototype.dropUploadChange=function(e,t){this.imageModule.dropUploadChange(e,t)},t.prototype.insertImage=function(){this.imageModule.insertImageUrl()},t.prototype.imageDialogOpened=function(){this.imageModule.dialogOpened()},t.prototype.imageDialogClosed=function(){this.isBlur=!1,this.imageModule.dialogClosed()},t.prototype.insertAudio=function(){this.audioModule.insertAudioUrl()},t.prototype.audioDialogOpened=function(){this.audioModule.dialogOpened()},t.prototype.audioDialogClosed=function(){this.isBlur=!1,this.audioModule.dialogClosed()},t.prototype.insertVideo=function(){this.videoModule.insertVideoUrl()},t.prototype.videoDialogOpened=function(){this.videoModule.dialogOpened()},t.prototype.videoDialogClosed=function(){this.isBlur=!1,this.videoModule.dialogClosed()},t.prototype.insertTable=function(e,t){this.tableModule.customTable(e,t)},t.prototype.applyTableProperties=function(e){this.tableModule.applyTableProperties(e)},t.prototype.createTablePopupOpened=function(){this.tableModule.createTablePopupOpened()},t.prototype.pasteContent=function(e){this.pasteCleanupModule.selectFormatting(e)},t.prototype.updatePasteContent=function(e){this.observer.notify("afterPasteCleanUp",{text:e})},t.prototype.imageDropInitialized=function(e){this.imageModule.imageDropInitialized(e)},t.prototype.preventEditable=function(){this.inputElement.contentEditable="false"},t.prototype.enableEditable=function(){this.inputElement.contentEditable="true"},t.prototype.removeDroppedImage=function(){this.imageModule.removeDroppedImage()},t.prototype.dropUploadSuccess=function(e,t){this.imageModule.dropUploadSuccess(e,t)},t.prototype.focusIn=function(){this.enabled&&(this.inputElement.focus(),this.focusHandler({}))},t.prototype.insertAlt=function(e){this.imageModule.insertAlt(e)},t.prototype.insertSize=function(e,t){this.imageModule.insertSize(e,t)},t.prototype.insertVideoSize=function(e,t){this.videoModule.insertVideoSize(e,t)},t.prototype.insertImageLink=function(e,t){this.imageModule.insertLink(e,t)},t.prototype.showLinkDialog=function(){this.linkModule.showDialog(!0)},t.prototype.showImageDialog=function(){this.imageModule.showDialog(!0)},t.prototype.showAudioDialog=function(){this.audioModule.showDialog(!0)},t.prototype.showVideoDialog=function(){this.videoModule.showDialog(!0)},t.prototype.showTableDialog=function(){this.tableModule.showDialog(!0)},t.prototype.destroy=function(){this.unWireEvents()},t.prototype.wireEvents=function(){this.element.addEventListener("focusin",this.onFocusHandler,!0),this.element.addEventListener("focusout",this.onBlurHandler,!0),this.observer.on("content-changed",this.contentChanged,this),this.observer.on("model-changed",this.refresh,this),this.wireResizeEvents(),this.observer.on("updateTbItemsStatus",this.updateStatus,this),this.readonly&&this.enabled||this.bindEvents()},t.prototype.wireResizeEvents=function(){this.enableResize&&this.observer.on("resizeInitialized",this.updateResizeFlag,this)},t.prototype.bindEvents=function(){this.keyboardModule=new Ye(this.inputElement,{keyAction:this.keyDown.bind(this),keyConfigs:vt({},this.formatter.keyConfig,this.keyConfig),eventName:"keydown"});var e=sf.base.closest(this.valueContainer,"form");e&&sf.base.EventHandler.add(e,"reset",this.resetHandler,this),sf.base.EventHandler.add(this.inputElement,"keyup",this.keyUp,this),sf.base.EventHandler.add(this.inputElement,"paste",this.onPaste,this),sf.base.EventHandler.add(this.inputElement,"UpdateEditorValue",this.updateEditorValue,this),sf.base.EventHandler.add(this.inputElement,sf.base.Browser.touchEndEvent,sf.base.debounce(this.mouseUp,30),this),sf.base.EventHandler.add(this.inputElement,sf.base.Browser.touchStartEvent,this.mouseDownHandler,this),this.wireContextEvent(),this.formatter.editorManager.observer.on("keydown-handler",this.editorKeyDown,this),this.element.ownerDocument.defaultView.addEventListener("resize",this.onResizeHandler,!0),this.iframeSettings.enable&&(sf.base.EventHandler.add(this.inputElement,"focusin",this.focusHandler,this),sf.base.EventHandler.add(this.inputElement,"focusout",this.blurHandler,this),sf.base.EventHandler.add(this.inputElement.ownerDocument,"scroll",this.contentScrollHandler,this),sf.base.EventHandler.add(this.inputElement.ownerDocument,sf.base.Browser.touchStartEvent,this.onIframeMouseDown,this)),this.wireScrollElementsEvents()},t.prototype.wireContextEvent=function(){this.quickToolbarSettings.showOnRightClick&&(sf.base.EventHandler.add(this.inputElement,"contextmenu",this.contextHandler,this),sf.base.Browser.isDevice&&(this.touchModule=new sf.base.Touch(this.inputElement,{tapHold:this.touchHandler.bind(this),tapHoldThreshold:500})))},t.prototype.wireScrollElementsEvents=function(){this.scrollParentElements=sf.popups.getScrollableParent(this.element);for(var e=0,t=this.scrollParentElements;e<t.length;e++){var i=t[e];sf.base.EventHandler.add(i,"scroll",this.scrollHandler,this)}this.iframeSettings.enable||sf.base.EventHandler.add(this.getPanel(),"scroll",this.contentScrollHandler,this)},t.prototype.unWireEvents=function(){this.element.removeEventListener("focusin",this.onFocusHandler,!0),this.element.removeEventListener("focusout",this.onBlurHandler,!0),this.observer.off("content-changed",this.contentChanged),this.unWireResizeEvents(),this.observer.off("updateTbItemsStatus",this.updateStatus),this.unBindEvents()},t.prototype.unWireResizeEvents=function(){this.observer.off("resizeInitialized",this.updateResizeFlag)},t.prototype.unBindEvents=function(){this.keyboardModule&&this.keyboardModule.destroy();var e=sf.base.closest(this.valueContainer,"form");e&&sf.base.EventHandler.remove(e,"reset",this.resetHandler),sf.base.EventHandler.remove(this.inputElement,"keyup",this.keyUp),sf.base.EventHandler.remove(this.inputElement,"paste",this.onPaste),sf.base.EventHandler.remove(this.inputElement,"UpdateEditorValue",this.updateEditorValue),sf.base.EventHandler.remove(this.inputElement,sf.base.Browser.touchEndEvent,sf.base.debounce(this.mouseUp,30)),sf.base.EventHandler.remove(this.inputElement,sf.base.Browser.touchStartEvent,this.mouseDownHandler),this.unWireContextEvent(),this.formatter&&this.formatter.editorManager.observer.off("keydown-handler",this.editorKeyDown),this.element.ownerDocument.defaultView.removeEventListener("resize",this.onResizeHandler,!0),this.iframeSettings.enable&&(sf.base.EventHandler.remove(this.inputElement,"focusin",this.focusHandler),sf.base.EventHandler.remove(this.inputElement,"focusout",this.blurHandler),sf.base.EventHandler.remove(this.inputElement.ownerDocument,"scroll",this.contentScrollHandler),sf.base.EventHandler.remove(this.inputElement.ownerDocument,sf.base.Browser.touchStartEvent,this.onIframeMouseDown)),this.unWireScrollElementsEvents()},t.prototype.unWireContextEvent=function(){sf.base.EventHandler.remove(this.inputElement,"contextmenu",this.contextHandler),sf.base.Browser.isDevice&&this.touchModule&&this.touchModule.destroy()},t.prototype.unWireScrollElementsEvents=function(){this.scrollParentElements=sf.popups.getScrollableParent(this.element);for(var e=0,t=this.scrollParentElements;e<t.length;e++){var i=t[e];sf.base.EventHandler.remove(i,"scroll",this.scrollHandler)}this.iframeSettings.enable||sf.base.EventHandler.remove(this.getPanel(),"scroll",this.contentScrollHandler)},t.prototype.focusHandler=function(e){if(!this.isRTE||this.isFocusOut){this.isRTE=!this.isFocusOut,this.isFocusOut=!1,sf.base.addClass([this.element],["e-focused"]),"HTML"===this.editorMode?this.cloneValue=this.inputElement.innerHTML===N(this)?null:this.enableHtmlEncode?this.encode(O(this.inputElement.innerHTML)):this.inputElement.innerHTML:this.cloneValue=""===this.inputElement.value?null:this.inputElement.value;var t=document.activeElement;if((t===this.element||t===this.getToolbarElement()||t===this.getEditPanel()||this.iframeSettings.enable&&t===this.getPanel()&&e.target&&!e.target.classList.contains("e-img-inner")&&e.target&&e.target.parentElement&&!e.target.parentElement.classList.contains("e-img-wrap")||sf.base.closest(t,".e-rte-toolbar")===this.getToolbarElement())&&(this.getEditPanel().focus(),!sf.base.isNullOrUndefined(this.getToolbarElement()))){this.getToolbarElement().setAttribute("tabindex","-1");for(var i=this.getToolbarElement().querySelectorAll('[tabindex="0"]'),s=0;s<i.length;s++)i[s].setAttribute("tabindex","-1")}this.defaultResize(e,!1);var n={isInteracted:0!==Object.keys(e).length};this.focusEnabled&&this.dotNetRef.invokeMethodAsync("FocusEvent",n),!sf.base.isNullOrUndefined(this.saveInterval)&&this.saveInterval>0&&!this.autoSaveOnIdle&&(this.timeInterval=setInterval(this.updateValueOnIdle.bind(this),this.saveInterval)),sf.base.EventHandler.add(document,"mousedown",this.onDocumentClick,this)}if(!sf.base.isNullOrUndefined(this.getToolbarElement())){var o=this.getToolbarElement().querySelectorAll("input,select,button,a,[tabindex]");for(s=0;s<o.length;s++)o[s].classList.contains("e-rte-dropdown-btn")||o[s].classList.contains("e-insert-table-btn")||o[s].hasAttribute("tabindex")&&"-1"===o[s].getAttribute("tabindex")||o[s].setAttribute("tabindex","-1")}},t.prototype.blurHandler=function(e){var t=e.relatedTarget;if(t){var i=sf.base.closest(t,".e-richtexteditor");i&&i===this.element?(this.isBlur=!1,t===this.getToolbarElement()&&t.setAttribute("tabindex","-1")):sf.base.closest(t,'[aria-owns="'+this.element.id+'"]')||!sf.base.isNullOrUndefined(sf.base.closest(t,".e-rte-elements"))?this.isBlur=!1:(this.isBlur=!0,t=null)}else this.isIframeRteElement||(this.isBlur=!0,this.isIframeRteElement=!0);if(this.isBlur&&sf.base.isNullOrUndefined(t)){sf.base.removeClass([this.element],["e-focused"]),this.observer.notify("focusChange",{}),this.value=this.getUpdatedValue(),this.updateValueContainer(this.value),this.observer.notify("toolbar-refresh",{args:e,documentNode:document}),this.invokeChangeEvent(),this.isFocusOut=!0,this.isBlur=!1,this.enableXhtml&&(this.valueContainer.value=this.getXhtmlString(this.valueContainer.value)),E(this.valueContainer,"focusout"),this.defaultResize(e,!0);var s={isInteracted:0!==Object.keys(e).length};this.blurEnabled&&this.dotNetRef.invokeMethodAsync("BlurEvent",s),sf.base.isNullOrUndefined(this.timeInterval)||(clearInterval(this.timeInterval),this.timeInterval=null),sf.base.EventHandler.remove(document,"mousedown",this.onDocumentClick)}else this.isRTE=!0},t.prototype.resizeHandler=function(e){var t=!1;if(document.body.contains(this.element)){if(this.toolbarSettings.enable&&!this.inlineMode.enable){e||this.dotNetRef.invokeMethodAsync("RefreshToolbarOverflow");var i=this.element.querySelector(".e-rte-toolbar");t=i&&i.classList.contains("e-expand-open")}this.setContentHeight("windowResize",t),this.observer.notify("resize",null)}},t.prototype.touchHandler=function(e){this.notifyMouseUp(e.originalEvent),this.triggerEditArea(e.originalEvent)},t.prototype.resetHandler=function(){var e=this.valueContainer.defaultValue.trim().replace(/<!--!-->/gi,"");this.value=""===e?null:this.defaultResetValue,this.setPanelValue(this.value,!0)},t.prototype.contextHandler=function(e){var t=sf.base.closest(e.target,"a, table, img");!1!==this.inlineMode.onSelection&&(sf.base.isNullOrUndefined(t)||!this.inputElement.contains(t)||"IMG"!==t.tagName&&"TABLE"!==t.tagName&&"A"!==t.tagName)||e.preventDefault()},t.prototype.scrollHandler=function(e){this.observer.notify("scroll",{args:e})},t.prototype.contentScrollHandler=function(e){this.observer.notify("contentscroll",{args:e})},t.prototype.mouseUp=function(e){if(this.quickToolbarSettings.showOnRightClick&&sf.base.Browser.isDevice){var t=e.target,i=sf.base.closest(t,"table");if(t&&"A"===t.nodeName||"IMG"===t.nodeName||"TD"===t.nodeName||"TH"===t.nodeName||"TABLE"===t.nodeName||i&&this.getEditPanel().contains(i))return}this.notifyMouseUp(e)},t.prototype.mouseDownHandler=function(e){var t=e.touches?e.changedTouches[0]:e;sf.base.addClass([this.element],["e-focused"]),this.defaultResize(e,!1),this.observer.notify(a,{args:e}),this.clickPoints={clientX:t.clientX,clientY:t.clientY}},t.prototype.onIframeMouseDown=function(e){this.isBlur=!1,this.observer.notify("iframe-click",e)},t.prototype.cleanList=function(e){var t=this.getRange(),i=t.startContainer,s=t.endContainer,n=t.startOffset,o=i===s,r="#text"===t.endContainer.nodeName?t.endContainer.parentElement:t.endContainer,a=sf.base.closest(r,"LI");if(!sf.base.isNullOrUndefined(a)&&r.textContent.length===t.endOffset&&!t.collapsed&&sf.base.isNullOrUndefined(r.nextElementSibling)){a.textContent=a.textContent.trim(),a.textContent.length-1;for(var l=a;"#text"!==l.nodeName;)l=l.lastChild;this.formatter.editorManager.nodeSelection.setSelectionText(this.getDocument(),o?l:i,l,n,l.textContent.length)}},t.prototype.keyDown=function(e){if(this.observer.notify(n,{member:"keydown",args:e}),this.restrict(e),"HTML"===this.editorMode&&this.cleanList(e),this.iframeSettings.enable&&!this.enableTabKey&&9===e.which&&"Tab"===e.code&&"BODY"===e.target.nodeName&&(this.isIframeRteElement=!1),"HTML"===this.editorMode&&(8===e.which&&"Backspace"===e.code||46===e.which&&"Delete"===e.code)){var t=this.getRange(),i="#text"===t.startContainer.nodeName?t.startContainer.parentElement:t.startContainer;if(sf.base.closest(i,"pre")&&8===e.which&&8203===t.startContainer.textContent.charCodeAt(t.startOffset-1)||46===e.which&&8203===t.startContainer.textContent.charCodeAt(t.startOffset)){var s=new RegExp(String.fromCharCode(8203),"g"),o=8===e.which?t.startOffset-1:t.startOffset;t.startContainer.textContent=t.startContainer.textContent.replace(s,""),this.formatter.editorManager.nodeSelection.setCursorPoint(this.getDocument(),t.startContainer,o)}else if("Backspace"===e.code&&8===e.which&&8203===t.startContainer.textContent.charCodeAt(0)&&t.collapsed){var r=t.startContainer.parentElement,a=void 0,l=void 0;for(l=0;l<r.childNodes.length;l++)r.childNodes[l]===t.startContainer&&(a=l);var h=!0,d=[];for(l=a;l>=0;l--)3===r.childNodes[l].nodeType&&8203===r.childNodes[l].textContent.charCodeAt(0)&&h?d.push(l):h=!1;if(d.length>0)for(l=d.length-1;l>0;l--)r.childNodes[d[l]].textContent="";this.formatter.editorManager.nodeSelection.setCursorPoint(this.getDocument(),t.startContainer,t.startOffset)}}if(0===this.formatter.getUndoRedoStack().length&&this.formatter.saveData(),"insert-link"!==e.action&&(e.action&&"paste"!==e.action&&"space"!==e.action||9===e.which||"Backspace"===e.code&&8===e.which))switch(this.formatter.process(this,null,e),e.action){case"toolbar-focus":if(this.toolbarSettings.enable){this.getToolbar().querySelector('.e-toolbar-item[aria-disabled="false"][title] [tabindex]').focus()}break;case"escape":this.getEditPanel().focus()}sf.base.isNullOrUndefined(this.placeholder)||(sf.base.isNullOrUndefined(this.placeHolderContainer)||1===this.inputElement.textContent.length?this.setPlaceHolder():this.placeHolderContainer.style.display="none"),this.autoResize()},t.prototype.editorKeyDown=function(e){switch(e.event.action){case"copy":this.onCopy();break;case"cut":this.onCut()}!e.callBack||"copy"!==e.event.action&&"cut"!==e.event.action&&"delete"!==e.event.action||e.callBack({requestType:e.event.action,editorMode:"HTML",event:e.event})},t.prototype.keyUp=function(e){if("HTML"===this.editorMode){switch(e.which){case 46:case 8:var t=this.getEditPanel().childNodes;if(0===t.length||1===t.length&&("BR"===t[0].tagName||("P"===t[0].tagName||"DIV"===t[0].tagName)&&(0===t[0].childNodes.length||""===t[0].textContent))){var s=this.getEditPanel();s.innerHTML=N(this),this.formatter.editorManager.nodeSelection.setCursorPoint(this.getDocument(),s.childNodes[0],0)}}var n=this.getRange();if(-1!=sf.base.Browser.userAgent.indexOf("Firefox")&&"#text"===n.startContainer.nodeName&&n.startContainer.parentElement===this.inputElement&&"BR"!==this.enterKey){var o=this.getRange(),r=sf.base.createElement(this.enterKey);o.startContainer.parentElement.insertBefore(r,o.startContainer),r.appendChild(o.startContainer),this.formatter.editorManager.nodeSelection.setSelectionText(this.getDocument(),r.childNodes[0],r.childNodes[0],r.childNodes[0].textContent.length,r.childNodes[0].textContent.length)}}this.observer.notify(i,{member:"keyup",args:e}),"KeyX"!==e.code||88!==e.which||88!==e.keyCode||!e.ctrlKey||""!==this.inputElement.innerHTML&&"<br>"!==this.inputElement.innerHTML||(this.inputElement.innerHTML=S(N(this),this));var a=32===e.which||13===e.which||8===e.which||46===e.which;("shift"!==e.key&&!e.ctrlKey&&e.key&&1===e.key.length||a||"Markdown"===this.editorMode&&("shift"!==e.key&&!e.ctrlKey&&e.key&&1===e.key.length||a)&&!this.inlineMode.enable)&&this.formatter.onKeyHandler(this,e),(this.inputElement&&0!==this.inputElement.textContent.length||this.element.querySelectorAll(".e-toolbar-item.e-active").length>0)&&this.observer.notify("toolbar-refresh",{args:e}),sf.base.isNullOrUndefined(this.placeholder)||"Enter"===e.key&&13===e.keyCode||"<p><br></p>"!==this.inputElement.innerHTML&&"<div><br></div>"!==this.inputElement.innerHTML&&"<br>"!==this.inputElement.innerHTML||this.setPlaceHolder()},t.prototype.onCut=function(){this.getDocument().execCommand("cut",!1,null)},t.prototype.onCopy=function(){this.getDocument().execCommand("copy",!1,null)},t.prototype.updateEditorValue=function(e){e.detail.click&&this.dotNetRef.invokeMethodAsync("UpdateValue",this.getUpdatedValue())},t.prototype.onPaste=function(e){if(sf.base.isNullOrUndefined(sf.base.select(".e-rte-img-dialog",this.element))){var t=this.getText().length-this.getSelection().length+(sf.base.isNullOrUndefined(e)||sf.base.isNullOrUndefined(e.clipboardData)?0:e.clipboardData.getData("text/plain").length);if("Markdown"===this.editorMode){var i={requestType:"Paste",editorMode:this.editorMode,event:e};return this.formatter.onSuccess(this,i),void(-1===this.maxLength||t<this.maxLength||e.preventDefault())}"true"===this.inputElement.contentEditable&&(-1===this.maxLength||t<this.maxLength)?this.observer.notify("pasteClean",{args:e}):e.preventDefault()}},t.prototype.onDocumentClick=function(e){var t=e.target,i=sf.base.closest(t,".e-richtexteditor");this.element.contains(e.target)||document===e.target||i===this.element||sf.base.closest(t,'[aria-owns="'+this.element.id+'"]')||(this.isBlur=!0,this.isRTE=!1),this.observer.notify("docClick",{args:e})},t.prototype.propertyChangeHandler=function(e){for(var t={},i=0,s=Object.keys(e);i<s.length;i++){t[a=s[i]]=this[a]}var n=this.value;this.updateContext(e);for(var o=0,r=Object.keys(e);o<r.length;o++){var a;switch(a=r[o]){case"enableXhtml":case"enableHtmlSanitizer":case"value":case"enterKey":if("value"===a&&n===this.value)break;"enterKey"!==a||"<p><br/></p>"!==this.value&&"<div><br/></div>"!==this.value&&"<br/>"!==this.value&&"<p><br></p>"!==this.value&&"<div><br></div>"!==this.value&&"<br>"!==this.value||(this.value=N(this)),this.setPanelValue(this.value),this.inputElement&&this.observer.notify("tableclass",{}),this.enableXhtml&&(this.value=this.getXhtml()),this.addAudioVideoWrapper();break;case"height":this.setContentHeight(),this.autoResize();break;case"width":this.resizeHandler(!0);break;case"readonly":this.setReadOnly(!1);break;case"enabled":this.setEnable();break;case"placeholder":this.placeholder=this.placeholder,this.setPlaceHolder();break;case"enableResize":e[a]&&sf.base.isNullOrUndefined(this.resizeModule)?(this.resizeModule=new c(this),this.wireResizeEvents()):this.resizeModule&&(this.resizeModule.destroy(),this.unWireResizeEvents(),this.setContentHeight(),this.resizeModule=null);break;case"showCharCount":this.showCharCount?sf.base.isNullOrUndefined(this.countModule)&&(this.countModule=new d(this)):!1===this.showCharCount&&this.countModule&&(this.countModule.destroy(),this.countModule=null);break;case"maxLength":this.showCharCount&&this.countModule&&this.countModule.refresh();break;case"enableHtmlEncode":this.updateValueData(),this.updatePanelValue(),this.setPlaceHolder(),this.showCharCount&&this.countModule.refresh();break;case"undoRedoSteps":case"undoRedoTimer":this.formatter.editorManager.observer.notify("model_changed",{newProp:e});break;case"adapter":var l=this.getEditPanel(),h={undoRedoSteps:this.undoRedoSteps,undoRedoTimer:this.undoRedoTimer};"Markdown"===this.editorMode&&(this.formatter=new ft(sf.base.extend({},this.adapter,{element:l,options:h})));break;case"iframeSettings":var p=t[a];if(p.resources){var u=this.getDocument().querySelector("head"),f=void 0;p.resources.scripts&&(f=u.querySelectorAll(".rte-iframe-script-sheet"),this.removeSheets(f)),p.resources.styles&&(f=u.querySelectorAll(".rte-iframe-style-sheet"),this.removeSheets(f))}this.setIframeSettings();break;case"quickToolbarSettings":this.quickToolbarSettings.enable?(sf.base.isNullOrUndefined(this.quickToolbarModule)&&(this.quickToolbarModule=new We(this)),this.quickToolbarSettings.showOnRightClick?this.wireContextEvent():this.unWireContextEvent()):(this.quickToolbarModule.destroy(),this.quickToolbarModule=null);break;case"toggleToolbar":e[a]?sf.base.isNullOrUndefined(this.toolbarModule)&&(this.isUndoRedoStatus(),this.toolbarModule=new k(this)):(this.toolbarModule.destroy(),this.toolbarModule=null)}}},t}();return{initialize:function(e){e.dataId&&new bt(e)},updateProperties:function(e){e.dataId&&window.sfBlazor.instances[e.dataId].updateContext(e)},setPanelValue:function(e,t){e&&window.sfBlazor.instances[e].setPanelValue(t)},toolbarItemClick:function(e,t,i,s){e&&window.sfBlazor.instances[e].toolbarItemClick(t,i,s)},toolbarClick:function(e,t){e&&window.sfBlazor.instances[e].toolbarClick(t)},listDropDownButtonClick:function(e,t){e&&window.sfBlazor.instances[e].onListDropDownButtonClick(t)},dropDownBeforeOpen:function(e,t){e&&window.sfBlazor.instances[e].dropDownBeforeOpen(t)},dropDownAfterOpen:function(e,t){e&&window.sfBlazor.instances[e].dropDownAfterOpen(t)},dropDownClose:function(e,t){e&&window.sfBlazor.instances[e].dropDownClose(t)},dropDownButtonItemSelect:function(e,t){e&&window.sfBlazor.instances[e].dropDownSelect(t)},colorDropDownBeforeOpen:function(e){e&&window.sfBlazor.instances[e].colorDropDownBeforeOpen()},colorIconSelected:function(e,t,i,s){e&&window.sfBlazor.instances[e].colorIconSelected(t,i,s)},colorPickerChanged:function(e,t,i,s){e&&window.sfBlazor.instances[e].colorChanged(t,i,s)},cancelLinkDialog:function(e){e&&window.sfBlazor.instances[e].cancelLinkDialog()},cancelImageDialog:function(e){e&&window.sfBlazor.instances[e].cancelImageDialog()},linkDialogClosed:function(e){e&&window.sfBlazor.instances[e].linkDialogClosed()},dialogClosed:function(e,t){e&&window.sfBlazor.instances[e].dialogClosed(t)},insertLink:function(e,t){e&&window.sfBlazor.instances[e].insertLink(t)},imageRemoving:function(e){e&&window.sfBlazor.instances[e].imageRemoving()},audioRemoving:function(e){e&&window.sfBlazor.instances[e].audioRemoving()},videoRemoving:function(e){e&&window.sfBlazor.instances[e].videoRemoving()},uploadSuccess:function(e,t,i){e&&window.sfBlazor.instances[e].uploadSuccess(t,i)},audioUploadSuccess:function(e,t,i){e&&window.sfBlazor.instances[e].audioUploadSuccess(t,i)},videoUploadSuccess:function(e,t,i){e&&window.sfBlazor.instances[e].videoUploadSuccess(t,i)},imageSelected:function(e){e&&window.sfBlazor.instances[e].imageSelected()},audioSelected:function(e){e&&window.sfBlazor.instances[e].audioSelected()},videoSelected:function(e){e&&window.sfBlazor.instances[e].videoSelected()},imageUploadComplete:function(e){e.dataId&&window.sfBlazor.instances[e.dataId].imageUploadComplete(e.base64Str,e.altText)},audioUploadComplete:function(e){e.dataId&&window.sfBlazor.instances[e.dataId].audioUploadComplete(e.base64Str,e.fileName)},videoUploadComplete:function(e){e.dataId&&window.sfBlazor.instances[e.dataId].videoUploadComplete(e.base64Str,e.fileName)},imageUploadChange:function(e,t,i){e&&window.sfBlazor.instances[e].imageUploadChange(t,i)},audioUploadChange:function(e,t,i){e&&window.sfBlazor.instances[e].audioUploadChange(t,i)},videoUploadChange:function(e,t,i){e&&window.sfBlazor.instances[e].videoUploadChange(t,i)},dropUploadChange:function(e,t,i){e&&window.sfBlazor.instances[e].dropUploadChange(t,i)},insertImage:function(e){e&&window.sfBlazor.instances[e].insertImage()},insertAudio:function(e){e&&window.sfBlazor.instances[e].insertAudio()},insertVideo:function(e){e&&window.sfBlazor.instances[e].insertVideo()},imageDialogOpened:function(e){e&&window.sfBlazor.instances[e].imageDialogOpened()},imageDialogClosed:function(e){e&&window.sfBlazor.instances[e].imageDialogClosed()},audioDialogOpened:function(e){e&&window.sfBlazor.instances[e].audioDialogOpened()},audioDialogClosed:function(e){e&&window.sfBlazor.instances[e].audioDialogClosed()},videoDialogOpened:function(e){e&&window.sfBlazor.instances[e].videoDialogOpened()},videoDialogClosed:function(e){e&&window.sfBlazor.instances[e].videoDialogClosed()},propertyChangeHandler:function(e){e.dataId&&window.sfBlazor.instances[e.dataId].propertyChangeHandler(e)},insertTable:function(e,t,i){e&&window.sfBlazor.instances[e].insertTable(t,i)},applyTableProperties:function(e,t){e&&window.sfBlazor.instances[e].applyTableProperties(t)},createTablePopupOpened:function(e){e&&window.sfBlazor.instances[e].createTablePopupOpened()},pasteContent:function(e,t){e&&window.sfBlazor.instances[e].pasteContent(t)},updatePasteContent:function(e,t){e&&window.sfBlazor.instances[e].updatePasteContent(t)},imageDropInitialized:function(e,t){e&&window.sfBlazor.instances[e].imageDropInitialized(t)},preventEditable:function(e){e&&window.sfBlazor.instances[e].preventEditable()},enableEditable:function(e){e&&window.sfBlazor.instances[e].enableEditable()},removeDroppedImage:function(e){e&&window.sfBlazor.instances[e].removeDroppedImage()},dropUploadSuccess:function(e,t,i){e&&window.sfBlazor.instances[e].dropUploadSuccess(t,i)},executeCommand:function(e,t,i,s){e&&window.sfBlazor.instances[e].executeCommand(t,i,s)},getCharCount:function(e){return e&&window.sfBlazor.instances[e].getCharCount()},focusIn:function(e){return e&&window.sfBlazor.instances[e].focusIn()},focusOut:function(e){return e&&window.sfBlazor.instances[e].focusOut()},getContent:function(e){return e&&window.sfBlazor.instances[e].getContent()},getHtml:function(e){return e&&window.sfBlazor.instances[e].getHtml()},getSelectedHtml:function(e){return e&&window.sfBlazor.instances[e].getSelectedHtml()},getSelection:function(e){return e&&window.sfBlazor.instances[e].getSelection()},getText:function(e){return e&&window.sfBlazor.instances[e].getText()},print:function(e){return e&&window.sfBlazor.instances[e].print()},refreshUI:function(e){return e&&window.sfBlazor.instances[e].refreshUI()},sanitizeHtml:function(e,t){return e&&window.sfBlazor.instances[e].sanitizeHtml(t)},selectAll:function(e){return e&&window.sfBlazor.instances[e].selectAll()},selectRange:function(e,t){return e&&window.sfBlazor.instances[e].selectRange(t)},showFullScreen:function(e){return e&&window.sfBlazor.instances[e].showFullScreen()},showSourceCode:function(e){return e&&window.sfBlazor.instances[e].showSourceCode()},insertAlt:function(e,t){return e&&window.sfBlazor.instances[e].insertAlt(t)},insertSize:function(e,t,i){return e&&window.sfBlazor.instances[e].insertSize(t,i)},insertVideoSize:function(e,t,i){return e&&window.sfBlazor.instances[e].insertVideoSize(t,i)},insertImageLink:function(e,t,i){return e&&window.sfBlazor.instances[e].insertImageLink(t,i)},updateContentHeight:function(e){return e&&window.sfBlazor.instances[e].setContentHeight()},saveSelection:function(e){e&&window.sfBlazor.instances[e].saveSelection()},restoreSelection:function(e){e&&window.sfBlazor.instances[e].restoreSelection()},getXhtml:function(e){return e&&window.sfBlazor.instances[e].getXhtml()},showLinkDialog:function(e){e&&window.sfBlazor.instances[e].showLinkDialog()},showImageDialog:function(e){e&&window.sfBlazor.instances[e].showImageDialog()},showAudioDialog:function(e){e&&window.sfBlazor.instances[e].showAudioDialog()},showVideoDialog:function(e){e&&window.sfBlazor.instances[e].showVideoDialog()},showTableDialog:function(e){e&&window.sfBlazor.instances[e].showTableDialog()},showInlineToolbar:function(e){e&&window.sfBlazor.instances[e].showInlineToolbar()},hideInlineToolbar:function(e){e&&window.sfBlazor.instances[e].hideInlineToolbar()},destroy:function(e){e&&window.sfBlazor.instances[e].destroy()}}}()},"./modules/sf-schedule.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Schedule=function(){"use strict";var e="e-popup-open",t="e-appointment-border";function s(e,t){var i,s=sf.base.createElement("div",{className:t}).cloneNode();return s.style.visibility="hidden",s.style.position="absolute",e.appendChild(s),i=s.offsetHeight,sf.base.remove(s),i}function n(e){var t=getComputedStyle(e);return window.WebKitCSSMatrix?new WebKitCSSMatrix(t.webkitTransform).m42:0}function o(e){var t=getComputedStyle(e);return window.WebKitCSSMatrix?new WebKitCSSMatrix(t.webkitTransform).m41:0}function r(e,t){var i=new Date(e.getTime());return t=(t-i.getDay()-7)%7,new Date(i.setDate(i.getDate()+t))}function a(e){return new Date(e.getFullYear(),e.getMonth())}function l(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}function h(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}function d(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0).getTimezoneOffset(),i=e.getTimezoneOffset()-t;return e.getTime()-new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0).getTime()-60*i*1e3}function c(e,t){return e=new Date(""+e),new Date(e.setDate(e.getDate()+t))}function p(e,t){var i,s=(e=new Date(""+e)).getDate();return e.setDate(1),e.setMonth(e.getMonth()+t),e.setDate(Math.min(s,(i=e,new Date(i.getFullYear(),i.getMonth()+1,0).getDate()))),e}function u(e,t,i){var s=new Date(e.getTime());s.setHours(t.getHours()),s.setMinutes(t.getMinutes()),s.setSeconds(t.getSeconds());var n=new Date(e.getTime());return 0===i.getHours()?n=c(n,1):(n.setHours(i.getHours()),n.setMinutes(i.getMinutes()),n.setSeconds(i.getSeconds())),{startHour:s,endHour:n}}function f(){var e,t=sf.base.createElement("div");t.style.cssText="width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(t);var i=devicePixelRatio?"1.10"===devicePixelRatio.toFixed(2)||devicePixelRatio<=1?Math.ceil(devicePixelRatio%1):Math.floor(devicePixelRatio%1):0;return e=t.offsetWidth-t.clientWidth-i|0,document.body.removeChild(t),e}function g(e){var t=e.getFullYear(),i=e.getMonth(),s=e.getDate(),n=e.getHours(),o=e.getMinutes(),r=e.getSeconds(),a=e.getMilliseconds();return Date.UTC(t,i,s,n,o,r,a)}function m(e){var t=getComputedStyle(e);return e.offsetHeight+(parseInt(t.marginTop,10)||0)+(parseInt(t.marginBottom,10)||0)}function v(e){return new Date(+e-6e4*e.getTimezoneOffset())}function b(e){var t=new Date(+e+6e4*e.getTimezoneOffset());return new Date(t.getTime()+6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))}function y(e,t){var i=e.getTimezoneOffset();try{var s=new Date(e.toLocaleString("en-US",{timeZone:t}));return isNaN(s.getTime())?0:(e.getTime()-s.getTime())/6e4+i}catch(e){return 0}}var M,C,w,S,N,x,O,E,I,D,T,j=function(){function e(e){this.parent=e}return e.prototype.onDataReady=function(e){},e.prototype.getScrollXIndent=function(e){return e.offsetHeight-e.clientHeight>0?f():0},e.prototype.scrollTopPanel=function(e){this.getDatesHeaderElement().firstElementChild.scrollLeft=e.scrollLeft},e.prototype.scrollHeaderLabels=function(e){for(var t=this.element.querySelector(".e-date-header-wrap table"),i=t.offsetWidth/t.querySelectorAll("colgroup col").length,s=function(t,s){for(var n,o=0,r=0,a=s?-e.scrollLeft:e.scrollLeft,l=0,h=t;l<h.length;l++){var d=h[l];if((r+=parseInt(d.getAttribute("colSpan"),10))>Math.floor(a/i)){n=d;break}o+=d.offsetWidth}sf.base.isNullOrUndefined(n)||(n.children[0].style[s?"right":"left"]=a-o+"px")},n=0,o=[".e-header-year-cell",".e-header-month-cell",".e-header-week-cell",".e-header-cells"];n<o.length;n++){var r=o[n],a=[].slice.call(this.element.querySelectorAll(r));if(a.length>0){for(var l=0,h=a;l<h.length;l++){h[l].children[0].style[this.parent.options.enableRtl?"right":"left"]=""}s(a,this.parent.options.enableRtl)}}},e.prototype.getHeaderBarHeight=function(e){void 0===e&&(e=!1);var t=2,i=this.parent.element.querySelector(".e-schedule-toolbar");if(i&&(t+=m(i)),this.parent.uiStateValues.isGroupAdaptive||e){var s=this.parent.element.querySelector(".e-schedule-resource-toolbar");s&&(t+=s.offsetHeight)}return t},e.prototype.getDatesHeaderElement=function(){return this.element.querySelector(".e-date-header-container")},e.prototype.highlightCurrentTime=function(){},e.prototype.getStartHour=function(){var e=this.parent.getStartEndTime(this.parent.activeViewOptions.startHour);return sf.base.isNullOrUndefined(e)&&(e=new Date(2e3,0,0,0)),e},e.prototype.getEndHour=function(){var e=this.parent.getStartEndTime(this.parent.activeViewOptions.endHour);return sf.base.isNullOrUndefined(e)&&(e=new Date(2e3,0,0,0)),e},e.prototype.isCurrentDate=function(e){return e.setHours(0,0,0,0)===this.parent.getCurrentTime().setHours(0,0,0,0)},e.prototype.isCurrentMonth=function(e){return e.getFullYear()===this.parent.getCurrentTime().getFullYear()&&e.getMonth()===this.parent.getCurrentTime().getMonth()},e.prototype.isWorkDay=function(e,t){return void 0===t&&(t=this.parent.activeViewOptions.workDays),t.indexOf(e.getDay())>=0},e.prototype.isWorkHour=function(e,t,i,s){return!sf.base.isNullOrUndefined(t)&&!sf.base.isNullOrUndefined(i)&&(t.setMilliseconds(0),i.setMilliseconds(0),!(d(e)<d(t)||d(e)>=d(i)||!this.isWorkDay(e,s)))},e.prototype.getRenderDates=function(e){var t=[];if("Week"===this.parent.options.currentView||"TimelineWeek"===this.parent.options.currentView)for(var i=r(h(this.parent.options.selectedDate),this.parent.activeViewOptions.firstDayOfWeek),s=0,n=7*this.parent.activeViewOptions.interval;s<n;s++)(this.parent.activeViewOptions.showWeekend||this.isWorkDay(i,e))&&t.push(i),i=c(i,1);else if("WorkWeek"===this.parent.options.currentView||"TimelineWorkWeek"===this.parent.options.currentView){i=r(h(this.parent.options.selectedDate),this.parent.activeViewOptions.firstDayOfWeek),s=0;for(var o=7*this.parent.activeViewOptions.interval;s<o;s++)this.isWorkDay(i,e)&&t.push(i),i=c(i,1)}else{i=h(this.parent.options.selectedDate);do{(this.parent.activeViewOptions.showWeekend||this.isWorkDay(i,e))&&t.push(i),i=c(i,1)}while(this.parent.activeViewOptions.interval!==t.length)}return e||(this.renderDates=t),t},e.prototype.getColElements=function(){return[].slice.call(this.element.querySelectorAll(".e-content-wrap col, .e-date-header-wrap col"))},e.prototype.setColWidth=function(e){if(this.parent.isTimelineView()){var t=this.getColElements(),i=this.element.querySelector(".e-content-table tbody").getBoundingClientRect().width/(t.length/2);if(e.offsetHeight!==e.clientHeight){var s=this.parent.element.querySelector(".e-month-header-wrapper,.e-resource-column-wrap");sf.base.isNullOrUndefined(s)||sf.base.setStyleAttribute(s,{height:sf.base.formatUnit(e.clientHeight)})}[].slice.call(this.element.querySelectorAll(".e-header-cells")).forEach((function(e){var t=parseInt(e.getAttribute("colspan"),10);sf.base.setStyleAttribute(e,{width:sf.base.formatUnit(i*t)})}))}},e.prototype.resetColWidth=function(){for(var e=0,t=this.getColElements();e<t.length;e++){t[e].style.width=""}},e.prototype.getContentAreaElement=function(){return this.element.querySelector(".e-content-wrap")},e.prototype.scrollToDate=function(e){if(-1!==["Month","TimelineMonth"].indexOf(this.parent.options.currentView)&&!sf.base.isNullOrUndefined(e)){var t=this.getContentAreaElement(),i=this.parent.getMsFromDate(new Date(h(new Date(+e)).getTime())),s=t.querySelector('.e-work-cells[data-date="'+i+'"]');"Month"===this.parent.options.currentView&&s&&(t.scrollTop=s.offsetTop),"TimelineMonth"===this.parent.options.currentView&&s&&(this.parent.options.enableRtl?t.scrollLeft=-(this.parent.getContentTable().offsetWidth-s.offsetLeft-s.offsetWidth):t.scrollLeft=s.offsetLeft)}},e.prototype.getPanel=function(){return this.element},e.prototype.retainScrollPosition=function(){if(this.parent.options.enablePersistence){var e=this.element.querySelector(".e-content-wrap");if(!sf.base.isNullOrUndefined(e)){var t=JSON.parse(window.localStorage.getItem(this.parent.element.id));if(!sf.base.isNullOrUndefined(t)){var i=t.top,s=t.left;sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(s)||(e.scrollTop=i,e.scrollLeft=s)}}}},e.prototype.removeVirtualMask=function(){var e=this.parent.element.querySelector(".e-table-wrap");this.parent.activeViewOptions.enableVirtualMask&&e&&e.classList.contains("e-virtual-mask")&&sf.base.removeClass([e],"e-virtual-mask")},e}(),A=function(){function e(e){this.allDayLevel=0,this.moreIndicatorTop=0,this.parent=e,this.slotCount=e.activeViewOptions.timeScale.slotCount,this.interval=e.activeViewOptions.timeScale.interval,this.element=this.parent.activeView.getPanel()}return e.prototype.renderAppointments=function(){var e=this.element.querySelector(".e-all-day-appointment-section");e&&(sf.base.EventHandler.remove(e,"click",this.rowExpandCollapse),sf.base.EventHandler.add(e,"click",this.rowExpandCollapse,this));var t=this.parent.element.querySelector(".e-work-cells");if(t){for(var i=this.parent.element.querySelector(".e-content-wrap"),s=[].slice.call(i.querySelectorAll(".e-appointment")),n=[].slice.call(i.querySelectorAll(".e-block-appointment")),o=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-appointment")),r=s.concat(n),a=0;a<o.length;a++)o[parseInt(a.toString(),10)].style.removeProperty("display"),o[parseInt(a.toString(),10)].style.removeProperty("visibility");var l=0,h=0,d=t.offsetParent;d&&(l=d.offsetHeight/d.querySelector("tbody").childElementCount,h=d.offsetWidth/d.querySelector("tbody tr").childElementCount);for(a=0;a<r.length;a++){var c="none"!==(w=r[parseInt(a.toString(),10)]).style.display;w.style.removeProperty("display"),w.style.removeProperty("visibility"),sf.base.removeClass([w],"e-event-action"),w.blur();var p=this.getColumn(w),u=this.getAppWidth(this.getColumnCounts(w)),f=this.getTopStartDuration(w),g=this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount*6e4,m=f/g*l;w.style.top=m+"px",w.style.left=this.getEventLeft(u,p),w.style.width=w.classList.contains("e-block-appointment")?"100%":u,w.style.height=(f+this.getDuration(w))/g*l-m+"px",c||this.parent.eventBase.wireAppointmentEvents(w)}var v=this.parent.element.querySelector(".e-all-day-row").offsetTop,b=o.length>0?o[0].offsetHeight:0,y=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-appointment-wrapper"));this.setAllDayRowHeight(0);for(var M=0;M<y.length;M++){var C=y[parseInt(M.toString(),10)].children;for(a=0;a<C.length;a++){var w,S=0;if((w=C[parseInt(a.toString(),10)]).blur(),w.classList.contains("e-row-count-wrapper"))this.moreIndicatorTop=v+4*b,this.parent.uiStateValues.expand||(w.style.top=this.moreIndicatorTop+"px",S=4*b+4,this.setAllDayRowHeight(S));else{this.parent.uiStateValues.expand&&sf.base.removeClass([w],"e-appointment-hide");var N=this.getRowCount(w),x=this.getTotalLength(w);this.allDayLevel=this.allDayLevel<N?N:this.allDayLevel,w.style.top=v+N*b+"px",w.style.width=h*x-15+"px",S=4+(!this.parent.uiStateValues.expand&&this.allDayLevel>3?4*b:(this.allDayLevel+1)*b),this.parent.eventBase.wireAppointmentEvents(w),this.setAllDayRowHeight(S)}}}var O=[].slice.call(this.element.querySelectorAll(".e-more-indicator"));e&&(O.length>0?sf.base.removeClass([e],"e-disable"):sf.base.addClass([e],"e-disable"));for(a=0;a<O.length;a++)sf.base.EventHandler.clearEvents(O[parseInt(a.toString(),10)]),sf.base.EventHandler.add(O[parseInt(a.toString(),10)],"click",this.rowExpandCollapse,this);this.parent.setDimensions()}},e.prototype.getAppWidth=function(e){var t=(("Day"===this.parent.options.currentView?97:94)-e)/e;return(t<0?0:t)+"%"},e.prototype.getEventLeft=function(e,t){var i=(parseFloat(e)+1)*t;return(i>99?99:i)+"%"},e.prototype.setAllDayRowHeight=function(e){for(var t=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-cells")),i=0;i<t.length;i++)t[parseInt(i.toString(),10)].style.height=e/12+"em";var s=this.parent.element.querySelector(".e-date-header-wrap");"auto"!==this.parent.options.height&&this.parent.options.enableAllDayScroll||sf.base.addClass([s],"e-all-day-auto");var n=this.parent.element.querySelector(".e-all-day-row");n.style.height="",this.parent.uiStateValues.expand&&"auto"!==this.parent.options.height&&this.parent.options.enableAllDayScroll?(n.style.height=e/12+"em",this.parent.eventBase.allDayExpandScroll(s)):(s.scrollTop=0,sf.base.removeClass([s],"e-all-day-scroll"))},e.prototype.getRowCount=function(e){return parseInt(e.getAttribute("data-row-index"),10)},e.prototype.getTotalLength=function(e){return parseInt(e.getAttribute("data-total-length"),10)},e.prototype.getDuration=function(e){return parseInt(e.getAttribute("data-duration"),10)},e.prototype.getTopStartDuration=function(e){return parseInt(e.getAttribute("data-top-start-duration"),10)},e.prototype.getColumnCounts=function(e){return parseInt(e.getAttribute("data-columns-count"),10)},e.prototype.getColumn=function(e){return parseInt(e.getAttribute("data-columns"),10)},e.prototype.rowExpandCollapse=function(){var e=this.element.querySelector(".e-all-day-appointment-section");this.parent.uiStateValues.expand=e.classList.contains("e-appointment-expand");var t,i=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-appointment")),s=i.length>0?i[0].offsetHeight:0;this.parent.uiStateValues.expand?(e.setAttribute("title","Collapse-all-day-section"),e.setAttribute("aria-label","Collapse section"),t=(this.allDayLevel+1)*s+4):(e.setAttribute("title","Expand-all-day-section"),e.setAttribute("aria-label","Expand section"),t=4*s+4),this.setAllDayRowHeight(t),this.addOrRemoveClass(),this.parent.setDimensions()},e.prototype.addOrRemoveClass=function(){var e=this;[].slice.call(this.parent.element.querySelectorAll(".e-more-event")).filter((function(t){!e.parent.uiStateValues.expand&&e.allDayLevel>2?(sf.base.addClass([t],"e-appointment-hide"),t.setAttribute("tabindex","-1")):(sf.base.removeClass([t],"e-appointment-hide"),t.setAttribute("tabindex","0"))}));var t=this.element.querySelector(".e-all-day-appointment-section");this.parent.uiStateValues.expand?(sf.base.removeClass([t],"e-appointment-expand"),sf.base.addClass([t],"e-appointment-collapse")):(sf.base.removeClass([t],"e-appointment-collapse"),sf.base.addClass([t],"e-appointment-expand")),this.allDayLevel>2?sf.base.removeClass([t],"e-disable"):sf.base.addClass([t],"e-disable"),[].slice.call(this.element.querySelectorAll(".e-row-count-wrapper")).filter((function(t){!e.parent.uiStateValues.expand&&e.allDayLevel>2?(sf.base.removeClass([t],"e-disable"),t.style.top=e.moreIndicatorTop+"px"):sf.base.addClass([t],"e-disable")}))},e.prototype.initializeValues=function(){this.cellHeight=parseFloat(this.parent.element.querySelector(".e-content-wrap tbody tr").getBoundingClientRect().height.toFixed(2))},e.prototype.getHeight=function(e,t){var i=(t.getTime()-e.getTime())/6e4*(this.cellHeight*this.slotCount)/this.interval;return i=i<=0?this.cellHeight:i},e.prototype.renderNormalEvents=function(e,t){var i=e,s=i.startTime,n=i.endTime,o=0,r=this.getHeight(s,n);o=this.getTopValue(s,o);var a=this.parent.inlineModule.createInlineAppointmentElement();sf.base.setStyleAttribute(a,{width:this.getEventWidth(),height:r+"px",top:o+"px"}),[].slice.call(this.parent.element.querySelectorAll(".e-appointment-wrapper"))[parseInt(t.toString(),10)].appendChild(a)},e.prototype.getEventWidth=function(){var e="Day"===this.parent.options.currentView?97:94;return(e<0?0:e)+"%"},e.prototype.getTopValue=function(e,t){var i=h(this.parent.activeView.renderDates[parseInt(t.toString(),10)]);(new Date).setHours(0,0,0,0);var s=this.parent.eventBase.getStEdHours(i,this.parent.activeView.getStartHour(),this.parent.activeView.getEndHour()).startHour;return(60*(e.getHours()-s.getHours())+(e.getMinutes()-s.getMinutes()))*this.cellHeight*this.slotCount/this.interval},e.prototype.renderAllDayEvents=function(e,t){var i,s=e,n=this.parent.element.querySelector(".e-all-day-cells:first-child").offsetTop,o=1;s.Index=0,this.allDayLevel=this.allDayLevel<0?0:this.allDayLevel,i=100-("Day"===this.parent.options.currentView?4:7);var r=this.parent.element.querySelector(".e-all-day-appointment-wrapper:nth-child("+(t+1)+")"),a=this.parent.inlineModule.createInlineAppointmentElement();r.appendChild(a),o+=n+1,sf.base.setStyleAttribute(a,{width:i+"%",top:sf.base.formatUnit(o)}),sf.base.addClass([a],"e-all-day-appointment")},e}(),z=function(){function i(e){this.slots=[],this.isDoubleTapped=!1,this.parent=e}return i.prototype.getSelectedEventElements=function(e){if(this.removeSelectedAppointmentClass(),this.parent.selectedElements.length<=0)this.parent.selectedElements.push(e);else if(this.parent.selectedElements.filter((function(t){return t.getAttribute("data-guid")===e.getAttribute("data-guid")})).length<=0)for(var t='div[data-guid="'+e.getAttribute("data-guid")+'"]',i=0,s=[].slice.call(this.parent.element.querySelectorAll(t));i<s.length;i++){var n=s[i];this.parent.selectedElements.push(n)}else{var o=this.parent.selectedElements.filter((function(t){return t.getAttribute("data-guid")!==e.getAttribute("data-guid")}));this.parent.selectedElements=o}return e&&this.parent.selectedElements.length>0&&this.addSelectedAppointments(this.parent.selectedElements),this.parent.selectedElements},i.prototype.getSelectedEvents=function(){var e=[],i=[];return[].slice.call(this.parent.element.querySelectorAll("."+t)).filter((function(t){0===e.filter((function(e){return e===t.getAttribute("data-guid")})).length&&e.push(t.getAttribute("data-guid")),i.push(t)})),{element:i.length>1?i:i[0],guid:e}},i.prototype.removeSelectedAppointmentClass=function(){var e=this.getSelectedAppointments();sf.base.removeClass(e,t),"Agenda"!==this.parent.options.currentView&&"MonthAgenda"!==this.parent.options.currentView||sf.base.removeClass(e,"e-active-appointment-agenda")},i.prototype.addSelectedAppointments=function(e){"MonthAgenda"!==this.parent.options.currentView&&this.parent.removeSelectedClass(),sf.base.addClass(e,t)},i.prototype.getSelectedAppointments=function(){return[].slice.call(this.parent.element.querySelectorAll("."+t+",.e-appointment:focus"))},i.prototype.focusElement=function(){var e=document.querySelector("#"+this.parent.element.id+"_dialog_wrapper");if(!e||!e.classList.contains("e-popup-open")){var t=this.parent.getSelectedCells();if(t.length>0){if(this.parent.keyboardInteractionModule){var i=!sf.base.isNullOrUndefined(this.parent.activeCellsData)&&this.parent.activeCellsData.element||t[t.length-1];this.parent.keyboardInteractionModule.selectCells(i instanceof Array,i)}}else{var s=this.getSelectedAppointments();s.length>0&&s[s.length-1].focus()}}},i.prototype.splitEvent=function(e,t){var i=h(new Date(e.startTime+"")).getTime(),s=h(new Date(e.endTime+"")).getTime();if(d(e.endTime)<=0){var n=c(h(new Date(e.endTime+"")),-1).getTime();s=i>n?i:n}var o=i,r=s,a=[];if(i!==s){i<t[0].getTime()&&(i=t[0].getTime()),s>t[t.length-1].getTime()&&(s=t[t.length-1].getTime());for(var l=i,p=0;p<this.slots.length;p++){var u=this.slots[parseInt(p.toString(),10)];if("WorkWeek"===this.parent.options.currentView||"TimelineWorkWeek"===this.parent.options.currentView||this.parent.activeViewOptions.group.byDate||this.parent.activeViewOptions.showWeekend){for(var f=[],g=0,m=u;g<m.length;g++){var v=m[g];f.push(new Date(v))}var b=this.getRenderedDates(f);if(!sf.base.isNullOrUndefined(b)&&b.length>0){u=[];for(var y=0,M=b;y<M.length;y++){var C=M[y];u.push(C.getTime())}}}var w=u[0];if((l=l<=w&&s>=w?w:l)>s||w>s)break;if(!this.parent.activeViewOptions.group.byDate&&this.parent.activeViewOptions.showWeekend&&"WorkWeek"!==this.parent.options.currentView&&"TimelineWorkWeek"!==this.parent.options.currentView){var S=u.indexOf(l);if(-1!==S){var N=u.indexOf(s),x=-1!==N,O=(N=x?N:u.length-1)-S+1,E=u[parseInt(S.toString(),10)]!==o,I=u[parseInt(N.toString(),10)]!==r;if(a.push(this.cloneEventObject(e,u[parseInt(S.toString(),10)],u[parseInt(N.toString(),10)],O,E,I)),x)break}}else if(this.dateInRange(l,u[0],u[u.length-1])){for(var D=[],T=0;T<u.length;T++)this.dateInRange(u[parseInt(T.toString(),10)],o,r)&&D.push(u[parseInt(T.toString(),10)]);if(D.length>0)if(this.parent.activeViewOptions.group.byDate)for(var j=0,A=D;j<A.length;j++){var z=A[j];a.push(this.cloneEventObject(e,z,z,1,z!==o,z!==r))}else{E=D[0]!==o,I=D[D.length-1]!==r;a.push(this.cloneEventObject(e,D[0],D[D.length-1],D.length,E,I))}}}}else a.push(this.cloneEventObject(e,i,s,1,!1,!1));return a},i.prototype.dateInRange=function(e,t,i){return t<=e&&e<=i},i.prototype.cloneEventObject=function(e,t,i,s,n,o){var r=sf.base.extend({},e,null,!0),a={count:s,isLeft:n,isRight:o};return a.startTime=e.startTime,a.endTime=e.endTime,r.data=a,r.startTime=new Date(t),r.endTime=new Date(i),r},i.prototype.getRenderedDates=function(e){var t,i=0,s=e.length;if(e[0]<this.parent.options.minDate&&e[e.length-1]>this.parent.options.maxDate){for(var n=0;n<e.length;n++)e[parseInt(n.toString(),10)].getTime()===this.parent.options.minDate.getTime()&&(i=n),e[parseInt(n.toString(),10)].getTime()===this.parent.options.maxDate.getTime()&&(s=n);t=e.filter((function(t){return t>=e[parseInt(i.toString(),10)]&&t<=e[parseInt(s.toString(),10)]}))}return t},i.prototype.isValidEvent=function(e,t,i,s){var n=i.getTime()>s.startHour.getTime()&&t.getTime()<s.endHour.getTime(),o=s.startHour.getTime()<=t.getTime()&&e.startTime.getTime()>=s.startHour.getTime()&&e.endTime.getTime()<s.endHour.getTime()&&t.getTime()===i.getTime();return n||o},i.prototype.getStEdHours=function(e,t,i){var s=new Date(e.getTime());s.setHours(t.getHours()),s.setMinutes(t.getMinutes()),s.setSeconds(t.getSeconds());var n=new Date(e.getTime());return 0===i.getHours()?n.setDate(n.getDate()+1):(n.setHours(i.getHours()),n.setMinutes(i.getMinutes()),n.setSeconds(i.getSeconds())),{startHour:s,endHour:n}},i.prototype.appointmentBorderRemove=function(t){var i=t.target;sf.base.closest(i,".e-appointment")?"MonthAgenda"!==this.parent.options.currentView&&this.parent.removeSelectedClass():sf.base.closest(i,"."+e)||this.removeSelectedAppointmentClass()},i.prototype.wireAppointmentEvents=function(e,t,i){if(void 0===t&&(t=!1),void 0===i&&(i=!1),!this.parent.isPrintSchedule&&!e.classList.contains("e-block-appointment")){var s="true"===e.getAttribute("aria-disabled");sf.base.EventHandler.remove(e,"click",this.eventClick),sf.base.EventHandler.remove(e,"dblclick",this.eventDoubleClick),sf.base.EventHandler.remove(e,"touchstart",this.eventTouchClick),("TimelineYear"!==this.parent.options.currentView||i)&&(sf.base.EventHandler.add(e,"click",this.eventClick,this),this.parent.isAdaptive||sf.base.EventHandler.add(e,"touchstart",this.eventTouchClick,this),this.parent.isAdaptive||this.parent.activeViewOptions.readonly||s||sf.base.EventHandler.add(e,"dblclick",this.eventDoubleClick,this)),this.parent.activeViewOptions.readonly||s||t||(this.parent.resizeModule&&this.parent.resizeModule.wireResizeEvent(e),this.parent.dragAndDropModule&&this.parent.dragAndDropModule.wireDragEvent(e))}},i.prototype.eventTouchClick=function(e){var t=this;setTimeout((function(){return t.isDoubleTapped=!1}),250),e.preventDefault(),this.isDoubleTapped?this.eventDoubleClick(e):this.isDoubleTapped||(this.isDoubleTapped=!0,this.eventClick(e))},i.prototype.eventClick=function(e){var i=e.target;if(!(i.classList.contains("e-drag-clone")||i.classList.contains("e-resize-clone")||e.detail>1||i.classList.contains("e-block-appointment")||i.classList.contains("e-inline-subject"))){if(this.parent.isAdaptive&&this.parent.isTapHold){this.parent.selectedElements=[].slice.call(this.parent.element.querySelectorAll("."+t));var s=sf.base.closest(e.target,".e-appointment"),n=this.getSelectedEventElements(s);if(n.length>0){var o=1===n.length?n[0].querySelector(".e-subject").innerHTML:"("+n.length+")&nbsp;selected item(s)";this.parent.quickPopup.element.querySelector(".e-subject").innerHTML=o,n.length>1?sf.base.addClass([this.parent.quickPopup.element.querySelector(".e-edit-icon")],"e-hidden"):sf.base.removeClass([this.parent.quickPopup.element.querySelector(".e-edit-icon")],"e-hidden")}else this.parent.selectedElements=[],this.parent.onQuickPopupClose()}if(i=sf.base.closest(e.target,".e-appointment"),e.ctrlKey&&1===e.which&&this.parent.keyboardInteractionModule){this.parent.selectedElements=[].slice.call(this.parent.element.querySelectorAll("."+t)),this.getSelectedEventElements(i);var r=this.activeEventData(e,!1);this.parent.dotNetRef.invokeMethodAsync("TriggerEventClick",r,this.getMouseEvent(e),this.getGroupIndexFromElement(i),!0,!1)}else{this.removeSelectedAppointmentClass();r=this.activeEventData(e,!0);this.parent.dotNetRef.invokeMethodAsync("TriggerEventClick",r,this.getMouseEvent(e),this.getGroupIndexFromElement(i),!1,!1)}}},i.prototype.eventDoubleClick=function(e){if("touchstart"===e.type&&this.activeEventData(e,!0),!this.parent.activeEventData.element.classList.contains("e-inline-appointment")&&!this.parent.activeEventData.element.querySelector(".e-inline-subject")){var t=this.activeEventData(e,!1),i=sf.base.closest(e.target,".e-appointment");this.parent.dotNetRef.invokeMethodAsync("TriggerEventDoubleClick",t,this.getMouseEvent(e),this.getGroupIndexFromElement(i))}},i.prototype.getMouseEvent=function(e){if(-1!==e.type.indexOf("touch")){var t=e.event,i=t&&t.changedTouches?t.changedTouches[0]:e.changedTouches?e.changedTouches[0]:t||e;return{altKey:e.altKey,button:e.button,buttons:e.buttons,clientX:i.clientX,clientY:i.clientY,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,screenX:i.screenX,screenY:i.screenY,shiftKey:e.shiftKey,type:e.type}}return{altKey:e.altKey,button:e.button,buttons:e.buttons,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,screenX:e.screenX,screenY:e.screenY,shiftKey:e.shiftKey,type:e.type}},i.prototype.getGroupIndexFromElement=function(e){var t=parseInt(e.getAttribute("data-group-index"),10);return isNaN(t)?0:t},i.prototype.activeEventData=function(e,t){var i=sf.base.closest(e.target,".e-appointment"),s=i.getAttribute("data-guid");return t&&(i.parentElement.classList.contains(".e-more-appointment-wrapper")&&this.parent.morePopup&&this.parent.morePopup.element?this.addSelectedAppointments([].slice.call(this.parent.morePopup.element.querySelectorAll('div[data-guid="'+s+'"]'))):this.addSelectedAppointments([].slice.call(this.parent.element.querySelectorAll('.e-table-container div[data-guid="'+s+'"]'))),i.focus()),this.parent.activeEventData={element:i,guid:[s]},s},i.prototype.allDayExpandScroll=function(e){var t=0;[].slice.call(this.parent.element.querySelectorAll(".e-header-row")).forEach((function(e){[].slice.call(e.children).forEach((function(e){e.style.top=t+"px"})),t+=e.offsetHeight})),t=e.offsetHeight-t,this.parent.element.querySelector(".e-all-day-cells").style.height=t/12+"em",this.parent.uiStateValues.expand?sf.base.addClass([e],"e-all-day-scroll"):sf.base.removeClass([e],"e-all-day-scroll")},i.prototype.removeHeightProperty=function(e){for(var t=0,i=[].slice.call(this.parent.element.querySelectorAll("."+e+" tbody tr"));t<i.length;t++){i[t].firstElementChild.style.height=""}},i}(),L=(M=function(e,t){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}M(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),k=function(e){function t(t){var i=e.call(this,t)||this;i.renderedEvents=[],i.allDayLevel=0,i.moreIndicatorHeight=19,i.monthHeaderHeight=0,i.maxHeight=i.parent.options.enableMaxHeight&&!i.parent.options.enableIndicator&&!i.parent.options.rowAutoHeight;var s=i.parent.options.enableMaxHeight&&i.parent.options.enableIndicator&&!i.parent.options.rowAutoHeight;return i.maxOrIndicator=i.maxHeight||s,i.moreIndicatorHeight=i.parent.options.rowAutoHeight&&i.parent.options.ignoreWhitespace?0:i.moreIndicatorHeight,i.eventTop="Month"===i.parent.options.currentView?7:0,i}return L(t,e),t.prototype.renderAppointments=function(){var e=this,t=[].slice.call(this.parent.element.querySelectorAll(".e-appointment, .e-more-indicator, .e-block-appointment, .e-block-indicator")),i=this.parent.element.querySelector(".e-work-cells");if(i){var n=this.parent.element.querySelector(".e-content-wrap");if(this.parent.options.rowAutoHeight&&(this.parent.uiStateValues.top=n.scrollTop,this.parent.uiStateValues.left=n.scrollLeft),this.removeHeightProperty("e-content-table"),t.forEach((function(t){e.removedPositionedStyles(t)})),this.monthHeaderHeight=0,"Month"===this.parent.options.currentView){if(this.parent.options.rowAutoHeight){var o=[].slice.call(this.parent.element.querySelectorAll(".e-content-wrap table tr td:first-child")),r=this.parent.element.querySelector(".e-content-table").clientHeight/o.length;o.forEach((function(e){sf.base.setStyleAttribute(e,{height:r+"px"})}))}this.monthHeaderHeight=i.firstElementChild.offsetHeight}var a=i.offsetParent;a&&(this.cellHeight=a.offsetHeight/a.querySelector("tbody").childElementCount,this.cellWidth=a.offsetWidth/a.querySelector("tbody tr").childElementCount);var l=s(this.parent.element.querySelector(".e-current-panel"),"e-appointment");this.dateRender=this.parent.activeView.renderDates;for(var h=[],d=[],c=[],p=0;p<t.length;p++){var u=t[parseInt(p.toString(),10)];sf.base.removeClass([u],"e-event-action");var f="none"!==u.style.display;u.style.removeProperty("display"),u.blur();var g=this.getStartTime(u),m=this.getOverLapCount(u),v=this.getDataCount(u)*this.cellWidth;v=u.classList.contains("e-block-appointment")?v:v-5;var b=0,y=0,M=this.getGroupIndex(u),C=this.getCellTd(M,g);if(C){var w=sf.base.closest(C,"tr"),S=this.monthHeaderHeight+(m+1)*l+this.moreIndicatorHeight+this.eventTop,N=w.firstElementChild,x=w.sectionRowIndex;sf.base.isNullOrUndefined(d[parseInt(x.toString(),10)])&&(d[parseInt(x.toString(),10)]=C.getBoundingClientRect().height,h[parseInt(x.toString(),10)]=C.offsetTop),this.parent.options.rowAutoHeight&&this.updateCellHeight(N,S,x,d);var O=h[parseInt(x.toString(),10)],E=this.monthHeaderHeight+(u.classList.contains("e-block-appointment")?O:O+m*l)+this.eventTop,I=d[parseInt(x.toString(),10)],D=C.cellIndex;sf.base.isNullOrUndefined(c[parseInt(D.toString(),10)])&&(c[parseInt(D.toString(),10)]=C.offsetLeft),this.parent.options.enableRtl?y=C.parentElement.offsetWidth-c[parseInt(D.toString(),10)]-this.cellWidth:b=c[parseInt(D.toString(),10)],u.classList.contains("e-more-indicator")?this.updateMoreIndicator(u,y,b,O):u.classList.contains("e-block-indicator")?this.updateBlockIndicator(u,y,b,C,O):(sf.base.setStyleAttribute(u,{width:v+"px",left:b+"px",right:y+"px",top:E+"px"}),this.maxOrIndicator&&this.setMaxEventHeight(u,C,I),u.classList.contains("e-block-appointment")&&sf.base.setStyleAttribute(u,{height:I-(E-O)+"px"}),u.classList.contains("e-appointment")&&!f&&this.parent.eventBase.wireAppointmentEvents(u))}}this.updateRowHeight(l)}},t.prototype.removedPositionedStyles=function(e){e.style.removeProperty("width"),e.style.removeProperty("height"),e.style.removeProperty("left"),e.style.removeProperty("right"),e.style.removeProperty("top"),e.style.removeProperty("visibility")},t.prototype.updateMoreIndicator=function(e,t,i,s){var n=this.cellHeight-this.moreIndicatorHeight;sf.base.setStyleAttribute(e,{top:s+n+"px",width:this.cellWidth-2+"px",left:i+"px",right:t+"px"})},t.prototype.updateBlockIndicator=function(e,t,i,s,n){this.parent.options.enableRtl?e.style.right=t+this.cellWidth-24+"px":e.style.left=i+this.cellWidth-24+"px";var o=s.firstElementChild;o&&(e.style.marginTop=o.offsetTop+2+"px"),e.style.top=n+"px",e.style.position="absolute"},t.prototype.setMaxEventHeight=function(e,t,i){var s=i-("Month"===this.parent.options.currentView?m(t.querySelector(".e-date-header")):0)-(this.maxHeight?2:this.moreIndicatorHeight);sf.base.setStyleAttribute(e,{height:s+"px","align-items":"center"})},t.prototype.getCellTd=function(e,t){return this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?this.parent.element.querySelector('.e-content-wrap tbody td[data-group-index="'+e.toString()+'"][data-date="'+t.getTime()+'"]'):this.parent.element.querySelector('.e-content-wrap tbody td[data-date="'+t.getTime()+'"]')},t.prototype.getGroupIndex=function(e){var t=parseInt(e.getAttribute("data-group-index"),10);return t||0},t.prototype.getOverLapCount=function(e){return parseInt(e.getAttribute("data-index"),10)},t.prototype.getStartTime=function(e){return new Date(parseInt(e.getAttribute("data-start"),10))},t.prototype.getEndTime=function(e){return new Date(parseInt(e.getAttribute("data-end"),10))},t.prototype.getDataCount=function(e){return parseInt(e.getAttribute("data-total-length"),10)},t.prototype.updateRowHeight=function(e){if(this.parent.options.rowAutoHeight){this.updateBlockElements(),this.updateNormalEventElements(e),this.updateBlockIndicatorEle();var t={cssProperties:this.parent.getCssProperties(),isPreventScrollUpdate:!0,scrollPosition:{left:this.parent.uiStateValues.left,top:this.parent.uiStateValues.top}};if(this.parent.onScrollUiUpdate(t),"Month"===this.parent.options.currentView&&this.parent.element.querySelector(".e-week-number-wrapper")){var i=[].slice.call(this.parent.element.querySelectorAll(".e-content-wrap table tr td:first-child"));[].slice.call(this.parent.element.querySelectorAll(".e-week-number")).forEach((function(e,t){sf.base.setStyleAttribute(e,{height:i[parseInt(t.toString(),10)].style.height})})),this.parent.element.querySelector(".e-week-number-wrapper").scrollTop=this.parent.element.querySelector(".e-content-wrap").scrollTop}}},t.prototype.updateBlockIndicatorEle=function(){for(var e=0,t=[].slice.call(this.parent.element.querySelectorAll(".e-block-indicator"));e<t.length;e++){var i=t[e],s=this.getStartTime(i),n=this.getGroupIndex(i),o=this.getCellTd(n,s),r=0,a=0;this.parent.options.enableRtl?a=o.parentElement.offsetWidth-o.offsetLeft-this.cellWidth:r=o.offsetLeft,this.updateBlockIndicator(i,a,r,o,o.offsetTop)}},t.prototype.updateBlockElements=function(){for(var e=0,t=[].slice.call(this.parent.element.querySelectorAll(".e-block-appointment"));e<t.length;e++){var i=t[e],s=this.getStartTime(i),n=this.getGroupIndex(i),o=this.getCellTd(n,s),r=o.offsetHeight-this.monthHeaderHeight-this.eventTop,a=o.offsetWidth,l=Math.round(i.offsetWidth/a);l*=a;var h=0,d=0;this.parent.options.enableRtl?d=o.parentElement.offsetWidth-o.offsetLeft-this.cellWidth:h=o.offsetLeft;var c=o.offsetTop+this.monthHeaderHeight+this.eventTop;sf.base.setStyleAttribute(i,{width:l+"px",left:h+"px",right:d+"px",height:r+"px",top:c+"px"})}},t.prototype.updateNormalEventElements=function(e){for(var t=0,i=[].slice.call(this.parent.element.querySelectorAll(".e-appointment"));t<i.length;t++){var s=i[t],n=this.getStartTime(s),o=this.getGroupIndex(s),r=this.getCellTd(o,n),a=this.getOverLapCount(s),l=0,h=0;this.parent.options.enableRtl?h=r.parentElement.offsetWidth-r.offsetLeft-this.cellWidth:l=r.offsetLeft;var d=this.monthHeaderHeight+r.offsetTop+a*e+this.eventTop;sf.base.setStyleAttribute(s,{left:l+"px",right:h+"px",top:d+"px"})}},t.prototype.updateCellHeight=function(e,t,i,s){t>s[parseInt(i.toString(),10)]&&(s[parseInt(i.toString(),10)]=t,sf.base.setStyleAttribute(e,{height:t+"px"}))},t.prototype.getSlotDates=function(e){this.slots=[];for(var t=this.dateRender.map((function(e){return+e})),i=this.parent.activeViewOptions.showWeekend?7:e.length;t.length>0;)this.slots.push(t.splice(0,i))},t.prototype.renderEvents=function(e,t,i){var s=e.startTime,n=this.parent.getIndexOfDate(this.dateRender,h(s)),o=e.data.count*this.cellWidth-5,r=this.workCells[parseInt(n.toString(),10)],a=this.parent.inlineModule.createInlineAppointmentElement();sf.base.setStyleAttribute(a,{width:o+"px"}),this.renderEventElement(a,r)},t.prototype.renderEventElement=function(e,t){var i=sf.base.createElement("div",{className:"e-appointment-wrapper"});i.appendChild(e),t.appendChild(i)},t}(z),P=(C=function(e,t){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}C(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),B=function(e){function t(t){var i=e.call(this,t)||this;return i.isInverseTableSelect=!0,i.baseCssClass="e-vertical-view",i}return P(t,e),t.prototype.onDataReady=function(){(this.removeVirtualMask(),this.parent.activeViewOptions.timeScale.enable)?new A(this.parent).renderAppointments():new k(this.parent).renderAppointments()},t.prototype.onContentScroll=function(e){this.parent.removeNewEventElement();var t=e.target;this.parent.onVirtualScroll(),this.scrollLeftPanel(t),this.scrollTopPanel(t),this.parent.isAdaptive||(this.parent.uiStateValues.top=t.scrollTop),this.parent.uiStateValues.left=t.scrollLeft,this.parent.onClosePopup(),this.parent.setPersistence()},t.prototype.onAdaptiveMove=function(e){this.parent.uiStateValues.action&&e.cancelable&&e.preventDefault()},t.prototype.scrollLeftPanel=function(e){var t=this.getLeftPanelElement();sf.base.isNullOrUndefined(t)||(t.scrollTop=e.scrollTop)},t.prototype.onScrollUiUpdate=function(e){var t=this.parent.element.querySelector(".e-date-header-wrap"),i=this.getHeaderBarHeight(),s=this.getLeftPanelElement(),n=this.getContentAreaElement(),o=this.getDatesHeaderElement(),r=this.parent.element.offsetHeight-i-o.offsetHeight;this.setContentHeight(n,s,r),this.setColWidth(n);var a=f();o.firstElementChild.style[e.cssProperties.rtlBorder]="",o.style[e.cssProperties.rtlPadding]="";var l=!this.parent.options.enableAllDayScroll||!(n.offsetWidth-n.clientWidth<=t.offsetWidth-t.clientWidth&&t.classList.contains("e-all-day-scroll"));n.offsetWidth-n.clientWidth>0&&l?(o.firstElementChild.style[e.cssProperties.border]=a>0?"1px":"0px",o.style[e.cssProperties.padding]=a>0?a-1+"px":"0px"):(o.firstElementChild.style[e.cssProperties.border]="",o.style[e.cssProperties.padding]=""),e.isPreventScrollUpdate||(this.parent.uiStateValues.isInitial?(this.parent.isTimelineView()&&(n.scrollTop=this.parent.uiStateValues.top),this.scrollToWorkHour(),this.parent.uiStateValues.isInitial=!1):(s&&(s.scrollTop=this.parent.uiStateValues.top),n.scrollTop=this.parent.uiStateValues.top,n.scrollLeft=this.parent.uiStateValues.left)),this.highlightCurrentTime();var h=this.parent.element.querySelector(".e-table-wrap table");h&&!h.classList.contains("e-outer-table")&&sf.base.addClass([h],"e-outer-table"),this.retainScrollPosition()},t.prototype.setContentHeight=function(e,t,i){sf.base.isNullOrUndefined(t)||(t.style.height="auto"===this.parent.options.height?"auto":sf.base.formatUnit(i-this.getScrollXIndent(e))),e.style.height="auto"===this.parent.options.height?"auto":sf.base.formatUnit(i)},t.prototype.scrollToWorkHour=function(){if(this.parent.options.workHours.highlight){var e=this.element.querySelector(".e-work-hours");e&&(this.getContentAreaElement().scrollTop=e.offsetTop,this.parent.uiStateValues.top=e.offsetTop,this.parent.uiStateValues.left=0)}},t.prototype.scrollToHour=function(e,t){var i=this.parent.getStartEndTime(e);if(!sf.base.isNullOrUndefined(t)){var s=this.parent.getMsFromDate(new Date(h(new Date(+t)).getTime())),n=this.element.querySelector('.e-header-cells[data-date="'+s+'"]');if(n)if(this.parent.options.enableRtl){var o=this.element.querySelector(".e-content-table");this.getContentAreaElement().scrollLeft=-(o.offsetWidth-n.offsetLeft-n.offsetWidth)}else this.getContentAreaElement().scrollLeft=n.offsetLeft}sf.base.isNullOrUndefined(i)||(this.getContentAreaElement().scrollTop=this.getTopFromDateTime(i))},t.prototype.scrollToDate=function(e){this.scrollToHour(null,e)},t.prototype.isWorkHourRange=function(e){return this.getStartHour().getTime()<=e.getTime()&&this.getEndHour().getTime()>=e.getTime()},t.prototype.highlightCurrentTime=function(){var e=this,t=[].slice.call(this.element.querySelectorAll(".e-current-day"));t.length>0&&sf.base.removeClass(t,"e-current-day");for(var i='.e-date-header[data-date="'+v(h(new Date(this.parent.getCurrentTime()))).getTime().toString()+'"]',s=0,n=t=[].slice.call(this.element.querySelectorAll(i));s<n.length;s++){var o=n[s];sf.base.addClass([o],"e-current-day")}if(this.parent.activeViewOptions.timeScale.enable&&!(this.parent.isTimelineView()&&this.parent.activeViewOptions.headerRows&&this.parent.activeViewOptions.headerRows.length>0&&"Hour"!==this.parent.activeViewOptions.headerRows.slice(-1)[0].option))if(this.parent.options.showTimeIndicator&&this.isWorkHourRange(this.parent.getCurrentTime())){var r=this.getCurrentTimeIndicatorIndex(),a=this.getLeftPanelElement();if(sf.base.isNullOrUndefined(a)||sf.base.removeClass(a.querySelectorAll(".e-hide-childs"),"e-hide-childs"),r.length>0)[].slice.call(this.element.querySelectorAll(".e-work-cells")).length>0&&this.changeCurrentTimePosition(),sf.base.isNullOrUndefined(this.currentTimeIndicatorTimer)&&(this.currentTimeIndicatorTimer=window.setInterval((function(){e.changeCurrentTimePosition()}),6e4));else this.clearCurrentTimeIndicatorTimer()}else this.clearCurrentTimeIndicatorTimer()},t.prototype.getCurrentTimeIndicatorIndex=function(){for(var e=[],t=[].slice.call(this.element.querySelectorAll(".e-timeline-wrapper")),i=v(h(new Date(this.parent.getCurrentTime()))).getTime().toString(),s=0,n=t.length;s<n;s++)t[parseInt(s.toString(),10)].getAttribute("data-date")===i&&e.push(s);return e},t.prototype.clearCurrentTimeIndicatorTimer=function(){if(!sf.base.isNullOrUndefined(this.currentTimeIndicatorTimer)){window.clearInterval(this.currentTimeIndicatorTimer),this.currentTimeIndicatorTimer=null,this.removeCurrentTimeIndicatorElements();var e=this.parent.element.querySelector(".e-table-wrap table");e&&this.parent.options.enableRtl&&this.parent.isTimelineView()&&sf.base.removeClass([e],"e-outer-table")}},t.prototype.removeCurrentTimeIndicatorElements=function(){for(var e=0,t=[].slice.call(this.element.querySelectorAll(".e-previous-timeline,.e-current-timeline,.e-current-time"));e<t.length;e++){var i=t[e];sf.base.remove(i)}},t.prototype.changeCurrentTimePosition=function(){if(!this.parent.isDestroyed){this.removeCurrentTimeIndicatorElements();var e=this.getCurrentTimeIndicatorIndex(),t=this.parent.getContentTable().rows[0],i=this.getTopFromDateTime(this.parent.getCurrentTime()),s=sf.base.formatUnit(i),n=Math.floor(i/t.cells[0].offsetHeight);if(!sf.base.isNullOrUndefined(n)&&!isNaN(n)){for(var o=[].slice.call(this.element.querySelectorAll(".e-timeline-wrapper")),r=0,a=e[0];r<a;r++)o[parseInt(r.toString(),10)].appendChild(sf.base.createElement("div",{className:"e-previous-timeline",styles:"top:"+s}));for(var l=0,h=e;l<h.length;l++){var d=h[l];o[parseInt(d.toString(),10)].appendChild(sf.base.createElement("div",{className:"e-current-timeline",styles:"top:"+s}))}var c=sf.base.createElement("div",{innerHTML:this.parent.getTimeString(this.parent.getCurrentTime()),className:"e-current-time",styles:"top:"+s}),p=this.getLeftPanelElement();if(!sf.base.isNullOrUndefined(p)){var u=[].slice.call(p.querySelectorAll("tr"));n<=u.length&&(sf.base.removeClass(p.querySelectorAll(".e-hide-childs"),"e-hide-childs"),sf.base.addClass([u[parseInt(n.toString(),10)].lastElementChild],"e-hide-childs"),sf.base.prepend([c],p),c.style.top=sf.base.formatUnit(c.offsetTop-c.offsetHeight/2))}}}},t.prototype.getTopFromDateTime=function(e){var t=this.getStartHour();return(60*(e.getHours()-t.getHours())+(e.getMinutes()-t.getMinutes()))*this.getWorkCellHeight()*this.parent.activeViewOptions.timeScale.slotCount/this.parent.activeViewOptions.timeScale.interval},t.prototype.getWorkCellHeight=function(){return this.element.querySelector(".e-work-cells").offsetHeight},t.prototype.renderLayout=function(){this.element=this.parent.element.querySelector(".e-table-wrap");for(var e=0,t=[].slice.call(this.element.querySelectorAll(".e-date-header-wrap td.e-header-cells"));e<t.length;e++){var i=t[e];sf.base.EventHandler.clearEvents(i),this.wireMouseEvents(i)}for(var s=0,n=[].slice.call(this.element.querySelectorAll(".e-date-header-wrap td.e-all-day-cells"));s<n.length;s++){i=n[s];sf.base.EventHandler.clearEvents(i),this.wireCellEvents(i)}this.parent.virtualScrollModule&&this.parent.virtualScrollModule.setTranslateValue();var o=this.element.querySelector(".e-content-wrap"),r=this.element.querySelector(".e-content-table tbody");sf.base.EventHandler.clearEvents(r),this.wireCellEvents(r),sf.base.EventHandler.clearEvents(o),sf.base.EventHandler.add(o,"scroll",this.onContentScroll,this),sf.base.EventHandler.add(o,sf.base.Browser.touchMoveEvent,this.onAdaptiveMove,this),this.parent.setDimensions()},t.prototype.wireCellEvents=function(e){this.parent.isPrintSchedule||(sf.base.EventHandler.add(e,"mousedown",this.parent.workCellAction.cellMouseDown,this.parent.workCellAction),this.wireMouseEvents(e))},t.prototype.wireMouseEvents=function(e){this.parent.isPrintSchedule||(sf.base.EventHandler.add(e,"click",this.parent.workCellAction.cellClick,this.parent.workCellAction),this.parent.isAdaptive||sf.base.EventHandler.add(e,"dblclick",this.parent.workCellAction.cellDblClick,this.parent.workCellAction))},t.prototype.getLeftPanelElement=function(){return this.element.querySelector(".e-time-cells-wrap")},t.prototype.getEndDateFromStartDate=function(e){var t=6e4*this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount,i=new Date(e.getTime());return i.setMilliseconds(i.getMilliseconds()+t),i},t.prototype.destroy=function(){if(this.clearCurrentTimeIndicatorTimer(),this.parent.removeNewEventElement(),this.element){var e=this.getContentAreaElement();e&&sf.base.EventHandler.remove(e,"scroll",this.onContentScroll),this.element=null}},t}(j),U=(w=function(e,t){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}w(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),R=function(e){function t(t,i){var s=e.call(this,t)||this;s.startHour=s.parent.activeView.getStartHour(),s.endHour=s.parent.activeView.getEndHour(),s.slotCount=s.parent.activeViewOptions.timeScale.slotCount,s.interval=s.parent.activeViewOptions.timeScale.interval,s.day=0,s.rowIndex=0,s.renderType=i;var n=[].slice.call(s.parent.element.querySelectorAll(".e-content-table tbody tr"));return s.dayLength=0===n.length?0:n[0].children.length,s.content=s.parent.element.querySelector(".e-content-table"),s}return U(t,e),t.prototype.getSlotDates=function(){this.slots=[],this.slots.push(this.parent.activeView.renderDates.map((function(e){return+e}))),this.parent.activeViewOptions.headerRows.length>0&&"Hour"!==this.parent.activeViewOptions.headerRows[this.parent.activeViewOptions.headerRows.length-1].option?(this.renderType="day",this.cellWidth=Math.ceil(this.content.getBoundingClientRect().width)/this.dateRender.length,this.slotsPerDay=1):this.slotsPerDay=this.dayLength/this.dateRender.length},t.prototype.renderAppointments=function(){var e=this,t=[].slice.call(this.parent.element.querySelectorAll(".e-appointment, .e-more-indicator, .e-block-appointment, .e-block-indicator")),i=this.parent.element.querySelector(".e-work-cells");if(i){var n=this.parent.element.querySelector(".e-content-wrap");if(this.parent.options.rowAutoHeight&&(this.parent.uiStateValues.top=n.scrollTop,this.parent.uiStateValues.left=n.scrollLeft),this.removeHeightProperty("e-content-table"),t.forEach((function(t){e.removedPositionedStyles(t)})),this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){this.removeHeightProperty("e-resource-column-table");var o=[].slice.call(this.parent.element.querySelectorAll(".e-appointment-container")),r=i.getBoundingClientRect().height;o.forEach((function(e){e.style.height=r+"px"}))}var a=i.offsetParent;a&&(this.cellHeight=a.offsetHeight/a.querySelector("tbody").childElementCount,this.cellWidth=a.offsetWidth/a.querySelector("tbody tr").childElementCount);var l=s(this.parent.element.querySelector(".e-current-panel"),"e-appointment");this.dateRender=this.parent.activeView.renderDates,this.getSlotDates();for(var d=[],c=0;c<t.length;c++){var p=t[parseInt(c.toString(),10)];sf.base.removeClass([p],"e-event-action"),p.blur();var u="none"!==p.style.display;p.style.removeProperty("display");var f=b(this.getStartTime(p)),g=b(this.getEndTime(p));if(this.day=this.parent.getIndexOfDate(this.dateRender,h(new Date(f.getTime()))),this.day>=0){var m=this.getOverLapCount(p),v=this.getDataCount(p),y="true"===this.isAllDayData(p),M=this.getEventWidth(f,g,y,v);M="day"===this.renderType?M-2:M;var C=0,w=0,S=this.getPosition(f,g,!p.classList.contains("e-more-indicator")&&y,this.day);M=M<=0?this.cellWidth:M;var N=this.getGroupIndex(p),x=p.classList.contains("e-block-appointment")?0:(this.maxHeight?0:2)+m*(l+2);this.parent.options.enableRtl?w=S:C=S;var O=(m+1)*(l+2)+this.moreIndicatorHeight;if(p.classList.contains("e-more-indicator")){var E=this.cellHeight-this.moreIndicatorHeight;p.style.top=0+E+"px",p.style.width=this.cellWidth+"px",p.style.left=Math.floor(C/this.cellWidth)*this.cellWidth+"px",p.style.right=Math.floor(w/this.cellWidth)*this.cellWidth+"px"}else if(p.classList.contains("e-block-indicator"))S=Math.floor(S/this.cellWidth)*this.cellWidth+this.cellWidth-22,this.parent.options.enableRtl?p.style.right=S+"px":p.style.left=S+"px",p.style.top=0+this.cellHeight-18+"px";else if(sf.base.setStyleAttribute(p,{width:M+"px",left:C+"px",right:w+"px",top:x+"px"}),this.maxOrIndicator&&this.setMaxEventHeight(p),p.classList.contains("e-block-appointment")&&sf.base.setStyleAttribute(p,{height:this.cellHeight-1+"px"}),p.classList.contains("e-appointment")&&!u&&this.parent.eventBase.wireAppointmentEvents(p),this.parent.options.rowAutoHeight){var I=this.getFirstChild(N);sf.base.isNullOrUndefined(d[parseInt(N.toString(),10)])&&(d[parseInt(N.toString(),10)]=Math.ceil(I.getBoundingClientRect().height),p.parentElement.style.height=d[parseInt(N.toString(),10)]+"px"),this.updateCellHeight(I,O,N,d)}}}this.updateRowHeight()}},t.prototype.updateRowHeight=function(){if(this.parent.options.rowAutoHeight){this.updateBlockElements();var e=sf.base.isNullOrUndefined(this.parent.activeViewOptions.group.resources)||0===this.parent.activeViewOptions.group.resources.length,t={cssProperties:this.parent.getCssProperties(),isPreventScrollUpdate:e,scrollPosition:{left:this.parent.uiStateValues.left,top:this.parent.uiStateValues.top}};this.parent.virtualScrollModule&&this.parent.virtualScrollModule.updateVirtualScrollHeight(),this.parent.onScrollUiUpdate(t)}},t.prototype.updateBlockElements=function(){for(var e=0,t=[].slice.call(this.parent.element.querySelectorAll(".e-block-appointment"));e<t.length;e++){var i=t[e],s=parseInt(i.getAttribute("data-group-index"),10),n=this.getFirstChild(s),o=n.offsetWidth;i.style.height=n.offsetHeight+"px";var r=Math.round(i.offsetWidth/o);i.style.width=o*r+"px"}for(var a=0,l=[].slice.call(this.parent.element.querySelectorAll(".e-block-indicator"));a<l.length;a++){i=l[a],s=parseInt(i.getAttribute("data-group-index"),10);i.style.top=this.getFirstChild(s).offsetHeight-18+"px"}},t.prototype.setMaxEventHeight=function(e){sf.base.setStyleAttribute(e,{height:this.cellHeight-(this.maxHeight?0:2)-(this.maxHeight?0:this.moreIndicatorHeight)+"px"})},t.prototype.getFirstChild=function(e){var t="";return this.parent.activeViewOptions.group.resources.length>0&&(t='[data-group-index="'+e.toString()+'"]'),this.parent.element.querySelector(".e-content-table tbody td"+t)},t.prototype.updateCellHeight=function(e,t,i,s){if(t>s[parseInt(i.toString(),10)]){if(s[parseInt(i.toString(),10)]=t,sf.base.setStyleAttribute(e,{height:t+"px"}),this.parent.activeViewOptions.group.resources.length>0){var n=this.parent.element.querySelector('.e-resource-column-table tbody td[data-group-index="'+i+'"]'),o=this.parent.element.querySelector('.e-appointment-container[data-group-index="'+i+'"]');n&&sf.base.setStyleAttribute(n,{height:t+"px"}),o&&sf.base.setStyleAttribute(o,{height:t+"px"})}var r=this.parent.element.querySelector(".e-month-header-wrapper table tr:nth-child("+(e.parentElement.rowIndex+1)+") td");r&&sf.base.setStyleAttribute(r,{height:t+"px"})}},t.prototype.isAllDayData=function(e){return e.getAttribute("data-all-day")},t.prototype.getEventWidth=function(e,t,i,s){return"day"===this.renderType||i?s*this.slotsPerDay*this.cellWidth:this.isSameDay(e,t)?this.getSameDayEventsWidth(e,t):this.getSpannedEventsWidth(e,t,s)},t.prototype.getSameDayEventsWidth=function(e,t){return(g(t)-g(e))/6e4*(this.cellWidth*this.slotCount)/this.interval},t.prototype.getSpannedEventsWidth=function(e,t,i){var s,n=i*this.slotsPerDay*this.cellWidth,o=u(h(new Date(e.getTime())),this.startHour,this.endHour),r=this.getSameDayEventsWidth(o.startHour,e);if(-1===this.parent.getIndexOfDate(this.dateRender,h(new Date(t.getTime()))))s=0;else{var a=u(h(new Date(t.getTime())),this.startHour,this.endHour);s=this.getSameDayEventsWidth(t,a.endHour),s=this.slotsPerDay*this.cellWidth===s?0:s}var l=r+s;return n>l?n-l:n-r},t.prototype.isSameDay=function(e,t){return this.parent.getIndexOfDate(this.dateRender,h(new Date(e.getTime())))===this.parent.getIndexOfDate(this.dateRender,h(new Date(t.getTime())))},t.prototype.getAppointmentLeft=function(e,t,i){var s=this.isSameDay(t,e.startHour)?(g(t)-g(e.startHour))/(6e4*this.interval)*this.slotCount:0;return 0===i?s:Math.round((g(e.endHour)-g(e.startHour))/6e4/this.interval*this.slotCount)*i+s},t.prototype.getPosition=function(e,t,i,s){if("day"===this.renderType||i)return s*this.slotsPerDay*this.cellWidth;var n=u(h(new Date(this.dateRender[parseInt(s.toString(),10)].getTime())),this.startHour,this.endHour);return(n.endHour.getTime()<=t.getTime()&&n.startHour.getTime()>=e.getTime()?this.getAppointmentLeft(n,n.startHour,s):n.endHour.getTime()<=t.getTime()?this.getAppointmentLeft(n,e,s):n.startHour.getTime()>=e.getTime()?this.getAppointmentLeft(n,n.startHour,s):this.getAppointmentLeft(n,e,s))*this.cellWidth},t.prototype.getRowTop=function(e,t){return this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?t?this.parent.element.querySelector('.e-content-wrap tbody td[data-group-index="'+e.toString()+'"]').offsetTop:this.cellHeight*e:0},t.prototype.renderEvents=function(e,t,i){var s=e.data,n=e.startTime,o=e.endTime;this.dateRender=this.parent.activeView.renderDates,this.day=this.parent.getIndexOfDate(this.dateRender,h(new Date(n.getTime()))),this.rowIndex=t;var r=this.getCellTd(),a=this.eventHeight,l=s.count,d=this.getEventWidth(n,o,e.isAllDay,l);d="day"===this.renderType?d-2:d;var c=this.getPosition(n,o,e.isAllDay,this.day);d=d<=0?this.cellWidth:d;var p=2+(a+2),u=this.parent.options.enableRtl?0:c,f=this.parent.options.enableRtl?c:0,g=this.parent.inlineModule.createInlineAppointmentElement();sf.base.setStyleAttribute(g,{width:d+"px",left:u+"px",right:f+"px",top:p+"px"}),this.renderEventElement(g,r)},t.prototype.getCellTd=function(){var e=this.parent.uiStateValues.isGroupAdaptive?0:this.rowIndex;return this.eventContainers[parseInt(e.toString(),10)]},t}(k),H=(S=function(e,t){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}S(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Y=function(e){function t(t){var i=e.call(this,t)||this;return i.baseCssClass="e-timeline-view",i}return H(t,e),t.prototype.getLeftPanelElement=function(){return this.element.querySelector(".e-resource-column-wrap")},t.prototype.scrollTopPanel=function(t){e.prototype.scrollTopPanel.call(this,t),this.scrollHeaderLabels(t)},t.prototype.scrollToWorkHour=function(){var e=this.parent.getStartEndTime(this.parent.options.workHours.start),t=this.isWorkDay(this.parent.options.selectedDate)&&this.parent.options.workHours.highlight&&!sf.base.isNullOrUndefined(e)?new Date(+this.parent.options.selectedDate).setHours(e.getHours(),e.getMinutes(),0,0):new Date(+this.parent.options.selectedDate).setHours(0,0,0,0),i=this.getScrollableElement(t);sf.base.isNullOrUndefined(i)&&(e=this.parent.getStartEndTime(this.parent.activeViewOptions.startHour),t=new Date(+this.parent.options.selectedDate).setHours(e.getHours(),e.getMinutes(),0,0),i=this.getScrollableElement(t)),i&&(this.getContentAreaElement().scrollLeft=this.parent.options.enableRtl?-(this.parent.getContentTable().offsetWidth-i.offsetLeft-i.offsetWidth):i.offsetLeft)},t.prototype.getScrollableElement=function(e){var t='[data-date="'+this.parent.getMsFromDate(new Date(e))+'"]';return this.element.querySelector(t)},t.prototype.scrollToHour=function(e,t){var i,s,n;if(t&&(s=this.parent.getIndexOfDate(this.renderDates,this.parent.resetTime(t)))>=0&&(i=t,!sf.base.isNullOrUndefined(e))){var o=e.split(":");2===o.length&&(i=new Date(t.setHours(parseInt(o[0],10),parseInt(o[1],10),0)))}(i=sf.base.isNullOrUndefined(t)?this.parent.getStartEndTime(e):i,sf.base.isNullOrUndefined(i))||(n=sf.base.isNullOrUndefined(e)||!this.parent.activeViewOptions.timeScale.enable?s*this.getWorkCellWidth():sf.base.isNullOrUndefined(t)?this.getLeftFromDateTime(null,i):this.getLeftFromDateTime([s],i),this.getContentAreaElement().scrollLeft=this.parent.options.enableRtl?-n:n)},t.prototype.changeCurrentTimePosition=function(){if(!this.parent.isDestroyed){this.removeCurrentTimeIndicatorElements();var e=this.getCurrentTimeIndicatorIndex(),t=this.getLeftFromDateTime(e,this.parent.getCurrentTime()),i=this.element.querySelector(".e-content-table").offsetHeight,s=this.element.querySelector(".e-date-header-wrap");if(this.element.querySelector(".e-content-wrap").appendChild(sf.base.createElement("div",{className:"e-current-timeline",styles:(this.parent.options.enableRtl?"right":"left")+":"+sf.base.formatUnit(t)+"; height:"+sf.base.formatUnit(i)})),this.parent.virtualScrollModule){var n=this.parent.element.querySelector(".e-current-timeline"),o=this.parent.element.querySelector(".e-content-wrap table");sf.base.setStyleAttribute(n,{transform:o.style.transform})}var r=sf.base.createElement("div",{innerHTML:this.parent.getTimeString(this.parent.getCurrentTime()),className:"e-current-time"});s.appendChild(r),r.style[this.parent.options.enableRtl?"right":"left"]=sf.base.formatUnit(t-r.offsetWidth/2)}},t.prototype.getLeftFromDateTime=function(e,t){var i=this.getStartHour(),s=this.getEndHour(),n=0,o=60*(t.getHours()-i.getHours())+(t.getMinutes()-i.getMinutes());if(!sf.base.isNullOrUndefined(e)){var r=0===s.getHours()?24:s.getHours();0!==e[0]&&(n=e[0]*(60*(r-i.getHours()))+(s.getMinutes()-i.getMinutes())),o=n+o}return o*this.getWorkCellWidth()*this.parent.activeViewOptions.timeScale.slotCount/this.parent.activeViewOptions.timeScale.interval},t.prototype.getWorkCellWidth=function(){return this.element.querySelector(".e-work-cells").getBoundingClientRect().width},t.prototype.getCurrentTimeIndicatorIndex=function(){var e=[],t=this.parent.getIndexOfDate(this.renderDates,this.parent.resetTime(this.parent.getCurrentTime()));return t>=0&&e.push(t),e},t.prototype.renderEvents=function(){},t.prototype.onDataReady=function(){(this.removeVirtualMask(),this.parent.activeViewOptions.timeScale.enable)?new R(this.parent,"hour").renderAppointments():new R(this.parent,"day").renderAppointments()},t}(B),F=(N=function(e,t){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}N(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),q=function(e){function t(t){var i=e.call(this,t)||this;return i.dayNameFormat="wide",i.isInverseTableSelect=!1,i.allDayLevel=0,i}return F(t,e),t.prototype.onDataReady=function(e){if("MonthAgenda"!==this.parent.options.currentView){var t=new k(this.parent);this.removeVirtualMask(),t.renderAppointments()}else this.parent.eventBase.removeSelectedAppointmentClass()},t.prototype.onContentScroll=function(e){this.parent.removeNewEventElement(),this.parent.onVirtualScroll(),this.scrollTopPanel(e.target),this.scrollLeftPanel(e.target),this.parent.uiStateValues.top=e.target.scrollTop,this.parent.uiStateValues.left=e.target.scrollLeft,this.parent.setPersistence()},t.prototype.scrollLeftPanel=function(e){var t=this.getLeftPanelElement();t&&(t.scrollTop=e.scrollTop)},t.prototype.getLeftPanelElement=function(){return this.element.querySelector(".e-week-number-wrapper")},t.prototype.onScrollUiUpdate=function(e){var t=this.getHeaderBarHeight(),i=this.getDatesHeaderElement(),s=this.getContentAreaElement(),n=this.parent.element.offsetHeight-t-i.offsetHeight,o=this.getLeftPanelElement();"auto"!==this.parent.options.height?this.setContentHeight(s,o,n):(s.style.height="auto",o&&(o.style.height="auto"));var r=f();if(i.firstElementChild.style[e.cssProperties.rtlBorder]="",i.style[e.cssProperties.rtlPadding]="",s.offsetWidth-s.clientWidth>0?(i.firstElementChild.style[e.cssProperties.border]=r>0?"1px":"0px",i.style[e.cssProperties.padding]=r>0?r-1+"px":"0px"):(i.firstElementChild.style[e.cssProperties.border]="",i.style[e.cssProperties.padding]=""),this.setColWidth(s),e.scrollPosition||!e.isPreventScrollUpdate&&"TimelineMonth"===this.parent.options.currentView){var a="TimelineMonth"===this.parent.options.currentView?this.parent.uiStateValues.top:e.scrollPosition.top;o&&(o.scrollTop=a),s.scrollTop=a,this.parent.uiStateValues.isInitial?(this.scrollToSelectedDate(),this.parent.uiStateValues.isInitial=!1):s.scrollLeft="TimelineMonth"===this.parent.options.currentView?this.parent.uiStateValues.left:e.scrollPosition.left}else this.scrollToSelectedDate();this.retainScrollPosition()},t.prototype.scrollToSelectedDate=function(){var e=this.element.querySelector('.e-header-cells[data-date="'+this.parent.getMsFromDate(this.parent.options.selectedDate)+'"]'),t=this.getContentAreaElement();sf.base.isNullOrUndefined(e)?t.scrollLeft=0:t.scrollLeft=this.parent.options.enableRtl?-(this.parent.getContentTable().offsetWidth-e.offsetLeft-e.offsetWidth):e.offsetLeft,0===t.scrollLeft&&this.parent.uiStateValues.isInitial&&(this.parent.uiStateValues.left=0)},t.prototype.setContentHeight=function(e,t,i){e.style.height="auto","Month"===this.parent.options.currentView&&(e.style.height=sf.base.formatUnit(i)),t&&("MonthAgenda"===this.parent.options.currentView&&(i=this.element.querySelector(".e-content-table").offsetHeight),t.style.height="auto",t.style.height=sf.base.formatUnit(i-this.getScrollXIndent(e)))},t.prototype.renderLayout=function(){"Month"!==this.parent.options.currentView&&"MonthAgenda"!==this.parent.options.currentView||(this.parent.eventBase&&this.parent.eventBase.removeHeightProperty("e-content-table"),"Month"===this.parent.options.currentView&&this.parent.element.querySelector(".e-week-number-wrapper")&&[].slice.call(this.parent.element.querySelectorAll(".e-week-number")).forEach((function(e){e.style.height=""})));this.element=this.parent.element.querySelector(".e-table-wrap");for(var e=0,t=[].slice.call(this.element.querySelectorAll(".e-date-header-wrap td.e-header-cells"));e<t.length;e++){var i=t[e];sf.base.EventHandler.clearEvents(i),this.wireCellEvents(i)}var s=this.element.querySelector(".e-content-table tbody");sf.base.EventHandler.clearEvents(s),this.wireCellEvents(s),this.parent.virtualScrollModule&&this.parent.virtualScrollModule.setTranslateValue();var n=this.element.querySelector(".e-content-wrap");sf.base.EventHandler.clearEvents(n),sf.base.EventHandler.add(n,"scroll",this.onContentScroll,this),this.renderAppointmentContainer(),this.parent.setDimensions(),this.parent.uiStateValues.isCustomMonth&&(this.parent.uiStateValues.isCustomMonth=!1)},t.prototype.wireCellEvents=function(e){this.parent.isPrintSchedule||(sf.base.EventHandler.add(e,"mousedown",this.parent.workCellAction.cellMouseDown,this.parent.workCellAction),sf.base.EventHandler.add(e,"click",this.parent.workCellAction.cellClick,this.parent.workCellAction),this.parent.isAdaptive||sf.base.EventHandler.add(e,"dblclick",this.parent.workCellAction.cellDblClick,this.parent.workCellAction))},t.prototype.renderAppointmentContainer=function(){},t.prototype.getMonthStart=function(e){var t=r(this.parent.uiStateValues.isCustomMonth&&"Month"===this.parent.options.currentView&&!sf.base.isNullOrUndefined(this.parent.activeViewOptions.displayDate)?new Date(this.parent.activeViewOptions.displayDate):!this.parent.uiStateValues.isCustomMonth&&this.isCustomMonth()?e:a(e),this.parent.activeViewOptions.firstDayOfWeek);return new Date(t.getFullYear(),t.getMonth(),t.getDate())},t.prototype.getMonthEnd=function(e){return this.isCustomMonth()?c(this.getMonthStart(e),7*(this.parent.activeViewOptions.numberOfWeeks>0?this.parent.activeViewOptions.numberOfWeeks:6)-1):c(r(l(p(e,this.parent.activeViewOptions.interval-1)),this.parent.activeViewOptions.firstDayOfWeek),6)},t.prototype.getRenderDates=function(e){var t=[],i=h(this.parent.options.selectedDate),s=this.getMonthStart(i),n=this.getMonthEnd(i);do{(this.parent.activeViewOptions.showWeekend||this.isWorkDay(s,e))&&t.push(s),s=c(s,1)}while(s.getTime()<=n.getTime());return e||(this.renderDates=t),t},t.prototype.isCustomMonth=function(){return"Month"===this.parent.options.currentView&&(!sf.base.isNullOrUndefined(this.parent.activeViewOptions.displayDate)||this.parent.activeViewOptions.numberOfWeeks>0)},t.prototype.getEndDateFromStartDate=function(e){return c(new Date(e.getTime()),1)},t.prototype.destroy=function(){this.parent.isDestroyed||(this.parent.removeNewEventElement(),this.element=null)},t}(j),V=(x=function(e,t){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}x(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),W=function(e){function t(t){return e.call(this,t)||this}return V(t,e),t.prototype.renderAppointmentContainer=function(){"auto"!==this.getContentAreaElement().style.height&&this.setEventWrapperHeight()},t.prototype.setEventWrapperHeight=function(){var e=this.getHeaderBarHeight(!0),t=this.getContentAreaElement().firstElementChild,i=this.element.querySelector(".e-date-header-wrap"),s=this.parent.element.offsetHeight-e-i.offsetHeight-t.offsetHeight,n=this.element.querySelector(".e-wrapper-container"),o=this.element.querySelector(".e-appointment-wrap");"auto"!==this.parent.options.height&&(n.style.height=o.style.height=sf.base.formatUnit(s))},t}(q),_=(O=function(e,t){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}O(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Q=function(e){function t(t){var i=e.call(this,t)||this;return i.isInverseTableSelect=!0,i}return _(t,e),t.prototype.onDataReady=function(e){var t=new R(this.parent,"day");this.removeVirtualMask(),t.renderAppointments()},t.prototype.getLeftPanelElement=function(){return this.element.querySelector(".e-resource-column-wrap")},t.prototype.scrollTopPanel=function(t){e.prototype.scrollTopPanel.call(this,t),this.scrollHeaderLabels(t)},t.prototype.setContentHeight=function(e,t,i){t&&(t.style.height=sf.base.formatUnit(i-this.getScrollXIndent(e))),e.style.height=sf.base.formatUnit(i)},t.prototype.getMonthStart=function(e){var t=a(h(e));return new Date(t.getFullYear(),t.getMonth(),t.getDate())},t.prototype.getMonthEnd=function(e){var t=a(h(e));return l(p(new Date(+t),this.parent.activeViewOptions.interval-1))},t}(q),X=(E=function(e,t){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}E(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),G=function(e){function t(t){var i=e.call(this,t)||this;return i.isInverseTableSelect=!1,i}return X(t,e),t.prototype.renderLayout=function(){if(this.element=this.parent.element.querySelector(".e-table-wrap"),"TimelineYear"===this.parent.options.currentView){var e="Horizontal"===this.parent.activeViewOptions.orientation,t=this.parent.activeViewOptions.group.resources.length>0;this.isInverseTableSelect=!(e&&!t);for(var i=0,s=[].slice.call(this.element.querySelectorAll(".e-work-cells:not(.e-other-month)"));i<s.length;i++){var n=s[i];sf.base.EventHandler.clearEvents(n),this.wireEvents(n,"cell")}this.parent.virtualScrollModule&&!e&&this.parent.virtualScrollModule.setTranslateValue()}this.wireEvents(this.element.querySelector(".e-content-wrap"),"scroll"),this.parent.setDimensions()},t.prototype.onContentScroll=function(e){var t=e.target;this.parent.onVirtualScroll(),sf.base.isNullOrUndefined(this.element)&&(this.element=t);var i=this.getDatesHeaderElement();i&&(i.firstElementChild.scrollLeft=t.scrollLeft);var s=this.element.querySelector(".e-month-header-wrapper,.e-resource-column-wrap");s&&(s.scrollTop=t.scrollTop),this.parent.isAdaptive||(this.parent.uiStateValues.top=e.target.scrollTop),this.parent.uiStateValues.left=e.target.scrollLeft,this.parent.setPersistence()},t.prototype.onScrollUiUpdate=function(e){var t=this.parent.element.offsetHeight-this.getHeaderBarHeight(),i=this.element.querySelector(".e-date-header-container");i&&(t-=i.offsetHeight);var s=this.element.querySelector(".e-content-wrap"),n=this.element.querySelector(".e-month-header-wrapper,.e-resource-column-wrap"),o="auto"===this.parent.options.height;if(s&&(s.style.height=o?"auto":sf.base.formatUnit(t)),n&&(n.style.height=o?"auto":sf.base.formatUnit(t-this.getScrollXIndent(s))),!this.parent.isAdaptive&&i){var r=f();s.offsetWidth-s.clientWidth>0?(i.firstElementChild.style[e.cssProperties.border]=r>0?"1px":"0px",i.style[e.cssProperties.padding]=r>0?r-1+"px":"0px"):(i.firstElementChild.style[e.cssProperties.border]="",i.style[e.cssProperties.padding]="")}this.resetColWidth(),this.setColWidth(this.getContentAreaElement()),e.isPreventScrollUpdate||(this.parent.uiStateValues.isInitial?(this.parent.uiStateValues.isInitial=!1,this.parent.uiStateValues.top=this.parent.uiStateValues.left=0):(n&&(n.scrollTop=this.parent.uiStateValues.top),s.scrollTop=this.parent.uiStateValues.top,s.scrollLeft=this.parent.uiStateValues.left)),this.retainScrollPosition()},t.prototype.onDataReady=function(){if(this.removeVirtualMask(),"TimelineYear"===this.parent.options.currentView){var e=this.parent.options.rowAutoHeight&&this.parent.options.ignoreWhitespace?0:19;this.element=this.parent.element.querySelector(".e-table-wrap"),this.removeCellHeight();var t=this.element.querySelector(".e-work-cells:not(.e-other-month)"),i=0,n=0,o=t.offsetParent;o&&(i=o.offsetHeight/o.querySelector("tbody").childElementCount,n=o.offsetWidth/o.querySelector("tbody tr").childElementCount);var r=[].slice.call(this.parent.element.querySelectorAll(".e-appointment-container")),a=[].slice.call(o.querySelectorAll("tbody tr"));r.forEach((function(e,t){e.classList.contains("e-hidden")?e.removeAttribute("style"):e.style.height=a[parseInt(t.toString(),10)].getBoundingClientRect().height+"px"}));for(var l=t.querySelector(".e-date-header"),h=sf.base.isNullOrUndefined(l)?0:m(l),d=s(this.element.querySelector(".e-event-table"),"e-appointment"),c=void 0,p=void 0,u=[],f=void 0,g=this.element.querySelectorAll(".e-appointment, .e-more-indicator"),v=0;v<g.length;v++){var b=g[parseInt(v.toString(),10)];sf.base.removeClass([b],"e-event-action");var y="none"!==b.style.display;b.style.removeProperty("display"),b.blur();var M=void 0,C=void 0,w=void 0,S=void 0;if(M=null!=this.parent.activeViewOptions.group.resources&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?this.element.querySelector('.e-work-cells[data-date="'+b.getAttribute("data-date")+'"][data-group-index="'+b.getAttribute("data-group-index")+'"]'):this.element.querySelector('.e-work-cells[data-date="'+b.getAttribute("data-date")+'"]'),this.parent.options.enableRtl?p=M.cellIndex*n:c=M.cellIndex*n,!sf.base.isNullOrUndefined(M)){if(b.classList.contains("e-appointment")){var N=parseInt(b.getAttribute("data-index"),10);C=h+d*N+2,this.parent.options.rowAutoHeight||(w=this.parent.options.enableMaxHeight&&!this.parent.options.enableIndicator?i-h-2:this.parent.options.enableMaxHeight&&this.parent.options.enableIndicator?i-h-e:d),S=n-2,y||this.parent.eventBase.wireAppointmentEvents(b);var x=(N+1)*d+(0!==e?e:2)+h;if(this.parent.options.rowAutoHeight&&i<x){var O=M.parentNode,E=O.sectionRowIndex;sf.base.isNullOrUndefined(u[parseInt(E.toString(),10)])&&(u[parseInt(E.toString(),10)]=Math.ceil(O.getBoundingClientRect().height),b.parentElement.style.height=u[parseInt(E.toString(),10)]+"px"),this.updateCellHeight(M,x,E,u)}}else sf.base.isNullOrUndefined(f)&&(f=b.getBoundingClientRect().height),C=i-f,S=n-2;b.style.width=S+"px",b.style.height=w+"px",b.style.right=p+"px",b.style.left=c+"px",b.style.top=C+"px"}}this.updateRowHeight()}},t.prototype.updateRowHeight=function(){if(this.parent.options.rowAutoHeight){var e={cssProperties:this.parent.getCssProperties(),isPreventScrollUpdate:!0,scrollPosition:{left:this.parent.uiStateValues.left,top:this.parent.uiStateValues.top}};this.parent.virtualScrollModule&&this.parent.virtualScrollModule.updateVirtualScrollHeight(),this.parent.onScrollUiUpdate(e)}},t.prototype.updateCellHeight=function(e,t,i,s){if(t>s[parseInt(i.toString(),10)]){s[parseInt(i.toString(),10)]=t,sf.base.setStyleAttribute(e.parentElement.querySelector("td"),{height:t+"px"});var n=[].slice.call(this.parent.element.querySelectorAll(".e-event-table .e-event-container"));if(sf.base.setStyleAttribute(n[parseInt(i.toString(),10)],{height:t+"px"}),this.parent.activeViewOptions.group.resources.length>0){var o=this.parent.element.querySelector('.e-resource-column-table tbody td[data-group-index="'+e.getAttribute("data-group-index")+'"]');o&&sf.base.setStyleAttribute(o,{height:t+"px"})}var r=this.parent.element.querySelector(".e-month-header-wrapper table tr:nth-child("+(e.parentElement.rowIndex+1)+") td");r&&sf.base.setStyleAttribute(r,{height:t+"px"})}},t.prototype.removeCellHeight=function(){for(var e=0,t=[].slice.call(this.element.querySelectorAll(".e-month-header-wrapper tbody tr,.e-resource-column-table tbody tr,.e-content-table tbody tr"));e<t.length;e++){t[e].firstElementChild.style.height=""}},t.prototype.getStartDate=function(){return new Date(this.parent.options.selectedDate.getFullYear(),this.parent.activeViewOptions.firstMonthOfYear-1,1)},t.prototype.getEndDate=function(){return c(p(this.getStartDate(),this.parent.activeViewOptions.monthsCount),-1)},t.prototype.getEndDateFromStartDate=function(e){var t=new Date(e.getTime());return this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(t=l(t)),c(new Date(t.getTime()),1)},t.prototype.wireEvents=function(e,t){this.parent.isPrintSchedule||("cell"===t?"TimelineYear"===this.parent.options.currentView&&(sf.base.EventHandler.add(e,"mousedown",this.parent.workCellAction.cellMouseDown,this.parent.workCellAction),sf.base.EventHandler.add(e,"click",this.parent.workCellAction.cellClick,this.parent.workCellAction),this.parent.isAdaptive||sf.base.EventHandler.add(e,"dblclick",this.parent.workCellAction.cellDblClick,this.parent.workCellAction)):sf.base.EventHandler.add(e,"scroll",this.onContentScroll,this))},t.prototype.scrollToDate=function(e){var t=this.parent.getMsFromDate(new Date(h(new Date(+e)).getTime()));if("TimelineYear"===this.parent.options.currentView){if(null!==this.parent.activeViewOptions.group.resources&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive){var i=a(new Date(+e));t=+this.parent.getMsFromDate(new Date(h(new Date(+i)).getTime()))}if(o=this.element.querySelector('[data-date="'+t+'"]')){var s=this.getContentAreaElement();if(this.parent.options.enableRtl){var n=this.element.querySelector(".e-content-table");s.scrollLeft=-(n.offsetWidth-o.offsetLeft-o.offsetWidth)}else s.scrollLeft=o.offsetLeft;s.scrollTop=o.offsetTop}}else{var o;(o=this.element.querySelector('.e-work-cells:not(.e-other-month)[data-date="'+t+'"]'))&&(o=sf.base.closest(o,".e-month-calendar"),this.getContentAreaElement().scrollTop=o.offsetTop)}},t.prototype.destroy=function(){this.parent.isDestroyed||this.element&&(this.element=null)},t}(j),K=(I=function(e,t){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}I(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Z=function(e){function t(t){var i=e.call(this,t)||this;return i.viewClass="e-agenda-view",i.isInverseTableSelect=!1,i.translateY=0,i.itemCount=0,i.elementHeight=70,i.bufferCount=3,i.renderedCount=10,i}return K(t,e),t.prototype.renderLayout=function(){this.element=this.parent.element.querySelector(".e-table-wrap"),this.parent.isPrintSchedule||this.wireEvents(),this.parent.setDimensions()},t.prototype.onDataReady=function(e,t,i){if(this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.options.enablePersistence)this.retainScrollPosition();else if(this.parent.activeViewOptions.allowVirtualScrolling){var s=this.element.querySelector(".e-virtual-track");s||(s=sf.base.createElement("div",{className:"e-virtual-track"}));var n=this.element.querySelector(".e-content-wrap");s.style.height=t*this.elementHeight-n.offsetHeight+"px",n.appendChild(s),i&&(n.scrollTop=this.translateY=0,this.setTranslate(n)),this.itemCount=t}},t.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element.querySelector(".e-content-wrap"),"scroll",this.agendaScrolling,this)},t.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element.querySelector(".e-content-wrap"),"scroll",this.agendaScrolling)},t.prototype.agendaScrolling=function(){if(this.parent.onClosePopup(),this.parent.activeViewOptions.allowVirtualScrolling){var e=this.element.querySelector(".e-content-wrap"),t=this.element.querySelector(".e-agenda-item");this.elementHeight=t?t.offsetHeight:this.elementHeight;var i=void 0;e.scrollTop-this.translateY<0?(i=~~(e.scrollTop/this.elementHeight),this.translateY=e.scrollTop,this.setTranslate(e),this.beforeInvoke(i)):e.scrollTop-this.translateY>this.elementHeight*this.bufferCount&&(i=(i=~~(e.scrollTop/this.elementHeight))>this.itemCount?this.itemCount-this.renderedCount:i,this.translateY=e.scrollTop,this.translateY>this.itemCount*this.elementHeight-this.renderedCount*this.elementHeight&&(this.translateY=this.itemCount*this.elementHeight-this.renderedCount*this.elementHeight),this.setTranslate(e),this.beforeInvoke(i))}this.parent.setPersistence()},t.prototype.beforeInvoke=function(e){var t=this;window.clearTimeout(this.timeValue),this.timeValue=window.setTimeout((function(){t.triggerScrolling(e)}),100)},t.prototype.triggerScrolling=function(e){this.parent.dotNetRef.invokeMethodAsync("AgendaScroll",e)},t.prototype.setTranslate=function(e){sf.base.setStyleAttribute(e.querySelector("table"),{transform:"translateY("+this.translateY+"px)"})},t.prototype.getEndDateFromStartDate=function(e){return h(c(e,1))},t.prototype.onScrollUiUpdate=function(){var e=this.getHeaderBarHeight(),t=this.element.querySelector(".e-content-wrap");"auto"!==this.parent.options.height?t.style.height=sf.base.formatUnit(this.parent.element.offsetHeight-e):t.style.height="auto"},t.prototype.scrollToDate=function(e){var t=this.parent.getMsFromDate(new Date(h(new Date(+e)).getTime())),i=this.element.querySelector('.e-agenda-cells[data-date="'+t+'"]');i&&(this.getContentAreaElement().scrollTop=i.offsetTop)},t.prototype.destroy=function(){this.parent.isDestroyed||this.element&&(this.unWireEvents(),this.element=null)},t}(j),J=function(){function e(e){this.parent=e}return e.prototype.cellMouseDown=function(e){this.isPreventAction(e)||this.parent.onCellMouseDown(e)},e.prototype.cellClick=function(e){if(sf.base.isNullOrUndefined(this.parent.morePopup)||this.parent.morePopup.hide(),!(this.isPreventAction(e)||sf.base.closest(e.target,".e-disable-dates")||e.detail>1)){var t=sf.base.closest(e.target,".e-work-cells,.e-all-day-cells,.e-header-cells");if(!(sf.base.isNullOrUndefined(t)||t.classList.contains("e-header-cells")&&"Month"===this.parent.options.currentView)){if(!sf.base.isNullOrUndefined(sf.base.closest(e.target,".e-new-event")))return(o=sf.base.extend({},this.parent.activeCellsData,null,!0)).startTime=v(o.startTime),o.endTime=v(o.endTime),void this.parent.dotNetRef.invokeMethodAsync("OnOpenEditor",o,"Add");var i=sf.base.closest(e.target,".e-navigate"),s=this.parent.getNavigateView(),n=this.parent.options.currentView===s;if(sf.base.isNullOrUndefined(i)||n){if(this.parent.activeViewOptions.readonly&&"MonthAgenda"!==this.parent.options.currentView)return;if(this.parent.isAdaptive&&(e.target.classList.contains("e-more-indicator")||sf.base.closest(e.target,".e-more-indicator")))return;var o;if((t.classList.contains("e-work-cells")||t.classList.contains("e-all-day-cells"))&&e.shiftKey&&1===e.which&&this.parent.keyboardInteractionModule)return void this.parent.keyboardInteractionModule.onMouseSelection(e);this.parent.activeCellsData=this.parent.getCellDetails(t),this.parent.currentCell=t,(o=sf.base.extend({},this.parent.activeCellsData,{cancel:!1,mouseEventArgs:this.parent.eventBase.getMouseEvent(e),name:"cellClick"},!0)).startTime=v(o.startTime),o.endTime=v(o.endTime),this.parent.dotNetRef.invokeMethodAsync("TriggerCellClick",o)}else{var r=this.parent.getDateFromElement(t);if(!sf.base.isNullOrUndefined(r)&&!this.parent.isAdaptive){var a=new Date(this.parent.getMsFromDate(r));sf.base.isNullOrUndefined(this.parent.morePopup)||this.parent.morePopup.hide(),this.parent.dotNetRef.invokeMethodAsync("OnViewNavigate",a,this.parent.getNavigateView())}}}}},e.prototype.cellDblClick=function(e){if(!(this.parent.activeViewOptions.readonly||this.isPreventAction(e)||sf.base.closest(e.target,".e-disable-dates"))){var t=sf.base.extend({},this.parent.activeCellsData,{cancel:!1,mouseEventArgs:this.parent.eventBase.getMouseEvent(e),name:"OnCellDoubleClick"},!0);t.startTime=v(t.startTime),t.endTime=v(t.endTime),this.parent.dotNetRef.invokeMethodAsync("OnOpenEditor",t,"Add")}},e.prototype.isPreventAction=function(e){if(sf.base.closest(e.target,".e-navigate"))return!1;if(sf.base.closest(e.target,".e-appointment-wrapper")&&!sf.base.closest(e.target,".e-more-indicator"))return!0;var t=sf.base.closest(e.target,".e-appointment");return!sf.base.isNullOrUndefined(t)||(t=sf.base.closest(e.target,".e-header-cells"),!(!this.parent.isTimelineView()||sf.base.isNullOrUndefined(t)))},e}(),$=function(){function i(e){this.selectedCells=[],this.keyConfigs={downArrow:"downarrow",upArrow:"uparrow",rightArrow:"rightarrow",leftArrow:"leftarrow",shiftDownArrow:"shift+downarrow",shiftUpArrow:"shift+uparrow",shiftRightArrow:"shift+rightarrow",shiftLeftArrow:"shift+leftarrow",ctrlLeftArrow:"ctrl+leftarrow",ctrlRightArrow:"ctrl+rightarrow",altOne:"alt+1",altTwo:"alt+2",altThree:"alt+3",altFour:"alt+4",altFive:"alt+5",altSix:"alt+6",altSeven:"alt+7",altEight:"alt+8",altNine:"alt+9",altT:"alt+t",enter:"enter",escape:"escape",delete:"delete",backspace:"backspace",home:"home",pageUp:"pageup",pageDown:"pagedown",tab:"tab",shiftTab:"shift+tab",fTwelve:"f12"},this.parent=e,this.parent.element.tabIndex=-1===this.parent.element.tabIndex?0:this.parent.element.tabIndex,this.keyboardModule=new sf.base.KeyboardEvents(this.parent.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}return i.prototype.keyActionHandler=function(e){switch(e.action){case"downArrow":case"shiftDownArrow":this.processDown(e,e.shiftKey);break;case"altT":this.parent.options.selectedDate.getTime()!==(new Date).setHours(0,0,0,0)&&this.parent.dotNetRef.invokeMethodAsync("OnDateNavigate","Today");break;case"upArrow":case"shiftUpArrow":this.processUp(e,e.shiftKey);break;case"leftArrow":case"shiftLeftArrow":this.processLeft(e,e.shiftKey);break;case"rightArrow":case"shiftRightArrow":this.processRight(e,e.shiftKey);break;case"ctrlLeftArrow":this.parent.dotNetRef.invokeMethodAsync("OnDateNavigate","Previous");break;case"ctrlRightArrow":this.parent.dotNetRef.invokeMethodAsync("OnDateNavigate","Next");break;case"altOne":case"altTwo":case"altThree":case"altFour":case"altFive":case"altSix":case"altSeven":case"altEight":case"altNine":this.processViewNavigation(e);break;case"enter":this.processEnter(e);break;case"home":this.focusFirstCell();break;case"tab":case"shiftTab":this.processTab(e,e.shiftKey);break;case"delete":case"backspace":this.processDelete();break;case"escape":this.processEscape();break;case"fTwelve":this.parent.options.allowInline&&this.parent.inlineModule&&(e.preventDefault(),this.processFTwelve(e))}},i.prototype.processFTwelve=function(e){var t=e.target;(t.classList.contains("e-work-cells")||t.classList.contains("e-all-day-cells"))&&(this.parent.activeCellsData=this.getSelectedElements(t),this.parent.inlineModule.cellEdit()),t.classList.contains("e-appointment")&&t.click()},i.prototype.onCellMouseDown=function(e){if(!e.shiftKey&&(this.initialTarget=this.getClosestCell(e),!this.parent.activeViewOptions.readonly&&"MonthAgenda"!==this.parent.options.currentView&&this.initialTarget&&(e.target.classList.contains("e-work-cells")&&3!==e.which&&(this.parent.removeSelectedClass(),sf.base.EventHandler.add(this.parent.getContentTable(),"mousemove",this.onMouseSelection,this),sf.base.EventHandler.add(this.parent.getContentTable(),"mouseup",this.onMoveup,this)),e.target.classList.contains("e-all-day-cells")&&3!==e.which))){this.parent.removeSelectedClass();var t=this.parent.getAllDayRow();sf.base.EventHandler.add(t,"mousemove",this.onMouseSelection,this),sf.base.EventHandler.add(t,"mouseup",this.onMoveup,this)}},i.prototype.onMouseSelection=function(e){var t=[].slice.call(this.parent.element.querySelectorAll(".e-appointment"));sf.base.addClass(t,"e-allow-select");var i=this.parent.boundaryValidation(e.pageY,e.pageX);if(i.bottom||i.top||i.left||i.right){var s=this.parent.element.querySelector(".e-content-wrap"),n=s.offsetHeight<=s.scrollHeight&&s.scrollTop>=0&&s.scrollTop+s.offsetHeight<=s.scrollHeight,o=s.offsetWidth<=s.scrollWidth&&s.scrollLeft>=0&&s.scrollLeft+s.offsetWidth<=s.scrollWidth;n&&(i.top||i.bottom)&&(s.scrollTop+=i.top?-e.target.offsetHeight:e.target.offsetHeight),o&&(i.left||i.right)&&(s.scrollLeft+=i.left?-e.target.offsetWidth:e.target.offsetWidth)}var r=this.getClosestCell(e);r&&this.selectCells(!0,r)},i.prototype.getClosestCell=function(e){return sf.base.closest(e.target,".e-work-cells,.e-all-day-cells")},i.prototype.onMoveup=function(e){var t=[].slice.call(this.parent.element.querySelectorAll(".e-appointment"));if(sf.base.removeClass(t,"e-allow-select"),e.target.classList.contains("e-work-cells")&&(sf.base.EventHandler.remove(this.parent.getContentTable(),"mousemove",this.onMouseSelection),sf.base.EventHandler.remove(this.parent.getContentTable(),"mouseup",this.onMoveup)),e.target.classList.contains("e-all-day-cells")){var i=this.parent.getAllDayRow();sf.base.EventHandler.remove(i,"mousemove",this.onMouseSelection),sf.base.EventHandler.remove(i,"mouseup",this.onMoveup)}if(!this.isPreventAction(e)){var s=sf.base.closest(e.target,".e-work-cells,.e-all-day-cells,.e-header-cells");if(("TimelineYear"!==this.parent.options.currentView||!s.classList.contains("e-other-month"))&&(this.parent.activeCellsData=this.getSelectedElements(s),this.parent.options.quickInfoOnSelectionEnd&&this.parent.element.querySelectorAll(".e-selected-cell").length>1)){this.parent.currentCell=s;var n=sf.base.extend(this.parent.activeCellsData,{cancel:!1,mouseEventArgs:e,name:"cellClick"},!0);n.startTime=v(n.startTime),n.endTime=v(n.endTime),this.parent.dotNetRef.invokeMethodAsync("TriggerCellClick",n)}}},i.prototype.processEnter=function(e){if(!(this.parent.activeViewOptions.readonly&&!e.target.classList.contains("e-appointment")||this.isPreventAction(e)||"TimelineYear"===this.parent.options.currentView&&e.target.classList.contains("e-other-month"))){var t=e.target;if(sf.base.closest(t,".e-quick-popup-wrapper"))t.classList.contains("e-event-details")||t.classList.contains("e-event-create")||t.classList.contains("e-event-edit")||t.classList.contains("e-event-delete")||t.classList.contains("e-close")?(t.click(),e.preventDefault()):t.classList.contains("e-subject")&&(this.parent.element.querySelector(".e-event-create").click(),e.preventDefault());else if(t.classList.contains("e-resource-cells")&&t.classList.contains("e-parent-node")){var i=t.querySelector(".e-resource-tree-icon");i&&i.click()}else if(t.classList.contains("e-work-cells")||t.classList.contains("e-all-day-cells")){this.parent.activeCellsData=this.getSelectedElements(t),this.parent.currentCell=t;var s=sf.base.extend(this.parent.activeCellsData,{cancel:!1,mouseEventArgs:e});this.parent.options.allowInline?this.parent.inlineModule.cellEdit():(s.startTime=v(s.startTime),s.endTime=v(s.endTime),"Year"===this.parent.options.currentView?t.click():this.parent.dotNetRef.invokeMethodAsync("TriggerCellClick",s))}else if(t.classList.contains("e-inline-subject"))this.parent.inlineCrudActions(t);else if(t.classList.contains("e-appointment")||t.classList.contains("e-more-event-close")||t.classList.contains("e-all-day-appointment-section")||t.classList.contains("e-more-indicator"))t.click();else if(t.classList.contains("e-header-date")){var n=this.parent.getDateFromElement(t);return this.parent.dotNetRef.invokeMethodAsync("OnViewNavigate",new Date(this.parent.getMsFromDate(n)),this.parent.getNavigateView()),void this.processEscape()}}},i.prototype.getSelectedElements=function(e){var t;if(this.selectedCells.length>1&&e.classList.contains("e-selected-cell")){var i=this.parent.getCellDetails(this.selectedCells[0]),s=this.parent.getCellDetails(this.selectedCells.slice(-1)[0]);i.endTime=s.endTime,i.element=e,t=i}else t=this.parent.getCellDetails(e);return t},i.prototype.getCells=function(e,t,i){var s=this.parent.getContentTable(),n="TimelineYear"===this.parent.options.currentView,o=n&&!e?".e-work-cells:not(.e-other-month)":"td",r=[].slice.call(s.querySelectorAll(o)),a=s.rows.length,l=s.rows[0].cells.length;if(t.classList.contains("e-all-day-cells")){var h=this.parent.getAllDayRow();r=[].slice.call(h.cells),a=1,l=h.cells.length}var d=r.indexOf(t),c=r.indexOf(i),p=[];if(e){for(var u=0;u<l;u++)for(var f=0;f<a;f++){var g=r[l*f+u];n&&g.classList.contains("e-other-month")||p.push(g)}d=p.indexOf(t),c=p.indexOf(i)}if(d>c){var m=d;d=c,c=m}return(e?p:r).slice(d,c+1)},i.prototype.focusFirstCell=function(){if("Agenda"===this.parent.options.currentView){var e=this.parent.getContentTable().querySelector(".e-agenda-cells");return e.setAttribute("tabindex","0"),void e.focus()}if(this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.isTimelineView()&&"TimelineYear"!==this.parent.options.currentView){var t=this.parent.element.querySelector(".e-content-table tr:not(.e-hidden) .e-work-cells:not(.e-resource-group-cells)");this.selectCells(!1,t)}else if(this.parent.options.currentView.indexOf("Year")>-1){var i=".e-work-cells:not(.e-other-month):not(.e-resource-group-cells)";i+="TimelineYear"===this.parent.options.currentView&&"Vertical"===this.parent.activeViewOptions.orientation?'[data-date="'+v(this.parent.activeView.getStartDate()).getTime()+'"]':"",this.selectCells(!1,this.parent.element.querySelector(i))}else this.selectCells(!1,this.parent.getWorkCellElements()[0])},i.prototype.isInverseTableSelect=function(){return this.parent.activeView.isInverseTableSelect},i.prototype.selectCells=function(e,t){this.parent.removeSelectedClass();var i=t instanceof Array?t.slice(-1)[0]:t;if(e){var s=void 0;if(!this.parent.options.allowMultiRowSelection)if("TimelineYear"===this.parent.options.currentView&&"Horizontal"===this.parent.activeViewOptions.orientation||"Month"===this.parent.options.currentView)i="TimelineYear"===this.parent.options.currentView&&this.parent.activeViewOptions.group.resources.length>0?this.initialTarget:this.initialTarget.parentElement.children[i.cellIndex];else["Day","Week","WorkWeek","TimelineDay","TimelineWeek","TimelineWorkWeek","TimelineMonth","TimelineYear"].indexOf(this.parent.options.currentView)>-1&&(i=i.parentElement.children[this.initialTarget.cellIndex]);var n=this.getCells(this.isInverseTableSelect(),this.initialTarget,i);if(this.parent.activeViewOptions.group.resources.length>0){s=this.initialTarget.getAttribute("data-group-index");for(var o=[],r=0,a=n;r<a.length;r++){(p=a[r]).getAttribute("data-group-index")===s&&o.push(p)}n=o}if(this.parent.options.allowMultiCellSelection||(n=[this.initialTarget]),this.selectedCells=n,n.length>2&&!i.classList.contains("e-all-day-cells")){var l=this.getAllDayCells(n);if(this.parent.activeViewOptions.group.resources.length>0){for(var h=[],d=0,c=l;d<c.length;d++){var p;(p=c[d]).getAttribute("data-group-index")===s&&h.push(p)}l=h}n=n.concat(l)}i.getAttribute("data-group-index")!==s&&this.parent.activeViewOptions.group.resources.length>0&&(i=this.selectedCells[this.selectedCells.length-1]),this.parent.addSelectedClass(n,i)}else this.initialTarget=i,this.selectedCells=[i],this.parent.addSelectedClass([i],i)},i.prototype.selectAppointment=function(e,t){var i=this.getAppointmentElements();if(!(i.length<0)){var s;if(this.parent.eventBase.removeSelectedAppointmentClass(),t.classList.contains("e-appointment")){var n=i.indexOf(t);s=i[e?n-1:n+1]}else s=e?i[i.length-1]:i[0];s&&(this.parent.eventBase.addSelectedAppointments([s]),s.focus(),sf.base.addClass([s],"e-active-appointment-agenda"))}},i.prototype.selectAppointmentElementFromWorkCell=function(e,t){this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.removeSelectedClass()},i.prototype.getAllDayCells=function(e){var t=this.parent.getAllDayRow();if(!t)return[];var i=e[0],s=e[e.length-1],n=this.parent.getCellDetails(i);return this.parent.getCellDetails(s).endTime.getTime()-n.startTime.getTime()>=864e5?[].slice.call(t.cells).slice(i.cellIndex,s.cellIndex+1):[]},i.prototype.getAppointmentElements=function(){return[].slice.call(this.parent.element.querySelectorAll(".e-appointment"))},i.prototype.getAppointmentElementsByGuid=function(e){return[].slice.call(this.parent.element.querySelectorAll('div[data-guid="'+e+'"]'))},i.prototype.getUniqueAppointmentElements=function(){var e=this.getAppointmentElements(),t=[];return e.map((function(e){return e.getAttribute("data-guid")})).filter((function(i,s,n){n.indexOf(i)===s&&t.push(e[parseInt(s.toString(),10)])})),t},i.prototype.getWorkCellFromAppointmentElement=function(e){return null},i.prototype.processViewNavigation=function(e){var t=parseInt(e.key,10)-1,i=[].slice.call(this.parent.element.querySelectorAll(".e-schedule-toolbar .e-toolbar-item.e-views"));t<i.length&&i[parseInt(t.toString(),10)].click()},i.prototype.cancelUpDownAction=function(e){var t=e&&"Vertical"===this.parent.activeViewOptions.orientation,i=this.parent.activeViewOptions.group.resources.length>0;return!!(t&&i||e&&this.initialTarget&&this.initialTarget.classList.contains("e-other-month"))||!((!this.parent.isTimelineView()||e)&&"MonthAgenda"!==this.parent.options.currentView)},i.prototype.processUp=function(t,i){var s="TimelineYear"===this.parent.options.currentView;if(!(i&&this.cancelUpDownAction(s)||this.preventYearNavigation())){var n=t.target,o=this.parent.getSelectedCells(),r=this.parent.eventBase.getSelectedAppointments(),a=this.parent.element.querySelector(".e-more-popup-wrapper"),l=this.getQuickPopupElement();if(o.length>0&&!t.target.classList.contains("e-work-cells")&&(n=o[o.length-1]),r.length>0&&!a.classList.contains(e)&&!l.classList.contains(e)&&-1!==["Day","Week","WorkWeek","Month"].indexOf(this.parent.options.currentView)&&(n=this.getWorkCellFromAppointmentElement(r[r.length-1]),this.parent.eventBase.removeSelectedAppointmentClass()),n)if(n.classList.contains("e-work-cells")&&!this.parent.element.querySelector("."+e)){var h=this.parent.getTableRows(),d=h.indexOf(n.parentElement),c=void 0;if(s&&i&&0===this.parent.activeViewOptions.group.resources.length&&(c=this.isInverseTableSelect()?this.getVerticalUpDownCell(h,n,d,!0):this.getHorizontalUpDownCell(h,n,d,!0)),(d>0||c)&&d<h.length){if(c=c||h[d-1].cells[n.cellIndex],"Year"===this.parent.options.currentView&&c.classList.contains("e-other-month")){if(!(v(this.parent.activeView.getStartDate()).getTime()<+c.getAttribute("data-date")))return;c=this.getYearUpDownCell(h,d-1,n.cellIndex,!0)}this.selectCells(i,c)}}else"Agenda"!==this.parent.options.currentView&&"MonthAgenda"!==this.parent.options.currentView||this.selectAppointment(!0,n)}},i.prototype.processDown=function(t,i){var s="TimelineYear"===this.parent.options.currentView;if(!(i&&this.cancelUpDownAction(s)||this.preventYearNavigation())){var n=t.target,o=this.parent.getSelectedCells(),r=this.parent.eventBase.getSelectedAppointments(),a=this.parent.element.querySelector(".e-more-popup-wrapper"),l=this.getQuickPopupElement();o.length>0&&!t.target.classList.contains("e-work-cells")&&(n=o[o.length-1]),r.length>0&&!a.classList.contains(e)&&!l.classList.contains(e)&&-1!==["Day","Week","WorkWeek","Month"].indexOf(this.parent.options.currentView)&&(n=this.getWorkCellFromAppointmentElement(r[r.length-1]),this.parent.eventBase.removeSelectedAppointmentClass());var h=this.parent.getTableRows();if(n)if(n.classList.contains("e-work-cells")&&!this.parent.element.querySelector("."+e)){var d=h.indexOf(n.parentElement),c=void 0;if(s&&i&&0===this.parent.activeViewOptions.group.resources.length&&(c=this.isInverseTableSelect()?this.getVerticalUpDownCell(h,n,d,!1):this.getHorizontalUpDownCell(h,n,d,!1)),d>=0&&(d<h.length-1||c)){if(c=c||h[d+1].cells[n.cellIndex],"Year"===this.parent.options.currentView&&c.classList.contains("e-other-month")){if(!(v(this.parent.activeView.getEndDate()).getTime()>+c.getAttribute("data-date")))return;c=this.getYearUpDownCell(h,d+1,n.cellIndex,!1)}this.selectCells(i,c)}}else"Agenda"!==this.parent.options.currentView&&"MonthAgenda"!==this.parent.options.currentView||this.selectAppointment(!1,n)}},i.prototype.getYearUpDownCell=function(e,t,i,s){for(;e[parseInt(t.toString(),10)]&&e[parseInt(t.toString(),10)].cells[parseInt(i.toString(),10)].classList.contains("e-other-month");)t+=s?-1:1;return e[parseInt(t.toString(),10)].cells[parseInt(i.toString(),10)]},i.prototype.getHorizontalUpDownCell=function(e,t,i,s){var n=e[i+(s?-1:1)],o=n?n.cells[t.cellIndex]:t;if(o.classList.contains("e-other-month")){var r=n.querySelector(".e-work-cells:not(.e-other-month)"),a='[data-date="'+v(l(new Date(+r.getAttribute("data-date")))).getTime()+'"]';o=o.cellIndex<r.cellIndex?r:n.querySelector(a)}return o},i.prototype.getVerticalUpDownCell=function(e,t,i,s){var n=s&&i>0||!s&&i<e.length-1?e[i+(s?-1:1)].cells[t.cellIndex]:void 0;if(!n||n.classList.contains("e-other-month")){if(e[parseInt(i.toString(),10)].cells[t.cellIndex-(s?1:-1)]){var o=+t.getAttribute("data-date")-(s?864e5:-864e5);return this.parent.getContentTable().querySelector('.e-work-cells[data-date="'+o+'"]')}n=t}return n},i.prototype.processLeftRight=function(e){var t="Year"===this.parent.options.currentView?e.closest("tbody"):this.parent.getContentTable(),i=e.parentNode.sectionRowIndex;return{element:t,rowIndex:i,columnIndex:e.cellIndex,maxIndex:t.rows[parseInt(i.toString(),10)].cells.length}},i.prototype.getQuickPopupElement=function(){return(this.parent.isAdaptive?document.body:this.parent.element).querySelector(".e-quick-popup-wrapper")},i.prototype.isCancelLeftRightAction=function(t,i,s){var n="MonthAgenda"===this.parent.options.currentView||s&&this.initialTarget&&this.initialTarget.classList.contains("e-other-month");if("Agenda"===this.parent.options.currentView||i&&n||this.preventYearNavigation())return!0;if(this.isPreventAction(t)&&i)return!0;var o=this.parent.element.querySelector(".e-more-popup-wrapper"),r=this.getQuickPopupElement();return!(!o.classList.contains(e)&&!r.classList.contains(e))},i.prototype.processRight=function(e,t){var i="TimelineYear"===this.parent.options.currentView;if(!this.isCancelLeftRightAction(e,t,i)){var s,n=this.parent.getSelectedCells(),o=this.parent.eventBase.getSelectedAppointments(),r=e.target;if(n.length>0&&!r.classList.contains("e-work-cells")&&!r.classList.contains("e-all-day-cells")&&(r=n[n.length-1]),!(o.length>0)||(r=this.getWorkCellFromAppointmentElement(o[o.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),r))if(r.classList.contains("e-work-cells")&&e.target.classList.contains("e-work-cells")){var a=this.processLeftRight(r),h=new Date(+r.getAttribute("data-date")),d="Year"===this.parent.options.currentView&&h.getTime()===v(l(h)).getTime();if(a.columnIndex>=0&&a.columnIndex<a.maxIndex-1&&!d)s=this.calculateNextPrevDate(r,a.element.rows[a.rowIndex].cells[r.cellIndex+1],"right"),i&&t&&s.classList.contains("e-other-month")&&(s=this.getTimelineYearTargetCell(a,r,!0)),sf.base.isNullOrUndefined(s)||this.selectCells(t,s);else if(a.columnIndex===a.maxIndex-1||d)if(!this.isInverseTableSelect()&&a.rowIndex<a.element.rows.length-1&&!d){s=this.calculateNextPrevDate(r,a.element.rows[a.rowIndex+1].cells[0],"right");var c=i&&t&&s.classList.contains("e-other-month");s=c?this.getHorizontalLeftRightCell(a,r,!0):s,sf.base.isNullOrUndefined(s)||this.selectCells(t,s)}else if(!t&&d&&h.getTime()!==v(this.parent.activeView.getEndDate()).getTime())return void this.selectCells(t,this.parent.element.querySelector(':not(.e-other-month)[data-date="'+(h.getTime()+864e5)+'"]'))}else if(r.classList.contains("e-all-day-cells")){var p=r.cellIndex,u=this.parent.getAllDayRow(),f=u.cells.length;p>=0&&p<f-1&&this.selectCells(t,u.cells[p+1])}}},i.prototype.processLeft=function(e,t){var i="TimelineYear"===this.parent.options.currentView;if(!this.isCancelLeftRightAction(e,t,i)){var s,n=e.target,o=this.parent.getSelectedCells();o.length>0&&!n.classList.contains("e-work-cells")&&!n.classList.contains("e-all-day-cells")&&(n=o[o.length-1]);var r=this.parent.eventBase.getSelectedAppointments();if(!(r.length>0)||(n=this.getWorkCellFromAppointmentElement(r[r.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),n))if(e.target.classList.contains("e-work-cells")&&n.classList.contains("e-work-cells")){var l=this.processLeftRight(n),h=new Date(+n.getAttribute("data-date")),d="Year"===this.parent.options.currentView&&h.getTime()===v(a(h)).getTime();if(l.columnIndex>0&&l.columnIndex<l.maxIndex&&!d)s=this.calculateNextPrevDate(n,l.element.rows[l.rowIndex].cells[n.cellIndex-1],"left"),i&&t&&s.classList.contains("e-other-month")&&(s=this.getTimelineYearTargetCell(l,n,!1)),sf.base.isNullOrUndefined(s)||this.selectCells(t,s);else if(0===l.columnIndex||d)if(!this.isInverseTableSelect()&&l.rowIndex>0){s=this.calculateNextPrevDate(n,l.element.rows[l.rowIndex-1].cells[l.maxIndex-1],"left");var c=i&&t&&s.classList.contains("e-other-month");s=c?this.getHorizontalLeftRightCell(l,n,!1):s,sf.base.isNullOrUndefined(s)||this.selectCells(t,s)}else if(!t&&d&&h.getTime()!==v(this.parent.activeView.getStartDate()).getTime())return void this.selectCells(t,this.parent.element.querySelector('[data-date="'+(h.getTime()-864e5)+'"]'))}else if(n.classList.contains("e-all-day-cells")){var p=n.cellIndex,u=this.parent.getAllDayRow(),f=u.cells.length;p>0&&p<f&&this.selectCells(t,u.cells[p-1])}}},i.prototype.preventYearNavigation=function(){return"Year"===this.parent.options.currentView&&this.initialTarget&&this.initialTarget.classList.contains("e-other-month")},i.prototype.getTimelineYearTargetCell=function(e,t,i){return this.isInverseTableSelect()?this.getVerticalLeftRightCell(t,i):this.getHorizontalLeftRightCell(e,t,i)},i.prototype.getHorizontalLeftRightCell=function(e,t,i){var s=e.element.rows[t.parentNode.sectionRowIndex+(i?1:-1)];if(s){var n=i?".e-work-cells:not(.e-other-month)":'[data-date="'+(+t.getAttribute("data-date")-864e5)+'"]';return s.querySelector(n)}return t},i.prototype.getVerticalLeftRightCell=function(e,t){var i=new Date(+e.getAttribute("data-date")),s=v(new Date(i.getFullYear(),i.getMonth()+(t?1:-1),1)),n=this.parent.getContentTable(),o=n.querySelector('[data-date="'+s.getTime()+'"]');return o.parentNode.sectionRowIndex>e.parentNode.sectionRowIndex?o:n.querySelector('[data-date="'+v(l(s)).getTime()+'"]')},i.prototype.calculateNextPrevDate=function(e,t,i){var s=this.initialTarget.getAttribute("data-group-index");if(this.parent.activeViewOptions.group.resources.length>0&&"Month"===this.parent.options.currentView&&e&&t&&t.getAttribute("data-group-index")!==s){var n=this.parent.getDateFromElement(e),o="right"===i?new Date(n.setDate(n.getDate()+1)):new Date(n.setDate(n.getDate()-1));t=[].slice.call(this.parent.element.querySelectorAll('td[data-date="'+this.parent.getMsFromDate(o).toString()+'"][data-group-index="'+s+'"]'))[0]}return t},i.prototype.getFocusableElements=function(e){return[].slice.call(e.querySelectorAll('a[href]:not([tabindex="-1"]),input:not([disabled]):not([tabindex="-1"]),textarea:not([disabled]):not([tabindex="-1"]),button:not([disabled]):not([tabindex="-1"]),select:not([disabled]):not([tabindex="-1"]),[tabindex]:not([tabindex="-1"]),[contentEditable=true]:not([tabindex="-1"])'))},i.prototype.processTabOnPopup=function(e,t){var i=this,s=this.getFocusableElements(t),n=(s=s.filter((function(e){var t=i.parent.element.querySelector(".e-popup-footer");return t&&t.offsetParent?!(e.classList.contains("e-edit")||e.classList.contains("e-delete")):!(e.classList.contains("e-event-edit")||e.classList.contains("e-event-delete"))})))[0],o=s[s.length-1];sf.base.isNullOrUndefined(o)||document.activeElement!==o||e.shiftKey||(e.preventDefault(),n.focus()),!sf.base.isNullOrUndefined(n)&&document.activeElement===n&&e.shiftKey&&(e.preventDefault(),o.focus())},i.prototype.processTab=function(t,i){var s=t.target;if(s.classList.contains("e-inline-subject")&&this.parent.inlineEdit&&(s=s.closest(".e-appointment"),this.parent.inlineCrudActions(t.target)),"TimelineYear"===this.parent.options.currentView&&s.classList.contains("e-other-month"))s.classList.contains("e-selected-cell")&&this.parent.removeSelectedClass();else{var n=sf.base.closest(s,".e-quick-popup-wrapper,.e-more-popup-wrapper");if(n&&n.classList.contains(e))return n.classList.contains("e-more-popup-wrapper")&&this.parent.eventBase.removeSelectedAppointmentClass(),void this.processTabOnPopup(t,n);if(s.classList.contains("e-resource-cells")&&this.parent.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0){var o=parseInt(s.getAttribute("data-group-index"),10),r='.e-appointment[data-group-index="'+(i?o-1:o)+'"]',a=[].slice.call(this.parent.element.querySelectorAll(r));if(a.length>0){this.parent.eventBase.removeSelectedAppointmentClass();var l=i?a.slice(-1)[0]:a[0];this.parent.eventBase.addSelectedAppointments([l]),l.focus(),t.preventDefault()}else if(o===parseInt(this.parent.element.querySelector(".e-resource-column-wrap").getAttribute("data-rendered-index"),10))this.parent.element.focus(),t.preventDefault();else if(this.parent.virtualScrollModule){var h=this.parent.element.querySelector(".e-virtual-track"),d=Math.round(h.offsetHeight/parseInt(this.parent.element.querySelector(".e-resource-column-wrap").getAttribute("data-expanded-index"),10));this.parent.element.querySelector(".e-content-wrap").scrollTop=(i?o-1:o+1)*d,this.parent.virtualScrollModule.virtualScrolling()}else this.setScrollPosition(o)}else if(s.classList.contains("e-schedule"))this.parent.eventBase.removeSelectedAppointmentClass();else if(s.classList.contains("e-appointment")){var c=[].slice.call(this.parent.element.querySelectorAll(".e-appointment")),p=this.parent.eventBase.getSelectedAppointments(),u="TimelineYear"===this.parent.options.currentView;if((this.parent.isTimelineView()&&!u||u&&"Vertical"===this.parent.activeViewOptions.orientation)&&this.parent.activeViewOptions.group.resources.length>0){o=parseInt(s.getAttribute("data-group-index"),10);c=[].slice.call(this.parent.element.querySelectorAll('.e-appointment[data-group-index="'+o+'"]'));var f='.e-resource-cells[data-group-index="'+(i?o:o+1)+'"]',g=this.parent.element.querySelector(f);if(g&&(i&&s.getAttribute("data-guid")===c[0].getAttribute("data-guid")||!i&&s.getAttribute("data-guid")===c.slice(-1)[0].getAttribute("data-guid")))return this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.virtualScrollModule?g.focus({preventScroll:!0}):g.focus(),this.parent.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&sf.base.isNullOrUndefined(this.parent.virtualScrollModule)&&this.setScrollPosition(o),void t.preventDefault()}if(p.length>0&&(s=p[p.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),!i&&s.getAttribute("data-guid")===c[c.length-1].getAttribute("data-guid")||i&&s.getAttribute("data-guid")===c[0].getAttribute("data-guid"))return;"Agenda"!==this.parent.options.currentView&&"MonthAgenda"!==this.parent.options.currentView||(this.selectAppointment(i,s),t.preventDefault())}else{var m=this.parent.getSelectedCells();if(m.length>0&&!s.classList.contains("e-appointment"))return s=m[m.length-1],this.selectAppointmentElementFromWorkCell(i,s),void t.preventDefault();s&&!s.classList.contains("e-resource-cells")&&this.parent.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&this.processTabOnResourceCells(s,i)}}},i.prototype.processDelete=function(){var e=document.activeElement;if("MonthAgenda"===this.parent.options.currentView){var i=this.parent.eventBase.getSelectedEvents().element;i&&(e=i&&sf.base.isNullOrUndefined(i.length)?i:i[0])}if(e&&e.classList.contains("e-appointment")){if(sf.base.addClass([e],t),this.parent.activeEventData=this.parent.eventBase.getSelectedEvents(),this.parent.activeViewOptions.readonly||e.classList.contains("e-read-only"))return;this.parent.dotNetRef.invokeMethodAsync("ProcessDelete",this.parent.activeEventData.guid)}},i.prototype.processEscape=function(){this.parent.onClosePopup(),this.parent.eventBase.focusElement(),this.parent.onMoreEventPopupClose(),this.parent.headerPopup&&this.parent.headerPopup.hide(),this.parent.inlineModule&&this.parent.inlineModule.removeInlineAppointmentElement()},i.prototype.isPreventAction=function(e){var t=sf.base.closest(e.target,".e-resource-group-cells");return!(!this.parent.isTimelineView()||sf.base.isNullOrUndefined(t))},i.prototype.processTabOnResourceCells=function(e,t){var i=[].slice.call(this.parent.element.querySelectorAll('[tabIndex="0"]')),s=i.indexOf(e),n=t?i[s-1]:i[s+1];if(n&&n.classList.contains("e-resource-cells")){var o=parseInt(n.getAttribute("data-group-index"),10);if(this.parent.virtualScrollModule){var r=this.parent.element.querySelector(".e-resource-column-wrap");[].slice.call(this.parent.element.querySelectorAll(".e-resource-cells")).forEach((function(e){e.getBoundingClientRect().top<r.getBoundingClientRect().top&&e.setAttribute("tabindex","-1")}))}else this.setScrollPosition(o)}},i.prototype.setScrollPosition=function(e){var t=this.parent.element.querySelector('.e-work-cells[data-group-index="'+e+'"]');t&&(this.parent.element.querySelector(".e-content-wrap").scrollTop=t.offsetTop)},i.prototype.destroy=function(){this.selectedCells=[],this.keyboardModule.destroy()},i}(),ee=function(){function e(e){this.daysVariation=0,this.parent=e,this.actionObj={X:0,Y:0,groupIndex:0,cellWidth:0,cellHeight:0,slotInterval:0,interval:0,actionIndex:0,cloneElement:[],originalElement:[],action:null,isAllDay:null,excludeSelectors:null,index:0,navigationInterval:null,scrollInterval:null},this.scrollArgs={element:null,width:0,height:0},this.resizeEdges={left:!1,right:!1,top:!1,bottom:!1},this.scrollEdges={left:!1,right:!1,top:!1,bottom:!1}}return e.prototype.calculateIntervalTime=function(e){var t=new Date(+e);return t.setMinutes(Math.floor(t.getMinutes()/this.actionObj.interval)*this.actionObj.interval),t},e.prototype.getContentAreaDimension=function(){var e=this.parent.element.querySelector(".e-content-wrap"),t=[].slice.call(e.querySelector("tr").children);!this.parent.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(t=this.getResourceElements(t));var i=t[0].getBoundingClientRect(),s=t.slice(-1)[0].getBoundingClientRect();return{bottom:e.scrollHeight-5,left:this.parent.options.enableRtl?s.left:i.left,right:this.parent.options.enableRtl?i.right:s.right,top:0}},e.prototype.getPageCoordinates=function(e){var t=e.event;return t&&t.changedTouches?t.changedTouches[0]:e.changedTouches?e.changedTouches[0]:t||e},e.prototype.getIndex=function(e){var t=[].slice.call(this.parent.getContentTable().querySelector("tr").children),i={minIndex:0,maxIndex:t.length-1};if("resize"===this.actionObj.action&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&!this.parent.isTimelineView()){var s=this.getResourceElements(t);i.minIndex=s[0].cellIndex,i.maxIndex=s.slice(-1)[0].cellIndex}return e<i.minIndex&&(e=i.minIndex),e>i.maxIndex&&(e=i.maxIndex),e},e.prototype.updateTimePosition=function(e,t){for(var i=0,s=0,n=this.actionObj.cloneElement;s<n.length;s++){var o=n[s].querySelector(".e-time");if(o){var r=this.actionObj.start,a=this.actionObj.end;t&&t.length>0&&i<t.length&&(r=t[parseInt(i.toString(),10)].startTime,a=t[parseInt(i.toString(),10)].endTime),o.innerHTML=this.parent.getTimeString(r)+" - "+this.parent.getTimeString(a)}i++}if(this.parent.activeViewOptions.timeScale.enable&&this.parent.isAdaptive&&"Month"!==this.parent.options.currentView&&"TimelineMonth"!==this.parent.options.currentView){var l=this.parent.element.querySelector(".e-clone-time-indicator");if(!l){l=sf.base.createElement("div",{className:"e-clone-time-indicator"});var h=this.parent.isTimelineView()?"e-date-header-wrap":"e-time-cells-wrap";this.parent.element.querySelector("."+h).appendChild(l)}l.innerHTML=this.parent.getTimeString(e);var d=0;if(this.parent.isTimelineView())if(this.parent.options.enableRtl){var c=parseInt(this.actionObj.clone.style.right,10);d="drag"===this.actionObj.action||this.resizeEdges.left?c+this.actionObj.clone.offsetWidth:c,l.style.right=sf.base.formatUnit(d)}else{var p=parseInt(this.actionObj.clone.style.left,10);d="drag"===this.actionObj.action||this.resizeEdges.left?p:p+this.actionObj.clone.offsetWidth,l.style.left=sf.base.formatUnit(d)}else d="drag"===this.actionObj.action||this.resizeEdges.top?this.actionObj.clone.offsetTop:this.actionObj.clone.offsetTop+this.actionObj.clone.offsetHeight,l.style.top=sf.base.formatUnit(d)}},e.prototype.getResourceElements=function(e){var t=this;return e.filter((function(e){return parseInt(e.getAttribute("data-group-index"),10)===t.actionObj.groupIndex}))},e.prototype.getOriginalElement=function(e){var t,i=e.getAttribute("data-guid");if(e.offsetParent&&e.offsetParent.classList.contains("e-more-event-popup")||this.parent.isTimelineView())t=[].slice.call(this.parent.element.querySelectorAll('[data-guid="'+i+'"]'));else{var s=sf.base.closest(e,"tr");t=[].slice.call(s.querySelectorAll('[data-guid="'+i+'"]'))}return t},e.prototype.createCloneElement=function(e){var t=sf.base.createElement("div",{innerHTML:e.outerHTML}).children[0],i=["e-schedule-event-clone"];return i.push("drag"===this.actionObj.action?"e-drag-clone":"e-resize-clone"),"Month"!==this.parent.options.currentView&&"TimelineMonth"!==this.parent.options.currentView&&(this.parent.isTimelineView()||this.parent.activeViewOptions.timeScale.enable)||i.push("e-month-event"),sf.base.addClass([t],i),sf.base.addClass([e],"e-event-action"),sf.base.isNullOrUndefined(e.parentElement)||e.parentElement.appendChild(t),t.style.width=sf.base.formatUnit(t.offsetWidth-2),this.parent.options.eventDragArea&&"drag"===this.actionObj.action&&document.querySelector(this.parent.options.eventDragArea).appendChild(t),sf.base.setStyleAttribute(t,{border:"0px"}),""!==e.style.backgroundColor&&sf.base.setStyleAttribute(t,{backgroundColor:e.style.backgroundColor}),t},e.prototype.removeCloneElementClasses=function(){var e=this.actionObj.originalElement;"Month"!==this.parent.options.currentView&&"TimelineYear"!==this.parent.options.currentView&&"Day"!==this.parent.options.currentView&&"Week"!==this.parent.options.currentView&&"WorkWeek"!==this.parent.options.currentView&&(this.parent.isTimelineView()||this.parent.activeViewOptions.timeScale.enable)||(e=[].slice.call(this.parent.element.querySelectorAll(".e-event-action,."+t))),sf.base.removeClass(e,["e-event-action",t])},e.prototype.removeCloneElement=function(){this.actionObj.originalElement=[];for(var e=0,t=[].slice.call(this.parent.element.querySelectorAll(".e-dynamic-clone"));e<t.length;e++){var i=t[e];sf.base.remove(i)}for(var s=0,n=this.actionObj.cloneElement;s<n.length;s++){var o=n[s];sf.base.isNullOrUndefined(o.parentNode)||sf.base.remove(o)}this.actionObj.cloneElement=[];var r=this.parent.element.querySelector(".e-clone-time-indicator");r&&sf.base.remove(r)},e.prototype.getCursorElement=function(e){var t=this.getPageCoordinates(e);return document.elementFromPoint(t.clientX,t.clientY)},e.prototype.autoScroll=function(){var e=this.parent.element.querySelector(".e-content-wrap"),t=e.offsetHeight<=e.scrollHeight,i=e.offsetWidth<=e.scrollWidth,s=t&&e.scrollTop>=0&&e.scrollTop+e.offsetHeight<=e.scrollHeight,n=i&&e.scrollLeft>=0&&e.scrollLeft+e.offsetWidth<=e.scrollWidth;s&&(this.scrollEdges.top||this.scrollEdges.bottom)&&(e.scrollTop+=this.scrollEdges.top?-this.actionObj.scroll.scrollBy:this.actionObj.scroll.scrollBy,"resize"===this.actionObj.action&&e.scrollHeight!==e.offsetHeight+e.scrollTop&&e.scrollTop>0&&(this.actionObj.Y+=this.scrollEdges.top?this.actionObj.scroll.scrollBy:-this.actionObj.scroll.scrollBy)),n&&(this.scrollEdges.left||this.scrollEdges.right)&&(e.scrollLeft+=this.scrollEdges.left?-this.actionObj.scroll.scrollBy:this.actionObj.scroll.scrollBy,"resize"===this.actionObj.action&&e.scrollWidth!==e.offsetWidth+e.scrollLeft&&e.scrollLeft>0&&(this.actionObj.X+=this.scrollEdges.left?this.actionObj.scroll.scrollBy:-this.actionObj.scroll.scrollBy))},e.prototype.autoScrollValidation=function(){if(!this.actionObj.scroll.enable)return!1;var e=this.parent.boundaryValidation(this.actionObj.pageY,this.actionObj.pageX);return this.scrollEdges=e,e.bottom||e.top||e.left||e.right},e.prototype.actionClass=function(e){"addClass"===e?sf.base.addClass([this.parent.element],"e-event-action"):sf.base.removeClass([this.parent.element],"e-event-action")},e.prototype.updateScrollPosition=function(){var e=this;this.actionObj.scroll.enable&&sf.base.isNullOrUndefined(this.actionObj.scrollInterval)&&(this.actionObj.scrollInterval=window.setInterval((function(){if(e.autoScrollValidation()&&!e.actionObj.clone.classList.contains("e-all-day-appointment")){if(e.parent.isTimelineView()&&e.parent.activeViewOptions.group.resources.length>0&&e.actionObj.groupIndex<0)return;e.autoScroll(),e.actionObj.action}}),this.actionObj.scroll.timeDelay))},e.prototype.updateOriginalElement=function(e){var t='[data-id="'+e.getAttribute("data-id")+'"]';this.parent.activeViewOptions.group.resources.length>0&&(t=t.concat('[data-group-index = "'+e.getAttribute("data-group-index")+'"]'));var i=[].slice.call(this.parent.element.querySelectorAll(t));sf.base.addClass(i,"e-event-action");var s=[].slice.call(this.parent.element.querySelectorAll(".e-schedule-event-clone"));sf.base.removeClass(s,"e-event-action")},e.prototype.getUpdatedEvent=function(e,t,i){var s=JSON.parse(JSON.stringify(i));return s.startTime=e,s.endTime=t,s},e.prototype.dynamicYearlyEventsRendering=function(e,t,i){if(void 0===t&&(t=!1),sf.base.isNullOrUndefined(this.parent.options.eventDragArea)){var s=v(h(e.startTime)).getTime(),n='.e-work-cells[data-date="'+s+'"]';if(this.parent.activeViewOptions.group.resources.length>0)n='.e-work-cells[data-date="'+s+'"][data-group-index="'+(isNaN(e.groupIndex)?this.actionObj.groupIndex:e.groupIndex)+'"]';var o=this.parent.element.querySelector(n);if(!sf.base.isNullOrUndefined(o)){var r=this.actionObj.cellWidth-7;t&&(this.resizeEdges.left||this.resizeEdges.right)&&(r=this.actionObj.cellWidth*e.count);var a=this.createAppointmentElement(this.actionObj.groupIndex,i),l=o.querySelector(".e-date-header"),d=l?m(l):0;if(sf.base.setStyleAttribute(a,{overflow:"hidden",padding:"3px",position:"absolute",width:r+"px",top:d+"px"}),t){var c=this.actionObj.cellHeight*e.count-d-7;(this.resizeEdges.right||this.resizeEdges.left)&&(c=parseInt(this.actionObj.clone.style.height,10)),sf.base.setStyleAttribute(a,{height:c+"px"})}var p=o.parentElement.sectionRowIndex,u=[].slice.call(this.parent.element.querySelectorAll(".e-appointment-container"))[parseInt(p.toString(),10)];this.renderCloneElement(u,a,o,i)}}},e.prototype.dynamicEventsRendering=function(e,t){if(sf.base.isNullOrUndefined(this.parent.options.eventDragArea)){var i=this.parent.activeView.renderDates.slice(0),s=[].slice.call(this.parent.element.querySelectorAll(".e-work-cells")),n=this.parent.activeViewOptions.workDays;if(this.parent.activeViewOptions.group.resources.length>0){var o='.e-work-cells[data-group-index="'+(x=isNaN(e.groupIndex)?this.actionObj.groupIndex:e.groupIndex)+'"]',r=(s=[].slice.call(this.parent.element.querySelectorAll(o)))[0].querySelectorAll('[data-group-index="'+x+'"]').length,a=0;s.length>0&&(i=[]);for(var l=0,d=s;l<d.length;l++){var c=d[l];i.push(this.parent.getDateFromElement(c)),a<r&&(n.push(i[parseInt(a.toString(),10)].getDay()),a++)}}if(this.monthEvent.dateRender=i,this.monthEvent.getSlotDates(n),this.resizeEdges.left||this.resizeEdges.right)for(var p=0,u=[].slice.call(this.parent.element.querySelectorAll(".e-schedule-event-clone"));p<u.length;p++){var f=u[p];sf.base.remove(f)}for(var g=0,v=this.monthEvent.splitEvent(e,i);g<v.length;g++){var b=v[g],y=this.parent.getIndexOfDate(i,h(b.startTime)),M=s[parseInt(y.toString(),10)];if(!sf.base.isNullOrUndefined(M)){var C=b.data.count*this.actionObj.cellWidth-7,w=this.createAppointmentElement(this.actionObj.groupIndex,t),S=M.querySelector(".e-date-header"),N=S?M.offsetTop+m(S):M.offsetTop,x=isNaN(b.groupIndex)?parseInt(M.getAttribute("data-group-index"),10):b.groupIndex,O=isNaN(x)?".e-appointment-container":'.e-appointment-container[data-group-index="'+x+'"]';sf.base.setStyleAttribute(w,{width:C+"px",top:N+"px"});var E=this.parent.element.querySelector(O);this.renderCloneElement(E,w,M,t)}}}},e.prototype.renderCloneElement=function(e,t,i,s){if(e){t.setAttribute("drag","true"),sf.base.addClass([t],"e-schedule-event-clone");var n=s||this.actionObj.clone;""!==n.style.backgroundColor&&sf.base.setStyleAttribute(t,{backgroundColor:n.style.backgroundColor}),sf.base.addClass([t],[].slice.call(n.classList)),t.classList.remove("e-event-action");var o=0,r=0;this.parent.options.enableRtl?r=i.parentElement.offsetWidth-i.offsetLeft-i.offsetWidth:o=i.offsetLeft,sf.base.setStyleAttribute(t,{left:o+"px",right:r+"px",border:"0px","pointer-events":"none"});var a=e.querySelector(".e-appointment-wrapper");a||(a=sf.base.createElement("div",{className:"e-appointment-wrapper"}),e.appendChild(a)),a.appendChild(t),this.actionObj.cloneElement.push(a)}},e.prototype.getReadonlyAttribute=function(e){return e.getAttribute("aria-disabled")},e.prototype.createAppointmentElement=function(e,t){var i=sf.base.isNullOrUndefined(this.cloneEventDetail)?"":this.cloneEventDetail.outerHTML;t&&(i=(t.querySelector(".e-appointment-details")||t.querySelector(".e-subject")).outerHTML);var s=sf.base.createElement("div",{className:"e-appointment",innerHTML:i});return this.parent.activeViewOptions.group.resources.length>0&&s.setAttribute("data-group-index",e.toString()),s},e.prototype.destroy=function(){this.parent.isDestroyed||(this.actionObj={},this.scrollArgs={},this.resizeEdges={left:!1,right:!1,top:!1,bottom:!1},this.scrollEdges={left:!1,right:!1,top:!1,bottom:!1})},e}(),te=(D=function(e,t){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}D(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),ie=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return te(t,e),t.prototype.wireResizeEvent=function(e){for(var t=0,i=[].slice.call(e.querySelectorAll(".e-event-resize"));t<i.length;t++){var s=i[t];sf.base.EventHandler.clearEvents(s),sf.base.EventHandler.add(s,sf.base.Browser.touchStartEvent,this.resizeStart,this)}},t.prototype.resizeHelper=function(){if(this.parent.activeViewOptions.group.resources.length>0&&this.parent.activeViewOptions.group.allowGroupEdit)for(var e=0,t=this.actionObj.originalElement.length;e<t;e++){var i=this.createCloneElement(this.actionObj.originalElement[parseInt(e.toString(),10)]);this.actionObj.cloneElement[parseInt(e.toString(),10)]=i,this.actionObj.element===this.actionObj.originalElement[parseInt(e.toString(),10)]&&(this.actionObj.clone=i)}else this.actionObj.clone=this.createCloneElement(this.actionObj.element),this.actionObj.cloneElement=[this.actionObj.clone],this.actionObj.originalElement=[this.actionObj.element]},t.prototype.resizeStart=function(e){var t=this;this.actionObj.action="resize",this.actionObj.slotInterval=this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount,this.actionObj.interval=this.actionObj.slotInterval;var i=sf.base.closest(e.target,".e-event-resize");this.actionObj.element=sf.base.closest(i,".e-appointment");var s=this.actionObj.element.getAttribute("data-guid"),n=parseInt(this.actionObj.element.getAttribute("data-group-index")||"0",10),o={cancel:!1,event:this.parent.eventBase.getMouseEvent(e),interval:Math.round(this.actionObj.interval),scroll:{enable:!0,scrollBy:30,timeDelay:100},groupIndex:n};this.parent.dotNetRef.invokeMethodAsync("OnResizeStart",o,s).then((function(s){var o=s.resizeEventArgs;Math.round(t.actionObj.interval)===o.interval&&(o.interval=t.actionObj.interval),t.actionObj.event=sf.base.extend({},s,null,!0),delete t.actionObj.event.resizeEventArgs,t.actionObj.event.startTime=new Date(t.actionObj.event.startTime),t.actionObj.event.endTime=new Date(t.actionObj.event.endTime);var r=sf.base.extend({},t.actionObj.event,null,!0);if(!o.cancel){t.actionClass("addClass"),t.parent.uiStateValues.action=!0,t.resizeEdges={left:i.classList.contains("e-left-handler"),right:i.classList.contains("e-right-handler"),top:i.classList.contains("e-top-handler"),bottom:i.classList.contains("e-bottom-handler")},t.actionObj.groupIndex=t.parent.uiStateValues.isGroupAdaptive?t.parent.uiStateValues.groupIndex:0;var a=t.parent.element.querySelector(".e-work-cells").getBoundingClientRect();t.actionObj.cellWidth=a.width,t.actionObj.cellHeight=a.height;var l=t.parent.activeViewOptions.headerRows.map((function(e){return e.option}));if(t.parent.isTimelineView()&&l.length>0&&["Date","Hour"].indexOf(l.slice(-1)[0])<0){for(var h=t.parent.getContentTable().querySelector("tr"),d=0,c=0,p=[].slice.call(h.children);c<p.length;c++){var u=p[c];d+=parseInt(u.getAttribute("colspan"),10)}var f=h.getBoundingClientRect();t.actionObj.cellWidth=f.width/d,t.actionObj.cellHeight=f.height}var g=t.getPageCoordinates(e);t.actionObj.X=g.pageX,t.actionObj.Y=g.pageY,t.actionObj.groupIndex=n,t.actionObj.interval=o.interval,t.actionObj.scroll=o.scroll,t.actionObj.start=r.startTime,t.actionObj.end=r.endTime,t.actionObj.originalElement=t.getOriginalElement(t.actionObj.element),"Month"!==t.parent.options.currentView&&"TimelineYear"!==t.parent.options.currentView&&(t.parent.isTimelineView()||t.parent.activeViewOptions.timeScale.enable)||(t.daysVariation=-1,t.cloneEventDetail=t.actionObj.element.querySelector(".e-appointment-details"),"TimelineYear"!==t.parent.options.currentView&&(t.monthEvent=new k(t.parent)));var m=t.parent.element.querySelector(".e-content-wrap");t.scrollArgs={element:m,width:m.scrollWidth,height:m.scrollHeight},sf.base.EventHandler.add(document,sf.base.Browser.touchMoveEvent,t.resizing,t),sf.base.EventHandler.add(document,sf.base.Browser.touchEndEvent,t.resizeStop,t)}}))},t.prototype.resizing=function(e){if(this.parent.onQuickPopupClose(),0===this.parent.element.querySelectorAll(".e-resize-clone").length&&this.resizeHelper(),sf.base.isNullOrUndefined(e.target)||!e.target.classList.contains("e-disable-dates")){var t=this.getPageCoordinates(e);if("Month"===this.parent.options.currentView||"TimelineYear"===this.parent.options.currentView){var i=document.documentElement,s=(window.pageXOffset||i.scrollLeft)-(i.clientLeft||0),n=(window.pageYOffset||i.scrollTop)-(i.clientTop||0);this.actionObj.pageX=t.pageX-s,this.actionObj.pageY=t.pageY-n}else this.actionObj.pageX=t.pageX,this.actionObj.pageY=t.pageY;this.updateScrollPosition(),this.updateResizingDirection(e)}},t.prototype.updateResizingDirection=function(e){if("Month"!==this.parent.options.currentView&&"TimelineYear"!==this.parent.options.currentView&&(this.parent.isTimelineView()||this.parent.activeViewOptions.timeScale.enable)){var t=this.resizeValidation(e);if(this.resizeEdges.left){if(t)for(var i=this.getLeftRightStyles(e,!0),s=0,n=this.actionObj.cloneElement;s<n.length;s++){var o=n[s];sf.base.setStyleAttribute(o,i),sf.base.addClass([o],"e-left-handler")}this.horizontalResizing(!this.parent.options.enableRtl)}if(this.resizeEdges.right){if(t)for(var r=this.getLeftRightStyles(e,!1),a=0,l=this.actionObj.cloneElement;a<l.length;a++){o=l[a];sf.base.setStyleAttribute(o,r),sf.base.addClass([o],"e-right-handler")}this.horizontalResizing(this.parent.options.enableRtl)}if(this.resizeEdges.top){if(t)for(var h=this.getTopBottomStyles(e,!0),d=0,c=this.actionObj.cloneElement;d<c.length;d++){o=c[d];sf.base.setStyleAttribute(o,h),sf.base.addClass([o],"e-top-handler")}this.verticalResizing(!0)}if(this.resizeEdges.bottom){if(t)for(var p=this.getTopBottomStyles(e,!1),u=0,f=this.actionObj.cloneElement;u<f.length;u++){o=f[u];sf.base.setStyleAttribute(o,p),sf.base.addClass([o],"e-bottom-handler")}this.verticalResizing(!1)}}else this.monthResizing()},t.prototype.monthResizing=function(){this.removeCloneElement();var e=document.elementFromPoint(this.actionObj.pageX,this.actionObj.pageY);if(!sf.base.isNullOrUndefined(e)){var t=this.parent.getDateFromElement(e),i=!(this.parent.activeViewOptions.group.resources.length>0)||parseInt(e.getAttribute("data-group-index"),10)===this.actionObj.groupIndex,s=this.actionObj.event.startTime,n=this.actionObj.event.endTime;if(!this.parent.options.enableRtl&&this.resizeEdges.left||this.parent.options.enableRtl&&this.resizeEdges.right||this.resizeEdges.top?s=t:(!this.parent.options.enableRtl&&this.resizeEdges.right||this.parent.options.enableRtl&&this.resizeEdges.left||this.resizeEdges.bottom)&&(n=c(t,1)),i&&s<n){this.actionObj.start=s,this.actionObj.end=n;var o=this.getUpdatedEvent(this.actionObj.start,this.actionObj.end,this.actionObj.event);"TimelineYear"===this.parent.options.currentView?this.yearEventsRendering(o):this.dynamicEventsRendering(o),this.updateOriginalElement(this.actionObj.clone)}else if("TimelineYear"===this.parent.options.currentView)for(var r=0,a=[].slice.call(this.parent.element.querySelectorAll(".e-schedule-event-clone"));r<a.length;r++){var l=a[r];this.actionObj.cloneElement.push(l)}}},t.prototype.yearEventsRendering=function(e){for(var t=0,i=[].slice.call(this.parent.element.querySelectorAll(".e-schedule-event-clone"));t<i.length;t++){var s=i[t];sf.base.remove(s)}var n=new Date(e.endTime),o=0;0===this.parent.activeViewOptions.group.resources.length&&(o=this.getMonthDiff(e.startTime,c(n,-1)));for(var r=0;r<=o;r++){var a=void 0;0===this.parent.activeViewOptions.group.resources.length?a=this.getEventCount(e,this.actionObj.start.getMonth()+r):(a=sf.base.extend({},e,null,!0),n=this.resizeEdges.left||this.resizeEdges.right?c(n,-1):n,a.count=this.getMonthDiff(e.startTime,n)+(this.resizeEdges.top?0:1)),this.dynamicYearlyEventsRendering(a,!0)}},t.prototype.getMonthDiff=function(e,t){var i;return i=12*(t.getFullYear()-e.getFullYear()),i-=e.getMonth(),(i+=t.getMonth())<=0?0:i},t.prototype.getEventCount=function(e,t){var i=new Date(this.parent.options.selectedDate.getFullYear(),t,1),s=c(new Date(this.parent.options.selectedDate.getFullYear(),t+1,0),1),n=sf.base.extend({},e,null,!0),o=n.startTime,r=n.endTime,a=1;return o.getTime()<i.getTime()&&(n.startTime=i),r.getTime()>s.getTime()&&(n.endTime=s),0===this.parent.activeViewOptions.group.resources.length&&(a=Math.ceil((n.endTime.getTime()-n.startTime.getTime())/864e5)),n.count=a,n},t.prototype.resizeStop=function(){sf.base.EventHandler.remove(document,sf.base.Browser.touchMoveEvent,this.resizing),sf.base.EventHandler.remove(document,sf.base.Browser.touchEndEvent,this.resizeStop),clearInterval(this.actionObj.scrollInterval),this.actionObj.scrollInterval=null,this.removeCloneElementClasses(),this.removeCloneElement(),this.actionClass("removeClass"),this.parent.uiStateValues.action=!1;var e=this.actionObj.element.getAttribute("data-guid"),t=v(this.actionObj.start),i=v(this.actionObj.end);this.parent.dotNetRef.invokeMethodAsync("OnResizeStop",t,i,e,this.actionObj.groupIndex)},t.prototype.verticalResizing=function(e){var t=this.actionObj.clone.offsetTop;e||(t+=this.actionObj.clone.offsetHeight);var i=t/this.actionObj.cellHeight*this.actionObj.slotInterval,s=this.actionObj.clone.offsetParent;if(!sf.base.isNullOrUndefined(s)){var n=h(this.parent.getDateFromElement(s));n.setHours(this.parent.activeView.getStartHour().getHours()),n.setMinutes(i+this.parent.activeView.getStartHour().getMinutes()),e?this.actionObj.start=this.calculateIntervalTime(n):this.actionObj.end=this.calculateIntervalTime(n),this.updateTimePosition(n)}},t.prototype.horizontalResizing=function(e){var t,i=this.actionObj.event.startTime,s=this.actionObj.event.endTime;if(this.parent.isTimelineView()){var n=this.parent.getContentTable().querySelector("tr"),o=this.parent.options.currentView;if(this.parent.activeViewOptions.headerRows.length>0){var r=this.parent.activeViewOptions.headerRows.map((function(e){return e.option}));o=r.slice(-1)[0],"TimelineMonth"===this.parent.options.currentView&&"Hour"===o&&(o=r.slice(-2)[0]||"Month")}t=e?i:s;var a=0,l=[].slice.call(n.children),h=!1,d=this.actionObj.cellWidth/(this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount),p=parseFloat(this.parent.options.enableRtl?this.actionObj.clone.style.right:this.actionObj.clone.style.left);if(p=Math.round(p/d)*d,-1!==["Year","Month","Week","Date"].indexOf(o)){for(var u=0,f=0,g=l;f<g.length;f++){var m=g[f];u+=parseInt(m.getAttribute("colspan"),10)}var v=this.parent.options.enableRtl?parseInt(this.actionObj.clone.style.right,10):parseInt(this.actionObj.clone.style.left,10);e||(v+=this.actionObj.clone.getBoundingClientRect().width-this.actionObj.cellWidth),a=Math.floor(v/Math.floor(n.getBoundingClientRect().width/u)),h=(a=e?a:"TimelineMonth"===this.parent.options.currentView?a+1:a)===l.length,a=a<0?0:a>=u?u-1:a}else{var b=this.actionObj.cellWidth;if(a=e?Math.floor(p/this.actionObj.cellWidth):Math.ceil((p+(this.actionObj.clone.getBoundingClientRect().width-b))/this.actionObj.cellWidth),this.parent.options.enableRtl){var y=0;("TimelineMonth"===o||!this.parent.activeViewOptions.timeScale.enable&&"TimelineMonth"!==this.parent.options.currentView)&&(y=this.actionObj.cellWidth);var M=Math.floor(p/this.actionObj.cellWidth)*this.actionObj.cellWidth+(e?0:this.actionObj.clone.getBoundingClientRect().width-y);a=Math.floor(M/this.actionObj.cellWidth)}h=a===l.length,a=this.getIndex(a)}var C=void 0;if(C=-1!==["Year","Month","Week","Date"].indexOf(o)?new Date(this.parent.activeView.renderDates[parseInt(a.toString(),10)].getTime()):this.parent.getDateFromElement(n.children[parseInt(a.toString(),10)]),-1===["TimelineMonth","Year","Month","Week","Date"].indexOf(o)&&this.parent.activeViewOptions.timeScale.enable){e||(p+=this.actionObj.clone.getBoundingClientRect().width);var w=Math.ceil(this.actionObj.slotInterval/this.actionObj.cellWidth*(p-Math.floor(p/this.actionObj.cellWidth)*this.actionObj.cellWidth));w=h||!e&&0===w?this.actionObj.slotInterval:w,(t=new Date(C.getTime())).setMinutes(t.getMinutes()+w),this.updateTimePosition(t)}else t=new Date(C.setHours(t.getHours(),t.getMinutes(),t.getSeconds()))}else{var S=sf.base.closest(this.actionObj.clone,"td").cellIndex,N=Math.ceil((e?this.actionObj.element.getBoundingClientRect().width:0)/this.actionObj.cellWidth)*this.actionObj.cellWidth,x=(u=Math.ceil((this.actionObj.clone.getBoundingClientRect().width-N)/this.actionObj.cellWidth),n=sf.base.closest(this.actionObj.clone,"tr"),e?S-u:S+u-1);x=this.parent.virtualScrollModule&&this.parent.virtualScrollModule.isHorizontalScroll&&this.parent.activeViewOptions.timeScale.enable?x:this.getIndex(x),t=this.parent.getDateFromElement(n.children[parseInt(x.toString(),10)]),e?t.setHours(i.getHours(),i.getMinutes(),i.getSeconds()):t.setHours(s.getHours(),s.getMinutes(),s.getSeconds())}if(e)this.actionObj.event.endTime.getTime()-t.getTime()<=0&&(t=new Date(this.actionObj.event.startTime.getTime())),this.actionObj.start=this.parent.activeViewOptions.timeScale.enable?this.calculateIntervalTime(t):t;else{var O=["TimelineDay","TimelineWeek","TimelineWorkWeek"].indexOf(this.parent.options.currentView)>-1&&this.parent.activeViewOptions.timeScale.enable||0!==t.getHours()||0!==t.getMinutes()?t:c(t,1);this.actionObj.end=this.parent.activeViewOptions.timeScale.enable&&"Month"!==this.parent.options.currentView?this.calculateIntervalTime(O):O}},t.prototype.getTopBottomStyles=function(e,t){var i=this.parent.element.querySelector(".e-content-wrap"),s=this.actionObj.cellHeight/this.actionObj.slotInterval*this.actionObj.interval,n=t?this.actionObj.element.offsetHeight+(this.actionObj.Y-this.actionObj.pageY):this.actionObj.element.offsetHeight+(this.actionObj.pageY-this.actionObj.Y),o=t?this.actionObj.element.offsetTop-(this.actionObj.Y-this.actionObj.pageY):this.actionObj.clone.offsetTop;return n=o<0||this.actionObj.clone.offsetTop+this.actionObj.clone.offsetHeight>this.scrollArgs.height?this.actionObj.clone.offsetHeight:n,o=o<0?0:o,n=(o=Math.floor(o/s)*s)+n>=i.scrollHeight?i.scrollHeight-o:Math.ceil(n/s)*s,{height:sf.base.formatUnit(n<this.actionObj.cellHeight?this.actionObj.cellHeight:n),top:sf.base.formatUnit(n<this.actionObj.cellHeight&&t?this.actionObj.clone.offsetTop:o),left:"0px",right:"0px",width:"100%"}},t.prototype.getLeftRightStyles=function(e,t){var i={},s=this.parent.isTimelineView(),n=["TimelineDay","TimelineWeek","TimelineWorkWeek"].indexOf(this.parent.options.currentView)>-1&&this.parent.activeViewOptions.timeScale.enable,o=this.actionObj.cellWidth/this.actionObj.slotInterval*this.actionObj.interval,r=t?this.actionObj.X-this.actionObj.pageX:this.actionObj.pageX-this.actionObj.X,a=s?this.actionObj.element.getBoundingClientRect().width/this.actionObj.cellWidth*this.actionObj.cellWidth:"Month"===this.parent.options.currentView||!this.parent.isTimelineView()&&!this.parent.activeViewOptions.timeScale.enable?this.actionObj.element.getBoundingClientRect().width:Math.ceil(this.actionObj.element.getBoundingClientRect().width/this.actionObj.cellWidth)*this.actionObj.cellWidth,l=a+Math.ceil(r/this.actionObj.cellWidth)*this.actionObj.cellWidth,h=this.parent.options.enableRtl?parseInt(this.actionObj.element.style.right,10):this.actionObj.clone.offsetLeft;n&&(l=a+Math.ceil(r/o)*o,l=Math.round((h+l)/o)*o-h,this.actionObj.event.isAllDay=!1);var d=!t&&l+this.actionObj.clone.offsetLeft>this.scrollArgs.width?this.actionObj.clone.getBoundingClientRect().width:l<this.actionObj.cellWidth?this.actionObj.cellWidth:l;if(this.parent.options.enableRtl){var c=s?parseInt(this.actionObj.element.style.right,10):-(l-this.actionObj.cellWidth);c=s?c:t||c>0?0:c,s&&!t&&(c=(c=Math.ceil((this.actionObj.element.offsetLeft+(this.actionObj.element.getBoundingClientRect().width+(this.actionObj.pageX-this.actionObj.X)))/o)*o)<0?Math.abs(c):-c),c=c>=this.scrollArgs.width?this.scrollArgs.width-this.actionObj.cellWidth:c,i.right=sf.base.formatUnit(c),d=d+c>this.scrollArgs.width?this.actionObj.clone.getBoundingClientRect().width:d}else{var p=t?this.actionObj.element.offsetLeft-(this.actionObj.X-this.actionObj.pageX):this.parent.options.enableRtl?this.actionObj.element.offsetLeft:0;s&&(p=t?p:parseInt(this.actionObj.clone.style.left,10),p=this.parent.options.enableRtl?t?p:this.actionObj.pageX<this.actionObj.X-this.actionObj.clone.getBoundingClientRect().width?parseInt(this.actionObj.clone.style.right,10):p:t&&this.actionObj.pageX>this.actionObj.X+this.actionObj.clone.getBoundingClientRect().width&&this.actionObj.clone.getBoundingClientRect().width===this.actionObj.cellWidth?parseInt(this.actionObj.clone.style.left,10):p);var u=p;(p=s?n?t?Math.floor(p/o)*o:p:Math.floor(p/this.actionObj.cellWidth)*this.actionObj.cellWidth:Math.ceil(Math.abs(p)/this.actionObj.cellWidth)*this.actionObj.cellWidth)<0&&(p=0,d=this.actionObj.clone.getBoundingClientRect().width);var f=Math.ceil(this.actionObj.clone.getBoundingClientRect().width/this.actionObj.cellWidth)*this.actionObj.cellWidth;t&&(i.left=sf.base.formatUnit(s?p:t?u<0?-p:Math.ceil((a-f)/this.actionObj.cellWidth)*this.actionObj.cellWidth:p))}return i.width=sf.base.formatUnit(d),i},t.prototype.resizeValidation=function(e){var t=this.getPageCoordinates(e),i=this.getContentAreaDimension(),s=!1;return this.resizeEdges.left&&(s=t.pageX-this.actionObj.cellWidth>=i.left),this.resizeEdges.right&&(s=t.pageX+this.actionObj.cellWidth<=i.right),this.resizeEdges.top&&(s=this.actionObj.clone.offsetTop>=i.top),this.resizeEdges.bottom&&(s=this.actionObj.clone.offsetTop+this.actionObj.clone.offsetHeight<=this.scrollArgs.height),s},t}(ee),se=(T=function(e,t){return(T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}T(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),ne=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.widthUptoCursorPoint=0,t.heightUptoCursorPoint=0,t.cursorPointIndex=0,t.isHeaderRows=!1,t.isTimelineDayProcess=!1,t.widthPerMinute=0,t.heightPerMinute=0,t.minDiff=0,t.isStepDragging=!1,t.isMorePopupOpened=!1,t.isAllDayDrag=!1,t.isMultiSelect=!1,t.multiData=[],t.updatedData=[],t.swagData=[],t.startTime=0,t.isAllDayTarget=!1,t.targetTd=null,t.cloneElements=[],t}return se(t,e),t.prototype.wireDragEvent=function(e){e.ej2_instances&&[].slice.call(e.ej2_instances).forEach((function(e){return e.destroy()}));new sf.base.Draggable(e,{abort:".e-event-resize",clone:!0,isDragScroll:!0,enableTapHold:this.parent.isAdaptive,enableTailMode:!!this.parent.options.eventDragArea,cursorAt:this.parent.options.eventDragArea?{left:-20,top:-20}:{left:0,top:0},dragArea:this.parent.options.eventDragArea?document.querySelector(this.parent.options.eventDragArea):this.parent.element.querySelector(".e-content-table"),distance:5,dragStart:this.dragStart.bind(this),drag:this.drag.bind(this),dragStop:this.dragStop.bind(this),enableAutoScroll:!1,helper:this.dragHelper.bind(this),queryPositionInfo:this.dragPosition.bind(this)})},t.prototype.dragHelper=function(e){var t=this;this.setDragActionDefaultValues(),this.actionObj.element=e.element,this.actionObj.action="drag";var i=[];return!this.parent.options.allowMultiDrag||sf.base.isNullOrUndefined(this.parent.selectedElements)||0===this.parent.selectedElements.length||this.parent.selectedElements.length>0&&-1===this.parent.selectedElements.indexOf(this.actionObj.element)?i=[e.element]:(i=this.parent.selectedElements,this.isMultiSelect=!0),i.forEach((function(e){var i=t.createCloneElement(e);e.getAttribute("data-guid")===t.actionObj.element.getAttribute("data-guid")&&(t.actionObj.clone=i,t.parent.options.eventDragArea||"Month"===t.parent.options.currentView||!t.parent.activeViewOptions.timeScale.enable||t.parent.isTimelineView()||t.actionObj.element.classList.contains("e-all-day-appointment")||sf.base.setStyleAttribute(t.actionObj.clone,{cursor:"move",left:"0%",right:"0%",width:"100%"}),t.actionObj.clone.style.top=sf.base.formatUnit(t.actionObj.element.offsetTop)),t.actionObj.cloneElement.push(i),t.cloneElements.push(i),t.actionObj.originalElement.push(e)})),this.actionObj.clone},t.prototype.dragPosition=function(e){if(this.parent.options.eventDragArea)return{left:e.left,top:e.top};var t,i=this.actionObj.cellHeight/this.actionObj.slotInterval*this.actionObj.interval,s=sf.base.formatUnit(0);if((this.parent.isTimelineView()||"Month"===this.parent.options.currentView||!this.parent.isTimelineView()&&!this.parent.activeViewOptions.timeScale.enable)&&(s=sf.base.formatUnit(this.actionObj.clone.offsetLeft)),"Month"===this.parent.options.currentView||this.parent.isTimelineView()||!this.parent.activeViewOptions.timeScale.enable||!sf.base.isNullOrUndefined(this.actionObj.clone.offsetParent)&&this.actionObj.clone.offsetParent.classList.contains("e-more-event-popup"))t=sf.base.formatUnit(this.actionObj.clone.offsetTop);else if(this.actionObj.clone.classList.contains("e-all-day-appointment"))t=sf.base.formatUnit(this.parent.element.querySelector(".e-all-day-row").offsetTop),sf.base.setStyleAttribute(this.actionObj.clone,{width:sf.base.formatUnit(Math.ceil(this.actionObj.clone.offsetWidth/this.actionObj.cellWidth)*this.actionObj.cellWidth),right:this.parent.options.enableRtl&&sf.base.formatUnit(0)});else{this.actionObj.element.classList.contains("e-all-day-appointment")&&!this.actionObj.clone.classList.contains("e-all-day-appointment")&&sf.base.setStyleAttribute(this.actionObj.clone,{height:sf.base.formatUnit(this.actionObj.cellHeight),width:sf.base.formatUnit(this.actionObj.cellWidth-1),pointerEvents:"none"});var n=parseInt(e.top,10);n=n<0?0:n,t=sf.base.formatUnit(Math.ceil(n/i)*i);var o=this.parent.element.querySelector(".e-content-wrap").scrollHeight,r=parseInt(t,10)+this.actionObj.clone.offsetHeight;r>o&&(t=parseInt(t,10)-(r-o)+"px")}return{left:s,top:t}},t.prototype.setDragActionDefaultValues=function(){this.actionObj.action="drag",this.actionObj.isAllDay=null,this.actionObj.slotInterval=this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount,this.actionObj.interval=this.actionObj.slotInterval;var e=this.parent.element.querySelector(".e-work-cells");this.actionObj.cellWidth=e.offsetWidth,this.actionObj.cellHeight=e.offsetHeight},t.prototype.dragStart=function(e){var t=this,i=[],s=this.actionObj.element.getAttribute("data-guid");this.isMultiSelect&&this.parent.selectedElements.forEach((function(e){var t=e.getAttribute("data-guid");-1===i.indexOf(t)&&i.push(t)}));var n=this.parent.eventBase.getMouseEvent(e.event),o=parseInt(this.actionObj.element.getAttribute("data-group-index")||"0",10),r={cancel:!1,event:n,excludeSelectors:null,interval:Math.round(this.actionObj.interval),navigation:{enable:!1,timeDelay:2e3},scroll:{enable:!0,scrollBy:30,timeDelay:100},left:n.clientX,top:n.clientY,groupIndex:o};this.parent.uiStateValues.action=!0,this.parent.dotNetRef.invokeMethodAsync("OnDragStart",r,s,i).then((function(i){var s=i.dragEventArgs;Math.round(t.actionObj.interval)===s.interval&&(s.interval=t.actionObj.interval),t.actionObj.isAllDay=i.isAllDay,t.actionObj.event=sf.base.extend({},i,null,!0),delete t.actionObj.event.dragEventArgs,t.actionObj.event.startTime=new Date(t.actionObj.event.startTime),t.actionObj.event.endTime=new Date(t.actionObj.event.endTime);var n=sf.base.extend({},t.actionObj.event,null,!0);if(s.cancel||!sf.base.isNullOrUndefined(t.actionObj.element)&&sf.base.isNullOrUndefined(t.actionObj.element.parentElement)){var r=t.actionObj.element.ej2_instances[0];return sf.base.isNullOrUndefined(r)||r.intDestroy(e.event),t.actionObj.action="",t.removeCloneElementClasses(),t.removeCloneElement(),void(t.parent.uiStateValues.action=!1)}e.bindEvents(e.dragElement),t.actionClass("addClass"),t.isMultiSelect&&!sf.base.isNullOrUndefined(i.selectedData)&&(delete t.actionObj.event.selectedData,delete n.selectedData,t.startTime=n.startTime.getTime(),t.getSelectedData(i.selectedData)),t.parent.uiStateValues.action=!0,t.actionObj.start=n.startTime,t.actionObj.end=n.endTime,t.actionObj.groupIndex=o,t.actionObj.interval=s.interval,t.actionObj.navigation=s.navigation,t.actionObj.scroll=s.scroll,t.actionObj.excludeSelectors=s.excludeSelectors;var a=t.parent.element.querySelector(".e-content-wrap");if(t.scrollArgs={element:a,width:a.scrollWidth,height:a.scrollHeight},t.widthPerMinute=t.actionObj.cellWidth/t.actionObj.slotInterval*t.actionObj.interval,t.heightPerMinute=t.actionObj.cellHeight/t.actionObj.slotInterval*t.actionObj.interval,t.widthUptoCursorPoint=0,t.heightUptoCursorPoint=0,t.cursorPointIndex=-1,t.isHeaderRows=!1,t.isTimelineDayProcess=!1,t.minDiff=0,t.isMorePopupOpened=!1,t.daysVariation=-1,t.isAllDayTarget=t.actionObj.clone.classList.contains("e-all-day-appointment"),t.parent.isTimelineView()||!t.parent.activeViewOptions.timeScale.enable){!sf.base.isNullOrUndefined(t.actionObj.clone.offsetParent)&&t.actionObj.clone.offsetParent.classList.contains("e-more-event-popup")&&(t.isMorePopupOpened=!0);var l=t.parent.activeViewOptions.headerRows;t.isHeaderRows=l.length>0&&"Hour"!==l[l.length-1].option&&"Date"!==l[l.length-1].option,t.isTimelineDayProcess=!t.parent.activeViewOptions.timeScale.enable||t.isHeaderRows||"TimelineMonth"===t.parent.options.currentView||l.length>0&&"Date"===l[l.length-1].option,t.isStepDragging=!t.isTimelineDayProcess&&t.actionObj.slotInterval!==t.actionObj.interval,t.isTimelineDayProcess?t.timelineEventModule=new R(t.parent,"day"):t.timelineEventModule=new R(t.parent,"hour")}if("Month"===t.parent.options.currentView||"TimelineYear"===t.parent.options.currentView||!t.parent.isTimelineView()&&!t.parent.activeViewOptions.timeScale.enable){t.startTime=h(new Date(t.startTime)).getTime(),t.updateOriginalElement(t.actionObj.clone);var d=t.actionObj.clone.querySelector(".e-appointment-details");t.cloneEventDetail=d||t.actionObj.clone.querySelector(".e-subject"),t.monthEvent=new k(t.parent)}"Day"!==t.parent.options.currentView&&"Week"!==t.parent.options.currentView&&"WorkWeek"!==t.parent.options.currentView||(t.verticalEvent=new A(t.parent),t.splitEvent(t.actionObj.event).forEach((function(e){var i='.e-day-wrapper[data-date="'+v(h(e.startTime)).getTime()+'"]';t.parent.activeViewOptions.group.resources.length>0&&(i=i.concat('[data-group-index = "'+t.actionObj.groupIndex+'"]'));var s=t.parent.element.querySelector(i);if(s){var n=s.querySelector('[data-guid="'+t.actionObj.clone.getAttribute("data-guid")+'"]');n&&sf.base.addClass([n],"e-event-action")}})))}))},t.prototype.getSelectedData=function(e){var t=this;e.forEach((function(e){e.startTime=new Date(e.startTime),e.endTime=new Date(e.endTime),t.multiData.push(e)}))},t.prototype.drag=function(e){if(this.parent.onQuickPopupClose(this.isMultiSelect),sf.base.isNullOrUndefined(e.target)||!e.target.classList.contains("e-disable-dates")){var t=sf.base.extend({},this.actionObj.event,null,!0),i=this.getPageCoordinates(e);if(this.actionObj.Y=this.actionObj.pageY=i.pageY,this.actionObj.X=this.actionObj.pageX=i.pageX,this.actionObj.target=e.target,this.widthUptoCursorPoint=0===this.widthUptoCursorPoint?Math.ceil(Math.abs(this.actionObj.clone.getBoundingClientRect().left-this.actionObj.X)/this.widthPerMinute)*this.widthPerMinute:this.widthUptoCursorPoint,this.widthUptoCursorPoint=this.isMorePopupOpened?this.actionObj.cellWidth:this.widthUptoCursorPoint,this.heightUptoCursorPoint=0===this.heightUptoCursorPoint?Math.ceil(Math.abs(this.actionObj.clone.getBoundingClientRect().top-this.actionObj.Y)/this.heightPerMinute)*this.heightPerMinute:this.heightUptoCursorPoint,this.isAllDayDrag=this.parent.activeViewOptions.timeScale.enable?this.actionObj.clone.classList.contains("e-all-day-appointment"):this.actionObj.event.isAllDay,this.isStepDragging&&0===this.minDiff&&this.calculateMinutesDiff(t),("Month"===this.parent.options.currentView||this.isAllDayDrag)&&this.daysVariation<0){var s=this.parent.getDateFromElement(this.actionObj.target);if(sf.base.isNullOrUndefined(s))this.daysVariation=0;else{var n=h(s),o=h(t.startTime);this.daysVariation=(n.getTime()-o.getTime())/864e5}}else this.daysVariation=0;if(this.parent.options.eventDragArea){var r=i.target;this.actionObj.clone.style.top=sf.base.formatUnit(r.offsetTop),this.actionObj.clone.style.left=sf.base.formatUnit(r.offsetLeft),sf.base.closest(r,".e-schedule")?"Week"!==this.parent.options.currentView&&"WorkWeek"!==this.parent.options.currentView&&"Day"!==this.parent.options.currentView&&(this.actionObj.clone.style.width=sf.base.formatUnit(this.actionObj.element.offsetWidth)):(this.actionObj.clone.style.height="",this.actionObj.clone.style.width="")}this.updateScrollPosition(),this.updateNavigatingPosition(e),this.updateDraggingDateTime(e);var a={data:t,event:e,element:this.actionObj.element,startTime:this.actionObj.start,endTime:this.actionObj.end};this.parent.activeViewOptions.group.resources.length>0&&(a.groupIndex=this.actionObj.groupIndex)}},t.prototype.calculateMinutesDiff=function(e){this.parent.options.enableRtl?this.minDiff=(this.actionObj.clone.offsetWidth-this.widthUptoCursorPoint)/this.widthPerMinute*this.actionObj.interval:this.minDiff=this.widthUptoCursorPoint/this.widthPerMinute*this.actionObj.interval;var t=e.startTime,i=u(this.parent.activeView.renderDates[0],this.parent.activeView.getStartHour(),this.parent.activeView.getEndHour());i.startHour.getTime()>t.getTime()&&(this.minDiff=this.minDiff+(i.startHour.getTime()-t.getTime())/6e4)},t.prototype.dragStop=function(e){if(this.removeCloneElementClasses(),this.removeCloneElement(),clearInterval(this.actionObj.navigationInterval),this.actionObj.navigationInterval=null,clearInterval(this.actionObj.scrollInterval),this.actionObj.scrollInterval=null,this.actionClass("removeClass"),this.parent.uiStateValues.action=!1,this.actionObj.action=null,!this.isAllowDrop(e)){var t=this.actionObj.element.getAttribute("data-guid"),i=v(this.actionObj.start),s=v(this.actionObj.end),n=[];this.updatedData.length>0&&this.updatedData.forEach((function(e){n.push({startTime:v(e.startTime),endTime:v(e.endTime),isAllDay:e.isAllDay,guid:e.guid,groupIndex:e.groupIndex})}));var o=!(this.parent.activeViewOptions.group.resources.length>0)||parseInt(this.actionObj.element.getAttribute("data-group-index"),10)===this.actionObj.groupIndex,r=this.parent.activeViewOptions.group.resources.length>0?this.actionObj.groupIndex:-1,a=[];if(this.parent.activeViewOptions.group.resources.length>0&&this.parent.activeViewOptions.group.allowGroupEdit)if(-1===(a=this.getOriginalElement(this.actionObj.element).map((function(e){return parseInt(e.getAttribute("data-group-index"),10)}))).indexOf(this.actionObj.groupIndex)){var l=parseInt(this.actionObj.clone.getAttribute("data-group-index"),10);(a=a.filter((function(e){return e!==l}))).push(this.actionObj.groupIndex)}else a=[];var h=this.parent.eventBase.getMouseEvent(e.event),d={cancel:!1,event:h,left:h.clientX,top:h.clientY,startTime:i,endTime:s,groupIndex:r};this.parent.dotNetRef.invokeMethodAsync("OnDragStop",d,t,o,this.actionObj.isAllDay,a,n),this.updatedData=[],this.multiData=[],this.isMultiSelect=!1,this.parent.selectedElements=[],this.cloneElements=[]}},t.prototype.updateNavigatingPosition=function(e){var t=this;if(this.actionObj.navigation.enable){var i=this.parent.getCurrentTime();sf.base.isNullOrUndefined(this.actionObj.navigationInterval)&&(this.actionObj.navigationInterval=window.setInterval((function(){if(i){var s=t.parent.getCurrentTime().getSeconds(),n=i.getSeconds()+t.actionObj.navigation.timeDelay/1e3;(n=n>=60?n-60:n)===s&&(i=t.parent.getCurrentTime(),t.viewNavigation(),t.updateDraggingDateTime(e))}}),this.actionObj.navigation.timeDelay))}},t.prototype.updateDraggingDateTime=function(e){!sf.base.isNullOrUndefined(this.actionObj.clone.offsetParent)&&this.actionObj.clone.offsetParent.classList.contains("e-more-event-popup")?this.morePopupEventDragging(e):this.parent.isTimelineView()&&"TimelineYear"!==this.parent.options.currentView?(this.timelineEventModule.dateRender=this.parent.activeView.renderDates,this.timelineEventModule.cellWidth=this.actionObj.cellWidth,this.timelineEventModule.getSlotDates(),this.actionObj.cellWidth=this.isHeaderRows?this.timelineEventModule.cellWidth:this.actionObj.cellWidth,this.calculateTimelineTime(e)):"Month"===this.parent.options.currentView||"TimelineYear"===this.parent.options.currentView||!this.parent.isTimelineView()&&!this.parent.activeViewOptions.timeScale.enable?this.calculateVerticalDate(e):this.calculateVerticalTime(e)},t.prototype.navigationWrapper=function(){if(this.parent.isTimelineView()){var e=void 0,t=(e=this.parent.activeViewOptions.group.resources.length>0?this.parent.element.querySelectorAll(".e-appointment-container:not(.e-hidden)").item(this.actionObj.index):this.parent.element.querySelector(".e-appointment-container")).querySelector(".e-appointment-wrapper");t||(t=sf.base.createElement("div",{className:"e-appointment-wrapper"}),e.appendChild(t)),t.appendChild(this.actionObj.clone)}else if("Month"!==this.parent.options.currentView&&this.parent.activeViewOptions.timeScale.enable){var i=this.actionObj.clone.classList.contains("e-all-day-appointment")?".e-all-day-appointment-wrapper":".e-appointment-wrapper";if(this.parent.element.querySelectorAll(i).item(this.actionObj.index).appendChild(this.actionObj.clone),".e-all-day-appointment-wrapper"===i){var s=this.getAllDayEventHeight(),n=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-cells:first-child"));if(n[0].offsetHeight<s)for(var o=0,r=n;o<r.length;o++){r[o].style.height=(s+2)/12+"em"}this.actionObj.clone.style.height=sf.base.formatUnit(s)}this.actionObj.height=parseInt(this.actionObj.clone.style.height,10)}else{var a=[].slice.call(this.parent.element.querySelectorAll(".e-work-cells"));this.actionObj.index=this.parent.activeView.renderDates.length<this.actionObj.index?this.parent.activeView.renderDates.length-1:this.actionObj.index;var l=a[this.actionObj.index].querySelector(".e-appointment-wrapper");l||(l=sf.base.createElement("div",{className:"e-appointment-wrapper"}),a[this.actionObj.index].appendChild(l)),l.appendChild(this.actionObj.clone)}},t.prototype.viewNavigation=function(){var e,t=this.parent.element.querySelector(".e-content-wrap");t&&(!this.scrollEdges.top&&!this.scrollEdges.bottom||sf.base.closest(this.actionObj.clone,".e-all-day-appointment-wrapper"))&&(0===t.scrollLeft&&Math.round(this.actionObj.X)<=Math.round(t.getBoundingClientRect().left+this.actionObj.cellWidth+window.pageXOffset)?e=this.parent.options.enableRtl?"Next":"Previous":Math.round(t.scrollLeft)+t.clientWidth===t.scrollWidth&&Math.round(this.actionObj.X)>=Math.round(t.getBoundingClientRect().right-this.actionObj.cellWidth+window.pageXOffset)&&(e=this.parent.options.enableRtl?"Previous":"Next"),e&&this.parent.dotNetRef.invokeMethodAsync("OnDateNavigate",e))},t.prototype.morePopupEventDragging=function(e){if(!(sf.base.isNullOrUndefined(e.target)||e.target&&sf.base.isNullOrUndefined(sf.base.closest(e.target,"td")))){var t=sf.base.extend({},this.actionObj.event,null,!0),i=t.endTime.getTime()-t.startTime.getTime(),s=sf.base.closest(e.target,"td"),n=this.parent.getDateFromElement(s),o=new Date(n.getTime());o.setMilliseconds(i),this.parent.activeViewOptions.group.resources.length>0&&(this.actionObj.groupIndex=parseInt(s.getAttribute("data-group-index"),10)),this.actionObj.start=new Date(n.getTime()),this.actionObj.end=new Date(o.getTime()),this.actionObj.clone.style.top=sf.base.formatUnit(s.offsetParent.offsetTop),this.actionObj.clone.style.left=sf.base.formatUnit(s.offsetLeft),this.actionObj.clone.style.width=sf.base.formatUnit(s.offsetWidth);var r,a=s;if("TimelineYear"!==this.parent.options.currentView&&this.parent.isTimelineView()){var l=sf.base.closest(s,"tr").rowIndex;a=this.parent.element.querySelectorAll(".e-appointment-container").item(l)}(r=a.querySelector(".e-appointment-wrapper"))||(r=sf.base.createElement("div",{className:"e-appointment-wrapper"}),a.appendChild(r)),this.appendCloneElement(r)}},t.prototype.calculateVerticalTime=function(e){var t=this;if(!(sf.base.isNullOrUndefined(this.actionObj.target)||this.actionObj.target&&sf.base.isNullOrUndefined(sf.base.closest(this.actionObj.target,"tr"))||!sf.base.closest(this.actionObj.target,"td").classList.contains("e-work-cells")&&!sf.base.closest(this.actionObj.target,"td").classList.contains("e-all-day-cells"))){this.parent.activeViewOptions.timeScale.enable&&this.swapDragging(e);var i=this.parent.element.querySelector(".e-content-wrap"),s=sf.base.extend({},this.actionObj.event,null,!0),n=s.startTime,o=s.endTime.getTime()-n.getTime(),r=Math.floor(parseInt(this.actionObj.clone.style.top,10)/this.actionObj.cellHeight)*this.actionObj.cellHeight;r=r<0?0:r,(this.scrollEdges.top||this.scrollEdges.bottom)&&(r=this.scrollEdges.top?i.scrollTop-this.heightUptoCursorPoint+this.actionObj.cellHeight:i.scrollTop+i.offsetHeight-this.actionObj.clone.offsetHeight+(this.actionObj.clone.offsetHeight-this.heightUptoCursorPoint),r=Math.round(r/this.actionObj.cellHeight)*this.actionObj.cellHeight,this.actionObj.clone.style.top=sf.base.formatUnit(r));var a,l,d=r/this.actionObj.cellHeight,p=this.actionObj.cellHeight/this.actionObj.slotInterval,u=parseFloat(this.actionObj.clone.style.top)-r,f=sf.base.closest(this.actionObj.target,"td").classList.contains("e-all-day-cells");if(this.isAllDayDrag||this.parent.virtualScrollModule&&this.parent.virtualScrollModule.isHorizontalScroll&&f)a=this.parent.element.querySelector(".e-all-day-row");else a=[].slice.call(this.parent.getContentTable().querySelectorAll("tr"))[parseInt(d.toString(),10)];(sf.base.closest(this.actionObj.target,"td").classList.contains("e-work-cells")||f)&&(l=sf.base.closest(this.actionObj.target,"td").cellIndex);var g=sf.base.isNullOrUndefined(l)?sf.base.closest(this.actionObj.clone,"td").cellIndex:l;if(this.actionObj.index=g,!sf.base.isNullOrUndefined(a)){var m,v,b=a.children[parseInt(g.toString(),10)];this.parent.activeViewOptions.group.resources.length>0&&(this.actionObj.groupIndex=parseInt(b.getAttribute("data-group-index"),10)),this.parent.activeViewOptions.timeScale.enable&&!this.isAllDayDrag?(this.appendCloneElement(this.getEventWrapper(g)),(m=this.parent.getDateFromElement(b)).setMinutes(m.getMinutes()+Math.round(u/p)),v=new Date(m.getTime()),this.actionObj.element.classList.contains("e-all-day-appointment")?v.setMinutes(v.getMinutes()+this.actionObj.slotInterval):v.setMilliseconds(o)):((m=this.parent.getDateFromElement(b)).setDate(m.getDate()-this.daysVariation),m.setHours(n.getHours(),n.getMinutes(),n.getSeconds()),(v=new Date(m.getTime())).setMilliseconds(o),!this.actionObj.element.classList.contains("e-all-day-appointment")&&this.actionObj.clone.classList.contains("e-all-day-appointment")&&(v=c(h(v),1)),this.updateAllDayEvents(m,v,this.parent.activeViewOptions.group.byDate?g:void 0)),this.actionObj.start=new Date(+m),this.actionObj.end=new Date(+v);for(var y=this.getUpdatedEvent(this.actionObj.start,this.actionObj.end,this.actionObj.event),M=0,C=[].slice.call(this.parent.element.querySelectorAll(".e-dynamic-clone"));M<C.length;M++){var w=C[M];sf.base.remove(w)}if(this.multiData.length>0){if(this.isAllDayTarget&&this.isAllDayDrag&&!sf.base.isNullOrUndefined(this.actionObj.isAllDay)&&!this.actionObj.isAllDay){var S=new Date(parseInt(sf.base.closest(this.actionObj.target,"td").getAttribute("data-date"),10)),N=new Date(+S+6e4*S.getTimezoneOffset()).getTime();this.multiData.forEach((function(e){if(t.swagData.push(sf.base.extend({},e,null,!0)),e.isAllDay){e.startTime=new Date(e.startTime.getTime()+(N-t.startTime));var i=new Date(e.startTime),s=new Date(i.setMinutes(i.getMinutes()+t.actionObj.slotInterval));e.endTime=s,e.isAllDay=!1}})),this.startTime=N}if(this.isAllDayTarget&&this.isAllDayDrag&&!sf.base.isNullOrUndefined(this.actionObj.isAllDay)&&this.actionObj.isAllDay&&this.swagData.length>0){this.multiData=this.swagData,this.swagData=[];var x=sf.base.extend({},this.actionObj.event,null,!0);this.startTime=x.startTime.getTime()}var O=void 0,E=void 0;if(this.parent.activeViewOptions.group.resources.length>0){var I=parseInt(this.actionObj.element.getAttribute("data-group-index"),10);if(O=this.actionObj.groupIndex-I,this.parent.activeViewOptions.group.byDate){var D=[].slice.call(this.parent.element.querySelectorAll(".e-content-table tbody tr"));E=Math.max.apply(Math,D.map((function(e){return parseInt(e.getAttribute("data-group-index"),10)})))}else{D=[].slice.call(this.parent.element.querySelectorAll(".e-resource-cells"));E=parseInt(D[D.length-1].getAttribute("data-group-index"),10)}}for(var T=y.startTime.getTime()-this.startTime,j=0;j<this.multiData.length;j++){if(this.updatedData[parseInt(j.toString(),10)]=this.updateMultipleData(this.multiData[parseInt(j.toString(),10)],T),this.parent.activeViewOptions.group.resources.length>0){var A=parseInt(this.actionObj.cloneElement[parseInt(j.toString(),10)].getAttribute("data-group-index"),10)+O;this.updatedData[parseInt(j.toString(),10)].groupIndex=this.getResourceGroupIndex(A,E)}var z=this.getDayIndex(this.updatedData[parseInt(j.toString(),10)]);if(z>=0){w=this.getEventWrapper(z,this.updatedData[parseInt(j.toString(),10)].isAllDay);this.appendCloneElement(w,this.actionObj.cloneElement[parseInt(j.toString(),10)]),this.updateEventHeight(this.updatedData[parseInt(j.toString(),10)],j,z)}else sf.base.isNullOrUndefined(this.actionObj.cloneElement[parseInt(j.toString(),10)].parentNode)||sf.base.remove(this.actionObj.cloneElement[parseInt(j.toString(),10)])}}else this.updateEventHeight(y);this.updateTimePosition(this.actionObj.start,this.updatedData)}}},t.prototype.getResourceGroupIndex=function(e,t){return e<0?0:e>t?t:e},t.prototype.updateMultipleData=function(e,t){var i=sf.base.extend({},e,null,!0);!sf.base.isNullOrUndefined(this.actionObj.isAllDay)&&this.parent.activeViewOptions.timeScale.enable&&(this.isAllDayTarget&&i.isAllDay||!this.isAllDayTarget&&!i.isAllDay)&&(i.isAllDay=this.actionObj.isAllDay);var s=i.endTime.getTime()-i.startTime.getTime();if(i.isAllDay){var n=Math.ceil(t/864e5),o=Math.ceil(s/864e5),r=new Date(i.startTime);i.startTime=h(new Date(r.setDate(r.getDate()+n))),i.endTime=c(i.startTime,o)}else i.startTime=new Date(i.startTime.getTime()+t),i.endTime=new Date(i.startTime.getTime()+s);return i},t.prototype.getDayIndex=function(e){var t=sf.base.extend({},e,null,!0),i=this.parent.getMsFromDate(t.startTime),s="";(s="."+(this.parent.activeViewOptions.timeScale.enable&&t.isAllDay?"e-all-day-appointment-wrapper":"e-work-cells")+'[data-date="'+i+'"]',this.parent.activeViewOptions.group.resources.length>0)&&(s=s+'[data-group-index="'+(isNaN(e.groupIndex)?this.actionObj.groupIndex:e.groupIndex)+'"]');return this.targetTd=this.parent.element.querySelector(s),sf.base.isNullOrUndefined(this.targetTd)?-1:this.targetTd.cellIndex},t.prototype.splitEvent=function(e){var t=[],i=e.startTime,s=e.endTime;if(h(new Date(i.getTime()))<h(new Date(s.getTime()))){var n=this.parent.activeView.getStartHour(),o=this.parent.activeView.getEndHour(),r=u(h(i),n,o),a=u(h(s),n,o),l=sf.base.extend({},e,null,!0);l.endTime=r.endHour,t.push(l);var d=sf.base.extend({},e,null,!0);d.startTime=a.startHour,t.push(d)}else t.push(e);return t},t.prototype.updateEventHeight=function(e,t,i){this.verticalEvent.initializeValues();for(var s=h(sf.base.extend({},e,null,!0).startTime),n=-1,o=this.parent.getIndexOfDate(this.parent.activeView.renderDates,s),r=this.splitEvent(e),a=(e.endTime.getTime()-e.startTime.getTime())/864e5>=1,l=e.isAllDay||a||r.length>2?[e]:r,d=0;d<l.length;d++){if(d>0){var c='.e-day-wrapper[data-date="'+v(h(l[parseInt(d.toString(),10)].startTime)).getTime()+'"]';this.parent.activeViewOptions.group.resources.length>0&&(c=c.concat('[data-group-index = "'+this.actionObj.groupIndex+'"]'));var p=this.parent.element.querySelector(c);p?(o+=1,n=p.cellIndex):o=-1}if(o>=0){var u=l[parseInt(d.toString(),10)],f=u.startTime,g=u.endTime,m=0,b=this.verticalEvent.getHeight(f,g);if(m=this.verticalEvent.getTopValue(f,o),sf.base.isNullOrUndefined(t))0===d?(this.actionObj.clone.style.top=sf.base.formatUnit(m),this.actionObj.clone.style.height=sf.base.formatUnit(b)):this.renderSpannedEvents(u,n,m,b);else{var y=this.actionObj.cellWidth;if(e.isAllDay){m=this.parent.element.querySelector(".e-all-day-row").offsetTop,b=this.getAllDayEventHeight();var M=e.endTime.getTime()-e.startTime.getTime(),C=Math.ceil(M/864e5);C>=0&&(y=C*this.actionObj.cellWidth)}this.actionObj.cloneElement[parseInt(t.toString(),10)]&&(0===d?(this.actionObj.cloneElement[parseInt(t.toString(),10)].style.top=sf.base.formatUnit(m),this.actionObj.cloneElement[parseInt(t.toString(),10)].style.height=sf.base.formatUnit(b),this.actionObj.cloneElement[parseInt(t.toString(),10)].style.width=sf.base.formatUnit(y),this.actionObj.cloneElement[parseInt(t.toString(),10)].style.left=sf.base.formatUnit(0)):this.renderSpannedEvents(u,n,m,b))}}}},t.prototype.renderSpannedEvents=function(e,t,i,s){if(e.startTime.getTime()!==e.endTime.getTime()){var n=this.createAppointmentElement(this.actionObj.groupIndex);sf.base.addClass([n],["e-schedule-event-clone","e-dynamic-clone"]),sf.base.setStyleAttribute(n,{width:"100%",height:s+"px",top:i+"px",border:"0px"});var o=this.actionObj.clone;""!==o.style.backgroundColor&&sf.base.setStyleAttribute(n,{backgroundColor:o.style.backgroundColor}),[].slice.call(this.parent.element.querySelectorAll(".e-appointment-wrapper"))[parseInt(t.toString(),10)].appendChild(n)}},t.prototype.isSpannedEvent=function(e,t){var i=u(t,this.parent.activeView.getStartHour(),this.parent.activeView.getEndHour()),s=sf.base.extend({},e,null,!0);return s.isSpanned={isBottom:!1,isTop:!1},e.startTime.getTime()<i.startHour.getTime()&&(s.startTime=i.startHour,s.isSpanned.isTop=!0),e.endTime.getTime()>i.endHour.getTime()&&(s.endTime=i.endHour,s.isSpanned.isBottom=!0),s},t.prototype.updateAllDayEvents=function(e,t,i){this.parent.eventBase.slots=[];var s=this.getUpdatedEvent(e,t,this.actionObj.event),n=this.parent.activeView.renderDates;this.parent.eventBase.slots.push(this.parent.activeView.renderDates.map((function(e){return+e}))),this.parent.activeViewOptions.group.resources.length>0&&(this.parent.eventBase.slots=[],this.parent.eventBase.slots.push(n.map((function(e){return+e}))));var o=this.parent.eventBase.splitEvent(s,n),r='.e-all-day-cells[data-date="'+this.parent.getMsFromDate(o[0].startTime)+'"]';this.parent.activeViewOptions.group.resources.length>0&&(r=r.concat('[data-group-index = "'+this.actionObj.groupIndex+'"]'));var a=[].slice.call(this.parent.element.querySelectorAll(r));if(a.length>0||!sf.base.isNullOrUndefined(i)){var l=sf.base.isNullOrUndefined(i)?a[0].cellIndex:i;this.appendCloneElement(this.getEventWrapper(l)),this.actionObj.clone.style.width=sf.base.formatUnit(o[0].data.count*this.actionObj.cellWidth)}},t.prototype.swapDragging=function(e){var t=sf.base.closest(this.actionObj.target,"td").cellIndex;if(sf.base.closest(this.actionObj.target,".e-date-header-wrap")&&!sf.base.closest(this.actionObj.clone,".e-all-day-appointment-wrapper")){sf.base.addClass([this.actionObj.clone],"e-all-day-appointment"),this.appendCloneElement(this.getEventWrapper(t)),this.actionObj.isAllDay=!0;var i=this.getAllDayEventHeight(),s=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-cells:first-child"));if(s[0].offsetHeight<i)for(var n=0,o=s;n<o.length;n++){o[n].style.height=(i+2)/12+"em"}sf.base.setStyleAttribute(this.actionObj.clone,{width:sf.base.formatUnit(this.actionObj.cellWidth),height:sf.base.formatUnit(i),top:sf.base.formatUnit(this.parent.element.querySelector(".e-all-day-row").offsetTop)})}if(sf.base.closest(this.actionObj.target,".e-work-cells")&&!sf.base.closest(this.actionObj.clone,".e-day-wrapper")){sf.base.removeClass([this.actionObj.clone],"e-all-day-appointment"),this.appendCloneElement(this.getEventWrapper(t)),this.actionObj.isAllDay=!1;var r=0===this.actionObj.element.offsetHeight?this.actionObj.height:this.actionObj.element.offsetHeight;sf.base.setStyleAttribute(this.actionObj.clone,{left:sf.base.formatUnit(0),height:sf.base.formatUnit(r),width:sf.base.formatUnit(this.actionObj.cellWidth)})}},t.prototype.calculateVerticalDate=function(e){var t=this;if(!(sf.base.isNullOrUndefined(e.target)||e.target&&sf.base.isNullOrUndefined(sf.base.closest(e.target,"tr"))||e.target&&"DIV"===e.target.tagName)){sf.base.isNullOrUndefined(this.parent.options.eventDragArea)&&this.removeCloneElement();var i=sf.base.extend({},this.actionObj.event,null,!0),s=i.endTime.getTime()-i.startTime.getTime(),n=sf.base.closest(this.actionObj.target,"td");if(!sf.base.isNullOrUndefined(n)){var o=n.parentElement;if(this.actionObj.index=o.rowIndex*o.children.length+n.cellIndex,n=[].slice.call(this.parent.element.querySelectorAll(".e-work-cells"))[this.actionObj.index],sf.base.isNullOrUndefined(n))return;var r=this.parent.getDateFromElement(n);if(!sf.base.isNullOrUndefined(r)){this.parent.activeViewOptions.group.resources.length>0&&(this.actionObj.groupIndex=parseInt(n.getAttribute("data-group-index"),10));var a=new Date(r.setDate(r.getDate()-this.daysVariation)),l=new Date(a.getTime()),d=new Date(l.getTime()),c=i.startTime.getTime()-h(i.startTime).getTime();l=new Date(l.getTime()+c),d=new Date(l.getTime()+s),this.actionObj.start=new Date(l.getTime()),this.actionObj.end=new Date(d.getTime())}}var p=this.getUpdatedEvent(this.actionObj.start,this.actionObj.end,this.actionObj.event);if(sf.base.isNullOrUndefined(this.parent.options.eventDragArea))for(var u=0,f=[].slice.call(this.parent.element.querySelectorAll(".e-schedule-event-clone"));u<f.length;u++){var g=f[u];sf.base.remove(g)}if(this.multiData&&this.multiData.length>0){var m=h(new Date(p.startTime));c=m.getTime()-this.startTime;"TimelineYear"===this.parent.options.currentView&&this.parent.activeViewOptions.group.resources.length>0&&(c=12*(m.getFullYear()-new Date(this.startTime).getFullYear()),c-=new Date(this.startTime).getMonth(),c+=m.getMonth());var v=void 0,b=void 0;if(this.parent.activeViewOptions.group.resources.length>0){var y=parseInt(this.actionObj.element.getAttribute("data-group-index"),10);if(v=this.actionObj.groupIndex-y,this.parent.activeViewOptions.group.byDate&&"TimelineYear"!==this.parent.options.currentView){var M=[].slice.call(this.parent.element.querySelectorAll(".e-content-table tbody tr"));b=Math.max.apply(Math,M.map((function(e){return parseInt(e.getAttribute("data-group-index"),10)})))}else{M=[].slice.call(this.parent.element.querySelectorAll(".e-resource-cells"));b=parseInt(M[M.length-1].getAttribute("data-group-index"),10)}}for(var C=function(e){w.updatedData[parseInt(e.toString(),10)]=w.updateMultipleVerticalDate(w.multiData[parseInt(e.toString(),10)],c);var i=w.cloneElements.find((function(i){return i.getAttribute("data-guid")===t.updatedData[parseInt(e.toString(),10)].guid}));if(w.parent.activeViewOptions.group.resources.length>0&&i){var s=parseInt(i.getAttribute("data-group-index"),10)+v;w.updatedData[parseInt(e.toString(),10)].groupIndex=w.getResourceGroupIndex(s,b)}"TimelineYear"===w.parent.options.currentView?w.dynamicYearlyEventsRendering(w.updatedData[parseInt(e.toString(),10)],!1,i):w.dynamicEventsRendering(w.updatedData[parseInt(e.toString(),10)],i)},w=this,S=0;S<this.multiData.length;S++)C(S)}else"TimelineYear"===this.parent.options.currentView?this.dynamicYearlyEventsRendering(p):this.dynamicEventsRendering(p)}},t.prototype.updateMultipleVerticalDate=function(e,t){var i=sf.base.extend({},e,null,!0),s=i.endTime.getTime()-i.startTime.getTime(),n=new Date(i.startTime);if("TimelineYear"===this.parent.options.currentView&&this.parent.activeViewOptions.group.resources.length>0)i.startTime=new Date(n.setMonth(n.getMonth()+t));else{var o=Math.ceil(t/864e5);i.startTime=new Date(n.setDate(n.getDate()+o))}return i.endTime=new Date(i.startTime.getTime()+s),i},t.prototype.calculateTimelineTime=function(e){var t,s=sf.base.extend({},this.actionObj.event,null,!0),n=s.endTime.getTime()-s.startTime.getTime(),o=this.parent.options.enableRtl?Math.abs(this.actionObj.clone.offsetLeft)-this.actionObj.clone.offsetWidth:parseInt(this.actionObj.clone.style.left,10);o=Math.floor(o/this.actionObj.cellWidth)*this.actionObj.cellWidth,this.parent.options.enableRtl&&(t=Math.abs(parseInt(this.actionObj.clone.style.right,10)),this.actionObj.clone.style.right=sf.base.formatUnit(t)),o=this.getOffsetValue(o,t);var r=this.getColumnIndex(o),a=Math.floor((this.actionObj.pageX-this.actionObj.clone.getBoundingClientRect().left)/this.actionObj.cellWidth);this.parent.options.enableRtl&&(a=Math.abs(Math.floor((this.actionObj.pageX-this.actionObj.clone.getBoundingClientRect().right)/this.actionObj.cellWidth))-1),this.cursorPointIndex<0&&this.cursorIndex(e,s,o,a);var l=this.parent.getContentTable().querySelector("tr"),d=this.getCursorCurrentIndex(r,a,l);d=d<0?0:d;var c=this.isHeaderRows?new Date(this.timelineEventModule.dateRender[parseInt(d.toString(),10)].getTime()):this.parent.getDateFromElement(l.children[parseInt(d.toString(),10)]);if(this.isStepDragging){var p=this.getWidthDiff(l,d);if(0!==p){var u=Math.round(p/this.widthPerMinute);c.setMinutes(c.getMinutes()+u*this.actionObj.interval),c.setMinutes(c.getMinutes()-this.minDiff)}else c=this.actionObj.start}else c.setMinutes(c.getMinutes()-this.cursorPointIndex*(this.isTimelineDayProcess?1440:this.actionObj.slotInterval));if(c=this.calculateIntervalTime(c),this.isTimelineDayProcess){var f=s.startTime;c.setHours(f.getHours(),f.getMinutes(),f.getSeconds())}if(this.parent.options.eventDragArea){var g=this.parent.getDateFromElement(e.target);sf.base.isNullOrUndefined(g)||(c=g)}var m=new Date(c.getTime());m.setMilliseconds(n);var v,b,y=[this.getUpdatedEvent(c,m,this.actionObj.event)];if(this.multiData.length>0){for(var M=y[0].startTime.getTime()-this.startTime,C=0;C<this.multiData.length;C++)this.updatedData[parseInt(C.toString(),10)]=this.updateMultipleData(this.multiData[parseInt(C.toString(),10)],M);y=this.updatedData}if(this.parent.activeViewOptions.group.resources.length>0){var w=this.parent.element.querySelector(".e-resource-column-wrap");b=this.parent.virtualScrollModule?parseInt(w.getAttribute("data-expanded-index"),10):parseInt(w.getAttribute("data-rendered-index"),10);var S=parseInt(this.actionObj.element.getAttribute("data-group-index"),10);this.calculateResourceGroupingPosition(e),v=this.actionObj.groupIndex-S}for(var N=function(t){var i=x.timelineEventModule.splitEvent(y[parseInt(t.toString(),10)],x.timelineEventModule.dateRender);if(0===i.length)return{value:void 0};var n=i[0].data,o=x.getStartTime(i[0],n),r=x.getEndTime(i[0],n),a=x.timelineEventModule.getEventWidth(o,r,s.isAllDay,n.count),l=x.parent.getIndexOfDate(x.timelineEventModule.dateRender,h(new Date(o.getTime())));l=l<0?0:l;var d=x.timelineEventModule.getPosition(o,r,s.isAllDay,l),p=x.multiData.length>0?x.actionObj.cloneElement[parseInt(t.toString(),10)]:x.actionObj.clone;if("TimelineMonth"===x.parent.options.currentView||!x.parent.activeViewOptions.timeScale.enable){o=h(o);var u='.e-work-cells[data-date="'+x.parent.getMsFromDate(o)+'"]',f=x.parent.element.querySelector(u);sf.base.isNullOrUndefined(f)&&(a=0)}if(x.parent.options.enableRtl?p.style.right=sf.base.formatUnit(d):p.style.left=sf.base.formatUnit(d),x.isMorePopupOpened||(p.style.width=sf.base.formatUnit(a)),x.parent.activeViewOptions.group.resources.length>0){var g=parseInt(p.getAttribute("data-group-index"),10),M=x.getResourceGroupIndex(g+v,b);if(y[parseInt(t.toString(),10)].groupIndex=M,x.parent.virtualScrollModule){var C=[].slice.call(x.parent.element.querySelectorAll(".e-appointment-container:not(.e-hidden)"));M=C.findIndex((function(e){return parseInt(e.getAttribute("data-group-index"),10)===g})),M=x.getResourceGroupIndex(M+v,C.length-1)}x.setResourceTopPosition(e,p,M)}x.actionObj.start=new Date(c.getTime()),x.actionObj.end=new Date(m.getTime()),x.updateTimePosition(x.actionObj.start,x.updatedData)},x=this,O=0;O<y.length;O++){var E=N(O);if("object"===i(E))return E.value}},t.prototype.getStartTime=function(e,t){var i=e.startTime,s=u(i,this.timelineEventModule.startHour,this.timelineEventModule.endHour);return i=s.startHour.getTime()>=t.startTime?s.startHour:s.endHour.getTime()<=t.startTime?this.getNextDay(s.startHour,t):t.startTime,t.trimStartTime=e.isAllDay?s.startHour:t.startTime,i},t.prototype.getNextDay=function(e,t){for(var i,s=1;s<=this.timelineEventModule.dateRender.length;s++)if(i=c(e,s),-1!==this.parent.getIndexOfDate(this.timelineEventModule.dateRender,h(new Date(e.getTime()))))return t.count=t.count-1,i;return i},t.prototype.getEndTime=function(e,t){var i=e.endTime,s=u(i,this.timelineEventModule.startHour,this.timelineEventModule.endHour);return"TimelineMonth"===this.parent.options.currentView||!this.parent.activeViewOptions.timeScale.enable||this.parent.activeViewOptions.headerRows.length>0&&"Hour"!==this.parent.activeViewOptions.headerRows.slice(-1)[0].option?i=t.endTime:(i=t.endTime,s.endHour.getTime()<=t.endTime&&(i=s.endHour),s.startHour.getTime()>=t.endTime.getTime()&&!e.isAllDay&&(i=this.getPreviousDay(s.startHour,s.endHour,t))),t.trimEndTime=e.isAllDay?s.endHour:t.endTime,i},t.prototype.getPreviousDay=function(e,t,i){for(var s=1;s<=this.timelineEventModule.dateRender.length;s++){var n=c(t,-s);if(-1!==this.parent.getIndexOfDate(this.timelineEventModule.dateRender,h(new Date(e.getTime())))){(n=h(new Date(n.getTime()))).setHours(t.getHours(),t.getMinutes(),t.getSeconds());var o=i.count,r=i.endTime;return i.count=0!==r.getHours()||0!==r.getMinutes()?o-1:o,n}}return i.endTime},t.prototype.getOffsetValue=function(e,t){if(this.scrollEdges.left||this.scrollEdges.right){var i=this.parent.element.querySelector(".e-content-wrap");this.parent.options.enableRtl?(t=i.offsetWidth-i.scrollLeft,this.scrollEdges.right?t=t-i.offsetWidth+this.actionObj.clone.offsetWidth-(this.actionObj.clone.offsetWidth-this.widthUptoCursorPoint):(t+=this.widthUptoCursorPoint)-this.widthUptoCursorPoint>=i.scrollWidth&&(this.actionObj.clone.style.width=sf.base.formatUnit(this.actionObj.clone.offsetWidth-this.widthUptoCursorPoint+this.actionObj.cellWidth),t=i.scrollLeft-i.scrollWidth),this.actionObj.clone.style.left=sf.base.formatUnit(t)):(this.scrollEdges.left?(e=i.scrollLeft-this.widthUptoCursorPoint+this.actionObj.cellWidth,i.scrollLeft+i.offsetWidth>=i.offsetWidth?i.scrollLeft=i.scrollLeft-1:0===this.actionObj.clone.offsetLeft&&(e=i.scrollLeft)):e=i.scrollLeft+i.offsetWidth-this.actionObj.clone.offsetWidth+(this.actionObj.clone.offsetWidth-this.widthUptoCursorPoint),e=e<0?0:e,this.actionObj.clone.style.left=sf.base.formatUnit(e))}return e},t.prototype.getWidthDiff=function(e,t){var i=this.scrollArgs.element.getBoundingClientRect();if(i.left<=this.actionObj.pageX&&i.right>=this.actionObj.pageX){var s=e.children[parseInt(t.toString(),10)].offsetLeft,n=this.actionObj.pageX-i.left;return this.parent.options.enableRtl?s+this.actionObj.cellWidth-(this.scrollArgs.element.scrollLeft+n):this.scrollArgs.element.scrollLeft+n-s}return 0},t.prototype.getColumnIndex=function(e){var t=Math.floor(e/this.actionObj.cellWidth);return this.isHeaderRows?t:this.getIndex(t)},t.prototype.getCursorCurrentIndex=function(e,t,i){var s=e+t;if(this.isHeaderRows){var n=Math.floor(i.offsetWidth/this.actionObj.cellWidth);return s>n-1?n-1:s}return s>i.children.length-1?i.children.length-1:s},t.prototype.cursorIndex=function(e,t,i,s){var n=sf.base.closest(e.target,".e-work-cells");if(sf.base.isNullOrUndefined(n)||this.isMorePopupOpened)this.cursorPointIndex=0;else{var o=this.parent.getDateFromElement(n);if(this.isHeaderRows){var r=Math.floor(i/this.actionObj.cellWidth);o=new Date(this.timelineEventModule.dateRender[r+s].getTime())}var a=o.getTime()-new Date(t.startTime).getTime();if(this.isTimelineDayProcess)this.cursorPointIndex=Math.abs(Math.ceil(a/864e5));else{var l=Math.floor(a/6e4/(this.actionObj.slotInterval/this.actionObj.cellWidth));this.cursorPointIndex=Math.floor(l/this.actionObj.cellWidth),this.cursorPointIndex=this.cursorPointIndex<0?0:this.cursorPointIndex}}},t.prototype.setResourceTopPosition=function(e,t,i){var s=this.parent.element.querySelectorAll(".e-appointment-container:not(.e-hidden)").item(i),n=s.querySelector(".e-appointment-wrapper");n||(n=sf.base.createElement("div",{className:"e-appointment-wrapper"}),s.appendChild(n)),this.appendCloneElement(n,t);var o=0;if(this.parent.options.rowAutoHeight){var r=this.getCursorElement(e);r&&(o=r.offsetParent.classList.contains("e-appointment")?r.offsetParent.offsetTop:o)}t.style.top=sf.base.formatUnit(o)},t.prototype.calculateResourceGroupingPosition=function(e){var t=this.parent.element.querySelector(".e-content-wrap"),i=[].slice.call(this.parent.element.querySelectorAll(".e-content-wrap .e-content-table tr:not(.e-hidden)")),s=n(t.querySelector("table"));s=sf.base.isNullOrUndefined(s)?0:s;var o=this.parent.options.rowAutoHeight?~~(t.querySelector("table").offsetHeight/i.length):this.actionObj.cellHeight,r=Math.floor(Math.floor(this.actionObj.Y+(t.scrollTop-s-window.scrollY)-t.getBoundingClientRect().top)/o);r=r<0?0:r>i.length-1?i.length-1:r,this.actionObj.index=r;var a=sf.base.closest(e.target,"td");this.actionObj.groupIndex=a&&!isNaN(parseInt(a.getAttribute("data-group-index"),10))?parseInt(a.getAttribute("data-group-index"),10):this.actionObj.groupIndex},t.prototype.appendCloneElement=function(e,t){void 0===t&&(t=null),t=sf.base.isNullOrUndefined(t)?this.actionObj.clone:t,this.parent.options.eventDragArea?document.querySelector(this.parent.options.eventDragArea).appendChild(t):e.appendChild(t)},t.prototype.getEventWrapper=function(e,t){var i;if(sf.base.isNullOrUndefined(t)&&(t=this.actionObj.clone.classList.contains("e-all-day-appointment")),this.parent.activeViewOptions.timeScale.enable){var s=t?".e-all-day-appointment-wrapper":".e-appointment-wrapper";i=this.parent.element.querySelectorAll(s).item(e)}else{var n=this.parent.element.querySelectorAll(".e-work-cells").item(e);(i=n.querySelector(".e-appointment-wrapper"))||(i=sf.base.createElement("div",{className:"e-appointment-wrapper"}),n.appendChild(i))}return i},t.prototype.getAllDayEventHeight=function(){var e=sf.base.createElement("div",{className:"e-appointment"});this.parent.element.querySelector(".e-all-day-appointment-wrapper").appendChild(e);var t=e.offsetHeight;return sf.base.remove(e),t},t.prototype.isAllowDrop=function(e){if(!this.actionObj.excludeSelectors)return!1;for(var t=!1,i=0,s=this.actionObj.excludeSelectors.split(",");i<s.length;i++){var n=s[i];if(e.target.classList.contains(n)){t=!0;break}}return t},t}(ee),oe=function(){function e(e){this.translateY=0,this.itemSize=60,this.bufferCount=3,this.renderedLength=0,this.averageRowHeight=0,this.startIndex=0,this.isResourceCell=!1,this.previousTop=0,this.isInitialized=!0,this.parent=e}return e.prototype.getRenderedCount=function(){var e=this.parent.element.querySelector(".e-content-table");return this.renderedLength=e.querySelector("tbody").children.length,this.renderedLength},e.prototype.triggerScrolling=function(){this.parent.dotNetRef.invokeMethodAsync("OnContentUpdate",this.startIndex)},e.prototype.setTranslateValue=function(){this.setItemSize();var e=this.parent.element.querySelector(".e-content-table");if(this.isHorizontalScroll){var t=this.parent.element.querySelector(".e-virtual-track");if(t){var i=this.parent.element.querySelector(".e-date-header-wrap tbody tr");t.style.width=i.offsetWidth+"px"}e.classList.contains("e-virtual-relative")&&sf.base.removeClass([e],"e-virtual-relative"),sf.base.setStyleAttribute(e,{transform:"translateX("+this.translateY+"px)"});var s=this.parent.element.querySelector(".e-event-table");s&&sf.base.setStyleAttribute(s,{transform:"translateX("+this.translateY+"px)"})}else{var n=this.parent.element.querySelector(".e-resource-column-wrap"),o=this.parent.element.querySelector(".e-content-wrap"),r=this.parent.element.querySelector(".e-event-table"),a=this.parent.element.querySelector(".e-current-timeline");this.setVirtualTrackHeight(n),e.classList.contains("e-virtual-relative")&&sf.base.removeClass([e],"e-virtual-relative"),this.setTranslate(n,o,r,a),o.scrollTop=n.scrollTop}},e.prototype.setVirtualTrackHeight=function(e){var t=this.parent.element.querySelector(".e-virtual-track");if(t){var i=parseInt(e.getAttribute("data-expanded-count"),10);t.style.height=i*this.itemSize+"px"}},e.prototype.updateVirtualScrollHeight=function(){var e=this.parent.element.querySelector(".e-virtual-track"),t=this.parent.element.querySelector(".e-resource-column-wrap"),i=parseInt(t.getAttribute("data-rendered-index"),10),s=parseInt(t.getAttribute("data-expanded-index"),10),n=parseInt(t.getAttribute("data-expanded-count"),10);if(i!==s){var o=this.parent.element.querySelector(".e-content-table");this.renderedLength=o.querySelector("tbody").children.length,e.style.height=o.offsetHeight+(n-this.renderedLength)*o.offsetHeight/this.renderedLength+"px"}else e.style.height="";this.averageRowHeight=e.offsetHeight/n},e.prototype.updateVirtualTrackHeight=function(e){var t=this.parent.element.querySelector(".e-resource-column-wrap"),i=parseInt(t.getAttribute("data-rendered-index"),10),s=parseInt(t.getAttribute("data-expanded-index"),10),n=this.getRenderedCount()+(s-i),o=parseInt(t.getAttribute("data-expanded-count"),10);n=n>o?o:n,e.style.height=n*this.itemSize+"px"},e.prototype.setItemSize=function(){if(this.isHorizontalScroll){var e=this.parent.element.querySelector(".e-work-cells");this.itemSize=e.getBoundingClientRect().width||this.itemSize}else this.itemSize=s(this.parent.activeView.element,"e-work-cells")||this.itemSize},e.prototype.beforeInvoke=function(e,t,i,s){var n=this;if(window.clearTimeout(this.timeValue),this.timeValue=window.setTimeout((function(){n.triggerScrolling()}),250),this.isHorizontalScroll)return this.setTranslateX(),this.updateContent(),void(this.previousTop=t.scrollLeft);this.updateContent(),document.activeElement&&document.activeElement.classList.contains("e-resource-cells")&&(this.isResourceCell=!0,this.focusedEle=document.activeElement,this.parent.element.focus()),this.setTranslate(e,t,i,s),this.previousTop=t.scrollTop},e.prototype.setTranslateX=function(){var e,t=this.parent.element.querySelector(".e-content-table"),i=t.querySelector("tbody tr").children.length;if(this.parent.activeViewOptions.group.byDate)e=this.parent.element.querySelector(".e-date-header-wrap tbody tr");else{var s=[].slice.call(this.parent.element.querySelectorAll(".e-date-header-wrap .e-resource-cells"));e=s[s.length-1].parentElement}for(var n=e.childElementCount,r=0,a={startIndex:void 0,endIndex:void 0},l=0;l<n;l++){if(r+=parseInt(e.children[parseInt(l.toString(),10)].getAttribute("colspan"),10),this.startIndex<r&&sf.base.isNullOrUndefined(a.startIndex)&&(a.startIndex=r-parseInt(e.children[parseInt(l.toString(),10)].getAttribute("colspan"),10),l===n-1)){a.endIndex=r;break}if(this.startIndex+this.renderedLength<r&&sf.base.isNullOrUndefined(a.endIndex)){a.endIndex=r;break}}var h=Math.abs(o(t));if(i+a.startIndex!==a.endIndex||a.startIndex!==h/this.itemSize){var d=a.startIndex*this.itemSize;if(this.isContentUpdate=!0,h!==d){this.translateY=this.parent.options.enableRtl?-d:d;var c=this.parent.element.querySelector(".e-event-table");c&&sf.base.setStyleAttribute(c,{transform:"translateX("+this.translateY+"px)"}),sf.base.setStyleAttribute(t,{transform:"translateX("+this.translateY+"px)"})}}},e.prototype.virtualScrolling=function(){this.parent.onClosePopup(),this.parent.morePopup&&this.parent.morePopup.hide();var e=this.parent.element.querySelector(".e-content-wrap");if(this.isHorizontalScroll){this.isContentUpdate=!1;var t=this.itemSize*this.bufferCount;Math.abs(e.scrollLeft)-Math.abs(this.translateY)<=0?(this.leftScroll(e),this.previousTop!==e.scrollLeft&&this.beforeInvoke(null,e,null,null)):Math.abs(e.scrollLeft)-Math.abs(this.translateY)>t&&(this.rightScroll(e),this.previousTop!==e.scrollLeft&&this.beforeInvoke(null,e,null,null))}else{var i=this.parent.element.querySelector(".e-resource-column-wrap"),s=this.parent.element.querySelector(".e-event-table"),n=this.parent.element.querySelector(".e-current-timeline"),o=this.parent.element.querySelector(".e-content-table");this.renderedLength=i.querySelector("tbody").children.length;var r=parseInt(i.querySelector("tbody td").getAttribute("data-group-index"),10),a=this.parent.options.rowAutoHeight?o.offsetHeight-e.offsetHeight:this.bufferCount*this.itemSize;sf.base.addClass([e],"e-transition"),this.setItemSize(),e.scrollTop-this.translateY<=0&&!this.isInitialized?(this.upScroll(e,r),this.previousTop!==e.scrollTop&&(this.isDownScroll=!1,this.beforeInvoke(i,e,s,n))):e.scrollTop-this.translateY>a&&(this.downScroll(e),this.previousTop!==e.scrollTop&&(this.isDownScroll=!0,this.beforeInvoke(i,e,s,n))),this.isInitialized=!1}},e.prototype.upScroll=function(e,t){var i=~~(e.scrollTop/this.itemSize);if(this.parent.options.rowAutoHeight&&(i=i>t?t-this.bufferCount:i),i=i>0?i:0,0===t)this.translateY=e.scrollTop;else{var s=this.parent.options.rowAutoHeight?this.averageRowHeight:this.itemSize;this.translateY=e.scrollTop-this.bufferCount*s>0?e.scrollTop-this.bufferCount*s:0}this.startIndex=i},e.prototype.downScroll=function(e){var t=this.parent.element.querySelector(".e-resource-column-wrap");if(t.getAttribute("data-rendered-index")===t.getAttribute("data-expanded-index"))return null;var i=this.parent.options.rowAutoHeight?this.averageRowHeight:this.itemSize,s=~~(e.scrollTop/i),n=s+this.renderedLength,o=parseInt(t.getAttribute("data-expanded-count"),10);n=n>o?s+(o-s):n,this.translateY=e.scrollTop,this.translateY>o*i-this.renderedLength*i&&(this.translateY=o*i-this.renderedLength*i),this.startIndex=n-this.renderedLength},e.prototype.leftScroll=function(e){var t=~~(Math.abs(e.scrollLeft)/this.itemSize);t=t>0?t:0,this.translateY=t*this.itemSize,this.parent.options.enableRtl&&(this.translateY=-this.translateY),this.startIndex=t},e.prototype.rightScroll=function(e){var t=[].slice.call(this.parent.element.querySelectorAll(".e-date-header-wrap tbody tr"));t=[].slice.call(t[t.length-1].children);var i=~~(Math.abs(e.scrollLeft)/this.itemSize)+this.renderedLength;i=i>t.length-1?t.length-1:i,this.startIndex=i-this.renderedLength,this.translateY=this.startIndex*this.itemSize,this.parent.options.enableRtl&&(this.translateY=-this.translateY)},e.prototype.setTranslate=function(e,t,i,s){sf.base.setStyleAttribute(e.querySelector("table"),{transform:"translateY("+this.translateY+"px)"}),sf.base.setStyleAttribute(t.querySelector("table"),{transform:"translateY("+this.translateY+"px)"}),sf.base.setStyleAttribute(i,{transform:"translateY("+this.translateY+"px)"}),sf.base.isNullOrUndefined(s)||sf.base.setStyleAttribute(s,{transform:"translateY("+this.translateY+"px)"})},e.prototype.setTabIndex=function(){var e,t=this.parent.element.querySelector(".e-resource-column-wrap"),i=[].slice.call(this.parent.element.querySelectorAll(".e-resource-cells"));if(i&&t){var s=t.getBoundingClientRect().top;i.forEach((function(e){e.getBoundingClientRect().top>=s?e.setAttribute("tabindex","0"):e.setAttribute("tabindex","-1")}))}this.focusedEle&&(e=this.parent.element.querySelector('.e-resource-cells[tabindex="0"][data-group-index="'+this.focusedEle.getAttribute("data-group-index")+'"]')),e||(e=this.parent.element.querySelector('.e-resource-cells[tabindex="0"]')),this.isResourceCell&&e&&(e.focus(),this.isResourceCell=!1)},e.prototype.hideAppointments=function(){[].slice.call(this.parent.element.querySelectorAll(".e-appointment:not(.e-schedule-event-clone),.e-more-indicator")).forEach((function(e){e.style.visibility="hidden"}))},e.prototype.updateContent=function(){if(this.parent.activeViewOptions.enableVirtualMask){if(!this.isContentUpdate&&this.isHorizontalScroll)return;this.hideAppointments();var e=this.parent.element.querySelector(".e-table-wrap");e&&!e.classList.contains("e-virtual-mask")&&sf.base.addClass([e],"e-virtual-mask")}else if(this.isHorizontalScroll||"TimelineYear"===this.parent.options.currentView)this.isHorizontalScroll&&this.isContentUpdate&&this.hideAppointments();else{var t=[].slice.call(this.parent.element.querySelector(".e-event-table").children);if(t.length<=0)return;var i=parseInt(t[0].getAttribute("data-group-index"),10),s=parseInt(t[t.length-1].getAttribute("data-group-index"),10);if(this.isDownScroll&&!(i<=this.startIndex&&this.startIndex<=s)||!this.isDownScroll&&this.startIndex+this.renderedLength<=i&&this.startIndex+this.renderedLength<=s)for(var n=0;n<t.length;n++){[].slice.call(t[parseInt(n.toString(),10)].children).forEach((function(e){e.style.visibility="hidden"}))}}},e.prototype.getResourceCount=function(){var e=this.isHorizontalScroll?this.parent.element.clientWidth:this.parent.element.clientHeight;return this.renderedLength=Math.ceil(e/this.itemSize)+this.bufferCount,this.renderedLength},e}(),re=function(){function i(e){this.parent=e}return i.prototype.inlineEdit=function(i,s,n,o,r){if(void 0===n&&(n=null),"Cell"===i){var a=this.parent.element.querySelector(".e-more-popup-wrapper");a&&a.classList.contains(e)&&this.parent.morePopup.hide(),this.removeInlineAppointmentElement(),this.eventWrapColor=r,this.cellEdit()}else{if(s)return;var l=this.parent.element.querySelector('.e-appointment[data-guid="'+n+'"]');this.parent.element.querySelector(".e-more-popup-wrapper")&&this.parent.element.querySelector(".e-more-popup-wrapper").classList.contains("e-popup-open")&&(l=this.parent.element.querySelector('.e-more-popup-wrapper .e-appointment[data-guid="'+n+'"]')),this.parent.element.querySelector(".e-inline-subject")!==l.querySelector(".e-inline-subject")&&this.removeInlineAppointmentElement(),this.eventEdit(l),o&&(this.parent.eventBase.removeSelectedAppointmentClass(),sf.base.addClass([l],t))}},i.prototype.cellEdit=function(){var e=this.generateEventData(),t=this.parent.activeCellsData.element.cellIndex,i=this.getEventDaysCount(e);i>1&&(i=Math.round(i),t-=--i);var s=new Date(""+e.startTime).getTime(),n=new Date(""+e.endTime).getTime(),o=e.groupIndex||0;"Day"===this.parent.options.currentView||"Week"===this.parent.options.currentView||"WorkWeek"===this.parent.options.currentView?this.createVerticalViewInline(e,t):"Month"===this.parent.options.currentView?this.createMonthViewInline(e,o,s,n):this.createTimelineViewInline(e,s,n,o);var r=this.parent.element.querySelector(".e-inline-subject");r&&r.focus()},i.prototype.createInlineAppointmentElement=function(){var e=sf.base.createElement("div",{className:"e-appointment e-inline-appointment"}),t=sf.base.createElement("div",{className:"e-appointment-details"});e.appendChild(t);var i=sf.base.createElement("input",{className:"e-inline-subject"});return t.appendChild(i),""!==this.eventWrapColor&&sf.base.setStyleAttribute(e,{backgroundColor:this.eventWrapColor}),e},i.prototype.removeInlineAppointmentElement=function(){var e=[].slice.call(this.parent.element.querySelectorAll(".e-inline-appointment"));e.length>0&&e.forEach((function(e){return sf.base.remove(e)}));var t=this.parent.element.querySelector(".e-inline-subject");if(t){var i=sf.base.closest(t,".e-appointment");sf.base.removeClass([i.querySelector(".e-subject")],"e-disable"),sf.base.remove(t)}},i.prototype.createVerticalViewInline=function(e,t){var i=this.getEventDaysCount(e),s=new A(this.parent);if(s.initializeValues(),i>=1){s.allDayElement=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-cells"));var n=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-appointment")),o=0;n.length>0&&(o=Math.floor(this.parent.element.querySelector(".e-all-day-row").getBoundingClientRect().height/n[0].offsetHeight)-1),s.allDayLevel=o,s.renderAllDayEvents(e,t)}else s.renderNormalEvents(e,t)},i.prototype.createMonthViewInline=function(e,t,i,n){var o=this.getEventDaysCount(e),r=this.parent.eventBase.cloneEventObject(e,i,n,o,!1,!1),a=new k(this.parent),l=this.parent.activeView.renderDates.slice(0),h=this.parent.activeView.renderDates,d=this.parent.activeViewOptions.workDays;if(this.parent.activeCellsData.groupIndex>=0?a.workCells=[].slice.call(this.parent.element.querySelectorAll('.e-work-cells[data-group-index="'+t+'"]')):a.workCells=[].slice.call(this.parent.element.querySelectorAll(".e-work-cells")),this.parent.activeViewOptions.group.resources.length>0){var c=0;a.workCells.length>0&&(l=[]);for(var p=0,u=a.workCells;p<u.length;p++){var f=u[p];l.push(this.parent.getDateFromElement(f)),d.push(l[parseInt(c.toString(),10)].getDay()),c++}}a.dateRender=l,a.cellWidth=a.workCells[0].offsetWidth,a.cellHeight=a.workCells[0].offsetHeight,a.eventHeight=s(this.parent.element,"e-appointment"),a.getSlotDates(d);for(var g=a.getRenderedDates(h),m=0,v=a.splitEvent(r,g||h);m<v.length;m++){var b=v[m];a.renderEvents(b,t)}this.parent.element.querySelector(".e-inline-subject").focus()},i.prototype.createTimelineViewInline=function(e,t,i,n){var o=this.getEventDaysCount(e),r=this.parent.eventBase.cloneEventObject(e,t,i,o,!1,!1),a=new R(this.parent,this.parent.activeViewOptions.timeScale.enable?"hour":"day");a.dateRender=this.parent.activeView.renderDates,a.eventContainers=[].slice.call(this.parent.element.querySelectorAll(".e-appointment-container")),this.parent.activeCellsData.groupIndex>=0?a.workCells=[].slice.call(this.parent.element.querySelectorAll('.e-work-cells[data-group-index="'+n+'"]')):a.workCells=[].slice.call(this.parent.element.querySelectorAll(".e-work-cells"));var l=this.parent.element.querySelector(".e-work-cells");a.inlineValue=this.parent.options.allowInline,a.cellWidth=l.offsetWidth,a.cellHeight=l.offsetHeight;var h=0===this.parent.element.querySelectorAll(".e-content-table tbody tr").length?0:this.parent.element.querySelectorAll(".e-content-table tbody tr")[0].children.length;a.slotsPerDay=h/a.dateRender.length,a.eventHeight=s(a.parent.element,"e-appointment"),a.renderEvents(r,n)},i.prototype.getEventDaysCount=function(e){var t=e.startTime,i=e.endTime;return Math.abs(i.getTime()-t.getTime())/864e5},i.prototype.generateEventData=function(e){var t=this.parent.element.querySelector(".e-inline-subject"),i=t?t.value:e?e.innerHTML:"",s={};return s.subject=i,s.startTime=this.parent.activeCellsData.startTime,s.endTime=this.parent.activeCellsData.endTime,s.isAllDay=this.parent.activeCellsData.isAllDay,this.parent.activeCellsData.groupIndex>=0&&(s.groupIndex=this.parent.activeCellsData.groupIndex),s},i.prototype.eventEdit=function(e){var t,i=this.parent.element.querySelector(".e-inline-subject");if(i)t=i.value;else{var s=e.querySelector(".e-subject"),n=e.querySelector(".e-time");if(t=s.innerText,i=sf.base.createElement("input",{className:"e-inline-subject",attrs:{value:t}}),sf.base.addClass([s],"e-disable"),sf.base.closest(e,".e-more-popup-wrapper"))e.insertBefore(i,s);else if(["Agenda","MonthAgenda"].indexOf(this.parent.options.currentView)>-1){var o=e.querySelector(".e-subject-wrap");o.insertBefore(i,o.firstChild)}else{var r=["TimelineDay","TimelineWeek","TimelineWorkWeek","TimelineMonth"].indexOf(this.parent.options.currentView)>-1?".e-inner-wrap":".e-appointment-details";e.querySelector(r).insertBefore(i,n)}i.focus()}i.setSelectionRange(t.length,t.length)},i}(),ae=function(){function i(e,t,i,s,n,o){window.sfBlazor=window.sfBlazor,this.element=t,this.dotNetRef=n,this.options=i,this.activeViewOptions=s,this.dataId=e,window.sfBlazor.setCompInstance(this),this.isAdaptive=sf.base.Browser.isDevice,this.isPrintSchedule=!sf.base.isNullOrUndefined(o),this.uiStateValues={expand:!1,isInitial:!0,left:0,top:0,isGroupAdaptive:i.isGroupAdaptive,isIgnoreOccurrence:!1,groupIndex:0,action:!1,isBlock:!1,isCustomMonth:!0},this.isAdaptive&&!this.element.classList.contains("e-device")&&sf.base.addClass([this.element],"e-device"),this.render()}return i.prototype.render=function(e){if(void 0===e&&(e=!1),this.setHeight(),this.workCellAction=new J(this),this.initializeLayout(this.options.currentView),this.eventBase=new z(this),this.isPrintSchedule||(this.options.allowKeyboardInteraction&&!this.keyboardInteractionModule?this.keyboardInteractionModule=new $(this):!this.options.allowKeyboardInteraction&&this.keyboardInteractionModule&&(this.keyboardInteractionModule.destroy(),this.keyboardInteractionModule=null),this.options.allowDragAndDrop?this.dragAndDropModule=new ne(this):!this.options.allowDragAndDrop&&this.dragAndDropModule&&(this.dragAndDropModule.destroy(),this.dragAndDropModule=null),this.options.allowResizing?this.resizeModule=new ie(this):!this.options.allowResizing&&this.resizeModule&&(this.resizeModule.destroy(),this.resizeModule=null)),this.options.allowInline&&(this.inlineModule=new re(this)),this.isPrintSchedule||e||this.wireEvents(),this.virtualScrollModule){var t=this.virtualScrollModule.getResourceCount();this.dotNetRef.invokeMethodAsync("SetRenderedCount",t)}},i.prototype.initializeLayout=function(e){switch(this.activeView&&this.activeView.destroy(),e){case"Day":case"Week":case"WorkWeek":this.activeView=new B(this);break;case"TimelineDay":case"TimelineWorkWeek":case"TimelineWeek":this.activeView=new Y(this);break;case"Month":this.activeView=new q(this);break;case"MonthAgenda":this.activeView=new W(this);break;case"TimelineMonth":this.activeView=new Q(this);break;case"Year":case"TimelineYear":this.activeView=new G(this);break;case"Agenda":this.activeView=new Z(this)}this.activeView&&(this.virtualScrollModule&&(this.virtualScrollModule=null),(-1===["Agenda","MonthAgenda","Year","TimelineYear"].indexOf(this.options.currentView)||"TimelineYear"===this.options.currentView&&"Vertical"===this.activeViewOptions.orientation)&&this.activeViewOptions.allowVirtualScrolling&&this.activeViewOptions.group.resources.length>0&&!this.uiStateValues.isGroupAdaptive&&(this.virtualScrollModule=new oe(this),this.isTimelineView()?this.uiStateValues.top=0:(this.virtualScrollModule.isHorizontalScroll=!0,this.uiStateValues.left=0)),this.globalize=new sf.base.Internationalization(this.options.locale),this.activeView.getRenderDates(),this.activeView.renderLayout())},i.prototype.scrollContentReady=function(e){if(this.virtualScrollModule){if(e){this.virtualScrollModule.updateVirtualTrackHeight(this.element.querySelector(".e-virtual-track"));var t=this.element.querySelector(".e-current-timeline");sf.base.isNullOrUndefined(t)||(t.style.height=this.element.querySelector(".e-content-table").offsetHeight+"px");var i={cssProperties:this.getCssProperties(),isPreventScrollUpdate:!0};return void this.onScrollUiUpdate(i)}this.virtualScrollModule.setTranslateValue(),this.virtualScrollModule.setTabIndex()}else{[].slice.call(this.element.querySelectorAll(".e-appointment-container")).forEach((function(e){e.style.height=""}));i={cssProperties:this.getCssProperties(),isPreventScrollUpdate:!0};this.onScrollUiUpdate(i)}},i.prototype.scrollToResource=function(e,t){var i=this.element.querySelector(".e-content-wrap");if(this.options.currentView.indexOf("Timeline")<0||"TimelineYear"===this.options.currentView&&"Horizontal"===this.activeViewOptions.orientation){t=this.activeViewOptions.group.byDate?t+1:t;var s=this.element.querySelectorAll(".e-date-header-wrap tbody tr")[parseInt(t.toString(),10)];i.scrollLeft=s.children[parseInt(e.toString(),10)].offsetLeft}else if(this.virtualScrollModule&&"TimelineYear"!==this.options.currentView){var n=this.element.querySelector(".e-virtual-track"),o=this.element.querySelector(".e-resource-column-wrap"),r=Math.round(n.offsetHeight/parseInt(o.getAttribute("data-expanded-count"),10));if(i.scrollTop=e*r-(this.virtualScrollModule.bufferCount-1)*r,this.virtualScrollModule.virtualScrolling(),this.options.rowAutoHeight)(a=this.element.querySelector('.e-work-cells[data-group-index="'+e+'"]'))&&!a.parentElement.classList.contains("e-hidden")&&(i.scrollTop=i.scrollTop<a.offsetTop?a.offsetTop:i.scrollTop+a.offsetTop);else i.scrollTop=e*r}else{var a;(a=this.element.querySelector('.e-work-cells[data-group-index="'+e+'"]'))&&!a.parentElement.classList.contains("e-hidden")&&(i.scrollTop=a.offsetTop)}},i.prototype.dataReady=function(e,t){this.activeView&&([].slice.call(this.element.querySelectorAll(".e-schedule-event-clone")).forEach((function(e){sf.base.remove(e)})),this.activeView.onDataReady({},e,t))},i.prototype.isTimelineView=function(){return-1!==this.options.currentView.indexOf("Timeline")},i.prototype.isAllDayCell=function(e){return!(!(["Month","TimelineMonth","TimelineYear","MonthAgenda"].indexOf(this.options.currentView)>-1||e.classList.contains("e-all-day-cells")||e.classList.contains("e-header-cells"))&&this.activeViewOptions.timeScale.enable)||!!(this.isTimelineView()&&this.activeViewOptions.headerRows.length>0&&"Hour"!==this.activeViewOptions.headerRows.slice(-1)[0].option)},i.prototype.getDateFromElement=function(e){var t=e.getAttribute("data-date");if(!sf.base.isNullOrUndefined(t)){var i=parseInt(t,10),s=new Date(i),n=new Date(+s+6e4*s.getTimezoneOffset());return new Date(n.getTime()+6e4*(n.getTimezoneOffset()-s.getTimezoneOffset()))}},i.prototype.getMsFromDate=function(e){return new Date(+e-6e4*e.getTimezoneOffset()).getTime()},i.prototype.getTimeString=function(e){return this.globalize.formatDate(e,{format:this.options.timeFormat,type:"time"})},i.prototype.getDateTime=function(e){return e instanceof Date?new Date(e.getTime()):new Date(e)},i.prototype.getStartEndTime=function(e){if(!sf.base.isNullOrUndefined(e)&&""!==e){var t=this.resetTime(this.getCurrentTime()),i=e.split(":");return 2===i.length&&t.setHours(parseInt(i[0],10),parseInt(i[1],10),0),t}return null},i.prototype.resetTime=function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},i.prototype.getCurrentTime=function(){if(this.options.timezone){var e=(new Date).getTimezoneOffset();return function(e,t,i){"string"==typeof t&&(t=y(e,t)),"string"==typeof i&&(i=y(e,i));var s=e.getTimezoneOffset(),n=(e=new Date(e.getTime()+6e4*(t-i))).getTimezoneOffset();return new Date(e.getTime()+6e4*(n-s))}(new Date,e,this.options.timezone)}return new Date},i.prototype.boundaryValidation=function(e,t){var i={left:!1,right:!1,top:!1,bottom:!1},s=this.element.querySelector(".e-content-wrap").getBoundingClientRect();return e<s.top+30+window.pageYOffset&&e>s.top+window.pageYOffset&&(i.top=!0),e>s.bottom-30+window.pageYOffset&&e<s.bottom+window.pageYOffset&&(i.bottom=!0),t<s.left+30+window.pageXOffset&&t>s.left+window.pageXOffset&&(i.left=!0),t>s.right-30+window.pageXOffset&&t<s.right+window.pageXOffset&&(i.right=!0),i},i.prototype.onCellMouseDown=function(e){this.keyboardInteractionModule&&this.keyboardInteractionModule.onCellMouseDown(e)},i.prototype.getNavigateView=function(){return this.isTimelineView()?"TimelineMonth"===this.options.currentView||"TimelineYear"===this.options.currentView?"TimelineDay":"Agenda":"Day"},i.prototype.addSelectedClass=function(e,t){for(var i=0,s=e;i<s.length;i++){s[i].setAttribute("aria-selected","true")}sf.base.addClass(e,"e-selected-cell"),t&&(t.setAttribute("tabindex","0"),t.focus())},i.prototype.removeSelectedClass=function(){for(var e=this.getSelectedCells(),t=0,i=e;t<i.length;t++){var s=i[t];s.setAttribute("aria-selected","false"),s.removeAttribute("tabindex")}sf.base.removeClass(e,"e-selected-cell"),this.keyboardInteractionModule&&this.keyboardInteractionModule.selectedCells.length>0&&(this.keyboardInteractionModule.selectedCells=[])},i.prototype.setWorkHours=function(e,t,i,s){var n;n=this.getWorkHourCells(e,t,i,s),sf.base.addClass(n,"e-work-hours")},i.prototype.resetWorkHours=function(e,t,i,s){if(void 0===e&&(e=this.activeView.renderDates),e&&t&&i){var n=this.getWorkHourCells(e,t,i,s);sf.base.removeClass(n,"e-work-hours")}else{var o=[].slice.call(this.element.querySelectorAll(".e-work-hours"));sf.base.removeClass(o,"e-work-hours")}},i.prototype.getWorkHourCells=function(e,t,i,s){if(["Agenda","MonthAgenda","Month","TimelineMonth"].indexOf(this.options.currentView)>-1)return[];var n=this.getStartEndTime(t),o=this.getStartEndTime(i),r=this.getContentTable();if(sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(o)||!r)return[];n.setMilliseconds(0),o.setMilliseconds(0);var a=this.activeView.getStartHour();n<a&&(n=a);var l=this.activeView.getEndHour();o>l&&(o=l);for(var h=6e4*this.activeViewOptions.timeScale.interval/this.activeViewOptions.timeScale.slotCount,d=Math.round((n.getTime()-a.getTime())/h),c=Math.ceil((o.getTime()-a.getTime())/h),p=d,u=c,f=[],g=0,m=e;g<m.length;g++){var v=m[g];v=this.getDateTime(v),this.resetTime(v);var b=this.activeView.renderDates,y=this.getIndexOfDate(b,v);if(y>=0){if(this.isTimelineView()){var M=Math.round((l.getTime()-a.getTime())/h);d=p+y*M,c=u+y*M}for(var C=d;C<c;C++)if(this.isTimelineView()){var w=sf.base.isNullOrUndefined(s)?0:s;f.push(r.rows[parseInt(w.toString(),10)].cells[parseInt(C.toString(),10)])}else if(sf.base.isNullOrUndefined(s))f.push(r.rows[parseInt(C.toString(),10)].cells[parseInt(y.toString(),10)]);else{var S=[].slice.call(r.rows[parseInt(C.toString(),10)].querySelectorAll('.e-work-cells[data-group-index="'+s+'"]'));f.push(S[parseInt(y.toString(),10)])}}}return f},i.prototype.getCellDetails=function(e){var t=e instanceof Array?e:[e],i=sf.base.getElement(t[0]),s=sf.base.getElement(t.slice(-1)[0]),n=this.getDateFromElement(i),o=this.getDateFromElement(s);if(!sf.base.isNullOrUndefined(n)&&!sf.base.isNullOrUndefined(o)){var r=this.isTimelineView()&&!sf.base.isNullOrUndefined(s.getAttribute("colSpan"))&&this.activeViewOptions.headerRows.length>0,a=r?parseInt(s.getAttribute("colSpan"),10):1,l={startTime:n,endTime:o=!this.activeViewOptions.timeScale.enable||r||s.classList.contains("e-all-day-cells")||s.classList.contains("e-header-cells")?c(new Date(o.getTime()),a):this.activeView.getEndDateFromStartDate(o),isAllDay:this.isAllDayCell(i),element:i},h=i.getAttribute("data-group-index");return sf.base.isNullOrUndefined(h)||(l.groupIndex=parseInt(h,10)),l}},i.prototype.getSelectedElements=function(){return this.keyboardInteractionModule&&this.keyboardInteractionModule.selectedCells.length>0?this.keyboardInteractionModule.selectedCells:this.getSelectedCells()},i.prototype.getSelectedCells=function(){return[].slice.call(this.element.querySelectorAll(".e-selected-cell"))},i.prototype.selectCell=function(e){this.removeSelectedClass(),this.addSelectedClass([e],e)},i.prototype.getAllDayRow=function(){return this.element.querySelector(".e-all-day-row")},i.prototype.getTableRows=function(){return[].slice.call(this.element.querySelectorAll(".e-content-table tbody tr:not(.e-hidden)"))},i.prototype.getWorkCellElements=function(){return[].slice.call(this.element.querySelectorAll(".e-work-cells"))},i.prototype.getContentTable=function(){return this.element.querySelector(".e-content-table tbody")},i.prototype.getIndexOfDate=function(e,t){return e.map(Number).indexOf(+t)},i.prototype.setHeight=function(){this.element.style.height=sf.base.formatUnit(this.options.height)},i.prototype.setDimensions=function(){this.setHeight();var e={cssProperties:this.getCssProperties()};this.onScrollUiUpdate(e)},i.prototype.getCssProperties=function(){return{border:this.options.enableRtl?"borderLeftWidth":"borderRightWidth",padding:this.options.enableRtl?"paddingLeft":"paddingRight",rtlBorder:this.options.enableRtl?"borderRightWidth":"borderLeftWidth",rtlPadding:this.options.enableRtl?"paddingRight":"paddingLeft"}},i.prototype.onScrollUiUpdate=function(e){this.activeView&&this.activeView.onScrollUiUpdate(e)},i.prototype.onVirtualScroll=function(){this.virtualScrollModule&&this.virtualScrollModule.virtualScrolling()},i.prototype.removeNewEventElement=function(){var e=this.element.querySelector(".e-new-event");sf.base.isNullOrUndefined(e)||sf.base.remove(e)},i.prototype.closeSidebar=function(e){var t=this.element.querySelector(".e-sidebar");!sf.base.closest(e.target,".e-icon-menu,.e-sidebar")&&t&&t.classList.contains("e-open")&&this.element.querySelector(".e-icon-menu").click()},i.prototype.closeHeaderPopup=function(e){var t=sf.base.closest(e.target,".e-date-range,.e-header-popup,.e-day,.e-selected"),i=this.element.querySelector(".e-header-popup");sf.base.isNullOrUndefined(t)&&i&&this.headerPopup&&this.headerPopup.hide()},i.prototype.closeQuickPopup=function(e){var t,i=".e-quick-popup-wrapper,.e-header-cells,.e-all-day-cells,.e-work-cells,.e-appointment,.e-popup",s=sf.base.closest(e.target,i),n=this.element.querySelector(".e-quick-popup-wrapper");sf.base.isNullOrUndefined(s)&&(n&&n.childElementCount>0&&this.quickPopup&&(t=!0),sf.base.closest(e.target,".e-appointment,.e-header-cells")&&this.removeNewEventElement(),!sf.base.closest(e.target,i)&&this.quickPopup&&(t=!0,this.removeNewEventElement()),t&&this.onClosePopup())},i.prototype.beforeOpenEditor=function(){this.removeNewEventElement()},i.prototype.createCalendarPopup=function(){var t=this.element.querySelector(".e-header-popup");t&&!this.headerPopup&&(this.headerPopup=new sf.popups.Popup(t,{actionOnScroll:"hide",targetType:"relative",relateTo:this.isAdaptive?this.element.querySelector(".e-schedule-toolbar"):this.element.querySelector(".e-date-range"),position:{X:"left",Y:"bottom"},enableRtl:this.options.enableRtl}),this.headerPopup.isStringTemplate=!0),this.headerPopup&&(this.headerPopup.element.classList.contains(e)?this.headerPopup.hide():this.headerPopup.show())},i.prototype.ctrlKeySelect=function(e){if(!this.isAdaptive){this.selectedElements=[],this.selectedElements=[].slice.call(this.element.querySelectorAll("."+t));var i=this.element.querySelector('.e-appointment[data-guid="'+e+'"]');this.eventBase.getSelectedEventElements(i)}},i.prototype.createQuickPopup=function(e,t,i){if(this.isAdaptive&&sf.base.isNullOrUndefined(e)&&!i){var s=this.element.querySelector(".e-new-event");return sf.base.isNullOrUndefined(s)&&(s=sf.base.createElement("div",{className:"e-new-event",innerHTML:'<div class="e-title">New Event</div>'})),void this.currentCell.appendChild(s)}var n,o=this.element.querySelector(".e-quick-popup-wrapper");sf.base.isNullOrUndefined(e)||(n=!0,this.currentCell=this.element.querySelector('.e-appointment[data-guid="'+e+'"]'),this.element.querySelectorAll('.e-appointment[data-guid="'+e+'"]').length>1&&this.activeEventData&&!sf.base.isNullOrUndefined(this.activeEventData.element)&&this.activeEventData.element.getAttribute("data-guid")===e&&(this.currentCell=this.activeEventData.element),this.activeEventData={element:this.currentCell,guid:[e]}),sf.base.isNullOrUndefined(this.currentCell)&&(this.currentCell=this.element.querySelector(".e-table-container")),!(this.currentCell.classList.contains("e-work-cells")||this.currentCell.classList.contains("e-all-day-cells"))||0!==this.getSelectedCells().length&&"TimelineYear"!==this.options.currentView||this.selectCell(this.currentCell),i||(o&&!this.quickPopup&&(this.isAdaptive&&document.body.appendChild(o),this.quickPopup=new sf.popups.Popup(o,{targetType:this.isAdaptive?"container":"relative",enableRtl:this.options.enableRtl,relateTo:this.currentCell,open:this.quickPopupOpen.bind(this),hideAnimation:this.isAdaptive?{name:"ZoomOut"}:{name:"FadeOut",duration:150},showAnimation:this.isAdaptive?{name:"ZoomIn"}:{name:"FadeIn",duration:150},collision:this.isAdaptive?{X:"fit",Y:"fit"}:this.options.enableRtl?{X:"flip",Y:"fit"}:{X:"none",Y:"fit"},position:this.isAdaptive||this.options.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"},viewPortElement:this.isAdaptive?document.body:this.element,zIndex:this.isAdaptive?1004:3}),this.quickPopup.isStringTemplate=!0),this.quickPopup&&(this.isAdaptive&&sf.base.addClass([this.quickPopup.element],"e-device"),this.quickPopup.relateTo=this.currentCell,n&&this.applyEventColor(),this.adjustPopupPosition()),t&&(this.eventBase.removeSelectedAppointmentClass(),this.eventBase.addSelectedAppointments([].slice.call(this.element.querySelectorAll('div[data-guid="'+e+'"]'))),this.activeEventData.element.focus()))},i.prototype.applyEventColor=function(){var e="";e="Agenda"===this.options.currentView||"MonthAgenda"===this.options.currentView?this.options.enableRtl?"border-right-color":"border-left-color":"background-color";var t=this.activeEventData.element.style[e];if(""!==t){var i=this.quickPopup.element.querySelector(".e-popup-header"),s=this.quickPopup.element.querySelector(".e-popup-footer");"block"===getComputedStyle(s).display&&(i=this.quickPopup.element.querySelector(".e-subject"))&&(i.style.borderLeftColor=t,t="rgba("+t.match(/\d+/g).slice(0,3).join()+",0.3)"),i&&(i.style.backgroundColor=t)}},i.prototype.inlineEdit=function(e,t,i,s,n){void 0===i&&(i=null),this.inlineModule.inlineEdit(e,t,i,s,n)},i.prototype.inlineCrudActions=function(e){if(sf.base.closest(e,".e-inline-appointment")){var t=this.inlineModule.generateEventData(e);t.startTime=v(t.startTime),t.endTime=v(t.endTime),this.dotNetRef.invokeMethodAsync("AddInlineAppointment",t,t.groupIndex)}else{var i=e.value;this.dotNetRef.invokeMethodAsync("SaveInlineAppointment",i)}this.inlineModule.removeInlineAppointmentElement()},i.prototype.quickPopupOpen=function(){if(this.isAdaptive)this.quickPopup.element.style.top="0px";else if(this.quickPopup.element.querySelector(".e-cell-popup")){var e=this.quickPopup.element.querySelector(".e-subject");e&&e.focus()}else{var t=this.quickPopup.element.querySelector(".e-event-edit"),i=this.quickPopup.element.querySelector(".e-edit");if(t&&t.hasAttribute("disabled")||i&&i.hasAttribute("disabled")){var s=this.quickPopup.element.querySelector(".e-event-delete"),n=this.quickPopup.element.querySelector(".e-delete");if(s&&s.hasAttribute("disabled")||n&&n.hasAttribute("disabled")){var o=this.quickPopup.element.querySelector(".e-close");o&&o.focus()}else s&&s.focus(),n&&n.focus()}else t&&t.focus(),i&&i.focus()}},i.prototype.adjustPopupPosition=function(){var e=this.quickPopup.element.style.display;if(this.quickPopup.element.style.display="block",this.isAdaptive)this.quickPopup.element.removeAttribute("style"),this.quickPopup.element.style.display="block",this.quickPopup.element.style.height=sf.base.formatUnit(this.isTapHold?65:window.innerHeight);else{var t=this.virtualScrollModule&&this.virtualScrollModule.isHorizontalScroll&&!sf.base.isNullOrUndefined(sf.base.closest(this.currentCell,".e-content-wrap")),i=this.element.querySelector(".e-content-wrap table");this.quickPopup.offsetX=t&&!this.options.enableRtl?o(i)+10:10,this.quickPopup.collision={X:this.options.enableRtl?"flip":"none",Y:"fit"},this.quickPopup.position={X:this.options.enableRtl?"left":"right",Y:"top"},this.quickPopup.dataBind(),this.quickPopup.refreshPosition(null,!0);var s=sf.popups.isCollide(this.quickPopup.element,this.element);if(s.indexOf(this.options.enableRtl?"left":"right")>-1)this.quickPopup.offsetX=-this.currentCell.offsetWidth-10-this.quickPopup.element.offsetWidth,t&&!this.options.enableRtl&&(this.quickPopup.offsetX=o(i)+this.quickPopup.offsetX),this.quickPopup.dataBind(),this.quickPopup.refreshPosition(null,!0),sf.popups.isCollide(this.quickPopup.element,this.element).indexOf("left")>-1&&(this.quickPopup.position={X:"center",Y:"center"},this.quickPopup.collision={X:"fit",Y:"fit"},this.quickPopup.offsetX=-this.quickPopup.element.offsetWidth/2,this.quickPopup.dataBind());if(this.virtualScrollModule&&!this.virtualScrollModule.isHorizontalScroll&&(s.indexOf("top")>-1||s.indexOf("bottom")>-1)){var r=n(i);this.quickPopup.offsetY=r,this.quickPopup.dataBind()}}this.quickPopup.element.style.display=e,this.quickPopup.dataBind(),this.quickPopup.show()},i.prototype.onQuickPopupClose=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1),this.isTapHold=!1,t?this.quickPopup&&this.quickPopup.hide():this.onClosePopup(),e||this.eventBase.focusElement()},i.prototype.onClosePopup=function(){this.quickPopup&&this.quickPopup.element.classList.contains("e-popup-open")&&this.dotNetRef.invokeMethodAsync("CloseQuickInfoPopupAsync")},i.prototype.createMoreEventPopup=function(e,t){var i=this.element.querySelector(".e-more-popup-wrapper");if(i&&!this.morePopup&&(this.isAdaptive&&document.body.appendChild(i),this.morePopup=new sf.popups.Popup(i,{targetType:this.isAdaptive?"container":"relative",enableRtl:this.options.enableRtl,hideAnimation:{name:"ZoomOut",duration:300},showAnimation:{name:"ZoomIn",duration:300},open:this.morePopupOpen.bind(this),collision:this.isAdaptive?{X:"fit",Y:"fit"}:this.options.enableRtl?{X:"flip",Y:"fit"}:{X:"flip",Y:"flip"},viewPortElement:this.isAdaptive?document.body:this.element,zIndex:this.isAdaptive?1002:2}),this.morePopup.isStringTemplate=!0),this.morePopup){if("Year"===this.options.currentView){var s=this.element.querySelector(':not(.e-other-month)[data-date="'+t+'"]');s&&(this.activeCellsData=this.getCellDetails(s))}for(var n=this.morePopup.element.querySelectorAll(".e-appointment"),o=0;o<n.length;o++){var r=n[parseInt(o.toString(),10)];this.eventBase.wireAppointmentEvents(r,"Year"===this.options.currentView,!0)}var a=this.element.querySelector("."+e+'[data-date="'+t+'"]');"Year"===this.options.currentView?a=-1!==e.indexOf("e-other-month")?sf.base.closest(a,".e-other-month"):this.element.querySelector(':not(.e-other-month)[data-date="'+t+'"]'):this.activeCellsData=this.getCellDetails(a),this.morePopup&&this.isAdaptive&&(sf.base.addClass([this.morePopup.element],"e-device"),this.morePopup.element.removeAttribute("style")),this.morePopup.relateTo=a,this.morePopup.show()}},i.prototype.morePopupOpen=function(){if(!this.isAdaptive){var e=this.morePopup.element.querySelector(".e-header-date");e&&e.focus()}},i.prototype.onMoreEventPopupClose=function(){if(this.morePopup&&this.morePopup.element.classList.contains(e)){if(this.activeCellsData&&this.activeCellsData.element)if("Year"===this.options.currentView)this.selectCell(this.activeCellsData.element);else{var t=void 0,i=parseInt(this.activeCellsData.element.getAttribute("data-date"),10),s=parseInt(this.activeCellsData.element.getAttribute("data-group-index"),10);(t=isNaN(s)?this.element.querySelector('.e-more-indicator[data-start="'+i+'"]'):this.element.querySelector('.e-more-indicator[data-start="'+i+'"][data-group-index="'+s+'"]'))&&t.focus()}this.onQuickPopupClose(),this.morePopup.hide()}},i.prototype.getTooltipPosition=function(e,t){var i;i=t?this.element.querySelector(".e-quick-popup-wrapper"):document.querySelector("#"+this.element.id+"_dialog_wrapper .e-dlg-content");var s=(t?i.querySelector("#QuickInfo"+e):i.querySelector("#"+e)).getBoundingClientRect(),n=i.getBoundingClientRect(),o={};o[""+e]="top:"+(s.bottom-n.top+i.scrollTop+9)+"px;left:"+(s.left-n.left+i.scrollLeft+s.width/2)+"px;",this.dotNetRef.invokeMethodAsync("ErrorPositioning",o,t)},i.prototype.scrollTo=function(e,t){t=sf.base.isNullOrUndefined(t)?t:this.getDateTime(t),this.activeView.scrollToDate&&sf.base.isNullOrUndefined(e)&&t?this.activeView.scrollToDate(t):this.activeView.scrollToHour&&this.activeView.scrollToHour(e,t)},i.prototype.print=function(){var e=this.element.cloneNode(!0);e.id=this.element.id+"_print",document.body.appendChild(e);var t=this.getScrollableElement(this.element),i=t.scrollTop,s=t.scrollLeft;this.printScheduler(e,s,i,!0)},i.prototype.printScheduler=function(e,t,i,s){for(var n=this,o="",r=0,a=[].slice.call(document.querySelectorAll("base, link, style"));r<a.length;r++){o+=a[r].outerHTML}var l=sf.base.createElement("div");e.style.width=e.offsetWidth+"px";var h=s?550:window.outerHeight,d=s?100*Math.round(parseInt(e.style.width,10)/100):window.outerWidth;l.appendChild(e);var c=window.open("","print","height="+h+",width="+d+",tabbar=no");c.document.write("<!DOCTYPE html> <html><head>"+o+"</head><body>"+l.innerHTML+"<script> (function() { window.ready = true; })(); <\/script></body></html>"),c.document.close(),c.focus(),setTimeout((function(){var e=n.getScrollableElement(c.document.body);e.scrollLeft=t,e.scrollTop=i;var s=c.document.querySelector(".e-date-header-wrap");s&&(s.scrollLeft=e.scrollLeft);var o=c.document.querySelector(".e-time-cells-wrap");o&&(o.scrollTop=i),c.print(),c.close()}),2e3)},i.prototype.getScrollableElement=function(e){var t="MonthAgenda"===this.options.currentView?".e-appointment-wrap":".e-content-wrap";return e.querySelector(t)},i.prototype.allDayRowScrollUpdate=function(){var e=this.element.querySelector(".e-date-header-wrap"),t=this.element.querySelector(".e-all-day-row");if(!sf.base.isNullOrUndefined(t)){if("auto"!==this.options.height&&this.options.enableAllDayScroll)e.classList.contains("e-all-day-auto")&&sf.base.removeClass([e],"e-all-day-auto"),this.eventBase.allDayExpandScroll(e);else if(sf.base.addClass([e],"e-all-day-auto"),e.classList.contains("e-all-day-scroll")&&sf.base.removeClass([e],"e-all-day-scroll"),this.uiStateValues.expand){var i=[].slice.call(this.element.querySelectorAll(".e-all-day-cells"));i[0].style.height=t.style.height?t.style.height:i[1].style.height}if(this.uiStateValues.expand){var s={cssProperties:this.getCssProperties()};this.onScrollUiUpdate(s)}else t.style.height=""}},i.prototype.wireEvents=function(){this.wireTouchEvents(),sf.base.EventHandler.add(window,"resize",this.onScheduleResize,this),sf.base.EventHandler.add(window,"orientationchange",this.onScheduleResize,this),sf.base.EventHandler.add(document,sf.base.Browser.touchStartEvent,this.onDocumentClick,this)},i.prototype.unwireEvents=function(){this.unwireTouchEvents(),sf.base.EventHandler.remove(window,"resize",this.onScheduleResize),sf.base.EventHandler.remove(window,"orientationchange",this.onScheduleResize),sf.base.EventHandler.remove(document,sf.base.Browser.touchStartEvent,this.onDocumentClick)},i.prototype.wireTouchEvents=function(){var e=this.element.querySelector(".e-table-container");e&&sf.base.isNullOrUndefined(this.touchObj)&&(this.touchObj=new sf.base.Touch(e,{tapHold:this.tapHoldHandler.bind(this)}))},i.prototype.unwireTouchEvents=function(){this.touchObj&&this.touchObj.destroy()},i.prototype.tapHoldHandler=function(e){var i=sf.base.closest(e.originalEvent.target,".e-appointment");if(!sf.base.isNullOrUndefined(i)&&this.isAdaptive){var s=i.getAttribute("data-guid");return this.isTapHold=!0,this.selectedElements=[].slice.call(this.element.querySelectorAll("."+t)),this.eventBase.getSelectedEventElements(i),void this.dotNetRef.invokeMethodAsync("OnTapHold",s,this.isTapHold)}},i.prototype.onScheduleResize=function(){this.onClosePopup(),this.morePopup&&this.morePopup.hide(),this.activeView.resetColWidth(),this.onScrollUiUpdate({cssProperties:this.getCssProperties(),isPreventScrollUpdate:!0}),this.dataReady()},i.prototype.onDocumentClick=function(t){var i=t.target;if(this.options.allowInline){var s=this.element.querySelector(".e-inline-subject");!i.classList.contains("e-inline-subject")&&s&&""!==s.value?this.inlineCrudActions(s):i.classList.contains("e-inline-subject")||this.inlineModule.removeInlineAppointmentElement()}this.closeHeaderPopup(t),this.closeSidebar(t),this.closeQuickPopup(t),this.eventBase&&this.eventBase.appointmentBorderRemove(t),!this.morePopup||sf.base.closest(i,".e-more-popup-wrapper")||i.classList.contains("e-more-indicator")||sf.base.closest(i,"."+e)||sf.base.closest(i,".e-work-cells")||this.morePopup.hide()},i.prototype.changeInitial=function(e,t,i,s){return this.options.viewIndex!==i||e!==t?(this.uiStateValues.top=e.indexOf("Timeline")>-1&&t.indexOf("Timeline")<0?0:this.uiStateValues.top,["Day","Week","WorkWeek"].indexOf(e)>-1&&["Day","Week","WorkWeek"].indexOf(t)<0||e.indexOf("Timeline")>-1||e.indexOf("Year")>-1):s&&e.indexOf("Timeline")>-1&&e.indexOf("Year")<0},i.prototype.setPersistence=function(){if(this.options.enablePersistence){var e={selectedDate:this.options.selectedDate,currentView:this.options.currentView,viewIndex:this.options.viewIndex},t=this.element.querySelector(".e-content-wrap");sf.base.isNullOrUndefined(t)||(e.top=t.scrollTop,e.left=t.scrollLeft),window.localStorage.setItem(this.element.id,JSON.stringify(e))}},i.prototype.destroy=function(){this.isDestroyed=!0,this.setPersistence(),this.unwireEvents(),this.headerPopup&&this.headerPopup.destroy(),this.quickPopup&&(this.quickPopup.destroy(),sf.base.remove(this.quickPopup.element),this.quickPopup=null),this.morePopup&&(this.morePopup.destroy(),sf.base.remove(this.morePopup.element),this.morePopup=null),this.keyboardInteractionModule&&this.keyboardInteractionModule.destroy(),this.activeView&&(this.activeView.destroy(),this.activeView=null)},i}();return{initialize:function(e,t,i,s,n){t&&e&&(i.selectedDate=new Date(i.selectedDate),i.minDate=new Date(i.minDate),i.maxDate=new Date(i.maxDate),sf.base.isNullOrUndefined(s.group.resources)&&(s.group.resources=[]),new ae(e,t,i,s,n).dataReady(),t.querySelector(".e-content-placeholder")&&(t.querySelector(".e-content-placeholder").style.display="none"),n.invokeMethodAsync("TriggerCreatedEvent"))},updateLayout:function(e,t,i,s){t.selectedDate=new Date(t.selectedDate),t.minDate=new Date(t.minDate),t.maxDate=new Date(t.maxDate),sf.base.isNullOrUndefined(i.group.resources)&&(i.group.resources=[]);var n=window.sfBlazor.getCompInstance(e);n&&n.element&&(n.uiStateValues.isInitial=n.changeInitial(t.currentView,n.options.currentView,t.viewIndex,s),n.options=t,n.activeViewOptions=i,n.uiStateValues.isGroupAdaptive=t.isGroupAdaptive,n.render(!0),n.setPersistence(),n.allDayRowScrollUpdate())},printWithOptions:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);if(s&&s.element){var n=Object.assign({},s.options),o=Object.assign({},s.activeViewOptions);n.selectedDate=new Date(n.selectedDate),n.minDate=new Date(n.minDate),n.maxDate=new Date(n.maxDate);var r=s.element.cloneNode(!0);r.id=r.id+"_print";var a=s.getScrollableElement(s.element),l=a.scrollTop,h=a.scrollLeft;document.body.appendChild(r),n.height=i.height,n.width=i.width,new ae(null,r,n,o,t,!0),"MonthAgenda"!==n.currentView&&s.dataReady(void 0,void 0),s.printScheduler(r,h,l),s.destroy()}},loadCldr:function(e){sf.base.loadCldr(JSON.parse(e))},createCalendarPopup:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.createCalendarPopup()},exportSave:function(e,t){if(navigator.msSaveBlob){for(var i=window.atob(t),s=new Uint8Array(i.length),n=0;n<i.length;n++)s[parseInt(n.toString(),10)]=i.charCodeAt(n);var o=new Blob([s.buffer],{type:"application/octet-stream"});navigator.msSaveBlob(o,e)}else{var r=document.createElement("a");r.download=e,r.href="data:application/octet-stream;base64,"+t,document.body.appendChild(r),r.click(),document.body.removeChild(r)}},exportToICS:function(e,t){var i=new Blob([e],{type:"data:text/calendar;charset=utf8"});if(t=(t||"Calendar")+".ics",navigator.msSaveBlob)navigator.msSaveBlob(i,t);else{var s=document.createElementNS("http://www.w3.org/1999/xhtml","a");s.download=t,s.href=URL.createObjectURL(i);var n=document.createEvent("MouseEvent");n.initEvent("click",!0,!0),s.dispatchEvent(n),setTimeout((function(){URL.revokeObjectURL(s.href),s.href=void 0}))}},scrollTo:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);s&&s.element&&s.scrollTo(t,i)},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.destroy()},validation:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);s&&s.element&&s.getTooltipPosition(t,i)},addSelectedEventClass:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.eventBase&&i.eventBase.addSelectedAppointments([].slice.call(i.element.querySelectorAll('div[data-guid="'+t+'"]')))},addSelectedClass:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.currentCell&&t.selectCell(t.currentCell)},createQuickPopup:function(e,t,i,s){var n=window.sfBlazor.getCompInstance(e);n&&n.element&&n.createQuickPopup(t,i,s)},adjustPopupPosition:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.adjustPopupPosition()},closeQuickInfoPopup:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.onQuickPopupClose(!1,!0)},createMoreEventPopup:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);s&&s.element&&s.createMoreEventPopup(t,i)},moreEventPopupClose:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.onMoreEventPopupClose()},dataReady:function(e,t,i,s){var n=window.sfBlazor.getCompInstance(e);n&&n.element&&(n.uiStateValues.isGroupAdaptive=t,n.dataReady(i,s))},beforeOpenEditor:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.beforeOpenEditor()},scrollContentReady:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.scrollContentReady(t)},scrollToResource:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);s&&s.element&&s.scrollToResource(t,i)},printSchedule:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.print()},inlineEdit:function(e,t,i,s,n,o){void 0===s&&(s=null);var r=window.sfBlazor.getCompInstance(e);r&&r.element&&r.inlineEdit(t,i,s,n,o)},setWorkHours:function(e,t,i,s,n){var o=window.sfBlazor.getCompInstance(e);o&&o.element&&o.setWorkHours(t,i,s,n)},resetWorkHours:function(e,t,i,s,n){var o=window.sfBlazor.getCompInstance(e);o&&o.element&&o.resetWorkHours(t,i,s,n)},getSelectedDetails:function(e,i){var s=window.sfBlazor.getCompInstance(e);if(s&&s.element){if(i){var n=[];return(o=[].slice.call(s.element.querySelectorAll("."+t))).forEach((function(e){n.push(e.getAttribute("data-guid"))})),JSON.stringify(n)}var o=s.getSelectedElements(),r=s.getCellDetails(o);return r.startTime=v(r.startTime),r.endTime=v(r.endTime),JSON.stringify(r)}return null},ctrlKeySelect:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&i.ctrlKeySelect(t)},getTargetDetails:function(e,t,i,s){var n=window.sfBlazor.getCompInstance(e);if(n&&n.element){var o=document.elementFromPoint(t,i),r=void 0;if(o&&"event"===s){if(r=sf.base.closest(o,".e-appointment"))return JSON.stringify(r.getAttribute("data-guid"))}else if(o&&"cell"===s){if(r=sf.base.closest(o,".e-header-cells,.e-all-day-cells,.e-work-cells")){var a=n.getCellDetails(r);return a.startTime=v(a.startTime),a.endTime=v(a.endTime),JSON.stringify(a)}}else if(o&&"resource"===s)return r=sf.base.closest(o,".e-resource-cells"),JSON.stringify(r.getAttribute("data-group-index"));return null}return null},getRowIndex:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);if(s&&s.element){var n=document.elementFromPoint(t,i),o=void 0;return n?(o=sf.base.closest(n,".e-resource-cells"),JSON.stringify(o.parentNode.sectionRowIndex.toString())):null}return null},getElementInfo:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);if(s&&s.element){var n=document.elementFromPoint(t,i);if(!n)return null;var o={elementType:""},r=sf.base.closest(n,".e-appointment");if(r)return o.elementType="event",o.guid=r.getAttribute("data-guid"),JSON.stringify(o);var a=sf.base.closest(n,".e-header-cells,.e-all-day-cells,.e-work-cells");if(a){a.classList.contains("e-work-cells")?o.elementType="workCell":a.classList.contains("e-all-day-cells")?o.elementType="allDayCell":a.classList.contains("e-header-cells")&&(o.elementType="headerCell");var l=s.getCellDetails(a);return o.startTime=v(l.startTime),o.endTime=v(l.endTime),o.isAllDay=l.isAllDay,"workCell"===o.elementType&&(o.groupIndex=parseInt(a.getAttribute("data-group-index"),10)),JSON.stringify(o)}var h=sf.base.closest(n,".e-resource-cells,.e-resource-column");if(h){o.elementType="resource";var d=!0;return d=("TimelineYear"!==s.options.currentView||!h.closest(".e-horizontal"))&&d,s.isTimelineView()&&d?(o.groupIndex=parseInt(h.getAttribute("data-group-index"),10),JSON.stringify(o)):(o.rowIndex=h.parentNode.sectionRowIndex,o.colIndex=h.cellIndex,JSON.stringify(o))}var c=sf.base.closest(n,".e-time-slots");if(c){var p=-1,u=void 0;s.isTimelineView()?(p=c.cellIndex,u=s.element.querySelectorAll(".e-content-wrap tbody td:nth-child("+(p+1)+") .e-work-cells")[0]):(p=c.parentElement.rowIndex,u=s.element.querySelectorAll(".e-content-wrap tbody tr:nth-child("+(p+1)+") .e-work-cells")[0]);l=s.getCellDetails(u);return o.startTime=v(l.startTime),o.endTime=v(l.endTime),o.elementType="majorSlot",c.classList.contains("e-time-cells")&&(o.elementType="minorSlot"),JSON.stringify(o)}}return null},updateEventProps:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&(i.options.enableIndicator=t.enableIndicator,i.options.enableMaxHeight=t.enableMaxHeight,i.options.ignoreWhitespace=t.ignoreWhitespace)}}}()},"./modules/sf-sidebar.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Sidebar=function(){"use strict";var e="Left",t=function(){function t(e,t,i,s){this.enableGestures=!0,this.isOpen=!1,this.closeOnDocumentClick=!1,this.isPositionChange=!1,this.dockSize="auto",this.width="auto",this.isSwipChange=!1,this.element=t,this.dataId=e,window.sfBlazor.setCompInstance(this),this.dotnetRef=i,this.resetProperty(s)}return t.prototype.initialize=function(){this.setTarget(),this.addClass(),this.setType(),this.setCloseOnDocumentClick(),this.setMediaQuery(),sf.base.Browser.isDevice&&(this.windowWidth=window.innerWidth),this.wireEvents()},t.prototype.addClass=function(){var e=document.querySelector(".e-main-content");sf.base.isNullOrUndefined(e||this.targetElement)||sf.base.addClass([e||this.targetElement],["e-content-animation"])},t.prototype.setTarget=function(){this.targetElement=this.element.nextElementSibling,"string"==typeof this.target&&(this.target=document.querySelector(this.target)),this.target&&(this.target.insertBefore(this.element,this.target.children[0]),sf.base.addClass([this.element],"e-sidebar-absolute"),sf.base.addClass([this.target],"e-sidebar-context"),this.targetElement=this.getTargetElement())},t.prototype.getTargetElement=function(){for(var e=this.element.nextElementSibling;!sf.base.isNullOrUndefined(e)&&e.classList.contains("e-sidebar");)e=e.nextElementSibling;return e},t.prototype.hide=function(){var t=this,i=document.querySelector(".e-main-content")||this.targetElement;!this.enableDock&&i&&(i.style.transform="translateX(0px)",i.style[this.position===e?"marginLeft":"marginRight"]="0px"),this.destroyBackDrop(),this.isOpen=!1,this.sidebarOpened=!1,this.enableDock&&setTimeout((function(){return t.sidebarTimeout()}),50),sf.base.EventHandler.add(this.element,"transitionend",this.transitionEnd,this)},t.prototype.show=function(e){var t=this;e&&setTimeout((function(){return t.setType()}),50),this.isOpen=!0,this.sidebarOpened=!0,sf.base.EventHandler.add(this.element,"transitionend",this.transitionEnd,this)},t.prototype.transitionEnd=function(t){if(this.enableDock&&!this.isOpen){var i=this.position===e?"-100":"100",s=this.position===e?this.setDimension(this.dockSize):"-"+this.setDimension(this.dockSize),n="z-index: "+this.element.style.zIndex+"; width: "+this.element.style.width+";"+" transform: translateX("+i+"%) translateX("+s+")";this.element.setAttribute("style",n)}this.dotnetRef.invokeMethodAsync("SetDock"),sf.base.isNullOrUndefined(t)||this.dotnetRef.invokeMethodAsync("TriggerChange",this.isOpen,t),sf.base.EventHandler.remove(this.element,"transitionend",this.transitionEnd)},t.prototype.createBackDrop=function(e){var t=this.target;(this.backDropApplied=this.showBackdrop,this.resetProperty(e),this.showBackdrop&&this.sidebarOpened)?(this.backDropApplied&&this.destroyBackDrop(),this.modal=sf.base.createElement("div"),this.modal.className="e-sidebar-overlay",this.modal.style.display="block",this.target||t||!this.backDropApplied?(document.querySelector(".e-main-content")||this.targetElement).appendChild(this.modal):document.body.appendChild(this.modal)):this.destroyBackDrop()},t.prototype.destroyBackDrop=function(){(this.showBackdrop||this.backDropApplied)&&this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null)},t.prototype.enableGestureHandler=function(t){!this.isOpen&&(this.position===e&&"Right"===t.swipeDirection&&t.startX<=20&&t.distanceX>=50&&t.velocity>=.5||"Right"===this.position&&t.swipeDirection===e&&window.innerWidth-t.startX<=20&&t.distanceX>=50&&t.velocity>=.5)?(this.eventArgs={left:this.getXYValue(event,"X"),top:this.getXYValue(event,"Y")},this.dotnetRef.invokeMethodAsync("TriggerShow",this.eventArgs),this.show(),this.isSwipChange=!0):(this.isOpen&&this.position===e&&t.swipeDirection===e||"Right"===this.position&&"Right"===t.swipeDirection)&&(this.eventArgs={left:this.getXYValue(event,"X"),top:this.getXYValue(event,"Y")},this.dotnetRef.invokeMethodAsync("TriggerHide",this.eventArgs),this.hide(),this.isSwipChange=!1)},t.prototype.resize=function(){this.setMediaQuery(),sf.base.Browser.isDevice&&(this.windowWidth=window.innerWidth)},t.prototype.setEnableGestures=function(e){this.resetProperty(e),this.enableGestures?(this.mainContentElement=new sf.base.Touch(document.body,{swipe:this.enableGestureHandler.bind(this)}),this.sidebarElement=new sf.base.Touch(this.element,{swipe:this.enableGestureHandler.bind(this)})):this.mainContentElement&&this.sidebarElement&&(this.mainContentElement.destroy(),this.sidebarElement.destroy())},t.prototype.wireEvents=function(){this.setEnableGestures(),window.addEventListener("resize",this.resize.bind(this))},t.prototype.unWireEvents=function(){window.removeEventListener("resize",this.resize.bind(this)),sf.base.EventHandler.remove(document,"mousedown touchstart",this.documentclickHandler),this.mainContentElement&&this.mainContentElement.destroy(),this.sidebarElement&&this.sidebarElement.destroy()},t.prototype.documentclickHandler=function(e){sf.base.closest(e.target,".e-control.e-sidebar")||(this.eventArgs={left:this.getXYValue(event,"X"),top:this.getXYValue(event,"Y")},this.dotnetRef.invokeMethodAsync("TriggerHide",this.eventArgs))},t.prototype.setCloseOnDocumentClick=function(e){this.resetProperty(e),this.closeOnDocumentClick?sf.base.EventHandler.add(document,"mousedown touchstart",this.documentclickHandler,this):sf.base.EventHandler.remove(document,"mousedown touchstart",this.documentclickHandler)},t.prototype.setMediaQuery=function(){this.mediaQuery&&this.windowWidth!==window.innerWidth&&(window.matchMedia(this.mediaQuery).matches?this.dotnetRef.invokeMethodAsync("TriggerShow",null):this.isOpen&&this.dotnetRef.invokeMethodAsync("TriggerHide",null))},t.prototype.setDimension=function(e){return e="number"==typeof e?sf.base.formatUnit(e):"string"==typeof e?e.match(/px|%|em/)?e:sf.base.formatUnit(e):"100%"},t.prototype.sidebarTimeout=function(){var e=document.querySelector(".e-main-content")||this.targetElement,t=this.isOpen?this.setDimension(this.width):this.setDimension(this.dockSize),i=this.setDimension(this.element.getBoundingClientRect().width);e&&(this.isOpen?this.positionStyles(this.width,e,i,t):this.element.classList.contains("e-close")&&this.positionStyles(this.dockSize,e,i,t))},t.prototype.positionStyles=function(t,i,s,n){this.position===e?i.style.marginLeft="auto"===t?s:n:i.style.marginRight="auto"===t?s:n},t.prototype.siblingStyle=function(t,i){t.style[this.position===e?"marginLeft":"marginRight"]=i},t.prototype.resetProperty=function(e){sf.base.isNullOrUndefined(e)||(this.type=e.Type,this.isOpen=e.IsOpen,this.isPositionChange=this.position!==e.Position,this.position=e.Position,this.enableDock=e.EnableDock,this.showBackdrop=e.ShowBackdrop,this.target=e.Target,this.enableGestures=e.EnableGestures,this.closeOnDocumentClick=e.CloseOnDocumentClick,this.mediaQuery=e.MediaQuery,this.dockSize=e.DockSize,this.width=e.Width)},t.prototype.getXYValue=function(e,t){var i,s=e.changedTouches;if(!(i="X"===t?s?s[0].clientX:e.clientX:s?s[0].clientY:e.clientY)&&"focus"===e.type&&e.target){var n=e.target.getBoundingClientRect();i=n?"X"===t?n.left:n.top:null}return Math.ceil(i)},t.prototype.setType=function(t){this.resetProperty(t);var i="auto"!==this.width&&this.enableDock?this.setDimension(this.width):this.element.getBoundingClientRect().width;i=this.enableDock&&!this.isOpen?this.dockSize:this.enableDock||this.isOpen?i:0;var s=document.querySelector(".e-main-content")||this.targetElement;if(s){this.isPositionChange&&(s.style[this.position===e?"marginRight":"marginLeft"]="0px"),s.style.transform="translateX(0px)",sf.base.Browser.isDevice||"Auto"===this.type||(s.style[this.position===e?"marginLeft":"marginRight"]="0px"),this.isPositionChange=!1;var n="string"==typeof i?i:i+"px",o=this.position===e?i:-i,r=s&&(this.enableDock||this.isOpen||this.isSwipChange);switch(this.type){case"Push":r&&this.siblingStyle(s,n);break;case"Slide":r&&(s.style.transform="translateX("+o+"px)",this.siblingStyle(s,n));break;case"Over":this.enableDock&&this.element.classList.contains("e-close")&&this.siblingStyle(s,n);break;case"Auto":sf.base.Browser.isDevice?this.enableDock&&!this.isOpen&&this.siblingStyle(s,n):this.enableDock||this.isOpen||this.isSwipChange?this.siblingStyle(s,n):this.enableDock||this.isOpen||this.siblingStyle(s,n),this.isSwipChange=!1}}},t.prototype.destroy=function(){this.destroyBackDrop(),this.element.style.width=this.element.style.zIndex=this.element.style.transform="",this.windowWidth=null,this.mediaQuery=null;var e=document.querySelector(".e-main-content")||this.targetElement;sf.base.isNullOrUndefined(e)||(e.style.margin=e.style.transform=""),this.unWireEvents()},t}();return{initialize:function(e,i,s,n){new t(e,i,s,n);var o=window.sfBlazor.getCompInstance(e);return i&&!sf.base.isNullOrUndefined(o)&&(o.initialize(),sf.base.removeClass([i],"e-hidden")),!(sf.base.Browser.isDevice||!sf.base.isNullOrUndefined(n.MediaQuery)&&!window.matchMedia(n.MediaQuery).matches)||!(!sf.base.Browser.isDevice||!n.IsOpen)},setType:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.setType(t)},hide:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.setType(t),i.hide())},show:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s)||(s.setType(t),s.show(i),s.createBackDrop(t))},onPropertyChange:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(void 0!==t.CloseOnDocumentClick&&i.setCloseOnDocumentClick(t),void 0!==t.ShowBackdrop&&i.createBackDrop(t))},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.destroy()}}}()},"./modules/sf-signature.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Signature=function(){"use strict";var e,t,i=(e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)},function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.minDistance=5,t.previous=0,t.interval=30,t.timeout=null,t.isSignatureEmpty=!0,t.backgroundLoaded=null,t.clearArray=[],t.isBlazor=!1,t.isResponsive=!1,t.signPointsColl=[],t.signRatioPointsColl=[],t}return i(t,e),t.prototype.initialize=function(e,t){this.element=e,this.canvasContext=this.element.getContext("2d"),this.canvasContext.canvas.tabIndex=-1,t&&(this.dotnetRef=t,this.isBlazor=!0,this.signatureValue&&this.loadPersistedSignature()),this.setHTMLProperties(),sf.base.isNullOrUndefined(this.signatureValue)&&this.updateSnapCollection(!0),this.wireEvents(),this.isBlazor||this.trigger("created",null)},t.prototype.wireEvents=function(){!sf.base.isNullOrUndefined(this.pointColl)||this.isReadOnly||this.disabled?this.pointColl&&(sf.base.EventHandler.add(this.canvasContext.canvas,"mousemove touchmove",this.mouseMoveHandler,this),sf.base.EventHandler.add(this.canvasContext.canvas,"mouseup touchend",this.mouseUpHandler,this),sf.base.EventHandler.add(document,"mouseup",this.mouseUpHandler,this)):(sf.base.EventHandler.add(this.canvasContext.canvas,"mousedown touchstart",this.mouseDownHandler,this),sf.base.EventHandler.add(this.canvasContext.canvas,"keydown",this.keyboardHandler,this),window.addEventListener("resize",this.resizeHandler.bind(this)))},t.prototype.unwireEvents=function(e){"mouseup"===e||"touchend"===e?(sf.base.EventHandler.remove(this.canvasContext.canvas,"mousemove touchmove",this.mouseMoveHandler),sf.base.EventHandler.remove(this.canvasContext.canvas,"mouseup touchend",this.mouseUpHandler),sf.base.EventHandler.remove(document,"mouseup",this.mouseUpHandler)):(sf.base.EventHandler.remove(this.canvasContext.canvas,"mousedown touchstart",this.mouseDownHandler),sf.base.EventHandler.remove(this.canvasContext.canvas,"keydown",this.keyboardHandler),window.removeEventListener("resize",this.resizeHandler))},t.prototype.setHTMLProperties=function(){150===this.element.height&&300===this.element.width?(this.element.height=this.element.offsetHeight,this.element.width=this.element.offsetWidth,this.isResponsive=!0):this.element.height===this.element.offsetHeight-1&&this.element.width===this.element.offsetWidth-1||(this.element.height=this.element.offsetHeight,this.element.width=this.element.offsetWidth),this.canvasContext.scale(1,1),this.canvasContext.fillStyle=this.strokeColor,this.backgroundImage?(this.canvasContext.canvas.style.backgroundImage="url("+this.backgroundImage+")",this.canvasContext.canvas.style.backgroundRepeat="no-repeat"):this.backgroundColor&&(this.canvasContext.canvas.style.backgroundColor=this.backgroundColor)},t.prototype.mouseDownHandler=function(e){1!==e.buttons&&2!==e.buttons&&"touchstart"!==e.type||("touchstart"===e.type&&(e.preventDefault(),e.stopPropagation()),this.beginStroke(e),this.wireEvents())},t.prototype.mouseMoveHandler=function(e){1!==e.buttons&&2!==e.buttons&&"touchmove"!==e.type||("touchmove"===e.type&&(e.preventDefault(),e.stopPropagation()),this.interval?this.updateStrokeWithThrottle(e):this.updateStroke(e))},t.prototype.mouseUpHandler=function(e){"touchstart"===e.type&&(e.preventDefault(),e.stopPropagation()),this.endDraw(),this.updateSnapCollection(),this.unwireEvents(e.type),this.isBlazor?this.dotnetRef.invokeMethodAsync("TriggerEventAsync","mouseUp"):this.trigger("change",{actionName:"strokeUpdate"}),this.signatureValue=this.snapColl[this.incStep];for(var t=0;t<this.signPointsColl.length;t++)this.signRatioPointsColl.push({x:this.signPointsColl[t].x/this.canvasContext.canvas.width,y:this.signPointsColl[t].y/this.canvasContext.canvas.height});this.signPointsColl=[]},t.prototype.keyboardHandler=function(e){var t=this,i={fileName:"Signature",type:"Png",cancel:!1};switch(e.key){case"Delete":this.clear();break;case e.ctrlKey&&"s":this.isBlazor?this.dotnetRef.invokeMethodAsync("TriggerEventAsync","beforeSave"):this.trigger("beforeSave",i,(function(e){i.cancel||t.save(e.type,e.fileName)})),e.preventDefault(),e.stopImmediatePropagation();break;case e.ctrlKey&&"z":this.undo();break;case e.ctrlKey&&"y":this.redo()}},t.prototype.resizeHandler=function(){var e=this;if(this.isResponsive){this.canvasContext.canvas.width=this.element.offsetWidth,this.canvasContext.canvas.height=this.element.offsetHeight,this.canvasContext.scale(1,1);for(var t=(this.minStrokeWidth+this.maxStrokeWidth)/2,i=0;i<this.signRatioPointsColl.length;i++)this.arcDraw(this.signRatioPointsColl[i].x*this.canvasContext.canvas.width,this.signRatioPointsColl[i].y*this.canvasContext.canvas.height,t);this.signPointsColl=[],this.canvasContext.closePath(),this.canvasContext.fill()}else{var s=new Image;s.src=this.snapColl[this.incStep],s.onload=function(){e.canvasContext.clearRect(0,0,e.element.width,e.element.height),e.canvasContext.drawImage(s,0,0,e.element.width,e.element.height)}}},t.prototype.beginStroke=function(e){this.refresh(),this.updateStroke(e)},t.prototype.updateStroke=function(e){var t=this.createPoint(e);this.addPoint(t)},t.prototype.updateStrokeWithThrottle=function(e){var t=Date.now(),i=this.interval-(t-this.previous);this.storedArgs=e,i<=0||i>this.interval?(this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.previous=t,this.updateStroke(this.storedArgs),this.timeout||(this.storedArgs=null)):this.timeout||(this.timeout=window.setTimeout(this.delay.bind(this),i))},t.prototype.delay=function(){this.previous=Date.now(),this.timeout=null,this.updateStroke(this.storedArgs),this.timeout||(this.storedArgs=null)},t.prototype.createPoint=function(e){var t=this.canvasContext.canvas.getBoundingClientRect();return"mousedown"===e.type||"mousemove"===e.type?this.point(e.clientX-t.left,e.clientY-t.top,(new Date).getTime()):this.point(e.touches[0].clientX-t.left,e.touches[0].clientY-t.top,(new Date).getTime())},t.prototype.point=function(e,t,i){return this.pointX=e,this.pointY=t,this.time=i||(new Date).getTime(),{x:this.pointX,y:this.pointY,time:this.time}},t.prototype.addPoint=function(e){var t,i,s=this.pointColl,n=s.length>0&&s[s.length-1],o=!!n&&this.distanceTo(n)<=this.minDistance;n&&n&&o||(s.push(e),s.length>2&&(3===s.length&&s.unshift(s[0]),t=this.calculateCurveControlPoints(s[0],s[1],s[2]).controlPoint2,i=this.calculateCurveControlPoints(s[1],s[2],s[3]).controlPoint1,this.startPoint=s[1],this.controlPoint1=t,this.controlPoint2=i,this.endPoint=s[2],this.startDraw(),s.shift()))},t.prototype.startDraw=function(){var e;e=this.pointVelocityCalc(this.startPoint),e=this.velocity*e+(1-this.velocity)*this.lastVelocity;var t=Math.max(this.maxStrokeWidth/(e+1),this.minStrokeWidth);this.curveDraw(this.lastWidth,t),this.lastVelocity=e,this.lastWidth=t},t.prototype.endDraw=function(){var e=this.pointColl.length>2,t=this.pointColl[0];!e&&t&&this.strokeDraw(t)},t.prototype.curveDraw=function(e,t){var i,s,n,o,r,a,l,h,d,c,p=this.canvasContext,u=t-e,f=this.bezierLengthCalc(),g=2*Math.ceil(f);for(p.beginPath(),s=0;s<g;s++)r=(o=(n=s/g)*n)*n,d=(h=(l=(a=1-n)*a)*a)*this.startPoint.x,d+=3*l*n*this.controlPoint1.x,d+=3*a*o*this.controlPoint2.x,d+=r*this.endPoint.x,c=h*this.startPoint.y,c+=3*l*n*this.controlPoint1.y,c+=3*a*o*this.controlPoint2.y,c+=r*this.endPoint.y,i=Math.min(e+r*u,this.maxStrokeWidth),this.arcDraw(d,c,i);p.closePath(),p.fill(),this.isSignatureEmpty=!1},t.prototype.strokeDraw=function(e){var t=this.canvasContext,i=(this.minStrokeWidth+this.maxStrokeWidth)/2;t.beginPath(),this.arcDraw(e.x,e.y,i),t.closePath(),t.fill(),this.isSignatureEmpty=!1},t.prototype.arcDraw=function(e,t,i){this.signPointsColl.push({x:e,y:t});var s=this.canvasContext;s.moveTo(e,t),s.arc(e,t,i,0,2*Math.PI,!1)},t.prototype.calculateCurveControlPoints=function(e,t,i){var s=e.x-t.x,n=e.y-t.y,o=t.x-i.x,r=t.y-i.y,a=(e.x+t.x)/2,l=(e.y+t.y)/2,h=(t.x+i.x)/2,d=(t.y+i.y)/2,c=Math.sqrt(s*s+n*n),p=Math.sqrt(o*o+r*r),u=p/(c+p),f=h+(a-h)*u,g=d+(l-d)*u,m=t.x-f,v=t.y-g;return{controlPoint1:this.point(a+m,l+v,0),controlPoint2:this.point(h+m,d+v,0)}},t.prototype.bezierLengthCalc=function(){var e,t,i,s,n,o,r,a,l=0;for(e=0;e<=10;e++)t=e/10,i=this.bezierPointCalc(t,this.startPoint.x,this.controlPoint1.x,this.controlPoint2.x,this.endPoint.x),s=this.bezierPointCalc(t,this.startPoint.y,this.controlPoint1.y,this.controlPoint2.y,this.endPoint.y),e>0&&(r=i-n,a=s-o,l+=Math.sqrt(r*r+a*a)),n=i,o=s;return l},t.prototype.bezierPointCalc=function(e,t,i,s,n){return t*(1-e)*(1-e)*(1-e)+3*i*(1-e)*(1-e)*e+3*s*(1-e)*e*e+n*e*e*e},t.prototype.pointVelocityCalc=function(e){return this.time!==e.time?this.distanceTo(e)/(this.time-e.time):0},t.prototype.distanceTo=function(e){return Math.sqrt(Math.pow(this.pointX-e.x,2)+Math.pow(this.pointY-e.y,2))},t.prototype.isRead=function(e){e?sf.base.EventHandler.remove(this.canvasContext.canvas,"mousedown touchstart",this.mouseDownHandler):this.disabled||sf.base.EventHandler.add(this.canvasContext.canvas,"mousedown touchstart",this.mouseDownHandler,this)},t.prototype.enableOrDisable=function(e){this.disabled=e,e?(this.canvasContext.canvas.style.filter="opacity(0.5)",this.isRead(!0)):(this.canvasContext.canvas.style.filter="",this.isRead(!1))},t.prototype.updateSnapCollection=function(e){if(sf.base.isNullOrUndefined(this.incStep)?(this.incStep=-1,this.incStep++,this.snapColl=[],this.clearArray=[]):this.incStep++,this.incStep<this.snapColl.length&&(this.snapColl.length=this.incStep),this.incStep>0){var t=this.createElement("canvas",{className:"e-"+this.getModuleName()+"-wrapper"}),i=t.getContext("2d");t.width=this.canvasContext.canvas.width,t.height=this.canvasContext.canvas.height,i.drawImage(this.canvasContext.canvas,0,0,t.width,t.height),this.snapColl.push(t.toDataURL())}else this.snapColl.push(this.canvasContext.canvas.toDataURL());e&&this.clearArray.push(this.incStep)},t.prototype.setBackgroundImage=function(e){var t=this,i=new Image;i.crossOrigin="anonymous",i.src=e,i.onload=function(){t.canvasContext.globalCompositeOperation="source-over",t.canvasContext.drawImage(i,0,0,t.element.width,t.element.height),t.updateSnapCollection(),t.saveBackground(!0)},this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height)},t.prototype.setBackgroundColor=function(e){var t,i,s=this.canvasContext;for(s.strokeStyle=e,t=1;t<=s.canvas.width;t++)for(i=1;i<=s.canvas.height;i++)s.strokeRect(0,0,t,i);this.updateSnapCollection()},t.prototype.loadPersistedSignature=function(){if(!sf.base.isNullOrUndefined(this.signatureValue)){var e=this,t=new Image;t.src=this.signatureValue,t.onload=function(){e.canvasContext.clearRect(0,0,e.element.width,e.element.height),e.canvasContext.drawImage(t,0,0),e.updateSnapCollection()},this.isSignatureEmpty=!1}},t.prototype.getBlob=function(e){for(var t=e.split(","),i=t[0].match(/:(.*?);/)[1],s=atob(t[1]),n=s.length,o=new Uint8Array(n);n--;)o[n]=s.charCodeAt(n);return new Blob([o],{type:i})},t.prototype.download=function(e,t){var i=URL.createObjectURL(e),s=document.createElement("a");s.href=i,s.target="_parent",s.download=t,(document.body||document.documentElement).appendChild(s),s.click(),s.parentNode.removeChild(s)},t.prototype.refresh=function(){this.pointColl=[],this.lastVelocity=0,this.lastWidth=(this.minStrokeWidth+this.maxStrokeWidth)/2},t.prototype.clear=function(){this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height),this.refresh(),this.signRatioPointsColl=[],this.updateSnapCollection(!0),this.isSignatureEmpty=!0,this.isBlazor?this.dotnetRef.invokeMethodAsync("TriggerEventAsync","Clear"):this.trigger("change",{actionName:"clear"})},t.prototype.undo=function(){var e=this;if(this.incStep>0){this.incStep--;var t=new Image;t.src=this.snapColl[this.incStep],t.onload=function(){e.canvasContext.clearRect(0,0,e.element.width,e.element.height),e.canvasContext.drawImage(t,0,0,e.element.width,e.element.height)}}this.isClear(),this.isBlazor?this.dotnetRef.invokeMethodAsync("TriggerEventAsync","Undo"):this.trigger("change",{actionName:"undo"})},t.prototype.redo=function(){var e=this;if(this.incStep<this.snapColl.length-1){this.incStep++;var t=new Image;t.src=this.snapColl[this.incStep],t.onload=function(){e.canvasContext.clearRect(0,0,e.element.width,e.element.height),e.canvasContext.drawImage(t,0,0,e.element.width,e.element.height)}}this.isClear(),this.isBlazor?this.dotnetRef.invokeMethodAsync("TriggerEventAsync","Redo"):this.trigger("change",{actionName:"redo"})},t.prototype.isClear=function(){if(this.clearArray){for(var e=!1,t=0;t<this.clearArray.length;t++)this.clearArray[t]===this.incStep&&(this.isSignatureEmpty=!0,e=!0);e||(this.isSignatureEmpty=!1)}},t.prototype.isEmpty=function(){return this.isSignatureEmpty},t.prototype.canUndo=function(){return this.incStep>0},t.prototype.canRedo=function(){return this.incStep<this.snapColl.length-1},t.prototype.draw=function(e,t,i){this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height),t=t||"Arial",i=i||30,this.canvasContext.font=i+"px "+t,this.canvasContext.textAlign="center",this.canvasContext.textBaseline="middle",this.canvasContext.fillText(e,this.element.width/2,this.element.height/2),this.updateSnapCollection(),this.isSignatureEmpty=!1,this.trigger("change",{actionName:"draw-text"})},t.prototype.load=function(e,t,i){i=i||this.element.height,t=t||this.element.width,this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height);var s=this,n=new Image;n.src=e,"data"!==e.slice(0,4)&&(n.crossOrigin="anonymous"),n.onload=function(){Promise.all([createImageBitmap(n,0,0,t,i)]).then((function(n){var o=document.createElement("canvas");o.width=t,o.height=i,o.getContext("2d").drawImage(n[0],0,0),"data"!==e.slice(0,4)&&(s.canvasContext.globalCompositeOperation="source-over"),s.canvasContext.drawImage(o,0,0,t,i,0,0,s.element.width,s.element.height),s.updateSnapCollection()}))},this.isSignatureEmpty=!1},t.prototype.saveBackground=function(e){var t;if(t=e&&this.backgroundImage?this.snapColl[this.incStep-1]:this.snapColl[this.incStep],e||(this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height),this.backgroundImage?this.setBackgroundImage(this.backgroundImage):this.backgroundColor&&(this.setBackgroundColor(this.backgroundColor),e=!0)),e){var i=this,s=new Image;s.crossOrigin="anonymous",s.src=t,s.onload=function(){i.backgroundLoaded=!0,i.canvasContext.globalCompositeOperation="source-over",i.canvasContext.drawImage(s,0,0,i.element.width,i.element.height),i.save(i.fileType,i.fileName)}}},t.prototype.save=function(e,t){if(this.saveWithBackground&&null==this.backgroundLoaded&&(this.backgroundImage||this.backgroundColor))this.backgroundLoaded=!1,this.fileType=e,this.fileName=t,this.saveBackground(!1);else if("Svg"===e)t=t||"Signature",this.toSVG(t);else if("Jpeg"===e)if(t=t||"Signature",!this.saveWithBackground||this.saveWithBackground&&!this.backgroundImage&&!this.backgroundColor)this.toJPEG(t);else{var i=this.canvasContext.canvas.toDataURL("image/jpeg");this.download(this.getBlob(i),t+".jpeg")}else{t=t||"Signature";i=this.canvasContext.canvas.toDataURL("image/png");this.download(this.getBlob(i),t+".png")}this.saveWithBackground&&this.backgroundLoaded&&this.resetSnap()},t.prototype.resetSnap=function(){this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height);var e=this,t=new Image;t.src=this.snapColl[this.incStep-1],t.onload=function(){e.canvasContext.drawImage(t,0,0,e.element.width,e.element.height),e.updateSnapCollection()},this.backgroundLoaded=null,this.snapColl.pop(),this.incStep--,this.snapColl.pop(),this.incStep--},t.prototype.toJPEG=function(e){var t=this,i=this.snapColl[this.incStep];this.setBackgroundColor("#ffffff");var s=this,n=new Image;n.crossOrigin="anonymous",n.src=i,n.onload=function(){s.canvasContext.globalCompositeOperation="source-over",s.canvasContext.drawImage(n,0,0,s.element.width,s.element.height);var i=s.canvasContext.canvas.toDataURL("image/jpeg");s.download(s.getBlob(i),e+".jpeg"),s.canvasContext.clearRect(0,0,s.canvasContext.canvas.width,s.canvasContext.canvas.height),t.resizeHandler()},this.snapColl.pop(),this.incStep--},t.prototype.toSVG=function(e){var t=this.canvasContext.canvas.toDataURL(),i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("width",this.canvasContext.canvas.width.toString()),i.setAttribute("height",this.canvasContext.canvas.height.toString());var s=document.createElementNS("http://www.w3.org/2000/svg","image");s.setAttributeNS(null,"height",this.canvasContext.canvas.height.toString()),s.setAttributeNS(null,"width",this.canvasContext.canvas.width.toString()),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t),i.appendChild(s);var n='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+this.canvasContext.canvas.width+'" height="'+this.canvasContext.canvas.height+'">',o=i.innerHTML,r="data:image/svg+xml;base64,"+btoa(n+o+"</svg>");return null==e?r:(this.download(this.getBlob(r),e+".svg"),null)},t.prototype.saveAsBlob=function(){return this.getBlob(this.canvasContext.canvas.toDataURL("image/png"))},t.prototype.getSignature=function(e){if("Jpeg"===e){for(var t=this.canvasContext.getImageData(0,0,this.element.width,this.element.height),i=t.data,s=0;s<i.length;s+=4)i[s+3]<255&&(i[s]=255-i[s],i[s+1]=255-i[s+1],i[s+2]=255-i[s+2],i[s+3]=255-i[s+3]);this.canvasContext.putImageData(t,0,0);var n=this.canvasContext.canvas.toDataURL("image/jpeg");return this.resizeHandler(),n}return"Svg"===e?this.toSVG(null):this.canvasContext.canvas.toDataURL("image/png")},t.prototype.getModuleName=function(){return"signature"},t.prototype.getPersistData=function(){return this.signatureValue=this.snapColl[this.incStep],this.addOnPersist(["signatureValue"])},t.prototype.destroy=function(){"image-editor"!==this.getModuleName()&&(this.unwireEvents(null),sf.base.removeClass([this.element],"e-"+this.getModuleName()),this.element.removeAttribute("tabindex"),this.pointColl=null),e.prototype.destroy.call(this)},t.prototype.propertyChanged=function(e,t){var i=this.canvasContext;switch(e){case"backgroundColor":i.canvas.style.backgroundColor=t,this.backgroundColor=t;break;case"backgroundImage":i.canvas.style.backgroundImage="url("+t+")",this.backgroundImage=t;break;case"strokeColor":i.fillStyle=t,this.strokeColor=t;break;case"saveWithBackground":this.saveWithBackground=t;break;case"maxStrokeWidth":this.maxStrokeWidth=t;break;case"minStrokeWidth":this.minStrokeWidth=t;break;case"velocity":this.velocity=t;break;case"isReadOnly":this.isRead(t);break;case"disabled":this.enableOrDisable(t)}},t}(sf.base.Component),n=(t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,i)},function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}),o=function(){function e(e,t,i,s){this.dataId=e,this.element=t,window.sfBlazor.setCompInstance(this),this.dotnetRef=s,this.signatureBase=new r,this.signatureBase.backgroundColor=i.backgroundColor,this.signatureBase.backgroundImage=i.backgroundImage,this.signatureBase.strokeColor=i.strokeColor||"#000000",this.signatureBase.isReadOnly=i.isReadOnly,this.signatureBase.disabled=i.disabled,this.signatureBase.saveWithBackground=i.saveWithBackground,this.signatureBase.signatureValue=i.signatureValue,this.signatureBase.minStrokeWidth=i.minStrokeWidth||.5,this.signatureBase.maxStrokeWidth=i.maxStrokeWidth||2,this.signatureBase.velocity=i.velocity||.7}return e.prototype.saveAsBlob=function(e){var t=e.getContext("2d").canvas.toDataURL().split(",");return atob(t[1]).length},e}(),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onPropertyChanged=function(){},t.prototype.preRender=function(){},t.prototype.render=function(){},t}(s);return{initialize:function(e,t,i,s){sf.base.isNullOrUndefined(t)||(new o(e,t,i,s),window.sfBlazor.getCompInstance(e).signatureBase.initialize(t,s))},clear:function(e){window.sfBlazor.getCompInstance(e).signatureBase.clear()},undo:function(e){window.sfBlazor.getCompInstance(e).signatureBase.undo()},redo:function(e){window.sfBlazor.getCompInstance(e).signatureBase.redo()},save:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);switch(t){case 0:s.signatureBase.save("Png",i);break;case 1:s.signatureBase.save("Jpeg",i);break;case 2:s.signatureBase.save("Svg",i)}},draw:function(e,t,i,s){window.sfBlazor.getCompInstance(e).signatureBase.draw(t,i,s)},load:function(e,t,i,s){window.sfBlazor.getCompInstance(e).signatureBase.load(t,i,s)},getSignature:function(e,t){var i=window.sfBlazor.getCompInstance(e);switch(t){case 0:return i.signatureBase.getSignature("Png");case 1:return i.signatureBase.getSignature("Jpeg");case 2:return i.signatureBase.getSignature("Svg")}return null},saveAsBlob:function(e,t){return window.sfBlazor.getCompInstance(e).saveAsBlob(t)},onPropertyChanged:function(e,t,i){window.sfBlazor.getCompInstance(e).signatureBase.propertyChanged(t,i)},isEmpty:function(e){return window.sfBlazor.getCompInstance(e).signatureBase.isEmpty()},canUndo:function(e){return window.sfBlazor.getCompInstance(e).signatureBase.canUndo()},canRedo:function(e){return window.sfBlazor.getCompInstance(e).signatureBase.canRedo()},destroy:function(e){window.sfBlazor.getCompInstance(e).signatureBase.destroy()}}}()},"./modules/sf-slider.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Slider=function(){"use strict";var e="e-handle-focused",t="e-handle-active",i="Horizontal",s=function(){function s(e,t,i,s){this.activeHandle=1,this.initialRendering=!0,this.isClicked=!1,this.isSliderMove=!1,this.isDragRange=!1,this.isTabPressed=!1,this.isKeyPressed=!1,this.transition={handle:"left .4s cubic-bezier(.25, .8, .25, 1), right .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1) , bottom .4s cubic-bezier(.25, .8, .25, 1)",rangeBar:"all .4s cubic-bezier(.25, .8, .25, 1)",scaleTransform:"transform .4s cubic-bezier(.25, .8, .25, 1)"},this.element=t,this.dataId=e,window.sfBlazor.setCompInstance(this),this.dotNetRef=i,this.options=s,this.initialRendering=!0,null===this.options.Value&&(this.options.Value="Range"!==this.options.Type?this.options.Min:[this.options.Min,this.options.Max]),this.options.CustomValues&&(this.options.Min=0,this.options.Max=s.CustomValues.length-1)}return s.prototype.initialize=function(){return this.sliderContainer=this.element.parentElement,this.sliderTrack=this.element.querySelector(".e-slider-track"),this.hiddenInput=this.element.parentElement.querySelector(".e-slider-input"),this.setElementWidth(this.options.Width),0===this.element.getBoundingClientRect().height&&"Vertical"===this.options.Orientation&&(this.element.style.height=this.element.parentElement.getBoundingClientRect().height+"px"),this.setHandler(),this.setZindex(),sf.base.isNullOrUndefined(this.options.Limits)||this.setLimitBarPosition(),this.isMaterial="material"===this.getTheme(this.sliderContainer),sf.base.isNullOrUndefined(this.materialHandle)&&this.isMaterial&&null!==this.options.Tooltip&&"Range"!==this.options.Type&&(this.materialHandle=document.createElement("div"),this.materialHandle.className="e-handle e-material-handle",this.element.appendChild(this.materialHandle)),this.setValue(!1),this.updateColorRangeBarPos(),this.initialRendering&&this.options.Enabled&&!this.options.ReadOnly&&this.wireEvents(),this.getTheme(this.sliderContainer)},s.prototype.rangeBarMousedown=function(e){var t,i;if("mousedown"===e.type&&e.preventDefault(),this.changedEventValue=this.options.Value,"Range"===this.options.Type&&e.target===this.rangeBar){var s=void 0,n=void 0;"mousedown"===e.type?(s=(t=[e.clientX,e.clientY])[0],n=t[1]):"touchstart"===e.type&&(s=(i=[e.changedTouches[0].clientX,e.changedTouches[0].clientY])[0],n=i[1]),"Horizontal"===this.options.Orientation?(this.firstPartRemain=s-this.rangeBar.getBoundingClientRect().left,this.secondPartRemain=this.rangeBar.getBoundingClientRect().right-s):(this.firstPartRemain=n-this.rangeBar.getBoundingClientRect().top,this.secondPartRemain=this.rangeBar.getBoundingClientRect().bottom-n),this.minDiff=this.handleVal2-this.handleVal1;var o=this.element.querySelector(".e-tab-handle");o&&o.classList.remove("e-tab-handle"),sf.base.EventHandler.add(document,"mousemove touchmove",this.dragRangeBarMove,this),sf.base.EventHandler.add(document,"mouseup touchend",this.dragRangeBarUp,this)}},s.prototype.dragRangeBarUp=function(e){this.triggerChangeEvent(this.changedEventValue,e,!0),sf.base.EventHandler.remove(document,"mousemove touchmove",this.dragRangeBarMove),sf.base.EventHandler.remove(document,"mouseup touchend",this.dragRangeBarUp),this.isDragRange=!0},s.prototype.triggerChangeEvent=function(e,t,i){if(null!==this.options.Events){var s="touchend"===t.type||t.currentTarget===document;this.options.Events.onChange.hasDelegate&&s&&!this.options.IsImmediateValue&&this.isValueChange(e)&&this.invokeEvent(e,!1),(s||i)&&this.options.Events.valueChange.hasDelegate&&this.isValueChange(e)&&(this.invokeEvent(e,!0),this.changedEventValue=this.options.Value)}},s.prototype.invokeEvent=function(e,t){this.dotNetRef.invokeMethodAsync("TriggerEvent",{PreviousValue:e,Value:this.options.Value,isValueChanged:t})},s.prototype.handleValueAdjust=function(e,t,i){1===i?(this.handleVal1=t,this.handleVal2=this.handleVal1+this.minDiff):2===i&&(this.handleVal2=t,this.handleVal1=this.handleVal2-this.minDiff),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handlePos2=this.checkHandlePosition(this.handleVal2)},s.prototype.getLimitValueAndPosition=function(e,t,i,s){return sf.base.isNullOrUndefined(t)&&(t=this.options.Min,sf.base.isNullOrUndefined(e)&&s&&(e=t)),sf.base.isNullOrUndefined(i)&&(i=this.options.Max,sf.base.isNullOrUndefined(e)&&s&&(e=i)),e<t&&(e=t),e>i&&(e=i),[e,this.checkHandlePosition(e)]},s.prototype.dragRangeBarMove=function(e){var t,i,s,n,o;"touchmove"!==e.type&&e.preventDefault(),this.isDragRange=!0,this.rangeBar.style.transition="none",this.firstHandle.style.transition="none",this.secondHandle.style.transition="none","mousemove"===e.type?(n=(t=[e.clientX,e.clientY])[0],o=t[1]):(n=(i=[e.changedTouches[0].clientX,e.changedTouches[0].clientY])[0],o=i[1]),"mousemove"===e.type?s={x:e.clientX,y:e.clientY}:"touchmove"!==e.type&&"touchstart"!==e.type||(s={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY});var r=this.options.Limits;if(sf.base.isNullOrUndefined(r)||(!r.enabled||!r.startHandleFixed)&&(!r.enabled||!r.endHandleFixed)){if(s=this.options.EnableRtl?{x:n+this.secondPartRemain,y:o+this.secondPartRemain}:{x:n-this.firstPartRemain,y:o+this.secondPartRemain},this.options.Min>this.options.Max?(this.handlePos2=this.xyToPosition(s),this.handleVal2=this.positionToValue(this.handlePos2)):(this.handlePos1=this.xyToPosition(s),this.handleVal1=this.positionToValue(this.handlePos1)),s=this.options.EnableRtl?{x:n-this.firstPartRemain,y:o-this.firstPartRemain}:{x:n+this.secondPartRemain,y:o-this.firstPartRemain},this.options.Min>this.options.Max?(this.handlePos1=this.xyToPosition(s),this.handleVal1=this.positionToValue(this.handlePos1)):(this.handlePos2=this.xyToPosition(s),this.handleVal2=this.positionToValue(this.handlePos2)),!sf.base.isNullOrUndefined(this.options.Limits)&&this.options.Limits.enabled){var a=this.getLimitValueAndPosition(this.handleVal1,r.minStart,r.minEnd);this.handleVal1=a[0],this.handlePos1=a[1],this.handleVal1===r.minEnd&&this.handleValueAdjust(this.handleVal1,r.minEnd,1),this.handleVal1===r.minStart&&this.handleValueAdjust(this.handleVal1,r.minStart,1),a=this.getLimitValueAndPosition(this.handleVal2,r.maxStart,r.maxEnd),this.handleVal2=a[0],this.handlePos2=a[1],this.handleVal2===r.maxStart&&this.handleValueAdjust(this.handleVal2,r.maxStart,2),this.handleVal2===r.maxEnd&&this.handleValueAdjust(this.handleVal2,r.maxEnd,2)}this.handleVal2===(this.options.Min>this.options.Max?this.options.Min:this.options.Max)&&this.handleValueAdjust(this.handleVal2,this.options.Min>this.options.Max?this.options.Min:this.options.Max,2),this.handleVal1===(this.options.Min>this.options.Max?this.options.Max:this.options.Min)&&this.handleValueAdjust(this.handleVal1,this.options.Min>this.options.Max?this.options.Max:this.options.Min,1)}var l=this.options.IsImmediateValue?this.previousHandleVal:this.changedEventValue?this.changedEventValue:this.previousHandleVal;this.setHandlePosition(e),this.updateValue(),"Default"!==this.options.Type&&(this.rangeBar.style.transition=this.transition.rangeBar,this.setRangeBarPosition()),null!==this.options.Events&&this.options.Events.onChange.hasDelegate&&this.isValueChange(l)&&this.options.IsImmediateValue&&this.invokeEvent(l,!1)},s.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"click",this.clickHandler,this),sf.base.EventHandler.add(this.element,"keydown",this.keyDown,this),sf.base.EventHandler.add(this.element,"keyup",this.keyUp,this),sf.base.EventHandler.add(this.element,"focusout",this.focusOut,this),"Range"===this.options.Type&&sf.base.EventHandler.add(this.rangeBar,"mousedown touchstart",this.rangeBarMousedown,this),this.onResize=this.reposition.bind(this),window.addEventListener("resize",this.onResize),this.wireFirstHandleEventArgs(),"Range"===this.options.Type&&this.wireSecondHandleEventArgs()},s.prototype.wireFirstHandleEventArgs=function(){sf.base.EventHandler.add(this.firstHandle,"mousedown touchstart",this.handleFocus,this),sf.base.EventHandler.add(this.firstHandle,"mouseup touchend",this.sliderBarUp,this)},s.prototype.wireSecondHandleEventArgs=function(){sf.base.EventHandler.add(this.secondHandle,"mousedown touchstart",this.handleFocus,this),sf.base.EventHandler.add(this.secondHandle,"mouseup touchend",this.sliderBarUp,this)},s.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,"click",this.clickHandler),sf.base.EventHandler.remove(this.element,"keydown",this.keyDown),sf.base.EventHandler.remove(this.element,"keyup",this.keyUp),sf.base.EventHandler.remove(this.element,"focusout",this.focusOut),"Range"===this.options.Type&&sf.base.EventHandler.remove(this.rangeBar,"mousedown touchstart",this.rangeBarMousedown),window.removeEventListener("resize",this.onResize),this.unWireFirstHandleEventArgs(),"Range"===this.options.Type&&this.unWireSecondHandleEventArgs()},s.prototype.unWireFirstHandleEventArgs=function(){sf.base.EventHandler.remove(this.firstHandle,"mousedown touchstart",this.handleFocus),sf.base.EventHandler.remove(this.firstHandle,"mouseup touchend",this.sliderBarUp)},s.prototype.unWireSecondHandleEventArgs=function(){sf.base.EventHandler.remove(this.secondHandle,"mousedown touchstart",this.handleFocus),sf.base.EventHandler.remove(this.secondHandle,"mouseup touchend",this.sliderBarUp)},s.prototype.isValueChange=function(e){return"Range"===this.options.Type?e[0]!==this.options.Value[0]||e[1]!==this.options.Value[1]:e!==this.options.Value},s.prototype.focusOut=function(){null!==this.options.Tooltip&&this.options.Tooltip.isVisible&&("Range"===this.options.Type||sf.base.isNullOrUndefined(this.materialHandle)||(this.materialHandle.style.transform="scale(1)"),this.dotNetRef.invokeMethodAsync("CloseTooltip")),this.isTabPressed&&this.handleFocusOut()},s.prototype.reposition=function(){this.initialRendering=!1,this.initialize()},s.prototype.handleValueUpdate=function(){return"Range"===this.options.Type?1===this.activeHandle?this.handleVal1:this.handleVal2:this.handleVal1},s.prototype.keyDown=function(e){switch(e.keyCode){case 37:case 38:case 39:case 40:case 33:case 34:case 36:case 35:e.preventDefault(),e.stopImmediatePropagation(),this.buttonClick(e)}},s.prototype.buttonClick=function(e){var t,s=this.options.Value,n=this.options.EnableRtl&&this.options.Orientation===i,o=this.handleValueUpdate();this.options.Limits&&(1===this.activeHandle&&this.options.Limits.startHandleFixed||2===this.activeHandle&&this.options.Limits.endHandleFixed)||(40===e.keyCode||37===e.keyCode||e.currentTarget.classList.contains("e-first-button")?t=n?this.add(o,parseFloat(this.options.Step.toString()),!0):this.add(o,parseFloat(this.options.Step.toString()),!1):38===e.keyCode||39===e.keyCode||e.currentTarget.classList.contains("e-second-button")?t=n?this.add(o,parseFloat(this.options.Step.toString()),!1):this.add(o,parseFloat(this.options.Step.toString()),!0):33===e.keyCode||e.currentTarget.classList.contains("e-first-button")?t=n?this.add(o,parseFloat(this.options.Ticks.largeStep.toString()),!1):this.add(o,parseFloat(this.options.Ticks.largeStep.toString()),!0):34===e.keyCode||e.currentTarget.classList.contains("e-second-button")?t=n?this.add(o,parseFloat(this.options.Ticks.largeStep.toString()),!0):this.add(o,parseFloat(this.options.Ticks.largeStep.toString()),!1):36===e.keyCode?t=parseFloat(this.options.Min.toString()):35===e.keyCode&&(t=parseFloat(this.options.Max.toString())),this.options.Value="Range"!==this.options.Type?t:1===this.activeHandle?[t,this.options.Value[1]]:[this.options.Value[0],t],"Range"===this.options.Type&&(this.options.Value[0]>this.options.Value[1]&&1===this.activeHandle?this.options.Value[0]=this.options.Value[1]:this.options.Value[1]<this.options.Value[0]&&(this.options.Value[1]=this.options.Value[0])),"keydown"===e.type&&"Default"!==this.options.Type&&(this.isKeyPressed=!0),this.setValue(),this.invokeEvent(s,!1),this.isKeyPressed=!1)},s.prototype.handleFocusOut=function(){if(this.firstHandle.classList.contains(e)&&this.firstHandle.classList.remove(e),this.firstHandle.classList.contains(t)&&this.firstHandle.classList.remove(t),this.firstHandle.classList.contains("e-tab-handle")&&this.firstHandle.classList.remove("e-tab-handle"),"Range"===this.options.Type&&(this.secondHandle.classList.contains(e)&&this.secondHandle.classList.remove(e),this.secondHandle.classList.contains(t)&&this.secondHandle.classList.remove(t),this.secondHandle.classList.contains("e-tab-handle")&&this.secondHandle.classList.remove("e-tab-handle")),this.isTabPressed){this.isTabPressed=!1;var i=sf.base.select(".e-tab-handle",this.element);i&&sf.base.removeClass([i],"e-tab-handle")}},s.prototype.keyUp=function(i){var s=i.target;if(9===i.keyCode&&s.classList.contains("e-handle")){if(this.isTabPressed=!0,!s.classList.contains("e-tab-handle")){var n=sf.base.select(".e-tab-handle",this.element);if(n&&sf.base.removeClass([n],"e-tab-handle"),sf.base.addClass([s],"e-tab-handle"),"Range"===this.options.Type){var o=s.previousElementSibling;o&&o.classList?this.activeHandle=o.classList.contains("e-handle")?2:1:this.activeHandle=1}}this.changedEventValue=this.previousHandleVal,s===this.firstHandle?sf.base.addClass([this.firstHandle],[e,t,"e-tab-handle"]):sf.base.addClass([this.secondHandle],[e,t,"e-tab-handle"])}},s.prototype.handleFocus=function(i){this.element.focus(),this.getHandlePosition(i),this.changedEventValue=this.previousHandleVal,this.sliderBarClick(),i.currentTarget===this.firstHandle?(this.firstHandle.classList.add(e),this.firstHandle.classList.add(t),this.firstHandle.classList.add("e-tab-handle")):(this.secondHandle.classList.add(e),this.secondHandle.classList.add(t),this.secondHandle.classList.add("e-tab-handle")),sf.base.EventHandler.add(document,"mousemove touchmove",this.sliderBarMove,this),sf.base.EventHandler.add(document,"mouseup touchend",this.sliderBarUp,this)},s.prototype.sliderBarMove=function(e){if("touchmove"===e.type&&e.target.parentElement===this.element||"mousemove"===e.type){"touchmove"!==e.type&&e.preventDefault(),this.isSliderMove=!0;var t=void 0;"mousemove"===e.type?t={x:e.clientX,y:e.clientY}:"touchmove"!==e.type&&"touchstart"!==e.type||(t={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}),this.handlePos=this.xyToPosition(t),this.handleVal=this.positionToValue(this.handlePos),this.handlePos=this.checkHandlePosition(this.handleVal),this.firstHandle.style.transition=this.transition.scaleTransform,"Range"===this.options.Type&&(this.secondHandle.style.transition=this.transition.scaleTransform),this.rangeBar&&(this.rangeBar.style.transition="none"),"Range"===this.options.Type?-1===this.previousHandleVal.indexOf(this.handleVal)&&(1===this.activeHandle&&this.handleVal<=this.handleVal2||2===this.activeHandle&&this.handleVal>=this.handleVal1)&&(null!=this.options.Events&&this.options.Events.onChange.hasDelegate&&this.options.IsImmediateValue?this.callChangeEvent(!1):this.sliderBarClick()):this.previousHandleVal!==this.handleVal&&(null!==this.options.Events&&this.options.Events.onChange.hasDelegate&&this.options.IsImmediateValue?this.callChangeEvent(!1):this.sliderBarClick())}},s.prototype.callChangeEvent=function(e){var t=this.options.IsImmediateValue?this.previousHandleVal:this.changedEventValue?this.changedEventValue:this.previousHandleVal;this.sliderBarClick(),this.isValueChange(t)&&this.invokeEvent(t,e)},s.prototype.updateHandleAttributes=function(e,t){"aria-valuenow"===e?"Range"===this.options.Type?(this.firstHandle.setAttribute(e,"["+t[0]+","+t[1]+"]"),this.secondHandle.setAttribute(e,"["+t[0]+","+t[1]+"]")):this.firstHandle.setAttribute(e,t[0]):(this.firstHandle.setAttribute(e,t[0]),"Range"===this.options.Type&&this.secondHandle.setAttribute(e,t[0]))},s.prototype.getTheme=function(e){return window.getComputedStyle(e,":after").getPropertyValue("content").replace(/['"]+/g,"")},s.prototype.setZindex=function(){sf.base.isNullOrUndefined(this.options.Ticks)||"None"===this.options.Ticks.placement||(this.element.getElementsByTagName("ul")[0].style.zIndex="-1",this.element.style.zIndex="8"),"material"!==this.getTheme(this.sliderContainer)||sf.base.isNullOrUndefined(this.options.Ticks)||"Both"!==this.options.Ticks.placement||(this.element.style.zIndex="8"),this.firstHandle.style.zIndex="9","Range"===this.options.Type&&(this.secondHandle.style.zIndex="10")},s.prototype.sliderBarUp=function(e){this.handleFocusOut(),sf.base.EventHandler.remove(document,"mousemove touchmove",this.sliderBarMove),sf.base.EventHandler.remove(document,"mouseup touchend",this.sliderBarUp),this.isSliderMove=!1,this.transitionNode(),this.triggerChangeEvent(this.changedEventValue,e,!1)},s.prototype.transitionNode=function(){this.firstHandle.style.transition="none","Range"===this.options.Type&&(this.secondHandle.style.transition="none"),this.rangeBar&&(this.rangeBar.style.transition="none")},s.prototype.clickHandler=function(e){if(this.isDragRange)this.isDragRange=!1;else{e.preventDefault();var t=this.changedEventValue;this.getHandlePosition(e),null!=this.options.Events&&this.options.Events.onChange.hasDelegate||null!=this.options.Events&&this.options.Events.valueChange.hasDelegate?(this.isClicked=!0,this.sliderBarClick(),this.options.Events.onChange.hasDelegate&&this.callChangeEvent(!1),t=this.isSliderMove?this.previousHandleVal:this.changedEventValue?this.changedEventValue:this.previousHandleVal,this.triggerChangeEvent(t,e,!0)):this.sliderBarClick(),this.isClicked&&(this.previousHandleVal=this.options.Value),this.changedEventValue=this.previousHandleVal,this.isClicked=!1}},s.prototype.updateNewHandleValue=function(e,t,i){return(i[0]||i[1])&&(e<i[0]?(e=i[0],t=this.checkHandlePosition(e)):e>i[1]&&(e=i[1],t=this.checkHandlePosition(e))),[e,t]},s.prototype.sliderBarClick=function(){if("Range"!==this.options.Type||1===this.activeHandle&&this.handleVal1<=this.handleVal2||2===this.activeHandle&&this.handleVal1<=this.handleVal2){if(this.firstHandle.style.transition=this.transition.handle,"Range"===this.options.Type&&(this.secondHandle.style.transition=this.transition.handle),this.rangeBar&&(this.rangeBar.style.transition=this.transition.rangeBar),this.options.Limits){var e=void 0;if(1!==this.activeHandle||this.options.Limits.startHandleFixed){if(2===this.activeHandle&&!this.options.Limits.endHandleFixed){e=[this.options.Limits.maxStart,this.options.Limits.maxEnd];t=this.updateNewHandleValue(this.handleVal,this.handlePos,e);this.updateHandleValue(this.secondHandle,t[0],t[1])}}else{e=[this.options.Limits.minStart,this.options.Limits.minEnd];var t=this.updateNewHandleValue(this.handleVal,this.handlePos,e);this.updateHandleValue(this.firstHandle,t[0],t[1],!0),this.isMaterial&&!sf.base.isNullOrUndefined(this.materialHandle)&&"Range"!==this.options.Type&&this.updateHandleValue(this.materialHandle,t[0],t[1],1===this.activeHandle)}}else{var i=1===this.activeHandle?this.firstHandle:this.secondHandle;this.updateHandleValue(i,this.handleVal,this.handlePos,1===this.activeHandle),this.isMaterial&&!sf.base.isNullOrUndefined(this.materialHandle)&&"Range"!==this.options.Type&&this.updateHandleValue(this.materialHandle,this.handleVal,this.handlePos,1===this.activeHandle)}"Default"!==this.options.Type&&this.setRangeBarPosition(),this.updateValue()}},s.prototype.updateHandleValue=function(e,t,i,s){void 0===s&&(s=!1),this.applyHandlePosition(e,i),s?(this.handleVal1=t,this.handlePos1=i):(this.handleVal2=t,this.handlePos2=i),this.updateAriaValue()},s.prototype.updateAriaValue=function(){"Range"!==this.options.Type?this.options.CustomValues?this.updateHandleAttributes("aria-valuenow",[this.options.CustomValues[this.handleVal1].toString()]):this.updateHandleAttributes("aria-valuenow",[this.handleVal1.toString()]):this.options.CustomValues?this.updateHandleAttributes("aria-valuenow",[this.options.CustomValues[this.handleVal1].toString(),this.options.CustomValues[this.handleVal2].toString()]):this.updateHandleAttributes("aria-valuenow",[this.handleVal1.toString(),this.handleVal2.toString()])},s.prototype.positionToValue=function(e){var t,s=parseFloat(sf.base.formatUnit(this.options.Max))-parseFloat(sf.base.formatUnit(this.options.Min));return t=this.options.Orientation===i?e/this.element.getBoundingClientRect().width*s:e/this.element.getBoundingClientRect().height*s,this.add(t,parseFloat(this.options.Min.toString()),!0)},s.prototype.add=function(e,t,i){var s=Math.pow(10,3);return i?(Math.round(e*s)+Math.round(t*s))/s:(Math.round(e*s)-Math.round(t*s))/s},s.prototype.setElementWidth=function(e){sf.base.isNullOrUndefined(e)||("number"==typeof e?this.sliderContainer.style.width=sf.base.formatUnit(e):"string"==typeof e&&(this.sliderContainer.style.width=e.match(/px|%|em/)?e:sf.base.formatUnit(e)))},s.prototype.xyToPosition=function(e){var t=this.element.getBoundingClientRect();if(this.options.Min===this.options.Max)return 100;if(this.options.Orientation===i){var s=e.x-t.left,n=this.element.offsetWidth/100;this.posvalue=s/n}else{var o=e.y-t.top;n=this.element.offsetHeight/100;this.posvalue=100-o/n}var r=this.stepValueCalculation(this.posvalue);return r<0?r=0:r>100&&(r=100),this.options.EnableRtl&&this.options.Orientation===i&&(r=100-r),this.options.Orientation===i?t.width*(r/100):t.height*(r/100)},s.prototype.stepValueCalculation=function(e){0===this.options.Step&&(this.options.Step=1);var t=parseFloat(sf.base.formatUnit(this.options.Step))/((parseFloat(sf.base.formatUnit(this.options.Max))-parseFloat(sf.base.formatUnit(this.options.Min)))/100),i=e%Math.abs(t);return 0!==i&&(t/2>i?e-=i:e+=Math.abs(t)-i),e},s.prototype.setLimitBarPosition=function(){var e,t,s;if(this.limitBar1=this.element.querySelector(".e-limits"),this.limitBar2=this.element.querySelector(".e-limit-second"),null!==this.options.Limits.minStart||null!==this.options.Limits.minEnd){this.options.Orientation===i?(this.options.EnableRtl?this.limitBar1.style.left=this.checkHandlePosition(this.options.Max-this.options.Limits.minEnd)+"px":this.limitBar1.style.left=this.checkHandlePosition(this.options.Limits.minStart)+"px",s="width"):(this.limitBar1.style.bottom=this.checkHandlePosition(this.options.Min>this.options.Max?this.options.Limits.minEnd:this.options.Limits.minStart)+"px",s="height");var n=this.options.Limits.minEnd=null!=this.options.Limits.minEnd?this.options.Limits.minEnd:this.options.Max;sf.base.setStyleAttribute(this.limitBar1,((e={})[s]=this.options.Min>this.options.Max?this.checkHandlePosition(this.options.Limits.minStart)-this.checkHandlePosition(n)+"px":this.checkHandlePosition(n)-this.checkHandlePosition(this.options.Limits.minStart)+"px",e))}if("Range"===this.options.Type&&(null!==this.options.Limits.maxStart||null!==this.options.Limits.maxEnd)){this.options.Orientation===i?this.limitBar2.style.left=this.checkHandlePosition(this.options.Limits.maxStart)+"px":this.limitBar2.style.bottom=this.checkHandlePosition(this.options.Min>this.options.Max?this.options.Limits.maxEnd:this.options.Limits.maxStart)+"px";var o=this.options.Limits.maxEnd=null!=this.options.Limits.maxEnd?this.options.Limits.maxEnd:this.options.Max;sf.base.setStyleAttribute(this.limitBar2,((t={})[s]=this.options.Min>this.options.Max?this.checkHandlePosition(this.options.Limits.maxStart)-this.checkHandlePosition(o)+"px":this.checkHandlePosition(o)-this.checkHandlePosition(this.options.Limits.maxStart)+"px",t))}},s.prototype.setHandler=function(){this.createFirstHandle(),this.createSecondHandle()},s.prototype.createSecondHandle=function(){this.secondHandle=this.element.querySelector(".e-handle-second")},s.prototype.createFirstHandle=function(){this.firstHandle=this.element.querySelector(".e-handle-first")},s.prototype.setValue=function(e){void 0===e&&(e=!0);var t="Range"!==this.options.Type?this.options.Value:this.options.Value[0];if(this.handleVal1=sf.base.isNullOrUndefined(this.options.Value)?this.checkHandleValue(parseFloat(this.options.Min.toString())):this.checkHandleValue(parseFloat(t.toString())),this.handlePos1=this.checkHandlePosition(this.handleVal1),null!=this.options.Limits){var i=this.updateNewHandleValue(this.handleVal1,this.handlePos1,[this.options.Limits.minStart,this.options.Limits.minEnd]);this.handleVal1=i[0],this.handlePos1=i[1]}if("Range"===this.options.Type&&(this.handleVal2=sf.base.isNullOrUndefined(this.options.Value)?this.checkHandleValue(parseFloat(this.options.Max.toString())):this.checkHandleValue(parseFloat(this.options.Value[1].toString())),this.handlePos2=this.checkHandlePosition(this.handleVal2),null!=this.options.Limits)){i=this.updateNewHandleValue(this.handleVal2,this.handlePos2,[this.options.Limits.maxStart,this.options.Limits.maxEnd]);this.handleVal2=i[0],this.handlePos2=i[1]}this.setHandlePosition(null),"Default"!==this.options.Type&&this.setRangeBarPosition(),null!==this.options.Ticks&&"None"!==this.options.Ticks.placement&&this.setTickValuePosition(),this.updateValue(e)},s.prototype.updateColorRangeBarPos=function(){if(null!=this.options.ColorRange)for(var e=this.sliderTrack.children,t=0;t<this.options.ColorRange.length;t++)this.options.Orientation===i?(this.options.EnableRtl||(e[t].style.left=this.options.EnableRtl?this.checkHandlePosition(this.options.Max-this.options.ColorRange[t].end)+"px":this.checkHandlePosition(this.options.ColorRange[t].start)+"px"),e[t].style.width=this.checkHandlePosition(this.options.ColorRange[t].end)-this.checkHandlePosition(this.options.ColorRange[t].start)+"px"):(e[t].style.bottom=this.checkHandlePosition(this.options.ColorRange[t].start)+"px",e[t].style.height=this.checkHandlePosition(this.options.ColorRange[t].end)-this.checkHandlePosition(this.options.ColorRange[t].start)+"px"),e[t].style.removeProperty("display")},s.prototype.setTickValuePosition=function(){this.firstChild=this.element.querySelector("ul").children[0];var e,t,s=this.firstChild.getBoundingClientRect(),n=this.options.Ticks.smallStep,o=Math.abs(parseFloat(sf.base.formatUnit(this.options.Max))-parseFloat(sf.base.formatUnit(this.options.Min)))/n;this.firstChild.children.length>0&&(e=this.firstChild.children[0].getBoundingClientRect());var r,a=[this.element.querySelectorAll(".e-tick.e-large .e-tick-value")];r="Both"===this.options.Ticks.placement?[].slice.call(a[0],2):[].slice.call(a[0],1);for(var l=this.options.Orientation!==i?2*s.height:2*s.width,h=0;h<this.firstChild.children.length;h++)this.options.Orientation===i?this.options.EnableRtl?this.firstChild.children[h].style.left=(l-this.firstChild.children[h].getBoundingClientRect().width)/2+"px":this.firstChild.children[h].style.left=-e.width/2+"px":this.firstChild.children[h].style.top=-e.width/2+"px";for(h=0;h<r.length;h++)t=r[h].getBoundingClientRect(),this.options.Orientation===i?(sf.base.setStyleAttribute(r[h],{left:(l-t.width)/2+"px"}),this.options.EnableRtl&&r[h].parentElement.classList.contains("e-last-tick")&&sf.base.setStyleAttribute(r[h],{left:-t.width/2+"px"})):sf.base.setStyleAttribute(r[h],{top:(l-t.height)/2+"px"});0===o&&this.firstChild.classList.remove("e-last-tick"),null!=this.firstChild&&(this.options.Orientation===i?this.firstChild.children[0].style.left:e.height),null!=r[0]&&(this.options.Orientation===i?r[0].style.left:t.height),null!=this.firstChild&&null!=r[0]&&(this.options.Orientation===i?(this.firstChild.children[0].style.left,r[0].style.left):(e.height,t.height)),this.element.querySelector("ul").style.removeProperty("visibility")},s.prototype.setRangeBarPosition=function(){if(this.rangeBar=this.element.querySelector(".e-range"),this.options.Orientation===i)"MinRange"===this.options.Type?(this.options.EnableRtl?this.rangeBar.style.right="0px":this.rangeBar.style.left="0px",sf.base.setStyleAttribute(this.rangeBar,{width:sf.base.isNullOrUndefined(this.handlePos1)?0:this.handlePos1+"px"})):(this.options.EnableRtl?this.rangeBar.style.right=this.handlePos1+"px":this.rangeBar.style.left=this.handlePos1+"px",sf.base.setStyleAttribute(this.rangeBar,{width:this.handlePos2-this.handlePos1+"px"}));else if("MinRange"===this.options.Type){var e=this.element.getBoundingClientRect();this.rangeBar.style.bottom=this.options.Min>this.options.Max?this.handlePos1+"px":"0px",sf.base.setStyleAttribute(this.rangeBar,{height:sf.base.isNullOrUndefined(this.handlePos1)?0:this.options.Min>this.options.Max?e.height-this.handlePos1+"px":this.handlePos1+"px"})}else this.rangeBar.style.bottom=this.options.Min>this.options.Max?this.handlePos2+"px":this.handlePos1+"px",sf.base.setStyleAttribute(this.rangeBar,{height:this.options.Min>this.options.Max?this.handlePos1-this.handlePos2+"px":this.handlePos2-this.handlePos1+"px"})},s.prototype.setHandlePosition=function(e){this.updateHandleAttributes("aria-valuemin",[this.options.Min.toString()]),this.updateHandleAttributes("aria-valuemax",[this.options.Max.toString()]);var t=[this.handlePos1,this.handlePos2];this.updateHandlePosition(this.firstHandle,t[0]),this.isMaterial&&"Range"!==this.options.Type&&!sf.base.isNullOrUndefined(this.materialHandle)&&this.updateHandlePosition(this.materialHandle,t[0]),"Range"===this.options.Type&&this.updateHandlePosition(this.secondHandle,t[1]),this.updateAriaValue()},s.prototype.getHandlePosition=function(e){var t;if("mousedown"!==e.type&&"mouseup"!==e.type||e.preventDefault(),"mousedown"===e.type||"mouseup"===e.type||"click"===e.type?t={x:e.clientX,y:e.clientY}:"touchend"!==e.type&&"touchstart"!==e.type||(t={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}),this.handlePos=this.xyToPosition(t),this.handleVal=this.positionToValue(this.handlePos),this.handleVal2<this.handleVal)this.activeHandle=2;else if(this.handleVal1>this.handleVal)this.activeHandle=1;else{var i=this.handleVal>this.handleVal1?this.handleVal-this.handleVal1:this.handleVal1-this.handleVal,s=this.handleVal>this.handleVal2?this.handleVal-this.handleVal2:this.handleVal2-this.handleVal;this.activeHandle=i>s?2:1}},s.prototype.updateHandlePosition=function(e,t){this.applyHandlePosition(e,t),e.style.removeProperty("visibility")},s.prototype.applyHandlePosition=function(e,t){this.options.Orientation===i?this.options.EnableRtl?e.style.right=t+"px":e.style.left=t+"px":e.style.bottom=t+"px",this.isKeyPressed?this.isClicked&&(e.style.transition="none"):e.style.transition=this.transition.handle},s.prototype.checkHandleValue=function(e){if(this.options.Min===this.options.Max)return parseFloat(sf.base.formatUnit(this.options.Max));var t=this.handleStartEnd();return e<t.start?e=t.start:e>t.end&&(e=t.end),e},s.prototype.checkHandlePosition=function(e){var t,s=this.element.getBoundingClientRect();return e=100*(e-parseFloat(sf.base.formatUnit(this.options.Min)))/(parseFloat(sf.base.formatUnit(this.options.Max))-parseFloat(sf.base.formatUnit(this.options.Min))),t=this.options.Orientation===i?s.width*(e/100):s.height*(e/100),parseFloat(sf.base.formatUnit(this.options.Max))===parseFloat(sf.base.formatUnit(this.options.Min))&&(t=this.options.Orientation===i?s.width:s.height),t},s.prototype.handleStartEnd=function(){return this.options.Min>this.options.Max?{start:this.options.Max,end:this.options.Min}:{start:this.options.Min,end:this.options.Max}},s.prototype.updateValue=function(e){var t=this;void 0===e&&(e=!0),"Range"===this.options.Type?this.options.Value=[this.handleVal1,this.handleVal2]:this.options.Value=this.handleVal1,this.isClicked||(this.previousHandleVal=this.options.Value),e&&(null!==this.options.Tooltip?setTimeout((function(){t.dotNetRef.invokeMethodAsync("UpdateValue",t.options.Value,t.activeHandle)}),300):(this.isMaterial&&null!==this.options.Tooltip&&!sf.base.isNullOrUndefined(this.materialHandle)&&"Range"!==this.options.Type&&(this.materialHandle.style.transform="scale(0)"),this.dotNetRef.invokeMethodAsync("UpdateValue",this.options.Value,this.activeHandle)))},s.prototype.updateLimitData=function(e){this.options.Limits=e,this.setLimitBarPosition(),this.setValue()},s.prototype.updateTicksData=function(e){this.options.Ticks=e,this.setTickValuePosition()},s.prototype.updateSliderValue=function(e){var t=this.options.Value;this.options.Value=e,this.setValue(),this.invokeEvent(t,!1)},s.prototype.updateStepValue=function(e){this.options.Step=e},s.prototype.destroy=function(){this.element.style.display="none",this.unWireEvents(),this.element=null},s.prototype.updateTooltipPosition=function(e){var t=document.getElementById(e);!sf.base.isNullOrUndefined(t)&&"Range"!==this.options.Type&&sf.base.isNullOrUndefined(this.options.Tooltip.format)&&(t.style.transform="Before"===this.options.Tooltip.placement?"rotate(45deg)":"rotate(225deg)")},s.prototype.propertyChanges=function(e){void 0!==e.Enabled&&(this.options.Enabled=e.Enabled),void 0!==e.ShowButtons&&(this.setValue(!1),this.updateColorRangeBarPos()),void 0!==e.ReadOnly&&(this.options.ReadOnly=e.ReadOnly),void 0!==e.Value&&(this.options.Value=e.Value,this.setValue(!1)),void 0!==e.Max&&(this.options.Max=e.Max),void 0!==e.Step&&(this.options.Step=e.Step),void 0!==e.Min&&(this.options.Min=e.Min),void 0!==e.IsImmediateValue&&(this.options.IsImmediateValue=e.IsImmediateValue),this.options.Enabled&&!this.options.ReadOnly?(this.unWireEvents(),this.wireEvents()):this.unWireEvents()},s}();return{initialize:function(e,t,i,n){t&&new s(e,t,i,n);var o=window.sfBlazor.getCompInstance(e);return t&&!sf.base.isNullOrUndefined(o)?o.initialize():null},updateLimitData:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.updateLimitData(t)},updateTicksData:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.updateTicksData(t)},updateSliderValue:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.updateSliderValue(t)},updateSTepValue:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.updateStepValue(t)},updatedProperties:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.propertyChanges(t)},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.destroy()},reposition:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.reposition()},updateTooltipPosition:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.updateTooltipPosition(t)}}}()},"./modules/sf-smith-chart.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.SmithChart=function(){"use strict";var e=function(){function e(e,t,i,s){window.sfBlazor=window.sfBlazor,this.mouseY=0,this.mouseX=0,this.resizeTo=0,this.id=t,this.element=i,this.dotNetRef=s,this.dataId=e,window.sfBlazor.setCompInstance(this)}return e.prototype.unWireEvents=function(){var e=sf.base.Browser.isPointer?"pointerleave":"mouseleave";sf.base.EventHandler.remove(this.element,sf.base.Browser.touchMoveEvent,this.mouseMove),sf.base.EventHandler.remove(this.element,"click",this.chartOnMouseClick),sf.base.EventHandler.remove(this.element,e,this.mouseLeave),window.removeEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.rangeResize.bind(this)),sf.base.EventHandler.remove(this.element,"mousedown",this.mouseDown);var t=sf.base.getInstance(this.element,this.keyActionHandler);t&&t.destroy(),this.element=null,this.dotNetRef=null},e.prototype.wireEvents=function(){var e=sf.base.Browser.isPointer?"pointerleave":"mouseleave";sf.base.EventHandler.add(this.element,sf.base.Browser.touchMoveEvent,this.mouseMove,this),sf.base.EventHandler.add(this.element,"click",this.chartOnMouseClick,this),sf.base.EventHandler.add(this.element,e,this.mouseLeave,this),window.addEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.rangeResize.bind(this)),new sf.base.KeyboardEvents(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:{enter:"enter"},eventName:"keydown"}),sf.base.EventHandler.add(this.element,"mousedown",this.mouseDown.bind(this),this)},e.prototype.mouseDown=function(e){e.preventDefault()},e.prototype.keyActionHandler=function(e){"enter"===e.action&&this.chartOnMouseClickProcess(e)},e.prototype.mouseMove=function(e){document.getElementById(this.id+"_svg")&&this.setMouseXY(e),this.dotNetRef&&this.dotNetRef.invokeMethodAsync("OnSmithChartMouseMove",this.getEventArgs(e))},e.prototype.chartOnMouseClick=function(e){this.chartOnMouseClickProcess(e)},e.prototype.chartOnMouseClickProcess=function(e){this.dotNetRef&&this.dotNetRef.invokeMethodAsync("OnSmithChartMouseClick",this.getEventArgs(e))},e.prototype.mouseLeave=function(e){this.setMouseXY(e),this.dotNetRef&&this.dotNetRef.invokeMethodAsync("OnSmithChartMouseLeave",this.getEventArgs(e))},e.prototype.rangeResize=function(e){var t=this;this.dotNetRef&&(this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=window.setTimeout((function(){t.dotNetRef.invokeMethodAsync("OnSmithChartResize",e)}),500))},e.prototype.setMouseXY=function(e){var t,i,s;"touchmove"===e.type?(t=(s=e).changedTouches[0].clientX,i=s.changedTouches[0].clientY):(t=e.clientX,i=e.clientY);var n=document.getElementById(this.id+"_svg").getBoundingClientRect(),o=document.getElementById(this.id).getBoundingClientRect();this.mouseY=i-o.top-Math.max(n.top-o.top,0),this.mouseX=t-o.left-Math.max(n.left-o.left,0)},e.prototype.getEventArgs=function(e){return{type:e.type,clientX:e.clientX?e.clientX:0,clientY:e.clientY?e.clientY:0,mouseX:this.mouseX,mouseY:this.mouseY,pointerType:e.pointerType?e.pointerType:e.action?e.action:"",target:e.target.id,changedTouches:{clientX:e.changedTouches?e.changedTouches[0].clientX:0,clientY:e.changedTouches?e.changedTouches[0].clientY:0}}},e}();return{id:"",mouseY:0,mouseX:0,initialize:function(t,i,s,n,o,r){return r?(new e(t,i,r,s).wireEvents(),this.getElementBoundsById(r,n,o)):{width:0,height:0}},getElementBoundsById:function(e,t,i){return e?(e.style.height=t,e.style.width=i,{width:e.clientWidth||e.offsetWidth,height:e.clientHeight||e.offsetHeight}):{width:0,height:0}},charCollection:["0","1","2","3","4","5","6","7","8","9","!",'"',"#","$","%","&","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~"," "],measureText:function(e,t,i,s,n){var o=document.getElementById("chartmeasuretext");return null===o&&(o=sf.base.createElement("text",{id:"chartmeasuretext"}),document.body.appendChild(o))," "===e&&(e="&nbsp;"),o.innerHTML=e,o.style.position="fixed",o.style.fontSize="100px",o.style.fontWeight=i,o.style.fontStyle=s,o.style.fontFamily=n,o.style.visibility="hidden",o.style.top="-100",o.style.left="0",o.style.whiteSpace="nowrap",o.style.lineHeight="normal",{Width:o.clientWidth,Height:o.clientHeight}},getCharCollectionSize:function(e){for(var t=[],i=this.charCollection,s=i.length,n=e.length,o=0;o<n;o++)for(var r=e[o].split("_"),a=r[0],l=r[1],h=r[2],d=0;d<s;d++)t.push(this.measureText(i[d],a,l,h).Width+"");return JSON.stringify(t)},getCharSizeByCharKey:function(e){var t=e.split("_"),i=t[0],s=t[1],n=t[2],o=t[3],r=t[4];return this.measureText(i,s,n,o,r)},resizeTo:{},linear:function(e,t,i,s){return-i*Math.cos(e/s*(Math.PI/2))+i+t},reverselinear:function(e,t,i,s){return-t*Math.sin(e/s*(Math.PI/2))+i+t},doLinearAnimation:function(e){var t=this;e.forEach((function(e){var i=document.getElementById(e[0]);if(i){var s=new sf.base.Animation({}),n=+i.getAttribute("x"),o=+i.getAttribute("width");s.animate(i,{duration:e[1],delay:0,progress:function(s){s.timeStamp>=s.delay&&(i.setAttribute("visibility","visible"),e[2]?i.setAttribute("width",t.linear(s.timeStamp-s.delay,0,o,s.duration).toString()):i.setAttribute("x",t.reverselinear(s.timeStamp-s.delay,o,0,s.duration).toString()))},end:function(){e[2]?i.setAttribute("width",o.toString()):i.setAttribute("x",n.toString())}})}}))},getTemplateSize:function(e){var t=document.getElementById(e);return t?{width:t.offsetWidth,height:t.offsetHeight}:null},fadeOut:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||!sf.base.isNullOrUndefined(t)&&sf.base.isNullOrUndefined(t.tooltip)||t.tooltip.fadeOut()},tooltip:{},renderTooltip:function(e,t,i){var s=document.getElementById(t+"_svg"),n=!(s&&parseInt(s.getAttribute("opacity"),10)>0),o=JSON.parse(e),r=window.sfBlazor.getCompInstance(i);n?(r.tooltip=new sf.svgbase.Tooltip(o),r.tooltip.appendTo("#"+t)):sf.base.isNullOrUndefined(r.tooltip)||(r.tooltip.location=new sf.svgbase.TooltipLocation(o.location.x,o.location.y),r.tooltip.content=o.content,r.tooltip.header=o.header,r.tooltip.palette=o.palette,r.tooltip.shapes=o.shapes,r.tooltip.data=o.data,r.tooltip.template=o.template,r.tooltip.textStyle.color=o.textStyle.color||r.tooltip.textStyle.color,r.tooltip.textStyle.fontFamily=o.textStyle.fontFamily||r.tooltip.textStyle.fontFamily,r.tooltip.textStyle.fontStyle=o.textStyle.fontStyle||r.tooltip.textStyle.fontStyle,r.tooltip.textStyle.fontWeight=o.textStyle.fontWeight||r.tooltip.textStyle.fontWeight,r.tooltip.textStyle.opacity=o.textStyle.opacity||r.tooltip.textStyle.opacity,r.tooltip.textStyle.size=o.textStyle.size||r.tooltip.textStyle.size,r.tooltip.dataBind())},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);e&&t&&t.unWireEvents()}}}()},"./modules/sf-sparkline.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Sparkline=function(){"use strict";var e=function(){function e(e,t,i){this.resizeTo=0,window.sfBlazor=window.sfBlazor,this.element=t,this.dotNetRef=i,e=e,window.sfBlazor.setCompInstance(this)}return e.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,sf.base.Browser.touchMoveEvent,this.mousemove.bind(this),this),sf.base.EventHandler.add(this.element,sf.base.Browser.isPointer?"pointerleave":"mouseleave",this.mouseleave.bind(this),this),sf.base.EventHandler.add(this.element,"click",this.click,this),window.addEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.resize.bind(this))},e.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,sf.base.Browser.touchMoveEvent,this.mousemove),sf.base.EventHandler.remove(this.element,"click",this.click),sf.base.EventHandler.remove(this.element,sf.base.Browser.isPointer?"pointerleave":"mouseleave",this.mouseleave),window.removeEventListener(sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.resize.bind(this)),this.element=null,this.dotNetRef=null},e.prototype.resize=function(){var e=this;this.dotNetRef&&(this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=window.setTimeout((function(){e.dotNetRef.invokeMethodAsync("OnResize")}),500))},e.prototype.mouseleave=function(){this.dotNetRef&&this.dotNetRef.invokeMethodAsync("OnMouseLeave")},e.prototype.click=function(){this.dotNetRef&&this.dotNetRef.invokeMethodAsync("OnClick")},e.prototype.mousemove=function(e){var t,i,s,n=this.element.getBoundingClientRect(),o=document.getElementById(this.element.id+"_svg");o&&(t=o.getBoundingClientRect());var r=document.getElementById(this.element.id+"_Secondary_Element");if(r&&(r.style.left=Math.max((t?t.left:0)-(n?n.left:0),0)+"px",r.style.top=Math.max((t?t.top:0)-(n?n.top:0),0)+"px"),e.type.indexOf("touch")>-1){var a=e;a.changedTouches?(s=a.changedTouches[0].clientX,i=a.changedTouches[0].clientY):(i=e.clientY,s=e.clientX)}else i=e.clientY,s=e.clientX;this.dotNetRef&&this.dotNetRef.invokeMethodAsync("OnMouseMove",s,i,n?n.top:0,n?n.left:0,t?t.top:0,t?t.left:0,e.target?e.target.id:"",sf.base.Browser.isIE)},e}();return{initialize:function(t,i,s,n,o){if(i)return new e(t,i,s).wireEvents(),this.getElementSize(i,n,o)},getElementSize:function(e,t,i){if(e){e.style.height=t,e.style.width=i;var s=e.parentElement?e.parentElement.clientWidth||0:100,n=e.parentElement?e.parentElement.clientHeight||0:50;return{width:e.clientWidth||e.offsetWidth,height:e.clientHeight||e.offsetHeight,parentWidth:s,parentHeight:n,isDevice:sf.base.Browser.isDevice,windowWidth:window.innerWidth,windowHeight:window.innerHeight}}},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);e&&t&&t.unWireEvents()}}}()},"./modules/sf-speeddial.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.SpeedDial=function(){"use strict";var e="e-speeddial-fixed",t="e-speeddial-hidden",i="e-speeddial-li",s=function(){function s(e){this.sfBlazor=window.sfBlazor,this.updateContext(e),this.sfBlazor.setCompInstance(this),this.initialize()}return s.prototype.updateContext=function(e){sf.base.extend(this,this,e)},s.prototype.initialize=function(){this.isControl=!1,this.checkTarget(),this.setClientProps(!0),this.bindEvent()},s.prototype.checkTarget=function(){this.targetEle=null,sf.base.isNullOrUndefined(this.target)||"string"!=typeof this.target||(this.targetEle=document.querySelector(this.target)),this.isFixed=sf.base.isNullOrUndefined(this.targetEle),this.isFixed?(this.popupEle.classList.add(e),this.overlayEle&&this.overlayEle.classList.add(e)):(this.popupEle.classList.remove(e),this.targetEle.appendChild(this.popupEle),this.overlayEle&&(this.overlayEle.classList.remove(e),this.targetEle.appendChild(this.overlayEle)))},s.prototype.bindEvent=function(){sf.base.EventHandler.add(window,"resize",this.resizeHandler,this),sf.base.EventHandler.add(document.body,"click",this.documentClickhandler,this),sf.base.EventHandler.add(this.popupEle,"click",this.speeddialClickHandler,this),sf.base.EventHandler.add(this.element,"click",this.speeddialClickHandler,this),sf.base.EventHandler.add(this.popupEle,"mouseleave",this.popupMouseLeaveHandle,this),this.isHover&&this.bindHoverEvents()},s.prototype.unBindEvent=function(){sf.base.EventHandler.remove(window,"resize",this.resizeHandler),sf.base.EventHandler.remove(document.body,"click",this.documentClickhandler),sf.base.EventHandler.remove(this.popupEle,"click",this.speeddialClickHandler),sf.base.EventHandler.remove(this.element,"click",this.speeddialClickHandler),sf.base.EventHandler.remove(this.popupEle,"mouseleave",this.popupMouseLeaveHandle),this.isHover&&this.unBindHoverEvents()},s.prototype.bindHoverEvents=function(){sf.base.EventHandler.add(this.element,"mouseover",this.mouseOverHandle,this),sf.base.EventHandler.add(this.element,"mouseleave",this.mouseLeaveHandle,this)},s.prototype.unBindHoverEvents=function(){sf.base.EventHandler.remove(this.element,"mouseover",this.mouseOverHandle),sf.base.EventHandler.remove(this.element,"mouseleave",this.mouseLeaveHandle)},s.prototype.speeddialClickHandler=function(){this.isControl=!0},s.prototype.documentClickhandler=function(){this.isControl?this.isControl=!1:this.popupEle.classList.contains(t)||this.callShowHidePopup(!1)},s.prototype.popupMouseLeaveHandle=function(e){var t=e.relatedTarget;!this.isHover||t.classList.contains("e-speeddial")||sf.base.closest(t,".e-speeddial")||this.callShowHidePopup(!1)},s.prototype.mouseOverHandle=function(){this.callShowHidePopup(!0)},s.prototype.mouseLeaveHandle=function(e){var t=e.relatedTarget;t.classList.contains("e-speeddial-popup")||sf.base.closest(t,".e-speeddial-popup")||this.callShowHidePopup(!1)},s.prototype.callShowHidePopup=function(e){this.dotNetRef.invokeMethodAsync(e?"ShowAsync":"HideAsync")},s.prototype.resizeHandler=function(){this.getOffset(),(this.isMiddle||this.isCenter)&&this.dotNetRef.invokeMethodAsync("UpdatePosition",this.yOffset,this.xOffset)},s.prototype.setClientProps=function(e){this.getOffset();var t={yOffset:this.yOffset,xOffset:this.xOffset};e&&(t.isFixed=this.isFixed?"Fixed":"Absolute"),"Radial"!==this.mode||this.isTemplate||(t.liHeight=this.liHeight,t.liWidth=this.liWidth),this.clientProps=JSON.stringify(t)},s.prototype.getOffset=function(){if("Radial"===this.mode||this.isTemplate){if(this.yOffset=this.xOffset="",!this.isTemplate){var e=this.popupEle.querySelector(".e-speeddial-li");this.liHeight=e.offsetHeight+"px",this.liWidth=e.offsetWidth+"px",this.popupEle.style.setProperty("--speeddialRadialMinHeight",this.liHeight),this.popupEle.style.setProperty("--speeddialRadialMinWidth",this.liWidth)}this.isMiddle&&(this.yOffset=((this.targetEle?this.targetEle.clientHeight:window.innerHeight)-this.popupEle.offsetHeight)/2+"px",this.popupEle.style.setProperty("--speeddialVertDist",this.yOffset)),this.isCenter&&(this.xOffset=((this.targetEle?this.targetEle.clientWidth:window.innerWidth)-this.popupEle.offsetWidth)/2+"px",this.popupEle.style.setProperty("--speeddialHorzDist",this.xOffset))}else this.isTop?this.yOffset=this.element.offsetTop+(this.isVertical?this.element.offsetHeight:0)+"px":(this.yOffset=this.isFixed?window.innerHeight:this.targetEle.clientHeight,this.yOffset=this.yOffset-this.element.offsetTop-(this.isVertical?0:this.element.offsetHeight)+"px"),this.popupEle.style.setProperty("--speeddialVertDist",this.yOffset),this.isLeft?this.xOffset=this.element.offsetLeft+(this.isVertical?0:this.element.offsetWidth)+"px":(this.xOffset=this.isFixed?window.innerWidth:this.targetEle.clientWidth,this.xOffset=this.xOffset-this.element.offsetLeft-(this.isVertical?this.element.offsetWidth:0)+"px"),this.popupEle.style.setProperty("--speeddialHorzDist",this.xOffset)},s.prototype.animateClose=function(e){var s=this;this.updateContext(e);var n={name:this.animation.effect+"Out",timingFunction:"easeOut"},o=this.isTemplate?[this.popupEle.firstElementChild]:sf.base.selectAll("."+i,this.popupEle);o&&0!==o.length||this.dotNetRef.invokeMethodAsync("OnAnimationCompleted",!1);var r=this.animation.duration/(o.length+1);n.duration=2*r;!function e(i){if(n.delay=i===o.length-1?s.animation.delay:0,n.begin=function(){},n.end=function(){o[i].classList.add(t),0===i&&(s.popupEle.classList.add(t),s.dotNetRef.invokeMethodAsync("OnAnimationCompleted",!1))},new sf.base.Animation(n).animate(o[i]),0!==i){var a=i-1;setTimeout((function(){e(a)}),r)}}(o.length-1)},s.prototype.animateOpen=function(e){var s=this;this.updateContext(e);var n={name:this.animation.effect+"In",timingFunction:"easeIn"},o=this.isTemplate?[this.popupEle.firstElementChild]:sf.base.selectAll("."+i,this.popupEle);o&&0!==o.length||this.dotNetRef.invokeMethodAsync("OnAnimationCompleted",!0);var r=this.animation.duration/(o.length+1);n.duration=2*r;!function e(i){if(n.delay=0===i?s.animation.delay:0,n.begin=function(){0===i&&s.popupEle.classList.remove(t),o[i].classList.remove(t)},n.end=function(){i===o.length-1&&(s.isTemplate&&s.popupEle.focus(),s.dotNetRef.invokeMethodAsync("OnAnimationCompleted",!0))},new sf.base.Animation(n).animate(o[i]),i!==o.length-1){var a=i+1;setTimeout((function(){e(a)}),r)}}(0)},s.prototype.validateTarget=function(e){this.updateContext(e),this.checkTarget(),this.setClientProps(!0)},s.prototype.setPosition=function(e){this.updateContext(e),this.setClientProps(!1)},s.prototype.updateOnHover=function(e){this.updateContext(e),this.isHover?this.bindHoverEvents():this.unBindHoverEvents()},s.prototype.destroy=function(){this.unBindEvent()},s}();return{initialize:function(e){return e.dataId?new s(e).clientProps:{}},validateTarget:function(e){if(e.dataId){var t=window.sfBlazor.getCompInstance(e.dataId);return t.validateTarget(e),t.clientProps}return{}},setPosition:function(e){if(e.dataId){var t=window.sfBlazor.getCompInstance(e.dataId);return t.setPosition(e),t.clientProps}return{}},updateOnHover:function(e){e.dataId&&window.sfBlazor.getCompInstance(e.dataId).updateOnHover(e)},animateClose:function(e){e.dataId&&window.sfBlazor.getCompInstance(e.dataId).animateClose(e)},animateOpen:function(e){e.dataId&&window.sfBlazor.getCompInstance(e.dataId).animateOpen(e)},destroy:function(e){e&&window.sfBlazor.getCompInstance(e).destroy()},focusElement:function(e){e.focus()}}}()},"./modules/sf-spinner.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Spinner=function(){"use strict";var e=function(){function e(e){this.element=e,this.element.blazor__instance=this}return e.prototype.initialize=function(e){return window.getComputedStyle(e,":after").getPropertyValue("content").replace(/['"]+/g,"")},e}();return{initialize:function(t){return sf.base.isNullOrUndefined(t)?null:(new e(t),sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(t.blazor__instance)?null:t.blazor__instance.initialize(t))}}}()},"./modules/sf-splitter.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Splitter=function(){"use strict";var e=function(){return(e=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},t="e-split-bar",s="e-static-pane",n="e-resize-handler",o="e-arrow-left",r="e-arrow-up",a="e-arrow-down",l="e-icon-hidden",h="msie",d="Horizontal",c="px",p=function(){function p(e){this.allPanes=[],this.allBars=[],this.previousCoordinates={},this.currentCoordinates={},this.updatePrePaneInPercentage=!1,this.updateNextPaneInPercentage=!1,this.panesDimensions=[],this.border=0,this.isToggleInvoke=!1,this.createdEnabled=!1,this.resizingEnabled=!1,this.expandedEnabled=!1,this.onExpandEnabled=!1,this.collapsedEnabled=!1,this.onCollapseEnabled=!1,this.onResizeStopEnabled=!1,this.onResizeStartEnabled=!1,this.iconsDelay=300,this.collapseFlag=!1,this.expandFlag=!0,this.expandingFlag=!0,this.enablePersistence=!1,this.isPreventResizeAction=!0,window.sfBlazor=window.sfBlazor,this.updateContext(e),window.sfBlazor&&(sf.base.isNullOrUndefined(window.sfBlazor.instances)&&(window.sfBlazor.instances=[]),window.sfBlazor.instances[this.dataId]=this)}return p.prototype.updateContext=function(e){sf.base.extend(this,this,e)},p.prototype.initialize=function(){this.id=this.element.id,this.addSeparator(),this.collapseFlag=!0,this.isCollapsed(),this.collapseFlag=!1,this.updateClass(),sf.base.EventHandler.add(document,"touchstart click",this.onDocumentClick,this),document.body.contains(this.element)&&this.createdEnabled&&this.dotNetRef.invokeMethodAsync("CreatedEvent",null),sf.base.EventHandler.add(this.element,"keydown",this.onMove,this),window.addEventListener("resize",this.reportWindowSize.bind(this),!0),sf.base.Browser.isDevice&&sf.base.addClass([this.element],"e-splitter-touch"),this.enableReversePanes&&this.setReversePane()},p.prototype.setReversePane=function(){this.allPanes=this.allPanes.reverse(),this.allBars=this.allBars.reverse(),sf.base.addClass([this.allBars[this.allBars.length-1]],"e-last-bar"),sf.base.removeClass([this.allBars[0]],"e-last-bar")},p.prototype.onDocumentClick=function(e){e.target.classList.contains(t)||sf.base.isNullOrUndefined(this.currentSeparator)||sf.base.removeClass([this.currentSeparator],["e-split-bar-hover","e-split-bar-active"])},p.prototype.updateClass=function(){if(sf.base.Browser.info.name===h){sf.base.addClass([this.element],"e-ie");for(var e=this.element.querySelectorAll(".e-splitter ."+n),t=0;t<e.length;t++){var i=sf.base.isNullOrUndefined(this.separatorSize)?1:this.separatorSize;sf.base.setStyleAttribute(e[t],{"padding-left":i/2+c,"padding-right":i/2+c})}}},p.prototype.reportWindowSize=function(){for(var e=this,t=this.allPanes.length,i=0;i<t;i++){if(!sf.base.isNullOrUndefined(this.paneSettings[i])&&sf.base.isNullOrUndefined(this.paneSettings[i].size)&&this.allPanes[i].classList.remove(s),t-1===i)this.element.querySelectorAll("."+s).length===t&&sf.base.removeClass([this.allPanes[i]],s)}setTimeout((function(){e.updateSplitterSize(!0)}),200)},p.prototype.onMove=function(e){if(this.allPanes.length>1&&this.element.children.length>1){this.getPaneDetails(),this.getPaneDimensions(!1);var i=this.getSeparatorIndex(this.currentSeparator),s=this.previousPane.classList.contains("e-collapsed"),n=this.previousPane.classList.contains("e-expanded"),o=this.nextPane.classList.contains("e-collapsed");(this.orientation!==d&&38===e.keyCode||this.orientation===d&&39===e.keyCode||this.orientation===d&&37===e.keyCode||this.orientation!==d&&40===e.keyCode)&&(!n&&!o&&!s||n&&!o)&&document.activeElement.classList.contains(t)&&this.paneSettings[i].resizable&&this.paneSettings[i+1].resizable?(e.preventDefault(),this.checkPaneSize(e),this.resizingEnabled&&this.dotNetRef.invokeMethodAsync("ResizingEvent",{event:this.getKeyBoardEvtArgs(e),index:[this.getPreviousPaneIndex(),this.getNextPaneIndex()],separator:this.getDomObject("separator",this.currentSeparator),paneSize:[this.prePaneDimenson,this.nextPaneDimension]})):13===e.keyCode&&this.paneSettings[i].collapsible&&document.activeElement.classList.contains(t)&&this.currentSeparator.classList.contains("e-split-bar-active")&&(this.previousPane.classList.contains("e-collapsed")?(this.expand(i),sf.base.addClass([this.currentSeparator],"e-split-bar-active")):(this.collapse(i),sf.base.addClass([this.currentSeparator],"e-split-bar-active")))}},p.prototype.addSeparator=function(){var e,i=this;this.allBars=[],this.allPanes=[];for(var s=0;s<this.element.children.length;s++)this.element.children[s].classList.contains("e-pane")&&this.allPanes.push(this.element.children[s]),this.element.children[s].classList.contains(t)&&this.allBars.push(this.element.children[s]);for(var o=this.allPanes.length,r=0;r<o;r++)if(r<o-1){if(e=this.allBars[r],this.updateIconClass(),sf.base.isNullOrUndefined(e)||(this.enableReversePanes?e.setAttribute("dir","ltr"):e.removeAttribute("dir"),this.currentSeparator=e,this.addMouseActions(e),sf.base.EventHandler.add(this.currentSeparator,"touchstart click",this.clickHandler,this),e.addEventListener("focus",(function(){document.activeElement.classList.contains(t)&&(i.currentSeparator=document.activeElement,sf.base.addClass([i.currentSeparator],"e-split-bar-active"))})),e.addEventListener("blur",(function(){sf.base.removeClass([i.currentSeparator],"e-split-bar-active")}))),!sf.base.isNullOrUndefined(e))if(this.isResizable()){sf.base.EventHandler.add(e,"mousedown",this.onMouseDown,this);var a=sf.base.Browser.info.name===h?"pointerdown":"touchstart";sf.base.EventHandler.add(e,a,this.onMouseDown,this),this.updateResizablePanes(r)}else sf.base.addClass([sf.base.select("."+n,e)],"e-hide-handler")}else e&&sf.base.addClass([e],"e-last-bar"),o>1&&this.updateResizablePanes(r)},p.prototype.updateSeparator=function(){for(var e=0,t=0;t<this.allBars.length;t++){var i=this.allBars[t];sf.base.EventHandler.remove(i,"touchstart click",this.clickHandler),sf.base.EventHandler.remove(i,"mousedown",this.onMouseDown);var s=sf.base.Browser.info.name===h?"pointerdown":"touchstart";sf.base.EventHandler.remove(i,s,this.onMouseDown),e+=parseInt(this.allPanes[t].style.flexBasis),sf.base.attributes(i,{ARIA_VALUENOW:e.toString()})}this.addSeparator()},p.prototype.updateResizablePanes=function(e){this.getPaneDetails(),this.isResizable(),sf.base.addClass([this.allPanes[e]],"e-resizable")},p.prototype.getPaneDetails=function(){var e=null,t=null;this.order=parseInt(this.currentSeparator.style.order,10),this.allPanes.length>1&&(e=this.getPrevPane(this.order),t=this.getNextPane(this.order)),e&&t&&(this.previousPane=e,this.nextPane=t,this.prevPaneIndex=this.getPreviousPaneIndex(),this.nextPaneIndex=this.getNextPaneIndex())},p.prototype.getOrderIndex=function(e,t){for(var i,s="pane"===t?this.allPanes:this.allBars,n=0;n<s.length;n++)parseInt(s[n].style.order)===e&&(i=n);return i},p.prototype.getPrevPane=function(e){return this.enableReversePanes?this.getOrderPane(e+1):this.getOrderPane(e-1)},p.prototype.getNextPane=function(e){return this.enableReversePanes?this.getOrderPane(e-1):this.getOrderPane(e+1)},p.prototype.getOrderPane=function(e){for(var t,i=0;i<this.element.children.length;i++)parseInt(this.element.children[i].style.order)===e&&(t=this.element.children[i]);return t},p.prototype.getPreviousPaneIndex=function(){var e=this.enableReversePanes?parseInt(this.currentSeparator.style.order,10)+1:parseInt(this.currentSeparator.style.order,10)-1;return this.getOrderIndex(e,"pane")},p.prototype.getNextPaneIndex=function(){var e=this.enableReversePanes?parseInt(this.currentSeparator.style.order,10)-1:parseInt(this.currentSeparator.style.order,10)+1;return this.getOrderIndex(e,"pane")},p.prototype.onMouseDown=function(e){var i=this;e.preventDefault();var s=e.target.classList.contains(t)?e.target:e.target.parentElement;if(this.splitterDetails(e),!s.classList.contains("e-navigate-arrow")){this.updateCurrentSeparator(s),sf.base.addClass([this.currentSeparator],"e-split-bar-active"),this.updateCursorPosition(e,"previous"),this.getPaneDetails();for(var n=this.element.querySelectorAll("iframe"),o=0;o<n.length;o++)n[o].style.pointerEvents="none";this.onResizeStartEnabled?(this.dotNetRef.invokeMethodAsync("ResizeStartEvent",{event:this.getMouseEvtArgs(e),index:[this.getPreviousPaneIndex(),this.getNextPaneIndex()],separator:this.getDomObject("separator",this.currentSeparator),cancel:!1}).then((function(e){i.isPreventResizeAction=e,e&&i.unwireResizeEvents()})),this.resizeEvent(e)):(this.isPreventResizeAction=!1,this.resizeEvent(e))}},p.prototype.getMouseEvtArgs=function(e){return{button:e.button,buttons:e.buttons,clientX:e.clientX,clientY:e.clientY,detail:e.detail,screenX:e.screenX,screenY:e.screenY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey,altKey:e.altKey,type:e.type}},p.prototype.getKeyBoardEvtArgs=function(e){return{key:e.key,code:e.code,location:e.location,repeat:e.repeat,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey,altKey:e.altKey,type:e.type}},p.prototype.getDomObject=function(e,t){return null!=t?window.sfBlazor.getDomObject(e,t):null},p.prototype.resizeEvent=function(e){this.wireResizeEvents(),this.checkPaneSize(e)},p.prototype.checkPaneSize=function(e){var t,i,s=sf.base.isNullOrUndefined(this.separatorSize)?1:this.separatorSize;if(t=this.orientation===d?this.previousPane.offsetWidth:this.previousPane.offsetHeight,i=this.orientation===d?this.nextPane.offsetWidth:this.nextPane.offsetHeight,this.previousPane.style.flexBasis.indexOf("%")>0||this.nextPane.style.flexBasis.indexOf("%")>0){var n=this.updatePaneFlexBasis(this.previousPane),o=this.updatePaneFlexBasis(this.nextPane);this.totalPercent=n+o,this.totalWidth=this.convertPercentageToPixel(this.totalPercent+"%"),"keydown"!==e.type||sf.base.isNullOrUndefined(e.keyCode)||((39===e.keyCode||40===e.keyCode)&&i>0&&this.getMinInPixel(this.paneSettings[this.nextPaneIndex].min)<this.convertPercentageToPixel(o-1+"%")?(this.previousPane.style.flexBasis=n+1+"%",this.nextPane.style.flexBasis=o-1+"%"):(37===e.keyCode||38===e.keyCode)&&t>0&&this.getMinInPixel(this.paneSettings[this.prevPaneIndex].min)<this.convertPercentageToPixel(n-1+"%")&&(this.previousPane.style.flexBasis=n-1+"%",this.nextPane.style.flexBasis=o+1+"%"))}else this.totalWidth=this.orientation===d?this.previousPane.offsetWidth+this.nextPane.offsetWidth:this.previousPane.offsetHeight+this.nextPane.offsetHeight,"keydown"!==e.type||sf.base.isNullOrUndefined(e.keyCode)||((39===e.keyCode||40===e.keyCode)&&i>0&&this.getMinInPixel(this.paneSettings[this.nextPaneIndex].min)<i+s?(this.addStaticPaneClass(),this.previousPane.style.flexBasis=t+s+c,this.nextPane.style.flexBasis=i<s?"0px":i-s+c):(37===e.keyCode||38===e.keyCode)&&t>0&&this.getMinInPixel(this.paneSettings[this.prevPaneIndex].min)<t-s&&(this.addStaticPaneClass(),this.previousPane.style.flexBasis=t<s?"0px":t-s+c,this.nextPane.style.flexBasis=i+s+c))},p.prototype.getMinInPixel=function(e){if(sf.base.isNullOrUndefined(e))return 0;var t=this.convertPixelToNumber(e.toString());return e.indexOf("%")>0&&(t=this.convertPercentageToPixel(e)),this.convertPixelToNumber(t.toString())},p.prototype.addStaticPaneClass=function(){this.previousPane.classList.contains(s)||""===this.previousPane.style.flexBasis||sf.base.addClass([this.previousPane],s),this.nextPane.classList.contains(s)||""===this.nextPane.style.flexBasis||sf.base.addClass([this.nextPane],s)},p.prototype.convertPercentageToPixel=function(e,t){var i,s=e.toString();if(s.indexOf("%")>-1){i=parseFloat(s.slice(0,s.indexOf("%")));var n=void 0;n=sf.base.isNullOrUndefined(t)?this.orientation===d?this.element.offsetWidth:this.element.offsetHeight:this.panesDimensions[this.allPanes.indexOf(t)],i=Math.ceil(n*(i/100))}else i=parseInt(s,10);return i},p.prototype.updatePaneFlexBasis=function(e){var t;if(e.style.flexBasis.indexOf("%")>0)t=parseFloat(e.style.flexBasis.slice(0,e.style.flexBasis.indexOf("%")));else if(""!==e.style.flexBasis)t=this.convertPixelToPercentage(this.convertPixelToNumber(e.style.flexBasis));else{var i=this.orientation===d?e.offsetWidth:e.offsetHeight;t=this.convertPixelToPercentage(i)}return t},p.prototype.convertPixelToPercentage=function(e){return e/(this.orientation===d?this.element.offsetWidth:this.element.offsetHeight)*100},p.prototype.convertPixelToNumber=function(e){return(e=e.toString()).indexOf("p")>-1?parseFloat(e.slice(0,e.indexOf("p"))):parseFloat(e)},p.prototype.updateCurrentSeparator=function(e){this.currentSeparator=e.classList.contains(t)?e:e.parentElement},p.prototype.wireResizeEvents=function(){sf.base.EventHandler.add(document,"mousemove",this.onMouseMove,this),sf.base.EventHandler.add(document,"mouseup",this.onMouseUp,this);var e=sf.base.Browser.info.name===h?"pointermove":"touchmove",t=sf.base.Browser.info.name===h?"pointerup":"touchend";sf.base.EventHandler.add(document,e,this.onMouseMove,this),sf.base.EventHandler.add(document,t,this.onMouseUp,this)},p.prototype.unwireResizeEvents=function(){var e=sf.base.Browser.info.name===h?"pointermove":"touchmove",t=sf.base.Browser.info.name===h?"pointerup":"touchend";sf.base.EventHandler.remove(document,"mousemove",this.onMouseMove),sf.base.EventHandler.remove(document,"mouseup",this.onMouseUp),sf.base.EventHandler.remove(document,e,this.onMouseMove),sf.base.EventHandler.remove(document,t,this.onMouseUp),window.removeEventListener("resize",this.reportWindowSize.bind(this))},p.prototype.onMouseMove=function(e){if(this.isCursorMoved(e)&&!this.isPreventResizeAction){this.getPaneDetails(),this.getPaneDimensions(!1),this.resizingEnabled&&this.dotNetRef.invokeMethodAsync("ResizingEvent",{event:this.getMouseEvtArgs(e),index:[this.getPreviousPaneIndex(),this.getNextPaneIndex()],separator:this.getDomObject("separator",this.currentSeparator),paneSize:[this.prePaneDimenson,this.nextPaneDimension]});var t,n=this.validateDraggedPosition(this.getSeparatorPosition(e),this.prePaneDimenson,this.nextPaneDimension);if(this.getBorder(),t=this.orientation===d?this.element.getBoundingClientRect().left+n-this.currentSeparator.getBoundingClientRect().left+this.border:this.element.getBoundingClientRect().top+n-this.currentSeparator.getBoundingClientRect().top+this.border,this.nextPaneHeightWidth="string"===i(this.nextPaneHeightWidth)&&this.nextPaneHeightWidth.indexOf("p")>-1?this.convertPixelToNumber(this.nextPaneHeightWidth):parseInt(this.nextPaneHeightWidth,10),this.previousPaneHeightWidth="string"===i(this.previousPaneHeightWidth)&&this.previousPaneHeightWidth.indexOf("p")>-1?this.convertPixelToNumber(this.previousPaneHeightWidth):parseInt(this.previousPaneHeightWidth,10),this.prevPaneCurrentWidth=t+this.previousPaneHeightWidth,this.nextPaneCurrentWidth=this.nextPaneHeightWidth-t,this.validateMinMaxValues(),this.nextPaneCurrentWidth<0&&(this.nextPaneCurrentWidth=0),this.prevPaneCurrentWidth<0&&(this.prevPaneCurrentWidth=0),this.nextPaneCurrentWidth+this.prevPaneCurrentWidth>this.totalWidth&&(this.nextPaneCurrentWidth<this.prevPaneCurrentWidth?this.prevPaneCurrentWidth=this.prevPaneCurrentWidth-(this.nextPaneCurrentWidth+this.prevPaneCurrentWidth-this.totalWidth):this.nextPaneCurrentWidth=this.nextPaneCurrentWidth-(this.nextPaneCurrentWidth+this.prevPaneCurrentWidth-this.totalWidth)),this.nextPaneCurrentWidth+this.prevPaneCurrentWidth<this.totalWidth){var o=this.totalWidth-(this.nextPaneCurrentWidth+this.prevPaneCurrentWidth);this.nextPaneCurrentWidth=this.nextPaneCurrentWidth+o}this.calculateCurrentDimensions(),this.addStaticPaneClass();for(var r=0,a=0;a<this.paneSettings.length;a++)""===this.paneSettings[a].size&&(r+=1);var l=r===this.allPanes.length;if(""==this.previousPane.style.flexBasis&&""==this.nextPane.style.flexBasis){var h=this.allPanes.length%this.allBars.length;this.prevPaneIndex==h?(this.nextPane.style.flexBasis=this.nextPaneCurrentWidth,sf.base.addClass([this.nextPane],s)):this.nextPaneIndex==h?(this.previousPane.style.flexBasis=this.prevPaneCurrentWidth,sf.base.addClass([this.previousPane],s)):(this.nextPane.style.flexBasis=this.nextPaneCurrentWidth,sf.base.addClass([this.nextPane],s))}else l?(this.previousPane.style.flexBasis=this.prevPaneCurrentWidth,sf.base.addClass([this.previousPane],s),this.nextPane.style.flexBasis=this.nextPaneCurrentWidth,sf.base.addClass([this.nextPane],s)):(""!==this.previousPane.style.flexBasis&&(this.previousPane.style.flexBasis=this.prevPaneCurrentWidth),""!==this.nextPane.style.flexBasis&&(this.nextPane.style.flexBasis=this.nextPaneCurrentWidth));var c=""!==this.previousPane.style.flexBasis&&""!==this.nextPane.style.flexBasis;this.allPanes.length>2||!c||this.updateSplitterSize();for(var p=0,u=0;u<this.allBars.length;u++){var f=this.allBars[u];p+=parseInt(this.allPanes[u].style.flexBasis),sf.base.attributes(f,{ARIA_VALUENOW:p.toString()})}}},p.prototype.updateSplitterSize=function(e){for(var t=0,i=[],s=0,n=this.element.children,o=0;o<n.length;o++)t+=this.orientation===d?n[o].offsetWidth:n[o].offsetHeight;for(var r=0;r<this.allBars.length;r++){var a=getComputedStyle(this.allBars[r]);t+=this.orientation===d?parseInt(a.marginLeft,10)+parseInt(a.marginLeft,10):parseInt(a.marginTop,10)+parseInt(a.marginBottom,10)}var l=this.orientation===d?this.element.offsetWidth-(2*this.border+t):this.element.offsetHeight-(2*this.border+t);for(o=0;o<this.allPanes.length&&!sf.base.isNullOrUndefined(this.paneSettings[o]);o++)(""===this.allPanes[o].innerText?this.paneSettings[o].size&&""===this.allPanes[o].innerText:this.paneSettings[o].size||""===this.allPanes[o].innerText)||(i[s]=o,s++);var h=l/i.length;for(r=0;r<i.length;r++)""!==this.allPanes[i[r]].style.flexBasis&&(this.allPanes[i[r]].style.flexBasis=this.orientation===d?this.allPanes[i[r]].offsetWidth+h+c:this.allPanes[i[r]].offsetHeight+h+c);if(2===this.allPanes.length&&e){var p=this.allPanes.length,u=void 0,f=void 0,g=void 0,m=void 0;for(o=0;o<p&&!sf.base.isNullOrUndefined(this.paneSettings[o]);o++)if(!sf.base.isNullOrUndefined(this.paneSettings[o].min)&&(f=this.convertPixelToNumber(this.paneSettings[o].min.toString()),this.paneSettings[o].min.indexOf("%")>0&&(f=this.convertPercentageToPixel(this.paneSettings[o].min)),u=this.convertPixelToNumber(f.toString()),(this.orientation===d?this.allPanes[o].offsetWidth:this.allPanes[o].offsetHeight)<u)){0===o?(g=this.allPanes[o],m=this.allPanes[o+1]):(g=this.allPanes[o],m=this.allPanes[o-1]);var v=u-(this.orientation===d?this.allPanes[o].offsetWidth:this.allPanes[o].offsetHeight),b=g.style.flexBasis.indexOf("%")>-1,y=this.orientation===d?g.offsetWidth:g.offsetHeight;g.style.flexBasis=b?this.convertPixelToPercentage(y+v)+"%":y+v+"px";var M=this.orientation===d?m.offsetWidth:m.offsetHeight;m.style.flexBasis=m.style.flexBasis.indexOf("%")>-1?this.convertPixelToPercentage(M-v)+"%":M-v+"px"}}},p.prototype.calcDragPosition=function(e,t){var i;return(i=(i=(this.orientation===d?this.currentCoordinates.x-e:this.currentCoordinates.y-e)/t)>1?1:i<0?0:i)*t},p.prototype.getSeparatorPosition=function(e){this.updateCursorPosition(e,"current");var t=this.orientation===d?this.element.getBoundingClientRect().left+window.scrollX:this.element.getBoundingClientRect().top+window.scrollY,i=this.orientation===d?this.element.offsetWidth:this.element.offsetHeight;return this.calcDragPosition(t,i)},p.prototype.getBorder=function(){var e=this.orientation===d?(this.element.offsetWidth-this.element.clientWidth)/2:(this.element.offsetHeight-this.element.clientHeight)/2;this.border="chrome"!==sf.base.Browser.info.name?0:e},p.prototype.validateMinMaxValues=function(){this.prevPaneCurrentWidth=this.validateMinRange(this.prevPaneIndex,this.prevPaneCurrentWidth,this.previousPane),this.nextPaneCurrentWidth=this.validateMinRange(this.nextPaneIndex,this.nextPaneCurrentWidth,this.nextPane),this.prevPaneCurrentWidth=this.validateMaxRange(this.prevPaneIndex,this.prevPaneCurrentWidth,this.previousPane),this.nextPaneCurrentWidth=this.validateMaxRange(this.nextPaneIndex,this.nextPaneCurrentWidth,this.nextPane)},p.prototype.validateMinRange=function(e,t,i){var s,n,o=null,r=0;return sf.base.isNullOrUndefined(this.paneSettings[e])||sf.base.isNullOrUndefined(this.paneSettings[e].min)||(o=this.paneSettings[e].min.toString()),sf.base.isNullOrUndefined(o)||(o.indexOf("%")>0&&(o=this.convertPercentageToPixel(o).toString()),t<(s=this.convertPixelToNumber(o))&&(r=t-s<=0?0:t-s,this.totalWidth=this.totalWidth-r,this.totalPercent=this.convertPixelToPercentage(this.totalWidth),n=s)),sf.base.isNullOrUndefined(n)?t:n},p.prototype.validateMaxRange=function(e,t,i){var s,n,o=null;return sf.base.isNullOrUndefined(this.paneSettings[e])||sf.base.isNullOrUndefined(this.paneSettings[e].max)||(o=this.paneSettings[e].max.toString()),sf.base.isNullOrUndefined(o)||(o.indexOf("%")>0&&(o=this.convertPercentageToPixel(o).toString()),t>(s=this.convertPixelToNumber(o))&&(this.totalWidth=this.totalWidth-(t-s),this.totalPercent=this.convertPixelToPercentage(this.totalWidth),n=s)),sf.base.isNullOrUndefined(n)?t:n},p.prototype.calculateCurrentDimensions=function(){this.updatePrePaneInPercentage||this.updateNextPaneInPercentage?(this.prevPaneCurrentWidth=Math.round(Number(Math.round(10*this.convertPixelToPercentage(this.prevPaneCurrentWidth))/10)),this.nextPaneCurrentWidth=Math.round(Number(Math.round(10*this.convertPixelToPercentage(this.nextPaneCurrentWidth))/10)),0===this.prevPaneCurrentWidth&&(this.nextPaneCurrentWidth=this.totalPercent),0===this.nextPaneCurrentWidth&&(this.prevPaneCurrentWidth=this.totalPercent),this.prevPaneCurrentWidth+this.nextPaneCurrentWidth!==this.totalPercent?this.equatePaneWidths():(this.prevPaneCurrentWidth=this.prevPaneCurrentWidth+"%",this.nextPaneCurrentWidth=this.nextPaneCurrentWidth+"%"),this.prevPaneCurrentWidth=this.updatePrePaneInPercentage?this.prevPaneCurrentWidth:this.convertPercentageToPixel(this.prevPaneCurrentWidth)+"px",this.nextPaneCurrentWidth=this.updateNextPaneInPercentage?this.nextPaneCurrentWidth:this.convertPercentageToPixel(this.nextPaneCurrentWidth)+"px",this.updatePrePaneInPercentage=!1,this.updateNextPaneInPercentage=!1):(this.prevPaneCurrentWidth=this.prevPaneCurrentWidth+"px",this.nextPaneCurrentWidth=this.nextPaneCurrentWidth+"px")},p.prototype.equatePaneWidths=function(){var e;this.prevPaneCurrentWidth+this.nextPaneCurrentWidth>this.totalPercent&&(e=this.prevPaneCurrentWidth+this.nextPaneCurrentWidth-this.totalPercent,this.prevPaneCurrentWidth=this.prevPaneCurrentWidth-e/2+"%",this.nextPaneCurrentWidth=this.nextPaneCurrentWidth-e/2+"%"),this.prevPaneCurrentWidth+this.nextPaneCurrentWidth<this.totalPercent&&(e=this.totalPercent-(this.prevPaneCurrentWidth+this.nextPaneCurrentWidth),this.prevPaneCurrentWidth=this.prevPaneCurrentWidth+e/2+"%",this.nextPaneCurrentWidth=this.nextPaneCurrentWidth+e/2+"%")},p.prototype.validateDraggedPosition=function(e,t,i){var s=this.orientation===d?this.currentSeparator.offsetLeft:this.currentSeparator.offsetTop,n=s-t,o=i+s,r=this.getMinMax(this.prevPaneIndex,"min"),a=this.getMinMax(this.nextPaneIndex,"min"),l=this.getMinMax(this.prevPaneIndex,"max"),h=this.getMinMax(this.nextPaneIndex,"max"),c=e;return e>o-a?c=o-a:e<n+r&&(c=n+r),sf.base.isNullOrUndefined(l)?sf.base.isNullOrUndefined(h)||e<o-h&&(c=o-h):e>n+l&&(c=n+l),c},p.prototype.getMinMax=function(e,t){var i="min"===t?0:null,s=null;return"min"===t?sf.base.isNullOrUndefined(this.paneSettings[e])||sf.base.isNullOrUndefined(this.paneSettings[e].min)||(s=this.paneSettings[e].min):sf.base.isNullOrUndefined(this.paneSettings[e])||sf.base.isNullOrUndefined(this.paneSettings[e].max)||(s=this.paneSettings[e].max),this.paneSettings.length>0&&!sf.base.isNullOrUndefined(this.paneSettings[e])&&!sf.base.isNullOrUndefined(s)?(s.indexOf("%")>0&&(s=this.convertPercentageToPixel(s).toString()),this.convertPixelToNumber(s)):i},p.prototype.isValidSize=function(e){var t;return!sf.base.isNullOrUndefined(this.paneSettings[e])&&!sf.base.isNullOrUndefined(this.paneSettings[e].size)&&this.paneSettings[e].size.indexOf("%")>-1&&(t=!0),t},p.prototype.getPaneDimensions=function(e){this.previousPaneHeightWidth=""===this.previousPane.style.flexBasis||e?this.getPaneHeight(this.previousPane):this.previousPane.style.flexBasis,this.nextPaneHeightWidth=""===this.nextPane.style.flexBasis||e?this.getPaneHeight(this.nextPane):this.nextPane.style.flexBasis,this.isValidSize(this.prevPaneIndex)&&(this.previousPaneHeightWidth=this.convertPercentageToPixel(this.previousPaneHeightWidth).toString(),this.updatePrePaneInPercentage=!0),this.isValidSize(this.nextPaneIndex)&&(this.nextPaneHeightWidth=this.convertPercentageToPixel(this.nextPaneHeightWidth).toString(),this.updateNextPaneInPercentage=!0),this.prePaneDimenson=this.convertPixelToNumber(this.previousPaneHeightWidth.toString()),this.nextPaneDimension=this.convertPixelToNumber(this.nextPaneHeightWidth.toString())},p.prototype.getPaneHeight=function(e){return this.orientation===d?e.offsetWidth.toString():e.offsetHeight.toString()},p.prototype.isCursorMoved=function(e){return"mouse"===this.getEventType(e.type)||!sf.base.isNullOrUndefined(e.pointerType)&&"mouse"===this.getEventType(e.pointerType)?this.checkCoordinates(e.pageX,e.pageY):sf.base.Browser.info.name!==h?this.checkCoordinates(e.touches[0].pageX,e.touches[0].pageY):this.checkCoordinates(e.pageX,e.pageY)},p.prototype.checkCoordinates=function(e,t){var i=!0;return e!==this.previousCoordinates.x&&t!==this.previousCoordinates.y||(i=!1),i},p.prototype.onMouseUp=function(e){if(this.isPreventResizeAction)this.unwireResizeEvents();else{sf.base.removeClass([this.currentSeparator],"e-split-bar-active"),this.unwireResizeEvents();for(var t=0;t<this.element.querySelectorAll("iframe").length;t++)this.element.querySelectorAll("iframe")[t].style.pointerEvents="auto";this.getPaneDimensions(!1),this.updatePersistData(),this.onResizeStopEnabled&&this.dotNetRef.invokeMethodAsync("SplitterResizeInfo",{event:this.getMouseEvtArgs(e),index:[this.getPreviousPaneIndex(),this.getNextPaneIndex()],separator:this.getDomObject("separator",this.currentSeparator),paneSize:[this.prePaneDimenson,this.nextPaneDimension],resizingPaneSizes:[this.previousPane.style.flexBasis,this.nextPane.style.flexBasis]})}},p.prototype.isMouseEvent=function(e){var t;return("mouse"===this.getEventType(e.type)||!sf.base.isNullOrUndefined(e.pointerType)&&"mouse"===this.getEventType(e.pointerType))&&(t=!0),t},p.prototype.getEventType=function(e){return e.indexOf("mouse")>-1?"mouse":"touch"},p.prototype.updateCursorPosition=function(e,t){if(this.isMouseEvent(e))this.changeCoordinates({x:e.pageX,y:e.pageY},t);else{var i=sf.base.Browser.info.name!==h?e.touches[0]:e;this.changeCoordinates({x:i.pageX,y:i.pageY},t)}},p.prototype.changeCoordinates=function(e,t){"previous"===t?this.previousCoordinates=e:this.currentCoordinates=e},p.prototype.isResizable=function(){var e,t=this.getNextPaneIndex(),i=this.getPreviousPaneIndex();return(!sf.base.isNullOrUndefined(this.paneSettings[i])&&this.paneSettings[i].resizable&&!sf.base.isNullOrUndefined(this.paneSettings[t])&&this.paneSettings[t].resizable||sf.base.isNullOrUndefined(this.paneSettings[t]))&&(e=!0),e},p.prototype.clickHandler=function(e){if(e.detail<=1){if(!e.target.classList.contains("e-navigate-arrow")){var i=sf.base.selectAll(".e-splitter > ."+t+".e-split-bar-hover");i.length>0&&sf.base.removeClass(i,"e-split-bar-hover"),sf.base.addClass([e.target],"e-split-bar-hover")}this.updateIconClass();var s=e.target;(s.classList.contains(o)||s.classList.contains(r))&&this.collapseAction(e),(s.classList.contains("e-arrow-right")||s.classList.contains(a))&&this.expandAction(e);for(var n=0,l=this.element.children,h=0;h<l.length;h++)n+=this.orientation===d?l[h].offsetWidth:l[h].offsetHeight;n>this.element.offsetWidth&&this.updateSplitterSize()}},p.prototype.collapseAction=function(e){if(this.splitterDetails(e),this.collapseFlag)this.collapsePane(e);else{var t={cancel:!1,event:e,index:[this.getPreviousPaneIndex(),this.getNextPaneIndex()]};this.onCollapseEnabled?this.dotNetRef.invokeMethodAsync("OnCollapseEvent",-1,t):sf.base.isNullOrUndefined(e)?this.collapseMethodEvent(-1,t):this.onCollapseEvent(t)}},p.prototype.onCollapseEvent=function(e){var t=this.orientation===d?o:r,i={target:this.allBars[e.index[0]].querySelector("."+t)};this.collapsePane(i),this.collapsedEnabled&&(this.getPaneDimensions(!0),this.dotNetRef.invokeMethodAsync("CollapsedEvent",{event:this.getMouseEvtArgs(e),index:[this.getPreviousPaneIndex(),this.getNextPaneIndex()],paneSize:[this.prePaneDimenson,this.nextPaneDimension]}))},p.prototype.collapsePane=function(e){var t=this.element.querySelectorAll(".e-collapsed").length,i=this.nextPane.nextElementSibling,n=this.previousPane.classList.contains(s)&&!this.previousPane.classList.contains("e-collapsed")&&!this.nextPane.classList.contains("e-collapsed")&&i.classList.contains("e-pane")&&!i.classList.contains(s)&&!i.classList.contains("e-collapsed")&&!(t===this.allPanes.length-2)||this.nextPane.classList.contains("e-collapsed")&&!this.previousPane.classList.contains(s)&&this.nextPane.classList.contains(s),o=["e-collapsed","e-pane-hidden"];this.nextPane.classList.contains("e-collapsed")?(sf.base.removeClass([this.previousPane],"e-expanded"),sf.base.removeClass([this.nextPane],o),this.collapseFlag||this.updatePaneSettings(this.nextPaneIndex,!1)):(sf.base.removeClass([this.previousPane],"e-expanded"),sf.base.removeClass([this.nextPane],o),sf.base.addClass([this.nextPane],"e-expanded"),sf.base.addClass([this.previousPane],o),this.collapseFlag||this.updatePaneSettings(this.prevPaneIndex,!0)),this.updateIconsOnCollapse(e),this.previousPane.setAttribute("aria-expanded","false"),this.nextPane.setAttribute("aria-expanded","true"),this.updateFlexGrow(this.checkStaticPanes()),n&&(sf.base.removeClass([this.nextPane],"e-expanded"),this.nextPane.style.flexGrow="")},p.prototype.updateIconsOnCollapse=function(e){this.splitterProperty(),this.previousPane.classList.contains("e-collapsed")&&!this.nextPane.classList.contains("e-collapsed")?(sf.base.addClass([e.target],l),this.paneSettings[this.prevPaneIndex].collapsible&&sf.base.removeClass([sf.base.select("."+this.arrow,this.currentSeparator)],l),this.resizableModel(this.currentBarIndex,!1),!this.previousPane.classList.contains("e-collapsed")||this.nextPane.classList.contains("e-collapsed")||this.paneSettings[this.prevPaneIndex].collapsible||this.hideTargetBarIcon(this.prevBar,this.rightArrow),this.previousPane.previousElementSibling&&!this.previousPane.previousElementSibling.classList.contains("e-collapsed")&&(this.previousPane.classList.contains("e-collapsed")&&this.paneSettings[this.prevPaneIndex].collapsible?this.showTargetBarIcon(this.prevBar,this.leftArrow):this.paneSettings[this.prevPaneIndex].collapsible||this.hideTargetBarIcon(this.prevBar,this.leftArrow)),sf.base.isNullOrUndefined(this.prevBar)||(this.resizableModel(this.currentBarIndex-1,!1),this.hideTargetBarIcon(this.prevBar,this.arrow)),this.paneSettings[this.prevPaneIndex].collapsible||this.hideTargetBarIcon(this.currentSeparator,this.rightArrow)):this.splitInstance.prevPaneCollapsed||this.splitInstance.nextPaneExpanded||(this.paneSettings[this.currentBarIndex].resizable&&this.resizableModel(this.currentBarIndex,!0),!this.splitInstance.nextPaneNextEle.classList.contains("e-collapsed")&&this.paneSettings[this.currentBarIndex+1].resizable&&this.resizableModel(this.currentBarIndex+1,!0),this.paneSettings[this.currentBarIndex].collapsible||sf.base.addClass([e.target],l),this.previousPane&&0===this.prevPaneIndex&&this.paneSettings[this.prevPaneIndex].collapsible&&this.showTargetBarIcon(this.currentSeparator,this.leftArrow),this.nextPane&&this.nextPaneIndex===this.allPanes.length-1&&this.paneSettings[this.nextPaneIndex].collapsible&&this.showTargetBarIcon(this.allBars[this.nextPaneIndex-1],this.rightArrow),!this.previousPane.classList.contains("e-collapsed")&&this.paneSettings[this.nextPaneIndex].collapsible&&this.showTargetBarIcon(this.currentSeparator,this.rightArrow),sf.base.isNullOrUndefined(this.nextBar)||(this.nextPane.nextElementSibling&&this.nextPane.nextElementSibling.classList.contains("e-collapsed")&&this.paneSettings[this.nextPaneIndex+1].collapsible||!this.nextPane.nextElementSibling.classList.contains("e-collapsed")&&this.paneSettings[this.nextPaneIndex].collapsible?this.showTargetBarIcon(this.nextBar,this.leftArrow):!this.paneSettings[this.splitInstance.nextPaneIndex+1].collapsible&&this.paneSettings[this.currentBarIndex]&&this.hideTargetBarIcon(this.nextBar,this.arrow)),this.nextPaneIndex===this.allPanes.length-1||!this.nextPane.nextElementSibling||this.nextPane.classList.contains("e-collapsed")||this.nextPane.nextElementSibling.classList.contains("e-collapsed")||this.paneSettings[this.nextPaneIndex+1].collapsible||this.hideTargetBarIcon(this.nextBar,this.rightArrow))},p.prototype.expandAction=function(e){if(this.expandingFlag){this.splitterDetails(e);var t=[this.getPreviousPaneIndex(),this.getNextPaneIndex()];this.expandFlag?this.onExpandEnabled?this.dotNetRef.invokeMethodAsync("OnExpandEvent",{cancel:!1,index:t,event:this.getMouseEvtArgs(e)}):this.onExpandEvent({event:e,index:t}):this.expandPane(e)}},p.prototype.onExpandEvent=function(e){var t=this.orientation===d?"e-arrow-right":a,i={target:this.allBars[e.index[0]].querySelector("."+t)};this.expandPane(i),this.expandedEnabled&&(this.getPaneDimensions(!0),this.dotNetRef.invokeMethodAsync("ExpandedEvent",{event:this.getMouseEvtArgs(e.event),index:[this.getPreviousPaneIndex(),this.getNextPaneIndex()],paneSize:[this.prePaneDimenson,this.nextPaneDimension]}))},p.prototype.getSeparatorIndex=function(e){var t=this.orientation===d?"e-split-bar-horizontal":"e-split-bar-vertical";this.allBars.length<1&&(this.allBars=sf.base.selectAll("."+t,this.element));var i=[].slice.call(this.allBars);return(i=this.enableReversePanes?i.reverse():i).indexOf(e)},p.prototype.updateBars=function(e){this.prevBar=this.allBars[e-1],this.nextBar=this.allBars[e+1]},p.prototype.splitterDetails=function(e){this.element.classList.contains("e-splitter-horizontal")?(this.orientation=d,this.arrow=e.target.classList.contains(o)?"e-arrow-right":o):(this.orientation="Vertical",this.arrow=e.target.classList.contains(r)?a:r),this.updateCurrentSeparator(e.target),this.currentIndex(e),this.updateBars(this.currentBarIndex),this.getPaneDetails()},p.prototype.currentIndex=function(e){this.currentBarIndex=this.getOrderIndex(parseInt(e.target.parentElement.style.order,10),"splitbar")},p.prototype.expandPane=function(e){var t=this.element.querySelectorAll(".e-collapsed").length,i=!this.previousPane.classList.contains("e-collapsed")&&this.previousPane.classList.contains(s)&&!this.nextPane.classList.contains("e-collapsed")&&!this.nextPane.classList.contains("e-expanded")&&this.nextPane.nextElementSibling.classList.contains("e-pane")&&!this.nextPane.nextElementSibling.classList.contains(s)&&!(t===this.allPanes.length-2),n=["e-collapsed","e-pane-hidden"];this.previousPane.classList.contains("e-collapsed")?(sf.base.removeClass([this.previousPane],n),sf.base.removeClass([this.nextPane],"e-expanded"),this.expandFlag&&this.updatePaneSettings(this.prevPaneIndex,!1)):(sf.base.removeClass([this.nextPane],"e-expanded"),sf.base.removeClass([this.previousPane],n),sf.base.addClass([this.previousPane],"e-expanded"),sf.base.addClass([this.nextPane],n),this.expandFlag&&this.updatePaneSettings(this.nextPaneIndex,!0)),this.updateIconsOnExpand(e),this.previousPane.setAttribute("aria-expanded","true"),this.nextPane.setAttribute("aria-expanded","false"),this.updateFlexGrow(this.checkStaticPanes()),i&&(sf.base.removeClass([this.previousPane],"e-expanded"),this.previousPane.style.flexGrow=""),this.expandingFlag=!0},p.prototype.checkStaticPanes=function(){for(var e=!0,t=0;t<this.allPanes.length;t++)!this.allPanes[t].classList.contains("e-collapsed")&&e&&(e=!!this.allPanes[t].classList.contains(s));return e},p.prototype.splitterProperty=function(){this.splitInstance={currentBarIndex:this.currentBarIndex,nextPaneCollapsible:this.nextPane.classList.contains("e-collapsible"),prevPaneCollapsible:this.previousPane.classList.contains("e-collapsible"),prevPaneExpanded:this.previousPane.classList.contains("e-expanded"),nextPaneExpanded:this.nextPane.classList.contains("e-expanded"),nextPaneCollapsed:this.nextPane.classList.contains("e-collapsed"),prevPaneCollapsed:this.previousPane.classList.contains("e-collapsed"),nextPaneIndex:this.getNextPaneIndex(),prevPaneIndex:this.getPreviousPaneIndex(),nextPaneNextEle:this.nextPane.nextElementSibling,prevPanePreEle:this.previousPane.previousElementSibling}},p.prototype.updateIconsOnExpand=function(e){this.splitterProperty(),sf.base.addClass([e.target],l),this.splitInstance.prevPaneExpanded||this.splitInstance.nextPaneCollapsed?this.splitInstance.prevPaneExpanded&&this.splitInstance.nextPaneCollapsed&&(this.resizableModel(this.currentBarIndex,!1),this.resizableModel(this.currentBarIndex+1,!1),this.paneSettings[this.nextPaneIndex].collapsible&&sf.base.removeClass([sf.base.select("."+this.arrow,this.currentSeparator)],l),sf.base.isNullOrUndefined(this.nextBar)||this.hideTargetBarIcon(this.nextBar,this.arrow),this.nextPane&&this.nextPaneIndex===this.allPanes.length-1&&!this.paneSettings[this.nextPaneIndex].collapsible&&this.splitInstance.nextPaneCollapsed&&this.hideTargetBarIcon(this.currentSeparator,this.arrow),this.nextPaneIndex!==this.allPanes.length-1&&this.nextPane.nextElementSibling&&this.nextPane.classList.contains("e-collapsed")&&!this.nextPane.nextElementSibling.classList.contains("e-collapsed")&&this.paneSettings[this.nextPaneIndex].collapsible&&this.showTargetBarIcon(this.nextBar,this.rightArrow)):(this.paneSettings[this.prevPaneIndex].collapsible&&sf.base.removeClass([sf.base.select("."+this.arrow,this.currentSeparator)],l),this.paneSettings[this.nextPaneIndex].collapsible&&sf.base.removeClass([e.target],l),this.paneSettings[this.currentBarIndex].resizable&&this.resizableModel(this.currentBarIndex,!0),sf.base.isNullOrUndefined(this.prevBar)||this.splitInstance.prevPanePreEle.classList.contains("e-collapsed")?(this.previousPane.previousElementSibling&&this.paneSettings[this.prevPaneIndex].collapsible&&this.previousPane.previousElementSibling.classList.contains("e-collapsed")&&this.paneSettings[this.prevPaneIndex-1].collapsible&&this.showTargetBarIcon(this.prevBar,this.rightArrow),this.paneSettings[this.currentBarIndex+1].collapsible||this.hideTargetBarIcon(this.currentSeparator,this.rightArrow)):(this.paneSettings[this.currentBarIndex-1].resizable&&this.resizableModel(this.currentBarIndex-1,!0),this.paneSettings[this.prevPaneIndex].collapsible&&this.showTargetBarIcon(this.prevBar,this.rightArrow),this.paneSettings[this.currentBarIndex-1].collapsible||this.hideTargetBarIcon(this.prevBar,this.arrow),this.paneSettings[this.currentBarIndex].collapsible&&!this.paneSettings[this.currentBarIndex+1].collapsible&&this.hideTargetBarIcon(this.currentSeparator,this.rightArrow)))},p.prototype.showResizer=function(e){!sf.base.isNullOrUndefined(this.previousPane)&&this.previousPane.classList.contains("e-resizable")&&!sf.base.isNullOrUndefined(this.nextPane)&&this.nextPane.classList.contains("e-resizable")&&sf.base.removeClass([sf.base.select("."+n,e)],"e-hide-handler")},p.prototype.resizableModel=function(e,t){var i,s=e;i=e===this.allBars.length?e-1:e,sf.base.EventHandler.remove(this.allBars[i],"mousedown",this.onMouseDown),t?(sf.base.EventHandler.add(this.allBars[i],"mousedown",this.onMouseDown,this),this.isResizable()&&(this.showResizer(this.allBars[i]),sf.base.removeClass([sf.base.select("."+n,this.allBars[i])],"e-hide-handler"),sf.base.addClass([this.allBars[i]],"e-resizable-split-bar"),e===this.allBars.length?sf.base.addClass([this.allPanes[e]],"e-resizable"):sf.base.addClass([this.allPanes[i]],"e-resizable"),this.updateResizablePanes(s))):(this.updateResizablePanes(s),sf.base.addClass([sf.base.select("."+n,this.allBars[i])],"e-hide-handler"),sf.base.removeClass([this.allBars[i]],"e-resizable-split-bar"),e===this.allBars.length?sf.base.removeClass([this.allPanes[e]],"e-resizable"):sf.base.removeClass([this.allPanes[i]],"e-resizable"))},p.prototype.hideTargetBarIcon=function(e,t){sf.base.addClass([sf.base.select("."+t,e)],l)},p.prototype.showTargetBarIcon=function(e,t){sf.base.removeClass([sf.base.select("."+t,e)],l)},p.prototype.updateFlexGrow=function(e){for(var t=this.allPanes,i=0;i<t.length;i++)t[i].style.flexGrow=t[i].classList.contains("e-expanded")?"1":t[i].classList.contains("e-collapsed")?"0":"",e&&!this.nextPane.classList.contains("e-collapsed")&&(this.nextPane.style.flexGrow="1")},p.prototype.updatePaneSettings=function(e,t){this.isToggleInvoke||(this.paneSettings[e].collapsed=t,this.updatePersistData(),this.dotNetRef.invokeMethodAsync("UpdateCollapsed",e,t))},p.prototype.addMouseActions=function(e){var t,i,s=this;e.addEventListener("mouseenter",(function(){t=setTimeout((function(){sf.base.addClass([e],["e-split-bar-hover"])}),s.iconsDelay)})),e.addEventListener("mouseleave",(function(){clearTimeout(t),sf.base.removeClass([e],["e-split-bar-hover"])})),e.addEventListener("mouseout",(function(){clearTimeout(i)})),e.addEventListener("mouseover",(function(){i=setTimeout((function(){sf.base.addClass([e],["e-split-bar-hover"])}),s.iconsDelay)}))},p.prototype.updateIconClass=function(){this.orientation===d?(this.leftArrow=o,this.rightArrow="e-arrow-right"):(this.leftArrow=r,this.rightArrow=a)},p.prototype.isCollapsed=function(e){if(!(!sf.base.isNullOrUndefined(e)&&this.paneSettings[e].collapsed&&this.allPanes.length>0&&!sf.base.isNullOrUndefined(this.allPanes[e])&&this.allPanes[e].classList.contains("e-collapsed"))){if(this.expandFlag=!1,sf.base.isNullOrUndefined(e)){for(var t=0;t<this.allPanes.length;t++)!sf.base.isNullOrUndefined(this.paneSettings[t])&&this.paneSettings[t].collapsed&&this.updateIsCollapsed(t,this.targetArrows().collapseArrow,this.targetArrows().lastBarArrow);for(t=this.allPanes.length-1;t>=0;t--)if(!sf.base.isNullOrUndefined(this.paneSettings[t])&&this.paneSettings[t].collapsed&&!this.allPanes[t].classList.contains("e-collapsed")){var i=this.orientation===d?"e-arrow-right":a;if(0!==t)this.collapseArrow(t-1,i).click();if(!this.nextPane.classList.contains("e-collapsed"))this.collapseArrow(t-1,i).click()}}else{this.collapseFlag=!0;var s=e===this.allBars.length,n=s?e-1:e,o={target:!s&&this.allPanes[e+1].classList.contains("e-collapsed")&&0!==e?this.collapseArrow(n-1,this.targetArrows().lastBarArrow):s?this.collapseArrow(n,this.targetArrows().lastBarArrow):this.collapseArrow(n,this.targetArrows().collapseArrow)};this.splitterDetails(o);var r={cancel:!1,index:[this.getPreviousPaneIndex(),this.getNextPaneIndex()]};this.onCollapseEnabled?this.dotNetRef.invokeMethodAsync("OnCollapseEvent",e,r):this.collapseMethodEvent(e,r)}this.expandFlag=!0}},p.prototype.collapseMethodEvent=function(e,t){this.expandFlag=!1;var i=[];i[0]=e;for(var s=1,n=0;n<this.allPanes.length;n++)this.allPanes[n].classList.contains("e-collapsed")&&(i[s]=n,s++);i=i.sort(),this.updateIsCollapsed(e,this.targetArrows().collapseArrow,this.targetArrows().lastBarArrow);for(n=0;n<i.length;n++)this.allPanes[i[n]].classList.contains("e-collapsed")||this.updateIsCollapsed(i[n],this.targetArrows().collapseArrow,this.targetArrows().lastBarArrow);for(n=i.length;n>0;n--)if(!this.allPanes[i[n-1]].classList.contains("e-collapsed")){var o=this.targetArrows();this.updateIsCollapsed(i[n-1],o.collapseArrow,o.lastBarArrow)}this.collapsedEnabled&&this.dotNetRef.invokeMethodAsync("CollapsedEvent",{event:this.getMouseEvtArgs(t),index:[this.getPreviousPaneIndex(),this.getNextPaneIndex()]}),this.collapseFlag=!1,this.expandFlag=!0},p.prototype.toggle=function(e,t){this.isToggleInvoke=!0;for(var i=0;i<this.paneSettings.length;i++)e.indexOf(i)>-1&&this.paneSettings[i].collapsed&&(this.collapsedOnchange(i),this.paneSettings[i].collapsed=!1);for(i=0;i<this.paneSettings.length;i++)t.indexOf(i)>-1&&!this.paneSettings[i].collapsed&&(this.isCollapsed(i),this.paneSettings[i].collapsed=!0);this.isToggleInvoke=!1,this.updatePersistData(),this.dotNetRef.invokeMethodAsync("UpdateSettings",this.paneSettings)},p.prototype.expand=function(e){this.collapsedOnchange(e),this.updatePaneSettings(e,!1)},p.prototype.collapse=function(e){this.isCollapsed(e),this.updatePaneSettings(e,!0)},p.prototype.collapsedOnchange=function(e){sf.base.isNullOrUndefined(this.paneSettings[e])||sf.base.isNullOrUndefined(this.paneSettings[e].collapsed)||!this.allPanes[e].classList.contains("e-collapsed")||this.updateIsCollapsed(e,this.targetArrows().lastBarArrow,this.targetArrows().collapseArrow)},p.prototype.collapsibleModelUpdate=function(e){var t,i,s;s=e===this.allBars.length?e-1:e,t=this.orientation===d?this.checkArrow(s,o):this.checkArrow(s,r),i=this.orientation===d?this.checkArrow(s,"e-arrow-right"):this.checkArrow(s,a),this.paneCollapsible(this.allPanes[e],e),this.updateCollapseIcons(s,i,t)},p.prototype.updateCollapseIcons=function(e,t,i){sf.base.isNullOrUndefined(this.paneSettings[e])||sf.base.isNullOrUndefined(this.paneSettings[e].collapsible)||(this.paneSettings[e].collapsible?sf.base.removeClass([i],[l]):sf.base.addClass([i],[l]),sf.base.isNullOrUndefined(this.paneSettings[e+1])||(this.paneSettings[e+1].collapsible?sf.base.removeClass([t],[l]):sf.base.addClass([t],[l])))},p.prototype.checkArrow=function(e,t){return this.allBars[e].querySelector(".e-navigate-arrow."+t)},p.prototype.paneCollapsible=function(e,t){this.paneSettings[t].collapsible?sf.base.addClass([e],"e-collapsible"):sf.base.removeClass([e],"e-collapsible")},p.prototype.propertyChanged=function(t,i){var n=e({},this.paneSettings);if(sf.base.extend(this,this,t),this.updateClass(),i)for(var o=0;o<=Object.keys(i).length;o++){var r=parseInt(Object.keys(i)[o],10);if(Object(i)[r])for(var a=0;a<Object(i)[r].length;a++)switch(Object(i)[r][a]){case"Visible":case"Resizable":this.resizableModel(r,this.paneSettings[r].resizable);break;case"Collapsible":this.collapsibleModelUpdate(r);break;case"Collapsed":n[r].collapsed!==t.paneSettings[r].collapsed&&(this.paneSettings[r].collapsed?this.isCollapsed(r):this.collapsedOnchange(r));break;case"Size":for(var l=0;l<this.allPanes.length;l++)n[l].size!==t.paneSettings[l].size?null==n[l].size?(t.paneSettings[l].size=null,this.allPanes[l].style.flexBasis=null,this.allPanes[l].classList.remove(s)):(this.paneSettings[l].size=t.paneSettings[l].size,this.allPanes[l].style.flexBasis=t.paneSettings[l].size):this.allPanes[l].classList.contains(s)||(this.allPanes[l].style.flexBasis=null)}}this.enablePersistence&&this.updatePersistData()},p.prototype.targetArrows=function(){return this.splitterProperty(),{collapseArrow:this.orientation===d?o:r,lastBarArrow:"Vertical"===this.orientation?a:"e-arrow-right"}},p.prototype.collapseArrow=function(e,t){return sf.base.selectAll("."+t,this.allBars[e])[0]},p.prototype.updateIsCollapsed=function(e,t,i){if(!sf.base.isNullOrUndefined(e)){var s=e===this.allBars.length,n=s?e-1:e;(!s&&this.allPanes[e+1].classList.contains("e-collapsed")&&0!==e?this.collapseArrow(n-1,i):s?this.collapseArrow(n,i):this.collapseArrow(n,t)).click()}},p.prototype.updatePersistData=function(){for(var e=[],t=this.element.querySelectorAll(".e-pane"),i=0;i<this.paneSettings.length;i++)e.push(JSON.parse(JSON.stringify(this.paneSettings[i]))),delete e[i].collapsible,delete e[i].content,delete e[i].cssClass,delete e[i].resizable,e[i].size=t[i].style.flexBasis;this.enablePersistence&&window.localStorage.setItem(this.id,JSON.stringify(e))},p.prototype.destroy=function(){for(sf.base.EventHandler.remove(document,"touchstart click",this.onDocumentClick),sf.base.EventHandler.remove(this.element,"keydown",this.onMove),this.updatePersistData(),this.paneSettings=[],this.allBars=[],this.allPanes=[];this.element.attributes.length>0;)this.element.removeAttribute(this.element.attributes[0].name)},p}();return{initialize:function(e){if(e.dataId&&(new p(e),window.sfBlazor.instances[e.dataId].initialize()),e.enablePersistence)for(var t=e.element.querySelectorAll(".e-pane"),i=0;i<t.length;i++)t[i].style.flexBasis=e.paneSettings[i].size},collapse:function(e,t){e&&window.sfBlazor.instances[e].collapse(t)},expand:function(e,t){e&&window.sfBlazor.instances[e].expand(t)},toggle:function(e,t,i){e&&window.sfBlazor.instances[e].toggle(t,i)},resizeEvent:function(e,t){e&&window.sfBlazor.instances[e].resizeEvent(t)},onCollapseEvent:function(e,t){e&&window.sfBlazor.instances[e].onCollapseEvent(t)},collapseMethodEvent:function(e,t,i){e&&window.sfBlazor.instances[e].collapseMethodEvent(i,t)},onExpandEvent:function(e,t){e&&window.sfBlazor.instances[e].onExpandEvent(t)},destroy:function(e){e&&window.sfBlazor.instances[e].destroy()},setReversePane:function(e){e&&window.sfBlazor.instances[e].setReversePane()},updateSeparator:function(e){e.dataId&&(window.sfBlazor.instances[e.dataId].updateSeparator(),e.enableReversePanes&&window.sfBlazor.instances[e.dataId].setReversePane())},propertyChanged:function(e,t){e.dataId&&window.sfBlazor.instances[e.dataId].propertyChanged(e,t)}}}()},"./modules/sf-stock-chart.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.StockChart=function(){"use strict";var e=function(){function e(e,t,i,s){window.sfBlazor=window.sfBlazor,this.mouseY=0,this.mouseX=0,this.eventInterval=80,this.mouseMoveRef=null,this.mouseMoveThreshold=null,this.mouseLeaveRef=null,this.documentKeyHandler=function(e){e.altKey&&74===e.keyCode&&!sf.base.isNullOrUndefined(this.element)&&this.element.focus()},this.id=t,this.element=i,this.dotnetref=s,this.dataId=e,window.sfBlazor.setCompInstance(this)}return e.prototype.render=function(){this.unWireEvents(this.id,this.dotnetref),this.wireEvents(this.id,this.dotnetref)},e.prototype.destroy=function(){this.unWireEvents(this.id,this.dotnetref)},e.prototype.unWireEvents=function(e,i){var s=document.getElementById(e);if(s){this.dotnetref=i,t.dotnetrefCollection=t.dotnetrefCollection.filter((function(t){return t.id!==e}));var n=sf.base.Browser.isPointer?"pointerleave":"mouseleave";s.removeEventListener("mousemove",this.mouseMoveRef),s.removeEventListener("touchmove",this.mouseMoveRef),sf.base.EventHandler.remove(s,n,this.mouseLeaveRef),sf.base.EventHandler.remove(document.body,"keydown",this.documentKeyHandler);var o=sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize";sf.base.EventHandler.remove(window,o,t.resizeBound)}},e.prototype.wireEvents=function(e,i){var s=document.getElementById(e);if(s){this.dotnetref=i,t.dotnetrefCollection.push({id:e,dotnetref:i});var n=sf.base.Browser.isPointer?"pointerleave":"mouseleave";this.mouseMoveRef=this.mouseMove.bind(this,i,e),this.mouseLeaveRef=this.mouseLeave.bind(this,i,e),s.addEventListener("mousemove",this.mouseMoveRef),s.addEventListener("touchmove",this.mouseMoveRef),sf.base.EventHandler.add(s,n,this.mouseLeaveRef),sf.base.EventHandler.add(document.body,"keydown",this.documentKeyHandler),t.resizeBound=t.chartResize.bind(this,t.dotnetrefCollection);var o=sf.base.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize";sf.base.EventHandler.add(window,o,t.resizeBound)}},e.prototype.getEventArgs=function(e,t){var i=e.changedTouches?e.changedTouches[0].clientX:e.clientX,s=e.changedTouches?e.changedTouches[0].clientY:e.clientY;this.setMouseXY(i,s,t);var n=e.touches,o=[];if(e.type.indexOf("touch")>-1)for(var r=0,a=n.length;r<a;r++)o.push({pageX:n[r].clientX,pageY:n[r].clientY,pointerId:e.pointerId||0});return{type:e.type,clientX:e.clientX,clientY:e.clientY,mouseX:this.mouseX,mouseY:this.mouseY,pointerType:e.pointerType,target:e.target.id,changedTouches:{clientX:e.changedTouches?e.changedTouches[0].clientX:0,clientY:e.changedTouches?e.changedTouches[0].clientY:0},touches:o,pointerId:e.pointerId}},e.prototype.setMouseXY=function(e,t,i){var s=document.getElementById(i.replace("_stockChart_chart","")+"_svg").getBoundingClientRect(),n=document.getElementById(i).getBoundingClientRect();this.mouseY=t-n.top-Math.max(s.top-n.top,0),this.mouseX=e-n.left-Math.max(s.left-n.left,0)},e.prototype.mouseMove=function(e,t,i){if(null==this.mouseMoveThreshold||(new Date).getTime()-this.mouseMoveThreshold>this.eventInterval){this.mouseMoveThreshold=(new Date).getTime();var s=void 0,n=void 0,o=void 0;"touchmove"===i.type?(this.isTouch=!0,s=(o=i).changedTouches[0].clientX,n=o.changedTouches[0].clientY,i.preventDefault()):(this.isTouch="touch"===i.pointerType||"2"===i.pointerType||this.isTouch,s=i.clientX,n=i.clientY),this.dotnetref=e,document.getElementById(t.replace("_stockChart_chart","")+"_svg")&&(this.setMouseXY(s,n,t),e.invokeMethodAsync("OnStockChartMouseMove",this.getEventArgs(i,t)))}return!1},e.prototype.mouseLeave=function(e,t,i){return this.dotnetref=e,e.invokeMethodAsync("OnStockChartMouseLeave",this.getEventArgs(i,t)),!1},e}(),t={initialize:function(t,i,s){new e(t,i.id,i,s).render()},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.destroy()},eventInterval:80,dotnetref:{},dotnetrefCollection:[],renderTooltip:function(e,t,i,s){var n=document.getElementById(t+"_svg"),o=!(n&&parseInt(n.getAttribute("opacity"),10)>0),r=JSON.parse(e),a=window.sfBlazor.getCompInstance(s);o&&!sf.base.isNullOrUndefined(a)?(a.tooltip=new sf.svgbase.Tooltip(r),a.tooltip.appendTo("#"+t)):sf.base.isNullOrUndefined(a.tooltip)||(a.tooltip.location=new sf.svgbase.TooltipLocation(r.location.x,r.location.y),a.tooltip.content=r.content,a.tooltip.header=r.header,a.tooltip.offset=r.offset,a.tooltip.palette=r.palette,a.tooltip.shapes=r.shapes,a.tooltip.data=r.data,a.tooltip.template=r.template,a.tooltip.textStyle.color=r.textStyle.color||a.tooltip.textStyle.color,a.tooltip.textStyle.fontFamily=r.textStyle.fontFamily||a.tooltip.textStyle.fontFamily,a.tooltip.textStyle.fontStyle=r.textStyle.fontStyle||a.tooltip.textStyle.fontStyle,a.tooltip.textStyle.fontWeight=r.textStyle.fontWeight||a.tooltip.textStyle.fontWeight,a.tooltip.textStyle.opacity=r.textStyle.opacity||a.tooltip.textStyle.opacity,a.tooltip.textStyle.size=r.textStyle.size||a.tooltip.textStyle.size,a.tooltip.isNegative=r.isNegative,a.tooltip.clipBounds=new sf.svgbase.TooltipLocation(r.clipBounds.x,r.clipBounds.y),a.tooltip.arrowPadding=r.arrowPadding,a.tooltip.dataBind())},fadeOut:function(e){var t=window.sfBlazor.getCompInstance(e);if(!(sf.base.isNullOrUndefined(t)||!sf.base.isNullOrUndefined(t)&&sf.base.isNullOrUndefined(t.tooltip))){var i=document.getElementById(t.tooltip.element.id+"_svg");i&&"0"===i.getAttribute("opacity")||t.tooltip.fadeOut()}},getParentElementBoundsById:function(e){var t=document.getElementById(e);if(t&&t.parentElement){var i=t.parentElement.style.width;t.parentElement.style.width="100%";var s=t.parentElement.getBoundingClientRect(),n=window.getComputedStyle(t.parentElement),o=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight),r={width:Math.max(0,s.width-o),height:t.clientHeight||t.offsetHeight,left:s.left,top:s.top,right:s.right,bottom:s.bottom};return t.parentElement.style.width=i,r}return{width:0,height:0,left:0,top:0,right:0,bottom:0}},getElementBoundsById:function(e){var t=document.getElementById(e);if(t){var i=t.getBoundingClientRect();return{width:t.clientWidth||t.offsetWidth,height:t.clientHeight||t.offsetHeight,left:i.left,top:i.top,right:i.right,bottom:i.bottom}}return{width:0,height:0,left:0,top:0,right:0,bottom:0}},getBrowserDeviceInfo:function(){return{browserName:sf.base.Browser.info.name,isPointer:sf.base.Browser.isPointer,isDevice:sf.base.Browser.isDevice,isTouch:sf.base.Browser.isTouch,isIos:sf.base.Browser.isIos||sf.base.Browser.isIos7}},setAttribute:function(e,t,i){var s=document.getElementById(e);s&&s.setAttribute(t,i)},createTooltip:function(e,t,i,s,n){var o=document.getElementById(e),r="top:"+i.toString()+"px;left:"+s.toString()+"px;color:black !important; background:#FFFFFF !important; position:absolute;border:1px solid #707070;font-size:"+n+";border-radius:2px; z-index:1";o?(o.setAttribute("innerHTML","&nbsp;"+t+"&nbsp;"),o.setAttribute("styles",r)):(o=sf.base.createElement("div",{id:e,innerHTML:"&nbsp;"+t+"&nbsp;",styles:r}),document.body.appendChild(o))},removeElement:function(e){var t=this.getElement(e);t&&sf.base.remove(t)},resizeBound:{},resize:{},chartResize:function(e,t){var i=this;return this.resize&&clearTimeout(this.resize),this.resize=setTimeout((function(){for(var s=e.length,n=0;n<s;n++)e[n].dotnetref.invokeMethodAsync("OnStockChartResize",t);clearTimeout(i.resize)}),500),!1}};return t}()},"./modules/sf-svg-export.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */s=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,o=Object.defineProperty||function(e,t,i){e[t]=i.value},r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",l=r.asyncIterator||"@@asyncIterator",h=r.toStringTag||"@@toStringTag";function d(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,i){return e[t]=i}}function c(e,t,i,s){var n=t&&t.prototype instanceof f?t:f,r=Object.create(n.prototype),a=new E(s||[]);return o(r,"_invoke",{value:S(e,i,a)}),r}function p(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u={};function f(){}function g(){}function m(){}var v={};d(v,a,(function(){return this}));var b=Object.getPrototypeOf,y=b&&b(b(I([])));y&&y!==t&&n.call(y,a)&&(v=y);var M=m.prototype=f.prototype=Object.create(v);function C(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var s;o(this,"_invoke",{value:function(o,r){function a(){return new t((function(s,a){!function s(o,r,a,l){var h=p(e[o],e,r);if("throw"!==h.type){var d=h.arg,c=d.value;return c&&"object"==i(c)&&n.call(c,"__await")?t.resolve(c.__await).then((function(e){s("next",e,a,l)}),(function(e){s("throw",e,a,l)})):t.resolve(c).then((function(e){d.value=e,a(d)}),(function(e){return s("throw",e,a,l)}))}l(h.arg)}(o,r,s,a)}))}return s=s?s.then(a,a):a()}})}function S(e,t,i){var s="suspendedStart";return function(n,o){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===n)throw o;return D()}for(i.method=n,i.arg=o;;){var r=i.delegate;if(r){var a=N(r,i);if(a){if(a===u)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===s)throw s="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);s="executing";var l=p(e,t,i);if("normal"===l.type){if(s=i.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(s="completed",i.method="throw",i.arg=l.arg)}}}function N(e,t){var i=t.method,s=e.iterator[i];if(void 0===s)return t.delegate=null,"throw"===i&&e.iterator.return&&(t.method="return",t.arg=void 0,N(e,t),"throw"===t.method)||"return"!==i&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+i+"' method")),u;var n=p(s,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function I(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,s=function t(){for(;++i<e.length;)if(n.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return s.next=s}}return{next:D}}function D(){return{value:void 0,done:!0}}return g.prototype=m,o(M,"constructor",{value:m,configurable:!0}),o(m,"constructor",{value:g,configurable:!0}),g.displayName=d(m,h,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,d(e,h,"GeneratorFunction")),e.prototype=Object.create(M),e},e.awrap=function(e){return{__await:e}},C(w.prototype),d(w.prototype,l,(function(){return this})),e.AsyncIterator=w,e.async=function(t,i,s,n,o){void 0===o&&(o=Promise);var r=new w(c(t,i,s,n),o);return e.isGeneratorFunction(i)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},C(M),d(M,h,"Generator"),d(M,a,(function(){return this})),d(M,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),i=[];for(var s in t)i.push(s);return i.reverse(),function e(){for(;i.length;){var s=i.pop();if(s in t)return e.value=s,e.done=!1,e}return e.done=!0,e}},e.values=I,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(i,s){return r.type="throw",r.arg=e,t.next=i,s&&(t.method="next",t.arg=void 0),!!s}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],r=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var a=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(a&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i];if(s.tryLoc<=this.prev&&n.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var o=s;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=e,r.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),O(i),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var s=i.completion;if("throw"===s.type){var n=s.arg;O(i)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:I(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=void 0),u}},e}function n(e,t,i,s,n,o,r){try{var a=e[o](r),l=a.value}catch(e){return void i(e)}a.done?t(l):Promise.resolve(l).then(s,n)}function o(e){return function(){var t=this,i=arguments;return new Promise((function(s,o){var r=e.apply(t,i);function a(e){n(r,s,o,a,l,"next",e)}function l(e){n(r,s,o,a,l,"throw",e)}a(void 0)}))}}var r,a,l;window.sfExport={exportToImage:(l=o(s().mark((function e(t,i,n,r){var a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.sfExport.imageExport(t,i,n,r);case 2:if(!((a=e.sent)instanceof Promise)){e.next=8;break}return e.next=6,a.then(function(){var e=o(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:e.next=9;break;case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)}))),function(e,t,i,s){return l.apply(this,arguments)}),validateExport:(a=o(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t instanceof Promise)){e.next=3;break}return e.next=3,t.then(function(){var e=o(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),imageExport:(r=o(s().mark((function e(t,i,n,o){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,s){var r=document.getElementById(n),a='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+r.outerHTML+"</svg>",l=window.URL.createObjectURL(new Blob("SVG"===t?[a]:[(new XMLSerializer).serializeToString(r)],{type:"image/svg+xml"}));if("SVG"===t)o&&window.sfExport.triggerDownload(t,i,l),e(null);else{var h=document.createElement("canvas");h.height=r.clientHeight,h.width=r.clientWidth;var d=h.getContext("2d"),c=new Image;c.onload=function(){if(d.drawImage(c,0,0),window.URL.revokeObjectURL(l),o)window.sfExport.triggerDownload(t,i,h.toDataURL("image/png").replace("image/png","image/octet-stream")),e(null);else{var s="JPEG"===t?h.toDataURL("image/jpeg"):"PNG"===t?h.toDataURL("image/png"):"";e(s)}},c.src=l}})));case 1:case"end":return e.stop()}}),e)}))),function(e,t,i,s){return r.apply(this,arguments)}),triggerDownload:function(e,t,i){var s=document.createElement("a");s.download=t+"."+e.toLocaleLowerCase(),s.href=i,s.click()},downloadPdf:function(e,t){for(var i=atob(e),s=[],n=0;n<i.length;n+=512){for(var o=i.slice(n,n+512),r=new Array(o.length),a=0;a<o.length;a++)r[a]=o.charCodeAt(a);var l=new Uint8Array(r);s.push(l)}var h=new Blob(s,{type:"application/pdf"}),d=(URL||webkitURL).createObjectURL(h);sfExport.triggerDownload("PDF",t,d)},print:function(e){var t,i;i="string"==typeof e?document.getElementById(e):e,(t=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no")).moveTo(0,0),t.resizeTo(screen.availWidth,screen.availHeight);var s=document.createElement("div");s.appendChild(i.cloneNode(!0));var n=[].slice.call(document.getElementsByTagName("head")[0].querySelectorAll("base, link, style")),o=[].slice.call(document.getElementsByTagName("body")[0].querySelectorAll("link, style")),r="";if(o.length)for(var a=0,l=o.length;a<l;a++)n.push(o[a]);var h=0;for(l=n.length;h<l;h++)r+=n[h].outerHTML;t.document.write("<!DOCTYPE html> <html><head>"+r+"</head><body>"+s.innerHTML+"<script> (function() { window.ready = true; })(); <\/script></body></html>"),t.document.close(),t.focus();var d=setInterval((function(){t.ready&&(t.print(),t.close(),clearInterval(d))}),500)}}},"./modules/sf-tab.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Tab=function(){"use strict";var e="e-tab-header",t="e-tab-wrap",i="e-toolbar-items",s="e-toolbar-item",n="e-toolbar-popup",o=function(){function o(e,t,i,s){this.show={},this.hide={},this.draggableItems=[{}],this.resizeContext=this.refreshActElePosition.bind(this),window.sfBlazor=window.sfBlazor,this.keyConfigs={tab:"tab",home:"home",end:"end",enter:"enter",space:"space",delete:"delete",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow"},this.element=t,this.dotNetRef=s,this.options=i,this.dataId=e,window.sfBlazor.setCompInstance(this)}return o.prototype.render=function(){var e=sf.base.closest(this.element,".e-content");this.prevIndex=0,this.isNested=!1,this.isPopup=!1,this.initRender=!0,this.isSwipeed=!1,sf.base.isNullOrUndefined(e)||(e.parentElement.classList.add("e-nested"),this.isNested=!0);var t=sf.base.Browser.info.name,i="msie"===t?"e-ie":"edge"===t?"e-edge":"safari"===t?"e-safari":"";sf.base.setStyleAttribute(this.element,{width:sf.base.formatUnit(this.options.width),height:sf.base.formatUnit(this.options.height)}),sf.base.attributes(this.element,{"aria-disabled":"false"}),this.setCssClass(this.element,i,!0),this.updatePopAnimationConfig(),this.tabId=this.element.id.length>0?"-"+this.element.id:sf.base.getRandomId(),this.wireEvents(),this.initRender=!1},o.prototype.serverItemsChanged=function(){if(this.enableAnimation=!1,this.setActive(this.options.selectedItem),"Dynamic"!==this.options.loadOn&&!sf.base.isNullOrUndefined(this.cntEle)){var e=[].slice.call(this.cntEle.children),t="e-content"+this.tabId+"_"+this.options.selectedItem;e.forEach((function(e){e.classList.contains("e-active")&&e.id!==t&&e.classList.remove("e-active"),e.id===t&&e.classList.add("e-active")})),this.prevIndex=this.options.selectedItem,this.triggerAnimation("e-item"+this.tabId+"_"+this.options.selectedItem,!1)}"Disable"!==sf.base.animationMode&&(this.enableAnimation=!0)},o.prototype.headerReady=function(){if(this.initRender=!0,this.hdrEle=this.getTabHeader(),this.setOrientation(this.options.headerPlacement,this.hdrEle),this.tbItems=sf.base.select("."+e+" ."+i,this.element),sf.base.isNullOrUndefined(this.tbItems)||sf.base.rippleEffect(this.tbItems,{selector:".e-tab-wrap"}),sf.base.selectAll("."+s,this.element).length>0){this.bdrLine=sf.base.select(".e-indicator.e-ignore",this.element);var t=sf.base.select("."+this.scrCntClass,this.tbItems);sf.base.isNullOrUndefined(t)?this.tbItems.insertBefore(this.bdrLine,this.tbItems.firstElementChild):t.insertBefore(this.bdrLine,t.firstElementChild),this.select(this.options.selectedItem)}if(this.cntEle=sf.base.select(".e-tab > .e-content",this.element),sf.base.isNullOrUndefined(this.cntEle)||(this.touchModule=new sf.base.Touch(this.cntEle,{swipe:this.swipeHandler.bind(this)}),"auto"===this.options.height||this.isVertical()||(this.cntEle.style.height="calc(100% - "+this.hdrEle.offsetHeight+"px)")),"Demand"===this.options.loadOn){var n=this.setActiveContent();this.triggerAnimation(n,!1)}this.initRender=!1},o.prototype.setActiveContent=function(){var e="e-item"+this.tabId+"_"+this.options.selectedItem,t=this.getTrgContent(this.cntEle,this.extIndex(e));return sf.base.isNullOrUndefined(t)||t.classList.add("e-active"),e},o.prototype.removeActiveClass=function(){var e=this.getTabHeader();if(e){var t=sf.base.selectAll("."+s+".e-active",e);sf.base.removeClass(t,"e-active"),[].slice.call(t).forEach((function(e){return e.firstElementChild.setAttribute("aria-selected","false")}))}},o.prototype.checkPopupOverflow=function(e){this.tbPop=sf.base.select(".e-toolbar-pop",this.element);var t=sf.base.select(".e-hor-nav",this.element),s=sf.base.select("."+i,this.element),o=s.lastChild;return(!this.isVertical()&&(this.options.enableRtl&&t.offsetLeft+t.offsetWidth>s.offsetLeft||!this.options.enableRtl&&t.offsetLeft<s.offsetWidth)||this.isVertical()&&t.offsetTop<o.offsetTop+o.offsetHeight)&&(e.classList.add(n),this.tbPop.insertBefore(e,sf.base.selectAll("."+n,this.tbPop)[0])),!0},o.prototype.popupHandler=function(e){var o=e.querySelector(".e-ripple-element");sf.base.isNullOrUndefined(o)||(o.outerHTML="",e.querySelector("."+t).classList.remove("e-ripple")),this.tbItem=sf.base.selectAll("."+i+" ."+s,this.hdrEle);var r=this.tbItem[this.tbItem.length-1];if(0!==this.tbItem.length){if(e.classList.remove(n),e.removeAttribute("style"),this.tbItems.appendChild(e),this.checkPopupOverflow(r)){var a=this.tbItems.lastChild.previousElementSibling;this.checkPopupOverflow(a)}this.isPopup=!0}return sf.base.selectAll("."+s,this.tbItems).length-1},o.prototype.previousContentAnimation=function(e,t){return this.isPopup||e<=t?"SlideLeftIn"===this.options.animation.previous.effect?{name:"SlideLeftOut",duration:this.options.animation.previous.duration,timingFunction:this.options.animation.previous.easing}:null:"SlideRightIn"===this.options.animation.next.effect?{name:"SlideRightOut",duration:this.options.animation.next.duration,timingFunction:this.options.animation.next.easing}:null},o.prototype.triggerPreviousAnimation=function(e,t){var i=this.previousContentAnimation(t,this.options.selectedItem);sf.base.isNullOrUndefined(i)?e.classList.remove("e-active"):(i.begin=function(){sf.base.setStyleAttribute(e,{position:"absolute"}),sf.base.addClass([e],["e-progress","e-view"])},i.end=function(){e.style.display="none",sf.base.removeClass([e],["e-active","e-progress","e-view"]),sf.base.setStyleAttribute(e,{display:"",position:""}),0===e.childNodes.length&&sf.base.detach(e)},new sf.base.Animation(i).animate(e))},o.prototype.triggerAnimation=function(e,t){var i,s,n=this,o=this.prevIndex;if("Dynamic"!==this.options.loadOn){[].slice.call(this.element.querySelector(".e-content").children).forEach((function(e){e.id===n.prevActiveEle&&(i=e)}));var r=this.tbItem[o];if(s=this.getTrgContent(this.cntEle,this.extIndex(e)),sf.base.isNullOrUndefined(i)&&!sf.base.isNullOrUndefined(r)){var a=this.extIndex(r.id);i=this.getTrgContent(this.cntEle,a)}}else s=this.cntEle.firstElementChild;if(sf.base.isNullOrUndefined(s)||(this.prevActiveEle=s.id),this.initRender||!1===t||this.options.animation==={}||sf.base.isNullOrUndefined(this.options.animation))i&&i!==s&&i.classList.remove("e-active");else{var l,h=sf.base.select(".e-content",this.element);if(this.prevIndex>this.options.selectedItem&&!this.isPopup){var d="None"===this.options.animation.previous.effect&&"Enable"===sf.base.animationMode?"SlideLeftIn":this.options.animation.previous.effect;l={name:"None"===d?"":"SlideLeftIn"!==d?d:"SlideLeftIn",duration:this.options.animation.previous.duration,timingFunction:this.options.animation.previous.easing}}else if(this.isPopup||this.prevIndex<this.options.selectedItem||this.prevIndex===this.options.selectedItem){var c="None"===this.options.animation.next.effect&&"Enable"===sf.base.animationMode?"SlideRightIn":this.options.animation.next.effect;l={name:"None"===c?"":"SlideRightIn"!==c?c:"SlideRightIn",duration:this.options.animation.next.duration,timingFunction:this.options.animation.next.easing}}l.progress=function(){h.classList.add("e-progress"),n.setActiveBorder()},l.end=function(){h.classList.remove("e-progress"),s.classList.add("e-active")},this.initRender||sf.base.isNullOrUndefined(i)||this.triggerPreviousAnimation(i,o),this.isPopup=!1,""===l.name?s.classList.add("e-active"):new sf.base.Animation(l).animate(s)}},o.prototype.keyPressed=function(t){var i=sf.base.closest(t,"."+e+" ."+s),n=this.getEleIndex(i);!sf.base.isNullOrUndefined(this.popEle)&&t.classList.contains("e-hor-nav")?this.popEle.classList.contains("e-popup-open")?this.popObj.hide(this.hide):this.popObj.show(this.show):t.classList.contains("e-scroll-nav")?t.click():sf.base.isNullOrUndefined(i)||!1!==i.classList.contains("e-active")||(this.select(n,!0),sf.base.isNullOrUndefined(this.popEle)||this.popObj.hide(this.hide))},o.prototype.getTabHeader=function(){var t=[].slice.call(this.element.children).filter((function(t){return t.classList.contains(e)}));if(t.length>0)return t[0];var i=[].slice.call(this.element.children).filter((function(e){return!e.classList.contains("blazor-template")}))[0];return i?[].slice.call(i.children).filter((function(t){return t.classList.contains(e)}))[0]:void 0},o.prototype.getEleIndex=function(e){return Array.prototype.indexOf.call(sf.base.selectAll("."+s,this.getTabHeader()),e)},o.prototype.extIndex=function(e){return e.replace("e-item"+this.tabId+"_","")},o.prototype.getTrgContent=function(e,t){return this.element.classList.contains("e-nested")?sf.base.select(".e-nested> .e-content > #e-content"+this.tabId+"_"+t,this.element):this.findEle(e.children,"e-content"+this.tabId+"_"+t)},o.prototype.findEle=function(e,t){for(var i,s=0;s<e.length;s++)if(e[s].id===t){i=e[s];break}return i},o.prototype.isVertical=function(){var e="Left"===this.options.headerPlacement||"Right"===this.options.headerPlacement;return this.scrCntClass=e?"e-vscroll-content":"e-hscroll-content",e},o.prototype.updatePopAnimationConfig=function(){this.show={name:this.isVertical()?"FadeIn":"SlideDown",duration:100},this.hide={name:this.isVertical()?"FadeOut":"SlideUp",duration:100}},o.prototype.focusItem=function(){var e=sf.base.select(" #e-item"+this.tabId+"_"+this.options.selectedItem,this.hdrEle);sf.base.isNullOrUndefined(e)||e.firstElementChild.focus()},o.prototype.serverChangeOrientation=function(e,t,i,s){if(this.setOrientation(e,this.hdrEle),sf.base.removeClass([this.element],["e-vertical-tab","e-vertical-left","e-vertical-right","e-horizontal-bottom"]),s&&this.changeToolbarOrientation(t,i),"Bottom"===this.options.headerPlacement&&sf.base.addClass([this.element],"e-horizontal-bottom"),this.isVertical()){var n="Left"===this.options.headerPlacement?"e-vertical-left":"e-vertical-right";this.element.classList.contains("e-nested")?sf.base.addClass([this.hdrEle],["e-vertical-tab",n]):sf.base.addClass([this.element],["e-vertical-tab",n])}this.setActiveBorder(),this.focusItem()},o.prototype.changeToolbarOrientation=function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options.width=t?"auto":"100%",i.options.height=t?"100%":"auto",i.options.isVertical=t,i.changeOrientation()),this.updatePopAnimationConfig()},o.prototype.setOrientation=function(e,t){var i=Array.prototype.indexOf.call(this.element.children,t),s=Array.prototype.indexOf.call(this.element.children,this.element.querySelector(".e-content"));"Bottom"===e&&s>i?this.element.appendChild(t):(sf.base.removeClass([t],["e-horizontal-bottom"]),this.element.insertBefore(t,sf.base.select(".e-content",this.element)))},o.prototype.setCssClass=function(e,t,i){""!==t&&(i?sf.base.addClass([e],t.split(" ")):sf.base.removeClass([e],t.split(" ")))},o.prototype.setActiveBorder=function(){var e=this.getTabHeader(),t=sf.base.select("."+s+".e-active",e);if(!sf.base.isNullOrUndefined(t)){this.options.reorderActiveTab?e.classList.remove("e-reorder-active-item"):(t.classList.contains(n)&&!this.bdrLine.classList.contains("e-hidden")&&this.bdrLine.classList.add("e-hidden"),e.classList.contains("e-reorder-active-item")||e.classList.add("e-reorder-active-item")),t.classList.contains(n)&&this.options.reorderActiveTab&&this.popupHandler(t);var o=sf.base.closest(t,".e-tab");if(this.element===o){this.tbItems=sf.base.select("."+i,e);var r=sf.base.select(".e-indicator",e),a=sf.base.select("."+i+" ."+this.scrCntClass,e);if(this.isVertical()){sf.base.setStyleAttribute(r,{left:"",right:""}),0!==(sf.base.isNullOrUndefined(a)?this.tbItems.offsetHeight:a.offsetHeight)?sf.base.setStyleAttribute(r,{top:t.offsetTop+"px",height:t.offsetHeight+"px"}):sf.base.setStyleAttribute(r,{top:0,height:0})}else{if("MultiRow"===this.options.overflowMode){var l="Bottom"===this.options.headerPlacement?t.offsetTop:t.offsetHeight+t.offsetTop;sf.base.setStyleAttribute(r,{top:l+"px",height:""})}else sf.base.setStyleAttribute(r,{top:"",height:""});var h=sf.base.isNullOrUndefined(a)?this.tbItems.offsetWidth:a.offsetWidth;0!==h?sf.base.setStyleAttribute(r,{left:t.offsetLeft+"px",right:h-(t.offsetLeft+t.offsetWidth)+"px"}):sf.base.setStyleAttribute(r,{left:"auto",right:"auto"})}sf.base.isNullOrUndefined(this.bdrLine)||t.classList.contains(n)||this.bdrLine.classList.remove("e-hidden")}}},o.prototype.setActive=function(e){this.tbItem=sf.base.selectAll("."+s,this.getTabHeader()),sf.base.isNullOrUndefined(this.hdrEle)&&(this.hdrEle=this.getTabHeader());var t=this.hdrEle.querySelector("."+s+'[data-index="'+e+'"]');if(!(!t||e<0||isNaN(e)||0===this.tbItem.length))if(this.options.selectedItem=e,t.classList.contains("e-active"))this.setActiveBorder();else{var i=this.tbItem[this.prevIndex];sf.base.isNullOrUndefined(i)||i.firstElementChild.removeAttribute("aria-controls"),sf.base.attributes(t.firstElementChild,{"aria-controls":"e-content"+this.tabId+"_"+e});var n=t.id;this.removeActiveClass(),t.classList.add("e-active"),t.firstElementChild.setAttribute("aria-selected","true");var o=Number(this.extIndex(n));if(sf.base.isNullOrUndefined(this.prevActiveEle)&&(this.prevActiveEle="e-content"+this.tabId+"_"+o),"Init"===this.options.loadOn){this.cntEle=sf.base.select(".e-tab > .e-content",this.element);var r=this.getTrgContent(this.cntEle,this.extIndex(n));sf.base.isNullOrUndefined(r)||r.classList.add("e-active"),this.triggerAnimation(n,this.enableAnimation)}this.setActiveBorder(),this.refreshItemVisibility(t),this.initRender||t.firstElementChild.focus()}},o.prototype.contentReady=function(){var e=this.setActiveContent();this.triggerAnimation(e,this.enableAnimation)},o.prototype.setRTL=function(e){this.setCssClass(this.element,"e-rtl",e),this.refreshActiveBorder()},o.prototype.refreshActiveBorder=function(){sf.base.isNullOrUndefined(this.bdrLine)||this.bdrLine.classList.add("e-hidden"),this.setActiveBorder()},o.prototype.setDragAndDrop=function(e){e?this.bindDraggable():this.draggableItems&&this.draggableItems.forEach((function(e){e&&0!==Object.keys(e).length&&e.destroy()}))},o.prototype.showPopup=function(e){var t=sf.base.select(".e-popup.e-toolbar-pop",this.hdrEle);if(t&&t.classList.contains("e-popup-close")){var i=t&&t.ej2_instances[0];i.position.X="Left"===this.options.headerPlacement?"left":"right",i.dataBind(),i.show(e)}},o.prototype.initializeDrag=function(i){var n=this;this.options.dragArea=sf.base.isNullOrUndefined(this.options.dragArea)?"#"+this.element.id+" ."+e:this.options.dragArea;var o=new sf.base.Draggable(i,{dragArea:this.options.dragArea,dragTarget:"."+s,clone:!0,distance:5,helper:this.helper.bind(this),dragStart:this.itemDragStart.bind(this),drag:function(i){var o,r=n.getEleIndex(n.dragItem);if(sf.base.isNullOrUndefined(i.target.closest(".e-tab"))||i.target.closest(".e-tab").isEqualNode(n.element)||n.options.dragArea==="."+e){if(i.target.closest(n.options.dragArea)||"Popup"===n.options.overflowMode?(document.body.style.cursor="",n.dragItem.querySelector("."+t).style.visibility="hidden",n.cloneElement.classList.contains("e-hidden")&&sf.base.removeClass([n.cloneElement],"e-hidden")):(document.body.style.cursor="not-allowed",sf.base.addClass([n.cloneElement],"e-hidden"),n.dragItem.classList.contains("e-hidden")&&sf.base.removeClass([n.dragItem],"e-hidden"),n.dragItem.querySelector("."+t).style.visibility="visible"),"Scrollable"===n.options.overflowMode&&!sf.base.isNullOrUndefined(n.element.querySelector(".e-hscroll"))){var a=n.element.querySelector(".e-scroll-right-nav"),l=n.element.querySelector(".e-scroll-left-nav"),h=n.element.querySelector(".e-hscroll-bar");!sf.base.isNullOrUndefined(a)&&Math.abs(a.offsetWidth/2+a.offsetLeft)>n.cloneElement.offsetLeft+n.cloneElement.offsetWidth&&(h.scrollLeft-=10),!sf.base.isNullOrUndefined(l)&&Math.abs(l.offsetLeft+l.offsetWidth-n.cloneElement.offsetLeft)>l.offsetWidth/2&&(h.scrollLeft+=10)}n.cloneElement.style.pointerEvents="none";var d=n.cloneElement.getBoundingClientRect().left,c=n.cloneElement.getBoundingClientRect().top,p=document.elementFromPoint(d,c),u=sf.base.closest(p,"."+e+" ."+s),f=0;"Scrollable"!==n.options.overflowMode||sf.base.isNullOrUndefined(n.element.querySelector(".e-hscroll"))||(f=n.element.querySelector(".e-hscroll-content").offsetWidth),null!=u&&!u.isSameNode(n.dragItem)&&u.closest(".e-tab").isSameNode(n.dragItem.closest(".e-tab"))&&((o=n.getEleIndex(u))<r&&Math.abs(u.offsetLeft+u.offsetWidth-n.cloneElement.offsetLeft)>u.offsetWidth/2&&n.dragAction(u,r,o),o>r&&Math.abs(u.offsetWidth/2)+u.offsetLeft-f<n.cloneElement.offsetLeft+n.cloneElement.offsetWidth&&n.dragAction(u,r,o)),n.droppedIndex=n.getEleIndex(n.dragItem)}},dragStop:this.itemDragStop.bind(this)});this.draggableItems.push(o)},o.prototype.helper=function(e){return e.element&&(this.cloneElement=e.element.cloneNode(!0),sf.base.addClass([this.cloneElement],["e-tab-clone-element","e-tab"]),sf.base.removeClass([this.cloneElement.querySelector("."+t)],"e-ripple"),sf.base.isNullOrUndefined(this.cloneElement.querySelector(".e-ripple-element"))||sf.base.remove(this.cloneElement.querySelector(".e-ripple-element")),document.body.appendChild(this.cloneElement)),this.cloneElement},o.prototype.itemDragStart=function(e){var i=this;this.dragItem=e.element,this.dragStartIndex=this.getEleIndex(this.dragItem);this.element.querySelector(".e-toolbar");this.dotNetRef.invokeMethodAsync("OnDragStart",this.dragStartIndex).then((function(s){s?sf.base.detach(i.cloneElement):(i.removeActiveClass(),sf.base.addClass([i.tbItems.querySelector(".e-indicator")],"e-hidden"),i.dragItem.querySelector("."+t).style.visibility="hidden",e.bindEvents(sf.base.getElement(e.dragElement)))}))},o.prototype.dragAction=function(e,t,i){if("MultiRow"===this.options.overflowMode&&e.parentNode.insertBefore(this.dragItem,e.nextElementSibling),t>i)if(this.dragItem.parentElement.isSameNode(e.parentElement))this.dragItem.parentNode.insertBefore(this.dragItem,e);else if("Extended"===this.options.overflowMode)if(e.isSameNode(e.parentElement.lastChild)){var s=this.dragItem.parentNode;e.parentNode.insertBefore(this.dragItem,e),s.insertBefore(e.parentElement.lastChild,s.childNodes[0])}else this.dragItem.parentNode.insertBefore(e.parentElement.lastChild,this.dragItem.parentElement.childNodes[0]),e.parentNode.insertBefore(this.dragItem,e);else{var n=e.parentElement.lastChild;if(e.isSameNode(n)){s=this.dragItem.parentNode;e.parentNode.insertBefore(this.dragItem,e),s.insertBefore(n,s.childNodes[0])}else this.dragItem.parentNode.insertBefore(e.parentElement.lastChild,this.dragItem.parentElement.childNodes[0]),e.parentNode.insertBefore(this.dragItem,e)}t<i&&(this.dragItem.parentElement.isSameNode(e.parentElement)?this.dragItem.parentNode.insertBefore(e,this.dragItem):"Extended"===this.options.overflowMode?(this.dragItem.parentElement.appendChild(e.parentElement.firstElementChild),e.parentNode.insertBefore(this.dragItem,e.nextSibling)):(this.dragItem.parentNode.insertBefore(e.parentElement.lastChild,this.dragItem.parentElement.childNodes[0]),e.parentNode.insertBefore(this.dragItem,e)))},o.prototype.itemDragStop=function(e){sf.base.detach(this.cloneElement);var i=this.element.querySelector(".e-toolbar");this.dragItem.querySelector("."+t).style.visibility="visible",sf.base.addClass([i],"e-drag-action"),document.body.style.cursor="";var s=this.getXYValue(e.event,"X"),n=this.getXYValue(e.event,"Y");this.dotNetRef.invokeMethodAsync("Dragged",this.droppedIndex,this.dragStartIndex,s,n)},o.prototype.getXYValue=function(e,t){var i,s=e.changedTouches;return i="X"===t?s?s[0].clientX:e.clientX:s?s[0].clientY:e.clientY,Math.ceil(i)},o.prototype.bindDraggable=function(){var t=this;this.options.allowDragAndDrop&&this.element.querySelectorAll("."+e+" ."+s).forEach((function(i){sf.base.isNullOrUndefined(t.options.dragArea)&&(t.options.dragArea="#"+t.element.id+" ."+e),i.classList.contains("e-draggable")||t.initializeDrag(i)}))},o.prototype.wireEvents=function(){this.bindDraggable(),window.addEventListener("resize",this.resizeContext),sf.base.EventHandler.add(this.element,"keydown",this.spaceKeyDown,this),sf.base.isNullOrUndefined(this.cntEle)||(this.touchModule=new sf.base.Touch(this.cntEle,{swipe:this.swipeHandler.bind(this)})),this.keyModule=new sf.base.KeyboardEvents(this.element,{keyAction:this.keyHandler.bind(this),keyConfigs:this.keyConfigs}),this.tabKeyModule=new sf.base.KeyboardEvents(this.element,{keyAction:this.keyHandler.bind(this),keyConfigs:{openPopup:"shift+f10",tab:"tab",shiftTab:"shift+tab"},eventName:"keydown"})},o.prototype.unWireEvents=function(){this.keyModule.destroy(),this.tabKeyModule.destroy(),sf.base.isNullOrUndefined(this.cntEle)||this.touchModule.destroy(),window.removeEventListener("resize",this.resizeContext),sf.base.EventHandler.remove(this.element,"keydown",this.spaceKeyDown),sf.base.removeClass([this.element],["e-rtl","e-focused"])},o.prototype.swipeHandler=function(e){if(!(e.velocity<3&&sf.base.isNullOrUndefined(e.originalEvent.changedTouches))){this.isNested&&this.element.setAttribute("data-swipe","true");var t=this.element.querySelector('[data-swipe="true"]');if(t)t.removeAttribute("data-swipe");else{if(this.isSwipeed=!0,"Right"===e.swipeDirection&&0!==this.options.selectedItem){for(var i=this.options.selectedItem-1;i>=0;i--)if(!this.tbItem[i].classList.contains("e-hidden")&&!this.tbItem[i].classList.contains("e-disable")){this.select(i,!0);break}}else if("Left"===e.swipeDirection&&this.options.selectedItem!==sf.base.selectAll("."+s,this.element).length-1)for(var n=this.options.selectedItem+1;n<this.tbItem.length;n++)if(!this.tbItem[n].classList.contains("e-hidden")&&!this.tbItem[n].classList.contains("e-disable")){this.select(n,!0);break}this.isSwipeed=!1}}},o.prototype.spaceKeyDown=function(t){if(32===t.keyCode&&32===t.which||35===t.keyCode&&35===t.which){var i=sf.base.closest(t.target,"."+e);sf.base.isNullOrUndefined(i)||t.preventDefault()}},o.prototype.keyHandler=function(e){if(!this.element.classList.contains("e-disable")){this.element.classList.add("e-focused");var i,n,o=e.target,r=this.getTabHeader(),a=sf.base.select(".e-active",r);switch(this.popEle=sf.base.select(".e-toolbar-pop",r),sf.base.isNullOrUndefined(this.popEle)||(this.popObj=this.popEle.ej2_instances[0]),e.action){case"space":case"enter":if(o.parentElement.classList.contains("e-disable"))return;if("enter"===e.action&&o.classList.contains("e-hor-nav")){this.showPopup(this.show);break}this.keyPressed(o);break;case"tab":case"shiftTab":o.classList.contains(t)&&!1===sf.base.closest(o,"."+s).classList.contains("e-active")&&o.setAttribute("tabindex",o.getAttribute("data-tabindex")),this.popObj&&sf.base.isVisible(this.popObj.element)&&this.popObj.hide(this.hide),sf.base.isNullOrUndefined(a)||"-1"!==a.children.item(0).getAttribute("tabindex")||a.children.item(0).setAttribute("tabindex","0");break;case"moveLeft":case"moveRight":i=sf.base.closest(document.activeElement,"."+s),sf.base.isNullOrUndefined(i)||this.refreshItemVisibility(i);break;case"openPopup":e.preventDefault(),!sf.base.isNullOrUndefined(this.popEle)&&this.popEle.classList.contains("e-popup-close")&&this.popObj.show(this.show);break;case"delete":if(n=sf.base.closest(o,"."+s),!0===this.options.showCloseButton&&!sf.base.isNullOrUndefined(n)){if(-1===this.getEleIndex(n))return;var l=n.nextSibling;!sf.base.isNullOrUndefined(l)&&l.classList.contains(s)&&l.firstElementChild.focus(),this.dotNetRef.invokeMethodAsync("RemoveTab",parseInt(n.getAttribute("data-index"),10))}this.setActiveBorder()}}},o.prototype.refreshActElePosition=function(){var e=sf.base.select("."+s+"."+n+".e-active",this.element);!sf.base.isNullOrUndefined(e)&&this.options.reorderActiveTab&&this.select(this.getEleIndex(e)),this.refreshActiveBorder()},o.prototype.refreshItemVisibility=function(e){var t=sf.base.select("."+this.scrCntClass,this.tbItems);if(!this.isVertical()&&!sf.base.isNullOrUndefined(t)){var i=sf.base.select(".e-hscroll-bar",this.tbItems),s=i.scrollLeft,n=s+i.offsetWidth,o=e.offsetLeft,r=e.offsetWidth,a=e.offsetLeft+e.offsetWidth;if(s<o&&n<a){var l=n-o;i.scrollLeft=s+(r-l)}else if(s>o&&n>a){l=a-s;i.scrollLeft=s-(r-l)}}},o.prototype.enableTab=function(e,t){var i=sf.base.selectAll("."+s,this.element)[e];sf.base.isNullOrUndefined(i)||(!0===t?(i.classList.remove("e-disable","e-overlay"),i.firstElementChild.setAttribute("tabindex",i.firstElementChild.getAttribute("data-tabindex"))):(i.classList.add("e-disable","e-overlay"),i.firstElementChild.removeAttribute("tabindex"),i.classList.contains("e-active")&&this.select(e+1)),i.setAttribute("aria-disabled",!0===t?"false":"true"))},o.prototype.hideTab=function(e,t){var i;void 0===t&&(t=!0);var n=sf.base.selectAll("."+s,this.element)[e];if(!sf.base.isNullOrUndefined(n)){if(this.bdrLine.classList.add("e-hidden"),t)if(n.classList.add("e-hidden"),0!==(i=sf.base.selectAll("."+s+":not(.e-hidden)",this.tbItems)).length&&n.classList.contains("e-active")){if(0!==e)for(var o=e-1;o>=0;o--){if(!this.tbItem[o].classList.contains("e-hidden")){this.select(o);break}if(0===o)for(var r=e+1;r<this.tbItem.length;r++)if(!this.tbItem[r].classList.contains("e-hidden")){this.select(r);break}}else for(r=e+1;r<this.tbItem.length;r++)if(!this.tbItem[r].classList.contains("e-hidden")){this.select(r);break}}else 0===i.length&&this.element.classList.add("e-hidden");else this.element.classList.remove("e-hidden"),i=sf.base.selectAll("."+s+":not(.e-hidden)",this.tbItems),n.classList.remove("e-hidden"),0===i.length&&this.select(e);this.setActiveBorder(),n.setAttribute("aria-hidden",""+t)}},o.prototype.select=function(e,t){void 0===t&&(t=!1);var n,o=this.getTabHeader();this.tbItems=sf.base.select("."+i,o),this.tbItem=sf.base.selectAll("."+s,o),this.prevItem=this.tbItem[this.prevIndex];var r=this.options.selectedItem;(sf.base.isNullOrUndefined(r)||r<0||this.tbItem.length<=r||isNaN(r))&&(this.options.selectedItem=0);var a=this.tbItem[e];if(sf.base.isNullOrUndefined(this.prevItem)||this.prevItem.classList.contains("e-disable")||this.prevItem.children.item(0).setAttribute("tabindex",this.prevItem.firstElementChild.getAttribute("tabindex")),this.initRender)this.selectingContent(e);else{a&&(n=parseInt(a.getAttribute("data-index"),10));var l={previousItem:null,previousIndex:this.prevIndex,selectedItem:null,selectedIndex:this.options.selectedItem,selectedContent:null,selectingItem:null,selectingIndex:n,selectingContent:null,isSwiped:this.isSwipeed,isInteracted:t,cancel:!1};this.dotNetRef.invokeMethodAsync("SelectingEvent",l,n)}},o.prototype.setPersistence=function(e,t){this.options.enablePersistence&&window.localStorage.setItem(e,t)},o.prototype.selectingContent=function(e){if(this.tbItem=sf.base.selectAll("."+s,this.hdrEle),this.tbItem.length>e&&e>=0&&!isNaN(e)){this.prevIndex=this.options.selectedItem;var t=this.hdrEle.querySelector("."+s+'[data-index="'+e+'"]');t&&t.classList.contains(n)&&this.options.reorderActiveTab&&this.popupHandler(t),this.setActive(e)}else this.setActive(0)},o.prototype.disable=function(e){this.setCssClass(this.element,"e-disable",e),this.element.setAttribute("aria-disabled",""+e)},o.prototype.headerItemsUpdate=function(e){var t=this.getTabHeader();this.tbItems=sf.base.select("."+i,t),this.tbItem=sf.base.selectAll("."+s,t),this.prevItem=this.tbItem[this.prevIndex],sf.base.isNullOrUndefined(this.prevItem)||this.prevItem.classList.contains("e-disable")||this.prevItem.children.item(0).setAttribute("tabindex",this.prevItem.firstElementChild.getAttribute("tabindex")),this.selectingContent(e)},o.prototype.destroy=function(){this.unWireEvents(),this.element.removeAttribute("aria-disabled")},o.prototype.getContentElement=function(e){return sf.base.select(".e-content #e-content"+this.tabId+"_"+e,this.element)},o}();return{initialize:function(e,t,i,s,n,r){if(t&&e){var a=new o(e,t,i,s);a.render(),n&&(a.headerReady(),r||a.isDestroyed||a.dotNetRef.invokeMethodAsync("CreatedEvent",null))}},headerReady:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.headerReady(),t||i.isDestroyed||i.dotNetRef.invokeMethodAsync("CreatedEvent",null))},contentReady:function(t,n){var o=window.sfBlazor.getCompInstance(t);if(!sf.base.isNullOrUndefined(o)&&!sf.base.isNullOrUndefined(o.element)){var r={isPopupElement:!1};o.element.classList.remove("e-focused"),o.isPopup=!1;var a=o.element.querySelector("."+e+" ."+s+'[data-index="'+n+'"]');sf.base.isNullOrUndefined(a)||(r.isPopupElement=!sf.base.isNullOrUndefined(sf.base.closest(a,".e-toolbar-pop")));var l=sf.base.selectAll("."+e+" ."+i+" ."+s,o.element);return r.toolbarItemIndex=l.length-1,o.headerItemsUpdate(n),o.setPersistence("tab"+o.element.id,n.toString()),"Init"!==o.options.loadOn&&o.contentReady(),JSON.stringify(r)}return null},selectingContent:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.selectingContent(t),i.setPersistence("tab"+i.element.id,t.toString()),"Init"!==i.options.loadOn&&i.contentReady())},serverItemsChanged:function(e,t,i,s){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.element)||(n.options.selectedItem=t,n.options.animation=i,sf.base.isNullOrUndefined(n.element.querySelector(".e-toolbar"))||(sf.base.removeClass([n.element.querySelector(".e-toolbar")],"e-drag-action"),sf.base.removeClass([n.element.querySelector(".e-indicator")],"e-hidden")),s?sf.base.addClass([n.element],"e-vertical-icon"):sf.base.removeClass([n.element],"e-vertical-icon"),n.serverItemsChanged(),n.options.allowDragAndDrop&&n.bindDraggable())},enableTab:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s)||sf.base.isNullOrUndefined(s.element)||s.enableTab(t,i)},hideTab:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s)||sf.base.isNullOrUndefined(s.element)||s.hideTab(t,i)},select:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||i.select(t)},disable:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||i.disable(t)},setCssClass:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(""!==i.options.cssClass&&i.setCssClass(i.element,i.options.cssClass,!1),i.setCssClass(i.element,t,!0),i.options.cssClass=t)},showCloseButton:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options.showCloseButton=t,i.refreshActElePosition())},headerPlacement:function(e,t,i,s,n,o,r){var a=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(a)&&!sf.base.isNullOrUndefined(a.element)){a.options.headerPlacement=t,a.options.selectedItem=i;var l=window.sfBlazor.getCompInstance(s);sf.base.isNullOrUndefined(l.element)||l.setCssClass(n),a.serverChangeOrientation(t,s,o,r)}},enableRtl:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options.enableRtl=t,i.setRTL(t))},overflowMode:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options.overflowMode=t,i.refreshActElePosition())},allowDragAndDrop:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options.allowDragAndDrop=t,i.setDragAndDrop(t))},refresh:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(t.element)||t.refreshActiveBorder()},destroy:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s)||sf.base.isNullOrUndefined(s.element)||(s.isDestroyed=!0,s.setPersistence(t,i),s.destroy())},getTabItem:function(e,t){if(!sf.base.isNullOrUndefined(e)){var i=e.querySelector("."+s+'[data-index="'+t+'"]');if(i)return JSON.stringify(window.sfBlazor.getDomObject("tabitem",i))}return null},getTabContent:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i)&&!sf.base.isNullOrUndefined(i.Element)){var s=i.getContentElement(t);if(s)return JSON.stringify(window.sfBlazor.getDomObject("tabcontent",s))}return null}}}()},"./modules/sf-textbox.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.TextBox=function(){"use strict";var e=function(){function e(e,t,i){this.element=e,this.container=i,this.element.blazor_input_instance=this,this.dotNetRef=t,this.isDestroyed=!1}return e.prototype.initialize=function(){sf.base.EventHandler.add(this.element,"blur",this.blurHandler,this);var e=this.container?this.container.querySelectorAll(".e-input-group-icon"):null;if(e&&e.length>0)for(var t=0;t<e.length;t++)sf.base.EventHandler.add(e[t],"mousedown",this.onMouseDownRipple,this),sf.base.EventHandler.add(e[t],"mouseup",this.onMouseUpRipple,this)},e.prototype.onMouseDownRipple=function(e){var t=e?e.currentTarget:null;!t||this.container.classList.contains("e-disabled")||this.container.querySelector("input").readOnly||t.classList.add("e-input-btn-ripple")},e.prototype.onMouseUpRipple=function(e){var t=e?e.currentTarget:null;t&&setTimeout((function(){t.classList.remove("e-input-btn-ripple")}),500)},e.prototype.blurHandler=function(){this.isDestroyed?sf.base.EventHandler.remove(this.element,"blur",this.blurHandler):this.dotNetRef.invokeMethodAsync("BlurHandler").catch((function(){}))},e.prototype.destroy=function(){sf.base.EventHandler.remove(this.element,"blur",this.blurHandler)},e}();return{initialize:function(t,i,s){t&&new e(t,i,s),t&&t.blazor_input_instance&&t.blazor_input_instance.initialize()},focusIn:function(e){e.focus()},focusOut:function(e){e.blur()},destroyInput:function(e){e&&e.blazor_input_instance&&(e.blazor_input_instance.isDestroyed=!0,e.blazor_input_instance.destroy())}}}()},"./modules/sf-timepicker.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.TimePicker=function(){"use strict";var e=function(){function e(){this.mask="",this.hiddenMask="",this.validCharacters="dMyhmHts",this.isDayPart=!1,this.isMonthPart=!1,this.isYearPart=!1,this.isHourPart=!1,this.isMinutePart=!1,this.isSecondsPart=!1,this.isMilliSecondsPart=!1,this.monthCharacter="",this.periodCharacter="",this.isHiddenMask=!1,this.isComplete=!1,this.isNavigate=!1,this.navigated=!1,this.formatRegex=/E{3,4}|d{1,4}|M{1,4}|y{1,4}|H{1,2}|h{1,2}|m{1,2}|f{1,7}|FF|t{1,2}|s{1,2}|z{1,4}|'[^']*'|'[^']*'/g,this.isDeletion=!1,this.isShortYear=!1,this.isDeleteKey=!1,this.isDateZero=!1,this.isMonthZero=!1,this.isYearZero=!1,this.dayTypeCount=0,this.monthTypeCount=0,this.hourTypeCount=0,this.minuteTypeCount=0,this.secondTypeCount=0}return e.prototype.keydownHandler=function(e){switch(e.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":case"Home":case"End":case"Delete":"Delete"!==e.code&&e.preventDefault(),this.isPopupOpen||this.maskKeydownHandler(e);break;case"Tab":case"shiftTab":this.maskKeydownHandler(e)}},e.prototype.clearHandler=function(){this.isDayPart=this.isMonthPart=this.isYearPart=this.isHourPart=this.isMinutePart=this.isSecondsPart=!1,this.updateValue()},e.prototype.updateValue=function(){this.monthCharacter=this.periodCharacter="";var e=this.dateformat.replace(this.formatRegex,this.formatCheck());this.isHiddenMask=!0,this.hiddenMask=this.dateformat.replace(this.formatRegex,this.formatCheck()),this.isHiddenMask=!1,this.previousHiddenMask=this.hiddenMask,this.previousValue=e},e.prototype.zeroCheck=function(e,t,i){var s=i;return e&&!t&&(s="0"),s},e.prototype.roundOff=function(e,t){for(var i=e.toString(),s=t-i.length,n="",o=0;o<s;o++)n+="0";return n+i},e.prototype.formatCheck=function(){var e=this;return function(t){var i,s,n=e.dayAbbreviatedName,o=Object.keys(n),r=e.dayName,a=Object.keys(r),l=e.monthAbbreviatedName,h=e.monthName,d=e.dayPeriod,c=Object.keys(d);switch(t){case"d":i=e.isDayPart?e.maskDateValue.getDate().toString():e.maskPlaceholderDictionary.Day.toString(),i=e.zeroCheck(e.isDateZero,e.isDayPart,i),2==e.dayTypeCount&&(e.isNavigate=!0,e.dayTypeCount=0);break;case"dd":i=e.isDayPart?e.roundOff(e.maskDateValue.getDate(),2):e.maskPlaceholderDictionary.Day.toString(),i=e.zeroCheck(e.isDateZero,e.isDayPart,i),2==e.dayTypeCount&&(e.isNavigate=!0,e.dayTypeCount=0);break;case"ddd":i=e.isDayPart&&e.isMonthPart&&e.isYearPart?n[o[e.maskDateValue.getDay()]].toString():e.maskPlaceholderDictionary.DayOfWeek.toString();break;case"dddd":i=e.isDayPart&&e.isMonthPart&&e.isYearPart?r[a[e.maskDateValue.getDay()]].toString():e.maskPlaceholderDictionary.DayOfWeek.toString();break;case"M":i=e.isMonthPart?(e.maskDateValue.getMonth()+1).toString():e.maskPlaceholderDictionary.Month.toString(),i=e.zeroCheck(e.isMonthZero,e.isMonthPart,i),2==e.monthTypeCount&&(e.isNavigate=!0,e.monthTypeCount=0);break;case"MM":i=e.isMonthPart?e.roundOff(e.maskDateValue.getMonth()+1,2):e.maskPlaceholderDictionary.Month.toString(),i=e.zeroCheck(e.isMonthZero,e.isMonthPart,i),2==e.monthTypeCount&&(e.isNavigate=!0,e.monthTypeCount=0);break;case"MMM":i=e.isMonthPart?l[e.maskDateValue.getMonth()]:e.maskPlaceholderDictionary.Month.toString();break;case"MMMM":i=e.isMonthPart?h[e.maskDateValue.getMonth()]:e.maskPlaceholderDictionary.Month.toString();break;case"yy":i=e.isYearPart?e.roundOff(e.maskDateValue.getFullYear()%100,2):e.maskPlaceholderDictionary.Year.toString(),i=e.zeroCheck(e.isYearZero,e.isYearPart,i),e.isYearPart&&(e.isNavigate=e.isShortYear=2===(e.maskDateValue.getFullYear()%100).toString().length);break;case"y":case"yyyy":i=e.isYearPart?e.roundOff(e.maskDateValue.getFullYear(),4):e.maskPlaceholderDictionary.Year.toString(),i=e.zeroCheck(e.isYearZero,e.isYearPart,i);break;case"h":i=e.isHourPart?(e.maskDateValue.getHours()%12||12).toString():e.maskPlaceholderDictionary.Hour.toString(),2==e.hourTypeCount&&(e.isNavigate=!0,e.hourTypeCount=0);break;case"hh":i=e.isHourPart?e.roundOff(e.maskDateValue.getHours()%12||12,2):e.maskPlaceholderDictionary.Hour.toString(),2==e.hourTypeCount&&(e.isNavigate=!0,e.hourTypeCount=0);break;case"H":i=e.isHourPart?e.maskDateValue.getHours().toString():e.maskPlaceholderDictionary.Hour.toString(),2==e.hourTypeCount&&(e.isNavigate=!0,e.hourTypeCount=0);break;case"HH":i=e.isHourPart?e.roundOff(e.maskDateValue.getHours(),2):e.maskPlaceholderDictionary.Hour.toString(),2==e.hourTypeCount&&(e.isNavigate=!0,e.hourTypeCount=0);break;case"m":i=e.isMinutePart?e.maskDateValue.getMinutes().toString():e.maskPlaceholderDictionary.Minute.toString(),2==e.minuteTypeCount&&(e.isNavigate=!0,e.minuteTypeCount=0);break;case"mm":i=e.isMinutePart?e.roundOff(e.maskDateValue.getMinutes(),2):e.maskPlaceholderDictionary.Minute.toString(),2==e.minuteTypeCount&&(e.isNavigate=!0,e.minuteTypeCount=0);break;case"s":i=e.isSecondsPart?e.maskDateValue.getSeconds().toString():e.maskPlaceholderDictionary.Second.toString(),2==e.secondTypeCount&&(e.isNavigate=!0,e.secondTypeCount=0);break;case"ss":i=e.isSecondsPart?e.roundOff(e.maskDateValue.getSeconds(),2):e.maskPlaceholderDictionary.Second.toString(),2==e.secondTypeCount&&(e.isNavigate=!0,e.secondTypeCount=0);break;case"f":i=Math.floor(e.maskDateValue.getMilliseconds()/100).toString();break;case"FF":case"ff":s=e.maskDateValue.getMilliseconds(),e.maskDateValue.getMilliseconds()>99&&(s=Math.floor(e.maskDateValue.getMilliseconds()/10)),i=e.roundOff(s,2);break;case"fff":i=e.roundOff(e.maskDateValue.getMilliseconds(),3);break;case"ffff":i=e.roundOff(e.maskDateValue.getMilliseconds(),4);break;case"fffff":i=e.roundOff(e.maskDateValue.getMilliseconds(),5);break;case"ffffff":i=e.roundOff(e.maskDateValue.getMilliseconds(),6);break;case"t":case"tt":i=e.maskDateValue.getHours()<12?d[c[0]]:d[c[1]];break;case"z":case"zz":i=e.offset.substring(0,3);break;case"zzz":case"zzzz":i=e.offset}if("ddd"===t&&(t="EEE"),"dddd"===t&&(t="EEEE"),i=void 0!==i?i:t.slice(1,t.length-1),e.isHiddenMask){for(var p="",u=0;u<i.length;u++)p+=t[0];return p}return i}},e.prototype.differenceCheck=function(){var e=this.element,t=e.selectionStart,i=e.value,s=this.previousValue.substring(0,t+this.previousValue.length-i.length),n=i.substring(0,t),o=!sf.base.isNullOrUndefined(n)&&n.length>0?new Date(+this.maskDateValue):new Date(this.options.valueString),r=new Date(o.getFullYear(),o.getMonth()+1,0).getDate();if(0===s.indexOf(n)&&(0===n.length||this.previousHiddenMask[n.length-1]!==this.previousHiddenMask[n.length])){for(var a=n.length;a<s.length;a++)""!==this.previousHiddenMask[a]&&this.validCharacters.indexOf(this.previousHiddenMask[a])>=0&&(this.isDeletion=this.handleDeletion(this.previousHiddenMask[a],!1));if(this.isDeletion)return}switch(this.previousHiddenMask[t-1]){case"d":var l=(this.isDayPart&&o.getDate().toString().length<2&&!this.isPersist()?10*o.getDate():0)+parseInt(n[t-1],10);if(this.isDateZero="0"==n[t-1],this.isFocused=!this.isFocused&&this.isFocused,this.navigated=!this.navigated&&this.navigated,isNaN(l))return;for(a=0;l>r;a++)l=parseInt(l.toString().slice(1),10);if(l>=1){if(o.setDate(l),this.isNavigate=2===l.toString().length,this.previousDate=new Date(o.getFullYear(),o.getMonth(),o.getDate()),o.getMonth()!==this.maskDateValue.getMonth())return;this.isDayPart=!0,this.dayTypeCount=this.dayTypeCount+1}else this.isDayPart=!1,this.dayTypeCount=this.isDateZero?this.dayTypeCount+1:this.dayTypeCount;break;case"M":var h=void 0;if(h=o.getMonth().toString().length<2&&!this.isPersist()?(this.isMonthPart?10*(o.getMonth()+1):0)+parseInt(n[t-1],10):parseInt(n[t-1],10),this.isFocused=!this.isFocused&&this.isFocused,this.navigated=!this.navigated&&this.navigated,this.isMonthZero="0"==n[t-1],isNaN(h)){var d=this.monthName,c=Object.keys(d);for(this.monthCharacter+=n[t-1].toLowerCase();this.monthCharacter.length>0;){a=0;for(var p=0,u=c;p<u.length;p++){u[p];if(0===d[a].toLowerCase().indexOf(this.monthCharacter))return o.setMonth(a),this.isMonthPart=!0,void(this.maskDateValue=o);a++}this.monthCharacter=this.monthCharacter.substring(1,this.monthCharacter.length)}}else{for(;h>12;){var f=h;0===(h=parseInt(h.toString().slice(1),10))&&(h=parseInt(f.toString().slice(0,1),10))}if(h>=1){if(o.setMonth(h-1),this.isNavigate=2===h.toString().length,o.getMonth()!==h-1&&(o.setDate(1),o.setMonth(h-1)),this.isDayPart){var g=new Date(this.previousDate.getFullYear(),this.previousDate.getMonth()+1,0).getDate(),m=new Date(o.getFullYear(),o.getMonth()+1,0).getDate();this.previousDate.getDate()==g&&m<=g&&o.setDate(m)}this.previousDate=new Date(o.getFullYear(),o.getMonth(),o.getDate()),this.isMonthPart=!0,this.monthTypeCount=this.monthTypeCount+1}else o.setMonth(0),this.isMonthPart=!1,this.monthTypeCount=this.isMonthZero?this.monthTypeCount+1:this.monthTypeCount}break;case"y":var v=(this.isYearPart&&o.getFullYear().toString().length<4&&!this.isShortYear?10*o.getFullYear():0)+parseInt(n[t-1],10);if(this.isShortYear=!1,this.isYearZero="0"==n[t-1],isNaN(v))return;for(;v>9999;)v=parseInt(v.toString().slice(1),10);v<1?this.isYearPart=!1:(o.setFullYear(v),4===v.toString().length&&(this.isNavigate=!0),this.previousDate=new Date(o.getFullYear(),o.getMonth(),o.getDate()),this.isYearPart=!0);break;case"h":if(this.hour=(this.isHourPart&&(o.getHours()%12||12).toString().length<2&&!this.isPersist()?10*(o.getHours()%12||12):0)+parseInt(n[t-1],10),this.isFocused=!this.isFocused&&this.isFocused,this.navigated=!this.navigated&&this.navigated,isNaN(this.hour))return;for(;this.hour>12;)this.hour=parseInt(this.hour.toString().slice(1),10);o.setHours(12*Math.floor(o.getHours()/12)+this.hour%12),this.isNavigate=2===this.hour.toString().length,this.isHourPart=!0,this.hourTypeCount=this.hourTypeCount+1;break;case"H":if(this.hour=(this.isHourPart&&o.getHours().toString().length<2&&!this.isPersist()?10*o.getHours():0)+parseInt(n[t-1],10),this.isFocused=!this.isFocused&&this.isFocused,this.navigated=!this.navigated&&this.navigated,isNaN(this.hour))return;for(a=0;this.hour>23;a++)this.hour=parseInt(this.hour.toString().slice(1),10);o.setHours(this.hour),this.isNavigate=2===this.hour.toString().length,this.isHourPart=!0,this.hourTypeCount=this.hourTypeCount+1;break;case"m":var b=(this.isMinutePart&&o.getMinutes().toString().length<2&&!this.isPersist()?10*o.getMinutes():0)+parseInt(n[t-1],10);if(this.isFocused=!this.isFocused&&this.isFocused,this.navigated=!this.navigated&&this.navigated,isNaN(b))return;for(a=0;b>59;a++)b=parseInt(b.toString().slice(1),10);o.setMinutes(b),this.isNavigate=2===b.toString().length,this.isMinutePart=!0,this.minuteTypeCount=this.minuteTypeCount+1;break;case"s":var y=(this.isSecondsPart&&o.getSeconds().toString().length<2&&!this.isPersist()?10*o.getSeconds():0)+parseInt(n[t-1],10);if(this.isFocused=!this.isFocused&&this.isFocused,this.navigated=!this.navigated&&this.navigated,isNaN(y))return;for(a=0;y>59;a++)y=parseInt(y.toString().slice(1),10);o.setSeconds(y),this.isNavigate=2===y.toString().length,this.isSecondsPart=!0,this.secondTypeCount=this.secondTypeCount+1;break;case"t":this.periodCharacter+=n[t-1].toLowerCase();var M=this.dayPeriod,C=Object.keys(M);for(a=0;this.periodCharacter.length>0;a++)(0===M[C[0]].toLowerCase().indexOf(this.periodCharacter)&&o.getHours()>=12||0===M[C[1]].toLowerCase().indexOf(this.periodCharacter)&&o.getHours()<12)&&(o.setHours((o.getHours()+12)%24),this.maskDateValue=o),this.periodCharacter=this.periodCharacter.substring(1,this.periodCharacter.length)}this.maskDateValue=o},e.prototype.maskKeydownHandler=function(e){var t=this.element;if(this.dayTypeCount=this.monthTypeCount=this.hourTypeCount=this.minuteTypeCount=this.secondTypeCount=0,"Delete"!==e.key){if(!(e.altKey||e.ctrlKey||"ArrowLeft"!==e.key&&"ArrowRight"!==e.key&&"shiftTab"!==e.key&&"Tab"!==e.key&&"shiftTab"!==e.action&&"End"!==e.key&&"Home"!==e.key)){var i=t.selectionStart,s=t.selectionEnd,n=t.value.length;if(0==i&&s==n&&("Tab"===e.key&&!e.shiftKey||"Tab"===e.key&&e.shiftKey)){var o="Tab"===e.key&&e.shiftKey?s:0;t.selectionStart=t.selectionEnd=o}if("End"===e.key||"Home"===e.key){var r="End"===e.key?n:0;t.selectionStart=t.selectionEnd=r}if(("ArrowLeft"===e.key||"ArrowRight"===e.key)&&0===i&&s===n){if("ArrowLeft"===e.key)for(var a=t.selectionEnd,l=a,h=a-1;l<this.hiddenMask.length||h>=0;l++,h--){if(l<this.hiddenMask.length&&-1!==this.validCharacters.indexOf(this.hiddenMask[l]))return void this.setSelection(this.hiddenMask[l]);if(h>=0&&-1!==this.validCharacters.indexOf(this.hiddenMask[h]))return void this.setSelection(this.hiddenMask[h])}else this.validCharacterCheck();return}this.navigateSelection(!!("ArrowLeft"===e.key||e.shiftKey&&"Tab"===e.key||"End"===e.key))}if(!(e.altKey||e.ctrlKey||"ArrowUp"!==e.key&&"ArrowDown"!==e.key)){i=t.selectionStart;var d="";-1!==this.validCharacters.indexOf(this.hiddenMask[i])&&(d=this.hiddenMask[i]),this.dateAlteration("ArrowDown"===e.key);var c=this.dateformat.replace(this.formatRegex,this.formatCheck());this.isHiddenMask=!0,this.hiddenMask=this.dateformat.replace(this.formatRegex,this.formatCheck()),this.isHiddenMask=!1,this.previousHiddenMask=this.hiddenMask,this.previousValue=c,t.value=c;for(l=0;l<this.hiddenMask.length;l++)if(d===this.hiddenMask[l]){i=l;break}t.selectionStart=i,this.validCharacterCheck()}}else this.isDeleteKey=!0},e.prototype.dateAlteration=function(e){var t=this.element.selectionStart,i="";if(-1!==this.validCharacters.indexOf(this.hiddenMask[t])){i=this.hiddenMask[t];var s=new Date(this.maskDateValue.getFullYear(),this.maskDateValue.getMonth(),this.maskDateValue.getDate(),this.maskDateValue.getHours(),this.maskDateValue.getMinutes(),this.maskDateValue.getSeconds());this.previousDate=new Date(this.maskDateValue.getFullYear(),this.maskDateValue.getMonth(),this.maskDateValue.getDate(),this.maskDateValue.getHours(),this.maskDateValue.getMinutes(),this.maskDateValue.getSeconds());var n=e?-1:1;switch(i){case"d":s.setDate(s.getDate()+n);break;case"M":var o=s.getMonth()+n;if(s.setDate(1),s.setMonth(o),this.isDayPart){var r=new Date(this.previousDate.getFullYear(),this.previousDate.getMonth()+1,0).getDate(),a=new Date(s.getFullYear(),s.getMonth()+1,0).getDate();this.previousDate.getDate()==r&&a<=r?s.setDate(a):s.setDate(this.previousDate.getDate())}else s.setDate(this.previousDate.getDate());this.previousDate=new Date(s.getFullYear(),s.getMonth(),s.getDate());break;case"y":s.setFullYear(s.getFullYear()+n);break;case"H":case"h":s.setHours(s.getHours()+n);break;case"m":s.setMinutes(s.getMinutes()+n);break;case"s":s.setSeconds(s.getSeconds()+n);break;case"t":s.setHours((s.getHours()+12)%24)}this.maskDateValue=s.getFullYear()>0?s:this.maskDateValue,-1!==this.validCharacters.indexOf(this.hiddenMask[t])&&this.handleDeletion(this.hiddenMask[t],!0)}},e.prototype.handleDeletion=function(e,t){switch(e){case"d":this.isDayPart=t;break;case"M":this.isMonthPart=t,t||(this.maskDateValue.setMonth(0),this.monthCharacter="");break;case"y":this.isYearPart=t;break;case"H":case"h":this.isHourPart=t,t||(this.periodCharacter="");break;case"m":this.isMinutePart=t;break;case"s":this.isSecondsPart=t;break;default:return!1}return!0},e.prototype.isPersist=function(){return this.isFocused||this.navigated},e.prototype.setDynamicValue=function(){this.maskDateValue=new Date(this.options.valueString),this.isDayPart=this.isMonthPart=this.isYearPart=this.isHourPart=this.isMinutePart=this.isSecondsPart=!0,this.updateValue(),this.validCharacterCheck()},e.prototype.validCharacterCheck=function(){var e=this.element,t=e.selectionStart;if("TimePicker"!==this.componentName&&t===this.hiddenMask.length&&this.mask===e.value&&(t=0),"TimePicker"===this.componentName){if(t===this.hiddenMask.length)return void e.setSelectionRange(0,t);if(this.isPopupOpen)return void e.setSelectionRange(0,this.hiddenMask.length)}for(var i=t,s=t-1;i<this.hiddenMask.length||s>=0;i++,s--){if(i<this.hiddenMask.length&&-1!==this.validCharacters.indexOf(this.hiddenMask[i]))return void this.setSelection(this.hiddenMask[i]);if(s>=0&&-1!==this.validCharacters.indexOf(this.hiddenMask[s]))return void this.setSelection(this.hiddenMask[s])}},e.prototype.setSelection=function(e){for(var t=this.element,i=-1,s=0,n=0;n<this.hiddenMask.length;n++)this.hiddenMask[n]===e&&(s=n+1,-1===i&&(i=n));i<0&&(i=0),t.setSelectionRange(i,s)},e.prototype.maskInputHandler=function(){var e,t=this.element,i=t.selectionStart,s="";-1!==this.validCharacters.indexOf(this.hiddenMask[i])&&(s=this.hiddenMask[i]),this.differenceCheck(),e=this.dateformat.replace(this.formatRegex,this.formatCheck()),this.isHiddenMask=!0,this.hiddenMask=this.dateformat.replace(this.formatRegex,this.formatCheck()),this.isDateZero=this.isMonthZero=this.isYearZero=!1,this.isHiddenMask=!1,this.previousHiddenMask=this.hiddenMask,this.previousValue=e,t.value=e;for(var n=0;n<this.hiddenMask.length;n++)if(s===this.hiddenMask[n]){i=n;break}if(t.selectionStart=i,this.validCharacterCheck(),(this.isNavigate||this.isDeletion)&&!this.isDeleteKey){var o=!this.isNavigate;this.isNavigate=this.isDeletion=!1,this.navigateSelection(o)}this.isDeleteKey&&(this.isDeletion=!1),this.isDeleteKey=!1},e.prototype.navigateSelection=function(e){var t=this.element,i=t.selectionStart,s=t.selectionEnd,n=e?i-1:s;for(this.navigated=!0;n<this.hiddenMask.length&&n>=0;){if(this.validCharacters.indexOf(this.hiddenMask[n])>=0){this.setSelection(this.hiddenMask[n]);break}n+=e?-1:1}},e.prototype.createMask=function(e){this.options=e;this.element;this.isDayPart=this.isMonthPart=this.isYearPart=this.isHourPart=this.isMinutePart=this.isSecondsPart=!1,this.dateformat=this.options.format;var t=this.dateformat.replace(this.formatRegex,this.formatCheck());return this.isHiddenMask=!0,this.hiddenMask=this.dateformat.replace(this.formatRegex,this.formatCheck()),this.isHiddenMask=!1,this.previousHiddenMask=this.hiddenMask,this.mask=this.previousValue=t,this.options.value&&(this.value=this.options.value,this.navigated=this.options.navigated,this.setDynamicValue()),t=this.dateformat.replace(this.formatRegex,this.formatCheck()),{currentMaskFormat:this.mask,inputElementValue:t}},e.prototype.updateCurrentValue=function(e){this.element.value=e},e}(),t=(new Date).getDate(),i=(new Date).getMonth(),s=(new Date).getFullYear(),n=function(){function n(t,i,s,n,o){window.sfBlazor=window.sfBlazor,this.maskObj=new e,this.componentName="TimePicker",this.dataId=t,this.containerElement=i,this.element=s,this.options=o,window.sfBlazor.setCompInstance(this),this.dotNetRef=n,this.maskObj.element=this.element,this.enableMask=this.options.enableMask,this.enableMask&&(this.maskObj.dateformat=this.options.format,this.maskObj.isRendered=this.options.isRendered,this.maskObj.componentName=this.componentName,this.maskObj.offset=this.options.offset,this.maskObj.floatLabelType=this.options.floatLabelType,this.maskObj.maskPlaceholderDictionary=this.options.maskPlaceholderDictionary,this.maskObj.dayAbbreviatedName=this.options.dayAbbreviatedName,this.maskObj.dayName=this.options.dayName,this.maskObj.dayPeriod=this.options.dayPeriod,this.maskObj.monthAbbreviatedName=this.options.monthAbbreviatedName,this.maskObj.monthName=this.options.monthName,this.maskObj.maskDateValue=sf.base.isNullOrUndefined(this.options.value)?new Date:new Date(this.options.value.toString()),this.maskObj.maskDateValue.setMonth(0),this.maskObj.maskDateValue.setHours(0),this.maskObj.maskDateValue.setMinutes(0),this.maskObj.maskDateValue.setSeconds(0),this.maskObj.previousDate=new Date(this.maskObj.maskDateValue.getFullYear(),this.maskObj.maskDateValue.getMonth(),this.maskObj.maskDateValue.getDate(),this.maskObj.maskDateValue.getHours(),this.maskObj.maskDateValue.getMinutes(),this.maskObj.maskDateValue.getSeconds()),this.removeEventListener(),this.addEventListener())}return n.prototype.initialize=function(){this.keyConfigure={enter:"enter",escape:"escape",end:"end",tab:"tab",home:"home",down:"downarrow",up:"uparrow",left:"leftarrow",right:"rightarrow",open:"alt+downarrow",close:"alt+uparrow"},sf.base.Browser.isDevice||(this.keyConfigure=sf.base.extend(this.keyConfigure,this.options.keyConfigs),new sf.base.KeyboardEvents(this.containerElement,{keyAction:this.inputHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}))},n.prototype.bindInputEvent=function(){this.enableMask?sf.base.EventHandler.add(this.element,"input",this.inputkeyHandler,this):sf.base.EventHandler.remove(this.element,"input",this.inputkeyHandler)},n.prototype.addEventListener=function(){sf.base.EventHandler.add(this.element,"mouseup",this.mouseUpHandler,this),sf.base.EventHandler.add(this.element,"keydown",this.keydownHandler,this),this.bindInputEvent()},n.prototype.removeEventListener=function(){sf.base.EventHandler.remove(this.element,"mouseup",this.mouseUpHandler),sf.base.EventHandler.remove(this.element,"keydown",this.keydownHandler)},n.prototype.mouseUpHandler=function(e){this.enableMask&&(this.maskObj.element=this.element,e.preventDefault(),this.maskObj.validCharacterCheck())},n.prototype.inputkeyHandler=function(){this.enableMask&&(this.maskObj.element=this.element,this.maskObj.maskInputHandler())},n.prototype.keydownHandler=function(e){this.enableMask&&(this.maskObj.element=this.element,this.maskObj.keydownHandler(e))},n.prototype.renderPopup=function(e,t,i,s){this.options=s,this.maskObj.isPopupOpen=!0,this.popupHolder=t,this.timeCollections=[],this.listWrapper=t.querySelector(".e-content")||sf.base.select(".e-content"),this.getTimeCollection(),sf.base.isNullOrUndefined(this.element.value)||(this.removeSelection(),this.selectedElement=this.listWrapper.querySelector('li[data-value = "'+this.element.value+'"]'),this.updateSelection(this.selectedElement)),this.popupCreation(e,s),sf.base.Browser.isDevice&&(this.mobilePopupWrapper=sf.base.createElement("div",{className:"e-timepicker-mob-popup-wrap"}),document.body.appendChild(this.mobilePopupWrapper)),("model"===i.appendTo?this.mobilePopupWrapper:document.body).appendChild(this.popupWrapper),this.setScrollPosition(),this.popupObj.refreshPosition(this.element);var n={name:"FadeIn",duration:sf.base.Browser.isDevice?0:300};1e3===this.options.zIndex?this.popupObj.show(new sf.base.Animation(n),this.element):this.popupObj.show(new sf.base.Animation(n),null),this.setOverlayIndex(this.mobilePopupWrapper,this.popupObj.element,this.modal,sf.base.Browser.isDevice),sf.base.EventHandler.add(document,"mousedown touchstart",this.documentClickHandler,this)},n.prototype.getTimeCollection=function(){for(var e=this.listWrapper.querySelectorAll(".e-list-item"),t=0;t<e.length;t++)this.timeCollections.push(e[t].getAttribute("data-value"))},n.prototype.updateSelection=function(e){e&&(sf.base.addClass([e],"e-active"),e.setAttribute("aria-selected","true"))},n.prototype.setScrollPosition=function(){sf.base.isNullOrUndefined(this.selectedElement)?this.popupWrapper&&this.options.scrollTo&&this.checkDateValue(new Date(this.options.scrollTo))&&this.setScrollTo():this.findScrollTop(this.selectedElement)},n.prototype.checkDateValue=function(e){return!sf.base.isNullOrUndefined(e)&&e instanceof Date&&!isNaN(+e)?e:null},n.prototype.findScrollTop=function(e){var t=this.getPopupHeight(),i=e.nextElementSibling,s=i?i.offsetTop:e.offsetTop,n=e.getBoundingClientRect().height;s+e.offsetTop>t?this.popupWrapper.scrollTop=i?s-(t/2+n/2):s:this.popupWrapper.scrollTop=0},n.prototype.setScrollTo=function(){var e;if(sf.base.isNullOrUndefined(this.popupWrapper))this.popupWrapper.scrollTop=0;else{var t=this.popupWrapper.querySelectorAll(".e-list-item");if(t.length){var i=new Date((new Date).toDateString()+" "+this.timeCollections[0]).setMilliseconds(0),s=this.getDateObject(new Date(this.options.scrollTo)).getTime();e=t[Math.round((s-i)/(6e4*this.options.step))]}}sf.base.isNullOrUndefined(e)?this.popupWrapper.scrollTop=0:this.findScrollTop(e)},n.prototype.getDateObject=function(e){if(!sf.base.isNullOrUndefined(e)){var n=e,o=!sf.base.isNullOrUndefined(this.options.value);if(this.checkDateValue(n)){var r=o?new Date(this.options.value).getDate():t,a=o?new Date(this.options.value).getMonth():i,l=o?new Date(this.options.value).getFullYear():s;return new Date(l,a,r,n.getHours(),n.getMinutes(),n.getSeconds())}}return null},n.prototype.getPopupHeight=function(){var e=parseInt("240px",10),t=this.popupWrapper.getBoundingClientRect().height;return t>e?e:t},n.prototype.popupCreation=function(e,t){var i=this;this.popupWrapper=e,this.containerStyle=this.containerElement.getBoundingClientRect(),sf.base.Browser.isDevice&&(this.modal=sf.base.createElement("div"),this.modal.className="e-timepicker e-time-modal",document.body.className+=" e-time-overflow",this.modal.style.display="block",document.body.appendChild(this.modal)),this.popupObj=new sf.popups.Popup(this.popupWrapper,{width:this.setPopupWidth(this.options.width),relateTo:sf.base.Browser.isDevice?document.body:this.containerElement,position:sf.base.Browser.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},collision:sf.base.Browser.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},offsetY:4,targetType:"relative",enableRtl:t.enableRtl,zIndex:t.zIndex,open:function(){i.popupWrapper.style.visibility="visible"},close:function(){i.popupHolder.appendChild(i.popupWrapper),i.popupObj&&i.popupObj.destroy(),i.isDisposed||i.dotNetRef.invokeMethodAsync("ClosePopup").catch((function(){})),i.popupObj=null},targetExitViewport:function(){sf.base.Browser.isDevice||i.isDisposed||i.dotNetRef.invokeMethodAsync("HidePopup",null)}}),sf.base.Browser.isDevice||(this.popupObj.collision={X:"none",Y:"flip"}),this.popupObj.element.style.maxHeight="240px"},n.prototype.closePopup=function(e,t){this.options=t,this.maskObj.isPopupOpen=!1,sf.base.removeClass([document.body],"e-time-overflow"),this.closeEventCallback(e)},n.prototype.removeSelection=function(){if(this.removeHover("e-hover"),!sf.base.isNullOrUndefined(this.popupWrapper)){var e=this.popupWrapper.querySelectorAll(".e-active");e.length&&(sf.base.removeClass(e,"e-active"),e[0].removeAttribute("aria-selected"))}},n.prototype.removeHover=function(e){var t=this.popupWrapper?this.popupWrapper.querySelectorAll("."+e):[];t&&t.length&&(sf.base.removeClass(t,e),"e-navigation"===e&&t[0].removeAttribute("aria-selected"))},n.prototype.setWidth=function(e){return e="number"==typeof e?sf.base.formatUnit(e):"string"==typeof e?e.match(/px|%|em/)?e:sf.base.formatUnit(e):"100%"},n.prototype.setPopupWidth=function(e){(e=this.setWidth(e)).indexOf("%")>-1&&(e=(this.containerStyle.width*parseFloat(e)/100).toString()+"px");return e},n.prototype.closeEventCallback=function(e){var t=e;if(this.isPopupOpen()&&!t.cancel&&this.popupObj){var i={name:"FadeOut",duration:50,delay:0};this.popupObj.hide(new sf.base.Animation(i))}sf.base.Browser.isDevice&&(this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null),sf.base.isNullOrUndefined(this.mobilePopupWrapper)||(this.mobilePopupWrapper.remove(),this.mobilePopupWrapper=null)),sf.base.EventHandler.remove(document,"mousedown touchstart",this.documentClickHandler)},n.prototype.isPopupOpen=function(){return!(sf.base.isNullOrUndefined(this.popupObj)||!this.popupObj.element.classList.contains("e-popup"))},n.prototype.documentClickHandler=function(e){var t=e.target;!sf.base.isNullOrUndefined(this.popupObj)&&(this.containerElement.contains(t)||this.popupObj.element&&this.popupObj.element.contains(t))&&"touchstart"!==e.type&&e.preventDefault();var i=this.containerElement.querySelector(".e-clear-icon"),s=this.containerElement.querySelector(".e-time-icon.e-icons");sf.base.closest(t,".e-popup-wrapper")||t===this.element||t===s||t===i||t===this.containerElement||this.isPopupOpen()&&!this.isDisposed&&this.dotNetRef.invokeMethodAsync("HidePopup",null)},n.prototype.setOverlayIndex=function(e,t,i,s){if(s&&!sf.base.isNullOrUndefined(t)&&!sf.base.isNullOrUndefined(i)&&!sf.base.isNullOrUndefined(e)){var n=parseInt(t.style.zIndex,10)?parseInt(t.style.zIndex,10):1e3;i.style.zIndex=(n-1).toString(),e.style.zIndex=n.toString()}},n.prototype.selectInputText=function(e,t,i){sf.base.Browser.isDevice||this.enableMask&&!this.maskObj.isPopupOpen||(e.setSelectionRange(0,e.value.length),t&&this.listWrapper&&(this.selectedElement=this.listWrapper.querySelectorAll(".e-list-item")[i],this.setScrollPosition()))},n.prototype.isDevice=function(){return sf.base.Browser.isDevice},n.prototype.inputHandler=function(e){var t=this.element;"right"!==e.action&&"left"!==e.action&&"tab"!==e.action&&"enter"!==e.action&&e.preventDefault(),"enter"===e.action&&this.isPopupOpen()&&e.stopPropagation();var i={Action:e.action,Key:e.key,KeyCode:e.keyCode,Events:e,SelectDate:null,FocusedDate:null,classList:"",Id:null,TargetClassList:null};this.enableMask&&this.maskObj.isPopupOpen&&(t.value=null),this.isDisposed||this.dotNetRef.invokeMethodAsync("KeyboardHandler",i,t.value),"enter"===e.action&&!sf.base.isNullOrUndefined(this.popupObj)&&document.body.contains(this.popupObj.element)&&e.preventDefault()},n}();return{initialize:function(e,t,i,s,o){if(i){var r=new n(e,t,i,s,o);if(r.initialize(),o.enableMask)return r.maskObj.createMask(o)}return{currentMaskFormat:null,inputElementValue:o.value}},createMask:function(e,t){return e&&t.enableMask?window.sfBlazor.getCompInstance(e).maskObj.createMask(t):{currentMaskFormat:null,inputElementValue:t.value}},updateCurrentValue:function(e,t){window.sfBlazor.getCompInstance(e).maskObj.updateCurrentValue(t)},renderPopup:function(e,t,i,s,n){var o=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(o)&&t&&i&&o.renderPopup(t,i,s,n)},closePopup:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(s)&&t&&s.closePopup(t,i)},selectInputText:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s)||s.selectInputText(s.element,t,i)},focusIn:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.element.focus()},focusOut:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.element.blur()},destroy:function(e,t,i,s,n){var o=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(o)&&t&&t instanceof HTMLElement&&i&&(o.isDisposed=!0,o.closePopup(s,n))}}}()},"./modules/sf-toast.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Toast=function(){"use strict";var e="e-toast-progress",t=function(){function t(e){this.progressObj=[],window.sfBlazor=window.sfBlazor,this.progressObj=[],this.updateContext(e),window.sfBlazor&&(sf.base.isNullOrUndefined(window.sfBlazor.instances)&&(window.sfBlazor.instances=[]),window.sfBlazor.instances[this.dataId]=this)}return t.prototype.initialize=function(){this.isDevice=sf.base.Browser.isDevice,"300px"===this.width&&(this.width=this.isDevice&&screen.width<768?"100%":"300px",this.toastContainer.classList.add("e-toast-full-width")),this.isDevice&&screen.width<768&&new sf.base.Touch(this.element,{swipe:this.swipeHandler.bind(this)})},t.prototype.show=function(t){sf.base.isNullOrUndefined(this.refElement)&&(this.refElement=sf.base.createElement("div",{className:"e-toast-ref-element"}),this.toastContainer=this.element.parentElement,this.toastContainer.parentElement.insertBefore(this.refElement,this.element.parentElement));this.setAnimation(t);var s="string"===i(this.target)?document.querySelector(this.target):document.body;if(t.rootElement.style.zIndex=sf.popups.getZindexPartial(t.rootElement)+"",!sf.base.isNullOrUndefined(s)){"BODY"===s.tagName?this.toastContainer.style.position="fixed":(this.toastContainer.style.position="absolute",s.style.position="relative"),s.appendChild(this.toastContainer),this.appendToast(t.element);var n=parseInt(t.element.id.split("toast_")[1],10);this.progressObj[n]={hideEstimatedTimeOfArrival:null,intervalId:null,maxHideTime:null,element:null,timeOutId:null,progressEle:null},this.progressObj[n].element=t.element,this.extendedTimeout>0&&this.timeOut>0&&(sf.base.EventHandler.add(t.element,"mouseover",this.toastHoverAction.bind(this,n)),sf.base.EventHandler.add(t.element,"mouseleave",this.delayedToastProgress.bind(this,n))),t.showProgressBar&&(this.progressObj[n].progressEle=t.element.querySelector("."+e)),sf.base.EventHandler.add(t.element,"keydown",this.keyDownHandler,this)}},t.prototype.getDomObject=function(e,t){return null!=t?window.sfBlazor.getDomObject(e,t):null},t.prototype.swipeHandler=function(e){var t=sf.base.closest(e.originalEvent.target,".e-toast:not(.e-toast-container)"),i=this.hideAnimation.effect;sf.base.isNullOrUndefined(t)||("Right"===e.swipeDirection?(this.hideAnimation.effect="SlideRightOut",this.hide("swipe",t)):"Left"===e.swipeDirection&&(this.hideAnimation.effect="SlideLeftOut",this.hide("swipe",t)),this.hideAnimation.effect=i)},t.prototype.delayedToastProgress=function(t){var i=this.progressObj[t],s=i.element;i.timeOutId=window.setTimeout(this.destroyToast.bind(this,s),this.extendedTimeout),i.maxHideTime=parseFloat(this.extendedTimeout+""),i.hideEstimatedTimeOfArrival=(new Date).getTime()+i.maxHideTime,sf.base.isNullOrUndefined(s.querySelector("."+e))||(i.intervalId=setInterval(this.updateProgressBar.bind(this,i),10))},t.prototype.toastHoverAction=function(t){this.dotNetRef.invokeMethodAsync("ClearTimeout",t),clearTimeout(this.progressObj[t].timeOutId),clearInterval(this.progressObj[t].intervalId),this.progressObj[t].hideEstimatedTimeOfArrival=0;var i=this.progressObj[t].element;sf.base.isNullOrUndefined(i.querySelector("."+e))||(this.progressObj[t].progressEle.style.width="0%"),this.dotNetRef.invokeMethodAsync("MouseoverEvent",t)},t.prototype.updateProgressBar=function(e){var t=(e.hideEstimatedTimeOfArrival-(new Date).getTime())/e.maxHideTime*100;t="LTR"===this.progressDirection?100-t:t,e.progressEle.style.width=t+"%"},t.prototype.appendToast=function(e){this.newestOnTop&&0!==this.toastContainer.childElementCount&&this.toastContainer.insertBefore(e,this.toastContainer.children[0]),sf.base.removeClass([e],"e-blazor-toast-hidden")},t.prototype.setAnimation=function(e){var t=this,i=this,s=this.showAnimation,n={duration:s.duration,name:s.effect,timingFunction:s.easing,begin:function(){e.element.style.display=""},end:function(){sf.base.isNullOrUndefined(document.querySelector("#"+i.element.id))||i.dotNetRef.invokeMethodAsync("OpenEvent",e.index,t.getDomObject("element",e.element))}};new sf.base.Animation(n).animate(e.element)},t.prototype.hide=function(e,t){if(!sf.base.isNullOrUndefined(this.toastContainer)&&0!==this.toastContainer.childElementCount)if("string"!==i(t)||"All"!==t){if("string"===i(t)&&"All"!==t){var s=this.toastContainer.querySelector("#toast_"+t);s&&(this.destroyToast(s,e),this.dotNetRef.invokeMethodAsync("DestroyTimer",parseInt(t,10)))}sf.base.isNullOrUndefined(t)&&(t=this.newestOnTop?this.toastContainer.lastElementChild:this.toastContainer.firstElementChild),this.destroyToast(t,e);var n=parseInt(t.id.split("toast_")[1],10);this.dotNetRef.invokeMethodAsync("DestroyTimer",n)}else for(var o=0;o<this.toastContainer.childElementCount;o++)this.destroyToast(this.toastContainer.children[o],e)},t.prototype.destroyToast=function(e,t){if(0!==this.toastContainer.attributes.length){var i=parseInt(e.id.split("toast_")[1],10);this.dotNetRef.invokeMethodAsync("OnCloseEvent",i,t)}},t.prototype.hideAnimationToast=function(e,t){var i=this,s=this.hideAnimation,n={duration:s.duration,name:s.effect,timingFunction:s.easing,end:function(){sf.base.detach(e),i.dotNetRef.invokeMethodAsync("CloseEvent",t)}};new sf.base.Animation({}).animate(e,n)},t.prototype.destroy=function(){for(;this.toastContainer.attributes.length>0;)this.toastContainer.removeAttribute(this.toastContainer.attributes[0].name);for(var e=this.toastContainer.children,t=e.length-1;t>=0;t--)sf.base.detach(e[t]);sf.base.isNullOrUndefined(this.refElement)||sf.base.isNullOrUndefined(this.refElement.parentElement)||(this.refElement.parentElement.insertBefore(this.toastContainer,this.refElement),sf.base.detach(this.refElement),this.refElement=void 0)},t.prototype.keyDownHandler=function(e){if(e.target.classList.contains("e-toast-close-icon")&&(13===e.keyCode||32===e.keyCode)){var t=e.target,i=sf.base.closest(t,".e-toast");this.destroyToast(i,"key")}},t.prototype.updateContext=function(e){sf.base.extend(this,this,e)},t}();return{initialize:function(e){e.dataId&&(new t(e),window.sfBlazor.instances[e.dataId].initialize())},show:function(e){e.rootElement&&(window.sfBlazor.instances[e.dataId].updateContext(e),window.sfBlazor.instances[e.dataId].show(e))},hideAnimationToast:function(e,t){if(e){var i=window.sfBlazor.instances[e].rootElement;window.sfBlazor.instances[e].hideAnimationToast(i.querySelector("#toast_"+t),t)}},hide:function(e,t,i,s){e&&(window.sfBlazor.instances[e].updateContext(i),window.sfBlazor.instances[e].hide(s,t))},appendToast:function(e,t){e&&window.sfBlazor.instances[e].appendToast(t)},destroy:function(e){e&&window.sfBlazor.instances[e].destroy()}}}()},"./modules/sf-toolbar.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Toolbar=function(){"use strict";var e="e-toolbar-items",t="e-blazor-toolbar-items",i="e-toolbar-item",s="e-toolbar-popup",n=function(){function n(e,t,i,s){this.resizeContext=this.resize.bind(this),window.sfBlazor=window.sfBlazor,this.keyConfigs={moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow",popupOpen:"enter",popupClose:"escape",tab:"tab",home:"home",end:"end"},this.element=t,this.dotNetRef=s,this.options=i,this.dataId=e,window.sfBlazor.setCompInstance(this)}return n.prototype.destroy=function(){this.unwireEvents(),this.clearProperty(),this.popObj=null,this.tbarAlign=null},n.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"click",this.clickHandler,this),window.addEventListener("resize",this.resizeContext),this.options.allowKeyboard&&this.wireKeyboardEvent()},n.prototype.wireKeyboardEvent=function(){this.keyModule=new sf.base.KeyboardEvents(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs}),sf.base.EventHandler.add(this.element,"keydown",this.docKeyDown,this),this.updateTabIndex("0")},n.prototype.updateTabIndex=function(e){var t=this.element.querySelector("."+i+":not(.e-overlay ):not(.e-separator ):not(.e-hidden )");if(!sf.base.isNullOrUndefined(t)&&!sf.base.isNullOrUndefined(t.firstElementChild)){var s=t.firstElementChild.getAttribute("data-tabindex");s&&"-1"===s&&"INPUT"!==t.firstElementChild.tagName&&t.firstElementChild.setAttribute("tabindex",e)}},n.prototype.unwireKeyboardEvent=function(){this.keyModule&&(sf.base.EventHandler.remove(this.element,"keydown",this.docKeyDown),this.keyModule.destroy(),this.keyModule=null)},n.prototype.docKeyDown=function(e){if("INPUT"!==e.target.tagName){var t=!sf.base.isNullOrUndefined(this.popObj)&&sf.base.isVisible(this.popObj.element)&&"Extended"!==this.options.overflowMode;9===e.keyCode&&!0===e.target.classList.contains("e-hor-nav")&&t&&this.popObj.hide({name:"FadeOut",duration:100}),(40===e.keyCode||38===e.keyCode||35===e.keyCode||36===e.keyCode)&&e.preventDefault()}},n.prototype.unwireEvents=function(){sf.base.EventHandler.remove(this.element,"click",this.clickHandler),this.destroyScroll(),this.unwireKeyboardEvent(),window.removeEventListener("resize",this.resizeContext),sf.base.EventHandler.remove(document,"scroll",this.docEvent),sf.base.EventHandler.remove(document,"click",this.docEvent)},n.prototype.clearProperty=function(){this.tbarEle=[],this.tbarAlgEle={lefts:[],centers:[],rights:[]}},n.prototype.docEvent=function(e){var t=sf.base.closest(e.target,".e-popup");this.popObj&&sf.base.isVisible(this.popObj.element)&&!t&&"Popup"===this.options.overflowMode&&this.popObj.hide({name:"FadeOut",duration:100})},n.prototype.destroyScroll=function(){this.scrollModule&&(this.tbarAlign&&sf.base.addClass([this.scrollModule.element],"e-tbar-pos"),this.scrollModule.destroy(),this.scrollModule=null)},n.prototype.destroyMode=function(){this.scrollModule&&(sf.base.removeClass([this.scrollModule.element],"e-rtl"),this.destroyScroll()),sf.base.removeClass([this.element],"e-tbar-extended"),sf.base.removeClass([this.element],"e-extended-toolbar");var e=this.element.querySelector(".e-toolbar-multirow");e&&sf.base.removeClass([e],"e-toolbar-multirow"),this.popObj&&this.popupRefresh(this.popObj.element,!0)},n.prototype.elementFocus=function(e){var t=e.firstElementChild;t?(t.focus(),this.activeEleSwitch(e)):e.focus()},n.prototype.clstElement=function(e,t){return e&&this.popObj&&sf.base.isVisible(this.popObj.element)?this.popObj.element.querySelector("."+i):this.element===t||e?this.element.querySelector("."+i+":not(.e-overlay ):not(.e-separator ):not(.e-hidden )"):sf.base.closest(t,"."+i)},n.prototype.keyHandling=function(t,s,n,o,r){var a,l,h,d=this.popObj,c=this.element,p={name:"FadeOut",duration:100};switch(s.action){case"moveRight":if(this.options.isVertical)return;c===n?this.elementFocus(t):o||this.eleFocus(t,"next");break;case"moveLeft":if(this.options.isVertical)return;o||this.eleFocus(t,"previous");break;case"home":case"end":if(t){var u=sf.base.closest(t,".e-popup"),f=this.element.querySelector(".e-toolbar-extended");"Extended"===this.options.overflowMode&&f&&f.classList.contains("e-popup-open")&&(u="end"===s.action?f:null),u?sf.base.isVisible(this.popObj.element)&&(l=[].slice.call(u.children),a="home"===s.action?l[0]:l[l.length-1]):(l=this.element.querySelectorAll("."+e+" ."+i+":not(.e-separator)"),a="home"===s.action?l[0]:l[l.length-1]),a&&this.elementFocus(a)}break;case"moveUp":case"moveDown":if(h="moveUp"===s.action?"previous":"next",this.options.isVertical)"moveUp"===s.action?this.eleFocus(t,"previous"):this.eleFocus(t,"next");else if(d&&sf.base.closest(n,".e-popup")){var g=d.element,m=g.firstElementChild;if("previous"===h&&m===t||"next"===h&&g.lastElementChild===t)return;this.eleFocus(t,h)}else"moveDown"===s.action&&d&&sf.base.isVisible(d.element)&&this.elementFocus(t);break;case"tab":if(!r&&!o){var v=t.firstElementChild;c===n&&(this.activeEle?this.activeEle.focus():(this.activeEleRemove(v),v.focus()))}break;case"popupClose":d&&"Extended"!==this.options.overflowMode&&d.hide(p);break;case"popupOpen":if(!o)return;d&&!sf.base.isVisible(d.element)?(d.element.style.top=c.offsetHeight+"px",d.show({name:"FadeIn",duration:100})):d.hide(p)}},n.prototype.keyActionHandler=function(e){var t=e.target;if("INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!this.element.classList.contains("e-overlay")){e.preventDefault();var i=t.classList.contains("e-hor-nav"),s=t.classList.contains("e-scroll-nav"),n=this.clstElement(i,t);(n||s)&&this.keyHandling(n,e,t,i,s)}},n.prototype.eleContains=function(e){var t=!!e.classList.contains("e-template")&&!sf.base.isNullOrUndefined(e.querySelector(".e-input"));return e.classList.contains("e-separator")||e.classList.contains("e-overlay")||e.getAttribute("disabled")||e.classList.contains("e-hidden")||!sf.base.isVisible(e)||t},n.prototype.eleFocus=function(e,t){var s=Object(e)[t+"ElementSibling"];if(s){if(this.eleContains(s))return void this.eleFocus(s,t);this.elementFocus(s)}else if(this.tbarAlign){var n=Object(e.parentElement)[t+"ElementSibling"];if(sf.base.isNullOrUndefined(n)||0!==n.children.length||(n=Object(n)[t+"ElementSibling"]),!sf.base.isNullOrUndefined(n)&&n.children.length>0)if("next"===t){var o=n.querySelector("."+i);this.eleContains(o)?this.eleFocus(o,t):(o.firstElementChild.focus(),this.activeEleSwitch(o))}else{o=n.lastElementChild;this.eleContains(o)?this.eleFocus(o,t):this.elementFocus(o)}}},n.prototype.clickHandler=function(e){if(!this.element.classList.contains("e-drag-action")){var t=sf.base.closest(e.target,"."+i);if(sf.base.isNullOrUndefined(t)||t.classList.contains("e-overlay")||"true"===t.getAttribute("aria-disabled")){var s,n,o=e.target,r=o.classList,a=this.element,l=sf.base.closest(o,".e-hor-nav");if(l||(l=o),a.children[0].classList.contains("e-hscroll")||a.children[0].classList.contains("e-vscroll")||!r.contains("e-hor-nav")||(r=o.querySelector(".e-icons").classList),(r.contains("e-popup-up-icon")||r.contains("e-popup-down-icon"))&&this.popupClickHandler(a,l,"e-rtl"),!sf.base.isNullOrUndefined(t)||l.classList.contains("e-hor-nav")){sf.base.isNullOrUndefined(t)||(s=parseInt(t.getAttribute("data-index"),10),n={id:t.id});var h={altKey:e.altKey,button:e.button,buttons:e.buttons,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,offsetX:e.offsetX,offsetY:e.offsetY,screenX:e.screenX,screenY:e.screenY,shiftKey:e.shiftKey,type:e.type};this.dotNetRef.invokeMethodAsync("TriggerClickEvent",h,s,n)}}}},n.prototype.popupClickHandler=function(e,t,i){var s=this.popObj;sf.base.isVisible(s.element)?(t.classList.remove("e-nav-active"),s.hide({name:"FadeOut",duration:100})):((e.classList.contains(i)||this.options.isVerticalLeft)&&(e.classList.contains(i)&&(s.enableRtl=!0),s.position={X:"left",Y:"top"}),0!==s.offsetX||e.classList.contains(i)||this.options.isVerticalLeft||(s.enableRtl=!1,s.position={X:"right",Y:"top"}),s.dataBind(),s.refreshPosition(),s.element.style.top=this.getElementOffsetY()+"px","Extended"===this.options.overflowMode&&(s.element.style.left="0px",s.element.style.minHeight="0px"),t.classList.add("e-nav-active"),s.show({name:"FadeIn",duration:100}))},n.prototype.render=function(){this.scrollModule=null,this.popObj=null,this.isExtendedOpen=!1,this.popupPriCount=0;var e=sf.base.formatUnit(this.options.width),t=sf.base.formatUnit(this.options.height);this.element&&("msie"===sf.base.Browser.info.name&&"auto"===this.options.height||sf.base.setStyleAttribute(this.element,{height:t}),sf.base.setStyleAttribute(this.element,{width:e}),this.renderControl(),this.wireEvents())},n.prototype.renderControl=function(){this.tbarAlgEle={lefts:[],centers:[],rights:[]},this.renderItems(),this.renderLayout()},n.prototype.renderLayout=function(){this.renderOverflowMode(),this.tbarAlign&&this.itemPositioning(),this.popObj&&this.popObj.element.childElementCount>1&&this.checkPopupRefresh(this.element,this.popObj.element)&&this.popupRefresh(this.popObj.element,!1),this.separator()},n.prototype.itemsAlign=function(e,s,n){var o,r;this.tbarEle||(this.tbarEle=[]);for(var a=0;a<e.length;a++){var l=this.element.querySelector("."+t);(o=n?s.querySelector("."+i+'[id="'+e[a].id+'"]'):l.querySelector("."+i+'[id="'+e[a].id+'"]'))&&("Show"!==e[a].overflow&&e[a].showAlwaysInPopup&&!o.classList.contains("e-separator")&&this.popupPriCount++,e[a].htmlAttributes&&this.setAttr(e[a].htmlAttributes,o),"Button"===e[a].type&&(sf.base.EventHandler.remove(o,"click",this.itemClick),sf.base.EventHandler.add(o,"click",this.itemClick,this)),-1===this.tbarEle.indexOf(o)&&this.tbarEle.push(o),"MultiRow"===this.options.overflowMode&&n||(this.tbarAlign||this.tbarItemAlign(e[a],s,a),(r=s.querySelector(".e-toolbar-"+e[a].align.toLowerCase()))?(e[a].showAlwaysInPopup&&"Show"!==e[a].overflow||this.tbarAlgEle[(e[a].align+"s").toLowerCase()].push(o),r.appendChild(o)):n||s.appendChild(o)))}},n.prototype.serverItemsRefresh=function(i){var s=this.element,n=s.querySelector("."+t),o=s.querySelector("."+e);(o&&o.children.length>0||n.children.length>0)&&(!o&&s&&s.classList.contains("e-toolbar")&&s.firstElementChild&&(o=sf.base.createElement("div",{className:e}),s.insertBefore(o,s.firstElementChild)),this.itemsAlign(this.options.items,o,i),this.renderLayout(),this.refreshOverflow())},n.prototype.resetServerItems=function(s){if(!s){var n=this.element.querySelector("."+t),o=[].slice.call(sf.base.selectAll("."+e+" ."+i,this.element));sf.base.append(o,n),this.clearProperty()}},n.prototype.changeOrientation=function(){this.options.isVertical?(this.element.classList.add("e-vertical"),this.element.setAttribute("aria-orientation","vertical"),sf.base.setStyleAttribute(this.element,{height:sf.base.formatUnit(this.options.height),width:sf.base.formatUnit(this.options.width)})):(this.element.classList.remove("e-vertical"),this.element.setAttribute("aria-orientation","horizontal"),"auto"!==this.options.height&&"100%"!==this.options.height||(this.element.style.height=this.options.height)),this.destroyMode(),this.refreshOverflow()},n.prototype.initScroll=function(t,i){!this.scrollModule&&this.checkOverflow(t,i[0])&&(this.tbarAlign&&this.element.querySelector("."+e+" .e-toolbar-center").removeAttribute("style"),this.options.isVertical?this.scrollModule=new sf.navigations.VScroll({scrollStep:this.options.scrollStep,enableRtl:this.options.enableRtl},i[0]):this.scrollModule=new sf.navigations.HScroll({scrollStep:this.options.scrollStep,enableRtl:this.options.enableRtl},i[0]),sf.base.removeClass([this.scrollModule.element],"e-tbar-pos"),sf.base.setStyleAttribute(this.element,{overflow:"hidden"}))},n.prototype.itemWidthCal=function(e){var t,s=this,n=0;return[].slice.call(sf.base.selectAll("."+i,e)).forEach((function(e){sf.base.isVisible(e)&&(t=window.getComputedStyle(e),n+=s.options.isVertical?e.offsetHeight:e.offsetWidth,n+=parseFloat(s.options.isVertical?t.marginTop:t.marginRight),n+=parseFloat(s.options.isVertical?t.marginBottom:t.marginLeft))})),n},n.prototype.getScrollCntEle=function(e){var t=this.options.isVertical?".e-vscroll-content":".e-hscroll-content";return e.querySelector(t)},n.prototype.checkOverflow=function(e,t){if(sf.base.isNullOrUndefined(e)||sf.base.isNullOrUndefined(t)||!sf.base.isVisible(e))return!1;var i=this.options.isVertical?e.offsetHeight:e.offsetWidth,s=this.options.isVertical?t.offsetHeight:t.offsetWidth;(this.tbarAlign||this.scrollModule||i===s)&&(s=this.itemWidthCal(this.scrollModule?this.getScrollCntEle(t):t));var n=e.querySelector(".e-hor-nav"),o=e.querySelector(".e-scroll-nav"),r=0;return n?r=this.options.isVertical?n.offsetHeight:n.offsetWidth:o&&(r=this.options.isVertical?2*o.offsetHeight:2*o.offsetWidth),s>i-r},n.prototype.refreshOverflow=function(){this.resize()},n.prototype.toolbarAlign=function(e){this.tbarAlign&&(sf.base.addClass([e],"e-tbar-pos"),this.itemPositioning())},n.prototype.renderOverflowMode=function(){var t=this.element,i=t.querySelector("."+e),s=this.popupPriCount>0;if(t&&t.children.length>0)switch(this.offsetWid=t.offsetWidth,sf.base.removeClass([this.element],"e-toolpop"),"msie"===sf.base.Browser.info.name&&"auto"===this.options.height&&(t.style.height=""),this.options.overflowMode){case"Scrollable":sf.base.isNullOrUndefined(this.scrollModule)&&this.initScroll(t,[].slice.call(t.getElementsByClassName(e)));break;case"Popup":sf.base.addClass([this.element],"e-toolpop"),this.tbarAlign&&this.removePositioning(),(this.checkOverflow(t,i)||s)&&this.setOverflowAttributes(t),this.toolbarAlign(i);break;case"MultiRow":sf.base.addClass([i],"e-toolbar-multirow"),this.checkOverflow(t,i)&&this.tbarAlign&&(this.removePositioning(),sf.base.addClass([i],"e-multirow-pos")),"hidden"===t.style.overflow&&(t.style.overflow=""),"msie"!==sf.base.Browser.info.name&&"auto"===t.style.height||(t.style.height="auto");break;case"Extended":sf.base.addClass([this.element],"e-extended-toolbar"),(this.checkOverflow(t,i)||s)&&(this.tbarAlign&&this.removePositioning(),this.setOverflowAttributes(t)),this.toolbarAlign(i)}},n.prototype.setOverflowAttributes=function(t){this.createPopupEle(t,[].slice.call(sf.base.selectAll("."+e+" ."+i,t)));sf.base.attributes(this.element.querySelector(".e-hor-nav"),{tabindex:"0",role:"button","aria-haspopup":"true","aria-label":"overflow"})},n.prototype.separator=function(){var e=this.element,t=[].slice.call(e.querySelectorAll(".e-separator")),i=e.querySelector(".e-multirow-separator"),s=e.querySelector(".e-extended-separator"),n="MultiRow"===this.options.overflowMode?i:s;null!==n&&("MultiRow"===this.options.overflowMode?n.classList.remove("e-multirow-separator"):"Extended"===this.options.overflowMode&&n.classList.remove("e-extended-separator"));for(var o=0;o<=t.length-1;o++)t[o].offsetLeft<30&&0!==t[o].offsetLeft&&("MultiRow"===this.options.overflowMode?t[o].classList.add("e-multirow-separator"):"Extended"===this.options.overflowMode&&t[o].classList.add("e-extended-separator"))},n.prototype.createPopupEle=function(e,t){var i=e.querySelector(".e-hor-nav"),s=this.options.isVertical;i||this.createPopupIcon(e),i=e.querySelector(".e-hor-nav");var n=s?i.offsetHeight:i.offsetWidth,o=(s?e.offsetHeight:e.offsetWidth)-n;this.element.classList.remove("e-rtl"),sf.base.setStyleAttribute(this.element,{direction:"initial"}),this.checkPriority(e,t,o,!0),this.options.enableRtl&&this.element.classList.add("e-rtl"),this.element.style.removeProperty("direction"),this.createPopup()},n.prototype.pushingPoppedEle=function(t,n,o,r,a){var l=this.element,h=sf.base.selectAll(".e-overflow-show",o),d=0,c=[].slice.call(sf.base.selectAll("."+s,l.querySelector("."+e))),p=0;c.forEach((function(e,i){h=sf.base.selectAll(".e-overflow-show",o),e.classList.contains("e-overflow-show")&&h.length>0?t.tbResize&&h.length>i?(o.insertBefore(e,h[i]),++p):(o.insertBefore(e,o.children[h.length]),++p):e.classList.contains("e-overflow-show")||t.tbResize&&e.classList.contains("e-overflow-hide")&&o.children.length>0&&0===h.length?(o.insertBefore(e,o.firstChild),++p):e.classList.contains("e-overflow-hide")?n.push(e):t.tbResize?(o.insertBefore(e,o.childNodes[d+p]),++d):o.appendChild(e),e.classList.contains("e-separator")?sf.base.setStyleAttribute(e,{display:"",height:a+"px"}):sf.base.setStyleAttribute(e,{display:"",height:r+"px"})})),n.forEach((function(e){o.appendChild(e)}));for(var u=sf.base.selectAll("."+i,l.querySelector("."+e)),f=u.length-1;f>=0;f--){var g=u[f];if(!g.classList.contains("e-separator")||"Extended"===this.options.overflowMode)break;sf.base.setStyleAttribute(g,{display:"none"})}},n.prototype.createPopup=function(){var e,t,n=this.element;"Extended"===this.options.overflowMode&&(t=n.querySelector(".e-separator:not(."+s+")"),e="auto"===n.style.height||""===n.style.height?null:t&&t.offsetHeight);var o,r=n.querySelector("."+i+":not(.e-separator):not(."+s+"):not(.e-hidden)"),a="auto"===n.style.height||""===n.style.height?null:r&&r.offsetHeight;if(n.querySelector("#"+n.id+"_popup.e-toolbar-pop"))o=n.querySelector("#"+n.id+"_popup.e-toolbar-pop");else{var l=sf.base.createElement("div",{id:n.id+"_popup",className:"e-toolbar-pop e-toolbar-extended"}),h=sf.base.createElement("div",{id:n.id+"_popup",className:"e-toolbar-pop"});o="Extended"===this.options.overflowMode?l:h}this.pushingPoppedEle(this,[],o,a,e),this.popupInit(n,o)},n.prototype.getElementOffsetY=function(){return"Extended"===this.options.overflowMode&&"border-box"===window.getComputedStyle(this.element).getPropertyValue("box-sizing")?this.element.clientHeight:this.element.offsetHeight},n.prototype.popupInit=function(e,t){if(this.popObj){var i=this.popObj.element;if("Extended"===this.options.overflowMode){var s=window.getComputedStyle(this.element);this.popObj.width=parseFloat(s.width)+2*parseFloat(s.borderRightWidth),this.popObj.offsetX=0,this.popObj.dataBind()}sf.base.setStyleAttribute(i,{maxHeight:"",display:"block"}),sf.base.setStyleAttribute(i,{maxHeight:i.offsetHeight+"px",display:""})}else{e.appendChild(t),sf.base.setStyleAttribute(this.element,{overflow:""});var n=window.getComputedStyle(this.element),o=new sf.popups.Popup(null,{relateTo:this.element,offsetY:this.options.isVertical?0:this.getElementOffsetY(),enableRtl:this.options.enableRtl,open:this.popupOpen.bind(this),close:this.popupClose.bind(this),collision:{Y:this.options.enableCollision?"flip":"none"},position:this.options.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"}});if("Extended"===this.options.overflowMode&&(o.width=parseFloat(n.width)+2*parseFloat(n.borderRightWidth),o.offsetX=0),o.appendTo(t),sf.base.EventHandler.add(document,"scroll",this.docEvent.bind(this)),sf.base.EventHandler.add(document,"click ",this.docEvent.bind(this)),o.element.style.maxHeight=o.element.offsetHeight+"px",this.options.isVertical&&(o.element.style.visibility="hidden"),this.isExtendedOpen){var r=this.element.querySelector(".e-hor-nav");r.classList.add("e-nav-active"),sf.base.classList(r.firstElementChild,["e-popup-up-icon"],["e-popup-down-icon"]),this.element.querySelector(".e-toolbar-extended").classList.add("e-popup-open")}else o.hide();this.popObj=o}},n.prototype.tbarPopupHandler=function(e){"Extended"===this.options.overflowMode&&(e?sf.base.addClass([this.element],"e-tbar-extended"):sf.base.removeClass([this.element],"e-tbar-extended"))},n.prototype.popupOpen=function(e){var t=this.popObj;this.options.isVertical||(t.offsetY=this.getElementOffsetY(),t.dataBind());var i=this.popObj.element,s=this.popObj.element.parentElement,n=s.querySelector(".e-hor-nav");n.setAttribute("aria-expanded","true"),sf.base.setStyleAttribute(t.element,{height:"auto",maxHeight:""}),t.element.style.maxHeight=t.element.offsetHeight+"px","Extended"===this.options.overflowMode&&(t.element.style.left="",t.element.style.minHeight="");var o=i.offsetTop+i.offsetHeight+sf.popups.calculatePosition(s).top,r=n.firstElementChild;n.classList.add("e-nav-active"),sf.base.classList(r,["e-popup-up-icon"],["e-popup-down-icon"]),this.tbarPopupHandler(!0);var a=sf.base.isNullOrUndefined(window.scrollY)?0:window.scrollY;if(!this.options.isVertical&&window.innerHeight+a<o&&this.element.offsetTop<i.offsetHeight){var l=i.offsetHeight-(o-window.innerHeight-a+5);t.height=l+"px";for(var h=0;h<=i.childElementCount;h++){var d=i.children[h];if(d.offsetTop+d.offsetHeight>l){l=d.offsetTop;break}}sf.base.setStyleAttribute(t.element,{maxHeight:l+"px"})}else if(this.options.isVertical){var c=this.element.getBoundingClientRect();sf.base.setStyleAttribute(t.element,{maxHeight:c.top+this.element.offsetHeight+"px",bottom:0,visibility:""})}if(t){var p=i.getBoundingClientRect();p.right>document.documentElement.clientWidth&&p.width>s.getBoundingClientRect().width&&(t.collision={Y:"none"},t.dataBind()),t.refreshPosition()}},n.prototype.popupClose=function(e){var t=this.element.querySelector(".e-hor-nav");t.setAttribute("aria-expanded","false");var i=t.firstElementChild;t.classList.remove("e-nav-active"),sf.base.classList(i,["e-popup-down-icon"],["e-popup-up-icon"]),this.tbarPopupHandler(!1)},n.prototype.checkPriority=function(e,t,n,o){for(var r,a=this.popupPriCount>0,l=n,h=0,d=0,c=0,p=function(e,t){var i=!1;return t.forEach((function(t){e.classList.contains(t)&&(i=!0)})),i},u=t.length-1;u>=0;u--){var f=void 0,g=window.getComputedStyle(t[u]);this.options.isVertical?(f=parseFloat(g.marginTop),f+=parseFloat(g.marginBottom)):(f=parseFloat(g.marginRight),f+=parseFloat(g.marginLeft));var m=t[u]===this.tbarEle[0];m&&(this.tbarEleMrgn=f),r=this.options.isVertical?t[u].offsetHeight:t[u].offsetWidth;var v=m?r+f:r;if(p(t[u],["e-popup-alone"])&&a&&(t[u].classList.add(s),this.options.isVertical?sf.base.setStyleAttribute(t[u],{display:"none",minHeight:v+"px"}):sf.base.setStyleAttribute(t[u],{display:"none",minWidth:v+"px"}),c++),this.options.isVertical?t[u].offsetTop+t[u].offsetHeight+f>n:t[u].offsetLeft+t[u].offsetWidth+f>n){if(t[u].classList.contains("e-separator")){if("Extended"===this.options.overflowMode){if(d===c)p(b=t[u],["e-separator","e-ignore"])&&(t[u].classList.add(s),c++);d++}else if("Popup"===this.options.overflowMode){var b;if(h>0&&d===c)p(b=t[u+d+(h-1)],["e-separator","e-ignore"])&&sf.base.setStyleAttribute(b,{display:"none"});h++,d=0,c=0}}else d++;t[u].classList.contains("e-overflow-show")&&o||p(t[u],["e-separator","e-ignore"])?n-=(this.options.isVertical?t[u].offsetHeight:t[u].offsetWidth)+f:(t[u].classList.add(s),this.options.isVertical?sf.base.setStyleAttribute(t[u],{display:"none",minHeight:v+"px"}):sf.base.setStyleAttribute(t[u],{display:"none",minWidth:v+"px"}),c++)}}if(o){var y=sf.base.selectAll("."+i+":not(."+s+")",this.element);this.checkPriority(e,y,l,!1)}},n.prototype.createPopupIcon=function(e){var t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav e-hor-nav");i="Extended"===this.options.overflowMode?i+" e-expended-nav":i;var s=sf.base.createElement("div",{id:t,className:i});"msie"!==sf.base.Browser.info.name&&"edge"!==sf.base.Browser.info.name||s.classList.add("e-ie-align");var n=sf.base.createElement("div",{className:"e-popup-down-icon e-icons"});s.appendChild(n),s.setAttribute("tabindex","0"),s.setAttribute("role","button"),e.appendChild(s)},n.prototype.tbarPriRef=function(e,t,i,n,o,r,a,l){var h=l,d=this.popObj.element,c=sf.base.selectAll("."+s+":not(.e-overflow-show)",d).length,p=function(e,t){return e.classList.contains(t)};if(0===sf.base.selectAll(".e-toolbar-item:not(.e-separator):not(.e-overflow-show)",e).length){var u=e.children[t-(t-i)-1],f=!sf.base.isNullOrUndefined(u)&&p(u,"e-ignore");if(!sf.base.isNullOrUndefined(u)&&p(u,"e-separator")&&!sf.base.isVisible(u)||f){u.style.display="inherit";var g=u.offsetWidth+2*parseFloat(window.getComputedStyle(u).marginRight),m=u.previousElementSibling;r+g<a||o?(e.insertBefore(n,e.children[t+h-(t-i)]),sf.base.isNullOrUndefined(m)||(m.style.display="")):m.classList.contains("e-separator")&&(m.style.display="none"),u.style.display=""}else e.insertBefore(n,e.children[t+h-(t-i)])}else e.insertBefore(n,e.children[t+h-c])},n.prototype.popupRefresh=function(t,i){var s=this,n=this.element,o=this.options.isVertical,r=n.querySelector(".e-hor-nav"),a=n.querySelector("."+e);if(!sf.base.isNullOrUndefined(r)&&!sf.base.isNullOrUndefined(a)){var l;a.removeAttribute("style"),t.style.display="block",l=o?n.offsetHeight-(r.offsetHeight+a.offsetHeight):n.offsetWidth-(r.offsetWidth+a.offsetWidth);var h=0;[].slice.call(t.children).forEach((function(e){h+=s.popupEleWidth(e),sf.base.setStyleAttribute(e,{position:""})})),l+(o?r.offsetHeight:r.offsetWidth)>h&&0===this.popupPriCount&&(i=!0),this.popupEleRefresh(l,t,i),t.style.display="",0===t.children.length&&r&&this.popObj&&(sf.base.detach(r),r=null,this.popObj.destroy(),sf.base.detach(this.popObj.element),this.popObj=null)}},n.prototype.ignoreEleFetch=function(e,t){var i=[].slice.call(t.querySelectorAll(".e-ignore")),s=[],n=0;return i.length>0?(i.forEach((function(e){s.push([].slice.call(t.children).indexOf(e))})),s.forEach((function(t){t<=e&&n++})),n):0},n.prototype.checkPopupRefresh=function(t,i){i.style.display="block";var s=this.popupEleWidth(i.firstElementChild);i.firstElementChild.style.removeProperty("Position");var n=t.offsetWidth-t.querySelector(".e-hor-nav").offsetWidth,o=t.querySelector("."+e).offsetWidth;return i.style.removeProperty("display"),n>s+o},n.prototype.popupEleWidth=function(e){e.style.position="absolute";var t=this.options.isVertical?e.offsetHeight:e.offsetWidth,i=e.querySelector(".e-tbar-btn-text");if(e.classList.contains("e-tbtn-align")||e.classList.contains("e-popup-text")){var s=e.children[0];!sf.base.isNullOrUndefined(i)&&e.classList.contains("e-popup-text")?i.style.display="none":!sf.base.isNullOrUndefined(i)&&e.classList.contains("e-toolbar-text")&&(i.style.display="block"),s.style.minWidth="0%",t=parseFloat(this.options.isVertical?e.style.minHeight:e.style.minWidth),s.style.minWidth="",s.style.minHeight="",sf.base.isNullOrUndefined(i)||(i.style.display="")}return t},n.prototype.popupEleRefresh=function(t,i,n){for(var o,r,a=this.popupPriCount>0,l=this.tbarEle,h=this.element.querySelector("."+e),d=0,c=function(i){if(i.classList.contains("e-popup-alone")&&a&&!n)return"continue";var c=p.popupEleWidth(i);if(i===p.tbarEle[0]&&(c+=p.tbarEleMrgn),i.style.position="",!(c<t||n))return"break";if(sf.base.setStyleAttribute(i,{minWidth:"",height:"",minHeight:""}),i.classList.contains("e-overflow-hide")||i.classList.remove(s),r=p.tbarEle.indexOf(i),p.tbarAlign){var u=p.options.items[r].align;r=p.tbarAlgEle[(u+"s").toLowerCase()].indexOf(i),l=p.tbarAlgEle[(u+"s").toLowerCase()],h=p.element.querySelector("."+e+" .e-toolbar-"+u.toLowerCase())}var f=0;"Extended"!==p.options.overflowMode&&l.slice(0,r).forEach((function(e){sf.base.isNullOrUndefined(e.classList)||!e.classList.contains("e-overflow-show")&&!e.classList.contains("e-separator")||(e.classList.contains("e-separator")&&(e.style.display="",t-=e.offsetWidth),f++)})),d=p.ignoreEleFetch(r,h),i.classList.contains("e-overflow-show")?(p.tbarPriRef(h,r,f,i,n,c,t,d),t-=i.offsetWidth):0===r?(h.insertBefore(i,h.firstChild),t-=i.offsetWidth):(o=sf.base.selectAll(".e-overflow-show",p.popObj.element).length,h.insertBefore(i,h.children[r+d-o]),t-=i.offsetWidth),i.style.height=""},p=this,u=0,f=[].slice.call(i.children);u<f.length;u++){if("break"===c(f[u]))break}this.checkOverflow(this.element,this.element.getElementsByClassName(e)[0])&&!n&&this.renderOverflowMode()},n.prototype.removePositioning=function(){var t=this.element.querySelector("."+e);if(!sf.base.isNullOrUndefined(t)&&t.classList.contains("e-tbar-pos")){sf.base.removeClass([t],"e-tbar-pos");var i=[].slice.call(t.childNodes);i[1].removeAttribute("style"),i[2].removeAttribute("style")}},n.prototype.refreshPositioning=function(){var t=this.element.querySelector("."+e);sf.base.addClass([t],"e-tbar-pos"),this.itemPositioning()},n.prototype.itemPositioning=function(){var t,i=this.element.querySelector("."+e);if(!sf.base.isNullOrUndefined(i)&&i.classList.contains("e-tbar-pos")){var s,n=this.element.querySelector(".e-hor-nav");if(this.scrollModule){var o=this.options.isVertical?"e-vscroll-content":"e-hscroll-content";s=[].slice.call(i.querySelector("."+o).children)}else s=[].slice.call(i.childNodes);t=this.options.isVertical?s[0].offsetHeight+s[2].offsetHeight:s[0].offsetWidth+s[2].offsetWidth;var r=this.options.isVertical?this.element.offsetHeight:this.element.offsetWidth;if(n){r-=this.options.isVertical?n.offsetHeight:n.offsetWidth;var a=(this.options.isVertical?n.offsetHeight:n.offsetWidth)+"px";s[2].removeAttribute("style"),this.options.isVertical?this.options.enableRtl?s[2].style.top=a:s[2].style.bottom=a:this.options.enableRtl?s[2].style.left=a:s[2].style.right=a}if(!(r<=t)){var l=(r-t-(this.options.isVertical?s[1].offsetHeight:s[1].offsetWidth))/2;s[1].removeAttribute("style");var h=(this.options.isVertical?s[0].offsetHeight:s[0].offsetWidth)+l+"px";this.options.isVertical?this.options.enableRtl?s[1].style.marginBottom=h:s[1].style.marginTop=h:this.options.enableRtl?s[1].style.marginRight=h:s[1].style.marginLeft=h}}},n.prototype.tbarItemAlign=function(e,t,i){var s=this;if(!e.showAlwaysInPopup||"Show"===e.overflow){var n=[];if(n.push(sf.base.createElement("div",{className:"e-toolbar-left"})),n.push(sf.base.createElement("div",{className:"e-toolbar-center"})),n.push(sf.base.createElement("div",{className:"e-toolbar-right"})),0===i&&"Left"!==e.align)n.forEach((function(e){t.appendChild(e)})),this.tbarAlign=!0,sf.base.addClass([t],"e-tbar-pos");else if("Left"!==e.align){var o=t.childNodes,r=n[0];[].slice.call(o).forEach((function(e){s.tbarAlgEle.lefts.push(e),r.appendChild(e)})),t.appendChild(r),t.appendChild(n[1]),t.appendChild(n[2]),this.tbarAlign=!0,sf.base.addClass([t],"e-tbar-pos")}}},n.prototype.renderItems=function(){var t=this.element,i=this.options.items;if(t&&i.length>0){var s=t.querySelector("."+e);this.itemsAlign(i,s,!0)}},n.prototype.setAttr=function(e,t){for(var i,s=Object.keys(e),n=0;n<s.length;n++)"class"===(i=s[n])?sf.base.addClass([t],e[i]):t.setAttribute(i,e[i])},n.prototype.getDataTabindex=function(e){return sf.base.isNullOrUndefined(e.getAttribute("data-tabindex"))?"-1":e.getAttribute("data-tabindex")},n.prototype.itemClick=function(e){this.activeEleSwitch(e.currentTarget)},n.prototype.activeEleSwitch=function(e){this.activeEleRemove(e.firstElementChild),this.activeEle.focus()},n.prototype.activeEleRemove=function(e){sf.base.isNullOrUndefined(this.activeEle)||this.activeEle.setAttribute("tabindex",this.getDataTabindex(this.activeEle)),this.activeEle=e,"-1"===this.getDataTabindex(this.activeEle)&&(sf.base.isNullOrUndefined(this.trgtEle)&&!e.parentElement.classList.contains("e-template")?(this.updateTabIndex("-1"),e.removeAttribute("tabindex")):this.activeEle.setAttribute("tabindex",this.getDataTabindex(this.activeEle)))},n.prototype.resize=function(){var t=this.element;this.tbResize=!0,this.tbarAlign&&this.itemPositioning(),this.popObj&&"Popup"===this.options.overflowMode&&this.popObj.hide();var i=this.checkOverflow(t,t.getElementsByClassName(e)[0]);if(!i){this.destroyScroll();var s=t.querySelector("."+e);sf.base.isNullOrUndefined(s)||(sf.base.removeClass([s],"e-multirow-pos"),this.tbarAlign&&sf.base.addClass([s],"e-tbar-pos"))}if(!i||!this.scrollModule||this.offsetWid!==t.offsetWidth){if((this.offsetWid>t.offsetWidth||i)&&this.renderOverflowMode(),this.popObj){if("Extended"===this.options.overflowMode){var n=window.getComputedStyle(this.element);this.popObj.width=parseFloat(n.width)+2*parseFloat(n.borderRightWidth)}this.tbarAlign&&this.removePositioning(),this.popupRefresh(this.popObj.element,!1),this.tbarAlign&&this.refreshPositioning()}this.offsetWid=t.offsetWidth,this.tbResize=!1,this.separator()}},n.prototype.extendedOpen=function(){var e=this.element.querySelector(".e-toolbar-extended");"Extended"===this.options.overflowMode&&e&&(this.isExtendedOpen=e.classList.contains("e-popup-open"))},n.prototype.updateHideEleTabIndex=function(e,t,i,s){for(var n=s[++i];n;){if(!this.eleContains(n)){var o=n.firstElementChild.getAttribute("data-tabindex");t||"-1"!==o?o!==n.firstElementChild.getAttribute("tabindex")&&n.firstElementChild.setAttribute("tabindex",o):n.firstElementChild.setAttribute("tabindex","0");break}n=s[++i]}},n.prototype.disable=function(e){var t=this.element;e?t.classList.add("e-overlay"):t.classList.remove("e-overlay"),this.activeEle&&this.activeEle.setAttribute("tabindex",this.activeEle.getAttribute("data-tabindex")),this.scrollModule&&this.scrollModule.disable(e),this.popObj&&(sf.base.isVisible(this.popObj.element)&&"Extended"!==this.options.overflowMode&&this.popObj.hide(),t.querySelector("#"+t.id+"_nav").setAttribute("tabindex",e?"-1":"0"))},n.prototype.setCssClass=function(e){this.extendedOpen(),this.options.cssClass&&sf.base.removeClass([this.element],this.options.cssClass.split(" ")),e&&sf.base.addClass([this.element],e.split(" ")),this.options.cssClass=e},n}();return{initialize:function(e,t,i,s){0===i.scrollStep&&(i.scrollStep=null),new n(e,t,i,s).render()},hidePopup:function(e,t){var s=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(s)&&!sf.base.isNullOrUndefined(s.element)&&!sf.base.isNullOrUndefined(s.popObj)){var n=s.element.querySelector("."+i+'[data-index="'+t+'"]');sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(sf.base.closest(n,".e-toolbar-pop"))||s.popObj.hide({name:"FadeOut",duration:100})}},setCssClass:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||i.setCssClass(t)},setWidth:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i)&&!sf.base.isNullOrUndefined(i.element)){i.options.width=t,i.extendedOpen();var s=i.element.offsetWidth;sf.base.setStyleAttribute(i.element,{width:sf.base.formatUnit(t)}),i.renderOverflowMode(),i.popObj&&s<i.element.offsetWidth&&i.popupRefresh(i.popObj.element,!1)}},setHeight:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options.height=t,i.extendedOpen(),sf.base.setStyleAttribute(i.element,{height:sf.base.formatUnit(t)}))},setOverflowMode:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options.overflowMode=t,i.extendedOpen(),i.destroyMode(),i.renderOverflowMode(),i.options.enableRtl&&sf.base.addClass([i.element],"e-rtl"),i.refreshOverflow())},setEnableRTL:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options.enableRtl=t,i.extendedOpen(),t?sf.base.addClass([i.element],"e-rtl"):sf.base.removeClass([i.element],"e-rtl"),sf.base.isNullOrUndefined(i.scrollModule)||(t?sf.base.addClass([i.scrollModule.element],"e-rtl"):sf.base.removeClass([i.scrollModule.element],"e-rtl")),sf.base.isNullOrUndefined(i.popObj)||(t?sf.base.addClass([i.popObj.element],"e-rtl"):sf.base.removeClass([i.popObj.element],"e-rtl")),i.tbarAlign&&i.itemPositioning())},setScrollStep:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options.scrollStep=t,i.extendedOpen(),i.scrollModule&&(i.scrollModule.scrollStep=t))},setEnableCollision:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options.enableCollision=t,i.extendedOpen(),i.popObj&&(i.popObj.collision={Y:t?"flip":"none"}))},setAllowKeyboard:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options.allowKeyboard=t,i.extendedOpen(),i.unwireKeyboardEvent(),t&&i.wireKeyboardEvent())},serverItemsRerender:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(s)&&!sf.base.isNullOrUndefined(s.element)){var n=document.activeElement;s.options.items=t,s.extendedOpen(),s.destroyMode(),s.resetServerItems(i),s.serverItemsRefresh(i),document.activeElement!=n&&n.focus()}},hideItem:function(e,t,s){var n=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(n)&&!sf.base.isNullOrUndefined(n.element)){n.options.items=t;var o=[].slice.call(sf.base.selectAll("."+i,this.element)),r=o[parseInt(s.toString(),10)];r&&(t[s].visible?r.classList.contains("e-separator")||n.updateHideEleTabIndex(r,t[s].visible,s,o):r.classList.contains("e-separator")||(sf.base.isNullOrUndefined(r.firstElementChild.getAttribute("tabindex"))||"-1"!==r.firstElementChild.getAttribute("tabindex"))&&n.updateHideEleTabIndex(r,t[s].visible,s,o)),n.refreshOverflow()}},disable:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||i.disable(t)},refreshOverflow:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(t.element)||t.refreshOverflow()},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(t.element)||t.destroy()},refresh:function(e,t){var i=window.sfBlazor.getCompInstance(e);0===t.scrollStep&&(t.scrollStep=null),sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options=t,i.destroyMode(),i.resetServerItems(!1),i.serverItemsRefresh(!1))}}}()},"./modules/sf-tooltip.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Tooltip=function(){"use strict";var e="e-arrow-tip",t="e-popup-open",i="Top",s=function(){function s(e,t,i,s,n){this.popupObj=null,this.isPositionUpdate=!1,this.isOffsetXUpdate=!1,this.isOffsetYUpdate=!1,this.tipClass="e-tip-bottom",this.tooltipPositionX="Center",this.tooltipPositionY="Top",this.isContiniousOpen=!1,this.isRestrictUpdate=!1,this.showTimer=0,this.hideTimer=0,this.contentTargetValue=null,this.contentEvent=null,this.contentAnimation=null,this.beforeCloseAnimation=null,this.isPopupHidden=!0,this.isMultiTarget=!1,this.mouseAction=!1,this.mouseMoveEvent=null,this.mouseMoveTarget=null,this.containerElement=null,this.isBodyContainer=!0,this.isContentUpdated=!1,this.element=t,this.dataId=e,this.properties=s,this.dotnetRef=i,sf.base.isNullOrUndefined(this.element)||(this.ctrlId=this.element.id,window.sfBlazor.setCompInstance(this),this.eventList=n)}return s.prototype.getTriggerList=function(e){return"Auto"===e&&(e=sf.base.Browser.isDevice?"Hover":"Hover Focus"),e.split(" ")},s.prototype.formatPosition=function(){var e,t;0===this.properties.position.indexOf("Top")||0===this.properties.position.indexOf("Bottom")?(e=this.properties.position.split(/(?=[A-Z])/),this.tooltipPositionY=e[0],this.tooltipPositionX=e[1]):(t=this.properties.position.split(/(?=[A-Z])/),this.tooltipPositionX=t[0],this.tooltipPositionY=t[1])},s.prototype.getTargetList=function(e){var t=[];return null===e||""===e?t.push(this.element):(t=[].slice.call(sf.base.selectAll(e,this.element)))&&0===t.length&&(t=[].slice.call(sf.base.selectAll(e,document))),t},s.prototype.wireEvents=function(e){for(var t=this.getTriggerList(e),i=this.getTargetList(this.properties.target),s=0,n=t;s<n.length;s++){var o=n[s];if("Custom"===o)return;for(var r=0,a=i;r<a.length;r++){var l=a[r];"Focus"===o&&sf.base.EventHandler.add(l,"focus",this.targetHover,this),"Click"===o&&sf.base.EventHandler.add(l,sf.base.Browser.touchStartEvent,this.targetClick,this),"Hover"===o&&(sf.base.Browser.isDevice?(this.touchModule=new sf.base.Touch(l,{tapHoldThreshold:500,tapHold:this.tapHoldHandler.bind(this)}),sf.base.EventHandler.add(l,sf.base.Browser.touchEndEvent,this.touchEndHandler,this)):(sf.base.EventHandler.add(l,"mouseover",this.targetHover,this),this.properties.isSticky||sf.base.EventHandler.add(l,"mouseleave",this.onMouseOut,this)))}}sf.base.EventHandler.add(document,"touchend",this.touchEnd,this),sf.base.EventHandler.add(document,"scroll wheel",this.scrollHandler,this),sf.base.EventHandler.add(document,"keydown",this.keyDown,this),window.addEventListener("resize",this.onWindowResize.bind(this))},s.prototype.onWindowResize=function(){this.isHidden()||this.reposition(this.findTarget())},s.prototype.wireMouseEvents=function(e,t){this.tooltipEle&&(this.properties.isSticky||("focus"===e.type&&sf.base.EventHandler.add(t,"blur",this.onMouseOut,this),this.properties.closeDelay&&(sf.base.EventHandler.add(this.tooltipEle,"mouseenter",this.tooltipHover,this),sf.base.EventHandler.add(this.tooltipEle,"mouseleave",this.tooltipMouseOut,this))),this.properties.mouseTrail&&sf.base.EventHandler.add(t,"mousemove touchstart mouseenter",this.onMouseMove,this))},s.prototype.unwireEvents=function(e){for(var t=this.getTriggerList(e),i=this.getTargetList(this.properties.target),s=0,n=t;s<n.length;s++){var o=n[s];if("Custom"===o)return;for(var r=0,a=i;r<a.length;r++){var l=a[r];"Focus"===o&&sf.base.EventHandler.remove(l,"focus",this.targetHover),"Click"===o&&sf.base.EventHandler.remove(l,sf.base.Browser.touchStartEvent,this.targetClick),"Hover"===o&&(sf.base.Browser.isDevice?(this.touchModule&&this.touchModule.destroy(),sf.base.EventHandler.remove(l,sf.base.Browser.touchEndEvent,this.touchEndHandler)):(sf.base.EventHandler.remove(l,"mouseover",this.targetHover),this.properties.isSticky||sf.base.EventHandler.remove(l,"mouseleave",this.onMouseOut)))}}sf.base.EventHandler.remove(document,"touchend",this.touchEnd),sf.base.EventHandler.remove(document,"scroll wheel",this.scrollHandler),sf.base.EventHandler.remove(document,"keydown",this.keyDown),window.removeEventListener("resize",this.onWindowResize.bind(this))},s.prototype.unwireMouseEvents=function(e){if(!this.properties.isSticky){for(var t=0,i=this.getTriggerList(this.properties.opensOn);t<i.length;t++){"Focus"===i[t]&&sf.base.EventHandler.remove(e,"blur",this.onMouseOut)}this.properties.closeDelay&&(sf.base.EventHandler.remove(e,"mouseenter",this.tooltipHover),sf.base.EventHandler.remove(e,"mouseleave",this.tooltipMouseOut))}this.properties.mouseTrail&&sf.base.EventHandler.remove(e,"mousemove touchstart mouseenter",this.onMouseMove)},s.prototype.findTarget=function(){return sf.base.select('[data-tooltip-id= "'+this.ctrlId+'_content"]',document)},s.prototype.addDescribedBy=function(e,t){var i=(sf.base.getAttributeOrDefault(e,"aria-describedby",null)||"").split(/\s+/);i.indexOf(t)<0&&i.push(t),sf.base.attributes(e,{"aria-describedby":i.join(" ").trim(),"data-tooltip-id":t})},s.prototype.removeDescribedBy=function(e){var t=sf.base.getAttributeOrDefault(e,"data-tooltip-id",null),i=(sf.base.getAttributeOrDefault(e,"aria-describedby",null)||"").split(/\s+/),s=i.indexOf(t);-1!==s&&i.splice(s,1),e.removeAttribute("data-tooltip-id");var n=i.join(" ").trim();n?sf.base.attributes(e,{"aria-describedby":n}):e.removeAttribute("aria-describedby")},s.prototype.clear=function(){if(this.tooltipEle&&this.isPopupHidden&&(sf.base.removeClass([this.tooltipEle],"e-popup-close"),sf.base.addClass([this.tooltipEle],t)),this.isPopupHidden){if(this.popupObj&&this.popupObj.destroy(),this.tooltipEle){sf.base.setStyleAttribute(this.tooltipEle,{display:"none"});var e=document.getElementById(this.ctrlId+"_content_placeholder");e&&e.appendChild(this.tooltipEle),document.body.contains(this.element)&&this.dotnetRef.invokeMethodAsync("CreateTooltip",!1).catch((function(){}))}this.tooltipEle=null,this.popupObj=null}},s.prototype.tapHoldHandler=function(e){this.targetHover(e.originalEvent)},s.prototype.touchEndHandler=function(e){this.properties.isSticky||this.hideTooltip(this.properties.animation.close)},s.prototype.targetClick=function(e){var t=this.properties.target?sf.base.closest(e.target,this.properties.target):this.element;sf.base.isNullOrUndefined(t)||(null===sf.base.getAttributeOrDefault(t,"data-tooltip-id",null)?this.targetHover(e):this.properties.isSticky||this.hideTooltip(this.properties.animation.close,e,t))},s.prototype.restoreElement=function(e){this.unwireMouseEvents(e),sf.base.isNullOrUndefined(sf.base.getAttributeOrDefault(e,"data-content",null))||e.removeAttribute("data-content"),this.removeDescribedBy(e)},s.prototype.checkForOpen=function(e,t,i){if(null==t||sf.base.isNullOrUndefined(i))return!1;var s=this.properties.target?sf.base.closest(i.target,this.properties.target):this.element;if(null==s)return!1;var n=!0;return"Hover"===e?n=sf.base.matches(s,":hover"):"Auto"===e?n=sf.base.matches(s,":hover")||sf.base.matches(s,":focus"):"Focus"===e?n=sf.base.matches(s,":focus"):"Click"!==e&&"Custom"!==e||(n=null===sf.base.getAttributeOrDefault(s,"data-tooltip-id",null)),n},s.prototype.targetHover=function(e){if(this.checkForOpen(this.properties.opensOn,this.element,e)){var t=this.properties.target?sf.base.closest(e.target,this.properties.target):this.element,i=t.getAttribute("title");if(t.title="",""!==i&&sf.base.attributes(t,{"sf-tooltip":i}),!sf.base.isNullOrUndefined(t)&&null===sf.base.getAttributeOrDefault(t,"data-tooltip-id",null)){if(this.isMultiTarget=this.getTargetList(this.properties.target).length>1,this.properties.target&&this.isMultiTarget&&e&&!sf.base.isNullOrUndefined(e.target)&&!sf.base.isNullOrUndefined(e.relatedTarget))if(sf.base.closest(e.target,this.properties.target)==sf.base.closest(e.relatedTarget,this.properties.target))return;for(var s=0,n=[].slice.call(sf.base.selectAll('[data-tooltip-id= "'+this.ctrlId+'_content"]',document));s<n.length;s++){var o=n[s];this.restoreElement(o)}this.mouseAction=!1,this.showTooltip(t,this.properties.animation.open,e)}}},s.prototype.isHidden=function(){return!this.tooltipEle||!this.tooltipEle.classList.contains(t)},s.prototype.mouseMoveBeforeOpen=function(e){this.mouseMoveEvent=e},s.prototype.mouseMoveBeforeRemove=function(){this.mouseMoveTarget&&sf.base.EventHandler.remove(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen)},s.prototype.showTooltip=function(e,t,i){var s=this;this.isContentUpdated=!1,this.mouseAction=!1,this.clear(),clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.properties.mouseTrail&&this.properties.openDelay&&(this.mouseMoveBeforeRemove(),this.mouseMoveTarget=e,sf.base.EventHandler.add(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen,this));this.showTimer=setTimeout((function(){s.isContiniousOpen=!sf.base.isNullOrUndefined(s.tooltipEle),s.tooltipEventArgs={type:i?i.type.toString():null,cancel:!1,target:s.getDomObject("target",e),event:i||null,hasText:s.hasText(),element:s.getDomObject("tooltipElement",s.tooltipEle),isInteracted:!sf.base.isNullOrUndefined(i),name:"beforeRender",left:i?s.getXYValue(i,"x"):null,top:i?s.getXYValue(i,"y"):null},s.contentTargetValue=e,s.contentEvent=i,s.contentAnimation=t,s.isRestrictUpdate=s.eventList.beforeRender&&!s.isHidden(),s.eventList.beforeRender?s.triggerEvent("TriggerBeforeRenderEvent",s.tooltipEventArgs):s.beforeRenderCallBack(!1)}),this.properties.openDelay)},s.prototype.triggerEvent=function(e,t){document.body.contains(this.element)&&this.dotnetRef.invokeMethodAsync(e,JSON.stringify(t)).catch((function(){}))},s.prototype.beforeRenderCallBack=function(e){e?(this.isPopupHidden=!0,this.clear(),this.mouseMoveBeforeRemove()):(this.isPopupHidden=!1,sf.base.isNullOrUndefined(this.tooltipEle)?document.body.contains(this.element)&&this.dotnetRef.invokeMethodAsync("CreateTooltip",!0).catch((function(){})):this.isContiniousOpen&&!this.isRestrictUpdate?this.contentUpdated():this.isRestrictUpdate=!1)},s.prototype.checkCollision=function(e,t,s){var n={left:t,top:s,position:this.properties.position,horizontal:this.tooltipPositionX,vertical:this.tooltipPositionY},o=sf.popups.isCollide(this.tooltipEle,this.checkCollideTarget(),t,s);return o.length>0&&(n.horizontal=o.indexOf("left")>=0?"Right":o.indexOf("right")>=0?"Left":this.tooltipPositionX,n.vertical=o.indexOf("top")>=0?"Bottom":o.indexOf("bottom")>=0?i:this.tooltipPositionY),n},s.prototype.checkCollideTarget=function(){return!this.properties.windowCollision&&this.properties.target?this.element:null},s.prototype.calculateElementPosition=function(e,t){return[this.isBodyContainer?e.left+t.left:e.left-this.containerElement.offsetLeft+t.left+window.pageXOffset+this.containerElement.scrollLeft,this.isBodyContainer?e.top+t.top:e.top-this.containerElement.offsetTop+t.top+window.pageYOffset+this.containerElement.scrollTop]},s.prototype.collisionFlipFit=function(t,s,n){var o=this.checkCollision(t,s,n),r=o.position;this.tooltipPositionY!==o.vertical&&(r=0===this.properties.position.indexOf("Bottom")||0===this.properties.position.indexOf("Top")?o.vertical+this.tooltipPositionX:this.tooltipPositionX+o.vertical),this.tooltipPositionX!==o.horizontal&&(0===r.indexOf("Left")&&(o.vertical="LeftTop"===r||"LeftCenter"===r?i:"Bottom",r=o.vertical+"Left"),0===r.indexOf("Right")&&(o.vertical="RightTop"===r||"RightCenter"===r?i:"Bottom",r=o.vertical+"Right"),o.horizontal=this.tooltipPositionX),this.tooltipEventArgs={type:null,cancel:!1,target:this.getDomObject("target",t),event:null,isInteracted:!1,hasText:this.hasText(),element:this.getDomObject("tooltipElement",this.tooltipEle),collidedPosition:r,name:"beforeCollision",left:null,top:null},this.isRestrictUpdate=this.eventList.beforeCollision&&!this.isHidden(),this.eventList.beforeCollision&&this.triggerEvent("TriggerBeforeCollisionEvent",this.tooltipEventArgs);var a=o.vertical,l=o.horizontal;if(o.position!==r){var h=sf.popups.calculatePosition(t,l,a,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect());this.adjustArrow(t,r,l,a);var d=this.calculateTooltipOffset(r);d.top-=this.getOffSetPosition("TopBottom",r,this.properties.offsetY),d.left-=this.getOffSetPosition("RightLeft",r,this.properties.offsetX),o.position=r;var c=this.calculateElementPosition(h,d);o.left=c[0],o.top=c[1]}else this.adjustArrow(t,r,l,a);var p={left:o.left,top:o.top},u=sf.popups.fit(this.tooltipEle,this.checkCollideTarget(),{X:!0,Y:!1},p).left;if(sf.base.setStyleAttribute(this.tooltipEle,{display:"block"}),this.properties.showTipPointer&&(0===r.indexOf("Bottom")||0===r.indexOf("Top"))){var f=sf.base.select("."+e,this.tooltipEle),g=parseInt(f.style.left,10)-(u-o.left);g<0?g=0:g+f.offsetWidth>this.tooltipEle.clientWidth&&(g=this.tooltipEle.clientWidth-f.offsetWidth),sf.base.setStyleAttribute(f,{left:g.toString()+"px"})}return sf.base.setStyleAttribute(this.tooltipEle,{display:""}),p.left=u,window.scrollX&&"BottomRight"==this.properties.position&&(p.left=this.element.getBoundingClientRect().left+window.scrollX-this.element.offsetWidth),p},s.prototype.getOffSetPosition=function(e,t,i){return-1!==e.indexOf(this.properties.position.split(/(?=[A-Z])/)[0])&&-1!==e.indexOf(t.split(/(?=[A-Z])/)[0])?2*i:0},s.prototype.hideTooltip=function(e,t,i){var s=this;this.isContentUpdated=!1,clearTimeout(this.hideTimer),clearTimeout(this.showTimer);var n=function(){var n;s.checkForOpen(s.properties.opensOn,s.element,t)||(s.properties.closeDelay&&s.tooltipEle&&s.isTooltipOpen||(n=t?s.properties.target?i||t.target:s.element:sf.base.select('[data-tooltip-id= "'+s.ctrlId+'_content"]',document),s.tooltipEventArgs={type:t?t.type.toString():null,cancel:!1,target:s.getDomObject("target",n),event:t||null,element:s.getDomObject("tooltipElement",s.tooltipEle),hasText:s.hasText(),isInteracted:!sf.base.isNullOrUndefined(t),name:"beforeClose",collidedPosition:null,left:t?s.getXYValue(t,"x"):null,top:t?s.getXYValue(t,"y"):null},s.beforeCloseTarget=n,s.beforeCloseAnimation=e,s.isRestrictUpdate=s.eventList.beforeClose&&!s.isHidden(),s.eventList.beforeClose?s.triggerEvent("TriggerBeforeCloseEvent",s.tooltipEventArgs):s.beforeCloseCallBack(!1)))};!sf.base.isNullOrUndefined(this.tooltipEle)&&this.tooltipEle.classList.contains("e-blazordiagram-tooltip")?n():this.hideTimer=setTimeout(n,this.properties.closeDelay)},s.prototype.beforeCloseCallBack=function(e){if(e)this.isPopupHidden=!1;else{var t=this;t.mouseMoveBeforeRemove();this.popupObj?this.popupHide(this.beforeCloseAnimation,this.beforeCloseTarget):setTimeout((function(){t.isMultiTarget||t.popupHide(t.beforeCloseAnimation,t.beforeCloseTarget)}),200)}},s.prototype.popupHide=function(e,t){t&&this.restoreElement(t),this.isPopupHidden=!0;var i={name:"None"===e.effect&&"Enable"===sf.base.animationMode?"FadeOut":e.effect,duration:e.duration,delay:e.delay,timingFunction:"easeIn"};("None"===e.effect&&"Enable"!==sf.base.animationMode||"Disable"===sf.base.animationMode)&&(i=void 0),this.popupObj&&this.popupObj.hide(i)},s.prototype.calculateTooltipOffset=function(t){var i={top:0,left:0},s=this.tooltipEle.offsetWidth,n=this.tooltipEle.offsetHeight,o=sf.base.select("."+e,this.tooltipEle),r=o?o.offsetWidth:0,a=o?o.offsetHeight:0,l=this.properties.showTipPointer?0:8,h=a/2+2+(this.tooltipEle.offsetHeight-this.tooltipEle.clientHeight),d=r/2+2+(this.tooltipEle.offsetWidth-this.tooltipEle.clientWidth);switch(this.properties.mouseTrail&&(l+=2),t){case"RightTop":i.left+=r+l,i.top-=n-h;break;case"RightCenter":i.left+=r+l,i.top-=n/2;break;case"RightBottom":i.left+=r+l,i.top-=h;break;case"BottomRight":i.top+=a+l,i.left-=d;break;case"BottomCenter":i.top+=a+l,i.left-=s/2;break;case"BottomLeft":i.top+=a+l,i.left-=s-d;break;case"LeftBottom":i.left-=r+s+l,i.top-=h;break;case"LeftCenter":i.left-=r+s+l,i.top-=n/2;break;case"LeftTop":i.left-=r+s+l,i.top-=n-h;break;case"TopLeft":i.top-=n+a+l,i.left-=s-d;break;case"TopRight":i.top-=n+a+l,i.left-=d;break;default:i.top-=n+a+l,i.left-=s/2}return i.left+=this.properties.offsetX,i.top+=this.properties.offsetY,i},s.prototype.setTipClass=function(e){0===e.indexOf("Right")?this.tipClass="e-tip-left":0===e.indexOf("Bottom")?this.tipClass="e-tip-top":0===e.indexOf("Left")?this.tipClass="e-tip-right":this.tipClass="e-tip-bottom"},s.prototype.updateTipPosition=function(t){var i=sf.base.selectAll("."+e+",.e-arrow-tip-outer,.e-arrow-tip-inner",this.tooltipEle),s=["e-tip-bottom","e-tip-top","e-tip-left","e-tip-right"];sf.base.removeClass(i,s),this.setTipClass(t),sf.base.addClass(i,this.tipClass)},s.prototype.adjustArrow=function(t,s,n,o){if(!1!==this.properties.showTipPointer){var r,a;this.updateTipPosition(s),sf.base.setStyleAttribute(this.tooltipEle,{display:"block"});var l,h=this.tooltipEle.clientWidth,d=this.tooltipEle.clientHeight,c=sf.base.select("."+e,this.tooltipEle),p=sf.base.select(".e-arrow-tip-inner",this.tooltipEle),u=c.offsetWidth,f=c.offsetHeight;if(sf.base.setStyleAttribute(this.tooltipEle,{display:""}),"e-tip-bottom"===this.tipClass||"e-tip-top"===this.tipClass){if("e-tip-bottom"===this.tipClass?(a="99.9%",sf.base.setStyleAttribute(p,{top:"-"+(f-2)+"px"})):(a=-(f-1)+"px",sf.base.setStyleAttribute(p,{top:"-"+(f-6)+"px"})),t)r=(l="Center"!==n||h>t.offsetWidth||this.properties.mouseTrail)&&"Left"===n||!l&&"End"===this.properties.tipPointerPosition?h-u-2+"px":l&&"Right"===n||!l&&"Start"===this.properties.tipPointerPosition?"2px":!l||"End"!==this.properties.tipPointerPosition&&"Start"!==this.properties.tipPointerPosition?h/2-u/2+"px":"End"===this.properties.tipPointerPosition?t.offsetWidth+(this.tooltipEle.offsetWidth-t.offsetWidth)/2-u/2-2+"px":(this.tooltipEle.offsetWidth-t.offsetWidth)/2-u/2+2+"px"}else"e-tip-right"===this.tipClass?(r="99.9%",sf.base.setStyleAttribute(p,{left:"-"+(u-2)+"px"})):(r=-(u-1)+"px",sf.base.setStyleAttribute(p,{left:u-2-u+"px"})),a=(l="Center"!==o||d>t.offsetHeight||this.properties.mouseTrail)&&o===i||!l&&"End"===this.properties.tipPointerPosition?d-f-2+"px":l&&"Bottom"===o||!l&&"Start"===this.properties.tipPointerPosition?"2px":d/2-f/2+"px";window.scrollX&&"BottomRight"==this.properties.position&&(r=this.element.offsetLeft+"px"),sf.base.setStyleAttribute(c,{top:a,left:r})}},s.prototype.tooltipHover=function(e){this.tooltipEle&&(this.isTooltipOpen=!0)},s.prototype.tooltipMouseOut=function(e){this.isTooltipOpen=!1,this.hideTooltip(this.properties.animation.close,e,this.findTarget())},s.prototype.onMouseOut=function(e){var t=e.relatedTarget;if(this.mouseAction=!0,t&&!this.properties.mouseTrail){var i=sf.base.closest(t,".e-tooltip-wrap.e-lib.e-popup");i?sf.base.EventHandler.add(i,"mouseleave",this.tooltipElementMouseOut,this):(this.hideTooltip(this.properties.animation.close,e,this.findTarget()),0===this.properties.closeDelay&&this.clear())}else this.hideTooltip(this.properties.animation.close,e,this.findTarget()),this.clear()},s.prototype.tooltipElementMouseOut=function(e){this.hideTooltip(this.properties.animation.close,e,this.findTarget()),sf.base.EventHandler.remove(this.element,"mouseleave",this.tooltipElementMouseOut),this.clear()},s.prototype.onMouseMove=function(e){if(this.tooltipEle){var s=0,n=0;e.type.indexOf("touch")>-1?(e.preventDefault(),s=e.touches[0].pageX,n=e.touches[0].pageY):(s=e.pageX,n=e.pageY),sf.base.Animation.stop(this.tooltipEle),sf.base.removeClass([this.tooltipEle],"e-popup-close"),sf.base.addClass([this.tooltipEle],t),this.adjustArrow(e.target,this.properties.position,this.tooltipPositionX,this.tooltipPositionY);var o=this.calculateTooltipOffset(this.properties.position),r=s+o.left+this.properties.offsetX,a=n+o.top+this.properties.offsetY,l=this.checkCollision(e.target,r,a);if(this.tooltipPositionX!==l.horizontal||this.tooltipPositionY!==l.vertical){var h=0===this.properties.position.indexOf("Bottom")||0===this.properties.position.indexOf(i)?l.vertical+l.horizontal:l.horizontal+l.vertical;l.position=h,this.adjustArrow(e.target,l.position,l.horizontal,l.vertical);var d=this.calculateTooltipOffset(l.position);l.left=s+d.left-this.properties.offsetX,l.top=n+d.top-this.properties.offsetY}sf.base.setStyleAttribute(this.tooltipEle,{left:l.left+"px",top:l.top+"px"})}},s.prototype.keyDown=function(e){this.tooltipEle&&27===e.keyCode&&this.hideTooltip(this.properties.animation.close)},s.prototype.touchEnd=function(e){this.tooltipEle&&null===sf.base.closest(e.target,".e-tooltip")&&!this.properties.isSticky&&this.hideTooltip(this.properties.animation.close)},s.prototype.scrollHandler=function(e){this.tooltipEle&&!this.properties.isSticky&&(sf.base.closest(e.target,".e-tooltip-wrap.e-lib.e-popup")||this.hideTooltip(this.properties.animation.close))},s.prototype.renderContent=function(e){var t=sf.base.getAttributeOrDefault(e,"sf-tooltip",null),i=sf.base.getAttributeOrDefault(e,"data-title",null);(!sf.base.isNullOrUndefined(t)&&e?(sf.base.attributes(e,{"data-content":t}),this.hasTitle=!0,this.isMultiTarget=!0):!sf.base.isNullOrUndefined(i)&&e&&(sf.base.attributes(e,{"data-content":i}),this.isMultiTarget=!0),this.properties.content)||(sf.base.select(".e-tip-content",this.tooltipEle).innerText=e.getAttribute("data-content"))},s.prototype.setHeigthWidth=function(e,t,i){this.tooltipEle&&sf.base.setStyleAttribute(this.tooltipEle,{height:t,width:e}),i&&"auto"!==this.tooltipEle.style.width&&(this.tooltipEle.style.maxWidth=e)},s.prototype.appendContainer=function(){"string"==typeof this.properties.container&&("body"===this.properties.container?this.containerElement=document.body:(this.isBodyContainer=!1,this.containerElement=sf.base.select(this.properties.container,document),sf.base.addClass([this.containerElement],"e-tooltip-popup-container"))),this.containerElement.appendChild(this.tooltipEle)},s.prototype.getUpdatedContentPosition=function(t){var s=t.getBoundingClientRect(),n=this.tooltipEle.getBoundingClientRect(),o=this.properties.showTipPointer?sf.base.select("."+e,this.tooltipEle).getBoundingClientRect():null,r=this.properties.showTipPointer?o.height/2-n.height/2:null;return{popTop:this.properties.position.endsWith(i)?s.top-n.height/2:s.top+Math.abs(s.height-n.height/2),popLeft:this.properties.position.startsWith("Left")?this.properties.showTipPointer?s.left-n.width-o.width:s.left-n.width:n.left,arrow:r}},s.prototype.contentUpdated=function(){if(this.isContentUpdated&&!sf.base.isNullOrUndefined(this.tooltipEle)){var s=sf.base.isNullOrUndefined(this.properties.target)?this.element:sf.base.select(this.properties.target,document);if(s&&(s.querySelector("input")||s.querySelector("textarea")))if(this.properties.position.endsWith(i)||this.properties.position.endsWith("Bottom")){var n=this.getUpdatedContentPosition(s);if(this.properties.showTipPointer)sf.base.select("."+e,this.tooltipEle).style.top="-"+n.arrow.toString()+"px";this.popupObj&&(this.popupObj.position={X:n.popLeft,Y:n.popTop},this.popupObj.dataBind())}else this.reposition(s)}if(this.isContentUpdated=!1,sf.base.isNullOrUndefined(this.tooltipEle)){if(this.ctrlId=this.element.id,this.tooltipEle=sf.base.select("#"+this.ctrlId+"_content",document),this.tooltipEle&&(sf.base.setStyleAttribute(this.tooltipEle,{position:"absolute"}),this.setHeigthWidth(sf.base.formatUnit(this.properties.width),sf.base.formatUnit(this.properties.height),this.contentTargetValue),this.contentTargetValue)){sf.base.Browser.isDevice&&sf.base.addClass([this.tooltipEle],"e-bigger"),this.appendContainer(),sf.base.removeClass([this.tooltipEle],"e-hidden"),this.addDescribedBy(this.contentTargetValue,this.ctrlId+"_content"),this.renderContent(this.contentTargetValue),sf.base.addClass([this.tooltipEle],t),this.renderPopup(this.contentTargetValue);var o=this.properties.position;this.adjustArrow(this.contentTargetValue,o,this.tooltipPositionX,this.tooltipPositionY),sf.base.Animation.stop(this.tooltipEle),this.reposition(this.contentTargetValue),this.afterContentRender()}}else{if(!this.isContiniousOpen||this.isRestrictUpdate)return;if(sf.base.addClass([this.tooltipEle],t),document.body.appendChild(this.tooltipEle),this.contentTargetValue){this.renderPopup(this.contentTargetValue);o=this.properties.position;this.adjustArrow(this.contentTargetValue,o,this.tooltipPositionX,this.tooltipPositionY),this.addDescribedBy(this.contentTargetValue,this.ctrlId+"_content"),this.renderContent(this.contentTargetValue),sf.base.Animation.stop(this.tooltipEle),this.reposition(this.contentTargetValue),this.afterContentRender()}}},s.prototype.afterContentRender=function(){sf.base.removeClass([this.tooltipEle],t),sf.base.addClass([this.tooltipEle],"e-popup-close"),this.tooltipEventArgs={type:this.contentEvent?this.contentEvent.type.toString():null,isInteracted:!sf.base.isNullOrUndefined(this.contentEvent),hasText:this.hasText(),target:this.getDomObject("target",this.contentTargetValue),name:"beforeOpen",cancel:!1,event:this.contentEvent?this.contentEvent:null,element:this.getDomObject("tooltipElement",this.tooltipEle),left:this.contentEvent?this.getXYValue(this.contentEvent,"x"):null,top:this.contentEvent?this.getXYValue(this.contentEvent,"y"):null},this.isRestrictUpdate=this.eventList.beforeOpen&&!this.isHidden(),this.eventList.beforeOpen?this.triggerEvent("TriggerBeforeOpenEvent",this.tooltipEventArgs):this.beforeOpenCallBack(!1)},s.prototype.beforeOpenCallBack=function(e){if(e)this.isPopupHidden=!0,this.contentTargetValue&&this.popupHide(this.properties.animation.close,this.contentTargetValue),this.mouseMoveBeforeRemove();else{if(sf.base.isNullOrUndefined(this.contentAnimation))return;var t={name:"None"===this.contentAnimation.effect&&"Enable"===sf.base.animationMode?"FadeIn":this.contentAnimation.effect,duration:this.contentAnimation.duration,delay:this.contentAnimation.delay,timingFunction:"easeOut"};("None"===this.contentAnimation.effect&&"Enable"!==sf.base.animationMode||"Disable"===sf.base.animationMode)&&(t=void 0),this.popupObj&&(this.popupObj.show(t,this.contentTargetValue),this.properties.openDelay&&this.properties.mouseTrail&&this.mouseMoveEvent&&this.onMouseMove(this.mouseMoveEvent))}this.contentEvent&&this.wireMouseEvents(this.contentEvent,this.contentTargetValue),this.contentTargetValue=this.contentEvent=this.contentAnimation=null},s.prototype.reposition=function(e){if(null!==e&&this.tooltipEle){var t=this.getTooltipPosition(e);this.popupObj&&(this.popupObj.position={X:t.left,Y:t.top},this.popupObj.dataBind())}},s.prototype.renderPopup=function(e){var t=this.properties.mouseTrail?{top:0,left:0}:this.getTooltipPosition(e);this.tooltipEle.classList.remove("e-lib"),this.popupObj=new sf.popups.Popup(this.tooltipEle,{height:this.properties.height,width:this.properties.width,position:{X:t.left,Y:t.top},enableRtl:this.properties.enableRtl,open:this.openPopupHandler.bind(this),close:this.closePopupHandler.bind(this)})},s.prototype.openPopupHandler=function(){this.tooltipEle&&this.tooltipEle.classList.contains("e-popup-close")&&this.isMultiTarget&&(sf.base.removeClass([this.tooltipEle],"e-popup-close"),sf.base.addClass([this.tooltipEle],t)),this.properties.mouseTrail||this.reposition(this.contentTargetValue?this.contentTargetValue:this.findTarget()),this.tooltipEventArgs.name="Opened",this.isRestrictUpdate=this.eventList.opened&&!this.isHidden(),this.eventList.opened&&this.triggerEvent("TriggerOpenedEvent",this.tooltipEventArgs),this.mouseAction&&!sf.base.isNullOrUndefined(this.tooltipEle)&&this.hideTooltip(this.properties.animation.close)},s.prototype.closePopupHandler=function(){this.clear(),this.tooltipEventArgs.name="Closed",this.isRestrictUpdate=this.eventList.closed&&!this.isHidden(),this.eventList.closed&&this.triggerEvent("TriggerClosedEvent",this.tooltipEventArgs)},s.prototype.getTooltipPosition=function(e){sf.base.setStyleAttribute(this.tooltipEle,{display:"block"});var t=sf.popups.calculatePosition(e,this.tooltipPositionX,this.tooltipPositionY,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect()),i=this.calculateTooltipOffset(this.properties.position),s=this.calculateElementPosition(t,i),n=s[0],o=s[1],r=this.collisionFlipFit(e,n,o);return sf.base.setStyleAttribute(this.tooltipEle,{display:""}),r},s.prototype.getDomObject=function(e,t){return t?window.sfBlazor.getDomObject(e,t):null},s.prototype.hasText=function(){return!!this.tooltipEle&&""!==this.tooltipEle.innerText.trim()},s.prototype.getXYValue=function(e,t){var i,s=e.changedTouches;if(!(i="x"===t?s?s[0].clientX:e.clientX:s?s[0].clientY:e.clientY)&&"focus"===e.type&&e.target){var n=e.target.getBoundingClientRect();i=n?"x"===t?n.left:n.top:null}return Math.ceil(i)},s.prototype.destroy=function(){if(this.tooltipEle){var e=sf.base.select("#"+this.ctrlId+"_content_placeholder",document);e&&e.appendChild(this.tooltipEle)}this.popupObj&&this.popupObj.destroy(),sf.base.removeClass([this.element],"e-tooltip"),this.unwireEvents(this.properties.opensOn),this.unwireMouseEvents(this.element),this.tooltipEle=null,this.popupObj=null},s}();return{wireEvents:function(e,t,i,n,o){this.updateAnimation(n.animation),new s(e,t,i,n,o);var r=window.sfBlazor.getCompInstance(e);t&&!sf.base.isNullOrUndefined(r)&&(r.formatPosition(),r.wireEvents(n.opensOn),sf.base.removeClass([t],["e-blazor-hidden"]))},contentUpdated:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.contentUpdated()},updateAnimation:function(e){e.open.duration=e.open.duration?e.open.duration:void 0,e.close.duration=e.close.duration?e.close.duration:void 0},beforeRenderCallBack:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.beforeRenderCallBack(t)},beforeOpenCallBack:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.beforeOpenCallBack(t)},beforeCloseCallBack:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.beforeCloseCallBack(t)},showTooltip:function(e,t,i,s){var n=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(n)){if(null!==s&&""!==s){var o=sf.base.select(s,n.element),r=sf.base.select(s,document);o?t=o:r&&(t=r)}n.showTooltip(t,i,null)}},hideTooltip:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.hideTooltip(t)},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.destroy()},refresh:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||(t.isPopupHidden||t.hideTooltip(t.properties.animation.close),t.unwireEvents(t.properties.opensOn),t.wireEvents(t.properties.opensOn))},refreshPosition:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s)||(null===t&&(t=null!==i&&""!==i?sf.base.select(i,s.element):s.element),s.reposition(t))},updateProperties:function(t,i,s,n){var o=window.sfBlazor.getCompInstance(t);if(!sf.base.isNullOrUndefined(o)){o.isContentUpdated=n;var r=o.properties;if(o.isRestrictUpdate=!0,s.animation&&this.updateAnimation(s.animation),this.updateAnimation(i.animation),s.target||s.opensOn||!sf.base.isNullOrUndefined(s.isSticky))o.unwireEvents(o.properties.opensOn),o.properties=i,o.wireEvents(o.properties.opensOn),o.formatPosition();else{var a=o.findTarget();if(s.container&&(sf.base.isNullOrUndefined(this.containerElement)||sf.base.removeClass([this.containerElement],"e-tooltip-popup-container"),o.properties=i,o.tooltipEle&&a&&(o.appendContainer(),o.reposition(a))),s.height||s.width?o.setHeigthWidth(sf.base.formatUnit(s.width),sf.base.formatUnit(s.height),a):s.position?o.isPositionUpdate=!0:s.offsetX?o.isOffsetXUpdate=!0:s.offsetX&&(o.isOffsetYUpdate=!0),o.tooltipEle&&o.properties.showTipPointer){if(o.isPositionUpdate){var l=sf.base.select(".e-arrow-tip-inner",o.tooltipEle),h=sf.base.select("."+e,o.tooltipEle);sf.base.removeClass([h],[o.tipClass]),o.properties=i,o.formatPosition(),o.setTipClass(s.position),sf.base.addClass([h],[o.tipClass]),sf.base.setStyleAttribute(l,{top:null,left:null})}if(o.isOffsetXUpdate){var d=parseInt(o.tooltipEle.style.left,10)+(s.offsetX-r.offsetX);sf.base.setStyleAttribute(o.tooltipEle,{left:d.toString()+"px"})}if(o.isOffsetYUpdate){d=parseInt(o.tooltipEle.style.top,10)+(s.offsetY-r.offsetY);sf.base.setStyleAttribute(o.tooltipEle,{top:d.toString()+"px"})}o.properties=i,o.reposition(a)}else o.properties=i,o.isPositionUpdate&&o.formatPosition();o.isOffsetYUpdate=!1,o.isOffsetXUpdate=!1,o.isPositionUpdate=!1,o.isRestrictUpdate=!1}}}}}()},"./modules/sf-treegrid.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.TreeGrid=function(){"use strict";var e=function(){function e(e){this.treeCopyContent="",this.copiedUIdCollection=[],this.parent=e,this.gridClipboard=this.parent.grid.clipboardModule}return e.prototype.copy=function(e){document.queryCommandSupported("copy")&&(this.setCopyData(e),document.execCommand("copy"),this.gridClipboard.clipBoardTextArea.blur()),this.gridClipboard.isSelect&&(window.getSelection().removeAllRanges(),this.gridClipboard.isSelect=!1)},e.prototype.setCopyData=function(e){if(""===window.getSelection().toString()){this.gridClipboard.clipBoardTextArea.value=this.gridClipboard.copyContent="";var t=this.parent.grid.getRows();if("Cell"!==this.parent.grid.options.selectionMode){for(var i=this.parent.grid.getSelectedRowIndexes().sort((function(e,t){return e-t})),s=0;s<i.length;s++)if(s>0&&(this.treeCopyContent+="\n"),!t[i[s]].classList.contains("e-summaryrow")){var n=[].slice.call(t[i[s]].querySelectorAll(".e-rowcell")),o=t[i[s]].getAttribute("data-uid");-1===this.copiedUIdCollection.indexOf(o)&&("Parent"!==this.parent.options.copyHierarchyMode&&"Both"!==this.parent.options.copyHierarchyMode||this.parentContentData(i[s],t,e,s),this.gridClipboard.getCopyData(n,!1,"\t",e),this.treeCopyContent+=this.gridClipboard.copyContent,this.copiedUIdCollection.push(o),this.gridClipboard.copyContent="","Child"!==this.parent.options.copyHierarchyMode&&"Both"!==this.parent.options.copyHierarchyMode||this.childContentData(i[s],t,e))}if(e){var r=[];for(s=0;s<this.parent.grid.getVisibleColumns().length;s++)r[s]=this.parent.grid.getVisibleColumns()[s].headerText;this.gridClipboard.getCopyData(r,!1,"\t",e),this.treeCopyContent=this.gridClipboard.copyContent+"\n"+this.treeCopyContent}var a=document.activeElement;this.gridClipboard.clipBoardTextArea.value=this.gridClipboard.copyContent=this.treeCopyContent,sf.base.Browser.userAgent.match(/ipad|ipod|iphone/i)?this.gridClipboard.clipBoardTextArea.setSelectionRange(0,this.gridClipboard.clipBoardTextArea.value.length):(window.getSelection().removeAllRanges(),this.gridClipboard.clipBoardTextArea.select()),a.focus(),this.gridClipboard.isSelect=!0,this.copiedUIdCollection=[],this.treeCopyContent=""}}},e.prototype.parentContentData=function(e,t,i,s){for(var n,o=this.parent.options.allowRowDragAndDrop&&sf.base.isNullOrUndefined(this.parent.options.rowDropTargetID)?this.parent.options.treeColumnIndex+1:this.parent.options.treeColumnIndex,r=/index(\d+)|level(\d+)/g,a=+t[e].cells[o].className.match(r)[1].match(/\d+/)[0],l=a?a-1:0,h=e-1;h>0;h--)if(1==t[h].cells[o].getElementsByClassName("e-treegridexpand").length&&t[h].cells[o].className.match(r)[1].match(/\d+/)[0].toString()==l.toString()){n=t[h];break}if(!sf.base.isNullOrUndefined(n)&&n.rowIndex!=e)for(var d=l,c=n.getAttribute("data-uid"),p=0;p<d+1;p++)for(var u=0;u<t.length;u++){var f=t[u].getAttribute("data-uid");if(f===c){e=u;var g=[].slice.call(t[e].querySelectorAll(".e-rowcell"));if(-1===this.copiedUIdCollection.indexOf(f)){this.gridClipboard.getCopyData(g,!1,"\t",i),this.treeCopyContent=s>0?this.treeCopyContent+this.gridClipboard.copyContent+"\n":this.gridClipboard.copyContent+"\n"+this.treeCopyContent,this.copiedUIdCollection.push(f),this.gridClipboard.copyContent="";break}}}l>0&&this.parentContentData(t.indexOf(n),t,i)},e.prototype.childContentData=function(e,t,i){var s=this.parent.options.allowRowDragAndDrop&&sf.base.isNullOrUndefined(this.parent.options.rowDropTargetID)?this.parent.options.treeColumnIndex+1:this.parent.options.treeColumnIndex,n=t[e].cells[s].className.match(/index(\d+)|level(\d+)/g),o=n[0].match(/\d+/)[0],r=+n[1].match(/\d+/)[0]+1,a=t.filter((function(e){return e.cells[s].classList.contains("e-gridrowindex"+o+"level"+r)}));if(a.length)for(var l=0;l<a.length;l++)for(var h=0;h<t.length;h++)if(!sf.base.isNullOrUndefined(a[l].getAttribute("data-uid"))&&t[h].getAttribute("data-uid")===a[l].getAttribute("data-uid")){if(!sf.base.isNullOrUndefined(t[h])&&!t[h].classList.contains("e-summaryrow")){var d=[].slice.call(t[h].querySelectorAll(".e-rowcell")),c=t[h].getAttribute("data-uid");-1===this.copiedUIdCollection.indexOf(c)&&(this.gridClipboard.getCopyData(d,!1,"\t",i),this.treeCopyContent+="\n"+this.gridClipboard.copyContent,this.gridClipboard.copyContent="",this.copiedUIdCollection.push(c),this.childContentData(h,t,i))}break}},e}();function t(e,t,i){for(var s=e;s&&!(i?s.id===t:s.classList.contains(t));)s=s.parentElement;return s}var i=function(){function e(e){var i=this;this.draggedRows=[],this.selectedRows=[],this.canDrop=!0,this.rowDragStart=function(e){i.startedRow=i.parent.grid.rowDragAndDropModule.startedRow;var t=i.parent.grid.getSelectedRowIndexes();i.parent.options.enableVirtualization?i.parent.grid.getSelectedRowIndexes().length?(t=i.parent.grid.getSelectedRowIndexes(),i.selectedRows=i.parent.grid.getSelectedRows()):(t.push(sf.base.closest(e.target,"tr").rowIndex),i.startedRow.dataset.rowindex=sf.base.closest(e.target,"tr").rowIndex.toString(),i.selectedRows.push(sf.base.closest(e.target,"tr"))):i.selectedRows=i.parent.grid.getSelectedRows(),i.gridDragStart.apply(i.parent.grid,[e]);var s=parseInt(i.startedRow.getAttribute("data-rowindex"),10);0!==i.selectedRows.length&&0!==t.length||(i.selectedRows.push(i.startedRow),t.push(s));for(var n=0;n<t.length;n++)i.draggedRows.push(i.parent.grid.getRows()[t[n]]);if(i.parent.options.enableVirtualization){var o=parseInt(i.startedRow.getAttribute("data-rowindex"),10);i.parent.dotNetRef.invokeMethodAsync("DragRows",o)}},this.rowDraging=function(e){i.gridDrag.apply(i.parent.grid,[e]),i.dragTarget=i.parent.grid.rowDragAndDropModule.dragTarget;var s=i.parent,n=i.parent.element.querySelector(".e-cloneproperties");n.style.cursor="";var o,r=e.target?sf.base.closest(e.target,"tr"):null,a=r?r.rowIndex:-1,l=s.grid.getRows()[a];(i.removeErrorElem(),i.canDrop=!0,-1!==a?i.ensuredropPosition(i.draggedRows,l):(i.canDrop=!1,i.addErrorElem()),!s.options.rowDropTargetID&&i.canDrop&&s.rowDragAndDropModule.updateIcon(i.selectedRows,a,e),s.options.rowDropTargetID)&&((o=t(e.target,"e-treegrid"))&&o.id===i.parent.options.rowDropTargetID&&o.blazor_instance.rowDragAndDropModule.updateIcon(i.selectedRows,a,e));e.target&&sf.base.closest(e.target,"#"+s.options.rowDropTargetID)&&((o=t(e.target,"e-treegrid"))||(n.style.cursor="default"))},this.rowDropped=function(e){var s=i.getElementFromPosition(e.helper,e.event),n=s&&!s.classList.contains("e-dlg-overlay")?s:e.target;i.parent.grid.element.classList.remove("e-rowdrag");var o=document.getElementById(i.parent.options.rowDropTargetID);if(i.parent.options.allowRowDragAndDrop&&i.parent.options.rowDropTargetID&&!t(n,"e-treegrid")){var r=n.classList.value,a=n.id,l=parseInt(i.startedRow.getAttribute("data-rowindex"),10),h="topSegment"===i.dropPosition?"Above":"bottomSegment"===i.dropPosition?"Below":"middleSegment"===i.dropPosition?"Child":"Invalid";i.parent.dotNetRef.invokeMethodAsync("ReorderRows",l,0,"add",!1,r,a,null,!0,h)}if(i.parent.options.rowDropTargetID&&o&&o.blazor_instance&&o.blazor_instance.getContent().classList.remove("e-allowRowDrop"),!t(n,"e-gridcontent"))return i.dragTarget=null,sf.base.remove(e.helper),void i.updateRowDrop();var d=i.parent;if(d.options.rowDropTargetID?(e.target&&sf.base.closest(e.target,"#"+d.options.rowDropTargetID)||t(e.target,"e-treegrid")&&t(e.target,"e-treegrid").id===d.options.rowDropTargetID)&&sf.base.setValue("dropPosition",i.dropPosition,e):t(e.target,"e-content")&&(i.parent.element.querySelector(".e-errorelem")&&(i.dropPosition="Invalid"),sf.base.setValue("dropPosition",i.dropPosition,e),sf.base.isNullOrUndefined(d.getHeaderContent().querySelector(".e-firstrow-border"))||d.getHeaderContent().querySelector(".e-firstrow-border").remove()),i.updateRowDrop(),i.parent.options.allowRowDragAndDrop&&!i.parent.options.rowDropTargetID){i.parent.grid.rowDragAndDropModule.stopTimer(),i.parent.grid.getContent().classList.remove("e-grid-relative"),i.parent.grid.rowDragAndDropModule.removeBorder(s);var c=i.parent.grid.element.querySelector(".e-dragstartrow");c&&c.classList.remove("e-dragstartrow");var p=i.dragTarget,u=n.classList.value,f=n.id,g=parseInt(i.startedRow.getAttribute("data-rowindex"),10),m="topSegment"===i.dropPosition?"Above":"bottomSegment"===i.dropPosition?"Below":"middleSegment"===i.dropPosition?"Child":"Invalid";"Invalid"!==m&&setTimeout((function(){i.parent.dotNetRef.invokeMethodAsync("ReorderRows",g,p,"delete",!0,u,f,null,!1,m)}),10),i.dragTarget=null,i.draggedRows=[]}},this.drop=function(e){i.treeGridDrop({target:e.target,droppedElement:e.droppedElement}),sf.base.remove(e.droppedElement)},this.parent=e,this.parent.options.allowRowDragAndDrop&&(this.gridDrag=this.parent.grid.rowDragAndDropModule.drag,this.gridDragStart=this.parent.grid.rowDragAndDropModule.dragStart,this.parent.grid.rowDragAndDropModule.draggable.drag=this.rowDraging,this.parent.grid.rowDragAndDropModule.draggable.dragStop=this.rowDropped,this.parent.grid.rowDragAndDropModule.draggable.dragStart=this.rowDragStart,this.parent.grid.rowDragAndDropModule.droppable.drop=this.drop)}return e.prototype.updateRowDrop=function(){this.removetopOrBottomBorder(),this.removeChildBorder(),sf.base.isNullOrUndefined(this.parent.element.getElementsByClassName("e-firstrow-border")[0])?sf.base.isNullOrUndefined(this.parent.element.getElementsByClassName("e-lastrow-border")[0])||this.parent.element.getElementsByClassName("e-lastrow-border")[0].remove():this.parent.element.getElementsByClassName("e-firstrow-border")[0].remove()},e.prototype.removeFirstrowBorder=function(e){var t="bottomSegment"===this.dropPosition;this.parent.element.getElementsByClassName("e-firstrow-border").length>0&&e&&(0!==e.rowIndex||t)&&this.parent.element.getElementsByClassName("e-firstrow-border")[0].remove()},e.prototype.removeLastrowBorder=function(e){var t=e&&(e.classList.contains("e-emptyrow")||e.classList.contains("e-columnheader")),i=e&&!t&&this.parent.getRows()[this.parent.getRows().length-1].getAttribute("data-uid")!==e.getAttribute("data-uid"),s=i||"topSegment"===this.dropPosition;this.parent.element.getElementsByClassName("e-lastrow-border").length>0&&e&&(i||s)&&this.parent.element.getElementsByClassName("e-lastrow-border")[0].remove()},e.prototype.updateIcon=function(e,i,s){var n=s.target?sf.base.closest(s.target,"tr"):null;this.dropPosition=void 0;var o=0;if(this.removeFirstrowBorder(n),this.removeLastrowBorder(n),this.parent.options.enableVirtualization)if(this.parent.grid.getSelectedRows().length)for(var r=0;r<this.parent.grid.getSelectedRows().length;r++)(sf.base.isNullOrUndefined(n)||n.getAttribute("data-uid")!==this.parent.grid.getSelectedRows()[r].getAttribute("data-uid"))&&t(s.target,"e-gridcontent")||(this.dropPosition="Invalid",this.addErrorElem());else(sf.base.isNullOrUndefined(n)||n.getAttribute("data-uid")!==this.startedRow.getAttribute("data-uid"))&&t(s.target,"e-gridcontent")||(this.dropPosition="Invalid",this.addErrorElem());else for(r=0;r<this.selectedRows.length;r++)(sf.base.isNullOrUndefined(n)||n.getAttribute("data-uid")!==this.selectedRows[r].getAttribute("data-uid"))&&t(s.target,"e-gridcontent")||(this.dropPosition="Invalid",this.addErrorElem());var a=this.parent,l=0,h=this.parent.element.querySelector(".e-toolbar"),d=h?h.offsetHeight:0,c=this.getOffset(a.element),p=a.getHeaderContent().offsetHeight+c.top+d,u=a.grid.scrollModule.content.scrollTop;sf.base.isNullOrUndefined(n)||(o=n.offsetTop-u);var f=((l=a.options.allowTextWrap?e[0].offsetHeight:a.options.enableVirtualization?n.getBoundingClientRect().top:o+p+0)+e[0].offsetHeight-l)/3,g=l+f,m=g+f,v=m+f,b=(c.left,s.event),y=sf.base.isNullOrUndefined(b.pageY)?s.event.changedTouches[0].clientY:b.pageY,M=y<=g,C=y>g&&y<=m,w=y>m&&y<=v;if(M||C||w){if(M&&"Invalid"!==this.dropPosition&&(this.removeChildBorder(),this.dropPosition="topSegment",this.removetopOrBottomBorder(),this.addFirstrowBorder(n),this.removeErrorElem(),this.removeLastrowBorder(n),this.topOrBottomBorder(s.target)),C&&"Invalid"!==this.dropPosition){this.removetopOrBottomBorder();var S,N=sf.base.closest(s.target,"tr");(S=sf.base.isNullOrUndefined(N)?[]:[].slice.call(N.querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse"))).length>0&&this.addRemoveClasses(S,!0,"e-childborder"),this.addLastRowborder(n),this.addFirstrowBorder(n),this.dropPosition="middleSegment"}w&&"Invalid"!==this.dropPosition&&(this.removeErrorElem(),this.removetopOrBottomBorder(),this.removeChildBorder(),this.dropPosition="bottomSegment",this.addLastRowborder(n),this.removeFirstrowBorder(n),this.topOrBottomBorder(s.target))}return this.dropPosition},e.prototype.removeChildBorder=function(){var e;(e=[].slice.call(this.parent.element.querySelectorAll(".e-childborder"))).length>0&&this.addRemoveClasses(e,!1,"e-childborder")},e.prototype.addFirstrowBorder=function(e){var t=this.parent.element,i=this.parent;if(e&&0===e.rowIndex&&!e.classList.contains("e-emptyrow")){var s=sf.base.createElement("div",{className:"e-firstrow-border"}),n=this.parent.getHeaderContent(),o=0;i.options.toolbar&&(o=document.getElementById(i.element.id+"_gridcontrol_toolbarItems").offsetHeight);var r=!sf.base.isNullOrUndefined(this.parent.options.rowDropTargetID);r&&(s.style.top=this.parent.grid.element.getElementsByClassName("e-gridheader")[0].offsetHeight+o+"px"),s.style.width=r?t.offsetWidth+"px":t.offsetWidth-this.getScrollWidth()+"px",n.querySelectorAll(".e-firstrow-border").length||n.appendChild(s)}},e.prototype.addLastRowborder=function(e){var t=e&&(e.classList.contains("e-emptyrow")||e.classList.contains("e-columnheader"));if(e&&!t&&this.parent.getRows()[this.parent.getRows().length-1].getAttribute("data-uid")===e.getAttribute("data-uid")&&(!this.parent.options.enableVirtualization||this.parent.grid.rowDragAndDropModule.isOverflowBorder)){var i=sf.base.createElement("div",{className:"e-lastrow-border"}),s=this.parent.getContent();i.style.width=this.parent.element.offsetWidth-this.getScrollWidth()+"px",s.querySelectorAll(".e-lastrow-border").length||(s.classList.add("e-treegrid-relative"),s.appendChild(i),i.style.bottom=this.getScrollWidth()+"px")}},e.prototype.getScrollWidth=function(){var e=this.parent.getContent().firstElementChild;return e.scrollWidth>e.offsetWidth?this.parent.grid.Scroll.getScrollBarWidth():0},e.prototype.addErrorElem=function(){var e=document.getElementsByClassName("e-cloneproperties")[0];if(!e.querySelectorAll(".e-errorelem").length&&!this.parent.options.rowDropTargetID){var t=document.createElement("div");sf.base.classList(t,["e-errorcontainer"],[]),sf.base.classList(t,["e-icons","e-errorelem"],[]);var i=e.querySelector(".errorValue"),s=e.querySelector(".e-rowcell").innerHTML;i&&(s=i.innerHTML,i.parentNode.removeChild(i)),e.querySelector(".e-rowcell").innerHTML="";var n=document.createElement("span");n.className="errorValue",n.style.paddingLeft="16px",n.innerHTML=s,e.querySelector(".e-rowcell").appendChild(t),e.querySelector(".e-rowcell").appendChild(n)}},e.prototype.removeErrorElem=function(){var e=document.querySelector(".e-errorelem");e&&e.remove()},e.prototype.topOrBottomBorder=function(e){var t,i=sf.base.closest(e,"tr");!(t=i?[].slice.call(i.querySelectorAll(".e-rowcell,.e-rowdragdrop,.e-detailrowcollapse")):[]).length||this.parent.options.enableVirtualization&&!this.parent.grid.rowDragAndDropModule.isOverflowBorder||("topSegment"===this.dropPosition&&(this.addRemoveClasses(t,!0,"e-droptop"),this.parent.element.getElementsByClassName("e-lastrow-dragborder").length>0&&this.parent.element.getElementsByClassName("e-lastrow-dragborder")[0].remove()),"bottomSegment"===this.dropPosition&&this.addRemoveClasses(t,!0,"e-dropbottom"))},e.prototype.removetopOrBottomBorder=function(){var e;(e=[].slice.call(this.parent.element.querySelectorAll(".e-dropbottom, .e-droptop"))).length&&(this.addRemoveClasses(e,!1,"e-dropbottom"),this.addRemoveClasses(e,!1,"e-droptop"))},e.prototype.addRemoveClasses=function(e,t,i){for(var s=0,n=e.length;s<n;s++)t?e[s].classList.add(i):e[s].classList.remove(i)},e.prototype.getOffset=function(e){var t=e.getBoundingClientRect(),i=document.body,s=document.documentElement,n=window.pageYOffset||s.scrollTop||i.scrollTop,o=window.pageXOffset||s.scrollLeft||i.scrollLeft,r=s.clientTop||i.clientTop||0,a=s.clientLeft||i.clientLeft||0,l=t.top+n-r,h=t.left+o-a;return{top:Math.round(l),left:Math.round(h)}},e.prototype.treeGridDrop=function(e){var t,i=this.parent,s=sf.base.closest(e.target,"tr");if(!("true"!==e.droppedElement.querySelector("tr").getAttribute("single-dragrow")&&e.droppedElement.parentElement.parentElement.id===i.element.id||"true"===e.droppedElement.querySelector("tr").getAttribute("single-dragrow")&&e.droppedElement.parentElement.parentElement.id!==i.element.id)&&(e.droppedElement.parentElement.parentElement.id!==i.element.id&&(t=e.droppedElement.parentElement.parentElement.blazor_instance),t.element.id===i.element.id||t.options.rowDropTargetID===i.element.id)){var n=this.getTargetIdx(s);isNaN(n)&&(n=0),i.options.allowPaging&&(n=n+i.options.currentPage*i.options.pageSize-i.options.pageSize),this.removetopOrBottomBorder(),this.removeChildBorder();var o=e.target.classList.value,r=e.target.id,a="topSegment"===this.dropPosition?"Above":"bottomSegment"===this.dropPosition?"Below":"middleSegment"===this.dropPosition?"Child":"Invalid";i.dotNetRef.invokeMethodAsync("ReorderRows",0,n,"add",!1,o,r,t.dotNetRef,!1,a),t.dotNetRef.invokeMethodAsync("ReorderRows",0,n,"delete",!1,o,r,null,!1,a)}},e.prototype.getTargetIdx=function(e){return e?parseInt(e.getAttribute("data-rowindex"),10):0},e.prototype.getElementFromPosition=function(e,t){var i=this.getPosition(t);e.style.display="none";var s=document.elementFromPoint(i.x,i.y);return e.style.display="",s},e.prototype.ensuredropPosition=function(e,t){var i=this,s=this.parent.grid.getRows(),n=this.parent.options.allowRowDragAndDrop&&sf.base.isNullOrUndefined(this.parent.options.rowDropTargetID)?this.parent.options.treeColumnIndex+1:this.parent.options.treeColumnIndex;e.filter((function(o){for(var r=/index(\d+)|level(\d+)/g,a=+o.cells[n].className.match(r)[1].match(/\d+/)[0],l=!1,h=new Array,d=0;d<s.length;d++)if(s[d]==e[0]&&(l=!0),l&&s[d]!=e[0]){var c=+s[d].cells[n].className.match(r)[1].match(/\d+/)[0];if(!(c!=a&&c>a))break;h.push(s[d])}if(h.length){if(-1!==h.map((function(e){return e.getAttribute("data-uid")})).indexOf(t.getAttribute("data-uid")))return i.dropPosition="Invalid",i.addErrorElem(),void(i.canDrop=!1);i.ensuredropPosition(h,t)}}))},e.prototype.getPosition=function(e){var t={};return t.x=sf.base.isNullOrUndefined(e.clientX)?e.changedTouches[0].clientX:e.clientX,t.y=sf.base.isNullOrUndefined(e.clientY)?e.changedTouches[0].clientY:e.clientY,t},e}(),s=function(){function e(e,t){this.parent=t,this.dotNetRef=e}return e.prototype.renderHeaderCheckbox=function(e,t){var i=sf.base.createElement("div",{className:"e-checkbox-wrapper e-css e-hierarchycheckbox"}),s=sf.base.createElement("input",{className:"e-treeselectall",attrs:{type:"checkbox"}});i.appendChild(s);var n=sf.base.createElement("span",{className:"e-frame e-icons",styles:"width: 18px;"});i.appendChild(n),n.addEventListener("click",this.headerSelect.bind(this));var o=sf.base.createElement("span",{className:"e-label"});i.appendChild(o);var r=e.querySelectorAll(".e-headercontent th")[t];if(sf.base.isNullOrUndefined(r.querySelector(".e-checkbox-wrapper"))){var a=r.querySelector(".e-headercelldiv");a.insertBefore(i,a.firstChild)}},e.prototype.updateHeaderCheckbox=function(e,t){"intermediate"===t?(e.classList.add("e-stop"),e.classList.remove("e-check")):"check"===t?(e.classList.add("e-check"),e.classList.remove("e-stop")):(e.classList.remove("e-stop"),e.classList.remove("e-check"))},e.prototype.headerSelect=function(e){var t=e.currentTarget,i="uncheck";t.classList.contains("e-check")?t.classList.remove("e-check"):t.classList.contains("e-stop")?t.classList.remove("e-stop"):(t.classList.add("e-check"),i="check"),this.dotNetRef.invokeMethodAsync("HeaderSelectAll",i)},e}(),n=function(){function t(e,t,i,s){var n=this;if(this.columnModel=[],window.sfBlazor=window.sfBlazor,this.element=t,!sf.base.isNullOrUndefined(this.element))if(this.grid=t.querySelector("#"+t.id+"_gridcontrol").blazor__instance,this.dotNetRef=s,this.options=i,this.dataId=e,sf.base.isNullOrUndefined(this.element)||(this.element.blazor_instance=this,window.sfBlazor.setCompInstance(this)),this.header=this.element.querySelector(".e-headercontent"),this.content=this.element.querySelector(".e-content"),this.footer=this.element.querySelector(".e-summarycontent"),this.element.parentElement.classList.contains("e-dlg-content")){var o=setInterval((function(){n.initModules(),clearInterval(o)}),500);sf.base.isNullOrUndefined(this.checkboxcolumnModule)&&this.initModules()}else this.initModules()}return t.prototype.initModules=function(){this.clipboardModule=new e(this),this.rowDragAndDropModule=new i(this),this.checkboxcolumnModule=new s(this.dotNetRef,this),this.wireEvents()},t.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"keydown",this.KeyDownHandler,this)},t.prototype.getContent=function(){return this.content},t.prototype.getContentTable=function(){return this.content.querySelector(".e-table")},t.prototype.getHeaderContent=function(){return this.header},t.prototype.getHeaderTable=function(){return this.header.querySelector(".e-table")},t.prototype.getRows=function(){return[].slice.call(this.getContent().querySelectorAll(".e-row"))},t.prototype.KeyDownHandler=function(e){67===e.keyCode&&e.ctrlKey?this.clipboardModule.copy():72===e.keyCode&&e.ctrlKey&&e.shiftKey&&this.clipboardModule.copy(!0)},t.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,"keydown",this.KeyDownHandler)},t.prototype.destroy=function(){this.unWireEvents()},t}();return{initialize:function(e,t,i,s){sf.base.enableBlazorMode(),new n(e,t,i,s)},modelChanged:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i)&&(i.options=t,t.enableVirtualization&&t.isExpandCollapse)){i.grid.virtualContentModule.preventEvent=!0}},treeColumnIndexUpdate:function(e,t){window.sfBlazor.getCompInstance(e).options.treeColumnIndex=t},frozenHeight:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.grid.freezeModule.refreshRowHeight()},headerCheckbox:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||i.checkboxcolumnModule.renderHeaderCheckbox(i.element,t)},updateCheckbox:function(e,t,i){var s=window.sfBlazor.getCompInstance(e),n=s.element.querySelectorAll(".e-gridheader th")[t].querySelector("span.e-frame");s.checkboxcolumnModule.updateHeaderCheckbox(n,i)},copyToClipBoard:function(e,t){var i=window.sfBlazor.getCompInstance(e);"Cell"===i.grid.options.selectionMode?i.grid.clipboardModule.copy(t):i.clipboardModule.copy(t)},paste:function(e,t,i,s){window.sfBlazor.getCompInstance(e).grid.clipboardModule.paste(t,i,s)},destroy:function(e){window.sfBlazor.getCompInstance(e).destroy()}}}()},"./modules/sf-treemap.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Treemap=function(){"use strict";var e=function(){function e(e,t){window.sfBlazor=window.sfBlazor,this.resizeTo=0,this.element=e,this.dotNetRef=t,this.dataId=e.id,window.sfBlazor.setCompInstance(this)}return e.prototype.initializeEvents=function(){sf.base.EventHandler.add(this.element,"mouseup",this.mouseUp.bind(this),this),sf.base.EventHandler.add(this.element,"mousemove",this.mouseMove.bind(this),this),sf.base.EventHandler.add(this.element,"mousedown",this.mouseDown.bind(this),this),sf.base.EventHandler.add(this.element,"mouseleave",this.mouseLeave.bind(this),this),sf.base.EventHandler.add(this.element,"contextmenu",this.contextMenuEvent.bind(this),this),sf.base.EventHandler.add(this.element,"keyup",this.keyActionHandler.bind(this),this),window.addEventListener("resize",this.resize.bind(this)),new sf.base.KeyboardEvents(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:{enter:"enter"},eventName:"keydown"})},e.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,"mouseup",this.mouseUp),sf.base.EventHandler.remove(this.element,"mousemove",this.mouseMove),sf.base.EventHandler.remove(this.element,"mousedown",this.mouseDown),sf.base.EventHandler.remove(this.element,"mouseleave",this.mouseLeave),sf.base.EventHandler.remove(this.element,"contextmenu",this.contextMenuEvent),window.removeEventListener("resize",this.resize.bind(this)),sf.base.EventHandler.remove(this.element,"keydown",this.keyActionHandler),sf.base.EventHandler.remove(this.element,"keyup",this.keyActionHandler);var e=sf.base.getInstance(this.element,this.keyActionHandler);e&&e.destroy(),this.element=null,this.dotNetRef=null},e.prototype.keyActionHandler=function(e){if("enter"===e.action&&"keydown"===e.type&&(this.mouseDownProcess(e),this.mouseUpProcess(e)),"Tab"===e.code&&"keyup"===e.type&&(this.dotNetRef&&this.dotNetRef.invokeMethodAsync("TriggerMouseMove",e.target.id,0,0,!0),(e.target.id.indexOf("_Left_Page_Rect")>-1||e.target.id.indexOf("_Right_Page_Rect")>-1)&&!sf.base.isNullOrUndefined(this.dotNetRef))){var t=e.target.id,i=document.getElementById(this.element.id+"_Paging_Text").textContent,s=(i=i.trim().replace("\n","")).split("/").map(Number);t.indexOf("_Left_Page_Rect")>-1?document.getElementById(t).style.outlineColor=s[0]+1!=s[1]?"":"transparent":document.getElementById(t).style.outlineColor=s[0]!=s[1]+1?"":"transparent"}},e.prototype.contextMenuEvent=function(e){this.dotNetRef&&this.dotNetRef.invokeMethodAsync("TriggerRightClick",e.layerX,e.layerY)},e.prototype.resize=function(){var e,t,i=this;if(!sf.base.isNullOrUndefined(this.element)){var s=document.getElementById(this.element.id+"_svg");if(!sf.base.isNullOrUndefined(s)){s.style.display="none";var n=this.element.getBoundingClientRect();e=n.width,t=n.height,s.style.removeProperty("display")}}this.previousHeight===t&&this.previousWidth===e||(this.previousHeight=t,this.previousWidth=e,sf.base.isNullOrUndefined(this.dotNetRef)||(this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=window.setTimeout((function(){i.dotNetRef.invokeMethodAsync("TriggerResize",e,t,sf.base.Browser.isIE)}),500)))},e.prototype.mouseDown=function(e){this.enableDrillDown&&document.getElementById(this.element.id+"_svg").setAttribute("cursor","auto"),this.mouseDownProcess(e)},e.prototype.mouseDownProcess=function(e){e.preventDefault();var t=this.getElementId(e.target.id);this.dotNetRef&&this.dotNetRef.invokeMethodAsync("TriggerMouseDown",e.target.id,t,3===e.which,e.layerX,e.layerY)},e.prototype.mouseUp=function(e){this.mouseUpProcess(e)},e.prototype.mouseUpProcess=function(e){var t=this.getElementId(e.target.id);this.dotNetRef&&this.dotNetRef.invokeMethodAsync("TriggerMouseUp",e.target.id,t,3===e.which)},e.prototype.mouseMove=function(e){var t,i;if(null!=this.element){var s=this.element.children[1],n=s.getBoundingClientRect(),o=s.ownerDocument.defaultView.pageXOffset,r=s.ownerDocument.defaultView.pageYOffset,a=s.ownerDocument.documentElement.clientTop,l=s.ownerDocument.documentElement.clientLeft,h=n.left+o-l,d=n.top+r-a;t=e.pageX-h,i=e.pageY-d}this.dotNetRef&&this.dotNetRef.invokeMethodAsync("TriggerMouseMove",e.target.id,t,i,!1);var c=e.target.id;this.enableDrillDown&&(c.indexOf("_Level_Index_")>-1&&c.indexOf("_Item_Index_")>-1&&c.indexOf("_Text")>-1&&parseInt(c.split("_Level_Index_")[1])!==this.levelCount-1&&(e.target.textContent.indexOf("[+]")>-1||e.target.textContent.indexOf("[-]")>-1)?document.getElementById(this.element.id+"_svg").setAttribute("cursor","pointer"):document.getElementById(this.element.id+"_svg").setAttribute("cursor","auto"))},e.prototype.mouseLeave=function(e){this.dotNetRef&&this.dotNetRef.invokeMethodAsync("TriggerMouseLeave")},e.prototype.getElementId=function(e){return sf.base.isNullOrUndefined(e)||""===e?"":document.getElementById(e).textContent},e}();return{initialize:function(t,i,s,n){return new e(t,i).initializeEvents(),this.getElementSize(t.id,s,n)},getElementSize:function(e,t,i){var s,n,o=document.getElementById(e);if(null!=o){o.style.height=t,o.style.width=i;var r=o.getBoundingClientRect();s=r.width,n=r.height}return{width:s,height:n,isIE:sf.base.Browser.isIE}},updateProperty:function(e,t){var i=window.sfBlazor.getCompInstance(e);i&&i.element&&(i.enableDrillDown=t.enableDrillDown,i.levelCount=t.levelCount)},setElementAttribute:function(e,t,i,s,n,o,r,a,l){for(var h=0;h<i.length;h++){var d=document.getElementById(i[h]+"_RectPath");if(null!==d){var c=d.getAttribute("class"),p=void 0;if(sf.base.isNullOrUndefined(c)&&(p=document.createAttribute("class"),c=""),"Selection"===a&&"treeMapHighlight"===c&&(d.setAttribute("class",""),c=""),"treeMapSelection"!==c){for(var u=0;u<t.length;u++){var f=document.getElementById(t[u]);null!==f&&(f.setAttribute("fill",s),f.setAttribute("opacity",n),f.setAttribute("stroke",o),f.setAttribute("stroke-width",r))}d.setAttribute("fill",s),d.setAttribute("opacity",n),d.setAttribute("stroke",o),d.setAttribute("stroke-width",r),c="Highlight"===a||"LegendHighlight"===a?"treeMapHighlight":"treeMapSelection",!sf.base.isNullOrUndefined(p)&&sf.base.isNullOrUndefined(d.getAttribute("class"))?(p.value=c,d.setAttributeNode(p)):d.setAttribute("class",c);var g=window.sfBlazor.getCompInstance(l).getElementId(i[h]+"_Text");"Selection"===a?e.invokeMethodAsync("TriggerItemSelect",g):"Highlight"===a&&e.invokeMethodAsync("TriggerItemHighlight")}}}},removeElementAttribute:function(e,t,i,s,n,o,r,a,l,h,d){for(var c=0;c<o.length;c++){var p=document.getElementById(o[c]+"_RectPath");if(null!=p){var u=p.getAttribute("class");if("Highlight"===d&&"treeMapSelection"!==u||"Selection"===d&&"treeMapSelection"===u){for(var f=0;f<e.length;f++){var g=document.getElementById(e[f]);null!=g&&(g.setAttribute("fill",t),g.setAttribute("opacity",i),g.setAttribute("stroke",s),g.setAttribute("stroke-width",n))}p.setAttribute("fill",r[c]),p.setAttribute("opacity",a[c]),p.setAttribute("stroke",l[c]),p.setAttribute("stroke-width",h[c]),p.setAttribute("class","")}}}},templateElementSize:function(e,t){for(var i,s,n,o,r=document.getElementById(e),a=r.clientWidth,l=r.clientHeight,h=r.getAttribute("style").split(";"),d=0;d<h.length;d++){if(-1!==h[d].indexOf("left")){var c=h[d].split(":"),p=parseFloat(c[c.length-1]);i=-1!==t.indexOf("Left")?p:-1===t.indexOf("Right")?p-a/2:p-a,h[d]="left:"+i+"px"}else if(-1!==h[d].indexOf("top")){var u=h[d].split(":"),f=parseFloat(u[u.length-1]);s=-1!==t.indexOf("Top")?f:-1===t.indexOf("Bottom")?f-l/2:f-l,h[d]="top:"+s+"px"}o=h[d]+";",n=0===d?o:n.concat(o)}r.setAttribute("style",n)},setTemplateTooltipLocation:function(e,t,i){var s=document.getElementById(e+"_Tooltip"),n=document.getElementById(e+"_TreeMap_Border");if(s&&n){var o,r=Number(n.getAttribute("x")),a=Number(n.getAttribute("y")),l=Number(n.getAttribute("width")),h=s.getBoundingClientRect(),d=void 0;i-h.height<a?(d=t+h.width/2>l?(l-h.width).toString()+"px":t-h.width/2<r?s.style.left=r.toString()+"px":(t-h.width/2).toString()+"px",o=i.toString()+"px"):t+h.width/2>l?(d=(l-h.width).toString()+"px",o=(i-h.height).toString()+"px"):t-h.width/2<r?(d=r.toString()+"px",o=(i-h.height).toString()+"px"):(d=(t-h.width/2).toString()+"px",o=(i-h.height).toString()+"px"),s.style.left=d||"0",s.style.top=o||"0",s.style.visibility="visible"}},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.element&&t.unWireEvents()}}}()},"./modules/sf-treeview.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sfBlazor=window.sfBlazor||{},window.sfBlazor.TreeView=function(){"use strict";var e="e-list-item",t="e-list-parent",s="e-hover",n="e-icon-collapsible",o="e-icon-expandable",r="e-icons",a="block",l="e-active",h="e-treeview",d="e-node-focus",c="e-checkbox-wrapper",p="e-text-content",u="e-sibling",f="e-drop-in",g="e-drop-next",m="e-no-drop",v="e-disable",b=function(){function b(e,t,i,s){this.isHelperElement=!0,this.mouseDownStatus=!1,this.mouseUpStatus=!1,this.preventExpand=!1,this.keyBoardAction=!1,this.isNodeRendered=!1,this.isEdited=!1,this.startTime=0,this.endTime=0,this.isKeyUp=!1,this.timer=0,this.element=t,this.dataId=e,this.dotNetRef=s,this.options=i,window.sfBlazor.setCompInstance(this)}return b.prototype.render=function(){this.dragStartAction=!1,this.listBaseOption={expandCollapse:!0,showIcon:!0,expandIconClass:o,expandIconPosition:"Left"},this.keyConfigs={escape:"escape",end:"end",enter:"enter",f2:"f2",home:"home",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlDown:"ctrl+downarrow",ctrlUp:"ctrl+uparrow",ctrlEnter:"ctrl+enter",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",ctrlA:"ctrl+A",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftEnter:"shift+enter",shiftHome:"shift+home",shiftEnd:"shift+end",csDown:"ctrl+shift+downarrow",csUp:"ctrl+shift+uparrow",csEnter:"ctrl+shift+enter",csHome:"ctrl+shift+home",csEnd:"ctrl+shift+end",space:"space"},this.animationObj=new sf.base.Animation({});var e=this.element.querySelectorAll("li");e.length>0&&e[0].setAttribute("tabindex","0"),this.setDisabledMode(this.options.disabled),this.setMultiSelect(this.options.allowMultiSelection),this.options.hasTemplate&&this.element.classList.add("e-interaction")},b.prototype.setDisabledMode=function(e){this.setDragAndDrop(this.options.allowDragAndDrop),this.wireEditingEvents(this.options.allowEditing),this.checkAllDisabled(e),e?this.unWireEvents():this.wireEvents()},b.prototype.checkAllDisabled=function(e){e?this.element.classList.add("e-disabled"):this.element.classList.remove("e-disabled")},b.prototype.setEnableRtl=function(){(this.options.enableRtl?sf.base.addClass:sf.base.removeClass)([this.element],"e-rtl")},b.prototype.updateWrap=function(e){if(this.options.fullRowSelect)for(var t=sf.base.selectAll("li",e||this.element),i=t.length,s=0;s<i;s++){var n=sf.base.select(".e-fullrow",t[s]);n&&n.nextElementSibling&&(n.style.height=this.options.allowTextWrap?n.nextElementSibling.offsetHeight+"px":"")}},b.prototype.setTextWrap=function(){this.options.allowTextWrap&&!this.element.classList.contains("e-text-wrap")?sf.base.addClass([this.element],"e-text-wrap"):!this.options.allowTextWrap&&this.element.classList.contains("e-text-wrap")&&sf.base.removeClass([this.element],"e-text-wrap"),this.updateWrap()},b.prototype.mouseDownHandler=function(e){this.mouseDownStatus=!0,(e.shiftKey||e.ctrlKey)&&e.preventDefault(),e.ctrlKey&&this.options.allowMultiSelection&&sf.base.EventHandler.add(this.element,"contextmenu",this.preventContextMenu,this)},b.prototype.mouseupHandler=function(){this.mouseUpStatus=!0},b.prototype.onMouseLeave=function(e){this.removeHover()},b.prototype.unWireEvents=function(){this.wireClickEvent(!1),this.wireExpandOnEvent(!1),sf.base.EventHandler.remove(this.element,"mousedown",this.mouseDownHandler),sf.base.EventHandler.remove(this.element,"focusin",this.focusIn),sf.base.EventHandler.remove(this.element,"focusout",this.focusOut),sf.base.EventHandler.remove(this.element,"mouseover",this.onMouseOver),sf.base.EventHandler.remove(this.element,"mouseout",this.onMouseLeave),sf.base.EventHandler.remove(this.element,"contextmenu",this.contextLongPress),sf.base.Browser.isDevice&&(sf.base.EventHandler.remove(this.element,"touchstart",this.touchStart),sf.base.EventHandler.remove(this.element,"touchend",this.touchEnd)),!this.options.disabled&&this.keyboardModule&&this.keyboardModule.destroy()},b.prototype.keyboardActionHandler=function(e){this.isKeyUp=!0,this.keyAction=e;var t=e.target,i=this.getFocusedNode();if(!t||!t.classList.contains("e-input")&&"INPUT"!=t.nodeName&&"TEXTAREA"!=t.nodeName){e.preventDefault();var s={cancel:!1,event:e},n=i.getAttribute("data-uid");this.dotNetRef.invokeMethodAsync("TriggerKeyboardEvent",s,n,e.action,e.key)}else{var o=t;"enter"===e.action?(o.blur(),i.focus(),sf.base.addClass([i],d)):"escape"===e.action&&(o.value=this.oldText,o.blur(),i.focus(),sf.base.addClass([i],d))}},b.prototype.setMultiSelect=function(e){this.options.allowMultiSelection=e,e?this.element.setAttribute("aria-multiselectable","true"):this.element.removeAttribute("aria-multiselectable")},b.prototype.setCssClass=function(e){this.options.cssClass&&sf.base.removeClass([this.element],this.options.cssClass.split(" ")),e&&sf.base.addClass([this.element],e.split(" ")),this.options.cssClass=e},b.prototype.wireEditingEvents=function(e){var t=this;if(e&&!this.options.disabled){var i=this;this.touchEditObj=new sf.base.Touch(this.element,{tap:function(e){t.isDoubleTapped(e)&&2===e.tapCount&&(e.originalEvent.preventDefault(),i.editingHandler(e.originalEvent))}})}else this.touchEditObj&&this.touchEditObj.destroy()},b.prototype.setDragAndDrop=function(e){e&&!this.options.disabled?this.initializeDrag():this.destroyDrag()},b.prototype.setDragArea=function(e){this.options.allowDragAndDrop&&(this.dragObj.dragArea=e)},b.prototype.destroyDrag=function(){this.dragObj&&this.dropObj&&(this.dragObj.destroy(),this.dropObj.destroy())},b.prototype.scrollUp=function(e){var t=sf.base.select(".e-fullrow",this.element);e.scrollBy(0,-t.offsetHeight/2)},b.prototype.scrollDown=function(e){var t=sf.base.select(".e-fullrow",this.element);e.scrollBy(0,t.offsetHeight/2)},b.prototype.clearTimer=function(){window.clearInterval(this.timer)},b.prototype.initializeDrag=function(){var i,n=this;this.dragObj=new sf.base.Draggable(this.element,{enableTailMode:!0,dragArea:this.options.dropArea,distance:5,dragTarget:"."+p,helper:function(s){n.dragTarget=s.sender.target;var a=sf.base.closest(n.dragTarget,"."+h),d=sf.base.closest(n.dragTarget,"."+p);if(n.dragLi=sf.base.closest(n.dragTarget,"."+e),n.options.fullRowSelect&&!d&&n.dragTarget.classList.contains("e-fullrow")&&(d=n.dragTarget.nextElementSibling),!n.dragTarget||!s.element.isSameNode(a)||!d||n.dragTarget.classList.contains(h)||n.dragTarget.classList.contains(t)||n.dragTarget.classList.contains(e)||n.dragLi.classList.contains(v))return!1;var c=d.cloneNode(!0);if(sf.base.isNullOrUndefined(sf.base.select("div."+r,c))){var u=sf.base.createElement("div",{className:r+" "+o});c.insertBefore(u,c.children[0])}var f="e-drag-item "+h+" "+n.options.cssClass+" "+(n.options.enableRtl?"e-rtl":"");(i=sf.base.createElement("div",{className:f})).appendChild(c);var g=n.element.querySelectorAll("."+l).length;if(g>1&&n.options.allowMultiSelection&&n.dragLi.classList.contains(l)){var m=sf.base.createElement("span",{className:"e-drop-count",innerHTML:""+g});i.appendChild(m)}return document.body.appendChild(i),document.body.style.cursor="",n.dragData=n.getNodeData(n.dragLi),n.virtualEle=i,i},drag:function(e){if(n.clearTimer(),n.mouseUpStatus)return sf.base.detach(i),sf.base.removeClass([n.element],"e-dragging"),n.removeVirtualEle(),void(document.body.style.cursor="");n.dragObj.setProperties({cursorAt:{top:!sf.base.isNullOrUndefined(e.event.targetTouches)||sf.base.Browser.isDevice?60:-20}}),n.dragAction(e,i);var t,s=n.getScrollParent(e.target);if(!sf.base.isNullOrUndefined(s)){if(t=s.getBoundingClientRect(),n.virtualEle.style.position="fixed",e.event.y<=t.top+30||t.top<0&&e.event.y<=30){var o=n;n.timer=window.setInterval((function(){o.scrollUp(s)}),200)}if(e.event.y>=(t.top<0?s.clientHeight-60:t.top+s.clientHeight-60)){var r=n;n.timer=window.setInterval((function(){r.scrollDown(s)}),200)}}},dragStart:function(t){sf.base.addClass([n.element],"e-dragging");var s,o=sf.base.closest(t.target,"."+e);o&&(s=parseInt(o.getAttribute("aria-level"),10),sf.base.EventHandler.add(o,"mouseup",n.mouseupHandler,n));var r=n.getDragEvent(t.event,n,null,t.target,null,i,s);if(r.draggedNode.classList.contains("e-editing"))n.dragObj.intDestroy(t.event),n.dragCancelAction(i);else{n.dragStartEventArgs=t;var a=n.getXYValue(t.event,"X"),l=n.getXYValue(t.event,"Y");i.style.display="none",n.dotNetRef.invokeMethodAsync("TriggerDragStartEvent",n.updateObjectValues(r),a,l)}},dragStop:function(t){n.clearTimer(),sf.base.removeClass([n.element],"e-dragging");var i,o=sf.base.select("."+s,n.element);t.target.classList.contains(u)&&(t.target=sf.base.isNullOrUndefined(o)?sf.base.closest(t.target,"."+e):o),n.sibEle=sf.base.select("."+u),n.sibEle&&(i=n.sibEle.offsetTop),n.removeVirtualEle();var r=t.target;n.dropRoot=sf.base.closest(r,".e-droppable"),n.isHelperElement=!0,r&&n.dropRoot||(t.helper&&t.helper.parentNode&&sf.base.remove(t.helper),document.body.style.cursor="",n.isHelperElement=!1);var a,l=sf.base.closest(r,"."+e),h=l;h&&(n.isUp=h.offsetTop>i),sf.base.isNullOrUndefined(n.sibEle)&&(n.isUp=!0),l&&(a=parseInt(l.getAttribute("aria-level"),10),sf.base.EventHandler.remove(l,"mouseup",n.mouseupHandler),n.mouseUpStatus=!1);var d=r,c=n.getDragEvent(t.event,n,r,d,null,t.helper,a);n.dragStopEventArgs=t,c.preventTargetExpand=!1;var p=n.getXYValue(t.event,"X"),f=n.getXYValue(t.event,"Y");sf.base.isNullOrUndefined(c.dropIndicator)&&(c.dropIndicator=m,document.body.style.cursor="not-allowed"),n.dotNetRef.invokeMethodAsync("TriggerDragStopEvent",n.updateObjectValues(c),p,f)}}),this.dropObj=new sf.base.Droppable(this.element,{out:function(e){sf.base.isNullOrUndefined(e)||e.target.classList.contains(u)||(document.body.style.cursor="not-allowed")},over:function(e){document.body.style.cursor=""}})},b.prototype.updateObjectValues=function(e){return e.clonedNode=null,e.draggedNode=null,e.draggedParentNode=null,e.dropTarget=null,e.droppedNode=null,e.target=null,e},b.prototype.dragNodeStop=function(e){this.dragParent=e.draggedParentNode,this.preventExpand=e.preventTargetExpand,(e.cancel||e.dropIndicator==m)&&(this.dragStopEventArgs.helper.parentNode&&sf.base.remove(this.dragStopEventArgs.helper),document.body.style.cursor="",this.isHelperElement=!1),this.dragStartAction=!1,this.isHelperElement&&this.dropAction(this.dragStopEventArgs,!0)},b.prototype.dragStartActionContinue=function(e){e?(this.dragObj.intDestroy(this.dragStartEventArgs.event),this.dragCancelAction(this.virtualEle)):(this.virtualEle.style.display=a,this.dragStartAction=!0,this.dragStartEventArgs.bindEvents(sf.base.getElement(this.dragStartEventArgs.dragElement)))},b.prototype.getId=function(e){return sf.base.isNullOrUndefined(e)?null:"string"==typeof e?e:"object"===i(e)?sf.base.getElement(e).getAttribute("data-uid"):null},b.prototype.getOffsetValue=function(e,t){var i,s=e.target.classList;if("mozilla"!==sf.base.Browser.info.name||sf.base.isNullOrUndefined(s))i="Y"===t?e.event.offsetY:e.event.offsetX;else{var n=e.target.getBoundingClientRect();i=Math.ceil("Y"===t?e.event.clientY-n.top:e.event.clientX-n.left)}return i},b.prototype.dropAction=function(t,i){var s,n,o=this.getOffsetValue(t,"Y"),r=t.target,a=!1;if((s=i?window.sfBlazor.getCompInstance(this.dataId):t.dragData.draggable.blazor__instance)&&s.dragTarget){var d=s.dragTarget,c=sf.base.closest(d,"."+e),p=sf.base.closest(r,"."+e);if(null==p&&r.classList.contains(h)&&(p=r.firstElementChild),i?sf.base.remove(t.helper):sf.base.remove(t.droppedElement),r&&!r.closest("."+h+".e-droppable"))return;if(document.body.style.cursor="",!p||p.isSameNode(c)||this.isDescendant(c,p))return;if(s.options.allowMultiSelection&&c.classList.contains(l)){var u=sf.base.selectAll("."+l,s.element);if(t.target.offsetHeight<=33&&o>t.target.offsetHeight-10&&o>6)for(var f=u.length-1;f>=0;f--)p.isSameNode(u[f])||this.isDescendant(u[f],p)||this.appendNode(r,u[f],p,t,s,o);else for(f=0;f<u.length;f++)p.isSameNode(u[f])||this.isDescendant(u[f],p)||this.appendNode(r,u[f],p,t,s,o)}else this.appendNode(r,c,p,t,s,o);n=parseInt(c.getAttribute("aria-level"),10),a=!0}var g=i?t.element:t.dragData.draggedElement,m=this.getDragEvent(t.event,s,r,t.target,g,null,n,a),v=this.getXYValue(t.event,"X"),b=this.getXYValue(t.event,"Y");this.dotNetRef.invokeMethodAsync("TriggerNodeDropped",this.updateObjectValues(m),v,b)},b.prototype.isDoubleTapped=function(t){var i,s=t.originalEvent.target;return s&&t.tapCount&&(1===t.tapCount?this.firstTap=sf.base.closest(s,"."+e):2===t.tapCount&&(i=sf.base.closest(s,"."+e))),this.firstTap===i},b.prototype.isDescendant=function(e,t){for(var i=t.parentNode;!sf.base.isNullOrUndefined(i);){if(i===e)return!0;i=i.parentNode}return!1},b.prototype.appendNode=function(e,t,i,s,r,a){var l=sf.base.closest(e,"."+c),d=sf.base.closest(s.target,"."+n),p=sf.base.closest(s.target,"."+o),u=this.getOffsetValue(s,"X");t.classList.contains(v)||l||!(p&&a<5||d&&u<3||p&&a>19||d&&u>19||!p&&!d)?this.dropAsChildNode(t,i,r,null,s,a,!0):"LI"===e.nodeName?this.dropAsSiblingNode(t,i,s,r):e.firstElementChild&&e.classList.contains(h)?"UL"===e.firstElementChild.nodeName&&this.dropAsSiblingNode(t,i,s,r):e.classList.contains(n)||e.classList.contains(o)?this.dropAsSiblingNode(t,i,s,r):this.dropAsChildNode(t,i,r,null,s,a)},b.prototype.dropAsSiblingNode=function(i,s,r,a){var l,h=sf.base.closest(s,"."+t),d=sf.base.closest(i,"."+t),c=sf.base.closest(d,"."+e),p=sf.base.closest(h,"."+e),f=null,g=null,m=this.getOffsetValue(r,"X"),v=this.getOffsetValue(r,"Y");r.target.offsetHeight>0&&v>r.target.offsetHeight-2?l=!1:v<2?l=!0:(r.target.classList.contains(o)||r.target.classList.contains(n))&&(v<5||m<3?l=!0:(v>15||m>17)&&(l=!1)),r.event.target.classList.contains(u)&&this.isUp&&(l=!0),p&&(f=p.getAttribute("data-uid")),c&&(g=c.getAttribute("data-uid"));var b=this.isExternalDrop(i),y=this.dropRoot?window.sfBlazor.getCompInstance(this.dataId):null,M=b?y:this,C=this.getDropArgs(i,s,g,a,f,l);M.dotNetRef.invokeMethodAsync("DropNodeAsSibling",C),this.updateAriaLevel(i)},b.prototype.updateAriaLevel=function(e){var i=this.parents(e,"."+t).length;e.setAttribute("aria-level",""+i),this.updateChildAriaLevel(sf.base.select("."+t,e),i+1)},b.prototype.updateChildAriaLevel=function(e,i){if(!sf.base.isNullOrUndefined(e))for(var s=e.querySelectorAll("li"),n=0,o=s.length;n<o;n++){var r=s[n];r.setAttribute("aria-level",""+i),this.updateChildAriaLevel(sf.base.select("."+t,r),i+1)}},b.prototype.dropAsChildNode=function(i,s,n,o,r,a,l){var d=sf.base.closest(i,"."+t),c=sf.base.closest(d,"."+e),p=sf.base.closest(s,"."+t),u=sf.base.closest(p,"."+e),f=null,g=null;u&&(f=u.getAttribute("data-uid")),c&&(g=c.getAttribute("data-uid"));var m,v=this.isExternalDrop(i),b=sf.base.closest(i,"."+h)||this.element?window.sfBlazor.getCompInstance(this.dataId):null,y=this.dropRoot?window.sfBlazor.getCompInstance(this.dropRoot.getAttribute("data-id")):null,M=v?y:this;r&&a<7&&!l?(m=this.getDropArgs(i,s,g,b,f,!0),M.dotNetRef.invokeMethodAsync("DropNodeAsSibling",m)):r&&r.target.offsetHeight>0&&a>r.target.offsetHeight-10&&!l?(m=this.getDropArgs(i,s,g,b,f,!1),M.dotNetRef.invokeMethodAsync("DropNodeAsSibling",m)):(m=this.getDropArgs(i,s,g,b),M.dotNetRef.invokeMethodAsync("DropNodeAsChild",m)),this.updateAriaLevel(i)},b.prototype.isExternalDrop=function(e){var t=!1,i=sf.base.closest(e,"."+h)?sf.base.closest(e,"."+h):this.element,s=this.dropRoot;return null==i||null==s||i.isSameNode(s)||(t=!0),t},b.prototype.getDropArgs=function(e,t,i,s,n,o){return{dragLi:e.getAttribute("data-uid"),dropLi:t.getAttribute("data-uid"),dragParentLi:i,dropParentLi:n,pre:o,srcTree:s.dotNetRef,isExternalDrag:this.isExternalDrop(e)}},b.prototype.dragCancelAction=function(e){sf.base.detach(e),sf.base.removeClass([this.element],"e-dragging"),this.dragStartAction=!1},b.prototype.removeVirtualEle=function(){var e=sf.base.select("."+u);e&&sf.base.detach(e)},b.prototype.dragAction=function(t,i){var s=sf.base.closest(t.target,".e-droppable"),a=sf.base.closest(t.target,"."+p),l=sf.base.select("div."+r,i),d=this.getOffsetValue(t,"X"),v=this.getOffsetValue(t,"Y");sf.base.removeClass([l],[f,g,"e-drop-out",m]),this.removeVirtualEle(),document.body.style.cursor="";var b=t.target.classList;if(this.options.fullRowSelect&&!a&&!sf.base.isNullOrUndefined(b)&&b.contains("e-fullrow")&&(a=t.target.nextElementSibling),s){var y=sf.base.closest(t.target,"."+e),M=sf.base.closest(t.target,"."+c),C=sf.base.closest(t.target,"."+n),w=sf.base.closest(t.target,"."+o);if(!s.classList.contains(h)||a&&!y.isSameNode(this.dragLi)&&!this.isDescendant(this.dragLi,y))if(y&&t&&!w&&!C&&v<7&&!M||w&&v<5||C&&d<3){sf.base.addClass([l],g);var S=sf.base.createElement("div",{className:u}),N=this.options.fullRowSelect?1:0;y.insertBefore(S,y.children[N])}else if(y&&t&&!w&&!C&&t.target.offsetHeight>0&&v>t.target.offsetHeight-10&&!M||w&&v>19||C&&d>19){sf.base.addClass([l],g);S=sf.base.createElement("div",{className:u}),N=this.options.fullRowSelect?2:1;y.insertBefore(S,y.children[N])}else sf.base.addClass([l],f);else"LI"!==t.target.nodeName||y.isSameNode(this.dragLi)||this.isDescendant(this.dragLi,y)?t.target.classList.contains(u)?sf.base.addClass([l],g):t.target.classList.contains("e-droppable")?sf.base.addClass([l],f):sf.base.addClass([l],"e-drop-out"):(sf.base.addClass([l],g),this.renderVirtualEle(t))}else sf.base.addClass([l],m),document.body.style.cursor="not-allowed";var x,O=sf.base.closest(t.target,e);O&&(x=parseInt(O.getAttribute("aria-level"),10));var E=this.getDragEvent(t.event,this,t.target,t.target,null,i,x);E.dropIndicator&&sf.base.removeClass([l],E.dropIndicator),this.iconElement=l,this.draggingEventArgs=E;var I=this.getXYValue(t.event,"X"),D=this.getXYValue(t.event,"Y");this.dotNetRef.invokeMethodAsync("TriggerNodeDraggingEvent",this.updateObjectValues(E),I,D)},b.prototype.nodeDragging=function(e){this.draggingEventArgs.dropIndicator&&sf.base.addClass([this.iconElement],this.draggingEventArgs.dropIndicator)},b.prototype.renderVirtualEle=function(e){var t,i=this.getOffsetValue(e,"Y");i>e.target.offsetHeight-2?t=!1:i<2&&(t=!0);var s=sf.base.createElement("div",{className:u}),n=this.options.fullRowSelect?t?1:2:t?0:1;this.dropTargetElement=e.target.children[n],e.target.insertBefore(s,e.target.children[n])},b.prototype.parents=function(e,t){for(var i=[],s=e.parentNode;!sf.base.isNullOrUndefined(s);)sf.base.matches(s,t)&&i.push(s),s=s.parentNode;return i},b.prototype.getDragEvent=function(t,i,s,n,o,a,l,d){var c=s?sf.base.closest(s,"."+e):null,p=c?this.getNodeData(c):null,u=i?i.dragLi:o,v=i?i.dragData:null,b=s?this.parents(s,"."+e):null,y=i.dragLi.parentElement,M=i.dragLi?sf.base.closest(y,"."+e):null,C=null,w=null,S=[g,f,"e-drop-out",m],N=null,x=d?u:c,O=x?sf.base.closest(x,".e-list-parent"):null,E=0;if(M=i.dragLi&&null===M?sf.base.closest(y,"."+h):M,M=d?this.dragParent:M,a)for(;E<4;){if(sf.base.select("."+r,a).classList.contains(S[E])){N=S[E];break}E++}if(O){for(var I=void 0,D=i.element.querySelectorAll("."+c.classList[1]),T=0;T<D.length&&(D[T]===c&&(w=T),D[T]===u&&(I=T),sf.base.isNullOrUndefined(I)||sf.base.isNullOrUndefined(w));T++);if(sf.base.isNullOrUndefined(this.sibEle)){if(I>w&&(w+=1),u.classList[1]!==c.classList[1]?w=0!==w?w===D.length-1?D.length:w+1:0:t.offsetY<=5&&0!=w&&(w-=1),N===f&&(w=0,c.classList.contains("e-has-child"))){var j=parseInt(c.getAttribute("aria-level"))+1,A=c.querySelectorAll('[aria-level="'+j+'"]');w=-1===Array.from(A).findIndex((function(e){return e==u}))?A.length:A.length-1}}else I>(w=u.classList[1]===c.classList[1]?this.isUp?w-1:w:w===D.length-1?this.isUp?w:D.length:this.isUp?w:w+1)&&(w+=1);null!=N&&N!=m||(w=null)}if(s&&(C=0===b.length?null:s.classList.contains(e)?b[0]:b[1]),c===u&&(C=c),s&&n.offsetHeight<=33&&t.offsetY<n.offsetHeight-10&&t.offsetY>6&&(C=c,!d)){l=++l;var z=C?sf.base.select(".e-list-parent",C):null;w=z?z.children.length:0}return{cancel:!1,clonedNode:a,event:t,draggedNode:u,draggedNodeData:v,droppedNode:c,droppedNodeData:p,dropIndex:w,dropLevel:l,draggedParentNode:M,dropTarget:C,dropIndicator:N,target:n}},b.prototype.editingHandler=function(i){var s=i.target;!s||s.classList.contains(h)||s.classList.contains(t)||s.classList.contains(e)||s.classList.contains(r)||s.classList.contains("e-input")||s.classList.contains("e-input-group")||this.createTextbox(sf.base.closest(s,"."+e),i)},b.prototype.createTextbox=function(e,t){this.editEventArgs=this.getEditEvent(e,null,null),sf.base.addClass([e],"e-editing"),this.isEdited=!0,this.dotNetRef.invokeMethodAsync("TriggerNodeEditingEvent",this.editEventArgs)},b.prototype.getEditEvent=function(e,t,i){return{newText:t,nodeData:this.getNodeData(e),oldText:this.oldText,innerHtml:i}},b.prototype.focusIn=function(){if("INPUT"==document.activeElement.nodeName||"TEXTAREA"==document.activeElement.nodeName){var e=document.activeElement;this.updateOldText(e.value)}this.mouseDownStatus||sf.base.addClass([this.getFocusedNode()],d),this.mouseDownStatus=!1},b.prototype.focusOut=function(){this.removeHover(),sf.base.removeClass([this.getFocusedNode()],d)},b.prototype.touchStart=function(e){this.startTime=e.timeStamp},b.prototype.touchEnd=function(t){if(this.endTime=t.timeStamp,this.endTime-this.startTime>500&&!this.dragStartAction){var i=t.target,s=sf.base.closest(i,"."+e);t.preventDefault(),this.toggleSelect(s,t,!0)}},b.prototype.wireEvents=function(){if(!this.options.disabled){if(this.setExpandOnType(),sf.base.EventHandler.add(this.element,"mousedown",this.mouseDownHandler,this),sf.base.EventHandler.add(this.element,"mouseover",this.onMouseOver,this),sf.base.EventHandler.add(this.element,"focusin",this.focusIn,this),sf.base.EventHandler.add(this.element,"focusout",this.focusOut,this),sf.base.EventHandler.add(this.element,"mouseout",this.onMouseLeave,this),sf.base.EventHandler.add(this.element,"contextmenu",this.contextLongPress,this),sf.base.Browser.isDevice&&(sf.base.EventHandler.add(this.element,"touchstart",this.touchStart,this),sf.base.EventHandler.add(this.element,"touchend",this.touchEnd,this)),this.options.showCheckBox){var e=sf.base.select(".e-frame",this.element);sf.base.isNullOrUndefined(e)||(sf.base.EventHandler.add(e,"mousedown",this.frameMouseHandler,this),sf.base.EventHandler.add(e,"mouseup",this.frameMouseHandler,this))}this.wireClickEvent(!0),"None"!==this.options.expandOnType&&this.wireExpandOnEvent(!0),this.keyboardModule=new sf.base.KeyboardEvents(this.element,{keyAction:this.keyboardActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}},b.prototype.frameMouseHandler=function(e){var t=sf.base.select(".e-ripple-container",e.target.parentElement);this.rippleMouseHandler(e,t)},b.prototype.rippleMouseHandler=function(e,t){if(t){var i=document.createEvent("MouseEvents");i.initEvent(e.type,!1,!0),t.dispatchEvent(i)}},b.prototype.setExpandOnType=function(){var e=this.options.expandOnType;this.options.expandOnType="DoubleClick"===e?sf.base.Browser.isDevice?"Click":"DoubleClick":e},b.prototype.expandHandler=function(i){var s=i.originalEvent.target;!s||s.classList.contains("e-input")||s.classList.contains(h)||s.classList.contains(t)||s.classList.contains(e)||s.classList.contains(r)||this.options.showCheckBox&&sf.base.closest(s,"."+c)||this.expandCollapseAction(sf.base.closest(s,"."+e),i)},b.prototype.expandCollapseAction=function(e,t){var i=sf.base.select("div."+r,e);if(i&&!i.classList.contains("e-process")){var s=i.classList;s.contains(o)?this.expandAction(e,t):s.contains(n)&&(this.tapEvent=t,this.expandArgs=this.getExpandEvent(e,t),this.dotNetRef.invokeMethodAsync("NodeCollapsingEventCallback",this.expandArgs,!1))}},b.prototype.animateHeight=function(e,t,i){var s=(i-t)*((e.duration-e.timeStamp)/e.duration)+t;e.element.parentElement.style.height=s+"px"},b.prototype.expandAction=function(e,i){if(this.expandArgs=this.getExpandEvent(e,i),this.options.allowTextWrap){var s=sf.base.select("."+t,e);this.isNodeRendered=!!s}e&&e.classList.contains("e-process")&&sf.base.removeClass([e],"e-process"),this.dotNetRef.invokeMethodAsync("TriggerNodeExpandingEvent",this.expandArgs)},b.prototype.collapseAction=function(i,s,a,h){if(sf.base.isNullOrUndefined(s)&&(s=this.tapEvent),this.expandArgs=this.getExpandEvent(i,s),!h){var d=0,c=0,u=this,f=sf.base.select("."+t,i),g=i,m=sf.base.select("."+e+"."+l,i);if(f){var v=sf.base.select("div."+r,g);sf.base.removeClass([v],n),sf.base.addClass([v],o)}sf.base.isNullOrUndefined(i.getAttribute("aria-expanded"))||i.setAttribute("aria-expanded","false"),0===this.options.animation.collapse.duration?(f.style.display="none",u.dotNetRef.invokeMethodAsync("TriggerNodeCollapsingEvent",u.expandArgs),a&&u.triggerClickEvent(s.originalEvent,i)):this.animationObj.animate(f,{name:"None"===this.options.animation.collapse.effect&&"Enable"===sf.base.animationMode?"SlideUp":this.options.animation.collapse.effect,duration:this.options.animation.collapse.duration,timingFunction:this.options.animation.collapse.easing,begin:function(e){g.style.overflow="hidden",!sf.base.isNullOrUndefined(m)&&m instanceof HTMLElement&&m.classList.add("e-animation-active"),d=sf.base.select("."+p,i).offsetHeight,c=g.offsetHeight},progress:function(e){u.animateHeight(e,d,c)},end:function(e){e.element.style.display="none",!sf.base.isNullOrUndefined(m)&&m instanceof HTMLElement&&m.classList.remove("e-animation-active"),u.dotNetRef.invokeMethodAsync("TriggerNodeCollapsingEvent",u.expandArgs),a&&u.triggerClickEvent(s.originalEvent,i)}})}},b.prototype.wireExpandOnEvent=function(e){var t=this;if(e){var i=this;this.touchExpandObj=new sf.base.Touch(this.element,{tap:function(e){("Click"===t.options.expandOnType||"DoubleClick"===t.options.expandOnType&&t.isDoubleTapped(e)&&2===e.tapCount)&&3!==e.originalEvent.which&&i.expandHandler(e)}})}else this.touchExpandObj&&this.touchExpandObj.destroy()},b.prototype.getNodeData=function(t,i){if(!sf.base.isNullOrUndefined(t)&&t.classList.contains(e)&&!sf.base.isNullOrUndefined(sf.base.closest(t,".e-control"))&&sf.base.closest(t,".e-control").classList.contains(h)){var s=t.getAttribute("data-uid"),n=sf.base.closest(t.parentNode,"."+e),o=n?n.getAttribute("data-uid"):null,r=t.classList.contains(l),a="true"===t.getAttribute("aria-expanded"),d=null===t.getAttribute("aria-expanded"),p=null;return this.options.showCheckBox&&(p=sf.base.select("."+c,t).getAttribute("aria-checked")),{id:s,text:null,parentID:o,selected:r,expanded:a,isChecked:p,hasChildren:d}}return{id:"",text:"",parentID:"",selected:!1,expanded:!1,isChecked:"",hasChildren:!1}},b.prototype.getExpandEvent=function(e,t){var i=this.getNodeData(e);return{isInteracted:!sf.base.isNullOrUndefined(t),nodeData:i,event:t,isLoaded:null!=e.querySelector("ul"),nodeLevel:parseInt(e.getAttribute("aria-level"),10)}},b.prototype.updateSpinnerClass=function(){var e=this.element.querySelector(".e-icons-spinner");sf.base.removeClass([e],"e-icons-spinner")},b.prototype.expandedNode=function(i){var s=this,h=this.element.querySelector('[data-uid="'+i.nodeData.id+'"]');this.focussedElement=h;var d=sf.base.select("."+t,h);if(d){d.classList.remove("e-display-none");var c=sf.base.select("div."+r,h);this.expandArgs=this.getExpandEvent(h,i.event);var u=h,f=sf.base.select("."+e+"."+l,h),g=0,m=0,v=this;this.setHeight(u,d),0===this.options.animation.expand.duration?(sf.base.removeClass([c],o),sf.base.addClass([c],n),v.dotNetRef.invokeMethodAsync("TriggerNodeExpandedEvent",v.expandArgs),d.style.display=a,u.style.display=a,u.style.overflow="",u.style.height="",sf.base.removeClass([c],"e-icons-spinner"),!this.options.allowTextWrap||this.isNodeRendered&&!this.isEdited||(this.isEdited=!1,this.updateWrap(d))):this.animationObj.animate(d,{name:"None"===this.options.animation.expand.effect&&"Enable"===sf.base.animationMode?"SlideDown":this.options.animation.expand.effect,duration:this.options.animation.expand.duration,timingFunction:this.options.animation.expand.easing,begin:function(e){u.style.overflow="hidden",!sf.base.isNullOrUndefined(f)&&f instanceof HTMLElement&&f.classList.add("e-animation-active"),g=u.offsetHeight,m=sf.base.select("."+p,h).offsetHeight},progress:function(e){sf.base.removeClass([c],o),sf.base.addClass([c],n),e.element.style.display=a,v.animateHeight(e,g,m)},end:function(e){e.element.style.display=a,!sf.base.isNullOrUndefined(f)&&f instanceof HTMLElement&&f.classList.remove("e-animation-active"),v.dotNetRef.invokeMethodAsync("TriggerNodeExpandedEvent",v.expandArgs),d.style.display=a,u.style.display=a,u.style.overflow="",u.style.height="",sf.base.removeClass([c],"e-icons-spinner"),!s.options.allowTextWrap||s.isNodeRendered&&!s.isEdited||(s.isEdited=!1,s.updateWrap(d))}})}if(!d){this.expandArgs=this.getExpandEvent(h,i.event),this.dotNetRef.invokeMethodAsync("TriggerNodeExpandedEvent",this.expandArgs)}this.setHover(this.getFocusedNode())},b.prototype.setHeight=function(e,t){t.style.display=a,t.style.visibility="hidden",e.style.height=e.offsetHeight+"px",t.style.display="none",t.style.visibility=""},b.prototype.collapsedNode=function(e){var t=this.element.querySelector('[data-uid="'+e.nodeData.id+'"]');this.focussedElement=t;var i=t.querySelector("ul");i&&(i.style.display="none",i.classList.add("e-display-none")),t.style.overflow="",t.style.height="",this.expandArgs=this.getExpandEvent(t,null);var s=sf.base.select("div."+r,t);sf.base.removeClass([s],n),sf.base.addClass([s],o),this.dotNetRef.invokeMethodAsync("TriggerNodeCollapsedEvent",this.expandArgs)},b.prototype.preventContextMenu=function(e){e.preventDefault()},b.prototype.contextLongPress=function(t){var i=t.target,s={event:t,node:null},n=sf.base.closest(i,"."+e);this.dotNetRef.invokeMethodAsync("TriggerNodeClickingEvent",s,n.getAttribute("data-uid"),this.getXYValue(s.event,"X"),this.getXYValue(s.event,"Y"))},b.prototype.clickHandler=function(i){this.tapEvent=i;var s=i.originalEvent.target,a=!1;if(sf.base.EventHandler.remove(this.element,"contextmenu",this.preventContextMenu),s){if("INPUT"==s.nodeName||"TEXTAREA"==s.nodeName){var l=s;this.updateOldText(l.value)}var h=s.classList,d=sf.base.closest(s,"."+e);if(d){if(3!==i.originalEvent.which){var p=sf.base.select(".e-ripple-element",d),u=sf.base.select("."+r,d);if(this.removeHover(),this.focussedElement=d,this.setFocusElement(d),this.options.showCheckBox&&!d.classList.contains(v)){var f=sf.base.closest(s,"."+c);if(!sf.base.isNullOrUndefined(f)){var g=sf.base.select(".e-frame",f);return this.validateCheckNode(f,g.classList.contains("e-check"),d,i.originalEvent),void this.triggerClickEvent(i.originalEvent,d)}}h.contains(o)?this.expandAction(d,i):h.contains(n)?(this.expandArgs=this.getExpandEvent(d,i),this.dotNetRef.invokeMethodAsync("NodeCollapsingEventCallback",this.expandArgs,!0),a=!0):p&&u?u.classList.contains("e-ripple")&&u.classList.contains(o)?this.expandAction(d,i):u.classList.contains("e-ripple")&&u.classList.contains(n)?(this.collapseAction(d,i,!0),a=!0):h.contains(t)||h.contains(e)||this.toggleSelect(d,i.originalEvent,!1):h.contains(t)||h.contains(e)||this.toggleSelect(d,i.originalEvent,!1)}a||this.triggerClickEvent(i.originalEvent,d)}}},b.prototype.getXYValue=function(e,t){var i,s=e.changedTouches;if(!(i="X"===t?s?s[0].clientX:e.clientX:s?s[0].clientY:e.clientY)&&"focus"===e.type&&e.target){var n=e.target.getBoundingClientRect();i=n?"X"===t?n.left:n.top:null}return Math.ceil(i)},b.prototype.triggerClickEvent=function(e,t){var i={event:e,node:null};this.dotNetRef.invokeMethodAsync("TriggerNodeClickingEvent",i,t.getAttribute("data-uid"),this.getXYValue(e,"X"),this.getXYValue(e,"Y"))},b.prototype.getCheckEvent=function(e,t,i){return{action:t,isInteracted:!sf.base.isNullOrUndefined(i),nodeData:this.getNodeData(e)}},b.prototype.validateCheckNode=function(t,i,s,n){var o=sf.base.closest(t,"."+e),r=i?"false":"true";sf.base.isNullOrUndefined(r)||t.setAttribute("aria-checked",r);var a=this.getCheckEvent(o,i?"uncheck":"check",n);this.dotNetRef.invokeMethodAsync("TriggerNodeCheckingEvent",a)},b.prototype.toggleSelect=function(e,t,i){e.classList.contains(v)||(this.options.allowMultiSelection&&(t&&t.ctrlKey||i)&&this.isActive(e)?this.unselectNode(e,t,i):(this.selectNode(e,t,i),this.options.allowMultiSelection&&t&&(t.ctrlKey||t.shiftKey)&&(this.setFocusElement(e),this.focussedElement=e)))},b.prototype.unselectNode=function(e,t,i){var s=this.getSelectEvent(e,"un-select",t,i,[]);this.dotNetRef.invokeMethodAsync("TriggerNodeSelectingEvent",s)},b.prototype.getSelectEvent=function(e,t,i,s,n){var o=this.getNodeData(e);return{action:t,isInteracted:!sf.base.isNullOrUndefined(i),nodeData:o,isMultiSelect:s,isCtrKey:!(sf.base.isNullOrUndefined(i)||!i.ctrlKey),isShiftKey:!(sf.base.isNullOrUndefined(i)||!i.shiftKey),nodes:n}},b.prototype.selectNode=function(t,i,s){if(sf.base.isNullOrUndefined(t)||!this.options.allowMultiSelection&&this.isActive(t)&&!sf.base.isNullOrUndefined(i))return this.setFocusElement(t),void(this.focussedElement=t);var n=[];if(this.options.allowMultiSelection&&i&&i.shiftKey){var o=sf.base.selectAll("."+e+"."+l,this.element),r=o?o.length:0;this.startNode=r>0?o[r-1]:t;var a=Array.prototype.slice.call(sf.base.selectAll("."+e,this.element)),h=a.indexOf(this.startNode),d=a.indexOf(t);if(h>d){var c=h;h=d,d=c}for(var p=h;p<=d;p++){var u=a[p];sf.base.isVisible(u)&&!u.classList.contains(v)&&n.push(u.getAttribute("data-uid"))}}else this.startNode=t;var f=this.getSelectEvent(t,"select",i,s,n);this.dotNetRef.invokeMethodAsync("TriggerNodeSelectingEvent",f)},b.prototype.setFocusElement=function(e){if(!sf.base.isNullOrUndefined(e)){var t=this.getFocusedNode();t&&(sf.base.removeClass([t],d),t.setAttribute("tabindex","-1")),sf.base.addClass([e],d),e.setAttribute("tabindex","0"),this.focussedElement=e,this.updateIdAttr(t,e)}},b.prototype.updateIdAttr=function(e,t){this.element.removeAttribute("aria-activedescendant");var i=this.element.querySelectorAll("[id=_active]");if(i[0]!=e)for(var s=0;s<i.length;s++)i[s].removeAttribute("id");e&&e.removeAttribute("id"),t.setAttribute("id",this.element.id+"_active"),this.element.setAttribute("aria-activedescendant",this.element.id+"_active")},b.prototype.getFocusedNode=function(){var t,i;return i=sf.base.select("."+e+'[tabindex="0"]',this.element),!this.isKeyUp&&sf.base.isNullOrUndefined(i)&&(i=sf.base.select("."+e+"."+l,this.element)),sf.base.isNullOrUndefined(i)&&(i=this.focussedElement?this.focussedElement:sf.base.select("."+e+"."+d,this.element)),sf.base.isNullOrUndefined(i)&&(t=sf.base.select("."+e,this.element)),sf.base.isNullOrUndefined(i)?sf.base.isNullOrUndefined(t)?this.element.firstElementChild:t:i},b.prototype.setFullRow=function(e){(e?sf.base.addClass:sf.base.removeClass)([this.element],"e-fullrow-wrap"),this.options.fullRowSelect=e},b.prototype.isActive=function(e){return e.classList.contains(l)},b.prototype.wireClickEvent=function(e){if(e){var t=this;this.touchClickObj=new sf.base.Touch(this.element,{tap:function(e){t.clickHandler(e)}})}else this.touchClickObj&&this.touchClickObj.destroy()},b.prototype.onMouseOver=function(i){var s=i.target,n=s.classList,o=sf.base.closest(s,"."+e);!o||n.contains(t)||n.contains(e)?this.removeHover():o&&!o.classList.contains(v)&&this.setHover(o)},b.prototype.setHover=function(e){e.classList.contains(s)||(this.removeHover(),sf.base.addClass([e],s))},b.prototype.removeHover=function(){var e=sf.base.selectAll("."+s,this.element);e&&e.length&&sf.base.removeClass(e,s)},b.prototype.checkNode=function(e){var t=this.getFocusedNode(),i=sf.base.select("."+c,t),s=sf.base.select(" .e-frame",i).classList.contains("e-check");t.classList.contains(v)||0===t.getElementsByClassName("e-checkbox-disabled").length&&this.validateCheckNode(i,s,t,e)},b.prototype.openNode=function(i,s){var a=this.getFocusedNode(),l=sf.base.select("div."+r,a);if(i){if(!l)return;l.classList.contains(o)?this.expandAction(a,s):this.focusNextNode(a,!0)}else if(l&&l.classList.contains(n))this.collapseAction(a,s,!1);else{var h=sf.base.closest(sf.base.closest(a,"."+t),"."+e);if(!h)return;h.classList.contains(v)||(this.setNodeFocus(a,h),this.navigateToFocus(!0))}},b.prototype.getScrollParent=function(e){return sf.base.isNullOrUndefined(e)?null:e.scrollHeight>e.clientHeight?e:this.getScrollParent(e.parentElement)},b.prototype.navigateToFocus=function(e){var t=this.getFocusedNode().querySelector("."+p),i=t.getBoundingClientRect(),s=this.getScrollParent(this.element);if(!sf.base.isNullOrUndefined(s)){var n=s.getBoundingClientRect();i.bottom>n.bottom?s.scrollTop+=i.bottom-n.bottom:i.top<n.top&&(s.scrollTop-=n.top-i.top)}this.isVisibleInViewport(t)||t.scrollIntoView(e)},b.prototype.isVisibleInViewport=function(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},b.prototype.setNodeFocus=function(e,t){sf.base.removeClass([e],d),e.setAttribute("tabindex","-1"),t.classList.contains(v)||(this.focussedElement=t,sf.base.addClass([t],d),t.setAttribute("tabindex","0"),this.updateIdAttr(e,t))},b.prototype.focusNextNode=function(e,t){var i=t?this.getNextNode(e):this.getPrevNode(e);if(this.setNodeFocus(e,i),this.navigateToFocus(!t),i.classList.contains(v)){var s=i.lastChild;null==i.previousSibling&&i.classList.contains("e-level-1")?this.focusNextNode(i,!0):null==i.nextSibling&&i.classList.contains("e-node-collapsed")||null==i.nextSibling&&s.classList.contains(p)?this.focusNextNode(i,!1):this.focusNextNode(i,t)}i.focus()},b.prototype.shiftKeySelect=function(e,t){if(this.options.allowMultiSelection){var i=this.getFocusedNode(),s=e?this.getNextNode(i):this.getPrevNode(i);this.removeHover(),this.setFocusElement(s),this.focussedElement=s,this.toggleSelect(s,t,!1),this.navigateToFocus(!e)}else this.navigateNode(e)},b.prototype.updateList=function(){this.liList=Array.prototype.slice.call(sf.base.selectAll("."+e,this.element))},b.prototype.getNextNode=function(e){var t,i=this.liList.indexOf(e);do{if(i++,t=this.liList[i],sf.base.isNullOrUndefined(t))return e}while(!sf.base.isVisible(t));return t},b.prototype.getPrevNode=function(e){var t,i=this.liList.indexOf(e);do{if(i--,t=this.liList[i],sf.base.isNullOrUndefined(t))return e}while(!sf.base.isVisible(t));return t},b.prototype.getRootNode=function(){var e,t=0;do{e=this.liList[t],t++}while(!sf.base.isVisible(e));return e},b.prototype.getEndNode=function(){var e,t=this.liList.length-1;do{e=this.liList[t],t--}while(!sf.base.isVisible(e));return e},b.prototype.navigateNode=function(e){this.focusNextNode(this.getFocusedNode(),e)},b.prototype.updateOldText=function(e){this.oldText=e},b.prototype.onPropertyChanged=function(e){for(var t=0,i=Object.keys(e);t<i.length;t++){switch(i[t]){case"showCheckBox":this.options.showCheckBox=e.showCheckBox;break;case"allowDragAndDrop":this.setDragAndDrop(e.allowDragAndDrop);break;case"allowTextWrap":this.options.allowTextWrap=e.allowTextWrap,this.setTextWrap();break;case"allowEditing":this.wireEditingEvents(e.allowEditing);break;case"disabled":this.options.disabled!==e.disabled&&(this.options.disabled=e.disabled,this.setDisabledMode(e.disabled));break;case"dragArea":this.setDragArea(e.dropArea);break;case"cssClass":this.setCssClass(e.cssClass);break;case"fullRowSelect":this.setFullRow(e.fullRowSelect);break;case"expandOnType":this.options.expandOnType=e.expandOnType;break;case"enableRtl":this.options.enableRtl=e.enableRtl,this.setEnableRtl();break;case"animation":this.options.animation=e.animation}}},b.prototype.navigateRootNode=function(e){var t=this.getFocusedNode(),i=e?this.getRootNode():this.getEndNode();i.classList.contains(v)||(this.setNodeFocus(t,i),this.navigateToFocus(e))},b.prototype.selectGivenNodes=function(e){for(var t=0;t<e.length;t++)e[t].classList.contains(v)||this.selectNode(e[t],null,!0)},b.prototype.beginEdit=function(e){var t=this.element.querySelector('[data-uid="'+e+'"]');sf.base.isNullOrUndefined(t)||this.options.disabled||this.createTextbox(t,null)},b.prototype.ensureVisible=function(e){var t=this.element.querySelector('[data-uid="'+e+'"]');sf.base.isNullOrUndefined(t)||setTimeout((function(){t.scrollIntoView(!0)}),450)},b.prototype.nodeCollapse=function(e){var t=this.element.querySelector('[data-uid="'+e+'"]');this.collapseAction(t,null,!1)},b.prototype.nodeExpand=function(e){var t=this.element.querySelector('[data-uid="'+e+'"]');this.expandAction(t,null)},b.prototype.nodeSelection=function(t){for(var i=[],s=0;s<t.length;s++)i.push(this.element.querySelector('[data-uid="'+t[s]+'"]'));var n=sf.base.selectAll("."+e+"."+l,this.element);sf.base.removeClass(n,l),sf.base.addClass(i,l)},b.prototype.KeyActionHandler=function(t,i){this.updateList();var s=this.element.querySelector('[data-uid="'+i+'"]'),n=sf.base.isNullOrUndefined(s)?this.getFocusedNode():s;switch(t.action){case"space":this.options.showCheckBox&&this.checkNode(this.keyAction);break;case"moveRight":this.keyBoardAction=!0,this.openNode(!this.options.enableRtl,this.keyAction);break;case"moveLeft":this.keyBoardAction=!0,this.openNode(this.options.enableRtl,this.keyAction);break;case"shiftDown":this.shiftKeySelect(!0,this.keyAction);break;case"moveDown":case"ctrlDown":case"csDown":this.navigateNode(!0);break;case"shiftUp":this.shiftKeySelect(!1,this.keyAction);break;case"moveUp":case"ctrlUp":case"csUp":this.navigateNode(!1);break;case"home":case"shiftHome":case"ctrlHome":case"csHome":this.navigateRootNode(!0);break;case"end":case"shiftEnd":case"ctrlEnd":case"csEnd":this.navigateRootNode(!1);break;case"enter":case"ctrlEnter":case"shiftEnter":case"csEnter":this.toggleSelect(n,this.keyAction,!1);break;case"f2":this.options.allowEditing&&!n.classList.contains(v)&&this.createTextbox(n,this.keyAction);break;case"ctrlA":if(this.options.allowMultiSelection){var o=sf.base.selectAll("."+e+":not(."+l+")",this.element);this.selectGivenNodes(o)}}this.isKeyUp=!1;var r=this;setTimeout((function(){r.keyBoardAction&&(r.setHover(r.getFocusedNode()),r.keyBoardAction=!1)}),100)},b}();return{initialize:function(e,t,i,s){new b(e,t,i,s);var n=window.sfBlazor.getCompInstance(e);n.render(),t&&!sf.base.isNullOrUndefined(n)&&n.options.allowTextWrap&&n.updateWrap(),document.getElementById(t.id)&&n.dotNetRef.invokeMethodAsync("CreatedEvent",null)},updateTextWrap:function(e){var t=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(t)&&t.options.allowTextWrap&&t.updateWrap()},dataSourceChanged:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||(t.unWireEvents(),t.wireEvents())},collapseAction:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i)){var s=i.element.querySelector('[data-uid="'+t+'"]');i.collapseAction(s,null,!1)}},NodeCollapseAction:function(e,t,i,s){var n=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(n)){var o=n.element.querySelector('[data-uid="'+t+'"]');n.collapseAction(o,null,s,i)}},expandAction:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i)){var s=i.element.querySelector('[data-uid="'+t+'"]');i.expandAction(s,null)}},expandedNode:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.expandedNode(t)},collapsedNode:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.collapsedNode(t)},KeyActionHandler:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s)||s.KeyActionHandler(t,i)},setMultiSelect:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.setMultiSelect(t)},dragStartActionContinue:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.dragStartActionContinue(t)},dragNodeStop:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.dragNodeStop(t)},nodeDragging:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.nodeDragging(t)},setFocus:function(e,t){if(!sf.base.isNullOrUndefined(e)&&!sf.base.isNullOrUndefined(t)){var i=document.getElementById(e.id);i.focus(),i.setSelectionRange(0,i.value.length)}},nodeEdited:function(e){sf.base.isNullOrUndefined(e)||sf.base.removeClass([e],"e-editing")},updateOldText:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.updateOldText(t)},updateSpinnerClass:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.updateSpinnerClass()},onPropertyChanged:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.onPropertyChanged(t)},beginEdit:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.beginEdit(t)},ensureVisible:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.ensureVisible(t)},nodeCollapse:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.nodeCollapse(t)},nodeExpand:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.nodeExpand(t)},nodeSelection:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.nodeSelection(t)},getAriaLevel:function(e,t){var i=window.sfBlazor.getCompInstance(e),s=0;if(!sf.base.isNullOrUndefined(i)){var n=i.element.querySelector('[data-uid="'+t.nodeData.id+'"]');s=parseInt(n.getAttribute("aria-level"),10)}return s}}}()},"./modules/sf-uploader.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Uploader=function(){"use strict";var e={};function t(t,i){if(t.target){var r,l=sf.base.isNullOrUndefined(i)?sf.base.createElement:i,h=function(e,t){var i=t("div",{}),s=t("div",{});return i.classList.add("e-spinner-pane"),s.classList.add("e-spinner-inner"),e.appendChild(i),i.appendChild(s),{wrap:i,inner_wrap:s}}(t.target,l);if(sf.base.isNullOrUndefined(t.cssClass)||h.wrap.classList.add(t.cssClass),sf.base.isNullOrUndefined(t.template)&&sf.base.isNullOrUndefined(null)){var d=sf.base.isNullOrUndefined(t.type)?function(e){return window.getComputedStyle(e,":after").getPropertyValue("content").replace(/['"]+/g,"")}(h.wrap):t.type;r=function(e,t){var i;switch(t){case"Material":case"Fabric":i=30;break;case"Tailwind":case"Tailwind-dark":i=30;break;case"Bootstrap4":i=36;break;default:i=30}return e=e?parseFloat(e+""):i,"Bootstrap"===t?e:e/2}(sf.base.isNullOrUndefined(t.width)?void 0:t.width,d),function(t,i,r,l){var h=i.querySelector(".e-spinner-inner"),d=h.querySelector("svg");sf.base.isNullOrUndefined(d)||h.removeChild(d);switch(t){case"Material":!function(t,i,n){var r=s();e[r]={timeOut:0,type:"Material",radius:i},o(t,r,n,"e-spin-material"),a(i,t,"Material","e-spin-material")}(h,r,l);break;case"Fabric":!function(t,i,o){var r=s();e[r]={timeOut:0,type:"Fabric",radius:i},n(t,r,"e-spin-fabric",o),c(i,t,"e-spin-fabric")}(h,r,l);break;case"Bootstrap":!function(t,i,n){var o=s();e[o]={timeOut:0,type:"Bootstrap",radius:i},function(e,t,i){var s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("id",t),s.setAttribute("class","e-spin-bootstrap"),s.setAttribute("viewBox","0 0 64 64"),e.insertBefore(s,e.firstChild);for(var n=0;n<=7;n++){var o=document.createElementNS("http://www.w3.org/2000/svg","circle");o.setAttribute("class","e-path-circle_"+n),o.setAttribute("r","2"),o.setAttribute("transform","translate(32,32)"),s.appendChild(o)}}(t,o),function(e,t){var i=e.querySelector("svg.e-spin-bootstrap");i.style.width=i.style.height=t+"px";for(var s=90,n=0;n<=7;n++){var o=p(0,0,24,s),r=i.querySelector(".e-path-circle_"+n);r.setAttribute("cx",o.x+""),r.setAttribute("cy",o.y+""),s=s>=360?0:s,s+=45}}(t,i)}(h,r);break;case"HighContrast":!function(t,i,o){var r=s();e[r]={timeOut:0,type:"HighContrast",radius:i},n(t,r,"e-spin-high-contrast",o),c(i,t,"e-spin-high-contrast")}(h,r,l);break;case"Bootstrap4":!function(t,i,n){var r=s();e[r]={timeOut:0,type:"Bootstrap4",radius:i},o(t,r,n,"e-spin-bootstrap4"),a(i,t,"Bootstrap4","e-spin-bootstrap4")}(h,r,l);break;case"Tailwind":case"Tailwind-dark":!function(t,i,o){var r=s();e[r]={timeOut:0,type:"Tailwind",radius:i},n(t,r,"e-spin-tailwind",o),c(i,t,"e-spin-tailwind")}(h,r,l)}}(d,h.wrap,r,l),sf.base.isNullOrUndefined(t.label)||function(e,t,i){var s=i("div",{});s.classList.add("e-spin-label"),s.innerHTML=t,e.appendChild(s)}(h.inner_wrap,t.label,l)}else{var u=sf.base.isNullOrUndefined(t.template)?null:t.template;h.wrap.classList.add("e-spin-template"),function(e,t,i){sf.base.isNullOrUndefined(i)||e.classList.add(i);e.querySelector(".e-spinner-inner").innerHTML=t}(h.wrap,u,null)}h.wrap.classList.add("e-spin-hide"),h=null}}function s(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<5;i++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}function n(e,t,i,s){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("id",t),n.setAttribute("class",i);var o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("class","e-path-circle");var r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("class","e-path-arc"),e.insertBefore(n,e.firstChild),n.appendChild(o),n.appendChild(r)}function o(e,t,i,s){var n=document.createElementNS("http://www.w3.org/2000/svg","svg"),o=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("class",s),n.setAttribute("id",t),o.setAttribute("class","e-path-circle"),e.insertBefore(n,e.firstChild),n.appendChild(o)}function r(t){!function(t,i,s,n,o,a,d){var c=++d.globalInfo[d.uniqueID].previousId,p=(new Date).getTime(),u=i-t,f=(v=2*d.globalInfo[d.uniqueID].radius+"",parseFloat(v)),g=l(f),m=-90*(d.globalInfo[d.uniqueID].count||0);var v;!function i(o){var l=Math.max(0,Math.min((new Date).getTime()-p,n));!function(e,t){if(!sf.base.isNullOrUndefined(t.querySelector("svg.e-spin-material"))&&!sf.base.isNullOrUndefined(t.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))){var i=t.querySelector("svg.e-spin-material").querySelector("path.e-path-circle");i.setAttribute("stroke-dashoffset",h(f,g,e,a)+""),i.setAttribute("transform","rotate("+m+" "+f/2+" "+f/2+")")}}(s(l,t,u,n),o.container),c===o.globalInfo[o.uniqueID].previousId&&l<n?e[o.uniqueID].timeOut=setTimeout(i.bind(null,o),1):r(o)}(d)}(1,149,d,1333,t.globalInfo[t.uniqueID].count,75,t),t.globalInfo[t.uniqueID].count=++t.globalInfo[t.uniqueID].count%4}function a(e,t,i,s){var n=2*e,o=t.querySelector("svg."+s),r=o.querySelector("path.e-path-circle"),a=l(n),d=n/2+"px";o.setAttribute("viewBox","0 0 "+n+" "+n),o.style.width=o.style.height=n+"px",o.style.transformOrigin=d+" "+d+" "+d,r.setAttribute("d",function(e,t){var i=e/2,s=t/2;return"M"+i+","+s+"A"+(i-s)+","+(i-s)+" 0 1 1 "+s+","+i}(n,a)),"Material"===i&&(r.setAttribute("stroke-width",a+""),r.setAttribute("stroke-dasharray",(n-a)*Math.PI*.75+""),r.setAttribute("stroke-dashoffset",h(n,a,1,75)+""))}function l(e){return.1*e}function h(e,t,i,s){return(e-t)*Math.PI*(3*s/100-i/100)}function d(e,t,i,s){var n=(e/=s)*e,o=n*e;return t+i*(6*o*n+-15*n*n+10*o)}function c(e,t,i){var s=e,n=e,o=2*e,r=t.querySelector("."+i),a=r.querySelector(".e-path-circle"),l=r.querySelector(".e-path-arc"),h=o/2+"px";a.setAttribute("d",function(e,t,i){return["M",e,t,"m",-i,0,"a",i,i,0,1,0,2*i,0,"a",i,i,0,1,0,2*-i,0].join(" ")}(s,n,e)),l.setAttribute("d",function(e,t,i,s,n){var o=p(e,t,i,n),r=p(e,t,i,s);return["M",o.x,o.y,"A",i,i,0,0,0,r.x,r.y].join(" ")}(s,n,e,315,45)),r.setAttribute("viewBox","0 0 "+o+" "+o),r.style.transformOrigin=h+" "+h+" "+h,r.style.width=r.style.height=o+"px"}function p(e,t,i,s){var n=(s-90)*Math.PI/180;return{x:e+i*Math.cos(n),y:t+i*Math.sin(n)}}function u(e){f(e,!1),e=null}function f(t,i){var s;if(t&&(s=t.classList.contains("e-spinner-pane")?t:t.querySelector(".e-spinner-pane")),t&&s){var n=s.querySelector(".e-spinner-inner");if(i?!s.classList.contains("e-spin-template")&&!s.classList.contains("e-spin-hide"):!s.classList.contains("e-spin-template")&&!s.classList.contains("e-spin-show")){var o=s.querySelector("svg");if(sf.base.isNullOrUndefined(o))return;var a=o.getAttribute("id");switch(e[a].isAnimate=!i,e[a].type){case"Material":i?clearTimeout(e[a].timeOut):function(t,i,s){var n={};e[i].timeOut=0,n[i]=function(e,t,i,s){return{radius:t,count:i,previousId:s}}(0,s,0,0),r({uniqueID:i,container:t,globalInfo:n,timeOutVar:0})}(n,a,e[a].radius);break;case"Bootstrap":i?clearTimeout(e[a].timeOut):function(t){for(var i,s,n,o,r,a=t.querySelector("svg.e-spin-bootstrap").getAttribute("id"),l=1;l<=8;l++){h(t.getElementsByClassName("e-path-circle_"+(8===l?0:l))[0],l,l,(i=void 0,s=void 0,n=void 0,o=void 0,r=void 0,i=[],n=l,o=!1,r=1,function e(t){i.push(t),(t!==n||1===r)&&(t<=s&&t>1&&!o?t=parseFloat((t-.2).toFixed(2)):1===t?(t=7,t=parseFloat((t+.2).toFixed(2)),o=!0):t<8&&o?8===(t=parseFloat((t+.2).toFixed(2)))&&(o=!1):t<=8&&!o&&(t=parseFloat((t-.2).toFixed(2))),++r,e(t))}(s=l),i),a)}function h(t,i,s,n,o){var r=0;!function i(s){e[o].isAnimate&&(++r,t.setAttribute("r",s+""),r>=n.length&&(r=0),e[o].timeOut=setTimeout(i.bind(null,n[r]),18))}(i)}}(n)}}i?sf.base.classList(s,["e-spin-hide"],["e-spin-show"]):sf.base.classList(s,["e-spin-show"],["e-spin-hide"]),t=null}}function g(e){f(e,!0),e=null}var m="e-upload-file-list",v="e-file-status",b="e-file-remove-btn",y="e-file-delete-btn",M="e-file-abort-btn",C="e-file-reload-btn",w="e-upload-progress-wrap",S="e-upload-progress-bar",N="e-upload-success",x="e-upload-fails",O="e-file-pause-btn",E=function(){function e(e,t,i,s){this.initialAttr={accept:null,multiple:!1,disabled:!1},this.uploadedFilesData=[],this.base64String=[],this.isForm=!1,this.allTypes=!1,this.pausedData=[],this.uploadMetaData=[],this.btnTabIndex="0",this.disableKeyboardNavigation=!1,this.count=-1,this.actionCompleteCount=0,this.flag=!0,this.selectedFiles=[],this.uploaderName="UploadFiles",this.fileStreams=[],this.newFileRef=0,this.isFirstFileOnSelection=!1,this.dragCounter=0,this.fileList=[],this.filesData=[],window.sfBlazor=window.sfBlazor,this.dataId=e,this.element=t.element,this.updateProperty(s),window.sfBlazor.setCompInstance(this),this.dotNetRef=i,this.withCredentials=!1}return e.prototype.initialize=function(){this.preRender(),this.render()},e.prototype.updateProperty=function(e){sf.base.extend(this,this,e)},e.prototype.reRenderFileList=function(){this.listParent&&(sf.base.detach(this.listParent),this.listParent=null,this.fileList=[],this.createFileList(this.filesData),this.actionButtons&&(this.removeActionButtons(),this.renderActionButtons(),this.checkActionButtonStatus()))},e.prototype.updateDropArea=function(){if(this.dropArea)this.setDropArea();else{this.dropZoneElement=null;var e=this.dropAreaWrapper.querySelector(".e-file-drop");e&&sf.base.remove(e)}},e.prototype.propertyChanges=function(e,t){this.updateProperty(e),this.isBlazorSaveUrl=""===this.asyncSettings.saveUrl||sf.base.isNullOrUndefined(this.asyncSettings.saveUrl);for(var i=0,s=Object.keys(t);i<s.length;i++){switch(s[i]){case"AllowedExtensions":this.clearAll();break;case"EnableRtl":this.reRenderFileList();break;case"Buttons":this.buttons.browse=sf.base.isNullOrUndefined(this.buttons.browse)?"":this.buttons.browse,this.buttons.clear=sf.base.isNullOrUndefined(this.buttons.clear)?"":this.buttons.clear,this.buttons.upload=sf.base.isNullOrUndefined(this.buttons.upload)?"":this.buttons.upload,this.renderButtonTemplates();break;case"DropArea":this.unBindDropEvents(),this.updateDropArea();break;case"Files":this.renderPreLoadFiles();break;case"MinFileSize":case"MaxFileSize":case"AutoUpload":case"SequentialUpload":this.clearAll()}}},e.prototype.preRender=function(){this.isBlazorTemplate=""!==this.template&&!sf.base.isNullOrUndefined(this.template),this.isBlazorSaveUrl=""===this.asyncSettings.saveUrl||sf.base.isNullOrUndefined(this.asyncSettings.saveUrl),this.isBlazorSaveUrl&&this.sequentialUpload&&(this.sequentialUpload=!1),this.isBlazorSaveUrl||this.formRendered(),this.keyConfigs={enter:"enter"},this.browserName=sf.base.Browser.info.name,this.uploaderName=this.element.getAttribute("name")},e.prototype.formRendered=function(){var e=sf.base.closest(this.element,"form");if(!sf.base.isNullOrUndefined(e))for(;e&&e!==document.documentElement;e=e.parentElement)"FORM"===e.tagName&&(this.isForm=!0,this.formElement=e,e.setAttribute("enctype","multipart/form-data"),e.setAttribute("encoding","multipart/form-data"))},e.prototype.render=function(){this.dropAreaWrapper=sf.base.closest(this.element,".e-file-select-wrap"),this.uploadWrapper=sf.base.closest(this.element,".e-upload.e-control-wrapper"),this.browseButton=this.dropAreaWrapper.querySelector("button.e-upload-browse-btn"),this.setDropArea(),this.renderPreLoadFiles(),this.wireEvents()},e.prototype.wireEvents=function(){sf.base.EventHandler.add(this.browseButton,"click",this.browseButtonClick,this),sf.base.EventHandler.add(this.element,"change",this.onSelectFiles,this),sf.base.EventHandler.add(document,"click",this.removeFocus,this),this.keyboardModule=new sf.base.KeyboardEvents(this.uploadWrapper,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.isForm&&sf.base.EventHandler.add(this.formElement,"reset",this.resetForm,this)},e.prototype.renderPreLoadFiles=function(){if(this.files&&this.files.length){if(this.enablePersistence&&this.filesData.length)return void this.createFileList(this.filesData);if(sf.base.isNullOrUndefined(this.files[0].size))return;var e=[].slice.call(this.files),t=[];this.multiple||(this.clearData(),e=[e[0]]);for(var i=0,s=e;i<s.length;i++){var n=s[i],o={name:n.name+"."+n.type.split(".")[n.type.split(".").length-1],rawFile:"",size:n.size,status:this.localizedTexts("uploadSuccessMessage"),type:n.type,validationMessages:{minSize:"",maxSize:""},statusCode:"2"};t.push(o),this.filesData.push(o)}if(this.isBlazorTemplate)return;this.createFileList(t),this.autoUpload||!this.listParent||this.actionButtons||this.isForm&&!this.allowUpload()||!this.showFileList||this.renderActionButtons(),this.checkActionButtonStatus(),this.sequentialUpload&&(this.count=this.filesData.length-1)}},e.prototype.renderActionButtons=function(){this.element.setAttribute("tabindex","-1"),this.isBlazorSaveUrl||this.isBlazorTemplate||(this.actionButtons=sf.base.createElement("div",{className:"e-upload-actions"}),this.uploadButton=sf.base.createElement("button",{className:"e-file-upload-btn e-css e-btn e-flat e-primary",attrs:{type:"button",tabindex:this.btnTabIndex}}),this.clearButton=sf.base.createElement("button",{className:"e-file-clear-btn e-css e-btn e-flat",attrs:{type:"button",tabindex:this.btnTabIndex}}),this.actionButtons.appendChild(this.clearButton),this.actionButtons.appendChild(this.uploadButton),this.renderButtonTemplates(),this.uploadWrapper.appendChild(this.actionButtons),this.browseButton.blur(),this.uploadButton.focus(),this.wireActionButtonEvents())},e.prototype.setDropArea=function(){var e=this.dropAreaWrapper.querySelector(".e-file-drop");if(this.dropArea){this.dropZoneElement="string"!=typeof this.dropArea?this.dropArea:document.querySelector(this.dropArea);for(var t=this.element,i=!1;t.parentNode;)(t=t.parentNode)===this.dropZoneElement&&(i=!0);!i&&e&&sf.base.remove(e)}else sf.base.isNullOrUndefined(this.dropArea)&&(this.dropZoneElement=this.uploadWrapper);this.bindDropEvents()},e.prototype.serverActionButtonsEventBind=function(e){e&&!this.isForm&&(this.browseButton.blur(),this.actionButtons=e,this.uploadButton=this.actionButtons.querySelector(".e-file-upload-btn"),this.clearButton=this.actionButtons.querySelector(".e-file-clear-btn"),this.uploadButton.focus(),this.unwireActionButtonEvents(),this.wireActionButtonEvents(),this.checkActionButtonStatus())},e.prototype.serverUlElement=function(e){e&&(this.isBlazorSaveUrl||this.isBlazorTemplate)&&(this.listParent=e,this.fileList=[].slice.call(this.listParent.querySelectorAll("li")),this.serverRemoveIconBindEvent(),this.isForm||this.checkAutoUpload(this.filesData))},e.prototype.wireActionButtonEvents=function(){sf.base.EventHandler.add(this.uploadButton,"click",this.uploadButtonClick,this),sf.base.EventHandler.add(this.clearButton,"click",this.clearButtonClick,this)},e.prototype.unwireActionButtonEvents=function(){sf.base.EventHandler.remove(this.uploadButton,"click",this.uploadButtonClick),sf.base.EventHandler.remove(this.clearButton,"click",this.clearButtonClick)},e.prototype.checkActionButtonStatus=function(){if(this.actionButtons&&!this.isBlazorTemplate){var e=this.uploadWrapper.querySelectorAll(".e-validation-fails").length+this.uploadWrapper.querySelectorAll(".e-upload-fails:not(.e-upload-progress)").length+this.uploadWrapper.querySelectorAll("span."+N).length+this.uploadWrapper.querySelectorAll("span.e-upload-progress").length;e>0&&e===this.uploadWrapper.querySelectorAll("li").length?this.uploadButton.setAttribute("disabled","disabled"):this.uploadButton.removeAttribute("disabled")}},e.prototype.renderButtonTemplates=function(){if("string"==typeof this.buttons.browse?(this.browseButton.textContent="Browse..."===this.buttons.browse?this.localizedTexts("browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.textContent)):(this.browseButton.innerHTML="",this.browseButton.appendChild(this.buttons.browse)),this.uploadButton){var e;e=sf.base.isNullOrUndefined(this.buttons.upload)?"Upload":this.buttons.upload,this.buttons.upload=e,"string"==typeof this.buttons.upload?(this.uploadButton.textContent="Upload"===this.buttons.upload?this.localizedTexts("upload"):this.buttons.upload,this.uploadButton.setAttribute("title",this.uploadButton.textContent)):(this.uploadButton.innerHTML="",this.uploadButton.appendChild(this.buttons.upload))}if(this.clearButton){var t;t=sf.base.isNullOrUndefined(this.buttons.clear)?"Clear":this.buttons.clear,this.buttons.clear=t,"string"==typeof this.buttons.clear?(this.clearButton.textContent="Clear"===this.buttons.clear?this.localizedTexts("clear"):this.buttons.clear,this.clearButton.setAttribute("title",this.clearButton.textContent)):(this.clearButton.innerHTML="",this.clearButton.appendChild(this.buttons.clear))}},e.prototype.checkAutoUpload=function(e){if(this.autoUpload){if(this.sequentialUpload)this.sequenceUpload(e);else if("e-fm-upload"==this.cssClass)for(var t=0;t<e.length;t++)this.upload(e[t]);else this.upload(e);this.removeActionButtons()}else this.actionButtons||this.renderActionButtons();this.checkActionButtonStatus()},e.prototype.removeActionButtons=function(){this.actionButtons&&(this.unwireActionButtonEvents(),this.isBlazorSaveUrl||this.isBlazorTemplate||sf.base.detach(this.actionButtons),this.actionButtons=null)},e.prototype.sequenceUpload=function(e){var t=e&&e.length?e.length:e?1:0;if(this.filesData.length-t==0||"1"!==this.filesData[this.filesData.length-t-1].statusCode){(this.multiple||this.count<0)&&++this.count;var s=!this.showFileList;"object"===i(this.filesData[this.count])?(this.isFirstFileOnSelection=!1,this.upload(this.filesData[this.count],s),"0"===this.filesData[this.count].statusCode&&this.sequenceUpload(e)):--this.count}},e.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.browseButton,"click",this.browseButtonClick),sf.base.EventHandler.remove(this.element,"change",this.onSelectFiles),sf.base.EventHandler.remove(document,"click",this.removeFocus),this.isForm&&sf.base.EventHandler.remove(this.formElement,"reset",this.resetForm),this.keyboardModule&&this.keyboardModule.destroy()},e.prototype.resetForm=function(){this.clearAll()},e.prototype.keyActionHandler=function(e){var t=e.target;switch(e.action){case"enter":if(e.target===this.clearButton)this.clearButtonClick();else if(e.target===this.uploadButton)this.uploadButtonClick();else if(e.target===this.browseButton)this.browseButtonClick();else if(t.classList.contains(O)){(i=this.getCurrentMetaData(null,e)).file.statusCode="4",i.file.status=this.localizedTexts("pauseUpload"),this.abortUpload(i,!1)}else if(t.classList.contains("e-file-play-btn"))this.resumeUpload(this.getCurrentMetaData(null,e),e);else if(t.classList.contains(C)){var i=this.getCurrentMetaData(null,e);if(sf.base.isNullOrUndefined(i)){var s=e.target.parentElement,n=this.filesData[this.fileList.indexOf(s)];this.retry(n)}else i.file.statusCode="1",i.file.status=this.localizedTexts("readyToUploadMessage"),this.chunkUpload(i.file)}else this.removeFiles(e),t.classList.contains(M)||this.browseButton.focus();e.preventDefault(),e.stopPropagation()}},e.prototype.getCurrentMetaData=function(e,t){var i,s;if(sf.base.isNullOrUndefined(e)){var n=t.target.parentElement;i=this.filesData[this.fileList.indexOf(n)]}else i=e;for(var o=0;o<this.uploadMetaData.length;o++)this.uploadMetaData[o].file.name===i.name&&(s=this.uploadMetaData[o]);return s},e.prototype.removeFocus=function(){this.uploadWrapper&&this.listParent&&this.listParent.querySelector(".e-clear-icon-focus")&&(document.activeElement.blur(),this.listParent.querySelector(".e-clear-icon-focus").classList.remove("e-clear-icon-focus"))},e.prototype.browseButtonClick=function(){this.element.click()},e.prototype.uploadButtonClick=function(){this.sequentialUpload?this.sequenceUpload(this.filesData):this.upload(this.filesData)},e.prototype.clearButtonClick=function(){this.clearAll(),this.sequentialUpload&&(this.count=-1),this.actionCompleteCount=0},e.prototype.bindDropEvents=function(){this.dropZoneElement&&(sf.base.EventHandler.add(this.dropZoneElement,"drop",this.dropElement,this),sf.base.EventHandler.add(this.dropZoneElement,"dragover",this.dragHover,this),sf.base.EventHandler.add(this.dropZoneElement,"dragleave",this.onDragLeave,this),sf.base.EventHandler.add(this.dropZoneElement,"paste",this.onPasteFile,this),sf.base.EventHandler.add(this.dropZoneElement,"dragenter",this.onDragEnter,this))},e.prototype.unBindDropEvents=function(){this.dropZoneElement&&(sf.base.EventHandler.remove(this.dropZoneElement,"drop",this.dropElement),sf.base.EventHandler.remove(this.dropZoneElement,"dragover",this.dragHover),sf.base.EventHandler.remove(this.dropZoneElement,"dragleave",this.onDragLeave),sf.base.EventHandler.remove(this.dropZoneElement,"dragenter",this.onDragEnter))},e.prototype.onDragEnter=function(e){this.enabled&&(this.dropZoneElement.classList.add("e-upload-drag-hover"),this.dragCounter=this.dragCounter+1,e.preventDefault(),e.stopPropagation())},e.prototype.onDragLeave=function(e){this.enabled&&(this.dragCounter=this.dragCounter-1,this.dragCounter||this.dropZoneElement.classList.remove("e-upload-drag-hover"))},e.prototype.dragHover=function(e){this.enabled&&("Default"!==this.dropEffect&&(e.dataTransfer.dropEffect=this.dropEffect.toLowerCase()),-1!==e.dataTransfer.types.indexOf("Files")&&(e.preventDefault(),e.stopPropagation()))},e.prototype.dropElement=function(e){this.dragCounter=0,e.preventDefault(),this.element.files=e.dataTransfer.files;var t=new Event("change",{bubbles:!0});this.element.dispatchEvent(t),this.dropZoneElement.classList.remove("e-upload-drag-hover"),-1!==e.dataTransfer.types.indexOf("Files")&&(e.preventDefault(),e.stopPropagation())},e.prototype.onPasteFile=function(e){var t=e.clipboardData.items;if(1===t.length){var i=[].slice.call(t)[0];if("file"===i.kind&&i.type.match("^image/")){this.element.files=e.clipboardData.files;var s=new CustomEvent("change",{bubbles:!0,detail:{isDirectory:!1,isPaste:!0}});this.element.dispatchEvent(s)}}},e.prototype.getSelectedFiles=function(e){for(var t=[],i=this.fileList[e],s=this.getFilesData(),n=+i.getAttribute("data-files-count"),o=0,r=0;r<e;r++)o+=+this.fileList[r].getAttribute("data-files-count");for(var a=o;a<o+n;a++)t.push(s[a]);return t},e.prototype.removeFiles=function(e){if(this.enabled){var i=e.target.parentElement;this.isBlazorSaveUrl&&(this.fileList=[].slice.call(this.uploadWrapper.querySelectorAll("li")));var s=this.fileList.indexOf(i),n=this.fileList[s],o=this.isFormUpload(),r=o?this.getSelectedFiles(s):this.getFilesInArray(this.filesData[s]);if(!sf.base.isNullOrUndefined(r)){if(e.target.classList.contains(M)&&!o){if(r[0].statusCode="5",!sf.base.isNullOrUndefined(n)){var a=n.querySelector("."+M);t({target:a,width:"20px"}),u(a)}this.sequentialUpload&&this.uploadSequential(),n.classList.contains("e-restrict-retry")||this.checkActionComplete(!0)}else sf.base.closest(e.target,".e-spinner-pane")||this.remove(r,!1,!1,!0,e);this.element.value="",this.checkActionButtonStatus()}}},e.prototype.removeFilesData=function(e,t){var i;if(t)this.showFileList||(i=this.filesData.indexOf(e),this.filesData.splice(i,1));else{var s=this.getLiElement(e);if(!sf.base.isNullOrUndefined(s)){this.isBlazorSaveUrl||this.isBlazorTemplate||sf.base.detach(s);var n=s.querySelector(".e-spinner-pane");sf.base.isNullOrUndefined(n)||g(n),i=this.fileList.indexOf(s),this.fileList.splice(i,1),this.filesData.splice(i,1),this.isBlazorSaveUrl||this.isBlazorTemplate||0!==this.fileList.length||sf.base.isNullOrUndefined(this.listParent)?this.dotNetRef.invokeMethodAsync("RemoveFileData",i):(sf.base.detach(this.listParent),this.listParent=null,this.removeActionButtons(),this.sequentialUpload&&i<=this.count&&--this.count)}}},e.prototype.removeUploadedFile=function(e,t,i,s){var n=this,o=e,r=new sf.base.Ajax(this.asyncSettings.removeUrl,"POST",!0,null);r.emitError=!1;var a=new FormData;r.beforeSend=function(s){t.currentRequest=r.httpRequest,n.currentRequestHeader&&n.updateCustomheader(r.httpRequest,n.currentRequestHeader),n.customFormDatas&&n.updateFormData(a,n.customFormDatas),!i&&n.removingEnabled?n.dotNetRef.invokeMethodAsync("RemovingEvent",t).then((function(t){t.cancel?s.cancel=!0:n.removingEventCallback(e)})):n.removingEventCallback(e),n.sequentialUpload&&--n.count};var l=this.element.getAttribute("name");t.postRawFile&&!sf.base.isNullOrUndefined(o.rawFile)&&""!==o.rawFile?a.append(l,o.rawFile,o.name):a.append(l,o.name),r.onLoad=function(e){return n.removeCompleted(e,o,s),{}},r.onError=function(e){return n.removeFailed(e,o,s),{}},r.send(a)},e.prototype.removeCompleted=function(e,t,i){var s=e&&e.currentTarget?this.getResponse(e):null,n=e.target;if(4===n.readyState&&n.status>=200&&n.status<=299){var o={e:e,response:s,operation:"remove",file:this.updateStatus(t,this.localizedTexts("removedSuccessMessage"),"2")};this.successEnabled&&this.dotNetRef.invokeMethodAsync("SuccessEvent",o),this.removeFilesData(t,i);var r=this.uploadedFilesData.indexOf(t);this.uploadedFilesData.splice(r,1),this.changeEnabled&&this.dotNetRef.invokeMethodAsync("ChangeEvent",{files:this.uploadedFilesData})}else this.removeFailed(e,t,i)},e.prototype.removeFailed=function(e,t,i){var s={e:e,response:e&&e.currentTarget?this.getResponse(e):null,operation:"remove",file:this.updateStatus(t,this.localizedTexts("removedFailedMessage"),"0")};if(!i){var n=this.filesData.indexOf(t),o=this.fileList[n];if(o){o.classList.remove(N),o.classList.add(x);var r=o.querySelector("."+v);r&&(r.classList.remove(N),r.classList.add(x))}this.checkActionButtonStatus()}this.failuredEnabled&&this.dotNetRef.invokeMethodAsync("FailureEvent",s);var a=this.getLiElement(t);sf.base.isNullOrUndefined(a)||sf.base.isNullOrUndefined(a.querySelector("."+y))||(g(a.querySelector("."+y)),sf.base.detach(a.querySelector(".e-spinner-pane")))},e.prototype.removingEventCallback=function(e){var i=this.getLiElement(e);if(!(sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.querySelector("."+y))&&sf.base.isNullOrUndefined(i.querySelector("."+b)))){var s;t({target:s=i.querySelector("."+y)?i.querySelector("."+y):i.querySelector("."+b),width:"20px"}),u(s)}},e.prototype.updateFormData=function(e,t){if(t&&t.length>0&&t[0])for(var i=function(i){var s=t[i],n=Object.keys(s).map((function(e){return s[e]}));e.append(Object.keys(s)[0],n)},s=0;s<t.length;s++)i(s)},e.prototype.updateCustomheader=function(e,t){if(t.length>0&&t[0])for(var i=function(i){var s=t[i],n=Object.keys(s).map((function(e){return s[e]}));e.setRequestHeader(Object.keys(s)[0],n)},s=0;s<t.length;s++)i(s)},e.prototype.getFilesFromFolder=function(e){var t;if(this.filesEntries=[],t=this.multiple?e.dataTransfer.items:[e.dataTransfer.items[0]],this.checkDirectoryUpload(t))for(var i=function(i){var n=t[i].webkitGetAsEntry();if(n.isFile){var o=[];n.file((function(e){var t=n.fullPath;o.push({path:t,file:e})})),s.renderSelectedFiles(e,o,!0)}else n.isDirectory&&s.traverseFileTree(n,e)},s=this,n=0;n<t.length;n++)i(n)},e.prototype.checkDirectoryUpload=function(e){for(var t=0;e&&t<e.length;t++){if(e[t].webkitGetAsEntry().isDirectory)return!0}return!1},e.prototype.traverseFileTree=function(e,t){if(e.isFile)this.filesEntries.push(e);else if(e.isDirectory){var i=e.createReader();this.readFileFromDirectory(i,t)}},e.prototype.readFileFromDirectory=function(e,t){var i=this;e.readEntries((function(s){for(var n=0;n<s.length;n++)i.traverseFileTree(s[n],t);i.pushFilesEntries(t),s.length&&i.readFileFromDirectory(e)}))},e.prototype.pushFilesEntries=function(e){for(var t=this,i=[],s=function(s){n.filesEntries[s].file((function(n){if(t.filesEntries.length){var o=t.filesEntries[s].fullPath;i.push({path:o,file:n}),s===t.filesEntries.length-1&&(t.filesEntries=[],t.renderSelectedFiles(e,i,!0))}}))},n=this,o=0;o<this.filesEntries.length;o++)s(o)},e.prototype.onSelectFiles=function(e){var t;if(this.enabled)if("drop"===e.type)if(this.directoryUpload)this.getFilesFromFolder(e);else{var i=this.sortFilesList=e.dataTransfer.files;"msie"!==this.browserName&&"edge"!==this.browserName&&"safari"!==this.browserName&&(this.element.files=i),i.length>0&&(t=this.multiple?this.sortFileList(i):[i[0]],this.renderSelectedFiles(e,t))}else t=[].slice.call(e.target.files),e.detail?this.renderSelectedFiles(e,t,e.detail.isDirectory,e.detail.isPaste):this.renderSelectedFiles(e,t)},e.prototype.getBase64=function(e){return new Promise((function(t,i){var s=new FileReader;s.readAsDataURL(e),s.onload=function(){return t(s.result)},s.onerror=function(e){return i(e)}}))},e.prototype.renderSelectedFiles=function(e,t,i,s){var n=this;this.base64String=[];var o={event:e,cancel:!1,filesData:[],isModified:!1,modifiedFilesData:[],progressInterval:"",isCanceled:!1,currentRequest:null,customFormData:null,type:e&&e.type};if(t.length<1)return o.isCanceled=!0,void(this.selectedEnabled&&this.dotNetRef.invokeMethodAsync("SelectedEvent",o));this.flag=!0;var r=[];this.multiple||(this.clearData(!0),t=[t[0]]);for(var a=0;a<t.length;a++){var l=i?t[a].file:t[a];this.updateInitialFileDetails(e,t,l,a,r,i,s)}if(o.filesData=r,this.allowedExtensions.indexOf("*")>-1&&(this.allTypes=!0),this.enableHtmlSanitizer)for(a=0;a<r.length;a++){var h=sf.base.SanitizeHtmlHelper.beforeSanitize();if(sf.base.SanitizeHtmlHelper.serializeValue(h,r[a].name)!=r[a].name){var d=t[a].name.replace(/[\u00A0-\u9999<>\&]/g,(function(e){return"&#"+e.charCodeAt(0)+";"}));r[a].name=d,r[a].status=this.localizedTexts("invalidFileName"),r[a].statusCode="0"}}this.allTypes||(r=this.checkExtension(r)),this.selectedEnabled?this.dotNetRef.invokeMethodAsync("SelectedEvent",o).then((function(e){n._internalRenderSelect(e,r)})):this._internalRenderSelect(o,r)},e.prototype.updateInitialFileDetails=function(e,t,i,s,n,o,r){var a={name:o?t[s].path.substring(1,t[s].path.length):r?sf.base.getUniqueID(i.name.substring(0,i.name.lastIndexOf(".")))+"."+this.getFileType(i.name):this.directoryUpload?t[s].webkitRelativePath:i.name,rawFile:i,size:i.size,status:this.localizedTexts("readyToUploadMessage"),type:this.getFileType(i.name),mimeContentType:i.type,lastModifiedDate:new Date(i.lastModified),validationMessages:this.validatedFileSize(i.size),statusCode:"1",id:sf.base.getUniqueID(i.name.substring(0,i.name.lastIndexOf(".")))+"."+this.getFileType(i.name)};r&&(a.fileSource="paste"),a.status=""!==a.validationMessages.minSize?this.localizedTexts("invalidMinFileSize"):""!==a.validationMessages.maxSize?this.localizedTexts("invalidMaxFileSize"):a.status,""===a.validationMessages.minSize&&""===a.validationMessages.maxSize||(a.statusCode="0"),n.push(a)},e.prototype._internalRenderSelect=function(e,t){if(!e.cancel){if(this.currentRequestHeader=e.currentRequest,this.customFormDatas=e.customFormData,this.selectedFiles=this.selectedFiles.concat(t),this.btnTabIndex=this.disableKeyboardNavigation?"-1":"0",this.showFileList){if(e.isModified&&e.modifiedFilesData.length>0){for(var i=0;i<e.modifiedFilesData.length;i++)for(var s=0;s<t.length;s++)e.modifiedFilesData[i].id===t[s].id&&(e.modifiedFilesData[i].rawFile=t[s].rawFile);var n=this.allTypes?e.modifiedFilesData:this.checkExtension(e.modifiedFilesData);this.updateSortedFileList(n),this.filesData=n,this.isForm&&!this.allowUpload()||this.isBlazorSaveUrl||this.isBlazorTemplate||this.checkAutoUpload(n)}else this.createFileList(t,!0),this.isBlazorSaveUrl||this.isBlazorTemplate||(this.filesData=this.filesData.concat(t)),this.isForm&&!this.allowUpload()||this.isBlazorSaveUrl||this.isBlazorTemplate||this.checkAutoUpload(t);sf.base.isNullOrUndefined(e.progressInterval)||""===e.progressInterval||(this.progressInterval=e.progressInterval)}else{if(this.filesData=this.filesData.concat(t),this.isBlazorSaveUrl)return void this.dotNetRef.invokeMethodAsync("UpdateServerFileData",t,this.isForm);this.autoUpload&&(this.sequentialUpload?this.sequenceUpload(this.filesData):this.upload(this.filesData,!0))}this.raiseActionComplete(),this.isFirstFileOnSelection=!0}},e.prototype.allowUpload=function(){var e=!1;return this.isForm&&!sf.base.isNullOrUndefined(this.asyncSettings.saveUrl)&&""!==this.asyncSettings.saveUrl&&(e=!0),e},e.prototype.isFormUpload=function(){var e=!1;return!this.isForm||!sf.base.isNullOrUndefined(this.asyncSettings.saveUrl)&&""!==this.asyncSettings.saveUrl||!sf.base.isNullOrUndefined(this.asyncSettings.removeUrl)&&""!==this.asyncSettings.removeUrl||(e=!0),e},e.prototype.clearData=function(e){sf.base.isNullOrUndefined(this.listParent)||this.isBlazorSaveUrl||this.isBlazorTemplate||(sf.base.detach(this.listParent),this.listParent=null),"msie"===this.browserName||e||(this.element.value=""),this.fileList=[],this.filesData=[],this.isBlazorSaveUrl||this.isBlazorTemplate?this.dotNetRef.invokeMethodAsync("ClearAllFile"):this.removeActionButtons()},e.prototype.updateSortedFileList=function(e){var t=sf.base.createElement("div",{id:"clonewrapper"}),i=-1;if(this.listParent){for(var s=0;s<this.listParent.querySelectorAll("li").length;s++){var n=this.listParent.querySelectorAll("li")[s];t.appendChild(n.cloneNode(!0))}for(var o=0,r=this.listParent.querySelectorAll("li");o<r.length;o++){var a=r[o];sf.base.detach(a)}this.removeActionButtons();var l=[].slice.call(t.childNodes);sf.base.detach(this.listParent),this.listParent=null,this.fileList=[],this.createParentUL();for(var h=0;h<e.length;h++){for(var d=0;d<this.filesData.length;d++)this.filesData[d].name===e[h].name&&(this.listParent.appendChild(l[d]),sf.base.EventHandler.add(l[d].querySelector(".e-icons"),"click",this.removeFiles,this),this.fileList.push(l[d]),i=h);i!==h&&this.createFileList([e[h]])}}else this.createFileList(e)},e.prototype.isBlank=function(e){return!e||/^\s*$/.test(e)},e.prototype.checkExtension=function(e){var t=e;if(!this.isBlank(this.allowedExtensions)){for(var i=[],s=0,n=this.allowedExtensions.split(",");s<n.length;s++){var o=n[s];i.push(o.trim().toLocaleLowerCase())}for(var r=0;r<e.length;r++)-1===i.indexOf(("."+e[r].type).toLocaleLowerCase())&&(e[r].status=this.localizedTexts("invalidFileType"),e[r].statusCode="0")}return t},e.prototype.validatedFileSize=function(e){var t="",i="";return e<this.minFileSize?t=this.localizedTexts("invalidMinFileSize"):e>this.maxFileSize?i=this.localizedTexts("invalidMaxFileSize"):(t="",i=""),{minSize:t,maxSize:i}},e.prototype.isPreLoadFile=function(e){var t=!1;if(this.files)for(var i=0;i<this.files.length;i++)if(this.files[i].name===e.name.slice(0,e.name.lastIndexOf("."))&&this.files[i].type===e.type){t=!0;break}return t},e.prototype.createParentUL=function(){sf.base.isNullOrUndefined(this.listParent)&&(this.listParent=sf.base.createElement("ul",{className:"e-upload-files"}),this.uploadWrapper.appendChild(this.listParent))},e.prototype.formFileList=function(e,t){var i=sf.base.createElement("li",{className:m});i.setAttribute("data-files-count",e.length+"");for(var s,n=sf.base.createElement("span",{className:"e-file-container"}),o=0,r=e;o<r.length;o++){var a=r[o],l=sf.base.createElement("span",{className:"e-file-name"});l.innerHTML=this.getFileNameOnly(a.name);var h=sf.base.createElement("span",{className:"e-file-type"}),d=this.getFileType(a.name);if(h.innerHTML="."+d,d||h.classList.add("e-hidden"),this.enableRtl){var c=sf.base.createElement("span",{className:"e-rtl-container"});c.appendChild(h),c.appendChild(l),n.appendChild(c)}else n.appendChild(l),n.appendChild(h);this.truncateName(l),s=this.formValidateFileInfo(a,i)}i.appendChild(n),this.setListToFileInfo(e,i);var p=this.listParent.querySelectorAll("li").length,u=sf.base.createElement("span");if(i.classList.contains("e-file-invalid")?(u.classList.add(v),u.classList.add("e-file-invalid"),u.innerText=e.length>1?this.localizedTexts("invalidFileSelection"):s):(u.classList.add(e.length>1?"e-file-information":"e-file-size"),u.innerText=e.length>1?this.localizedTexts("totalFiles")+": "+e.length+" , "+this.localizedTexts("size")+": "+this.bytesToSize(this.getFileSize(e)):this.bytesToSize(e[0].size),this.createFormInput(e)),n.appendChild(u),sf.base.isNullOrUndefined(i.querySelector(".e-icons"))){var f=sf.base.createElement("span",{className:"e-icons",attrs:{tabindex:this.btnTabIndex}});"msie"===this.browserName&&f.classList.add("e-msie"),f.setAttribute("title",this.localizedTexts("remove")),f.setAttribute("aria-label",this.localizedTexts("remove")),i.appendChild(n),i.appendChild(f),sf.base.EventHandler.add(f,"click",this.removeFiles,this),f.classList.add(b)}var g={element:i,fileInfo:this.mergeFileInfo(e,i),index:p,isPreload:this.isPreLoadFile(this.mergeFileInfo(e,i))};this.fileListRenderEnabled&&this.dotNetRef.invokeMethodAsync("FileListRenderingEvent",g),this.listParent.appendChild(i),this.fileList.push(i)},e.prototype.formValidateFileInfo=function(e,t){var i=e.status,s=this.validatedFileSize(e.size);""===s.minSize&&""===s.maxSize||(this.addInvalidClass(t),i=""!==s.minSize?this.localizedTexts("invalidMinFileSize"):""!==s.maxSize?this.localizedTexts("invalidMaxFileSize"):i);var n=this.checkExtension(this.getFilesInArray(e))[0].status;return n===this.localizedTexts("invalidFileType")&&(this.addInvalidClass(t),i=n),i},e.prototype.addInvalidClass=function(e){e.classList.add("e-file-invalid")},e.prototype.createFormInput=function(e){var t=this.element.cloneNode(!0);t.classList.add("e-hidden-file-input");for(var i=0,s=e;i<s.length;i++){s[i].input=t}t.setAttribute("name",this.uploaderName),this.uploadWrapper.querySelector(".e-file-select").appendChild(t),"msie"!==this.browserName&&"edge"!==this.browserName&&(this.element.value="")},e.prototype.getFileSize=function(e){for(var t=0,i=0,s=e;i<s.length;i++){t+=s[i].size}return t},e.prototype.mergeFileInfo=function(e,t){for(var i={name:"",rawFile:"",size:0,status:"",type:"",validationMessages:{minSize:"",maxSize:""},statusCode:"1",list:t},s=[],n="",o=0,r=e;o<r.length;o++){var a=r[o];s.push(a.name),n=a.type}return i.name=s.join(", "),i.size=this.getFileSize(e),i.type=n,i.status=this.statusForFormUpload(e,t),i},e.prototype.statusForFormUpload=function(e,t){for(var i,s=!0,n=0,o=e;n<o.length;n++){var r=o[n];i=r.status;var a=this.validatedFileSize(r.size);""===a.minSize&&""===a.maxSize||(s=!1,i=""!==a.minSize?this.localizedTexts("invalidMinFileSize"):""!==a.maxSize?this.localizedTexts("invalidMaxFileSize"):i);var l=this.checkExtension(this.getFilesInArray(r))[0].status;l===this.localizedTexts("invalidFileType")&&(s=!1,i=l)}return s?i=this.localizedTexts("totalFiles")+": "+e.length+" , "+this.localizedTexts("size")+": "+this.bytesToSize(this.getFileSize(e)):(t.classList.add("e-file-invalid"),i=e.length>1?this.localizedTexts("invalidFileSelection"):i),i},e.prototype.createFileList=function(e,t){if(this.isBlazorSaveUrl||this.isBlazorTemplate)if(!this.isBlazorSaveUrl&&this.isBlazorTemplate){var i=t?this.filesData=this.filesData.concat(e):e;this.dotNetRef.invokeMethodAsync("CreateFileList",i,this.isForm)}else this.dotNetRef.invokeMethodAsync("CreateFileList",e,this.isForm);else if(this.createParentUL(),this.isFormUpload())this.uploadWrapper.classList.add("e-form-upload"),this.formFileList(e,this.element.files);else for(var s=0,n=e;s<n.length;s++){var o=n[s],r=sf.base.createElement("li",{className:m,attrs:{"data-file-name":o.name,"data-files-count":"1"}}),a=sf.base.createElement("span",{className:"e-file-container"}),l=sf.base.createElement("span",{className:"e-file-name",attrs:{title:o.name}});l.innerHTML=this.getFileNameOnly(o.name);var h=sf.base.createElement("span",{className:"e-file-type"}),d=this.getFileType(o.name);if(h.innerHTML="."+d,d||h.classList.add("e-hidden"),this.enableRtl){var c=sf.base.createElement("span",{className:"e-rtl-container"});c.appendChild(h),c.appendChild(l),a.appendChild(c)}else a.appendChild(l),a.appendChild(h);var p=sf.base.createElement("span",{className:"e-file-size"});p.innerHTML=this.bytesToSize(o.size),a.appendChild(p);var u=sf.base.createElement("span",{className:v});a.appendChild(u),u.innerHTML=o.status,r.appendChild(a);var f=sf.base.createElement("span",{className:" e-icons",attrs:{tabindex:this.btnTabIndex}});"msie"===this.browserName&&f.classList.add("e-msie"),f.setAttribute("title",this.localizedTexts("remove")),f.setAttribute("aria-label",this.localizedTexts("remove")),r.appendChild(f),sf.base.EventHandler.add(f,"click",this.removeFiles,this),"2"===o.statusCode?(u.classList.add(N),f.classList.add(y),f.setAttribute("title",this.localizedTexts("delete")),f.setAttribute("aria-label",this.localizedTexts("delete"))):"1"!==o.statusCode&&(u.classList.remove(N),u.classList.add("e-validation-fails")),this.autoUpload&&"1"===o.statusCode&&""!==this.asyncSettings.saveUrl&&(u.innerHTML=""),f.classList.contains(y)||f.classList.add(b);var g={element:r,fileInfo:o,index:e.indexOf(o),isPreload:this.isPreLoadFile(o)};this.fileListRenderEnabled&&this.dotNetRef.invokeMethodAsync("FileListRenderingEvent",g),this.listParent.appendChild(r),this.fileList.push(r),this.truncateName(l);var M=this.flag;this.isPreLoadFile(o)&&(this.flag=!1,this.checkActionComplete(!0),this.flag=M)}},e.prototype.getSlicedName=function(e){var t;t=e.textContent,e.dataset.tail=t.slice(t.length-10)},e.prototype.setListToFileInfo=function(e,t){for(var i=0,s=e;i<s.length;i++){s[i].list=t}},e.prototype.truncateName=function(e){var t=e;("edge"!==this.browserName&&t.offsetWidth<t.scrollWidth||t.offsetWidth+1<t.scrollWidth)&&this.getSlicedName(t)},e.prototype.getFileType=function(e){var t,i=e.lastIndexOf(".");return i>=0&&(t=e.substring(i+1)),t||""},e.prototype.getFileNameOnly=function(e){var t=this.getFileType(e);return e.split("."+t)[0]},e.prototype.setInitialAttributes=function(){if(this.initialAttr.accept&&this.element.setAttribute("accept",this.initialAttr.accept),this.initialAttr.disabled&&this.element.setAttribute("disabled","disabled"),this.initialAttr.multiple){var e=document.createAttribute("multiple");this.element.setAttributeNode(e)}},e.prototype.filterfileList=function(e){for(var t=[],i=0;i<e.length;i++)this.getLiElement(e[i]).classList.contains(N)||t.push(e[i]);return t},e.prototype.updateStatus=function(e,t,i,s){if(void 0===s&&(s=!0),""!==t&&!sf.base.isNullOrUndefined(t)&&""!==i&&!sf.base.isNullOrUndefined(i))if(this.isBlazorSaveUrl)for(var n=0;n<this.filesData.length;n++)this.filesData[n].name===e.name&&(this.filesData[n].status=t,this.filesData[n].statusCode=i);else e.status=t,e.statusCode=i;if(s){var o=this.getLiElement(e);sf.base.isNullOrUndefined(o)||sf.base.isNullOrUndefined(o.querySelector("."+v))||""===t||sf.base.isNullOrUndefined(t)||(o.querySelector("."+v).textContent=t)}return e},e.prototype.getLiElement=function(e){for(var t,i=0;i<this.filesData.length;i++)(sf.base.isNullOrUndefined(this.filesData[i].id)||sf.base.isNullOrUndefined(e.id)?this.filesData[i].name===e.name:this.filesData[i].name===e.name&&this.filesData[i].id===e.id)&&(t=i);return this.fileList[t]},e.prototype.createProgressBar=function(e){var t=sf.base.createElement("span",{className:w}),i=sf.base.createElement("progressbar",{className:S,attrs:{value:"0",max:"100"}}),s=sf.base.createElement("span",{className:"e-progress-inner-wrap"});i.setAttribute("style","width: 0%");var n=sf.base.createElement("span",{className:"e-progress-bar-text"});n.textContent="0%",s.appendChild(i),t.appendChild(s),t.appendChild(n),e.querySelector(".e-file-container").appendChild(t)},e.prototype.updateProgressbar=function(e,t){if(!isNaN(Math.round(e.loaded/e.total*100))&&!sf.base.isNullOrUndefined(t.querySelector("."+S)))if(sf.base.isNullOrUndefined(this.progressInterval)||""===this.progressInterval)this.changeProgressValue(t,Math.round(e.loaded/e.total*100).toString()+"%");else{var i=Math.round(e.loaded/e.total*100)%parseInt(this.progressInterval,10);0!==i&&100!==i||this.changeProgressValue(t,Math.round(e.loaded/e.total*100).toString()+"%")}},e.prototype.changeProgressValue=function(e,t){e.querySelector("."+S).setAttribute("style","width:"+t),e.querySelector(".e-progress-bar-text").textContent=t},e.prototype.uploadInProgress=function(e,t,i,s){var n=this.getLiElement(t);if(!sf.base.isNullOrUndefined(n)||i){if(sf.base.isNullOrUndefined(n))this.cancelUploadingFile(t,e,s);else{"5"===t.statusCode&&this.cancelUploadingFile(t,e,s,n),n.querySelectorAll("."+w).length>0||!n.querySelector("."+v)||(n.querySelector("."+v).classList.add("e-upload-progress"),this.createProgressBar(n),this.updateProgressBarClasses(n,"e-upload-progress"),n.querySelector("."+v).classList.remove(x)),this.updateProgressbar(e,n);var o=n.querySelector("."+b);sf.base.isNullOrUndefined(o)||(o.classList.add(M,"e-upload-progress"),o.setAttribute("title",this.localizedTexts("abort")),o.setAttribute("aria-label",this.localizedTexts("abort")),o.classList.remove(b))}var r={e:e,operation:"upload",file:this.updateStatus(t,this.localizedTexts("inProgress"),"3"),lengthComputable:e.lengthComputable,loaded:e.loaded,total:e.total};this.progressingEnabled&&this.dotNetRef.invokeMethodAsync("ProgressEvent",r)}},e.prototype.cancelEventCallback=function(e,t,i,s){var n=this;if(s.cancel){if(e.statusCode="3",!sf.base.isNullOrUndefined(i)){var o=i.querySelector("."+M);sf.base.isNullOrUndefined(o)||(g(o),sf.base.detach(i.querySelector(".e-spinner-pane")))}}else{t.emitError=!1,t.httpRequest.abort();var r=new FormData;if("5"===e.statusCode){var a=this.element.getAttribute("name");r.append(a,e.name),r.append("cancel-uploading",e.name);var l=new sf.base.Ajax(this.asyncSettings.removeUrl,"POST",!0,null);l.emitError=!1,l.onLoad=function(t){return n.removecanceledFile(t,e),{}},l.send(r)}}},e.prototype.cancelUploadingFile=function(e,t,i,s){var n=this;if("5"===e.statusCode){var o={event:t,fileData:e,cancel:!1};this.cancelEnabled?this.dotNetRef.invokeMethodAsync("CancelingEvent",o).then((function(t){n.cancelEventCallback(e,i,s,t)})):this.cancelEventCallback(e,i,s,o)}},e.prototype.removecanceledFile=function(e,t){var i=this.getLiElement(t);if(!(sf.base.isNullOrUndefined(i)||i.querySelector("."+C)||sf.base.isNullOrUndefined(i.querySelector("."+M)))){this.updateStatus(t,this.localizedTexts("fileUploadCancel"),"5"),this.renderFailureState(e,t,i);var s=i.querySelector("."+b);sf.base.isNullOrUndefined(i)||(g(s),sf.base.detach(i.querySelector(".e-spinner-pane")));var n={event:e,response:e&&e.currentTarget?this.getResponse(e):null,operation:"cancel",file:t};this.successEnabled&&this.dotNetRef.invokeMethodAsync("SuccessEvent",n)}},e.prototype.renderFailureState=function(e,t,i){var s=this;this.updateProgressBarClasses(i,x),this.removeProgressbar(i,"failure"),sf.base.isNullOrUndefined(i.querySelector(".e-file-status"))||i.querySelector(".e-file-status").classList.add(x);var n=i.querySelector("."+M);sf.base.isNullOrUndefined(n)||(n.classList.remove(M,"e-upload-progress"),n.classList.add(b),n.setAttribute("title",this.localizedTexts("remove")),n.setAttribute("aria-label",this.localizedTexts("remove")),this.pauseButton=sf.base.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}}),n.parentElement.insertBefore(this.pauseButton,n),this.pauseButton.setAttribute("title",this.localizedTexts("retry")),this.pauseButton.setAttribute("aria-label",this.localizedTexts("retry")),i.querySelector("."+C).addEventListener("click",(function(e){s.reloadcanceledFile(e,t,i,!1)}),!1))},e.prototype.reloadcanceledFile=function(e,t,i,s){t.statusCode="1",t.status=this.localizedTexts("readyToUploadMessage"),s||(i.querySelector("."+v).classList.remove(x),sf.base.isNullOrUndefined(i.querySelector("."+C))||sf.base.detach(i.querySelector("."+C)),this.pauseButton=null),i.classList.add("e-restrict-retry"),this.upload([t])},e.prototype.uploadComplete=function(e,t,i){var s=e.target;if(4===s.readyState&&s.status>=200&&s.status<=299){var n=this.getLiElement(t);if(sf.base.isNullOrUndefined(n)&&(!i||sf.base.isNullOrUndefined(i)))return;if(!sf.base.isNullOrUndefined(n)){this.updateProgressBarClasses(n,N),this.removeProgressbar(n,"success");var o=n.querySelector("."+M);sf.base.isNullOrUndefined(o)||(o.classList.add(y),o.setAttribute("title",this.localizedTexts("delete")),o.setAttribute("aria-label",this.localizedTexts("delete")),o.classList.remove(M),o.classList.remove("e-upload-progress"))}this.raiseSuccessEvent(e,t)}else this.uploadFailed(e,t)},e.prototype.getResponse=function(e){var t=e.currentTarget;return{readyState:t.readyState,statusCode:t.status,statusText:t.statusText,headers:t.getAllResponseHeaders(),withCredentials:t.withCredentials}},e.prototype.serverRemoveIconBindEvent=function(){if(this.uploadWrapper&&this.isBlazorSaveUrl)for(var e=[].slice.call(this.uploadWrapper.querySelectorAll("ul li")),t=0;t<e.length;t++){var i=e[t]?e[t].querySelector(".e-icons"):null;i&&(sf.base.EventHandler.remove(i,"click",this.removeFiles),sf.base.EventHandler.add(i,"click",this.removeFiles,this))}},e.prototype.raiseSuccessEvent=function(e,t){var i=this,s=e&&e.currentTarget?this.getResponse(e):null,n=this.localizedTexts("uploadSuccessMessage"),o={e:e,response:s,operation:"upload",file:this.updateStatus(t,n,"2",!1),statusText:n};if(!this.isBlazorSaveUrl){var r=this.getLiElement(t);if(!sf.base.isNullOrUndefined(r)){var a=r.querySelector(".e-spinner-pane");sf.base.isNullOrUndefined(a)||(g(r),sf.base.detach(a))}}this.successEnabled?this.dotNetRef.invokeMethodAsync("SuccessEvent",o).then((function(e){i.successEventCallback(t,e)})):this.successEventCallback(t,o)},e.prototype.successEventCallback=function(e,t){this.updateStatus(e,t.statusText,"2"),this.uploadedFilesData.push(e),!this.isBlazorSaveUrl&&this.changeEnabled&&this.dotNetRef.invokeMethodAsync("ChangeEvent",{files:this.uploadedFilesData}),!this.isBlazorSaveUrl&&this.isBlazorTemplate&&this.dotNetRef.invokeMethodAsync("CreateFileList",this.filesData,this.isForm),this.checkActionButtonStatus(),this.sequentialUpload&&!this.showFileList&&this.uploadSequential(),this.fileList.length>0&&(this.getLiElement(e).classList.contains("e-restrict-retry")?this.getLiElement(e).classList.remove("e-restrict-retry"):(this.uploadSequential(),this.checkActionComplete(!0)))},e.prototype.uploadFailed=function(e,t){var i=this,s=this.getLiElement(t),n=e&&e.currentTarget?this.getResponse(e):null,o=this.localizedTexts("uploadFailedMessage"),r={e:e,response:n,operation:"upload",file:this.updateStatus(t,o,"0",!1),statusText:o,retryFiles:null};sf.base.isNullOrUndefined(s)||this.renderFailureState(e,t,s),this.failuredEnabled?this.dotNetRef.invokeMethodAsync("FailureEvent",r).then((function(e){i.failureEventCallback(t,e)})):this.failureEventCallback(t,r)},e.prototype.failureEventCallback=function(e,t){this.updateStatus(e,t.statusText,"0"),this.checkActionButtonStatus(),this.uploadSequential(),this.checkActionComplete(!0);var i=t.retryFiles;null!=i&&this.retry(i)},e.prototype.uploadSequential=function(){this.sequentialUpload&&(this.autoUpload?this.checkAutoUpload(this.filesData):this.uploadButtonClick())},e.prototype.checkActionComplete=function(e){e?++this.actionCompleteCount:--this.actionCompleteCount,this.raiseActionComplete()},e.prototype.raiseActionComplete=function(){if(this.filesData.length===this.actionCompleteCount&&this.flag){this.flag=!1;var e={fileData:[]};e.fileData=this.getSelectedFileStatus(this.selectedFiles),this.actionCompleteEnabled&&this.dotNetRef.invokeMethodAsync("ActionCompleteEvent",e)}},e.prototype.getSelectedFileStatus=function(e){for(var t=[],i=0,s=0;s<e.length;s++)for(var n=e[s],o=0;o<this.filesData.length;o++)this.filesData[o].name===n.name&&this.filesData[o].status===n.status&&(t[i]=this.filesData[o],++i);return t},e.prototype.updateProgressBarClasses=function(e,t){var i=e.querySelector("."+S);sf.base.isNullOrUndefined(i)||i.classList.add(t)},e.prototype.removeProgressbar=function(e,t){var i=this;sf.base.isNullOrUndefined(e.querySelector("."+w))||(this.progressAnimation=new sf.base.Animation({duration:1250}),this.progressAnimation.animate(e.querySelector("."+w),{name:"FadeOut"}),this.progressAnimation.animate(e.querySelector(".e-progress-bar-text"),{name:"FadeOut"}),setTimeout((function(){i.animateProgressBar(e,t)}),750))},e.prototype.animateProgressBar=function(e,t){"success"===t?(e.classList.add(N),sf.base.isNullOrUndefined(e.querySelector("."+v))||(e.querySelector("."+v).classList.remove("e-upload-progress"),this.progressAnimation.animate(e.querySelector("."+v),{name:"FadeIn"}),e.querySelector("."+v).classList.add(N),e.querySelector("."+v).classList.remove(x))):sf.base.isNullOrUndefined(e.querySelector("."+v))||(e.querySelector("."+v).classList.remove("e-upload-progress"),this.progressAnimation.animate(e.querySelector("."+v),{name:"FadeIn"}),e.querySelector("."+v).classList.add(x)),e.querySelector("."+w)&&sf.base.detach(e.querySelector("."+w))},e.prototype.localizedTexts=function(e){return this.localeText[e]},e.prototype.chunkUpload=function(e,t,i){var s=Math.min(this.asyncSettings.chunkSize,e.size),n={chunkIndex:0,blob:e.rawFile.slice(0,s),file:e,start:0,end:s,retryCount:0,request:null};this.sendRequest(e,n,t,i)},e.prototype.sendRequest=function(e,t,i,s){var n=this,o=new FormData;if(!e.rawFile)for(var r=0;r<this.selectedFiles.length;r++)e.id===this.selectedFiles[r].id&&(e.rawFile=this.selectedFiles[r].rawFile);var a=e.rawFile.slice(t.start,t.end);o.append("chunkFile",a,e.name),o.append(this.uploaderName,a,e.name),o.append("chunk-index",t.chunkIndex.toString()),o.append("chunkIndex",t.chunkIndex.toString());var l=Math.max(Math.ceil(e.size/this.asyncSettings.chunkSize),1);o.append("total-chunk",l.toString()),o.append("totalChunk",l.toString());var h=new sf.base.Ajax({url:this.asyncSettings.saveUrl,type:"POST",async:!0,contentType:null});h.emitError=!1,h.onLoad=function(e){return n.chunkUploadComplete(e,t,i),{}},h.onUploadProgress=function(e){return n.chunkUploadInProgress(e,t,i),{}};var d={fileData:e,customFormData:[],cancel:!1,chunkSize:0===this.asyncSettings.chunkSize?null:this.asyncSettings.chunkSize};h.beforeSend=function(i){d.currentRequest=h.httpRequest,d.currentChunkIndex=t.chunkIndex,n.currentRequestHeader&&n.updateCustomheader(h.httpRequest,n.currentRequestHeader),n.customFormDatas&&n.updateFormData(o,n.customFormDatas),0===d.currentChunkIndex?n.uploadingEnabled?n.dotNetRef.invokeMethodAsync("UploadingEvent",d).then((function(t){n.uploadingEventCallback(o,t,i,e)})):n.uploadingEventCallback(o,d,i,e):n.chunkUploadingEnabled?n.dotNetRef.invokeMethodAsync("ChunkUploadingEvent",d).then((function(t){n.uploadingEventCallback(o,t,i,e)})):n.uploadingEventCallback(o,d,i,e)},h.onError=function(e){return n.chunkUploadFailed(e,t,i),{}},h.send(o),t.request=h},e.prototype.uploadingEventCallback=function(e,t,i,s){t.cancel?this.eventCancelByArgs(i,t,s):this.updateFormData(e,t.customFormData)},e.prototype.eventCancelByArgs=function(e,t,i){var s=this;if(e.cancel=!0,"5"!==t.fileData.statusCode){var n=this.getLiElement(t.fileData);n.querySelector("."+v).innerHTML=this.localizedTexts("fileUploadCancel"),n.querySelector("."+v).classList.add(x),t.fileData.statusCode="5",t.fileData.status=this.localizedTexts("fileUploadCancel"),this.pauseButton=sf.base.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}});var o=n.querySelector("."+b);o.parentElement.insertBefore(this.pauseButton,o),this.pauseButton.setAttribute("title",this.localizedTexts("retry")),this.pauseButton.setAttribute("aria-label",this.localizedTexts("retry")),this.pauseButton.addEventListener("click",(function(e){s.reloadcanceledFile(e,i,n)}),!1),this.checkActionButtonStatus()}},e.prototype.checkChunkUpload=function(){return!(this.asyncSettings.chunkSize<=0||sf.base.isNullOrUndefined(this.asyncSettings.chunkSize))},e.prototype.chunkUploadComplete=function(e,t,i){var s,n=this,o=e.target;if(4===o.readyState&&o.status>=200&&o.status<300){var r=e&&e.currentTarget?this.getResponse(e):null,a=Math.max(Math.ceil(t.file.size/this.asyncSettings.chunkSize),1),l={event:e,file:t.file,chunkIndex:t.chunkIndex,totalChunk:a,chunkSize:this.asyncSettings.chunkSize,response:r};if(this.chunkSuccessEnabled&&this.dotNetRef.invokeMethodAsync("ChunkSuccessEvent",l),!sf.base.isNullOrUndefined(i)&&i||(s=this.getLiElement(t.file)),this.updateMetaData(t),t.end===t.file.size&&(t.file.statusCode="3"),"5"===t.file.statusCode){var h={event:e,fileData:t.file,cancel:!1};this.cancelEnabled?this.dotNetRef.invokeMethodAsync("CancelingEvent",h).then((function(e){n.cancelingEventCallback(t,s,o,i,e)})):this.cancelingEventCallback(t,s,o,i,h)}else{if(a-1===t.chunkIndex&&a>t.chunkIndex){var d=this.pausedData.indexOf(t);return d>=0&&this.pausedData.splice(d,1),sf.base.isNullOrUndefined(this.template)&&(sf.base.isNullOrUndefined(i)||!i)&&s&&(s&&!sf.base.isNullOrUndefined(s.querySelector("."+O))&&sf.base.detach(s.querySelector("."+O)),this.removeChunkProgressBar(t)),void this.raiseSuccessEvent(e,t.file)}"4"!==t.file.statusCode&&this.sendNextRequest(t)}}else this.chunkUploadFailed(e,t)},e.prototype.cancelingEventCallback=function(e,t,i,s,n){var o=this;if(n.cancel){e.file.statusCode="3";var r=t.querySelector("."+M);sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(r)||(g(r),sf.base.detach(t.querySelector(".e-spinner-pane"))),this.sendNextRequest(e)}else{e.request.emitError=!1,i.abort();var a=new FormData,l=this.element.getAttribute("name");a.append(l,e.file.name),a.append("cancel-uploading",e.file.name),a.append("cancelUploading",e.file.name);var h=new sf.base.Ajax(this.asyncSettings.removeUrl,"POST",!0,null);h.emitError=!1,h.onLoad=function(t){return o.removeChunkFile(t,e,s),{}},h.send(a)}},e.prototype.sendNextRequest=function(e){e.start=e.end,e.end+=this.asyncSettings.chunkSize,e.end=Math.min(e.end,e.file.size),e.chunkIndex+=1,this.sendRequest(e.file,e)},e.prototype.removeChunkFile=function(e,t,i){if(sf.base.isNullOrUndefined(this.template)&&sf.base.isNullOrUndefined(i)&&!i){var s=this.getLiElement(t.file),n=s.querySelector("."+M),o=n;this.updateStatus(t.file,this.localizedTexts("fileUploadCancel"),"5"),this.updateProgressBarClasses(s,x),this.removeProgressbar(s,"failure"),n&&n.classList.remove(M),n&&n.classList.add(b),n&&n.setAttribute("title",this.localizedTexts("remove")),n&&n.setAttribute("aria-label",this.localizedTexts("remove"));var r=s.querySelector("."+O);r&&r.classList.add(C),r&&r.classList.remove(O),r&&r.setAttribute("title",this.localizedTexts("retry")),r&&r.setAttribute("aria-label",this.localizedTexts("retry")),sf.base.isNullOrUndefined(s)||sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(s.querySelector(".e-spinner-pane"))||(g(o),sf.base.detach(s.querySelector(".e-spinner-pane")))}},e.prototype.pauseUpload=function(e,t,i){e.file.statusCode="4",e.file.status=this.localizedTexts("pause"),this.updateMetaData(e);var s={event:t||null,file:e.file,chunkIndex:e.chunkIndex,chunkCount:Math.round(e.file.size/this.asyncSettings.chunkSize),chunkSize:this.asyncSettings.chunkSize};this.abortUpload(e,i,s)},e.prototype.abortUpload=function(e,t,i){"4"!==e.file.statusCode&&(e.request.emitError=!1,e.request.httpRequest.abort());var s=this.getLiElement(e.file);if(sf.base.isNullOrUndefined(this.template)&&(sf.base.isNullOrUndefined(t)||!t)){var n=s.querySelector("."+O);n.classList.remove(O),n.classList.add("e-file-play-btn"),n.setAttribute("title",this.localizedTexts("resume")),n.setAttribute("aria-label",this.localizedTexts("resume")),n.nextElementSibling.classList.add(b),n.nextElementSibling.classList.remove(M),n.nextElementSibling.setAttribute("title",this.localizedTexts("remove")),n.nextElementSibling.setAttribute("aria-label",this.localizedTexts("remove"))}for(var o=0;o<this.pausedData.length;o++)this.pausedData[o].file.name===e.file.name&&this.pausedData.splice(o,1);this.pausedData.push(e),this.pausedEnabled&&this.dotNetRef.invokeMethodAsync("PausingEvent",i)},e.prototype.resumeUpload=function(e,t,i){var s,n=this.getLiElement(e.file);sf.base.isNullOrUndefined(n)||(s=n.querySelector(".e-file-play-btn")),sf.base.isNullOrUndefined(s)||!sf.base.isNullOrUndefined(i)&&i||(s.classList.remove("e-file-play-btn"),s.classList.add(O),s.setAttribute("title",this.localizedTexts("pause")),s.setAttribute("aria-label",this.localizedTexts("pause")),s.nextElementSibling.classList.remove(b),s.nextElementSibling.classList.add(M),s.nextElementSibling.setAttribute("title",this.localizedTexts("abort")),s.nextElementSibling.setAttribute("aria-label",this.localizedTexts("abort"))),e.file.status=this.localizedTexts("inProgress"),e.file.statusCode="3",this.updateMetaData(e);var o={event:t||null,file:e.file,chunkIndex:e.chunkIndex,chunkCount:Math.round(e.file.size/this.asyncSettings.chunkSize),chunkSize:this.asyncSettings.chunkSize};this.resumeEnabled&&this.dotNetRef.invokeMethodAsync("ResumingEvent",o);for(var r=0;r<this.pausedData.length;r++)this.pausedData[r].end===this.pausedData[r].file.size?this.chunkUploadComplete(t,e,i):this.pausedData[r].file.name===e.file.name&&(this.pausedData[r].start=this.pausedData[r].end,this.pausedData[r].end=this.pausedData[r].end+this.asyncSettings.chunkSize,this.pausedData[r].end=Math.min(this.pausedData[r].end,this.pausedData[r].file.size),this.pausedData[r].chunkIndex=this.pausedData[r].chunkIndex+1,this.sendRequest(this.pausedData[r].file,this.pausedData[r],i))},e.prototype.updateMetaData=function(e){-1===this.uploadMetaData.indexOf(e)||this.uploadMetaData.splice(this.uploadMetaData.indexOf(e),1),this.uploadMetaData.push(e)},e.prototype.removeChunkProgressBar=function(e){var t=this.getLiElement(e.file);if(!sf.base.isNullOrUndefined(t)){this.updateProgressBarClasses(t,N),this.removeProgressbar(t,"success");var i=t.querySelector("."+M);sf.base.isNullOrUndefined(i)||(i.classList.add(y),i.setAttribute("title",this.localizedTexts("delete")),i.setAttribute("aria-label",this.localizedTexts("delete")),i.classList.remove(M,"e-upload-progress"))}},e.prototype.chunkUploadFailed=function(e,t,i){var s,n=this,o=Math.max(Math.ceil(t.file.size/this.asyncSettings.chunkSize),1);!sf.base.isNullOrUndefined(this.template)||!sf.base.isNullOrUndefined(i)&&i||(s=this.getLiElement(t.file));var r=e&&e.currentTarget?this.getResponse(e):null,a={event:e,file:t.file,chunkIndex:t.chunkIndex,totalChunk:o,chunkSize:this.asyncSettings.chunkSize,cancel:!1,response:r};this.chunkFailuredEnabled?this.dotNetRef.invokeMethodAsync("ChunkFailureEvent",a).then((function(o){n.chunkFailureCallback(e,t,s,r,i,o)})):this.chunkFailureCallback(e,t,s,r,i,a)},e.prototype.chunkFailureCallback=function(e,t,i,s,n,o){var r=this;if(!o.cancel)if(t.retryCount<this.asyncSettings.retryCount)setTimeout((function(){r.retryRequest(i,t,n)}),this.asyncSettings.retryAfterDelay);else{if(!sf.base.isNullOrUndefined(i)){var a=i.querySelector("."+O)?i.querySelector("."+O):i.querySelector(".e-file-play-btn");sf.base.isNullOrUndefined(a)||(a.classList.add(C),a.classList.remove(O,"e-file-play-btn")),this.updateProgressBarClasses(i,x),this.removeProgressbar(i,"failure"),i.querySelector(".e-icons").classList.remove("e-upload-progress");var l=i.querySelector("."+M)?i.querySelector("."+M):i.querySelector("."+b);l.classList.remove(M),sf.base.isNullOrUndefined(i.querySelector("."+O))||sf.base.detach(i.querySelector("."+O)),t.start>0?(l.classList.add(y),l.setAttribute("title",this.localizedTexts("delete")),l.setAttribute("aria-label",this.localizedTexts("delete"))):(l.classList.add(b),l.setAttribute("title",this.localizedTexts("remove")),l.setAttribute("aria-label",this.localizedTexts("remove")))}t.retryCount=0;var h=t.file,d=this.localizedTexts("uploadFailedMessage"),c={e:e,response:s,operation:"upload",file:this.updateStatus(h,d,"0",!1),statusText:d,retryFiles:null};this.failuredEnabled?this.dotNetRef.invokeMethodAsync("FailureEvent",c).then((function(e){r.failureCallback(h,e)})):this.failureCallback(h,c)}},e.prototype.failureCallback=function(e,t){this.updateStatus(e,t.statusText,"0"),this.uploadSequential(),this.checkActionComplete(!0);var i=t.retryFiles;null!=i&&this.retry(i)},e.prototype.retryRequest=function(e,t,i){sf.base.isNullOrUndefined(this.template)&&(sf.base.isNullOrUndefined(i)||!i)&&e&&this.updateProgressBarClasses(e,x),t.retryCount+=1,this.sendRequest(t.file,t)},e.prototype.checkPausePlayAction=function(e){var t=e.target,i=e.target.parentElement,s=this.fileList.indexOf(i),n=this.filesData[s],o=this.getCurrentMetaData(n);t.classList.contains(O)?this.pauseUpload(o,e):t.classList.contains("e-file-play-btn")?this.resumeUpload(o,e):t.classList.contains(C)&&(o.file.status===this.localizedTexts("fileUploadCancel")?this.retryUpload(o,!1):this.retryUpload(o,!0))},e.prototype.retryUpload=function(e,t){t?(e.end=e.end+this.asyncSettings.chunkSize,e.start=e.start+this.asyncSettings.chunkSize,this.sendRequest(e.file,e)):(e.file.statusCode="1",e.file.status=this.localizedTexts("readyToUploadMessage"),this.chunkUpload(e.file)),this.getLiElement(e.file).classList.add("e-restrict-retry")},e.prototype.chunkUploadInProgress=function(e,t,i){var s=this;if("4"!==t.file.statusCode){"4"!==t.file.statusCode&&"5"!==t.file.statusCode&&(t.file.statusCode="3",t.file.status=this.localizedTexts("inProgress")),this.updateMetaData(t);var n=this.getLiElement(t.file);if(!sf.base.isNullOrUndefined(n)){var o=n.querySelector("."+C);if(sf.base.isNullOrUndefined(o)||(o.classList.add(O),o.setAttribute("title",this.localizedTexts("pause")),o.setAttribute("aria-label",this.localizedTexts("pause")),o.classList.remove(C)),!sf.base.isNullOrUndefined(n)){if(!(n.querySelectorAll("."+w).length>0)){var r=n.querySelector("."+v);sf.base.isNullOrUndefined(this.template)&&(r.classList.add("e-upload-progress"),r.classList.remove(x),this.createProgressBar(n),this.updateProgressBarClasses(n,"e-upload-progress"));var a=n.querySelector("."+b)?n.querySelector("."+b):n.querySelector("."+y);sf.base.isNullOrUndefined(a)||(a.classList.add(M),a.setAttribute("title",this.localizedTexts("abort")),a.setAttribute("aria-label",this.localizedTexts("abort")),a.classList.remove(b))}if(!isNaN(Math.round(e.loaded/e.total*100))&&sf.base.isNullOrUndefined(this.template)&&"4"!==t.file.statusCode){var l=void 0,h=Math.ceil(t.file.size/this.asyncSettings.chunkSize)-1;this.asyncSettings.chunkSize&&h&&(l=Math.round(t.chunkIndex/h*100),this.changeProgressValue(n,l.toString()+"%"))}0===t.chunkIndex&&this.checkActionButtonStatus()}if(sf.base.isNullOrUndefined(n.querySelector("."+O))&&sf.base.isNullOrUndefined(this.template)&&sf.base.isNullOrUndefined(n.querySelector("."+y))){this.pauseButton=sf.base.createElement("span",{className:"e-icons e-file-pause-btn",attrs:{tabindex:this.btnTabIndex}}),"msie"===this.browserName&&this.pauseButton.classList.add("e-msie");var d=n.querySelector("."+M);d.parentElement.insertBefore(this.pauseButton,d),this.pauseButton.setAttribute("title",this.localizedTexts("pause")),this.pauseButton.setAttribute("aria-label",this.localizedTexts("pause")),this.pauseButton.addEventListener("click",(function(e){s.checkPausePlayAction(e)}),!1)}}}},e.prototype.bytesToSize=function(e){var t=-1;if(!e)return"0.0 KB";do{e/=1024,t++}while(e>99);return t>=2&&(e*=1024,t=1),Math.max(e,0).toFixed(1)+" "+["KB","MB"][t]},e.prototype.sortFileList=function(e){for(var t=e=e||this.sortFilesList,i=[],s=0;s<t.length;s++)i.push(t[s].name);for(var n=[],o=0,r=i.sort();o<r.length;o++){var a=r[o];for(s=0;s<t.length;s++)a===t[s].name&&n.push(t[s])}return n},e.prototype.destroy=function(){this.element.value=null,this.isBlazorSaveUrl||this.isBlazorTemplate||this.clearAll(),this.unWireEvents(),this.unBindDropEvents(),this.element.removeAttribute("accept"),this.setInitialAttributes();for(var e=0,t=["aria-label","directory","webkitdirectory","tabindex"];e<t.length;e++){var i=t[e];this.element.removeAttribute(i)}},e.prototype.upload=function(e,t){var i=this;if(e=e||this.filesData,this.sequentialUpload&&(this.isFirstFileOnSelection||t)&&this.showFileList)this.sequenceUpload(e);else{var s=this.getFilesInArray(e),n={customFormData:[],currentRequest:null,cancel:!1,withCredentials:!1,filesData:s};this.beforeUploadEnabled?this.dotNetRef.invokeMethodAsync("BeforeUploadEvent",n).then((function(e){i.beforeUploadCallback(s,t,e)})):this.beforeUploadCallback(s,t,n)}},e.prototype.beforeUploadCallback=function(e,t,i){i.cancel||(this.currentRequestHeader=i.currentRequest?i.currentRequest:this.currentRequestHeader,this.customFormDatas=i.customFormData&&i.customFormData.length>0?i.customFormData:this.customFormDatas,this.withCredentials=i.withCredentials?i.withCredentials:this.withCredentials,this.uploadFiles(e,t))},e.prototype.getFilesInArray=function(e){var t=[];return e instanceof Array?t=this.getFileListData(e):t.push(e),t},e.prototype.getFileListData=function(e){var t=[];if(!sf.base.isNullOrUndefined(this.filesData)&&!sf.base.isNullOrUndefined(e))for(var i=function(i){t.push(s.filesData.filter((function(t){return t.id===e[i].id}))[0])},s=this,n=0;n<e.length;n++)i(n);return sf.base.isNullOrUndefined(t)?[]:t},e.prototype.uploadFiles=function(e,t){var i=this,s=[];if(""===this.asyncSettings.saveUrl||sf.base.isNullOrUndefined(this.asyncSettings.saveUrl))this.dotNetRef.invokeMethodAsync("GetFileDetails",e);else{if(!t||sf.base.isNullOrUndefined(t))if(this.multiple)s=this.filterfileList(e);else{var n=[];n.push(e[0]),s=this.filterfileList(n)}else s=e;for(var o=function(e){r.checkChunkUpload()?r.uploadFilesRequest(s,e,t):s[e]&&s[e].rawFile instanceof File&&r.getBase64(s[e].rawFile).then((function(n){i.base64String.push(n),i.uploadFilesRequest(s,e,t)}))},r=this,a=0;a<s.length;a++)o(a)}},e.prototype.uploadFilesRequest=function(e,t,i){var s,n=this,o=[],r=this.checkChunkUpload(),a=new sf.base.Ajax(this.asyncSettings.saveUrl,"POST",!0,null);a.emitError=!1,s=e.slice(0),o.push(s[t].rawFile);var l={cancel:!1,currentRequest:null,customFormData:[],fileData:s[t]},h=new FormData;if(a.beforeSend=function(i){l.currentRequest=a.httpRequest,l.currentRequest.withCredentials=n.withCredentials,l.fileData.rawFile=r?l.fileData.rawFile:n.base64String[t],n.currentRequestHeader&&n.updateCustomheader(a.httpRequest,n.currentRequestHeader),n.customFormDatas&&n.updateFormData(h,n.customFormDatas),n.uploadingEnabled?n.dotNetRef.invokeMethodAsync("UploadingEvent",l).then((function(s){l=s,n.uploadCallback(i,r,e,h,t,o,s)})):n.uploadCallback(i,r,e,h,t,o,l)},"1"===e[t].statusCode){var d=this.element.getAttribute("name");h.append(d,e[t].rawFile,e[t].name),r&&e[t].size>this.asyncSettings.chunkSize?this.chunkUpload(e[t],i,t):(a.onLoad=function(s){return l.cancel||n.uploadComplete(s,e[t],i),{}},a.onUploadProgress=function(s){return l.cancel||n.uploadInProgress(s,e[t],i,a),{}},a.onError=function(i){return n.uploadFailed(i,e[t]),{}},a.send(h))}},e.prototype.uploadCallback=function(e,t,i,s,n,o,r){t||(i[n].rawFile=r.fileData.rawFile=o[n]),r.cancel&&this.eventCancelByArgs(e,r,i[n]),this.updateFormData(s,r.customFormData)},e.prototype.spliceFiles=function(e){for(var t=this.fileList[e],i=this.getFilesData(),s=+t.getAttribute("data-files-count"),n=0,o=0;o<e;o++)n+=+this.fileList[o].getAttribute("data-files-count");for(var r=n+s-1;r>=n;r--)i.splice(r,1)},e.prototype.remove=function(e,t,i,s,n){var o=this;sf.base.isNullOrUndefined(s)&&(s=!0);var r={cancel:!1,customFormData:[],currentRequest:null,filesData:this.getFilesInArray(e),postRawFile:s};this.beforeRemoveEnabled?this.dotNetRef.invokeMethodAsync("BeforeRemoveEvent",r).then((function(s){o.beforeRemoveCallback(e,t,i,n,s)})):this.beforeRemoveCallback(e,t,i,n,r)},e.prototype.beforeRemoveCallback=function(e,t,i,s,n){var o=this,r={event:s,cancel:!1,filesData:[],customFormData:[],postRawFile:n.postRawFile,currentRequest:null};if(!n.cancel){this.currentRequestHeader=n.currentRequest,this.customFormDatas=n.customFormData;if(this.isFormUpload()&&!this.isBlazorSaveUrl)r.filesData=e,this.dotNetRef.invokeMethodAsync("RemovingEvent",r).then((function(t){o.removeCallback(e,t)}));else if(!this.isForm||!sf.base.isNullOrUndefined(this.asyncSettings.removeUrl)&&""!==this.asyncSettings.removeUrl||this.isBlazorSaveUrl){var a=[];(e=sf.base.isNullOrUndefined(e)?this.filesData:e)instanceof Array?a=e:a.push(e),r.filesData=a;for(var l=this.asyncSettings.removeUrl,h=""!==l&&!sf.base.isNullOrUndefined(l),d=function(e){c.filesData.indexOf(e);var n=c.uploadedFilesData.indexOf(e);("2"===e.statusCode||"4"===e.statusCode||"0"===e.statusCode&&-1!==n)&&h?c.removeUploadedFile(e,r,i,t):!i&&c.removingEnabled?c.dotNetRef.invokeMethodAsync("RemovingEvent",r).then((function(i){i.cancel||o.removeFilesData(e,t)})):c.removeFilesData(e,t),s&&!s.target.classList.contains(b)&&c.checkActionComplete(!1)},c=this,p=0,u=a;p<u.length;p++){d(u[p])}}else r.filesData=this.getFilesData(),this.removingEnabled?this.dotNetRef.invokeMethodAsync("RemovingEvent",r).then((function(e){e.cancel||o.clearAll()})):this.clearAll()}},e.prototype.removeCallback=function(e,t){if(!t.cancel)for(var i=!1,s=void 0,n=0,o=this.getFilesInArray(e);n<o.length;n++){var r=o[n];if(i||(s=this.fileList.indexOf(r.list)),s>-1){var a=sf.base.isNullOrUndefined(r.input)?null:r.input;a&&sf.base.detach(a),this.spliceFiles(s),sf.base.detach(this.fileList[s]),this.fileList.splice(s,1),i=!0,s=-1}}},e.prototype.clearAll=function(){var e=this;if(sf.base.isNullOrUndefined(this.listParent)&&!this.isBlazorSaveUrl&&!this.isBlazorTemplate)return"msie"!==this.browserName&&(this.element.value=""),void(this.filesData=[]);var t={cancel:!1,filesData:this.filesData};this.clearEnabled?this.dotNetRef.invokeMethodAsync("ClearingEvent",t).then((function(t){t.cancel||(e.clearData(),e.actionCompleteCount=0,e.count=-1)})):(this.clearData(),this.actionCompleteCount=0,this.count=-1)},e.prototype.getFilesData=function(e){return sf.base.isNullOrUndefined(e)?this.filesData:this.getSelectedFiles(e)},e.prototype.pause=function(e,t){e=e||this.filesData;var i=this.getFilesInArray(e);this.pauseUploading(i,t)},e.prototype.pauseUploading=function(e,t){for(var i=this.getFiles(e),s=0;s<i.length;s++)"3"===i[s].statusCode&&this.pauseUpload(this.getCurrentMetaData(i[s],null),null,t)},e.prototype.getFiles=function(e){var t=[];return sf.base.isNullOrUndefined(e)||e instanceof Array?t=e:t.push(e),t},e.prototype.resume=function(e,t){e=e||this.filesData;var i=this.getFilesInArray(e);this.resumeFiles(i,t)},e.prototype.resumeFiles=function(e,t){for(var i=this.getFiles(e),s=0;s<i.length;s++)"4"===i[s].statusCode&&this.resumeUpload(this.getCurrentMetaData(i[s],null),null,t)},e.prototype.retry=function(e,t,i){e=e||this.filesData;var s=this.getFilesInArray(e);this.retryFailedFiles(s,t,i)},e.prototype.retryFailedFiles=function(e,t,i){for(var s=this.getFiles(e),n=0;n<s.length;n++)if("5"===s[n].statusCode||"0"===s[n].statusCode)if(this.asyncSettings.chunkSize>0)this.retryUpload(this.getCurrentMetaData(s[n],null),t);else{var o=void 0;i||(o=this.fileList[this.filesData.indexOf(s[n])]),this.reloadcanceledFile(null,s[n],o,i)}},e.prototype.cancel=function(e){e=e||this.filesData;var t=this.getFilesInArray(e);this.cancelUpload(t)},e.prototype.cancelUpload=function(e){var t=this.getFiles(e);if(this.asyncSettings.chunkSize>0){for(var i=0;i<t.length;i++)if("3"===t[i].statusCode){var s=this.getCurrentMetaData(t[i],null);s.file.statusCode="5",s.file.status=this.localizedTexts("fileUploadCancel"),this.updateMetaData(s),this.showHideUploadSpinner(t[i])}}else for(i=0;i<t.length;i++)"3"===t[i].statusCode&&(t[i].statusCode="5",t[i].status=this.localizedTexts("fileUploadCancel"),this.showHideUploadSpinner(t[i]))},e.prototype.showHideUploadSpinner=function(e){var i=this.getLiElement(e);if(!sf.base.isNullOrUndefined(i)&&sf.base.isNullOrUndefined(this.template)){var s=i.querySelector("."+M);t({target:s,width:"20px"}),u(s)}},e}();return{initialize:function(e,t,i,s){t&&e&&new E(e,t,i,s).initialize()},raiseSuccessEvent:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.raiseSuccessEvent(null,t)},serverRemoveIconBindEvent:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.serverRemoveIconBindEvent()},serverFileListElement:function(e,t,i,s){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||(n.serverUlElement(t),s||n.serverActionButtonsEventBind(i))},bytesToSize:function(e,t){var i=window.sfBlazor.getCompInstance(e);return sf.base.isNullOrUndefined(i)?"":i.bytesToSize(t)},cancel:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.cancel(t)},clearAll:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.clearAll()},createFileList:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s)||s.createFileList(t,i)},getFilesData:function(e,t){var i=window.sfBlazor.getCompInstance(e);return sf.base.isNullOrUndefined(i)?null:i.getFilesData(t)},pause:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s)||s.pause(t,i)},remove:function(e,t,i,s,n,o){for(var r=window.sfBlazor.getCompInstance(e),a=0;a<r.filesData.length;a++)r.filesData[a].id===t[0].id&&(t[0]=r.filesData[a]);sf.base.isNullOrUndefined(r)||r.remove(t,i,s,n,o)},resume:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s)||s.resume(t,i)},retry:function(e,t,i,s){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.retry(t,i,s)},sortFileList:function(e,t){var i=window.sfBlazor.getCompInstance(e);return sf.base.isNullOrUndefined(i)?null:i.sortFileList(t)},upload:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s)||s.upload(t,i)},propertyChanges:function(e,t,i){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s)||s.propertyChanges(t,i)}}}()},"./modules/sortable.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sf=window.sf||{};sf.lists=sf.base.extend({},sf.lists,function(e){"use strict";var t,s=(t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,i)},function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}),n=function(e,t,s,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,s,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,s,a):o(t,s))||a);return r>3&&a&&Object.defineProperty(t,s,a),a},o=function(e){function t(t,i){var s=e.call(this,i,t)||this;return s.getHelper=function(e){var t,i=s.getSortableElement(e.sender.target);return!!s.isValidTarget(i,s)&&(s.helper?t=s.helper({sender:i,element:e.element}):((t=i.cloneNode(!0)).style.width=i.offsetWidth+"px",t.style.height=i.offsetHeight+"px"),sf.base.addClass([t],["e-sortableclone"]),document.body.appendChild(t),t)},s.onDrag=function(e){if(e.target){s.trigger("drag",{event:e.event,element:s.element,target:e.target});var t,i=s.getSortableInstance(e.target),n=s.getSortableElement(e.target,i);if(!(s.isValidTarget(n,i)||e.target.className.indexOf("e-list-group-item")>-1)||s.curTarget===n&&sf.base.isNullOrUndefined(i.placeHolder)||i.placeHolderElement&&i.placeHolderElement===e.target)s.curTarget!==s.target&&s.scope&&s.curTarget!==n&&!sf.base.isNullOrUndefined(i.placeHolder)&&(sf.base.remove(s.getSortableInstance(s.curTarget).placeHolderElement),s.curTarget=s.target);else{if(e.target.className.indexOf("e-list-group-item")>-1&&(n=e.target),s.curTarget=n,s.target===n)return;var o=s.getIndex(i.placeHolderElement,i),r=s.getPlaceHolder(n,i),a=void 0;if(r){o=sf.base.isNullOrUndefined(o)?s.getIndex(s.target):o,a=s.getIndex(n,i,e.event);var l=s.isPlaceHolderPresent(i);if(l&&o===a)return;l&&sf.base.remove(i.placeHolderElement),i.placeHolderElement=r,e.target.className.indexOf("e-list-group-item")>-1?i.element.insertBefore(i.placeHolderElement,i.element.children[a]):i.element!==s.element&&a===i.element.childElementCount?i.element.appendChild(i.placeHolderElement):i.element.insertBefore(i.placeHolderElement,i.element.children[a]),s.refreshDisabled(o,a,i)}else{o=sf.base.isNullOrUndefined(o)?s.getIndex(s.target):s.getIndex(n,i)<o||!o?o:o-1,a=s.getIndex(n,i);var h=i.element!==s.element?a:o<a?a+1:a;s.updateItemClass(i),i.element.insertBefore(s.target,i.element.children[h]),s.refreshDisabled(o,a,i),s.curTarget=s.target,s.trigger("drop",{droppedElement:s.target,element:i.element,previousIndex:o,currentIndex:a,target:e.target,helper:document.getElementsByClassName("e-sortableclone")[0],event:e.event,scope:s.scope})}}if(i=s.getSortableInstance(s.curTarget),sf.base.isNullOrUndefined(n)&&e.target!==i.placeHolderElement)s.isPlaceHolderPresent(i)&&s.removePlaceHolder(i);else[].slice.call(document.getElementsByClassName("e-sortable-placeholder")).forEach((function(e){(t=s.getSortableInstance(e)).element&&t!==i&&s.removePlaceHolder(t)}))}},s.onDragStart=function(e){s.target=s.getSortableElement(e.target);var t=!1;s.target.classList.add("e-grabbed"),s.curTarget=s.target,e.helper=document.getElementsByClassName("e-sortableclone")[0];var i={cancel:!1,element:s.element,target:s.target};s.trigger("beforeDragStart",i,(function(i){i.cancel&&(t=i.cancel,s.onDragStop(e))})),t||(sf.base.isBlazor?s.trigger("dragStart",{event:e.event,element:s.element,target:s.target,bindEvents:e.bindEvents,dragElement:e.dragElement}):s.trigger("dragStart",{event:e.event,element:s.element,target:s.target}))},s.onDragStop=function(e){var t,i,n,o=s.getSortableInstance(s.curTarget);t=s.getIndex(s.target);var r=s.isPlaceHolderPresent(o);if(r){var a=s.getIndex(o.placeHolderElement,o),l={previousIndex:t,currentIndex:a,target:e.target,droppedElement:s.target,helper:e.helper,cancel:!1,handled:!1};s.trigger("beforeDrop",l,(function(i){if(!i.cancel){if(n=i.handled,s.updateItemClass(o),i.handled){var r=s.target.cloneNode(!0);s.target.classList.remove("e-grabbed"),s.target=r}o.element.insertBefore(s.target,o.placeHolderElement);var a=s.getIndex(s.target,o);t=s===o&&t-a>1?t-1:t,s.trigger("drop",{event:e.event,element:o.element,previousIndex:t,currentIndex:a,target:e.target,helper:e.helper,droppedElement:s.target,scopeName:s.scope,handled:n})}sf.base.remove(o.placeHolderElement)}))}if(o=s.getSortableInstance(e.target),i=o.element.childElementCount,t=s.getIndex(s.target),o.element===e.target||!r&&s.curTarget===s.target){var h={previousIndex:t,currentIndex:s.curTarget===s.target?t:i,target:e.target,droppedElement:s.target,helper:e.helper,cancel:!1};s.trigger("beforeDrop",h,(function(n){(o.element===e.target||e.target.className.indexOf("e-list-nrt")>-1||e.target.className.indexOf("e-list-nr-template")>-1||e.target.closest(".e-list-nr-template"))&&!n.cancel&&(s.updateItemClass(o),o.element.appendChild(s.target),s.trigger("drop",{event:e.event,element:o.element,previousIndex:t,currentIndex:i,target:e.target,helper:e.helper,droppedElement:s.target,scopeName:s.scope}))}))}s.target.classList.remove("e-grabbed"),s.target=null,s.curTarget=null,sf.base.remove(e.helper),sf.base.getComponent(s.element,"draggable").intDestroy(e.event)},s.bind(),s}var i;return s(t,e),i=t,t.prototype.bind=function(){this.element.id||(this.element.id=sf.base.getUniqueID("sortable")),this.itemClass||(this.itemClass="e-sort-item",this.dataBind()),this.initializeDraggable()},t.prototype.initializeDraggable=function(){new sf.base.Draggable(this.element,{helper:this.getHelper,dragStart:this.onDragStart,drag:this.onDrag,dragStop:this.onDragStop,dragTarget:"."+this.itemClass,enableTapHold:!0,tapHoldThreshold:200,queryPositionInfo:this.queryPositionInfo,distance:5}),this.wireEvents()},t.prototype.wireEvents=function(){var e=this.element;sf.base.EventHandler.add(e,"keydown",this.keyDownHandler,this)},t.prototype.unwireEvents=function(){var e=this.element;sf.base.EventHandler.remove(e,"keydown",this.keyDownHandler)},t.prototype.keyDownHandler=function(e){if(27===e.keyCode){var t=sf.base.getComponent(this.element,"draggable");t&&t.intDestroy(null);var i=document.getElementsByClassName("e-sortableclone")[0];i&&i.remove();var s=document.getElementsByClassName("e-sortable-placeholder")[0];s&&s.remove()}},t.prototype.getPlaceHolder=function(e,t){if(t.placeHolder){var i=t.placeHolder({element:t.element,grabbedElement:this.target,target:e});return i.classList.add("e-sortable-placeholder"),i}return null},t.prototype.isValidTarget=function(e,t){return e&&sf.base.compareElementParent(e,t.element)&&e.classList.contains(t.itemClass)&&!e.classList.contains("e-disabled")},t.prototype.removePlaceHolder=function(e){sf.base.remove(e.placeHolderElement),e.placeHolderElement=null},t.prototype.updateItemClass=function(e){this!==e&&(this.target.classList.remove(this.itemClass),this.target.classList.add(e.itemClass))},t.prototype.getSortableInstance=function(e){if(e=sf.base.closest(e,".e-"+this.getModuleName())){var t=sf.base.getComponent(e,i);return t.scope&&this.scope&&t.scope===this.scope?t:this}return this},t.prototype.refreshDisabled=function(e,t,i){if(i===this)for(var s=void 0,n=e<t,o=void 0,r=n?e:t,a=n?t:e;r<=a;)(s=this.element.children[r]).classList.contains("e-disabled")?(o=this.getIndex(s),this.element.insertBefore(s,this.element.children[n?o+2:o-1]),r=n?o+2:o+1):r++},t.prototype.getIndex=function(e,t,i){var s,n;return void 0===t&&(t=this),[].slice.call(t.element.children).forEach((function(t,o){if(t.classList.contains("e-sortable-placeholder")&&(n=!0),t!==e);else if(s=o,!sf.base.isNullOrUndefined(i)){n&&(s-=1);var r=e.getBoundingClientRect(),a=r.bottom-(r.bottom-r.top)/2;s=i.clientY<=a?s:s+1}})),s},t.prototype.getSortableElement=function(e,t){return void 0===t&&(t=this),sf.base.closest(e,"."+t.itemClass)},t.prototype.queryPositionInfo=function(e){return e.left=pageXOffset?parseFloat(e.left)-pageXOffset+"px":e.left,e.top=pageYOffset?parseFloat(e.top)-pageYOffset+"px":e.top,e},t.prototype.isPlaceHolderPresent=function(e){return e.placeHolderElement&&!!sf.base.closest(e.placeHolderElement,"#"+e.element.id)},t.prototype.moveTo=function(e,t,i){r(this.element,e,t,i)},t.prototype.destroy=function(){this.unwireEvents(),"e-sort-item"===this.itemClass&&(this.itemClass=null,this.dataBind()),sf.base.getComponent(this.element,sf.base.Draggable).destroy(),e.prototype.destroy.call(this)},t.prototype.getModuleName=function(){return"sortable"},t.prototype.onPropertyChanged=function(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++){switch(s[i]){case"itemClass":[].slice.call(this.element.children).forEach((function(i){i.classList.contains(t.itemClass)&&i.classList.remove(t.itemClass),e.itemClass&&i.classList.add(e.itemClass)}))}}},n([sf.base.Property(!1)],t.prototype,"enableAnimation",void 0),n([sf.base.Property(null)],t.prototype,"itemClass",void 0),n([sf.base.Property(null)],t.prototype,"scope",void 0),n([sf.base.Property()],t.prototype,"helper",void 0),n([sf.base.Property()],t.prototype,"placeHolder",void 0),n([sf.base.Event()],t.prototype,"drag",void 0),n([sf.base.Event()],t.prototype,"beforeDragStart",void 0),n([sf.base.Event()],t.prototype,"dragStart",void 0),n([sf.base.Event()],t.prototype,"beforeDrop",void 0),n([sf.base.Event()],t.prototype,"drop",void 0),t=i=n([sf.base.NotifyPropertyChanges],t)}(sf.base.Base);function r(e,t,i,s){var n=[];if(t||(t=e),i&&i.length?i.forEach((function(t){n.push(e.children[t])})):n=[].slice.call(e.children),sf.base.isNullOrUndefined(s))n.forEach((function(e){t.appendChild(e)}));else{var o=t.children[s];n.forEach((function(e){t.insertBefore(e,o)}))}}return e.Sortable=o,e.moveTo=r,e}({}))},"./modules/spinner.js":function(e,t){window.sf=window.sf||{};sf.popups=sf.base.extend({},sf.popups,function(e){"use strict";var t={},i=null,s=null;function n(e,t){if(e.target){var n,a=sf.base.isNullOrUndefined(t)?sf.base.createElement:t,l=function(e,t){var i=t("div",{}),s=t("div",{});return i.classList.add("e-spinner-pane"),s.classList.add("e-spinner-inner"),e.appendChild(i),i.appendChild(s),{wrap:i,inner_wrap:s}}(e.target,a);if(sf.base.isNullOrUndefined(e.cssClass)||l.wrap.classList.add(e.cssClass),sf.base.isNullOrUndefined(e.template)&&sf.base.isNullOrUndefined(i)){var h=sf.base.isNullOrUndefined(e.type)?function(e){return window.getComputedStyle(e,":after").getPropertyValue("content").replace(/['"]+/g,"")}(l.wrap):e.type;n=function(e,t){var i;switch(t){case"Material":case"Material3":case"Fabric":i=30;break;case"Tailwind":case"Tailwind-dark":case"Fluent":i=30;break;case"Bootstrap4":case"Bootstrap5":i=36;break;default:i=30}return e=e?parseFloat(e+""):i,"Bootstrap"===t?e:e/2}(sf.base.isNullOrUndefined(e.width)?void 0:e.width,h),o(h,l.wrap,n,a),sf.base.isNullOrUndefined(e.label)||function(e,t,i){var s=i("div",{});s.classList.add("e-spin-label"),s.innerHTML=t,e.appendChild(s)}(l.inner_wrap,e.label,a)}else{var d=sf.base.isNullOrUndefined(e.template)?i:e.template;l.wrap.classList.add("e-spin-template"),r(l.wrap,d,s)}l.wrap.classList.add("e-spin-hide"),l=null}}function o(e,i,s,n){var o=i.querySelector(".e-spinner-inner"),r=o.querySelector("svg");switch(sf.base.isNullOrUndefined(r)||o.removeChild(r),e){case"Material":!function(e,i,s){var n=a();t[""+n]={timeOut:0,type:"Material",radius:i},h(e,n,s,"e-spin-material"),c(i,e,"Material","e-spin-material")}(o,s,n);break;case"Material3":!function(e,i,s){var n=a();t[""+n]={timeOut:0,type:"Material3",radius:i},h(e,n,s,"e-spin-material3"),c(i,e,"Material3","e-spin-material3")}(o,s,n);break;case"Fabric":!function(e,i,s){var n=a();t[""+n]={timeOut:0,type:"Fabric",radius:i},l(e,n,"e-spin-fabric",s),g(i,e,"e-spin-fabric")}(o,s,n);break;case"Fluent":!function(e,i,s){var n=a();t[""+n]={timeOut:0,type:"Fluent",radius:i},l(e,n,"e-spin-fluent",s),g(i,e,"e-spin-fluent")}(o,s,n);break;case"Bootstrap":!function(e,i,s){var n=a();t[""+n]={timeOut:0,type:"Bootstrap",radius:i},function(e,t,i){var s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("id",t),s.setAttribute("class","e-spin-bootstrap"),s.setAttribute("viewBox","0 0 64 64"),e.insertBefore(s,e.firstChild);for(var n=0;n<=7;n++){var o=document.createElementNS("http://www.w3.org/2000/svg","circle");o.setAttribute("class","e-path-circle_"+n),o.setAttribute("r","2"),o.setAttribute("transform","translate(32,32)"),s.appendChild(o)}}(e,n),function(e,t){var i=e.querySelector("svg.e-spin-bootstrap");i.style.width=i.style.height=t+"px";for(var s=90,n=0;n<=7;n++){var o=m(0,0,24,s),r=i.querySelector(".e-path-circle_"+n);r.setAttribute("cx",o.x+""),r.setAttribute("cy",o.y+""),s=s>=360?0:s,s+=45}}(e,i)}(o,s);break;case"HighContrast":!function(e,i,s){var n=a();t[""+n]={timeOut:0,type:"HighContrast",radius:i},l(e,n,"e-spin-high-contrast",s),g(i,e,"e-spin-high-contrast")}(o,s,n);break;case"Bootstrap4":!function(e,i,s){var n=a();t[""+n]={timeOut:0,type:"Bootstrap4",radius:i},h(e,n,s,"e-spin-bootstrap4"),c(i,e,"Bootstrap4","e-spin-bootstrap4")}(o,s,n);break;case"Bootstrap5":!function(e,i,s){var n=a();t[""+n]={timeOut:0,type:"Bootstrap5",radius:i},h(e,n,s,"e-spin-bootstrap5"),c(i,e,"Bootstrap5","e-spin-bootstrap5")}(o,s,n);break;case"Tailwind":case"Tailwind-dark":!function(e,i,s){var n=a();t[""+n]={timeOut:0,type:"Tailwind",radius:i},l(e,n,"e-spin-tailwind",s),g(i,e,"e-spin-tailwind")}(o,s,n)}}function r(e,t,i){sf.base.isNullOrUndefined(i)||e.classList.add(i),e.querySelector(".e-spinner-inner").innerHTML=t}function a(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<5;i++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}function l(e,t,i,s){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("id",t),n.setAttribute("class",i);var o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("class","e-path-circle");var r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("class","e-path-arc"),e.insertBefore(n,e.firstChild),n.appendChild(o),n.appendChild(r)}function h(e,t,i,s){var n=document.createElementNS("http://www.w3.org/2000/svg","svg"),o=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("class",s),n.setAttribute("id",t),o.setAttribute("class","e-path-circle"),e.insertBefore(n,e.firstChild),n.appendChild(o)}function d(e){!function(e,i,s,n,o,r,a){var l=++a.globalInfo[a.uniqueID].previousId,h=(new Date).getTime(),c=i-e,f=(v=2*a.globalInfo[a.uniqueID].radius+"",parseFloat(v)),g=p(f),m=-90*(a.globalInfo[a.uniqueID].count||0);var v;!function i(o){var a=Math.max(0,Math.min((new Date).getTime()-h,n));!function(e,t){if(!sf.base.isNullOrUndefined(t.querySelector("svg.e-spin-material"))||!sf.base.isNullOrUndefined(t.querySelector("svg.e-spin-material3"))){var i=void 0;if(sf.base.isNullOrUndefined(t.querySelector("svg.e-spin-material"))||sf.base.isNullOrUndefined(t.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))?sf.base.isNullOrUndefined(t.querySelector("svg.e-spin-material3"))||sf.base.isNullOrUndefined(t.querySelector("svg.e-spin-material3").querySelector("path.e-path-circle"))||(i=t.querySelector("svg.e-spin-material3")):i=t.querySelector("svg.e-spin-material"),!sf.base.isNullOrUndefined(i)){var s=i.querySelector("path.e-path-circle");s.setAttribute("stroke-dashoffset",u(f,g,e,r)+""),s.setAttribute("transform","rotate("+m+" "+f/2+" "+f/2+")")}}}(s(a,e,c,n),o.container),l===o.globalInfo[o.uniqueID].previousId&&a<n?t[o.uniqueID].timeOut=setTimeout(i.bind(null,o),1):d(o)}(a)}(1,149,f,1333,e.globalInfo[e.uniqueID].count,75,e),e.globalInfo[e.uniqueID].count=++e.globalInfo[e.uniqueID].count%4}function c(e,t,i,s){var n=2*e,o=t.querySelector("svg."+s),r=o.querySelector("path.e-path-circle"),a=p(n),l=n/2+"px";o.setAttribute("viewBox","0 0 "+n+" "+n),o.style.width=o.style.height=n+"px",o.style.transformOrigin=l+" "+l+" "+l,r.setAttribute("d",function(e,t){var i=e/2,s=t/2;return"M"+i+","+s+"A"+(i-s)+","+(i-s)+" 0 1 1 "+s+","+i}(n,a)),"Material"!==i&&"Material3"!==i||(r.setAttribute("stroke-width",a+""),r.setAttribute("stroke-dasharray",(n-a)*Math.PI*.75+""),r.setAttribute("stroke-dashoffset",u(n,a,1,75)+""))}function p(e){return.1*e}function u(e,t,i,s){return(e-t)*Math.PI*(3*s/100-i/100)}function f(e,t,i,s){var n=(e/=s)*e,o=n*e;return t+i*(6*o*n+-15*n*n+10*o)}function g(e,t,i){var s=e,n=e,o=2*e,r=t.querySelector("."+i),a=r.querySelector(".e-path-circle"),l=r.querySelector(".e-path-arc"),h=o/2+"px";a.setAttribute("d",function(e,t,i){return["M",e,t,"m",-i,0,"a",i,i,0,1,0,2*i,0,"a",i,i,0,1,0,2*-i,0].join(" ")}(s,n,e)),l.setAttribute("d",function(e,t,i,s,n){var o=m(e,t,i,n),r=m(e,t,i,s);return["M",o.x,o.y,"A",i,i,0,0,0,r.x,r.y].join(" ")}(s,n,e,315,45)),r.setAttribute("viewBox","0 0 "+o+" "+o),r.style.transformOrigin=h+" "+h+" "+h,r.style.width=r.style.height=o+"px"}function m(e,t,i,s){var n=(s-90)*Math.PI/180;return{x:e+i*Math.cos(n),y:t+i*Math.sin(n)}}function v(e){b(e,!1),e=null}function b(e,i){var s;if(e)if(e.classList.contains("e-spinner-pane"))s=e;else{var n;n=e.querySelectorAll(".e-spinner-pane"),s=Array.from(n).find((function(t){return t.parentElement===e}))||null}if(e&&s){var o=s.querySelector(".e-spinner-inner");if(i?!s.classList.contains("e-spin-template")&&!s.classList.contains("e-spin-hide"):!s.classList.contains("e-spin-template")&&!s.classList.contains("e-spin-show")){var r=s.querySelector("svg");if(sf.base.isNullOrUndefined(r))return;var a=r.getAttribute("id");switch(t[""+a].isAnimate=!i,t[""+a].type){case"Material":case"Material3":i?clearTimeout(t[a].timeOut):function(e,i,s){var n={};t[""+i].timeOut=0,n[""+i]=function(e,t,i,s){return{radius:t,count:i,previousId:s}}(0,s,0,0),d({uniqueID:i,container:e,globalInfo:n,timeOutVar:0})}(o,a,t[a].radius);break;case"Bootstrap":i?clearTimeout(t[a].timeOut):function(e){for(var i,s,n,o,r,a=e.querySelector("svg.e-spin-bootstrap").getAttribute("id"),l=1;l<=8;l++){h(e.getElementsByClassName("e-path-circle_"+(8===l?0:l))[0],l,l,(i=void 0,s=void 0,n=void 0,o=void 0,r=void 0,i=[],n=l,o=!1,r=1,function e(t){i.push(t),(t!==n||1===r)&&(t<=s&&t>1&&!o?t=parseFloat((t-.2).toFixed(2)):1===t?(t=7,t=parseFloat((t+.2).toFixed(2)),o=!0):t<8&&o?8===(t=parseFloat((t+.2).toFixed(2)))&&(o=!1):t<=8&&!o&&(t=parseFloat((t-.2).toFixed(2))),++r,e(t))}(s=l),i),a)}function h(e,i,s,n,o){var r=0;!function i(s){t[""+o].isAnimate&&(++r,e.setAttribute("r",s+""),r>=n.length&&(r=0),t[o].timeOut=setTimeout(i.bind(null,n[r]),18))}(i)}}(o)}}i?sf.base.classList(s,["e-spin-hide"],["e-spin-show"]):sf.base.classList(s,["e-spin-show"],["e-spin-hide"]),e=null}}function y(e){b(e,!0),e=null}function M(e,t){var n=sf.base.isNullOrUndefined(t)?sf.base.createElement:t;void 0!==e.template&&(i=e.template,void 0!==e.template&&(s=e.cssClass));for(var o=document.querySelectorAll(".e-spinner-pane"),r=0;r<o.length;r++)C(e.template,o[r],e.type,e.cssClass,n)}function C(e,n,a,l,h){sf.base.isNullOrUndefined(e)&&!n.classList.contains("e-spin-template")?(!function(e,i,s,n){sf.base.isNullOrUndefined(s)||e.classList.add(s);var r=e.querySelector("svg");if(!sf.base.isNullOrUndefined(r)){var a="Bootstrap"===i?parseFloat(r.style.height):parseFloat(r.style.height)/2;if(r.getAttribute("class").split(/\s/).indexOf("e-spin-material")>=0){var l=r.getAttribute("id");clearTimeout(t[""+l].timeOut)}o(i,e,a,n)}}(n,a,l,h),n.classList.contains("e-spin-show")?(n.classList.remove("e-spin-show"),v(n)):(n.classList.remove("e-spin-hide"),y(n))):(i=e,sf.base.isNullOrUndefined(l)||(s=l),sf.base.isNullOrUndefined(i)||r(n,i,s))}return e.Spinner=function(e,t,i,s){switch(e){case"Create":n({type:s,target:document.querySelector(t.target),cssClass:t.cssClass,label:t.label,width:t.width});break;case"Show":v(document.querySelector(i));break;case"Hide":y(document.querySelector(i));break;case"Set":M({cssClass:t.cssClass,type:s})}},e.createSpinner=n,e.showSpinner=v,e.hideSpinner=y,e.setSpinner=M,e}({}))},"./modules/splitbuttonsbase.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sf=window.sf||{};window.sf.splitbuttons=window.sf.base.extend({},window.sf.splitbuttons,function(e){"use strict";var t,s=(t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,i)},function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}),n=function(e,t,s,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,s,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,s,a):o(t,s))||a);return r>3&&a&&Object.defineProperty(t,s,a),a};var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),n([sf.base.Property("")],t.prototype,"iconCss",void 0),n([sf.base.Property("")],t.prototype,"id",void 0),n([sf.base.Property(!1)],t.prototype,"separator",void 0),n([sf.base.Property("")],t.prototype,"text",void 0),n([sf.base.Property("")],t.prototype,"url",void 0),n([sf.base.Property(!1)],t.prototype,"disabled",void 0),t}(sf.base.ChildProperty);return e.getModel=function(e,t){for(var i=sf.base.extend({},e),s=0,n=Object.keys(i);s<n.length;s++){var o=n[s];t.indexOf(o)<0&&sf.base.deleteObject(i,o)}return i},e.upDownKeyHandler=function(e,t){var i=40===t?0:e.childElementCount-1,s=i,n=e.querySelector(".e-selected");n&&n.classList.remove("e-selected");for(var o=0,r=e.children.length;o<r;o++)e.children[o].classList.contains("e-focused")&&(s=o,e.children[o].classList.remove("e-focused"),40===t?s++:s--,s===(40===t?e.childElementCount:-1)&&(s=i));-1!==(s=function e(t,i,s,n,o){void 0===o&&(o=0);(i.classList.contains("e-separator")||i.classList.contains("e-disabled"))&&(s===(40===n?t.childElementCount-1:0)?s=40===n?0:t.childElementCount-1:40===n?s++:s--);if((i=t.children[s]).classList.contains("e-separator")||i.classList.contains("e-disabled")){if(++o===t.childElementCount)return s=-1;s=e(t,i,s,n,o)}return s}(e,e.children[s],s,t))&&(sf.base.addClass([e.children[s]],"e-focused"),e.children[s].focus())},e.setBlankIconStyle=function(e,t){var i=[].slice.call(e.getElementsByClassName("e-blank-icon"));if(t&&[].slice.call(e.getElementsByClassName("e-item")).forEach((function(e){(e.style.paddingLeft||e.style.paddingRight)&&e.removeAttribute("style")})),i.length){var s=e.querySelector(".e-item:not(.e-blank-icon):not(.e-separator)");if(!sf.base.isNullOrUndefined(s)){s.classList.contains("e-url")&&(s=s.querySelector(".e-menu-url"));var n,o=s.querySelector(".e-menu-icon"),r=e.classList.contains("e-rtl");n=r?{padding:"paddingRight",margin:"marginLeft"}:{padding:"paddingLeft",margin:"marginRight"};var a=parseInt(getComputedStyle(o).fontSize,10)+parseInt(getComputedStyle(o)[n.margin],10)+parseInt(getComputedStyle(s).paddingLeft,10)+"px";i.forEach((function(e){e.classList.contains("e-url")?e.querySelector(".e-menu-url").style[n.padding]=a:e.style[n.padding]=a}))}}},e.Item=o,e}({}))},"./modules/svgbase.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sf=window.sf||{},window.sf.svgbase=function(e){"use strict";var t=function(){function e(e){this.svgLink="http://www.w3.org/2000/svg",this.rootId=e}return e.prototype.getOptionValue=function(e,t){return e[t]},e.prototype.createSvg=function(e){return sf.base.isNullOrUndefined(e.id)&&(e.id=this.rootId+"_svg"),this.svgObj=document.getElementById(e.id),sf.base.isNullOrUndefined(document.getElementById(e.id))&&(this.svgObj=document.createElementNS(this.svgLink,"svg")),this.svgObj=this.setElementAttributes(e,this.svgObj),this.setSVGSize(e.width,e.height),this.svgObj},e.prototype.setSVGSize=function(e,t){var i=document.getElementById(this.rootId),s=sf.base.isNullOrUndefined(i)?null:i.getBoundingClientRect();sf.base.isNullOrUndefined(this.width)||this.width<=0?this.svgObj.setAttribute("width",e?e.toString():s.width.toString()):this.svgObj.setAttribute("width",this.width.toString()),sf.base.isNullOrUndefined(this.height)||this.height<=0?this.svgObj.setAttribute("height",t?t.toString():"450"):this.svgObj.setAttribute("height",this.height.toString())},e.prototype.drawPath=function(e){var t=document.getElementById(e.id);return null===t&&(t=document.createElementNS(this.svgLink,"path")),t=this.setElementAttributes(e,t)},e.prototype.drawLine=function(e){var t=document.getElementById(e.id);return null===t&&(t=document.createElementNS(this.svgLink,"line")),t=this.setElementAttributes(e,t)},e.prototype.drawRectangle=function(e){var t=document.getElementById(e.id);return null===t&&(t=document.createElementNS(this.svgLink,"rect")),t=this.setElementAttributes(e,t)},e.prototype.drawCircle=function(e){var t=document.getElementById(e.id);return null===t&&(t=document.createElementNS(this.svgLink,"circle")),t=this.setElementAttributes(e,t)},e.prototype.drawPolyline=function(e){var t=document.getElementById(e.id);return null===t&&(t=document.createElementNS(this.svgLink,"polyline")),t=this.setElementAttributes(e,t)},e.prototype.drawEllipse=function(e){var t=document.getElementById(e.id);return null===t&&(t=document.createElementNS(this.svgLink,"ellipse")),t=this.setElementAttributes(e,t)},e.prototype.drawPolygon=function(e){var t=document.getElementById(e.id);return null===t&&(t=document.createElementNS(this.svgLink,"polygon")),t=this.setElementAttributes(e,t)},e.prototype.drawImage=function(e){var t=document.createElementNS(this.svgLink,"image");return t.setAttributeNS(null,"height",e.height.toString()),t.setAttributeNS(null,"width",e.width.toString()),t.setAttributeNS("http://www.w3.org/1999/xlink","href",e.href),t.setAttributeNS(null,"x",e.x.toString()),t.setAttributeNS(null,"y",e.y.toString()),t.setAttributeNS(null,"id",e.id),t.setAttributeNS(null,"visibility",e.visibility),sf.base.isNullOrUndefined(this.getOptionValue(e,"clip-path"))||t.setAttributeNS(null,"clip-path",this.getOptionValue(e,"clip-path")),sf.base.isNullOrUndefined(e.preserveAspectRatio)||t.setAttributeNS(null,"preserveAspectRatio",e.preserveAspectRatio),t},e.prototype.createText=function(e,t){var i=document.createElementNS(this.svgLink,"text");return i=this.setElementAttributes(e,i),sf.base.isNullOrUndefined(t)||(i.textContent=t),i},e.prototype.createTSpan=function(e,t){var i=document.createElementNS(this.svgLink,"tspan");return i=this.setElementAttributes(e,i),sf.base.isNullOrUndefined(t)||(i.textContent=t),i},e.prototype.createTitle=function(e){var t=document.createElementNS(this.svgLink,"title");return t.textContent=e,t},e.prototype.createDefs=function(){return document.createElementNS(this.svgLink,"defs")},e.prototype.createClipPath=function(e){var t=document.createElementNS(this.svgLink,"clipPath");return t=this.setElementAttributes(e,t)},e.prototype.createForeignObject=function(e){var t=document.createElementNS(this.svgLink,"foreignObject");return t=this.setElementAttributes(e,t)},e.prototype.createGroup=function(e){var t=document.createElementNS(this.svgLink,"g");return t=this.setElementAttributes(e,t)},e.prototype.createPattern=function(e,t){var i=document.createElementNS(this.svgLink,t);return i=this.setElementAttributes(e,i)},e.prototype.createRadialGradient=function(e,t,i){var s;if(sf.base.isNullOrUndefined(e[0].colorStop))s=e[0].color.toString();else{var n={id:this.rootId+"_"+t+"radialGradient",cx:i.cx+"%",cy:i.cy+"%",r:i.r+"%",fx:i.fx+"%",fy:i.fy+"%"};this.drawGradient("radialGradient",n,e),s="url(#"+this.rootId+"_"+t+"radialGradient)"}return s},e.prototype.createLinearGradient=function(e,t,i){var s;if(sf.base.isNullOrUndefined(e[0].colorStop))s=e[0].color.toString();else{var n={id:this.rootId+"_"+t+"linearGradient",x1:i.x1+"%",y1:i.y1+"%",x2:i.x2+"%",y2:i.y2+"%"};this.drawGradient("linearGradient",n,e),s="url(#"+this.rootId+"_"+t+"linearGradient)"}return s},e.prototype.drawGradient=function(e,t,i){var s=this.createDefs(),n=document.createElementNS(this.svgLink,e);n=this.setElementAttributes(t,n);for(var o=0;o<i.length;o++){var r=document.createElementNS(this.svgLink,"stop");r.setAttribute("offset",i[o].colorStop),r.setAttribute("stop-color",i[o].color),r.setAttribute("stop-opacity",i[o].opacity?i[o].opacity:"1"),sf.base.isNullOrUndefined(i[o].style)||(r.style.cssText=i[o].style),n.appendChild(r)}return s.appendChild(n),s},e.prototype.drawClipPath=function(e){var t=this.createDefs(),i=this.createClipPath({id:e.id});e.id=e.id+"_Rect";var s=this.drawRectangle(e);return i.appendChild(s),t.appendChild(i),t},e.prototype.drawCircularClipPath=function(e){var t=this.createDefs(),i=this.createClipPath({id:e.id});e.id=e.id+"_Circle";var s=this.drawCircle(e);return i.appendChild(s),t.appendChild(i),t},e.prototype.setElementAttributes=function(e,t){for(var i=Object.keys(e),s=0;s<i.length;s++)"style"===i[s]?t.style.cssText=e[i[s]]:t.setAttribute(i[s],e[i[s]]);return t},e.prototype.createCanvas=function(){return null},e}(),s=function(){function e(e){this.rootId=e}return e.prototype.getOptionValue=function(e,t){return e[t]},e.prototype.createCanvas=function(e){var t=document.createElement("canvas");return t.setAttribute("id",this.rootId+"_canvas"),this.ctx=t.getContext("2d"),this.canvasObj=t,this.setCanvasSize(e.width,e.height),this.canvasObj},e.prototype.setCanvasSize=function(e,t){var i=document.getElementById(this.rootId),s=sf.base.isNullOrUndefined(i)?null:i.getBoundingClientRect();sf.base.isNullOrUndefined(this.width)?this.canvasObj.setAttribute("width",e?e.toString():s.width.toString()):this.canvasObj.setAttribute("width",this.width.toString()),sf.base.isNullOrUndefined(this.height)?this.canvasObj.setAttribute("height",t?t.toString():"450"):this.canvasObj.setAttribute("height",this.height.toString())},e.prototype.setAttributes=function(e){this.ctx.lineWidth=this.getOptionValue(e,"stroke-width");var t=this.getOptionValue(e,"stroke-dasharray");if(!sf.base.isNullOrUndefined(t)){var i=t.split(",");this.ctx.setLineDash([parseInt(i[0],10),parseInt(i[1],10)])}this.ctx.strokeStyle=this.getOptionValue(e,"stroke")},e.prototype.drawLine=function(e){this.ctx.save(),this.ctx.beginPath(),this.ctx.lineWidth=this.getOptionValue(e,"stroke-width"),this.ctx.strokeStyle=e.stroke,this.ctx.moveTo(e.x1,e.y1),this.ctx.lineTo(e.x2,e.y2),this.ctx.stroke(),this.ctx.restore()},e.prototype.drawRectangle=function(e,t){var i=this.ctx,s=e.rx;return this.ctx.save(),this.ctx.beginPath(),t&&this.ctx.translate(t[0],t[1]),this.ctx.globalAlpha=this.getOptionValue(e,"opacity"),this.setAttributes(e),this.ctx.rect(e.x,e.y,e.width,e.height),null!==s&&s>=0?this.drawCornerRadius(e):("none"===e.fill&&(e.fill="transparent"),this.ctx.fillStyle=e.fill,this.ctx.fillRect(e.x,e.y,e.width,e.height),this.ctx.stroke()),this.ctx.restore(),this.ctx=i,this.canvasObj},e.prototype.drawCornerRadius=function(e){var t=e.rx,i=e.x,s=e.y,n=e.width,o=e.height;"none"===e.fill&&(e.fill="transparent"),this.ctx.fillStyle=e.fill,n<2*t&&(t=n/2),o<2*t&&(t=o/2),this.ctx.beginPath(),this.ctx.moveTo(i+n-t,s),this.ctx.arcTo(i+n,s,i+n,s+o,t),this.ctx.arcTo(i+n,s+o,i,s+o,t),this.ctx.arcTo(i,s+o,i,s,t),this.ctx.arcTo(i,s,i+n,s,t),this.ctx.closePath(),this.ctx.fill(),this.ctx.stroke()},e.prototype.drawPath=function(e,t){var i=e.d.split(" "),s=this.getOptionValue(e,"stroke-width"),n=this.ctx,o=!0;this.ctx.save(),this.ctx.beginPath(),t&&this.ctx.translate(t[0],t[1]),this.ctx.globalAlpha=e.opacity?e.opacity:this.getOptionValue(e,"fill-opacity"),this.setAttributes(e);for(var r=0;r<i.length;r+=3){var a=parseFloat(i[r+1]),l=parseFloat(i[r+2]);switch(i[r]){case"M":e.innerR||e.cx||this.ctx.moveTo(a,l);break;case"L":e.innerR||this.ctx.lineTo(a,l);break;case"Q":var h=parseFloat(i[r+3]),d=parseFloat(i[r+4]);this.ctx.quadraticCurveTo(a,l,h,d),r+=2;break;case"C":var c=parseFloat(i[r+3]),p=parseFloat(i[r+4]),u=parseFloat(i[r+5]),f=parseFloat(i[r+6]);this.ctx.bezierCurveTo(a,l,c,p,u,f),r+=4;break;case"A":e.innerR?o&&(this.ctx.arc(e.x,e.y,e.radius,e.start,e.end,e.counterClockWise),this.ctx.arc(e.x,e.y,e.innerR,e.end,e.start,!e.counterClockWise),o=!1):e.cx?this.ctx.arc(e.cx,e.cy,e.radius,0,2*Math.PI,e.counterClockWise):(this.ctx.moveTo(e.x,e.y),this.ctx.arc(e.x,e.y,e.radius,e.start,e.end,e.counterClockWise),this.ctx.lineTo(e.x,e.y)),r+=5;break;case"z":case"Z":this.ctx.closePath(),r-=2}}return"none"!==e.fill&&void 0!==e.fill&&(this.ctx.fillStyle=e.fill,this.ctx.fill()),s>0&&this.ctx.stroke(),this.ctx.restore(),this.ctx=n,this.canvasObj},e.prototype.createText=function(e,t,i,s,n,o){var r=this.getOptionValue(e,"font-weight");sf.base.isNullOrUndefined(r)||"regular"!==r.toLowerCase()||(r="normal");var a=this.getOptionValue(e,"font-size"),l=this.getOptionValue(e,"font-family"),h=this.getOptionValue(e,"font-style").toLowerCase()+" "+r+" "+a+" "+l,d=this.getOptionValue(e,"text-anchor"),c=void 0!==e.opacity?e.opacity:1;if("middle"===d&&(d="center"),this.ctx.save(),this.ctx.fillStyle=e.fill,this.ctx.font=h,this.ctx.textAlign=d,this.ctx.globalAlpha=c,e.baseline&&(this.ctx.textBaseline=e.baseline),!o){this.ctx.translate(e.x+0+(i||0),e.y+(s||0)),this.ctx.rotate(e.labelRotation*Math.PI/180)}return this.ctx.fillText(t,o?e.x:0,o?n:0),this.ctx.restore(),this.canvasObj},e.prototype.drawCircle=function(e,t){var i=this.ctx;return this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(e.cx,e.cy,e.r,0,2*Math.PI),this.ctx.fillStyle=e.fill,this.ctx.globalAlpha=e.opacity,this.ctx.fill(),t&&this.ctx.translate(t[0],t[1]),this.setAttributes(e),this.ctx.stroke(),this.ctx.restore(),this.ctx=i,this.canvasObj},e.prototype.drawPolyline=function(e){this.ctx.save(),this.ctx.beginPath();for(var t=e.points.split(" "),i=0;i<t.length-1;i++){var s=t[i].split(","),n=parseFloat(s[0]),o=parseFloat(s[1]);0===i?this.ctx.moveTo(n,o):this.ctx.lineTo(n,o)}this.ctx.lineWidth=this.getOptionValue(e,"stroke-width"),this.ctx.strokeStyle=e.stroke,this.ctx.stroke(),this.ctx.restore()},e.prototype.drawEllipse=function(e,t){var i=this.ctx,s=Math.max(e.rx,e.ry),n=e.rx/s,o=e.ry/s;this.ctx.save(),this.ctx.beginPath(),this.ctx.translate(e.cx,e.cy),t&&this.ctx.translate(t[0],t[1]),this.ctx.save(),this.ctx.scale(n,o),this.ctx.arc(0,0,s,0,2*Math.PI,!1),this.ctx.fillStyle=e.fill,this.ctx.fill(),this.ctx.restore(),this.ctx.lineWidth=this.getOptionValue(e,"stroke-width"),this.ctx.strokeStyle=e.stroke,this.ctx.stroke(),this.ctx.restore(),this.ctx=i},e.prototype.drawImage=function(e){this.ctx.save();var t=new Image;sf.base.isNullOrUndefined(e.href)||(t.src=e.href,this.ctx.drawImage(t,e.x,e.y,e.width,e.height)),this.ctx.restore()},e.prototype.createLinearGradient=function(e){var t;return sf.base.isNullOrUndefined(e[0].colorStop)||(t=this.ctx.createLinearGradient(0,0,0,this.canvasObj.height)),this.setGradientValues(e,t)},e.prototype.createRadialGradient=function(e){var t;return sf.base.isNullOrUndefined(e[0].colorStop)||(t=this.ctx.createRadialGradient(0,0,0,0,0,this.canvasObj.height)),this.setGradientValues(e,t)},e.prototype.setGradientValues=function(e,t){var i;if(sf.base.isNullOrUndefined(e[0].colorStop))i=e[0].color.toString();else{for(var s=0;s<=e.length-1;s++){var n=e[s].color,o=e[s].colorStop.slice(0,-1),r=parseInt(o,10)/100;t.addColorStop(r,n)}i=t.toString()}return i},e.prototype.setElementAttributes=function(e,t){for(var i=Object.keys(e),s=Object.keys(e).map((function(t){return e[t]})),n=0;n<i.length;n++)t.setAttribute(i[n],s[n]);return null},e.prototype.updateCanvasAttributes=function(e){this.setElementAttributes(e,this.canvasObj);var t=this.ctx;if(!sf.base.isNullOrUndefined(this.dataUrl)){var i=new Image;i.onload=function(){t.drawImage(i,0,0)},i.src=this.dataUrl}},e.prototype.clearRect=function(e){this.ctx.restore(),this.ctx.clearRect(e.x,e.y,e.width,e.height)},e.prototype.createGroup=function(){return null},e.prototype.drawClipPath=function(){return null},e.prototype.drawCircularClipPath=function(){return null},e.prototype.canvasClip=function(e){this.ctx.save(),this.ctx.fillStyle="transparent",this.ctx.rect(e.x,e.y,e.width,e.height),this.ctx.fill(),this.ctx.clip()},e.prototype.canvasRestore=function(){this.ctx.restore()},e.prototype.drawPolygon=function(){return null},e.prototype.createDefs=function(){return null},e.prototype.createClipPath=function(){return null},e.prototype.createSvg=function(){return null},e}();function n(e){var t;switch(e){case"Highcontrast":case"HighContrast":t={tooltipFill:"#ffffff",tooltipBoldLabel:"#000000",tooltipLightLabel:"#000000",tooltipHeaderLine:"#969696"};break;case"MaterialDark":case"FabricDark":case"BootstrapDark":t={tooltipFill:"#F4F4F4",tooltipBoldLabel:"#282727",tooltipLightLabel:"#333232",tooltipHeaderLine:"#9A9A9A"};break;case"Bootstrap4":t={tooltipFill:"#020202",tooltipBoldLabel:"rgba(255, 255, 255)",tooltipLightLabel:"rgba(255, 255, 255, 0.9)",tooltipHeaderLine:"rgba(255, 255, 255, 0.2)"};break;case"Tailwind":t={tooltipFill:"#111827",tooltipBoldLabel:"#D1D5DB",tooltipLightLabel:"#F9FAFB",tooltipHeaderLine:"#6B7280"};break;case"TailwindDark":t={tooltipFill:"#F9FAFB",tooltipBoldLabel:"#6B7280",tooltipLightLabel:"#1F2937",tooltipHeaderLine:"#9CA3AF"};break;case"Bootstrap5":t={tooltipFill:"#212529",tooltipBoldLabel:"#F9FAFB",tooltipLightLabel:"#F9FAFB",tooltipHeaderLine:"#9CA3AF"};break;case"Bootstrap5Dark":t={tooltipFill:"#E9ECEF",tooltipBoldLabel:"#212529",tooltipLightLabel:"#212529",tooltipHeaderLine:"#ADB5BD"};break;case"Fluent":t={tooltipFill:"#FFFFFF",tooltipBoldLabel:"#323130",tooltipLightLabel:"#323130",tooltipHeaderLine:"#D2D0CE"};break;case"FluentDark":t={tooltipFill:"#252423",tooltipBoldLabel:"#F3F2F1",tooltipLightLabel:"#F3F2F1",tooltipHeaderLine:"#3B3A39"};break;default:t={tooltipFill:"#000816",tooltipBoldLabel:"#ffffff",tooltipLightLabel:"#dbdbdb",tooltipHeaderLine:"#ffffff"}}return t}var o,r=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});function a(e,t){var i=e||"",s=document.getElementById("chartmeasuretext");if(null===s&&(s=sf.base.createElement("text",{id:"chartmeasuretext"}),document.body.appendChild(s)),"string"==typeof e&&(e.indexOf("<")>-1||e.indexOf(">")>-1)){for(var n=e.split(" "),o=0;o<n.length;o++)-1===n[o].indexOf("<br/>")&&(n[o]=n[o].replace(/[<>]/g,"&"));e=n.join(" ")}return s.innerHTML=i.indexOf("<br>")>-1||i.indexOf("<br/>")>-1?i:e,s.style.position="fixed",s.style.fontSize=t.size,s.style.fontWeight=t.fontWeight,s.style.fontStyle=t.fontStyle,s.style.fontFamily=t.fontFamily,s.style.visibility="hidden",s.style.top="-100",s.style.left="0",s.style.whiteSpace="nowrap",s.style.lineHeight="normal",new d(s.clientWidth,s.clientHeight)}function l(e,t,i,s,n){return void 0===s&&(s=0),void 0===n&&(n=0),e>=i.x-s&&e<=i.x+i.width+s&&t>=i.y-n&&t<=i.y+i.height+n}function h(e,t,i,s,n,o,r,a,l,h,d){void 0===d&&(d="");var c="",p=i.x,u=i.y,f=i.x+i.width,g=i.y+i.height;return o?(c=(c=c.concat("M "+p+" "+(u+t)+" Q "+p+" "+u+" "+(p+e)+" "+u+"  L "+(f-e)+" "+u+" Q "+f+" "+u+" "+f+" "+(u+t))).concat(" L "+f+" "+(g-t)+" Q "+f+" "+g+" "+(f-e)+" "+g),0!==n&&(c="RangeNavigator"===d?s.x-n>f/2?(c=c.concat(" L "+(s.x+n)+" "+g)).concat(" L "+(l+n)+" "+(g+n)+" L "+s.x+" "+g):(c=c.concat(" L "+s.x+" "+g)).concat(" L "+(l-n)+" "+(g+n)+" L "+(s.x-n)+" "+g):(c=c.concat(" L "+(s.x+n)+" "+g)).concat(" L "+l+" "+(g+n)+" L "+(s.x-n)+" "+g)),c=s.x-n>p||0===n?c.concat(" L "+(p+e)+" "+g+" Q "+p+" "+g+" "+p+" "+(g-t)+" z"):c.concat(" L "+p+" "+(g+t)+" z")):r?c=(c=(c=(c=(c=c.concat("M "+p+" "+(u+t)+" Q "+p+" "+u+" "+(p+e)+" "+u+" L "+(s.x-n)+" "+u)).concat(" L "+l+" "+s.y)).concat(" L "+(s.x+n)+" "+u)).concat(" L "+(f-e)+" "+u+" Q "+f+" "+u+" "+f+" "+(u+t))).concat(" L "+f+" "+(g-t)+" Q "+f+" "+g+" "+(f-e)+" "+g+" L "+(p+e)+" "+g+" Q "+p+" "+g+" "+p+" "+(g-t)+" z"):a?(c=(c=c.concat("M "+p+" "+(u+t)+" Q "+p+" "+u+" "+(p+e)+" "+u)).concat(" L "+(f-e)+" "+u+" Q "+f+" "+u+" "+f+" "+(u+t)+" L "+f+" "+(s.y-n)),c="RangeNavigator"===d?c.concat(" L "+(f+n)+" "+(h-n)):c.concat(" L "+(f+n)+" "+h),c=(c=(c="RangeNavigator"===d?c.concat(" L "+f+" "+s.y):c.concat(" L "+f+" "+(s.y+n))).concat(" L "+f+" "+(g-t)+" Q "+f+" "+g+" "+(f-e)+" "+g)).concat(" L "+(p+e)+" "+g+" Q "+p+" "+g+" "+p+" "+(g-t)+" z")):(c=c.concat("M "+(p+e)+" "+u+" Q "+p+" "+u+" "+p+" "+(u+t)+" L "+p+" "+(s.y-n)),c="RangeNavigator"===d?c.concat(" L "+(p-n)+" "+(h-n)):c.concat(" L "+(p-n)+" "+h),c=(c=(c="RangeNavigator"===d?c.concat(" L "+p+" "+s.y):c.concat(" L "+p+" "+(s.y+n))).concat(" L "+p+" "+(g-t)+" Q "+p+" "+g+" "+(p+e)+" "+g)).concat(" L "+(f-e)+" "+g+" Q "+f+" "+g+" "+f+" "+(g-t)+" L "+f+" "+(u+t)+" Q "+f+" "+u+" "+(f-e)+" "+u+" z")),c}var d=function(e,t){this.width=e,this.height=t},c=function(e,t,i,s){this.x=e,this.y=t,this.width=i,this.height=s},p=function(e,t){this.isRight=t,this.isBottom=e},u=function(e){this.id=e},f=function(e){function t(t,i,s,n,o,r,a,l){void 0===r&&(r="");var h=e.call(this,t)||this;return h.transform="",h.baseLine="auto",h.labelRotation=0,h.x=i,h.y=s,h.anchor=n,h.text=o,h.transform=r,h.baseLine=a,h.labelRotation=l,h}return r(t,e),t}(u);function g(e){return document.getElementById(e)}function m(e){var t=g(e);t&&sf.base.remove(t)}function v(e,i,s,n,o,r){var a=new t(""),l=b(e,s,i,o,n),h=a["draw"+l.functionName](l.renderOption);return h.setAttribute("aria-label",r),h}function b(e,t,i,s,n){var o,r="Path",a=t.width,l=t.height,h=e.x,d=e.y,c=e.x+-a/2,p=e.y+-l/2;switch(i){case"Circle":case"Bubble":r="Ellipse",sf.base.merge(s,{rx:a/2,ry:l/2,cx:h,cy:d});break;case"Cross":o="M "+c+" "+d+" L "+(h+a/2)+" "+d+" M "+h+" "+(d+l/2)+" L "+h+" "+(d+-l/2),sf.base.merge(s,{d:o});break;case"HorizontalLine":o="M "+c+" "+d+" L "+(h+a/2)+" "+d,sf.base.merge(s,{d:o});break;case"VerticalLine":o="M "+h+" "+(d+l/2)+" L "+h+" "+(d+-l/2),sf.base.merge(s,{d:o});break;case"Diamond":o="M "+c+" "+d+" L "+h+" "+(d+-l/2)+" L "+(h+a/2)+" "+d+" L "+h+" "+(d+l/2)+" L "+c+" "+d+" z",sf.base.merge(s,{d:o});break;case"Rectangle":o="M "+c+" "+(d+-l/2)+" L "+(h+a/2)+" "+(d+-l/2)+" L "+(h+a/2)+" "+(d+l/2)+" L "+c+" "+(d+l/2)+" L "+c+" "+(d+-l/2)+" z",sf.base.merge(s,{d:o});break;case"Triangle":o="M "+c+" "+(d+l/2)+" L "+h+" "+(d+-l/2)+" L "+(h+a/2)+" "+(d+l/2)+" L "+c+" "+(d+l/2)+" z",sf.base.merge(s,{d:o});break;case"InvertedTriangle":o="M "+(h+a/2)+" "+(d-l/2)+" L "+h+" "+(d+l/2)+" L "+(h-a/2)+" "+(d-l/2)+" L "+(h+a/2)+" "+(d-l/2)+" z",sf.base.merge(s,{d:o});break;case"Pentagon":for(var u=void 0,f=void 0,g=0;g<=5;g++)u=a/2*Math.cos(Math.PI/180*(72*g)),f=l/2*Math.sin(Math.PI/180*(72*g)),o=0===g?"M "+(h+u)+" "+(d+f)+" ":o.concat("L "+(h+u)+" "+(d+f)+" ");o=o.concat("Z"),sf.base.merge(s,{d:o});break;case"Image":r="Image",sf.base.merge(s,{href:n,height:l,width:a,x:c,y:p})}return{renderOption:s,functionName:r}}var y=function(e){function t(t,i,s,n,o,r,a){var l=e.call(this,t)||this;return l.opacity=o,l.fill=i,l.stroke=n,l["stroke-width"]=s,l["stroke-dasharray"]=r,l.d=a,l}return r(t,e),t}(u);function M(e,i,s,n){var o,r=new t("");o={id:e.id,x:e.x,y:e.y,fill:s,"font-size":i.size,"font-style":i.fontStyle,"font-family":i.fontFamily,"font-weight":i.fontWeight,"text-anchor":e.anchor,transform:e.transform,opacity:i.opacity,"dominant-baseline":e.baseLine};var a="string"==typeof e.text?e.text:e.text[0],l=r.createText(o,a);return l.style.fontFamily=i.fontFamily,l.style.fontStyle=i.fontStyle,l.style.fontSize=i.size,l.style.fontWeight=i.fontWeight,l.style.color=i.color,n.appendChild(l),l}var C,w=function(e,t){this.x=e,this.y=t},S=(C=function(e,t){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}C(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),N=function(e,t,s,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,s,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,s,a):o(t,s))||a);return r>3&&a&&Object.defineProperty(t,s,a),a},x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return S(t,e),N([sf.base.Property(null)],t.prototype,"size",void 0),N([sf.base.Property("")],t.prototype,"color",void 0),N([sf.base.Property("Segoe UI")],t.prototype,"fontFamily",void 0),N([sf.base.Property("Normal")],t.prototype,"fontWeight",void 0),N([sf.base.Property("Normal")],t.prototype,"fontStyle",void 0),N([sf.base.Property(1)],t.prototype,"opacity",void 0),t}(sf.base.ChildProperty),O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return S(t,e),N([sf.base.Property("")],t.prototype,"color",void 0),N([sf.base.Property(1)],t.prototype,"width",void 0),N([sf.base.Property("")],t.prototype,"dashArray",void 0),t}(sf.base.ChildProperty),E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return S(t,e),N([sf.base.Property(0)],t.prototype,"x",void 0),N([sf.base.Property(0)],t.prototype,"y",void 0),N([sf.base.Property(0)],t.prototype,"width",void 0),N([sf.base.Property(0)],t.prototype,"height",void 0),t}(sf.base.ChildProperty),I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return S(t,e),N([sf.base.Property(0)],t.prototype,"x",void 0),N([sf.base.Property(0)],t.prototype,"y",void 0),t}(sf.base.ChildProperty),D=function(e){function i(t,i){return e.call(this,t,i)||this}return S(i,e),i.prototype.preRender=function(){this.allowServerDataBinding=!1,this.initPrivateVariable(),this.isCanvas||this.removeSVG(),this.createTooltipElement()},i.prototype.initPrivateVariable=function(){this.renderer=new t(this.element.id),this.themeStyle=n(this.theme),this.formattedText=[],this.padding=5,this.highlightPadding=3,this.areaMargin=10,this.isFirst=!0,this.markerPoint=[]},i.prototype.removeSVG=function(){var e=document.getElementById(this.element.id+"_svg"),t=document.getElementById(this.element.id+"parent_template");this.blazorTemplate&&sf.base.resetBlazorTemplate(this.element.id+"parent_template_blazorTemplate"),e&&e.parentNode&&sf.base.remove(e),t&&t.parentNode&&sf.base.remove(t)},i.prototype.render=function(){if(this.fadeOuted=!1,this.template)this.updateTemplateFn(),this.createTemplate(this.areaBounds,this.location);else{this.renderText(this.isFirst);var e={cancel:!1,name:"tooltipRender",tooltip:this};this.trigger("tooltipRender",e);var t=this.renderTooltipElement(this.areaBounds,this.location);this.drawMarker(t.isBottom,t.isRight,this.markerSize)}this.trigger("loaded",{tooltip:this});var i=document.getElementById("chartmeasuretext");i&&sf.base.remove(i),this.allowServerDataBinding=!0},i.prototype.createTooltipElement=function(){if(this.textElements=[],!this.template||this.shared){this.enableRTL&&this.element.setAttribute("dir","ltr");var e=this.renderer.createSvg({id:this.element.id+"_svg"});this.element.appendChild(e);var t=document.getElementById(this.element.id+"_group");t||(t=this.renderer.createGroup({id:this.element.id+"_group"})).setAttribute("transform","translate(0,0)"),e.appendChild(t);var i=this.renderer.drawPath({id:this.element.id+"_path","stroke-width":this.border.width,fill:this.fill||this.themeStyle.tooltipFill,opacity:"TailwindDark"!==this.theme&&"Tailwind"!==this.theme&&"Bootstrap5"!==this.theme&&"Bootstrap5Dark"!==this.theme||.75!==this.opacity?this.opacity:1,stroke:this.border.color});t.appendChild(i)}},i.prototype.drawMarker=function(e,t,i){if(this.shapes.length<=0)return null;for(var s,n=0,o=this.renderer.createGroup({id:this.element.id+"_trackball_group"}),r=g(this.element.id+"_group"),a=(this.enableRTL?this.elementSize.width-i/2:2*this.marginX+i/2)+(t?this.arrowPadding:0),l=0,h=this.shapes;l<h.length;l++){var c=h[l];if("None"!==c){if(s=new y(this.element.id+"_Trackball_"+n,this.palette[n],1,"#cccccc",1,null),this.markerPoint[n]){var p=0;this.header.indexOf("<br")>-1&&(p=this.header.split(/<br.*?>/g).length+n),o.appendChild(v(new w(a,this.markerPoint[n]-this.padding+(e?this.arrowPadding:p)),c,new d(i,i),"",s,null))}n++}}r.appendChild(o)},i.prototype.renderTooltipElement=function(e,t){var i,s=g(this.element.id),n=new w(0,0),o=new w(0,0),r=g(this.element.id+"_svg"),l=g(this.element.id+"_group"),d=g(this.element.id+"_path"),u=!1,f=!1,m=!1,v=0,b=0;if(""!==this.header&&(this.elementSize.height+=this.marginY),this.content.length>1?(i=this.sharedTooltipLocation(e,this.location.x,this.location.y),u=!0):(i=this.tooltipLocation(e,t,n,o),this.inverted?(v=(f=i.x<t.x+this.clipBounds.x)?0:this.arrowPadding,this.allowHighlight&&(i.x+=f?this.highlightPadding:-2*this.highlightPadding)):(m=!(u=i.y<t.y+this.clipBounds.y),b=u?0:this.arrowPadding)),""!==this.header){var y=2,M=0,C=this.isWrap?this.wrappedText:this.header;if(this.isWrap&&"string"==typeof C&&(C.indexOf("<")>-1||C.indexOf(">")>-1))y=C.split("<br>").length;this.header.indexOf("<br")>-1&&(M=5*(this.header.split(/<br.*?>/g).length-1));var S=a(this.isWrap?this.wrappedText:this.header,this.textStyle).height+this.marginY*y+(m?this.arrowPadding:0)+(this.isWrap?5:M),N="M "+(3*this.marginX+(f||u||m?0:this.arrowPadding))+" "+S+"L "+(i.width+(f||u||m?0:this.arrowPadding)-2*this.marginX)+" "+S,x=this.renderer.drawPath({id:this.element.id+"_header_path","stroke-width":1,fill:null,opacity:.8,stroke:this.themeStyle.tooltipHeaderLine,d:N});l.appendChild(x)}var O=this.border.width/2,E=new c(O+v,O+b,i.width-O,i.height-O);if(l.setAttribute("opacity","1"),!this.enableAnimation||this.isFirst||this.crosshair?this.updateDiv(s,i.x,i.y):this.animateTooltipDiv(s,i),r.setAttribute("height",(i.height+this.border.width+(this.inverted?0:this.arrowPadding)+5).toString()),r.setAttribute("width",(i.width+this.border.width+(this.inverted?this.arrowPadding:0)+5).toString()),r.setAttribute("opacity","1"),sf.base.isNullOrUndefined(this.tooltipPlacement)||(u=this.tooltipPlacement.indexOf("Top")>-1,m=this.tooltipPlacement.indexOf("Bottom")>-1,f=this.tooltipPlacement.indexOf("Left")>-1),d.setAttribute("d",h(this.rx,this.ry,E,n,this.arrowPadding,u,m,f,o.x,o.y,this.controlName)),this.enableShadow&&"Bootstrap4"!==this.theme){var I=this.element.id+"_shadow";"Tailwind"===this.theme||"TailwindDark"===this.theme||"Bootstrap5"===this.theme||"Bootstrap5Dark"===this.theme?d.setAttribute("box-shadow","0px 1px 2px rgba(0, 0, 0, 0.06), 0px 1px 3px rgba(0, 0, 0, 0.1)"):d.setAttribute("filter",sf.base.Browser.isIE?"":"url(#"+I+")");var D='<filter id="'+I+'" height="130%"><feGaussianBlur in="SourceAlpha" stdDeviation="3"/>';D+='<feOffset dx="3" dy="3" result="offsetblur"/><feComponentTransfer><feFuncA type="linear" slope="0.5"/>',D+='</feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';var T=this.renderer.createDefs();T.setAttribute("id",this.element.id+"SVG_tooltip_definition"),l.appendChild(T),T.innerHTML=D}var j="Fluent"===this.theme?"#FFFFFF":"FluentDark"===this.theme?"#323130":this.border.color;return d.setAttribute("stroke",j),sf.base.isNullOrUndefined(this.border.dashArray)||d.setAttribute("stroke-dasharray",this.border.dashArray),this.changeText(new w(v,b),m,!f&&!u&&!m),this.revert&&(this.inverted=!this.inverted,this.revert=!1),new p(m,!f&&!u&&!m)},i.prototype.changeText=function(e,t,i){var s=document.getElementById(this.element.id+"_text");t&&s.setAttribute("transform","translate(0,"+this.arrowPadding+")"),i&&s.setAttribute("transform","translate("+this.arrowPadding+" 0)")},i.prototype.findFormattedText=function(){this.formattedText=[],""!==this.header.replace(/<b>/g,"").replace(/<\/b>/g,"").trim()&&(this.formattedText=this.formattedText.concat(this.header)),this.formattedText=this.formattedText.concat(this.content)},i.prototype.renderText=function(e){var t,i,s,n,o,r=0,l=0,h=0,c=sf.base.extend({},this.textStyle,null,!0).properties,p=g(this.element.id+"_group"),u="";this.findFormattedText(),this.isWrap=!1;var v="rtl"===document.body.getAttribute("dir")&&!this.enableRTL?"end":"start";this.leftSpace=this.areaBounds.x+this.location.x,this.rightSpace=this.areaBounds.x+this.areaBounds.width-this.leftSpace;var b=this.header.replace(/<b>/g,"").replace(/<\/b>/g,"").trim(),y=this.header.indexOf("<b>")>-1&&this.header.indexOf("</b>")>-1,C=a(this.formattedText[0],c).width+2*this.marginX+this.arrowPadding,w=this.location.x-C<this.location.x,S=this.areaBounds.x+this.areaBounds.width<this.location.x+C,N=""!==b?this.marginY:0,x=!0,O=!0;this.markerPoint=[];var E,I=this.shapes.length>0?10:0,D=this.shapes.length>0?5:0,T="Normal",j=this.themeStyle.tooltipLightLabel,A=22/parseFloat("13px")*parseFloat(c.size),z=[];e&&!this.isCanvas||(m(this.element.id+"_text"),m(this.element.id+"_header_path"),m(this.element.id+"_trackball_group"),m(this.element.id+"SVG_tooltip_definition"));for(var L=new f(this.element.id+"_text",2*this.marginX,2*this.marginY+2*this.padding+(2===this.marginY?3:0),v,""),k=M(L,c,null,p),P=1===this.formattedText.length&&this.formattedText[0].indexOf(" : <b>")>-1,B=""!==this.header,U=B&&y?16:13,R=0,H=this.formattedText.length;R<H;R++)if(s=this.formattedText[R].replace(/<(b|strong)>/g,"<b>").replace(/<\/(b|strong)>/g,"</b>").split(/<br.*?>/g),this.isTextWrap&&this.header!==this.formattedText[R]&&-1===this.formattedText[R].indexOf("<br")&&(E=Math.round(this.leftSpace>this.rightSpace?this.leftSpace/U:this.rightSpace/U),s=this.formattedText[R].match(new RegExp(".{1,"+E+"}","g"))),0===R&&!P&&this.isTextWrap&&(this.leftSpace<C||w)&&(this.rightSpace<C||S)&&(E=Math.round(this.leftSpace>this.rightSpace?this.leftSpace/U:this.rightSpace/U),s=(""!==b?b:this.formattedText[R]).match(new RegExp(".{1,"+E+"}","g")),this.wrappedText=y?"<b>"+s.join("<br>")+"</b>":s.join("<br>"),this.isWrap=s.length>1),""!==s[0]){0===R&&""!==b||this.markerPoint.push((""!==b?this.marginY:0)+L.y+r);for(var Y=0,F=s.length;Y<F;Y++){t=s[Y].replace(/<b>/g,"<br><b>").replace(/<\/b>/g,"</b><br>").replace(/:/g,this.enableRTL?"<br>‎: <br>":"<br>‎:<br>").split("<br>"),this.enableRTL&&t.length>0&&s[Y].match(/:/g)&&(t[0]=t[0].trim(),t.reverse()),h=0,O=!0,r+=A;for(var q=0,V=t.length;q<V;q++)n=t[q],this.enableRTL&&""!==n&&this.isRTLText(n)&&(n=n.concat("‎")),/\S/.test(n)||""===n||(n=" "),(!O&&" "===n||""!==n.replace(/<b>/g,"").replace(/<\/b>/g,"").trim())&&(h+=" "!==n?4:0,O&&!x?(this.header.indexOf("<br")>-1&&0!==R&&(N+=this.header.split(/<br.*?>/g).length),o={x:2*this.marginX+(I+D),dy:A+(O?N:0),fill:""},N=null):o=x&&O?{x:""===b?2*this.marginX+(I+D):2*this.marginX+(this.isWrap?I+D:0)}:{},O=!1,i=this.renderer.createTSpan(o,""),k.appendChild(i),n.indexOf("<b>")>-1||y&&0===q&&0===R&&(B||this.isWrap)?(T="bold",j=this.themeStyle.tooltipBoldLabel,u="font-weight:"+T,c.fontWeight=T,i.setAttribute("fill",this.textStyle.color||j)):(u="bold"===T?"font-weight:"+T:"",c.fontWeight=T,i.setAttribute("fill",this.textStyle.color||j)),(n.indexOf("</b>")>-1||y&&q===V-1&&0===R&&(B||this.isWrap))&&(T="Normal",j=this.themeStyle.tooltipLightLabel),i.textContent=n=this.getTooltipTextContent(n),h+=a(n,c).width,""!==u&&(i.style.fontWeight=u.split("font-weight:")[1],i.style.color=i.getAttribute("fill")),i.style.fontFamily="inherit",i.style.fontStyle="inherit",i.style.fontSize="inherit",x=!1);h-=4,l=Math.max(l,h),z.push(h)}}this.elementSize=new d(l+(l>0?2*this.marginX:0),r),this.elementSize.width+=I+D;var W=k.childNodes[0];if(""!==b&&W&&!this.isWrap){c.fontWeight="bold";var _=(this.elementSize.width+2*this.padding)/2-a(b,c).width/2;W.setAttribute("x",_.toString())}this.renderContentRTL(k,B,I+D,z)},i.prototype.renderContentRTL=function(e,t,i,s){if(this.enableRTL)for(var n=void 0,o=t?1:0,r=0;r<e.childNodes.length;r++)n=e.childNodes[r],t&&!(r>0)||sf.base.isNullOrUndefined(n.getAttribute("x"))||(n.setAttribute("x",(this.elementSize.width-(i+s[o])).toString()),o++)},i.prototype.getTooltipTextContent=function(e){var t=e.match(/<[a-zA-Z\/](.|\n)*?>/g);if(sf.base.isNullOrUndefined(t))return e;for(var i=this.isRTLText(e),s=0;s<t.length;s++)this.isValidHTMLElement(t[s].replace("<","").replace("/","").replace(">","").trim())&&(e=e.replace(t[s],i?"‎":""));return e},i.prototype.isValidHTMLElement=function(e){return"[object HTMLUnknownElement]"!==document.createElement(e).toString()},i.prototype.isRTLText=function(e){return/[\u0590-\u07FF\u200F\u202B\u202E\uFB1D-\uFDFD\uFE70-\uFEFC]/.test(e)},i.prototype.createTemplate=function(e,t){var i={cancel:!1,name:"tooltipRender",tooltip:this};this.trigger("tooltipRender",i);var s=document.getElementById(this.element.id);this.isCanvas&&this.removeSVG();var n=s.firstElementChild;if(n&&sf.base.remove(n),i.cancel)sf.base.remove(g(this.element.id+"_tooltip"));else{for(var o=sf.base.createElement("div",{id:this.element.id+"parent_template"}),r=this.templateFn(this.data,this.controlInstance,o.id,o.id+"_blazorTemplate","");r&&r.length>0;)sf.base.isBlazor()||1===r.length?(o.appendChild(r[0]),r=null):o.appendChild(r[0]);s.appendChild(o);var a=this.isCanvas?o:this.element,l=a.getBoundingClientRect();this.padding=0,this.elementSize=new d(l.width,l.height);var h=this.shared?this.sharedTooltipLocation(e,this.location.x,this.location.y):this.tooltipLocation(e,t,new w(0,0),new w(0,0));if(!this.enableAnimation||this.isFirst||this.crosshair?this.updateDiv(a,h.x,h.y):this.animateTooltipDiv(this.element,h),this.blazorTemplate){var c=function(){var i=g(p.element.id).getBoundingClientRect();p.elementSize=new d(i.width,i.height);var s=p.tooltipLocation(e,t,new w(0,0),new w(0,0));p.updateDiv(g(p.element.id),s.x,s.y)},p=this;c.bind(p,e,t),sf.base.updateBlazorTemplate(this.element.id+"parent_template_blazorTemplate",this.blazorTemplate.name,this.blazorTemplate.parent,void 0,c)}}},i.prototype.sharedTooltipLocation=function(e,t,i){var s=this.elementSize.width+2*this.marginX,n=this.elementSize.height+2*this.marginY,o=new c(t+2*this.padding,i-n-this.padding,s,n);return o.y<e.y&&(o.y+=o.height+2*this.padding),o.x+o.width>e.x+e.width&&(o.x-=o.width+4*this.padding),o.x<e.x&&(o.x=e.x),o},i.prototype.getCurrentPosition=function(e,t,i,s){var n=this.tooltipPlacement,o=this.clipBounds.x,r=this.clipBounds.y,a=this.offset,l=this.elementSize.width+2*this.marginX,h=this.elementSize.height+2*this.marginY,d=new w(t.x,t.y);return"Top"===n||"Bottom"===n?(d=new w(d.x+o-this.elementSize.width/2-this.padding,d.y+r-this.elementSize.height-2*this.padding-this.arrowPadding-a),i.x=s.x=l/2,"Bottom"===n&&(d.y=t.y+r+a),e.x+e.width<d.x+l?(d.x=e.width>l?e.x+e.width-l+6:e.x,i.x=s.x=e.width>l?e.x+t.x-d.x:t.x):e.x>d.x&&(d.x=e.x,i.x=s.x=t.x)):(d=new w(d.x+o+a,d.y+r-this.elementSize.height/2-this.padding),i.y=s.y=h/2,"Left"===n&&(d.x=t.x+o-a-(l+this.arrowPadding)),e.y+e.height<d.y+h?(d.y=e.height>h?e.y+e.height-h+6:e.y,i.y=s.y=e.height>h?e.y+t.y-d.y:t.y):e.y>d.y&&(d.y=e.y,i.y=s.y=t.y)),new c(d.x,d.y,l,h)},i.prototype.tooltipLocation=function(e,t,i,s){if(!sf.base.isNullOrUndefined(this.tooltipPlacement))return this.getCurrentPosition(e,t,i,s);var n=new w(t.x,t.y),o=this.elementSize.width+2*this.marginX,r=this.elementSize.height+2*this.marginY,a=this.offset,h=this.clipBounds.x,d=this.clipBounds.y,p=e.x,u=e.y;return this.outOfBounds=!1,this.inverted?(n=new w(n.x+h+a,n.y+d-this.elementSize.height/2-this.padding),i.y=s.y=r/2,(n.x+o+this.arrowPadding>p+e.width||this.isNegative)&&(n.x=(t.x>e.width+e.x?e.width:t.x)+h-a-(o+this.arrowPadding)),n.x<p&&(n.x=(t.x<0?0:t.x)+h+a),n.x+o+this.arrowPadding>p+e.width&&(n.x=(t.x>e.width+e.x?e.width:t.x)+h-a-(o+this.arrowPadding)),n.y<=u&&(i.y-=u-n.y,s.y-=u-n.y,n.y=u),n.y+r>=u+e.height&&(i.y+=n.y+r-(u+e.height),s.y+=n.y+r-(u+e.height),n.y-=n.y+r-(u+e.height)),i.y+this.arrowPadding>r-this.ry&&(i.y=r-this.ry-this.arrowPadding,s.y=r),i.y-this.arrowPadding<this.ry&&(i.y=s.y=this.ry+this.arrowPadding),"Chart"===this.controlName&&((n.y+i.y<this.areaMargin+this.arrowPadding||e.y+e.height-(n.y+i.y)<this.areaMargin+this.arrowPadding)&&(this.outOfBounds=!0),l(n.x,n.y,e)&&!this.outOfBounds||(this.inverted=!this.inverted,n=new w(t.x+h-this.padding-this.elementSize.width/2,t.y+d-this.elementSize.height-2*this.padding-a-this.arrowPadding),this.revert=!0,s.x=i.x=o/2,s.y=i.y=0,(n.y<u||this.isNegative)&&(n.y=(t.y<0?0:t.y)+a+d),n.y+this.arrowPadding+r>u+e.height&&(n.y=Math.min(t.y,u+e.height)+d-this.elementSize.height-2*this.padding-a-this.arrowPadding),s.x=o/2,n.x<p&&(s.x-=p-n.x,i.x-=p-n.x,n.x=p),n.x+o>e.width+p&&(i.x+=n.x+o-(e.width+p),s.x+=n.x+o-(e.width+p),n.x-=n.x+o-(e.width+p)),this.arrowPadding+i.x>o-this.rx&&(s.x=o-this.rx-this.arrowPadding,i.x=o-this.rx-this.arrowPadding),i.x-this.arrowPadding<this.rx&&(i.x=s.x=this.rx+this.arrowPadding)))):(n=new w(n.x+h-this.elementSize.width/2-this.padding,n.y+d-this.elementSize.height-2*(this.allowHighlight?this.highlightPadding:this.padding)-this.arrowPadding-a),i.x=s.x=o/2,(n.y<u||this.isNegative)&&"Progressbar"!==this.controlName&&(n.y=(t.y<0?0:t.y)+d+a),n.y+r+this.arrowPadding>u+e.height&&(n.y=Math.min(t.y,u+e.height)+d-this.elementSize.height-2*this.padding-this.arrowPadding-a),(n.x+o>p+e.width&&n.y<u||this.isNegative)&&"Progressbar"!==this.controlName&&(n.y=(t.y<0?0:t.y)+d+a),s.x=o/2,n.x<p&&"Progressbar"!==this.controlName&&(i.x-=p-n.x,s.x-=p-n.x,n.x=p),n.x+o>p+e.width&&"Progressbar"!==this.controlName&&(i.x+=n.x+o-(p+e.width),s.x+=n.x+o-(p+e.width),n.x-=n.x+o-(p+e.width)),n.x<p&&"Progressbar"!==this.controlName&&(i.x-=p-n.x,s.x-=p-n.x,n.x=p),i.x+this.arrowPadding>o-this.rx&&(i.x=o-this.rx-this.arrowPadding,s.x=o-this.rx-this.arrowPadding),i.x-this.arrowPadding<this.rx&&(i.x=s.x=this.rx+this.arrowPadding),"Chart"===this.controlName&&((e.x+e.width-(n.x+i.x)<this.areaMargin+this.arrowPadding||n.x+i.x<this.areaMargin+this.arrowPadding)&&(this.outOfBounds=!0),l(n.x,n.y,e)&&!this.outOfBounds||(this.inverted=!this.inverted,this.revert=!0,n=new w(t.x+a+h,t.y+d-this.elementSize.height/2-this.padding),s.x=i.x=0,s.y=i.y=r/2,(n.x+this.arrowPadding+o>p+e.width||this.isNegative)&&(n.x=(t.x>e.width?e.width:t.x)+h-a-(this.arrowPadding+o)),n.x<p&&(n.x=(t.x<0?0:t.x)+a+h),n.y<=u&&(s.y-=u-n.y,i.y-=u-n.y,n.y=u),n.y+r>=e.height+u&&(i.y+=n.y+r-(e.height+u),s.y+=n.y+r-(e.height+u),n.y-=n.y+r-(e.height+u)),this.arrowPadding+i.y>r-this.ry&&(i.y=r-this.arrowPadding-this.ry,s.y=r),i.y-this.arrowPadding<this.ry&&(i.y=this.arrowPadding+this.ry,s.y=0)))),new c(n.x,n.y,o,r)},i.prototype.animateTooltipDiv=function(e,t){var i,s=this,n=parseFloat(e.style.left),o=parseFloat(e.style.top);new sf.base.Animation({}).animate(e,{duration:this.duration,progress:function(r){i=r.timeStamp/r.duration,e.style.animation=null,"Chart"===s.controlName&&s.shared&&!s.enableRTL?(e.style.transition=sf.base.isBlazor()?"transform 0.3s":"transform 0.1s",e.style.transform="translate("+(n+i*(t.x-n))+"px,"+(o+i*(t.y-o))+"px)"):(e.style.left=n+i*(t.x-n)+"px",e.style.top=o+i*(t.y-o)+"px")},end:function(i){s.updateDiv(e,t.x,t.y),s.trigger("animationComplete",{tooltip:s})}})},i.prototype.updateDiv=function(e,t,i){"Chart"!==this.controlName||!this.shared||this.crosshair||this.enableRTL?(e.style.left=t+"px",e.style.top=i+"px"):e.style.transform="translate("+t+"px,"+i+"px)"},i.prototype.updateTemplateFn=function(){if(this.template)try{document.querySelectorAll(this.template).length?this.templateFn=sf.base.compile(document.querySelector(this.template).innerHTML.trim()):this.templateFn=sf.base.compile(this.template)}catch(e){this.templateFn=sf.base.compile(this.template)}},i.prototype.fadeOut=function(){var e=this,t=this.isCanvas&&!this.template?g(this.element.id+"_svg"):g(this.element.id),i=g(this.element.id);if(t){var s=t.firstChild;if(s.nodeType!==Node.ELEMENT_NODE&&(s=t.firstElementChild),this.isCanvas&&!this.template&&(s=document.getElementById(this.element.id+"_group")?document.getElementById(this.element.id+"_group"):s),!s)return null;var n=parseFloat(s.getAttribute("opacity"));n=sf.base.isNullOrUndefined(n)?1:n,new sf.base.Animation({}).animate(s,{duration:200,progress:function(t){e.progressAnimation(s,n,t.timeStamp/t.duration)},end:function(){e.fadeOuted=!0,e.endAnimation(s),i.style.transition=""}})}},i.prototype.progressAnimation=function(e,t,i){e.style.animation="",e.setAttribute("opacity",(t-i).toString())},i.prototype.endAnimation=function(e){e.setAttribute("opacity","0"),this.template&&(e.style.display="none"),this.trigger("animationComplete",{tooltip:this})},i.prototype.getPersistData=function(){return this.addOnPersist([])},i.prototype.getModuleName=function(){return"tooltip"},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.element.classList.remove("e-tooltip")},i.prototype.onPropertyChanged=function(e,t){this.blazorTemplate&&sf.base.resetBlazorTemplate(this.element.id+"parent_template_blazorTemplate"),this.isFirst=!1,this.render()},N([sf.base.Property(!1)],i.prototype,"enable",void 0),N([sf.base.Property(!1)],i.prototype,"shared",void 0),N([sf.base.Property(!1)],i.prototype,"crosshair",void 0),N([sf.base.Property(!0)],i.prototype,"enableShadow",void 0),N([sf.base.Property(null)],i.prototype,"fill",void 0),N([sf.base.Property("")],i.prototype,"header",void 0),N([sf.base.Property(.75)],i.prototype,"opacity",void 0),N([sf.base.Complex({size:"13px",fontWeight:"Normal",color:null,fontStyle:"Normal",fontFamily:"Segoe UI"},x)],i.prototype,"textStyle",void 0),N([sf.base.Property(null)],i.prototype,"template",void 0),N([sf.base.Property(!0)],i.prototype,"enableAnimation",void 0),N([sf.base.Property(300)],i.prototype,"duration",void 0),N([sf.base.Property(!1)],i.prototype,"inverted",void 0),N([sf.base.Property(!1)],i.prototype,"isNegative",void 0),N([sf.base.Complex({color:"#cccccc",width:.5},O)],i.prototype,"border",void 0),N([sf.base.Property([])],i.prototype,"content",void 0),N([sf.base.Property(10)],i.prototype,"markerSize",void 0),N([sf.base.Complex({x:0,y:0},I)],i.prototype,"clipBounds",void 0),N([sf.base.Property([])],i.prototype,"palette",void 0),N([sf.base.Property([])],i.prototype,"shapes",void 0),N([sf.base.Complex({x:0,y:0},I)],i.prototype,"location",void 0),N([sf.base.Property(0)],i.prototype,"offset",void 0),N([sf.base.Property(4)],i.prototype,"rx",void 0),N([sf.base.Property(4)],i.prototype,"ry",void 0),N([sf.base.Property(5)],i.prototype,"marginX",void 0),N([sf.base.Property(5)],i.prototype,"marginY",void 0),N([sf.base.Property(7)],i.prototype,"arrowPadding",void 0),N([sf.base.Property(null)],i.prototype,"data",void 0),N([sf.base.Property("Material")],i.prototype,"theme",void 0),N([sf.base.Complex({x:0,y:0,width:0,height:0},E)],i.prototype,"areaBounds",void 0),N([sf.base.Property(null)],i.prototype,"availableSize",void 0),N([sf.base.Property()],i.prototype,"blazorTemplate",void 0),N([sf.base.Property(!1)],i.prototype,"isCanvas",void 0),N([sf.base.Property(!1)],i.prototype,"isTextWrap",void 0),N([sf.base.Property(null)],i.prototype,"tooltipPlacement",void 0),N([sf.base.Property(null)],i.prototype,"controlInstance",void 0),N([sf.base.Property("")],i.prototype,"controlName",void 0),N([sf.base.Event()],i.prototype,"tooltipRender",void 0),N([sf.base.Event()],i.prototype,"loaded",void 0),N([sf.base.Event()],i.prototype,"animationComplete",void 0),N([sf.base.Property(!1)],i.prototype,"enableRTL",void 0),N([sf.base.Property(!1)],i.prototype,"allowHighlight",void 0),i=N([sf.base.NotifyPropertyChanges],i)}(sf.base.Component);return e.TextStyle=x,e.TooltipBorder=O,e.AreaBounds=E,e.ToolLocation=I,e.Tooltip=D,e.getTooltipThemeColor=n,e.measureText=a,e.withInAreaBounds=l,e.findDirection=h,e.Size=d,e.Rect=c,e.Side=p,e.CustomizeOption=u,e.TextOption=f,e.getElement=g,e.removeElement=m,e.drawSymbol=v,e.calculateShapes=b,e.PathOption=y,e.textElement=M,e.TooltipLocation=w,e.SvgRenderer=t,e.CanvasRenderer=s,e},sf.svgbase=sf.svgbase({})},"./single-bundle.js":function(e,t,i){"use strict";i.r(t);i("./modules/base.js"),i("./modules/spinner.js"),i("./modules/popup.js"),i("./modules/popupsbase.js"),i("./modules/navigationsbase.js"),i("./modules/splitbuttonsbase.js"),i("./modules/svgbase.js"),i("./modules/sortable.js"),i("./syncfusion-blazor.js"),i("./modules/sf-accordion.js"),i("./modules/sf-accumulation-chart.js"),i("./modules/sf-barcode.js"),i("./modules/sf-breadcrumb.js"),i("./modules/sf-bullet-chart.js"),i("./modules/sf-calendar.js"),i("./modules/sf-chart.js"),i("./modules/sf-circulargauge.js"),i("./modules/sf-colorpicker.js"),i("./modules/sf-contextmenu.js"),i("./modules/sf-dashboard-layout.js"),i("./modules/sf-datepicker.js"),i("./modules/sf-daterangepicker.js"),i("./modules/sf-diagramcomponent.js"),i("./modules/sf-dialog.js"),i("./modules/sf-drop-down-button.js"),i("./modules/sf-dropdownlist.js"),i("./modules/sf-filemanager.js"),i("./modules/sf-floating-action-button.js"),i("./modules/sf-gantt.js"),i("./modules/sf-grid.js"),i("./modules/sf-heatmap.js"),i("./modules/sf-image-editor.js"),i("./modules/sf-inplaceeditor.js"),i("./modules/sf-kanban.js"),i("./modules/sf-lineargauge.js"),i("./modules/sf-listbox.js"),i("./modules/sf-listview.js"),i("./modules/sf-maps.js"),i("./modules/sf-maskedtextbox.js"),i("./modules/sf-mention.js"),i("./modules/sf-menu.js"),i("./modules/sf-multiselect.js"),i("./modules/sf-numerictextbox.js"),i("./modules/sf-pager.js"),i("./modules/sf-pivotview.js"),i("./modules/sf-progressbar.js"),i("./modules/sf-range-navigator.js"),i("./modules/sf-rating.js"),i("./modules/sf-richtexteditor.js"),i("./modules/sf-schedule.js"),i("./modules/sf-sidebar.js"),i("./modules/sf-signature.js"),i("./modules/sf-slider.js"),i("./modules/sf-smith-chart.js"),i("./modules/sf-sparkline.js"),i("./modules/sf-speeddial.js"),i("./modules/sf-spinner.js"),i("./modules/sf-splitter.js"),i("./modules/sf-stock-chart.js"),i("./modules/sf-svg-export.js"),i("./modules/sf-tab.js"),i("./modules/sf-textbox.js"),i("./modules/sf-timepicker.js"),i("./modules/sf-toast.js"),i("./modules/sf-toolbar.js"),i("./modules/sf-tooltip.js"),i("./modules/sf-treegrid.js"),i("./modules/sf-treemap.js"),i("./modules/sf-treeview.js"),i("./modules/sf-uploader.js")},"./syncfusion-blazor.js":function(e,t){var i={instances:[],getElementByXpath:function(e){return document.evaluate(e,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue},getElement:function(e,t,i){var s=null!=e&&null!=window[e]?window[e][t]:null;return null!=s?s:window.sfBlazor.getElementByXpath(i)},getAttribute:function(e,t,i,s){var n=window.sfBlazor.getElement(e,t,i);if(null!=n)return n.getAttribute(s)},setAttribute:function(e,t,i,s,n){window.sfBlazor.getElement(e,t,i).setAttribute(s,n)},addClass:function(e,t,i,s){sf.base.addClass([window.sfBlazor.getElement(e,t,i)],s)},removeClass:function(e,t,i,s){sf.base.removeClass([window.sfBlazor.getElement(e,t,i)],s)},getClassList:function(e,t,i){return Array.prototype.slice.call(window.sfBlazor.getElement(e,t,i).classList)},enableRipple:function(e){sf.base.enableRipple(e)},isDevice:function(e){return e&&this.enableRtl(e),sf.base.Browser.isDevice},animate:function(e,t){new sf.base.Animation(t).animate(e)},setGlobalAnimationValue:function(e){sf.base.setGlobalAnimation(e)},callRipple:function(e,t){sf.base.rippleEffect(e,t)},createXPathFromElement:function(e){for(var t=document.getElementsByTagName("*"),i=[];e&&1===e.nodeType;e=e.parentNode)if(e.hasAttribute("id")){for(var s=0,n=0;n<t.length&&(t[n].hasAttribute("id")&&t[n].id===e.id&&s++,!(s>1));n++);if(1===s)return i.unshift('id("'+e.getAttribute("id")+'")'),i.join("/");i.unshift(e.localName.toLowerCase()+'[@id="'+e.getAttribute("id")+'"]')}else{for(var o=1,r=e.previousSibling;r;r=r.previousSibling)r.localName===e.localName&&o++;i.unshift(e.localName.toLowerCase()+"["+o+"]")}return i.length?"/"+i.join("/"):null},getDomObject:function(e,t,i){var s=e+sf.base.getUniqueID(e),n={id:t.id,class:t.className,xPath:window.sfBlazor.createXPathFromElement(t),domUUID:s},o=i&&i.elementID;return o&&(window[o]=sf.base.isNullOrUndefined(window[o])?{}:window[o],window[o][s]=t,n.elementID=o),n},focusButton:function(e){e.focus()},setCompInstance:function(e){window.sfBlazor.instances[e.dataId]=e},getCompInstance:function(e){return window.sfBlazor.instances[e]},setProgress:function(e,t,i,s,n,o){return i=i.querySelector(".e-spinner"),window.requestAnimationFrame((function(){n&&(e.style[o?"height":"width"]=s+"%"),t.parentElement.setAttribute("aria-valuenow",s.toString()),100===s&&(t.classList.remove("e-cont-animate","e-animate-end"),i.style.width="auto",i.style.height="auto")}))},setAnimation:function(e,t,i,s,n,o){t=t.querySelector(".e-spinner"),new sf.base.Animation({}).animate(e,{duration:s,name:"Progress"+i,timingFunction:n,begin:function(){o&&(t.style.width=Math.max(t.offsetWidth,e.offsetWidth)+"px",t.style.height=Math.max(t.offsetHeight,e.offsetHeight)+"px",e.classList.add("e-cont-animate"))},end:function(){e.classList.add("e-animate-end")}})},cancelAnimation:function(e){window.cancelAnimationFrame(e)},getSpinnerTheme:function(e){var t=e?window.getComputedStyle(e,":after").getPropertyValue("content"):"Material";return t&&t.replace(/['"]+/g,"")},chipKeydownHandler:function(e){e&&e.addEventListener("keydown",(function(e){e.target&&e.target.classList.contains("e-chip")&&" "==e.key&&e.preventDefault()}))},MediaQuery:{initialize:function(e){return e.dataId?(sf.base.extend(e,this,e),window.sfBlazor.setCompInstance(e),e.activeBreakpoint="",e.isMediaChanged=!1,e.initializeMediaQueries(e),e.updateActiveBreakpoint(e,!0),e.activeBreakpoint):null},initializeMediaQueries:function(e){for(var t=0;t<e.mediaBreakpoints.length;t++){var i=window.matchMedia(e.mediaBreakpoints[t].mediaQuery);e.mediaBreakpoints[t].mq=i,sf.base.EventHandler.add(i,"change",e.mediaQueryChangeHandler,e)}},updateActiveBreakpoint:function(e,t){for(var i=!1,s=0;s<e.mediaBreakpoints.length;s++){if(e.mediaBreakpoints[s].mq.matches){e.isMediaChanged&&!i||t||(e.isMediaChanged=e.activeBreakpoint!=e.mediaBreakpoints[s].breakpoint),e.activeBreakpoint=e.mediaBreakpoints[s].breakpoint;break}e.activeBreakpoint==e.mediaBreakpoints[s].breakpoint&&(i=e.isMediaChanged=!0,e.activeBreakpoint="")}},mediaQueryChangeHandler:function(){this.updateActiveBreakpoint(this),this.isMediaChanged&&(this.dotNetRef.invokeMethodAsync("UpdateActiveBreakpoint",this.activeBreakpoint),this.isMediaChanged=!1)},destroyComponent:function(){for(var e=0;e<this.mediaBreakpoints.length;e++)sf.base.EventHandler.remove(this.mediaBreakpoints[e].mq,"change",this.mediaQueryChangeHandler)},destroy:function(e){e&&window.sfBlazor.getCompInstance(e).destroyComponent()}},validateBlazorLicense:function(e,t,i){if(i){var s=sf.base.createElement("div",{innerHTML:'<div style="position: fixed;\n                width: 100%;\n                height: 100%;\n                top: 0;\n                left: 0;\n                right: 0;\n                bottom: 0;\n                background-color: rgba(0, 0, 0, 0.5);\n                z-index: 99999;">\n                    <div style="background: #FFFFFF;\n                    height: 490px;\n                    width: 840px;\n                    font-family: Helvetica Neue, Helvetica, Arial;\n                    color: #000000;\n                    box-shadow: 0px 4.8px 14.4px rgb(0 0 0 / 18%), 0px 25.6px 57.6px rgb(0 0 0 / 22%);\n                    display: block;\n                    margin: 6% auto;\n                    border-radius: 20px;">\n                        <div style="\n                        position: absolute;\n                        width: 838px;\n                        height: 80px;\n                        background-color: #F9F9F9;\n                        border: 1px solid #EEEEEE;\n                        border-top-left-radius: 20px;\n                        border-top-right-radius: 20px;">\n                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQ2IiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMTQ2IDMyIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNNDAuNTk2NSAxNS4wMDc4SDMyLjQyNUMzMS41NTU3IDE1LjAwNzggMzAuOTAzNyAxNS4xODEyIDMwLjUxMjUgMTUuNDg0NkMzMC4xMjEzIDE1LjgzMTQgMjkuOTA0IDE2LjMwODIgMjkuOTA0IDE3LjA0NTFDMjkuOTA0IDE3LjYwODYgMzAuMDc3OCAxOC4wNDIxIDMwLjQyNTYgMTguMzAyMkMzMC43NzMzIDE4LjYwNTYgMzEuMjk0OSAxOC43MzU2IDMxLjk5MDMgMTguNzM1NkgzNi4zMzY5QzM4LjExODkgMTguNzM1NiAzOS40MjI5IDE5LjA4MjQgNDAuMTYxOCAxOS43MzI2QzQwLjk0NDIgMjAuNDI2MiA0MS4yOTE5IDIxLjU1MzIgNDEuMjkxOSAyMy4xMTM3QzQxLjI5MTkgMjQuNzE3NiA0MC44NTcyIDI1Ljg4OCAzOS45ODc5IDI2LjY2ODJDMzkuMTE4NiAyNy40MDUxIDM3LjcyNzcgMjcuNzk1MyAzNS44NTg3IDI3Ljc5NTNIMjcuMDc4N1YyNS4wMjFIMzUuMzM3MkMzNi4yOTM0IDI1LjAyMSAzNi45NDU0IDI0Ljg5MSAzNy4zMzY2IDI0LjYzMDlDMzcuNzI3NyAyNC4zNzA4IDM3LjkwMTYgMjMuODk0IDM3LjkwMTYgMjMuMjg3MUMzNy45MDE2IDIyLjYzNjkgMzcuNzI3NyAyMi4xNjAxIDM3LjM4IDIxLjlDMzcuMDMyMyAyMS42Mzk5IDM2LjQyMzggMjEuNDY2NSAzNS41NTQ1IDIxLjQ2NjVIMzEuNjQyNkMyOS44NjA1IDIxLjQ2NjUgMjguNTEzMSAyMS4xMTk4IDI3LjY4NzMgMjAuMzgyOEMyNi44NjE0IDE5LjY0NTkgMjYuNDI2OCAxOC41MTg5IDI2LjQyNjggMTcuMDAxN0MyNi40MjY4IDE1LjM1NDUgMjYuODYxNCAxNC4xNDA4IDI3LjczMDcgMTMuMzYwNkMyOC42IDEyLjU4MDMgMjkuOTkwOSAxMi4yMzM1IDMxLjkwMzQgMTIuMjMzNUg0MC41OTY1VjE1LjAwNzhaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik00OC4wNzI3IDI1LjI4MTFINTAuNTA2OFYxNi4zOTQ5SDUzLjU0OTNWMjcuNTM1MkM1My41NDkzIDI5LjA1MjQgNTMuMjAxNiAzMC4xNzk0IDUyLjUwNjIgMzAuOTE2M0M1MS44MTA3IDMxLjY1MzIgNTAuNzI0MSAzMiA0OS4yNDYzIDMySDQzLjMzNVYyOS42NTkySDQ4LjcyNDdDNDkuMjg5NyAyOS42NTkyIDQ5Ljc2NzkgMjkuNTI5MiA1MC4wNzIxIDI5LjIyNThDNTAuMzc2NCAyOC45NjU3IDUwLjU1MDIgMjguNTMyMiA1MC41NTAyIDI4LjAxMlYyNy44Mzg2SDQ3Ljg5ODlDNDYuMjAzNyAyNy44Mzg2IDQ0Ljk0MzIgMjcuNDkxOSA0NC4yNDc4IDI2Ljg0MTZDNDMuNTA4OSAyNi4xNDgxIDQzLjE2MTEgMjUuMDY0NCA0My4xNjExIDIzLjQ2MDVWMTYuMzk0OUg0Ni4xNjAyVjIzLjIwMDVDNDYuMTYwMiAyNC4wNjc0IDQ2LjI5MDYgMjQuNjMwOSA0Ni41NTE0IDI0Ljg5MUM0Ni43MjUzIDI1LjE1MTEgNDcuMjQ2OSAyNS4yODExIDQ4LjA3MjcgMjUuMjgxMVoiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTU1Ljg5NjUgMTYuMzk0OUg2MS41OTA0QzYzLjMyOTEgMTYuMzk0OSA2NC41NDYxIDE2LjY5ODMgNjUuMjg1IDE3LjM0ODVDNjYuMDIzOSAxNy45OTg4IDY2LjM3MTYgMTkuMDgyNCA2Ni4zNzE2IDIwLjU1NjNWMjcuNzk1M0g2My4zMjkxVjIwLjk0NjRDNjMuMzI5MSAyMC4wNzk0IDYzLjE5ODcgMTkuNTE1OSA2Mi45Mzc5IDE5LjI5OTJDNjIuNjc3MSAxOS4wMzkxIDYyLjE1NTUgMTguOTA5MSA2MS4zMjk3IDE4LjkwOTFINTguODk1NlYyNy44Mzg2SDU1Ljg1M1YxNi4zOTQ5SDU1Ljg5NjVaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03NC45MzQyIDI1LjM2NzhINzguMTUwNlYyNy43OTUySDc0LjAyMTRDNzIuOTc4MiAyNy43OTUyIDcyLjEwODkgMjcuNjY1MiA3MS40NTcgMjcuNDkxOEM3MC44MDUgMjcuMjc1IDcwLjE5NjUgMjYuOTI4MyA2OS43MTgzIDI2LjQ1MTRDNjkuMTk2OCAyNS45MzEzIDY4Ljc2MjEgMjUuMjgxMSA2OC40NTc4IDI0LjU0NDJDNjguMTUzNiAyMy44MDcyIDY4LjAyMzIgMjIuOTgzNiA2OC4wMjMyIDIyLjE2QzY4LjAyMzIgMjEuMjkzMSA2OC4xNTM2IDIwLjQ2OTUgNjguNDU3OCAxOS42ODkyQzY4Ljc2MjEgMTguOTA5IDY5LjE1MzMgMTguMzAyMSA2OS43MTgzIDE3Ljc4MTlDNzAuMjM5OSAxNy4zMDUxIDcwLjgwNSAxNi45NTgzIDcxLjUwMDQgMTYuNzQxNkM3Mi4xOTU5IDE2LjUyNDkgNzMuMDIxNyAxNi40MzgyIDc0LjA2NDkgMTYuNDM4Mkg3OC4xOTQxVjE4LjkwOUg3NC45MzQyQzczLjQ5OTggMTguOTA5IDcyLjU0MzYgMTkuMTY5MSA3MS45Nzg1IDE5LjY0NTlDNzEuNDU2OSAyMC4xMjI3IDcxLjE1MjcgMjAuOTg5NyA3MS4xNTI3IDIyLjIwMzRDNzEuMTUyNyAyMi44OTY5IDcxLjI4MzEgMjMuNDYwNSA3MS41MDA0IDIzLjkzNzNDNzEuNzE3NyAyNC40MTQxIDcyLjA2NTUgMjQuNzYwOSA3Mi41MDAxIDI1LjA2NDNDNzIuNzE3NCAyNS4xOTQ0IDcyLjk3ODIgMjUuMjgxMSA3My4yODI1IDI1LjM2NzhDNzMuNjMwMiAyNS4zMjQ0IDc0LjE1MTggMjUuMzY3OCA3NC45MzQyIDI1LjM2NzhaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik04MC44NDU2IDE4LjY0ODlINzguNjcyNFYxNi4zNTE1SDgwLjg0NTZWMTUuMTgxMUM4MC44NDU2IDE0LjAxMDggODEuMDYzIDEzLjIzMDUgODEuNDk3NiAxMi44NDA0QzgxLjkzMjMgMTIuNDUwMyA4Mi43NTgxIDEyLjIzMzUgODMuOTc1MSAxMi4yMzM1SDg2Ljg0MzhWMTQuNDAwOUg4NS40MDk1Qzg0Ljg4NzkgMTQuNDAwOSA4NC41NDAyIDE0LjQ4NzYgODQuMzIyOSAxNC42NjFDODQuMTA1NSAxNC44MzQ0IDgzLjk3NTEgMTUuMDk0NSA4My45NzUxIDE1LjQ0MTJWMTYuMzUxNUg4Ni44NDM4VjE4LjY0ODlIODMuOTc1MVYyNy43OTUzSDgwLjg0NTZWMTguNjQ4OVoiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTk4LjQwNTYgMjcuNzk1M0g5Mi43MTE2QzkxLjAxNjUgMjcuNzk1MyA4OS44NDI5IDI3LjQ0ODUgODkuMDYwNSAyNi43OTgzQzg4LjMyMTYgMjYuMTQ4MSA4Ny45MzA0IDI1LjA2NDQgODcuOTMwNCAyMy41OTA2VjE2LjM5NDlIOTAuOTI5NVYyMy40MTcyQzkwLjkyOTUgMjQuMTk3NCA5MS4wNTk5IDI0LjY3NDMgOTEuMzIwNyAyNC45MzQ0QzkxLjU4MTUgMjUuMTk0NCA5Mi4xMDMxIDI1LjMyNDUgOTIuOTI4OSAyNS4zMjQ1SDk1LjM2M1YxNi4zOTQ5SDk4LjQwNTZWMjcuNzk1M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTEwMC42MjIgMjUuNDExMkgxMDcuMDExQzEwNy41NzcgMjUuNDExMiAxMDguMDExIDI1LjMyNDUgMTA4LjI3MiAyNS4xNTExQzEwOC41MzMgMjQuOTc3NyAxMDguNjYzIDI0LjY3NDMgMTA4LjY2MyAyNC4zMjc1QzEwOC42NjMgMjMuOTM3NCAxMDguNTMzIDIzLjY3NzMgMTA4LjI3MiAyMy40NjA1QzEwOC4wMTEgMjMuMjg3MSAxMDcuNTc3IDIzLjIwMDUgMTA3LjA1NSAyMy4yMDA1SDEwNC40NDdDMTAyLjg4MiAyMy4yMDA1IDEwMS44MzkgMjIuOTgzNyAxMDEuMzE4IDIyLjUwNjlDMTAwLjc1MiAyMi4wMzAxIDEwMC40OTIgMjEuMjA2NSAxMDAuNDkyIDE5Ljk5MjdDMTAwLjQ5MiAxOC43NzkgMTAwLjgzOSAxNy44Njg3IDEwMS40OTEgMTcuMjYxOEMxMDIuMTQzIDE2LjY5ODMgMTAzLjE4NyAxNi4zOTQ5IDEwNC41MzQgMTYuMzk0OUgxMTEuMDU0VjE4Ljc3OUgxMDUuNzA4QzEwNC44MzggMTguNzc5IDEwNC4yNzMgMTguODY1NyAxMDQuMDEyIDE4Ljk5NTdDMTAzLjc1MiAxOS4xNjkxIDEwMy42MjEgMTkuNDI5MiAxMDMuNjIxIDE5LjgxOTRDMTAzLjYyMSAyMC4xNjYxIDEwMy43NTIgMjAuNDI2MiAxMDMuOTY5IDIwLjU5OTZDMTA0LjE4NiAyMC43NzMgMTA0LjU3NyAyMC44NTk3IDEwNS4wNTYgMjAuODU5N0gxMDcuNzk0QzEwOS4wNTQgMjAuODU5NyAxMTAuMDExIDIxLjE2MzEgMTEwLjY2MyAyMS43MjY2QzExMS4zMTUgMjIuMjkwMiAxMTEuNjYyIDIzLjE1NzEgMTExLjY2MiAyNC4yNDA4QzExMS42NjIgMjUuMjgxMSAxMTEuMzU4IDI2LjE0ODEgMTEwLjc5MyAyNi43OTgzQzExMC4yMjggMjcuNDQ4NSAxMDkuNDQ2IDI3Ljc5NTMgMTA4LjUzMyAyNy43OTUzSDEwMC43MDlWMjUuNDExMkgxMDAuNjIyWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTE2LjU3NCAxNS4wOTQ0SDExMy40MDFWMTIuMjc2OUgxMTYuNTc0VjE1LjA5NDRaTTExNi41NzQgMjcuNzk1M0gxMTMuNDAxVjE2LjM5NDlIMTE2LjU3NFYyNy43OTUzWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTMwLjMwOSAyMi4xMTY3QzEzMC4zMDkgMjMuODkzOSAxMjkuNzQ0IDI1LjMyNDQgMTI4LjY1NyAyNi40MDgxQzEyNy41NzEgMjcuNDkxOCAxMjYuMDkzIDI4LjAxMiAxMjQuMjI0IDI4LjAxMkMxMjIuMzU1IDI4LjAxMiAxMjAuODc3IDI3LjQ5MTggMTE5Ljc5IDI2LjQwODFDMTE4LjcwNCAyNS4zMjQ0IDExOC4xMzkgMjMuODkzOSAxMTguMTM5IDIyLjExNjdDMTE4LjEzOSAyMC4zMzk0IDExOC43MDQgMTguOTA5IDExOS43OSAxNy44MjUzQzEyMC44NzcgMTYuNzQxNiAxMjIuMzk4IDE2LjIyMTQgMTI0LjIyNCAxNi4yMjE0QzEyNi4wNDkgMTYuMjIxNCAxMjcuNTI3IDE2Ljc0MTYgMTI4LjY1NyAxNy44MjUzQzEyOS43NDQgMTguODY1NiAxMzAuMzA5IDIwLjI5NjEgMTMwLjMwOSAyMi4xMTY3Wk0xMjEuMjY4IDIyLjExNjdDMTIxLjI2OCAyMy4yMDA0IDEyMS41MjkgMjQuMDY3MyAxMjIuMDUxIDI0LjY3NDJDMTIyLjU3MiAyNS4yODExIDEyMy4yNjggMjUuNTg0NSAxMjQuMTggMjUuNTg0NUMxMjUuMDkzIDI1LjU4NDUgMTI1Ljc4OSAyNS4yODExIDEyNi4zMSAyNC42NzQyQzEyNi44MzIgMjQuMDY3MyAxMjcuMDkzIDIzLjIwMDQgMTI3LjA5MyAyMi4xMTY3QzEyNy4wOTMgMjEuMDMzIDEyNi44MzIgMjAuMTY2MSAxMjYuMzEgMTkuNjAyNUMxMjUuNzg5IDE4Ljk5NTcgMTI1LjA5MyAxOC42OTIyIDEyNC4xMzcgMTguNjkyMkMxMjMuMjI0IDE4LjY5MjIgMTIyLjUyOSAxOC45OTU3IDEyMi4wMDcgMTkuNjAyNUMxMjEuNTI5IDIwLjE2NjEgMTIxLjI2OCAyMS4wMzMgMTIxLjI2OCAyMi4xMTY3WiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTMxLjc4NyAxNi4zOTQ5SDEzNy40ODFDMTM5LjIxOSAxNi4zOTQ5IDE0MC40MzYgMTYuNjk4MyAxNDEuMTc1IDE3LjM0ODVDMTQxLjkxNCAxNy45OTg4IDE0Mi4yNjIgMTkuMDgyNCAxNDIuMjYyIDIwLjU1NjNWMjcuNzk1M0gxMzkuMjE5VjIwLjk0NjRDMTM5LjIxOSAyMC4wNzk0IDEzOS4wODkgMTkuNTE1OSAxMzguODI4IDE5LjI5OTJDMTM4LjU2NyAxOS4wMzkxIDEzOC4wNDYgMTguOTA5MSAxMzcuMjIgMTguOTA5MUgxMzQuNzg2VjI3LjgzODZIMTMxLjc0M1YxNi4zOTQ5SDEzMS43ODdaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03LjEyODMxIDMuNzM3NDNIMFYxMC44NDY0SDcuMTI4MzFWMy43Mzc0M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTIzLjI1MTMgLTIuMTU3MjVlLTA1TDE4LjU1MTMgNS41MTY4NUwyNC4wODMxIDEwLjIwNDFMMjguNzgzMSA0LjY4NzI1TDIzLjI1MTMgLTIuMTU3MjVlLTA1WiIgZmlsbD0iI0ZGODYwMCIvPgo8cGF0aCBkPSJNMTUuNjA0MSAzLjczNzQzSDguNDc1ODNWMTAuODQ2NEgxNS42MDQxVjMuNzM3NDNaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03LjEyODMxIDEyLjE5MDJIMFYxOS4yOTkySDcuMTI4MzFWMTIuMTkwMloiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTE1LjYwNDEgMTIuMTkwMkg4LjQ3NTgzVjE5LjI5OTJIMTUuNjA0MVYxMi4xOTAyWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMjQuMDc5NyAxMi4xOTAySDE2Ljk1MTRWMTkuMjk5MkgyNC4wNzk3VjEyLjE5MDJaIiBmaWxsPSIjRkY4NjAwIi8+CjxwYXRoIGQ9Ik03LjEyODMxIDIwLjY4NjNIMFYyNy43OTUzSDcuMTI4MzFWMjAuNjg2M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTE1LjYwNDEgMjAuNjg2M0g4LjQ3NTgzVjI3Ljc5NTNIMTUuNjA0MVYyMC42ODYzWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMjQuMTIzMiAyMC42ODYzSDE2Ljk5NDlWMjcuNzk1M0gyNC4xMjMyVjIwLjY4NjNaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik0xNDYgMTUuODMxM0MxNDYgMTYuODcxNyAxNDUuMTc0IDE3LjY5NTMgMTQ0LjEzMSAxNy42OTUzQzE0My4wODggMTcuNjk1MyAxNDIuMjYyIDE2Ljg3MTcgMTQyLjI2MiAxNS44MzEzQzE0Mi4yNjIgMTQuNzkxIDE0My4wODggMTQuMDEwNyAxNDQuMTMxIDE0LjAxMDdDMTQ1LjEzMSAxMy45Njc0IDE0NiAxNC43OTEgMTQ2IDE1LjgzMTNaTTE0Mi45NTcgMTQuNzkxQzE0Mi42OTcgMTUuMDUxMSAxNDIuNTY2IDE1LjQ0MTIgMTQyLjU2NiAxNS44MzEzQzE0Mi41NjYgMTYuNjk4MyAxNDMuMjYyIDE3LjM5MTggMTQ0LjEzMSAxNy4zOTE4QzE0NSAxNy4zOTE4IDE0NS42OTYgMTYuNjk4MyAxNDUuNjk2IDE1LjgzMTNDMTQ1LjY5NiAxNS4wMDc3IDE0NSAxNC4yNzA4IDE0NC4xNzQgMTQuMjcwOEMxNDMuNjUzIDE0LjI3MDggMTQzLjI2MiAxNC40NDQyIDE0Mi45NTcgMTQuNzkxWk0xNDQuODcgMTYuOTE1SDE0NC40NzlMMTQzLjkxNCAxNi4wOTE0VjE2LjkxNUgxNDMuNjA5VjE0Ljc0NzZIMTQzLjk1N0MxNDQuNDM1IDE0Ljc0NzYgMTQ0LjY1MyAxNC45NjQ0IDE0NC42NTMgMTUuMzU0NUMxNDQuNjUzIDE1LjY1NzkgMTQ0LjQ3OSAxNS44NzQ3IDE0NC4xNzQgMTUuOTYxNEwxNDQuODcgMTYuOTE1Wk0xNDQuMDQ0IDE1LjY1NzlDMTQ0LjI2MSAxNS42NTc5IDE0NC4zOTIgMTUuNTI3OSAxNDQuMzkyIDE1LjM1NDVDMTQ0LjM5MiAxNS4xMzc4IDE0NC4yNjEgMTUuMDUxMSAxNDQuMDAxIDE1LjA1MTFIMTQzLjkxNFYxNS42NTc5SDE0NC4wNDRaIiBmaWxsPSIjMzU0M0E4Ii8+Cjwvc3ZnPgo=" style="\n                text-align: left;\n                width: 146px;\n                position: absolute;\n                top: 24px;\n                left: 40px;"></div>\n                <div style="position: relative;\n                top: 104px;\n                left: 32px;\n                font-size: 20px;\n                text-align: left;\n                font-weight: 700;\n                letter-spacing: 0.02em;\n                font-style: normal;\n                line-height: 125%;">Claim your FREE account and get a key in less than a minute</div>\n                        <ul style="font-size: 15px;\n                        margin-top: 15px;\n                        font-weight: 400;\n                        color: #333333;\n                        letter-spacing: 0.01em;\n                        position: relative;\n                        left: 40px;\n                        top: 103px;\n                        line-height: 180%;">\n                            <li><span>Access to a 30-day free trial of any of our products.</span></li>\n                            <li><span>Access to 24x5 support by developers via the <a\n                                        href="https://support.syncfusion.com/create"\n                                        style="text-decoration: none;\n                            color: #0D6EFD;\n                            font-weight: 500;">support tickets</a>, <a\n                                        href="https://www.syncfusion.com/forums"\n                                        style="text-decoration: none;\n                            color: #0D6EFD;\n                            font-weight: 500;">forum</a>, <a\n                                        href="https://www.syncfusion.com/feedback"\n                                        style="text-decoration: none;\n                            color: #0D6EFD;\n                            font-weight: 500;">feature & feedback page</a> and chat.</span></li>\n                            <li><span>200+ <a\n                                        href="https://www.syncfusion.com/succinctly-free-ebooks"\n                                        style="text-decoration: none;\n                            color: #0D6EFD;\n                            font-weight: 500;">ebooks</a> on the latest technologies, industry trends, and research topics.</span>\n                            </li>\n                            <li><span>Largest collection of over 7,000 flat and wireframe icons for free with Syncfusion <a\n                                        href="https://www.syncfusion.com/downloads/metrostudio"\n                                        style="text-decoration: none;\n                            color: #0D6EFD;\n                            font-weight: 500;">Metro Studio</a>.</span></li>\n                            <li><span>Free and unlimited access to Syncfusion technical <a\n                                        href="https://www.syncfusion.com/blogs/"\n                                        style="text-decoration: none;\n                            color: #0D6EFD;\n                            font-weight: 500;">blogs</a> and <a\n                                        href="https://www.syncfusion.com/resources/techportal/whitepapers"\n                                        style="text-decoration: none;\n                            color: #0D6EFD;\n                            font-weight: 500;">white papers.</a></span></li>\n                        </ul>\n                        <div style="font-size: 18px;\n                        font-weight: 700;\n                        position: relative;\n                        line-height: 125%;\n                        letter-spacing: 0.02em;\n                        top: 113px;\n                        left: 32px;">Syncfusion is trusted by 29,000+ businesses worldwide</div>\n                <img src=\'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODIwIiBoZWlnaHQ9IjU2IiB2aWV3Qm94PSIwIDAgODIwIDU2IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00MjcuNjE3IDIyLjU2NTlWMjQuNzIyNkM0MjYuNTU4IDI0LjM2MzggNDI1LjM5OCAyNC4xNTQ0IDQyNC40NzQgMjQuMTU0NEM0MjMuMzMzIDI0LjE1NDQgNDIyLjY5OCAyNC40OTEyIDQyMi42OTggMjUuMDk2M0M0MjIuNjk4IDI1LjQ4MjQgNDIyLjk3NiAyNS43MzgzIDQyMy43NzMgMjYuMDg1NEw0MjUuOTE3IDI3LjAxNzRDNDI3LjYzMyAyNy43NjM5IDQyOC40OTcgMjguODUzIDQyOC40OTcgMzAuMjY4MUM0MjguNDk3IDMyLjQ1MjIgNDI2LjU0NiAzMy44MyA0MjMuNDUyIDMzLjgzQzQyMi4zMjQgMzMuODMgNDIxLjAxOCAzMy42NzM2IDQxOS42MzYgMzMuMzcwOVYzMS4xNDE2QzQyMS4wMDYgMzEuNTAyOCA0MjIuMjYyIDMxLjY5NTcgNDIzLjIzOSAzMS42OTU3QzQyNC41MTggMzEuNjk1NyA0MjUuMjAzIDMxLjM1MDYgNDI1LjIwMyAzMC43MDc0QzQyNS4yMDMgMzAuMzIwOCA0MjQuOTM1IDMwLjAzNjcgNDI0LjMyMiAyOS43NzE3TDQyMS45NzUgMjguNzU5M0M0MjAuMjM2IDI4LjAwNzggNDE5LjQzMyAyNi45OTU0IDQxOS40MzMgMjUuNTUyMUM0MTkuNDMzIDIzLjQ4MzcgNDIxLjMxNCAyMi4xNjQ5IDQyNC4yNjUgMjIuMTY0OUM0MjUuMjk4IDIyLjE2NDkgNDI2LjU3IDIyLjMxNzEgNDI3LjYxNyAyMi41NjU5VjIyLjU2NTlaTTQzMC4xNjcgMjIuMzkwOUg0MzMuNjM1VjMzLjYwMzlINDMwLjE2N1YyMi4zOTA5Wk00NDQuOTExIDIyLjM5MDlWMjQuNDQ1MUg0MzkuNjc1VjI2Ljk3NDJINDQ0LjI0OVYyOC44MzIzSDQzOS42NzVWMzEuNDU0M0g0NDQuOTc4VjMzLjYwMzlINDM2LjMwNVYyMi4zOTA5SDQ0NC45MTFaTTQ2MS4yOTQgMjIuMzkwOVYzMy42MDM5SDQ1Ny45MzlWMjYuMjIzNkw0NTQuNjUyIDMzLjY5MTVINDUyLjUzMUw0NDkuMjY2IDI2LjIyMzZWMzMuNjAzOUg0NDYuOTQ5VjIyLjM5MDlINDUxLjE4NEw0NTQuMTc4IDI5LjIxMTRMNDU3LjE1NiAyMi4zOTA5SDQ2MS4yOTRWMjIuMzkwOVpNNDcyLjU3OSAyMi4zOTA5VjI0LjQ0NTFINDY3LjMzNVYyNi45NzQySDQ3MS45MDhWMjguODMyM0g0NjcuMzM1VjMxLjQ1NDNINDcyLjYzOFYzMy42MDM5SDQ2My45NTdWMjIuMzkwOUg0NzIuNTc5Wk00ODQuNzk0IDIyLjM5MDlWMzMuNjAzOUg0ODEuMDkzTDQ3Ni45MjYgMjYuNDEyM1YzMy42MDM5SDQ3NC42MDhWMjIuMzkwOUg0NzguNDA3TDQ4Mi40ODQgMjkuNDg3NlYyMi4zOTA5SDQ4NC43OTRaTTQ5NC44NTggMjIuNTY1OVYyNC43MjI2QzQ5My44MDcgMjQuMzY2MyA0OTIuNjQgMjQuMTU0NCA0OTEuNzMyIDI0LjE1NDRDNDkwLjU3MyAyNC4xNTQ0IDQ4OS45MzkgMjQuNDg1OCA0ODkuOTM5IDI1LjA5M0M0ODkuOTM5IDI1LjQ4ODYgNDkwLjE5OCAyNS43MjUgNDkxLjAyMyAyNi4wODU5TDQ5My4xNTcgMjcuMDE3OEM0OTQuODg1IDI3Ljc3MjIgNDk1LjczOSAyOC44NTE4IDQ5NS43MzkgMzAuMjgzNUM0OTUuNzM5IDMyLjQ1NTkgNDkzLjc4NiAzMy44MzA4IDQ5MC42OTkgMzMuODMwOEM0ODkuNTY5IDMzLjgzMDggNDg4LjI1OSAzMy42NzM2IDQ4Ni44NzggMzMuMzcxN1YzMS4xNDI0QzQ4OC4yNDcgMzEuNTAyOCA0ODkuNDk5IDMxLjY5NjUgNDkwLjQ3IDMxLjY5NjVDNDkxLjc0IDMxLjY5NjUgNDkyLjQ0NCAzMS4zNTE1IDQ5Mi40NDQgMzAuNzI4NUM0OTIuNDQ0IDMwLjMxNjMgNDkyLjE5NyAzMC4wNTA0IDQ5MS41NTUgMjkuNzcyNUw0ODkuMjE4IDI4Ljc2MDFDNDg3LjQ2NyAyOC4wMDI4IDQ4Ni42NzQgMjcuMDAyIDQ4Ni42NzQgMjUuNTUzM0M0ODYuNjc0IDIzLjQ4NjIgNDg4LjU1NiAyMi4xNjY1IDQ5MS41IDIyLjE2NjVDNDkyLjUzNiAyMi4xNjUzIDQ5My44MTMgMjIuMzE3MSA0OTQuODU4IDIyLjU2NTlWMjIuNTY1OVoiIGZpbGw9IiMwMEEwQjAiLz4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMzUyLjQxMyAyNi44MTlDMzUwLjk5MiAyNS4yNzU5IDM0OS42MzggMjMuODMxNSAzNDguMzQ5IDIyLjE1NzRMMzQ3LjkyIDIxLjU5OTVDMzQ5LjQwNiAyMS4zNjkzIDM1MC42OTUgMjAuMzg0OCAzNTAuNjk1IDE4Ljc0MzNDMzUwLjY5NSAxNy4yMzMxIDM0OS41MzkgMTYuMjQ4MiAzNDcuODIxIDE2LjI0ODJDMzQ2LjU5OCAxNi4yNDgyIDM0NS43MDYgMTYuMzEzNyAzNDUuMjQzIDE2LjMxMzdDMzQ0LjcxNSAxNi4zMTM3IDM0NC4yODUgMTYuMzEzNyAzNDMuNzkgMTYuMjgwOEMzNDMuODU2IDE4LjE1MjEgMzQzLjg4OSAxOC4yODM0IDM0My44ODkgMTkuNDMyMlYyMy42MzQzQzM0My44ODkgMjQuNDU1MyAzNDMuODU2IDI1LjI3NTkgMzQzLjc5IDI2LjgxODZDMzQ0LjE1MyAyNi43MjAyIDM0NC41MTcgMjYuNzIwMiAzNDQuNzgxIDI2LjcyMDJDMzQ1LjA0NSAyNi43MjAyIDM0NS40MDkgMjYuNzUzMSAzNDUuNzA2IDI2LjgxODZDMzQ1LjY0IDI1Ljc2NzkgMzQ1LjYwNyAyNC4wMjgzIDM0NS42MDcgMjMuNjM0M1YyMS4yMDUxQzM0Ny4xNiAyMy4yMDc3IDM0OS4yMDkgMjUuNjY5NSAzNTAuMDAxIDI2LjgxODZDMzUwLjM5OCAyNi43MjAyIDM1MC43MjggMjYuNzIwMiAzNTEuMTI0IDI2LjcyMDJDMzUxLjQ1NSAyNi43MjA2IDM1MS45MTggMjYuNzIwNiAzNTIuNDEzIDI2LjgxOVYyNi44MTlaTTM0OC44NzggMTkuMDA2QzM0OC44NzggMjAuMDIzNCAzNDguMzE3IDIxLjIwNTQgMzQ2Ljc5NyAyMS4yMDU0QzM0Ni40IDIxLjIwNTQgMzQ2LjAwMyAyMS4yMDU0IDM0NS42MDcgMjEuMTcyNVYxNy4wNjg4QzM0Ni4wMDMgMTYuOTcwNCAzNDYuNDk5IDE2LjkwNDYgMzQ2Ljc2MyAxNi45MDQ2QzM0OC4wODUgMTYuOTA0OSAzNDguODc4IDE3LjY2IDM0OC44NzggMTkuMDA2VjE5LjAwNlpNMzgyLjM4IDI2Ljg4NDVDMzgxLjgxOSAyNi4yOTM2IDM4MC45NiAyNS4zNDE3IDM4MC4xMzQgMjQuNDIyM0MzODAuODI4IDIzLjY2NzIgMzgxLjU1NSAyMi41NTEgMzgxLjk4NCAyMS41OTkxQzM4MS43MTkgMjEuNDY3OCAzODEuMzU2IDIxLjIwNTEgMzgxLjA5MiAyMC45NzUzQzM4MC45OTMgMjEuNzk1OSAzODAuNDMyIDIyLjg3OTIgMzc5LjYzOSAyMy44MzE1QzM3OC41MTUgMjIuNTE4NSAzNzguMjE4IDIyLjE1NzQgMzc3LjE5MyAyMC43Nzg1QzM3OC41ODEgMTkuODkyMSAzNzkuMjQyIDE4Ljg3NDMgMzc5LjI0MiAxOC4wNTM3QzM3OS4yNDIgMTcuMTAxNyAzNzguNTgxIDE2LjExNjkgMzc2Ljk2MiAxNi4xMTY5QzM3NS4yMTEgMTYuMTE2OSAzNzQuMzUyIDE3LjIwMDIgMzc0LjM1MiAxOC40ODAzQzM3NC4zNTIgMTkuMjM1NCAzNzQuNTUgMTkuODkxNyAzNzUuMzc2IDIwLjk3NTNDMzc0LjA1NCAyMS42OTc1IDM3Mi43NjYgMjIuNzQ3OSAzNzIuNzY2IDI0LjQyMjNDMzcyLjc2NiAyNi4wNjM5IDM3NC4wODcgMjYuOTE3NCAzNzUuNzA3IDI2LjkxNzRDMzc3LjE5MyAyNi45MTc0IDM3OC4xNTEgMjYuMzI2NiAzNzguOTEyIDI1LjYzNjlMMzc5LjkwMiAyNi44MTlDMzgwLjIgMjYuNzg2MSAzODAuNTMxIDI2LjcyMDYgMzgwLjg2MSAyNi43MjA2QzM4MS4zMjQgMjYuNzIwNiAzODEuODUyIDI2Ljc4NjEgMzgyLjM4IDI2Ljg4NDVWMjYuODg0NVpNMzgzLjM3MiA0MC4wMTU4QzM4MS45MTggMzguNDczIDM4MC41OTcgMzcuMDYxMiAzNzkuMzA4IDM1LjM4NzFMMzc4Ljg3OCAzNC44Mjg4QzM4MC4zMzIgMzQuNTk5MSAzODEuNjU0IDMzLjYxNSAzODEuNjU0IDMxLjk0MDFDMzgxLjY1NCAzMC40NjMyIDM4MC40OTggMjkuNDQ1NCAzNzguNzc5IDI5LjQ0NTRDMzc3LjU1NyAyOS40NDU0IDM3Ni42MzIgMjkuNTQzNSAzNzYuMTY5IDI5LjU0MzVDMzc1LjY3MyAyOS41NDM1IDM3NS4yNDQgMjkuNTQzNSAzNzQuNzQ4IDI5LjQ3NzZDMzc0LjgxNCAzMS4zODIyIDM3NC44NDggMzEuNDgwMiAzNzQuODQ4IDMyLjYyOTRWMzYuODMxMUMzNzQuODQ4IDM3LjY1MjQgMzc0LjgxNCAzOC41MDUyIDM3NC43NDggNDAuMDE1NEMzNzUuMTEyIDM5Ljk0OTYgMzc1LjQ3NSAzOS45NDk2IDM3NS43MDcgMzkuOTQ5NkMzNzYuMDA0IDM5Ljk0OTYgMzc2LjM2OCAzOS45NDk2IDM3Ni42MzIgNDAuMDE1NEMzNzYuNTY1IDM4Ljk5OCAzNzYuNTMzIDM3LjI1ODEgMzc2LjUzMyAzNi44MzExVjM0LjQzNDhDMzc4LjExOSAzNi40MDQyIDM4MC4xNjcgMzguODk5NiAzODAuOTYgNDAuMDE1NEMzODEuMzU2IDM5Ljk0OTYgMzgxLjY4NyAzOS45NDk2IDM4Mi4wODMgMzkuOTQ5NkMzODIuMzggMzkuOTUgMzgyLjg3NiAzOS45NSAzODMuMzcyIDQwLjAxNThaTTM2Mi4xNiAyNi44MTlDMzYwLjk3MSAyNS41NzE1IDM1OC44ODkgMjIuOTc4IDM1OC4wNjMgMjEuOTkzNUwzNTcuMjM3IDIwLjk3NTdDMzU4LjA5NiAxOS45NTgzIDM1OC42OSAxOS4zMzQxIDM1OS4zMTkgMTguNTc5QzM2MC4wNDUgMTcuNzkxIDM2MC43MDYgMTYuOTcwNCAzNjEuNDk5IDE2LjI0ODJDMzYxLjEzNiAxNi4zMTM3IDM2MC45MzcgMTYuMzEzNyAzNjAuNzM5IDE2LjMxMzdDMzYwLjU0MSAxNi4zMTM3IDM2MC4zNDMgMTYuMzEzNyAzNjAuMTQ0IDE2LjI0ODJDMzU5LjkxMyAxNi42MDkzIDM1OS41NSAxNy4wNjg4IDM1OS4xNTMgMTcuNTI4N0MzNTguNzU2IDE3Ljk1NTYgMzU4LjM2IDE4LjM4MjIgMzU4LjA2MyAxOC43NDMzQzM1Ny4yMzYgMTkuNjk1MiAzNTYuNzc0IDIwLjE1NDcgMzU1LjU4NSAyMS4yNzA5VjE5LjQ2NTVDMzU1LjU4NSAxOC40MTUxIDM1NS41ODUgMTcuNzI1NSAzNTUuNjUxIDE2LjI0ODJDMzU1LjMyMSAxNi4zMTM3IDM1NC45NTcgMTYuMzEzNyAzNTQuNzI2IDE2LjMxMzdDMzU0LjQ2MSAxNi4zMTM3IDM1NC4wMzIgMTYuMzEzNyAzNTMuNzY4IDE2LjI0ODJDMzUzLjgzMyAxNy44MjM5IDM1My44NjcgMTguMjgzNCAzNTMuODY3IDE5LjQzMjVWMjMuNjM0N0MzNTMuODY3IDI0LjY4NSAzNTMuODMzIDI1LjMwODggMzUzLjc2OCAyNi44MTlDMzU0LjE2NCAyNi43MjA2IDM1NC40OTUgMjYuNzIwNiAzNTQuNzI2IDI2LjcyMDZDMzU0Ljk1NyAyNi43MjA2IDM1NS4zNTMgMjYuNzUzNSAzNTUuNjUxIDI2LjgxOUMzNTUuNTg1IDI1LjE0NDkgMzU1LjU4NSAyNC4xNTk3IDM1NS41ODUgMjMuNjM0N1YyMS40MzUyQzM1Ni44MDcgMjIuODc5NiAzNTguNjkgMjUuMjQzMyAzNTkuNzQ4IDI2LjgxOUMzNjAuMTMgMjYuNzU2MyAzNjAuNTE3IDI2LjcyMzQgMzYwLjkwNSAyNi43MjA2QzM2MS4yMDIgMjYuNzIwNiAzNjEuNjY1IDI2LjcyMDYgMzYyLjE2IDI2LjgxOVYyNi44MTlaTTM3Mi42MDEgNDAuMDE1OEMzNzIuNTY4IDM5Ljg1MTkgMzcyLjUzNSAzOS43MjA2IDM3Mi41MzUgMzkuNTIzNEMzNzIuNTM1IDM5LjM5MjggMzcyLjU2OCAzOS4yMjgxIDM3Mi42MDEgMzkuMDk2NEMzNzEuMjggMzkuMTI5NyAzNjguOTAxIDM5LjE5NTIgMzY4LjM3MiAzOS4xOTUyVjM0LjY2NDlDMzY5LjY5NCAzNC42NjQ5IDM3MC45ODIgMzQuNjY0OSAzNzIuMjcgMzQuNzk2M0MzNzIuMjM4IDM0LjYzMjQgMzcyLjIwNCAzNC40Njc3IDM3Mi4yMDQgMzQuMzM2NEMzNzIuMjA0IDM0LjIwNTggMzcyLjIwNCAzNC4wNDE5IDM3Mi4yNyAzMy44NDQ3QzM3MS4zNDYgMzMuOTQyOCAzNjkuMTk4IDMzLjk3NiAzNjguMzcyIDMzLjk3NlYzMC4yNjZDMzY5LjgyNiAzMC4yNjYgMzcwLjY4NSAzMC4yNjYgMzcxLjE4IDMwLjI5OTNMMzcyLjUwMiAzMC4zNjUxQzM3Mi40MzYgMzAuMTY3OSAzNzIuNDM2IDMwLjA2OTIgMzcyLjQzNiAyOS45MDUzQzM3Mi40MzYgMjkuNzQxNCAzNzIuNDM2IDI5LjcwODEgMzcyLjUwMiAyOS40NDU4QzM3MS40MTEgMjkuNDc4MyAzNjkuOTI1IDI5LjU0MzggMzY5LjI2NCAyOS41NDM4QzM2OC44MDIgMjkuNTQzOCAzNjcuMzQ4IDI5LjUxMTMgMzY2LjU4NyAyOS40NDU4QzM2Ni42NTQgMzAuMjY2NCAzNjYuNjg2IDMxLjYxMjMgMzY2LjY4NiAzMi41NjQyVjM2Ljg2NTFDMzY2LjY4NiAzNy40ODg1IDM2Ni42MiAzOC43MzU3IDM2Ni41ODcgNDAuMDE2MkMzNjcuNTEzIDM5Ljk1MDMgMzY4LjgwMiAzOS45NTAzIDM2OS4yNjQgMzkuOTUwM0MzNzAuMDI0IDM5Ljk1IDM3MS42NDMgMzkuOTUgMzcyLjYwMSA0MC4wMTU4Wk0zNjQuNjA1IDM5LjEyOTRDMzY0LjQ0IDM4LjgwMDggMzY0LjM0MSAzOC4zMDg4IDM2NC4yNzUgMzguMDQ2MUMzNjIuOTIgMzkuMTYxOSAzNjEuOTk1IDM5LjM5MjQgMzYwLjkzOCAzOS4zOTI0QzM1OC41OTIgMzkuMzkyNCAzNTcuMzM3IDM3LjI5MTMgMzU3LjMzNyAzNC42NjQ5QzM1Ny4zMzcgMzEuNzQzNiAzNTguNzU3IDMwLjAzNjIgMzYxLjE2OSAzMC4wMzYyQzM2Mi40MjUgMzAuMDM2MiAzNjMuNjE0IDMwLjU5NDUgMzY0LjE3NiAzMS4xNTI4QzM2NC4yMDggMzAuODg5OCAzNjQuMzA4IDMwLjM2NDggMzY0LjQ3MyAzMC4wNjg4QzM2My4zMTYgMjkuNTExMyAzNjIuMjU5IDI5LjM0NjYgMzYxLjEwMiAyOS4zNDY2QzM1Ny4yMzcgMjkuMzQ2NiAzNTUuNDUzIDMxLjc0MzYgMzU1LjQ1MyAzNC44Mjg4QzM1NS40NTMgMzguMzA5MSAzNTcuNzk4IDQwLjE0NzEgMzYwLjczOSA0MC4xNDcxQzM2Mi40MjUgNDAuMTQ3MSAzNjMuODEyIDM5LjYyMjIgMzY0LjYwNSAzOS4xMjk0VjM5LjEyOTRaTTM0Mi4zMDMgMjYuODE5QzM0MC41MTkgMjMuNDA0OSAzMzguOCAxOS4xMzczIDMzNy41NzggMTYuMTE2OUgzMzcuMzhDMzM2LjU4NyAxOC4wMjA3IDMzNS4xMzMgMjEuMjcwOSAzMzQuNzM3IDIyLjE4OTlDMzM0LjI3NCAyMy4zMDYxIDMzMy4yNSAyNS41MDU2IDMzMi41ODkgMjYuODE4NkMzMzIuODAzIDI2Ljc1MzggMzMzLjAyNiAyNi43MjA2IDMzMy4yNSAyNi43MjAyQzMzMy40NDggMjYuNzIwMiAzMzMuNjEzIDI2Ljc1MzEgMzMzLjg0NSAyNi44MTg2QzMzNC4xNzUgMjUuOTMyMiAzMzQuNjM4IDI0LjgxNiAzMzUuMTMzIDIzLjYzNDNDMzM1Ljc5NCAyMy42MDE0IDMzNi4zODkgMjMuNTY4OCAzMzYuOTg0IDIzLjU2ODhDMzM3LjYxMiAyMy41Njg4IDMzOC4yNzIgMjMuNjAxNCAzMzguOTMzIDIzLjYzNDNMMzM5LjU5NCAyNS4yMUwzNDAuMjU1IDI2LjgxODZDMzQwLjcxNyAyNi43MjAyIDM0MS4wOCAyNi43MjAyIDM0MS4zMTIgMjYuNzIwMkMzNDEuNjA5IDI2LjcyMDYgMzQxLjg3MyAyNi43MjA2IDM0Mi4zMDMgMjYuODE5VjI2LjgxOVpNMzUzLjYzNiAyOS40NDU0QzM1My40MzggMjkuNTExMyAzNTMuMjczIDI5LjU0MzUgMzUzLjEwNyAyOS41NDM1QzM1Mi45MDkgMjkuNTQzNSAzNTIuNzQ0IDI5LjUxMDkgMzUyLjU0NiAyOS40NDU0QzM1Mi42NDQgMzAuNzU4NCAzNTIuNjc4IDMyLjA3MTQgMzUyLjY3OCAzMy4zNTE5VjM2LjczMzRDMzUyLjE0OSAzNi4yNzM2IDM1MC44NiAzNS4wOTE5IDM0OS4zNzQgMzMuNzEzQzM0Ny44NiAzMi4zMDc0IDM0Ni4zOTQgMzAuODUxMSAzNDQuOTc5IDI5LjM0NjZIMzQ0Ljc0OEMzNDQuNzgxIDMwLjgyNDMgMzQ0LjgxNCAzMi40IDM0NC44MTQgMzMuODExNFYzNS44Nzk5QzM0NC44MTQgMzcuNjUyOCAzNDQuODE0IDM4LjYwNDcgMzQ0LjcxNSA0MC4wMTYyQzM0NC45OCAzOS45NTAzIDM0NS4xMTIgMzkuOTUwMyAzNDUuMzEgMzkuOTUwM0MzNDUuNDQyIDM5Ljk1MDMgMzQ1LjU3NSAzOS45NTAzIDM0NS44MDYgNDAuMDE2MkMzNDUuNzQgMzguNjcwNiAzNDUuNzA3IDM2LjQ3MDggMzQ1LjcwNyAzNS44Nzk5VjMyLjU5NjhDMzQ4LjE4NSAzNC44NjI1IDM1MS4yMjQgMzcuODgyNiAzNTMuNDcxIDQwLjE0NzVIMzUzLjYwM0MzNTMuNjAzIDM4LjkzMjkgMzUzLjUzNyAzNy43MTc5IDM1My41MzcgMzYuNTA0VjM0LjYzMjdDMzUzLjUzNiAzMi40MzI1IDM1My41MzYgMzEuMzQ5MyAzNTMuNjM2IDI5LjQ0NTRaTTM0Mi41NjcgNDAuMDE1OEMzNDIuNTM0IDM5Ljg1MTkgMzQyLjUwMSAzOS43MjA2IDM0Mi41MDEgMzkuNTIzNEMzNDIuNTAxIDM5LjM5MjggMzQyLjUzNCAzOS4yMjgxIDM0Mi41NjcgMzkuMDk2NEMzNDEuMjQ2IDM5LjEyOTcgMzM4Ljg2NyAzOS4xOTUyIDMzOC4zNzEgMzkuMTk1MlYzNC42NjQ5QzMzOS42NiAzNC42NjQ5IDM0MC45NDggMzQuNjY0OSAzNDIuMjM3IDM0Ljc5NjNDMzQyLjIwNCAzNC42MzI0IDM0Mi4xNzEgMzQuNDY3NyAzNDIuMTcxIDM0LjMzNjRDMzQyLjE3MSAzNC4yMDU4IDM0Mi4xNzEgMzQuMDQxOSAzNDIuMjM3IDMzLjg0NDdDMzQxLjMxMiAzMy45NDI4IDMzOS4xOTcgMzMuOTc2IDMzOC4zNzEgMzMuOTc2VjMwLjI2NkMzMzkuNzkyIDMwLjI2NiAzNDAuNjUxIDMwLjI2NiAzNDEuMTc5IDMwLjI5OTNMMzQyLjQ2OCAzMC4zNjUxQzM0Mi40MzUgMzAuMTY3OSAzNDIuNDM1IDMwLjA2OTIgMzQyLjQzNSAyOS45MDUzQzM0Mi40MzUgMjkuNzQxNCAzNDIuNDM1IDI5LjY3NTUgMzQyLjQ2OCAyOS40NDU4QzM0MS4zNzggMjkuNDc4MyAzMzkuODkxIDI5LjU0MzggMzM5LjIzIDI5LjU0MzhDMzM4Ljc2NyAyOS41NDM4IDMzNy4zMTQgMjkuNTExMyAzMzYuNTU0IDI5LjQ0NThDMzM2LjYyIDMwLjI2NjQgMzM2LjY1MyAzMS42MTIzIDMzNi42NTMgMzIuNTY0MlYzNi44NjUxQzMzNi42NTMgMzcuNDg4NSAzMzYuNTg3IDM4LjczNTcgMzM2LjU1NCA0MC4wMTYyQzMzNy41MTIgMzkuOTUwMyAzMzguNzY3IDM5Ljk1MDMgMzM5LjIzIDM5Ljk1MDNDMzM5Ljk5IDM5Ljk1IDM0MS42NDIgMzkuOTUgMzQyLjU2NyA0MC4wMTU4VjQwLjAxNThaTTMzMS4yMDEgMjYuODE5QzMzMC42NzMgMjMuMjQwNiAzMzAuMjEgMTkuNDk4NCAzMjkuODQ3IDE2LjExNjlDMzI5Ljc0OCAxNi4xNDk4IDMyOS43MTQgMTYuMTQ5OCAzMjkuNjQ5IDE2LjExNjlDMzI4Ljk1NSAxNy4zMzE1IDMyOC4xNjIgMTguNjQ0NSAzMjcuNTY3IDE5LjU2MzlDMzI3LjAwNiAyMC40NTAzIDMyNi4zNDUgMjEuNTAwNyAzMjUuNTg1IDIyLjYxNjlDMzIzLjk5OSAyMC41ODE3IDMyMi4zNDcgMTguMDIxMSAzMjEuMjU2IDE2LjExNjlDMzIxLjE5IDE2LjE0OTggMzIxLjE1NyAxNi4xMTY5IDMyMS4wOTEgMTYuMTE2OUMzMjAuNzI4IDE5LjQ5OCAzMjAuMjMyIDIzLjI3MzIgMzE5LjczNiAyNi44MTlDMzIwLjAwMSAyNi43MjA2IDMyMC4xNjYgMjYuNzIwNiAzMjAuMjk4IDI2LjcyMDZDMzIwLjQ5NiAyNi43MjA2IDMyMC42MjggMjYuNzUzNSAzMjAuODU5IDI2LjgxOUMzMjAuOTkyIDI0LjQ1NTMgMzIxLjI1NiAyMi4xMjQ0IDMyMS41NTMgMTkuNjYyM0MzMjIuODQyIDIxLjUzMzYgMzIzLjk2NSAyMy4xNDIyIDMyNS4yMjEgMjQuODQ5M0MzMjYuMjc4IDIzLjIwNzcgMzI3LjM2OCAyMS40MzQ4IDMyOC41NTggMTkuNjI5NEMzMjguODg4IDIyLjE1NyAzMjkuMTg2IDI0LjQ1NTMgMzI5LjM1MSAyNi44MTlDMzI5Ljc4IDI2LjcyMDYgMzMwLjA3OCAyNi43MjA2IDMzMC4yNzYgMjYuNzIwNkMzMzAuNTQgMjYuNzIwNiAzMzAuODA1IDI2LjcyMDYgMzMxLjIwMSAyNi44MTlWMjYuODE5Wk0zMzQuOTY4IDMyLjIwMjhDMzM0Ljk2OCAzMC4yOTg5IDMzMy40NDggMjkuNDQ1NCAzMzEuNTk4IDI5LjQ0NTRDMzMwLjc3MiAyOS40NDU0IDMyOS44OCAyOS41NDM1IDMyOS4yNTIgMjkuNTQzNUMzMjkuMDIxIDI5LjU0MzUgMzI4LjUyNSAyOS41NDM1IDMyNy45OTcgMjkuNDc3NkMzMjguMDMgMzAuNTI4MyAzMjguMDk2IDMxLjQxNDggMzI4LjA5NiAzMi40MzIyVjM2LjkyOTVDMzI4LjA5NiAzNy45MTQ4IDMyOC4wMyAzOC45OTggMzI3Ljk5NyA0MC4wMTU0QzMyOC40MjYgMzkuOTQ5NiAzMjguNzI0IDM5Ljk0OTYgMzI4LjkyMiAzOS45NDk2QzMyOS4xNTMgMzkuOTQ5NiAzMjkuNDg0IDM5Ljk0OTYgMzI5Ljg4IDQwLjAxNTRDMzI5LjgxNSAzOS4wMzE5IDMyOS43ODIgMzguMDQ2NSAzMjkuNzgxIDM3LjA2MDlWMzUuNDJDMzMwLjE0NSAzNS40NTI2IDMzMC41MDggMzUuNDUyNiAzMzAuOTA1IDM1LjQ1MjZDMzMyLjgyIDM1LjQ1MjYgMzM0Ljk2OCAzNC43MzA0IDMzNC45NjggMzIuMjAyOFYzMi4yMDI4Wk0zMjYuMDE0IDM2Ljg5NzNDMzI2LjAxNCAzNS4yNTU4IDMyNC45MjQgMzQuNTMzNiAzMjMuMDQgMzMuNzQ1NkMzMjEuNjg2IDMzLjE4OCAzMjAuOTkyIDMyLjY5NTYgMzIwLjk5MiAzMS42NDQ1QzMyMC45OTIgMzAuNjYgMzIxLjc1MiAzMC4wMzYyIDMyMy4wMDggMzAuMDM2MkMzMjMuODM0IDMwLjAzNjIgMzI0LjU2MSAzMC4zMzE1IDMyNS4yMjIgMzAuODU2OEMzMjUuMjg3IDMwLjQ5NTcgMzI1LjQ1MyAzMC4xMzQ3IDMyNS42NTEgMjkuODM5NEMzMjQuODU4IDI5LjQ3ODMgMzIzLjk5OSAyOS4zNDcgMzIzLjA3NCAyOS4zNDdDMzIwLjM2NSAyOS4zNDcgMzE5LjUwNSAzMC44OTA1IDMxOS41MDUgMzIuMjAzNUMzMTkuNTA1IDMzLjgxMTggMzIwLjI5OSAzNC41NjcyIDMyMi4zNDcgMzUuMzU1M0MzMjMuNjM2IDM1Ljg0NyAzMjQuMjk2IDM2LjQ3MTEgMzI0LjI5NiAzNy41NTQ0QzMyNC4yOTYgMzguNzAzNSAzMjMuNDM3IDM5LjQyNTcgMzIyLjI0OCAzOS40MjU3QzMyMS41NTQgMzkuNDI1NyAzMjAuMzY1IDM5LjA2NDYgMzE5LjUzOSAzOC4zMDk5QzMxOS41MDUgMzguNzM2MSAzMTkuNTA1IDM5LjEzMDQgMzE5LjM3MyAzOS40OTE1QzMxOS45MDIgMzkuNzU0NiAzMjEuMTI1IDQwLjE0NzkgMzIyLjIxNSA0MC4xNDc5QzMyNC45OSA0MC4xNDcxIDMyNi4wMTQgMzguNDM5NyAzMjYuMDE0IDM2Ljg5NzNWMzYuODk3M1pNMzc4LjE1MiAxNy45ODgyQzM3OC4xNTIgMTguOTczIDM3Ny40NTggMTkuNjYyMyAzNzYuNzY0IDIwLjIyMDJDMzc2LjMwMSAxOS41NjM5IDM3NS43NCAxOC42NzcxIDM3NS43NCAxNy45ODgyQzM3NS43NCAxNy4yMzMxIDM3Ni4yNjggMTYuODA2MSAzNzYuOTk1IDE2LjgwNjFDMzc3Ljk4NyAxNi44MDY1IDM3OC4xNTIgMTcuNjkyNiAzNzguMTUyIDE3Ljk4ODJWMTcuOTg4MlpNMzc4LjQ4MiAyNS4wMTMyQzM3OC4xMTkgMjUuMzQxNyAzNzcuMjYgMjUuOTY1NSAzNzYuNTMzIDI1Ljk2NTVDMzc1LjU3NCAyNS45NjU1IDM3NC40MTggMjUuMjc1OSAzNzQuNDE4IDIzLjc5ODZDMzc0LjQxOCAyMi40ODU1IDM3NS4yNzcgMjEuODk0NyAzNzUuODA2IDIxLjU2NjVDMzc3LjAyOCAyMy4yNDA2IDM3Ny4wOTUgMjMuMzM5MSAzNzguNDgyIDI1LjAxMzJaTTM3OS44MDQgMzIuMjAyOEMzNzkuODA0IDMzLjI1MzUgMzc5LjI3NSAzNC40MDI2IDM3Ny43NTUgMzQuNDAyNkMzNzcuMzI2IDM0LjQwMjYgMzc2LjkyOSAzNC40MDI2IDM3Ni41MzMgMzQuMzY5M1YzMC4yNjU2QzM3Ni45MjkgMzAuMTY3NiAzNzcuNDI1IDMwLjEzNDMgMzc3LjcyMiAzMC4xMzQzQzM3OS4wMTEgMzAuMTM0MyAzNzkuODA0IDMwLjg4OTggMzc5LjgwNCAzMi4yMDI4Wk0zMzguNjAyIDIyLjgxNDFDMzM3LjkwOSAyMi44NDY2IDMzNy41NDUgMjIuODQ2NiAzMzcuMDgyIDIyLjg0NjZDMzM2LjUyMSAyMi44NDY2IDMzNi4xOSAyMi44NDY2IDMzNS40NjMgMjIuODE0MUwzMzcuMDgyIDE5LjAwNkwzMzguNjAyIDIyLjgxNDFaTTMzMy4xNTEgMzIuMzAwOEMzMzMuMTUxIDMzLjgxMTEgMzMyLjI1OCAzNC43OTU5IDMzMC44MDUgMzQuNzk1OUMzMzAuNTA3IDM0Ljc5NTkgMzMwLjE3NyAzNC43OTU5IDMyOS43OCAzNC43MzAxVjMwLjIzMjdDMzMwLjI0MyAzMC4xNjY5IDMzMC42MzkgMzAuMTMzOSAzMzEuMDM2IDMwLjEzMzlDMzMyLjQyNCAzMC4xMzQzIDMzMy4xNTEgMzEuMDIxMSAzMzMuMTUxIDMyLjMwMDhaTTM2OS41MjggMjMuNjY3NkMzNjkuNTI4IDIyLjAyNiAzNjguNDM4IDIxLjMwMzkgMzY2LjU1NSAyMC41MTYyQzM2NS4yIDE5Ljk1ODMgMzY0LjUwNiAxOS40OTg4IDM2NC41MDYgMTguNDE1MUMzNjQuNTA2IDE3LjQ2MzIgMzY1LjI2NiAxNi44MDY1IDM2Ni41MjEgMTYuODA2NUMzNjcuMzQ4IDE2LjgwNjUgMzY4LjA3NSAxNy4xMDE3IDM2OC43MzUgMTcuNjI3NUMzNjguODAyIDE3LjI2NjQgMzY4Ljk2NyAxNi45MDQ5IDM2OS4xMzEgMTYuNjQyMkMzNjguMzcyIDE2LjI4MTEgMzY3LjQ3OSAxNi4xMTcyIDM2Ni41ODcgMTYuMTE3MkMzNjMuOTQ0IDE2LjExNzIgMzYyLjk4NiAxNy42NiAzNjIuOTg2IDE5LjAwNkMzNjIuOTg2IDIwLjU4MTcgMzYzLjgxMiAyMS4zMzY4IDM2NS44NjEgMjIuMTI0NEMzNjcuMTQ5IDIyLjYxNjkgMzY3LjgxIDIzLjI0MDYgMzY3LjgxIDI0LjM1NjhDMzY3LjgxIDI1LjQ3MyAzNjYuOTUxIDI2LjE5NTIgMzY1Ljc2MiAyNi4xOTUyQzM2NS4wMzUgMjYuMTk1MiAzNjMuODc5IDI1LjgzNDEgMzYzLjA1MiAyNS4xMTE5QzM2My4wMiAyNS41Mzg5IDM2Mi45ODYgMjUuOSAzNjIuODg3IDI2LjI2MTFDMzYzLjM4MyAyNi41MjM4IDM2NC42MDYgMjYuOTE3NCAzNjUuNzI5IDI2LjkxNzRDMzY4LjUwNCAyNi45MTc0IDM2OS41MjggMjUuMjQzMyAzNjkuNTI4IDIzLjY2NzZWMjMuNjY3NloiIGZpbGw9IiMwMzY1NTUiLz4NCjxwYXRoIGQ9Ik02NDAuNDE2IDIwLjU1NzNDNjM4LjY3MSAxOS44MzU0IDYzNy42MzEgMTkuNTU1MSA2MzYuNTk4IDE5LjU1NTFDNjM1LjUxNCAxOS41NTUxIDYzNC44MTkgMTkuOTE3IDYzNC44MTkgMjAuNDc2NUM2MzQuODE5IDIyLjE2NDUgNjQwLjk2MiAyMS42ODkzIDY0MC45NjIgMjUuNTkzNkM2NDAuOTYyIDI3Ljc0NjQgNjM5LjAyNCAyOC45OTc0IDYzNi4zMzIgMjguOTk3NEM2MzQuMjIgMjguOTk3NCA2MzMuMTggMjguNDg4IDYzMS45ODMgMjcuOTExNlYyNS40OTYyQzYzMy43MSAyNi41NjM1IDYzNC43NjggMjYuOTQwMSA2MzYuMTAxIDI2Ljk0MDFDNjM3LjI1NiAyNi45NDAxIDYzNy44NzkgMjYuNTYzNSA2MzcuODc5IDI1LjkwNjNDNjM3Ljg3OSAyNC4wNjg1IDYzMS43MzcgMjQuNzQxNSA2MzEuNzM3IDIwLjcyMTNDNjMxLjczNyAxOC43ODI3IDYzMy41MzQgMTcuNDk5IDYzNi4zMzIgMTcuNDk5QzYzNy42ODIgMTcuNDk5IDYzOC45MDEgMTcuNzYzNSA2NDAuNDE2IDE4LjM3MDdWMjAuNTU3M1pNNjQ5LjAxNiAyOC40ODQxQzY0Ny45OTIgMjguODMwNiA2NDcuMTI2IDI4Ljk5NTQgNjQ2LjI2MiAyOC45OTU0QzY0My40MDIgMjguOTk1NCA2NDEuNTUyIDI3LjQ0MjIgNjQxLjU1MiAyNS4wNzkyQzY0MS41NTIgMjIuNzU5NCA2NDMuNDczIDIxLjEyMDIgNjQ2LjE1NiAyMS4xMjAyQzY0Ni45ODUgMjEuMTIwMiA2NDguMDQ0IDIxLjMxODIgNjQ4Ljg5MSAyMS42MTIzVjIzLjM4ODFDNjQ4LjIyMSAyMy4wNTYyIDY0Ny40NDQgMjIuODc0MSA2NDYuODA5IDIyLjg3NDFDNjQ1LjI3MyAyMi44NzQxIDY0NC4yODYgMjMuNzM0MyA2NDQuMjg2IDI1LjA2MTlDNjQ0LjI4NiAyNi40MDggNjQ1LjI1NiAyNy4yOTQgNjQ2LjcyIDI3LjI5NEM2NDcuMzM3IDI3LjI5NCA2NDcuODg2IDI3LjE2MjMgNjQ5LjAxNiAyNi43NjhMNjQ5LjAxNiAyOC40ODQxWk02NzEuMzIgMjQuMjA5QzY3MS40MjUgMjMuMTU0OCA2NzIuMDgxIDIyLjU0NTcgNjczLjA4NyAyMi41NDU3QzY3NC4wNzYgMjIuNTQ1NyA2NzQuNzQ2IDIzLjE3MjEgNjc0Ljg1MiAyNC4yMDlINjcxLjMyWk02NzIuOTEgMjEuMTIyOUM2NzAuNCAyMS4xMjI5IDY2OC42MTQgMjIuNzc1NSA2NjguNjE0IDI1LjEwMTJDNjY4LjYxNCAyNy40NDQxIDY3MC40NzEgMjguOTk1NCA2NzMuMzM1IDI4Ljk5NTRDNjczLjk3IDI4Ljk5NTQgNjc1LjUwNCAyOC45OTU0IDY3Ni45NjYgMjcuOTg3VjI2LjUwNDJDNjc1Ljc2OSAyNy4yOTkzIDY3NC45NzcgMjcuNTczMSA2NzMuOTU1IDI3LjU3MzFDNjcyLjM0MSAyNy41NzMxIDY3MS4zNTQgMjYuNzk0OSA2NzEuMjY1IDI1LjQ2NjZINjc3LjExQzY3Ny4yMzIgMjIuNjkzOSA2NzUuMjc5IDIxLjEyMjkgNjcyLjkxIDIxLjEyMjlWMjEuMTIyOVpNNjc4LjA5OSAyOC44NTcySDY4MC42NTRWMjEuMjYyN0g2NzguMDk5VjI4Ljg1NzJaTTY4Ny43NjcgMjYuNzgxNUM2ODcuMjM0IDI3LjIyODEgNjg2Ljc5MiAyNy40MDcyIDY4Ni4yNDYgMjcuNDA3MkM2ODUuMDQzIDI3LjQwNzIgNjg0LjI4MSAyNi40ODM4IDY4NC4yODEgMjUuMTAwNEM2ODQuMjgxIDIzLjU4NDEgNjg1LjA0MyAyMi43MTAxIDY4Ni4zMzEgMjIuNzEwMUM2ODYuNzkyIDIyLjcxMDEgNjg3LjM5NCAyMi45MDggNjg3Ljc2NyAyMy4xNTU5VjI2Ljc4MTVaTTY4Ny43NjcgMTcuNjM5MVYyMS41OTU4QzY4Ny4wNzYgMjEuMjg0NyA2ODYuMzg4IDIxLjEyMDIgNjg1LjY0NCAyMS4xMjAyQzY4My4zMTMgMjEuMTIwMiA2ODEuNyAyMi43MjY2IDY4MS43IDI1LjA1MDdDNjgxLjcgMjcuMzI0OCA2ODMuMzEzIDI4Ljk5NzQgNjg1LjUgMjguOTk3NEM2ODYuMzY3IDI4Ljk5NzQgNjg3LjAzNyAyOC43ODU2IDY4Ny43NjcgMjguMjQzNVYyOC44NTQ5SDY5MC4zMjJWMTcuNjM5MUg2ODcuNzY3Wk02OTQuMTA1IDI0LjIwOUM2OTQuMjExIDIzLjE1NDggNjk0Ljg2NCAyMi41NDU3IDY5NS44NjggMjIuNTQ1N0M2OTYuODU4IDIyLjU0NTcgNjk3LjUzNSAyMy4xNzIxIDY5Ny42NDEgMjQuMjA5SDY5NC4xMDVaTTY5NS42OTQgMjEuMTIyOUM2OTMuMTg0IDIxLjEyMjkgNjkxLjQgMjIuNzc1NSA2OTEuNCAyNS4xMDEyQzY5MS40IDI3LjQ0NDEgNjkzLjI1OSAyOC45OTU0IDY5Ni4xMTkgMjguOTk1NEM2OTYuNzUzIDI4Ljk5NTQgNjk4LjI5IDI4Ljk5NTQgNjk5Ljc1NSAyNy45ODdWMjYuNTA0MkM2OTguNTU3IDI3LjI5OTMgNjk3Ljc2MyAyNy41NzMxIDY5Ni43MzYgMjcuNTczMUM2OTUuMTMxIDI3LjU3MzEgNjk0LjE0IDI2Ljc5NDkgNjk0LjA1MSAyNS40NjY2SDY5OS44OTRDNzAwLjAxNSAyMi42OTM5IDY5OC4wNjEgMjEuMTIyOSA2OTUuNjk0IDIxLjEyMjkiIGZpbGw9IiMwMDlFNEQiLz4NCjxwYXRoIGQ9Ik03MDMuNzIxIDIzLjQzNjhINzAzLjc1OEM3MDQuNTE3IDIxLjg1NjIgNzA1LjM2NiAyMS4xMTUgNzA2LjM1MiAyMS4xMTVDNzA2Ljg2MiAyMS4xMTUgNzA3LjMwMyAyMS4yOTY0IDcwOC4wNDQgMjEuODA3Nkw3MDcuMzQxIDIzLjkxMzNDNzA2LjY3IDIzLjUxODYgNzA2LjIyOSAyMy4zNTM1IDcwNS44MjMgMjMuMzUzNUM3MDQuODg2IDIzLjM1MzUgNzA0LjI4NiAyNC4xNzc1IDcwMy43MjEgMjUuNTcwNFYyOC44NDY2SDcwMS4xNjJWMjEuMjU0MUg3MDMuNzIxVjIzLjQzNjhaTTY4MC43NzUgMTguMDY3NEM2ODEuMDE1IDE4LjY1NzUgNjgwLjU4MyAxOS40ODA1IDY3OS44MTQgMTkuOTA0QzY3OS4wNDEgMjAuMzI3MSA2NzguMjI0IDIwLjE5MjggNjc3Ljk4NiAxOS42MDI3QzY3Ny43NDMgMTkuMDExNyA2NzguMTczIDE4LjE4NzcgNjc4Ljk0NSAxNy43NjY2QzY3OS43MTYgMTcuMzQxMSA2ODAuNTMzIDE3LjQ3NTkgNjgwLjc3NSAxOC4wNjc0WiIgZmlsbD0iIzAwOUU0RCIvPg0KPHBhdGggZD0iTTY1OC4yMiAyNC4wMjMxQzY1OC4yMiAyMS45NjUxIDY1Ni43MTkgMjEuMTIyNiA2NTUuMjM5IDIxLjEyMjZDNjU0LjIzMiAyMS4xMjI2IDY1My40MDQgMjEuNTE4NCA2NTIuNjY0IDIyLjM5MjFINjUyLjYyOVYxNy42MzkySDY1MC4wNzFWMjguODM1M0g2NTIuNjI5VjI0LjAyMzFDNjUzLjIyOCAyMy4yMTYxIDY1My43MzggMjIuODcxMSA2NTQuMzM4IDIyLjg3MTFDNjU1LjEzNCAyMi44NzExIDY1NS42NjIgMjMuMzk4NiA2NTUuNjYyIDI0LjUzMjlWMjcuMjAwOEM2NTYuNTIgMjYuNzg5NiA2NTcuMzkzIDI2LjUzNzQgNjU4LjIyIDI2LjQ0MzhWMjQuMDIzMVpNNjY0LjYzNiAyMS4xMTk5QzY2My41OTQgMjEuMTE5OSA2NjIuNzk5IDIxLjQ4MTEgNjYxLjk4NCAyMi4zNDkzVjIxLjI2MjRINjU5LjQyOFYyNi40MjM0QzY2MC4zMTMgMjYuNTA1OCA2NjEuNDQzIDI2Ljg4NDcgNjYxLjk4NCAyNy41MTA0VjIzLjk2MzRDNjYyLjY1NyAyMy4wMjMyIDY2My4xMzQgMjIuNzA5NyA2NjMuNzcgMjIuNzA5N0M2NjQuNDk0IDIyLjcwOTcgNjY1LjA0NSAyMy4xNTU2IDY2NS4wNDUgMjQuMjI2NFYyOC44MzcySDY2Ny42MDJWMjQuMDI4OUM2NjcuNjAyIDIxLjc5MjYgNjY1LjkwOCAyMS4xMTk5IDY2NC42MzYgMjEuMTE5OVYyMS4xMTk5Wk02NjkuMDE1IDMxLjAxODFINjY2LjA0M1YzMi45ODY0SDY2OC45MDlWMzMuODMxMkg2NjYuMDQzVjM1Ljg2MTlINjY5LjEwM1YzNi43MDU1SDY2NS4wNDZWMzAuMTc1Mkg2NjkuMDE1TDY2OS4wMTUgMzEuMDE4MVpNNjcxLjQ0MiAzNi43MDkzSDY3Mi4zNTJWMzAuMTczM0g2NzEuNDQyVjM2LjcwOTNaTTY3Ni44NTkgMzMuMDQ4NEM2NzcuNTA0IDMzLjA0ODQgNjc3LjkwNCAzMy40NjMxIDY3Ny45MzUgMzQuMTE0Mkg2NzUuNjE2QzY3NS43NDIgMzMuNDM0MiA2NzYuMTYxIDMzLjA0ODQgNjc2Ljg1OSAzMy4wNDg0Wk02NzUuNiAzNC42ODFINjc4Ljg0MkM2NzguODQyIDMzLjA4NjkgNjc4LjA2MiAzMi4zMTggNjc2LjgzOCAzMi4zMThDNjc1LjU2OSAzMi4zMTggNjc0LjY4OCAzMy4xOTI0IDY3NC42ODggMzQuNDk2OUM2NzQuNjg4IDM1LjY4OSA2NzUuNDg0IDM2Ljc4OTggNjc2LjkxNyAzNi43ODk4QzY3Ny42OTggMzYuNzg5OCA2NzguMjAzIDM2LjYyODEgNjc4Ljc2MyAzNi4yODJWMzUuNDU2QzY3OC4yMjIgMzUuNzg1NiA2NzcuNjk4IDM1Ljk3NTggNjc3LjE0NyAzNS45NzU4QzY3Ni4yNjUgMzUuOTc1OCA2NzUuNzQyIDM1LjUzNSA2NzUuNiAzNC42ODA2VjM0LjY4MVpNNjg0Ljc4NiAzMy41MzA5QzY4NC4yNjMgMzMuMTk2NiA2ODMuOTE0IDMzLjA5ODUgNjgzLjUxNSAzMy4wOTg1QzY4Mi42ODIgMzMuMDk4NSA2ODIuMTA1IDMzLjY5NDUgNjgyLjEwNSAzNC41NjdDNjgyLjEwNSAzNS40NTYgNjgyLjcxOSAzNS45OTE2IDY4My42NjggMzUuOTkxNkM2ODQuMDU4IDM1Ljk5MTYgNjg0LjQzIDM1Ljg5NzMgNjg0Ljg4OCAzNS43MDU5VjM2LjU0MjZDNjg0LjU4MiAzNi42Nzc0IDY4My45OTcgMzYuNzg5OCA2ODMuNTE1IDM2Ljc4OThDNjgyLjEzNiAzNi43ODk4IDY4MS4xOCAzNS45MDYyIDY4MS4xOCAzNC42NDMyQzY4MS4xOCAzMy4yMTc4IDY4Mi4wNTQgMzIuMzE4IDY4My40NTMgMzIuMzE4QzY4My45ODcgMzIuMzE4IDY4NC4zNDYgMzIuNDMzOSA2ODQuNzg3IDMyLjYxNDVMNjg0Ljc4NiAzMy41MzA5Wk02ODguOTM0IDMyLjQwMDRINjkwLjM5NVYzMy4xNjUxSDY4OC45MzRWMzUuMzc1MkM2ODguOTM0IDM1Ljg4MTEgNjg5LjMyNyAzNi4wMjc0IDY4OS41OTMgMzYuMDI3NEM2ODkuOTIyIDM2LjAyNzQgNjkwLjI2MiAzNS45MiA2OTAuNjMgMzUuNzA3OVYzNi41MDM3QzY5MC4zMSAzNi42Njc4IDY4OS44MiAzNi43ODk4IDY4OS41MTkgMzYuNzg5OEM2ODguNTI4IDM2Ljc4OTggNjg4LjAyNyAzNi4yMTYxIDY4OC4wMjcgMzUuNDM5MVYzMy4xNjUxSDY4Ny4yMjRWMzMuMDcwM0w2ODguOTM0IDMxLjUxMDJWMzIuNDAwNFpNNjkzLjg3NiAzMi40MDA0VjMzLjM5NjlINjkzLjg5NUM2OTQuMzU5IDMyLjYzNDUgNjk0LjggMzIuMzE4IDY5NS4yMyAzMi4zMThDNjk1LjYwMSAzMi4zMTggNjk1Ljk0NyAzMi40ODAxIDY5Ni4zMjkgMzIuODE2Nkw2OTUuODQ3IDMzLjU2NDRDNjk1LjU3IDMzLjMwOTEgNjk1LjIxMSAzMy4xMzMxIDY5NC45OTUgMzMuMTMzMUM2OTQuMzY4IDMzLjEzMzEgNjkzLjg3NiAzMy43MjY4IDY5My44NzYgMzQuNDYyNlYzNi43MDkzSDY5Mi45NjdWMzIuNDAwNEg2OTMuODc2Wk03MDUuNjU3IDMzLjUzMDlDNzA1LjEzMSAzMy4xOTY2IDcwNC43ODIgMzMuMDk4NSA3MDQuMzgxIDMzLjA5ODVDNzAzLjU0OSAzMy4wOTg1IDcwMi45NzcgMzMuNjk0NSA3MDIuOTc3IDM0LjU2N0M3MDIuOTc3IDM1LjQ1NiA3MDMuNTkyIDM1Ljk5MTYgNzA0LjUzNSAzNS45OTE2QzcwNC45MjUgMzUuOTkxNiA3MDUuMjk1IDM1Ljg5NzMgNzA1Ljc2IDM1LjcwNTlWMzYuNTQyNkM3MDUuNDQ3IDM2LjY3NzQgNzA0Ljg2MiAzNi43ODk4IDcwNC4zOCAzNi43ODk4QzcwMy4wMDQgMzYuNzg5OCA3MDIuMDQ0IDM1LjkwNjIgNzAyLjA0NCAzNC42NDMyQzcwMi4wNDQgMzMuMjE3OCA3MDIuOTIyIDMyLjMxOCA3MDQuMzIgMzIuMzE4QzcwNC44NTUgMzIuMzE4IDcwNS4yMTIgMzIuNDMzOSA3MDUuNjU3IDMyLjYxNDVMNzA1LjY1NyAzMy41MzA5Wk02OTguNzQyIDM2LjcwOTNINjk5LjY1MlYzMi40MDA4SDY5OC43NDJWMzYuNzA5M1oiIGZpbGw9IiMwMDlFNEQiLz4NCjxwYXRoIGQ9Ik02OTkuNjg0IDMwLjg1MjVDNjk5Ljc3MyAzMS4wNjA0IDY5OS42MTggMzEuMzU0NCA2OTkuMzQ0IDMxLjUwNDFDNjk5LjA2OCAzMS42NTQzIDY5OC43NzYgMzEuNjA2MiA2OTguNjkzIDMxLjM5NzhDNjk4LjYxIDMxLjE4NzQgNjk4Ljc2MSAzMC44OTU4IDY5OS4wMzggMzAuNzQ1NkM2OTkuMzExIDMwLjU5MzUgNjk5LjYwMSAzMC42NDIxIDY5OS42ODQgMzAuODUyNVYzMC44NTI1Wk02NTguOTQgMzEuMjAwOUM2NTguNzc5IDMxLjIwMDkgNjU4LjcxMSAzMS4yMjU1IDY1OC42NDYgMzEuMjkzOEM2NTguNjIgMzEuMzIwMyA2NTguNjEgMzEuMzQ3MiA2NTguNiAzMS40MDExTDY1Ny43ODQgMzQuMjg3QzY1Ny41OTMgMzUuMjk5MiA2NTYuMjU5IDM2LjMwOTkgNjU0LjUyMSAzNi4zMDk5SDY1Mi4xMDRMNjUyLjUyMyAzNC44MjdINjU0LjA3NkM2NTQuMjM0IDM0LjgyNyA2NTQuMzU4IDM0Ljc3MjEgNjU0LjQ2MiAzNC42NjQzQzY1NC41IDM0LjYyMjUgNjU0LjU1IDM0LjU1NyA2NTQuNTU2IDM0LjQ4OTZMNjU1LjIwMSAzMS45NjgxQzY1NS4zOTEgMzAuOTU1NSA2NTYuNTM4IDI5LjgzNjkgNjU4LjI3NiAyOS44MzY5SDY2MC43NTFMNjYwLjQzNSAzMS4yMDA5SDY1OC45NFpNNjU5LjQ5NyAzMi45NTk2TDY1OS43NzMgMzIuMDI1OUg2NjIuMjg4QzY2Mi41OTggMzAuNjcyIDY2Mi4zNTQgMjkuNDE3NyA2NjEuNDczIDI4LjU5NjFDNjU5LjY4OSAyNi45MzMyIDY1NS45NTcgMjcuNDk4MyA2NTMuMTc3IDI5Ljk3NzlDNjUyLjc0MyAzMC4zNjMgNjUyLjM3NiAzMC43NzkzIDY1Mi4wNDIgMzEuMjA0OEg2NTMuNTU2TDY1My4yMDQgMzIuMTQwNEg2NTEuMzk1QzY1MS4yMjIgMzIuNDM1NCA2NTEuMDYgMzIuNzI4MSA2NTAuOTM2IDMzLjAyNUg2NTMuMDgxTDY1Mi43MzcgMzMuOTYwN0g2NTAuNjNDNjUwLjI2OSAzNS4zOTAxIDY1MC40OTkgMzYuNzIzMyA2NTEuNDA2IDM3LjU2OTlDNjUzLjE2NyAzOS4yMTE2IDY1Ni44ODggMzguNjM0NiA2NTkuNjY3IDM2LjE1NTRDNjYwLjE1MyAzNS43MjQyIDY2MC41NTUgMzUuMjU4NyA2NjAuOTE4IDM0Ljc4MDhINjU4Ljk3M0w2NTkuMjY5IDMzLjg0NzFINjYxLjU0M0M2NjEuNzEgMzMuNTUwMSA2NjEuODYzIDMzLjI1NjUgNjYxLjk4MyAzMi45NTk2SDY1OS40OTdaIiBmaWxsPSIjMDA5RTREIi8+DQo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfNThfMTExKSI+DQo8cGF0aCBkPSJNNzc1LjA2OCA0MS4yMjc0Qzc2Ni4yODUgNDIuMDQ2MyA3NTcuMTMxIDQwLjc1NjQgNzU1Ljg0OCAzMy44MTlDNzU1LjIyMSAzMC4zOTkgNzU2Ljc2NSAyNi43NzI1IDc1OC44MSAyNC41MTg0VjIzLjMxNDhDNzU1LjEyNiAyNi41OCA3NTMuMTMgMzAuNzExNSA3NTQuMjggMzUuNTkyQzc1NS43NDggNDEuODUxOCA3NjMuNjAzIDQ1LjM5NjcgNzc1LjU5NSA0NC4yMTk1Qzc4MC4zNDIgNDMuNzU0NSA3ODYuNTUgNDIuMjEyIDc5MC44NjkgMzkuODE0NFYzNi40MTA5Qzc4Ni45NDkgMzguNzcxMyA3ODAuNDY4IDQwLjcyMTEgNzc1LjA2OCA0MS4yMjc0VjQxLjIyNzRaTTc5OC4yMDUgMjMuMjMzNUM3OTYuMTIyIDEyLjk1MzMgNzc2LjM3MyAxMi4zMDE2IDc2My42NDMgMjAuMTMzOFYyMC45OTg5Qzc3Ni4zNTkgMTQuMzkxNSA3OTQuMzk1IDE0LjQzMTcgNzk2LjAzNyAyMy45MDE2Qzc5Ni41ODkgMjcuMDM0MiA3OTQuODQzIDMwLjI5NzggNzkxLjcyMyAzMi4xNzdWMzQuNjM0MkM3OTUuNDc2IDMzLjI0MzIgNzk5LjMyNCAyOC43NDQyIDc5OC4yMDUgMjMuMjMzNVYyMy4yMzM1WiIgZmlsbD0iIzBFN0RDMiIvPg0KPHBhdGggZD0iTTc5MC4xNTkgMjEuNzM2OEg3ODcuODU2VjMyLjEwM0M3ODcuODU2IDMzLjMxNzkgNzg4LjQzNyAzNC4zNzQ0IDc5MC4xNTkgMzQuNTQzMlYyMS43MzY4Wk03NjIuNzM5IDI1LjUyMTdINzYwLjQzMkw3NjAuNDMxIDMyLjI5NDNDNzYwLjQzMSAzMy41MTM0IDc2MS4wMTMgMzQuNTY4OCA3NjIuNzM5IDM0LjczNDRWMjUuNTIxN1YyNS41MjE3Wk03NjAuNDMyIDIyLjA1MjFINzYyLjczMlYyNC4yNTg0SDc2MC40MzJWMjIuMDUyMVpNNzc2LjUzIDM0LjYyNzJDNzc0LjY2NiAzNC42MjcyIDc3My44NzcgMzMuMzE3NyA3NzMuODc3IDMyLjAyOFYyMy4wMzU1SDc3Ni4xNlYyNS41MjE3SDc3Ny44NzlWMjcuMzg1M0g3NzYuMTZWMzEuODg1NEM3NzYuMTYgMzIuNDExMyA3NzYuNDA3IDMyLjcwNDQgNzc2Ljk1IDMyLjcwNDRINzc3Ljg3OVYzNC42MjcyTDc3Ni41MyAzNC42MjcyVjM0LjYyNzJaTTc4MC43MzEgMzAuNzk2MUM3ODAuNzMxIDMxLjk3NjggNzgxLjQ2MSAzMi44NDQ2IDc4Mi43NTQgMzIuODQ0NkM3ODMuNzY2IDMyLjg0NDYgNzg0LjI2NiAzMi41NjA1IDc4NC44NSAzMS45NzY4TDc4Ni4yNjEgMzMuMzM0OUM3ODUuMzU3IDM0LjIzNzkgNzg0LjQwOSAzNC43ODcgNzgyLjczNyAzNC43ODdDNzgwLjU1MiAzNC43ODcgNzc4LjQ1OSAzMy41ODE5IDc3OC40NTkgMzAuMDY4NkM3NzguNDU5IDI3LjA2NTEgNzgwLjI4OCAyNS4zNjczIDc4Mi42ODYgMjUuMzY3M0M3ODUuMTI0IDI1LjM2NzMgNzg2LjUyNSAyNy4zNTQ5IDc4Ni41MjUgMjkuOTYzOVYzMC43OTYzSDc4MC43MzFWMzAuNzk2MVpNNzgyLjU4NiAyNy4yNzU2Qzc4MS44MDUgMjcuMjc1NiA3ODEuMjA0IDI3LjY4MjMgNzgwLjk1IDI4LjIzMDlDNzgwLjgwMiAyOC41NjA3IDc4MC43NDcgMjguODE3NyA3ODAuNzMxIDI5LjIyMjlINzg0LjI0OUM3ODQuMjA0IDI4LjIzMDkgNzgzLjc1OSAyNy4yNzU2IDc4Mi41ODYgMjcuMjc1NlpNNzY4LjkzOSAyNy4zODUzQzc2OS42MDggMjcuMzg1MyA3NjkuODg3IDI3LjcxOTggNzY5Ljg4NyAyOC4yNjI2VjM0LjY0MDZINzcyLjE3VjI4LjI0OTJDNzcyLjE3IDI2Ljk1NDIgNzcxLjQ4NyAyNS41MjQxIDc2OS40ODIgMjUuNTI0MUw3NjQuNzY2IDI1LjUyMTdWMzQuNjQwNkg3NjcuMDVWMjcuMzg1M0g3NjguOTM5VjI3LjM4NTNaTTc5Mi42MzcgMjMuNTg5MUM3OTIuMTI5IDIzLjU4OTEgNzkxLjcyNCAyMy4xNzU0IDc5MS43MjQgMjIuNjYyOUM3OTEuNzI0IDIyLjE1MjkgNzkyLjEyOSAyMS43MzY4IDc5Mi42MzcgMjEuNzM2OEM3OTMuMTQyIDIxLjczNjggNzkzLjU1NiAyMi4xNTI5IDc5My41NTYgMjIuNjYyOUM3OTMuNTU2IDIzLjE3NTQgNzkzLjE0MiAyMy41ODkxIDc5Mi42MzcgMjMuNTg5MVpNNzkyLjYzNyAyMS44OTEyQzc5Mi4yMTggMjEuODkxMiA3OTEuODgyIDIyLjI0MDcgNzkxLjg4MiAyMi42NjI5Qzc5MS44ODIgMjMuMDg3NiA3OTIuMjE4IDIzLjQzMDkgNzkyLjYzNyAyMy40MzA5Qzc5My4wNTUgMjMuNDMwOSA3OTMuNDAyIDIzLjA4NzYgNzkzLjQwMiAyMi42NjI5Qzc5My40MDIgMjIuMjQwNyA3OTMuMDU1IDIxLjg5MTIgNzkyLjYzNyAyMS44OTEyWk03OTMuMDQzIDIzLjIxOEg3OTIuODcyQzc5Mi44NjQgMjMuMjE3OSA3OTIuODU3IDIzLjIxNTcgNzkyLjg1MSAyMy4yMTE2Qzc5Mi44NDUgMjMuMjA3NSA3OTIuODQgMjMuMjAxNyA3OTIuODM3IDIzLjE5NDlMNzkyLjYwNSAyMi43OTdDNzkyLjU5OCAyMi43ODg1IDc5Mi41NzkgMjIuNzc4OCA3OTIuNTczIDIyLjc3ODhINzkyLjQ2N1YyMy4xNzU0Qzc5Mi40NjcgMjMuMTk1IDc5Mi40NTMgMjMuMjE4MSA3OTIuNDI4IDIzLjIxODFINzkyLjI3NEM3OTIuMjUxIDIzLjIxODEgNzkyLjIzNSAyMy4xOTUgNzkyLjIzNSAyMy4xNzU0VjIyLjE3NDlDNzkyLjIzNSAyMi4xMTY0IDc5Mi4yNTQgMjIuMDkyNCA3OTIuMzA1IDIyLjA4NUM3OTIuMzYxIDIyLjA3OSA3OTIuNTA1IDIyLjA3MTYgNzkyLjU4NiAyMi4wNzE2Qzc5Mi44NzIgMjIuMDcxNiA3OTMuMDM5IDIyLjE1NjYgNzkzLjAzOSAyMi40MjQ0VjIyLjQ0NEM3OTMuMDM5IDIyLjYwOTQgNzkyLjk1OSAyMi42OTk1IDc5Mi44MzMgMjIuNzM5N0w3OTMuMDc0IDIzLjE1NDdDNzkzLjA3OCAyMy4xNjQgNzkzLjA4IDIzLjE3MzkgNzkzLjA4IDIzLjE4NEM3OTMuMDggMjMuMTk5NyA3OTMuMDcyIDIzLjIxOCA3OTMuMDQzIDIzLjIxOFYyMy4yMThaTTc5Mi44MjEgMjIuNDI0NEM3OTIuODIxIDIyLjMxMjcgNzkyLjc1MiAyMi4yNzczIDc5Mi42MDUgMjIuMjc3M0g3OTIuNDU5VjIyLjU5NDdDNzkyLjQ4MiAyMi41OTQ3IDc5Mi41ODYgMjIuNTk5NiA3OTIuNjA1IDIyLjU5OTZDNzkyLjc1MiAyMi41OTk2IDc5Mi44MjEgMjIuNTUgNzkyLjgyMSAyMi40NDRWMjIuNDI0NFoiIGZpbGw9IiMwRTdEQzIiLz4NCjwvZz4NCjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMV81OF8xMTEpIj4NCjxwYXRoIGQ9Ik01MzMuNzczIDIwLjk5MTFDNTI5LjI2MyAyMC45OTExIDUyNS41OTkgMjQuNjU0NyA1MjUuNTk5IDI5LjE2NDRDNTI1LjU5OSAzMy42NzQxIDUyOS4yNjMgMzcuMzM3NyA1MzMuNzczIDM3LjMzNzdDNTM4LjI4MiAzNy4zMzc3IDU0MS45NDYgMzMuNjc0MSA1NDEuOTQ2IDI5LjE2NDRDNTQxLjk0NiAyNC42NTQ3IDUzOC4yODIgMjAuOTkxMSA1MzMuNzczIDIwLjk5MTFaTTUzMy43NzMgMzYuNTE4NkM1MjkuNzEzIDM2LjUxODYgNTI2LjQxOSAzMy4yMTUgNTI2LjQxOSAyOS4xNjQ0QzUyNi40MTkgMjUuMTEzNyA1MjkuNzEzIDIxLjgxMDIgNTMzLjc3MyAyMS44MTAyQzUzNy44MzIgMjEuODEwMiA1NDEuMTI3IDI1LjExMzcgNTQxLjEyNyAyOS4xNjQ0QzU0MS4xMjcgMzMuMjE1IDUzNy44MzIgMzYuNTE4NiA1MzMuNzczIDM2LjUxODZaIiBmaWxsPSJibGFjayIvPg0KPHBhdGggZD0iTTUzNi42OSAyMy45MjUyQzUzNi42NjMgMjMuOTA3MiA1MzYuNjI3IDIzLjg5ODIgNTM2LjU5MSAyMy44OTgyQzUzNi40ODMgMjMuODk4MiA1MzYuNDAyIDIzLjk3OTIgNTM2LjQwMiAyNC4wODczVjI2LjY0MzdDNTM2LjQwMiAyNi43MzM3IDUzNi4zMyAyNi44MDU3IDUzNi4yNCAyNi44MDU3SDUzMS4yOUM1MzEuMiAyNi44MDU3IDUzMS4xMzcgMjYuNzMzNyA1MzEuMTI4IDI2LjY0MzdWMjQuMDg3M0M1MzEuMTI4IDI0LjA1MTMgNTMxLjExOSAyNC4wMjQyIDUzMS4xMDEgMjMuOTg4MkM1MzEuMDQ3IDIzLjg5ODIgNTMwLjkzIDIzLjg3MTIgNTMwLjgzOSAyMy45MjUyQzUyOS4wMTIgMjUuMDUwNCA1MjcuOTA1IDI3LjAwMzcgNTI3LjkwNSAyOS4xNjQxQzUyNy45MDUgMzEuMzI0NCA1MjkuMDEyIDMzLjI3NzcgNTMwLjg1NyAzNC40MDI5QzUzMC44ODUgMzQuNDIwOSA1MzAuOTIxIDM0LjQyOTkgNTMwLjk1NyAzNC40Mjk5QzUzMS4wNjUgMzQuNDI5OSA1MzEuMTQ2IDM0LjM0ODkgNTMxLjE0NiAzNC4yNDA5VjMxLjY4NDVDNTMxLjE0NiAzMS41OTQ0IDUzMS4yMTggMzEuNTMxNCA1MzEuMzA4IDMxLjUyMjRINTM2LjI1OEM1MzYuMzQ4IDMxLjUyMjQgNTM2LjQyIDMxLjU5NDQgNTM2LjQyIDMxLjY4NDVWMzQuMjQwOUM1MzYuNDIgMzQuMjc2OSA1MzYuNDI5IDM0LjMwMzkgNTM2LjQ0NyAzNC4zMzk5QzUzNi41MDEgMzQuNDI5OSA1MzYuNjE4IDM0LjQ1NjkgNTM2LjcwOCAzNC40MDI5QzUzOC41NTQgMzMuMjc3NyA1MzkuNjYxIDMxLjMyNDQgNTM5LjY2MSAyOS4xNjQxQzUzOS42NjEgMjcuMDAzNyA1MzguNTM2IDI1LjA1MDQgNTM2LjY5IDIzLjkyNTJWMjMuOTI1MlpNNTMwLjE5MSAzMi4zNjg2TDUzMC4yMTggMzIuNjc0Nkw1MzAuMDIgMzIuNDMxNkM1MjguNDk5IDMwLjUxNDMgNTI4LjQ5OSAyNy44MDQ4IDUzMC4wMiAyNS44ODc1TDUzMC4xOTEgMjUuNjcxNUw1MzAuMjE4IDI1LjY0NDVMNTMwLjE5MSAyNS45NTk2QzUzMC4xNjQgMjYuMjExNiA1MzAuMTU1IDI2LjQ3MjYgNTMwLjE1NSAyNi43MzM3VjMxLjU4NTRDNTMwLjE1NSAzMS44NDY1IDUzMC4xNzMgMzIuMTA3NSA1MzAuMTkxIDMyLjM2ODZaTTUzNi40MDIgMzAuMzg4M0M1MzYuNDAyIDMwLjQ3ODMgNTM2LjMzIDMwLjU1MDMgNTM2LjI0IDMwLjU1MDNINTMxLjI5QzUzMS4yIDMwLjU1MDMgNTMxLjEzNyAzMC40NzgzIDUzMS4xMjggMzAuMzg4M1YyNy45Mzk5QzUzMS4xMjggMjcuODQ5OSA1MzEuMiAyNy43Nzc4IDUzMS4yOSAyNy43Nzc4SDUzNi4yNEM1MzYuMzMgMjcuNzc3OCA1MzYuNDAyIDI3Ljg0OTkgNTM2LjQwMiAyNy45Mzk5VjMwLjM4ODNaTTUzNy41MTkgMzIuNDMxNkw1MzcuMzIxIDMyLjY3NDZMNTM3LjM0OCAzMi4zNjg2QzUzNy4zNzUgMzIuMTE2NSA1MzcuMzg0IDMxLjg1NTUgNTM3LjM4NCAzMS41OTQ0VjI2LjczMzdDNTM3LjM4NCAyNi40NzI2IDUzNy4zNzUgMjYuMjExNiA1MzcuMzQ4IDI1Ljk1OTZMNTM3LjMzOSAyNS44MjQ1TDUzNy4zMyAyNS42ODA1VjI1LjY0NDVMNTM3LjUxOSAyNS44ODc1QzUzOC4yNTcgMjYuODA1NyA1MzguNjYyIDI3Ljk3NTkgNTM4LjY2MiAyOS4xNTUxQzUzOC42NjIgMzAuMzM0MiA1MzguMjU3IDMxLjUxMzQgNTM3LjUxOSAzMi40MzE2VjMyLjQzMTZaIiBmaWxsPSJibGFjayIvPg0KPHBhdGggZD0iTTU1NC4yNzYgMjkuMDIwMkM1NTQuMjMxIDI5LjAwMjIgNTU0LjE3NyAyOC45ODQyIDU1NC4xNzcgMjguOTMwMkM1NTQuMTc3IDI4Ljg5NDIgNTU0LjE5NSAyOC44NjcyIDU1NC4yMzEgMjguODQ5MkM1NTQuMjk0IDI4LjgyMjIgNTU1Ljg1MSAyOC4yNjQxIDU1NS44NTEgMjYuNDI3OEM1NTUuODUxIDI0LjM4NDUgNTU0LjQ3NCAyMy4xNjkzIDU1Mi4xNTIgMjMuMTY5M0g1NDYuNTI2VjM1LjE3NzJINTUyLjY2NUM1NTQuNDU2IDM1LjE3NzIgNTU2LjM4MiAzMy45MDggNTU2LjM4MiAzMS44NjQ2QzU1Ni4zODIgMjkuOTExMyA1NTQuOTA2IDI5LjIyNzIgNTU0LjI3NiAyOS4wMjAyVjI5LjAyMDJaTTU0OS4zNjEgMjUuNjI2N0M1NDkuMzYxIDI1LjU4MTcgNTQ5LjM5NyAyNS41NDU2IDU0OS40NDIgMjUuNTQ1Nkg1NTEuNjc1QzU1Mi40MTMgMjUuNTQ1NiA1NTIuOTE3IDI2LjA0MDcgNTUyLjkxNyAyNi43Nzg4QzU1Mi45MTcgMjcuMzU0OSA1NTIuNDY3IDI3Ljk3NiA1NTEuNjIxIDI3Ljk3Nkg1NDkuNDQyQzU0OS4zOTcgMjcuOTc2IDU0OS4zNjEgMjcuOTQgNTQ5LjM2MSAyNy44OTVWMjUuNjI2N1pNNTUxLjY3NSAzMi44MDk4SDU0OS40NDJDNTQ5LjM5NyAzMi44MDk4IDU0OS4zNjEgMzIuNzczOCA1NDkuMzYxIDMyLjcyODhWMzAuMzM0NEM1NDkuMzYxIDMwLjI4OTQgNTQ5LjM5NyAzMC4yNTM0IDU0OS40NDIgMzAuMjUzNEg1NTEuNjIxQzU1Mi42OTIgMzAuMjUzNCA1NTMuMzA0IDMwLjcxMjUgNTUzLjMwNCAzMS41MjI2QzU1My4zMDQgMzIuMzU5NyA1NTIuNzM3IDMyLjgwOTggNTUxLjY3NSAzMi44MDk4VjMyLjgwOThaTTU3NS4zODQgMjcuOTQ5TDU3NC45NTIgMjcuODU5QzU3My45OCAyNy42NTIgNTczLjAzNSAyNy4zOTA5IDU3My4wMzUgMjYuNTUzOEM1NzMuMDM1IDI1LjcxNjcgNTczLjgxOCAyNS4zMzg2IDU3NC41OTIgMjUuMzM4NkM1NzUuNTAxIDI1LjMzODYgNTc2LjQwMSAyNS43NDM3IDU3Ny4wODYgMjYuNDQ1OEw1NzguODY4IDI0LjY4MTVDNTc4LjEwMyAyMy44MzU0IDU3Ni43NDQgMjIuODYzMiA1NzQuNTQ3IDIyLjg2MzJDNTcxLjkwMSAyMi44NjMyIDU3MC4xMTggMjQuMzY2NSA1NzAuMTE4IDI2LjYwNzhDNTcwLjExOCAyOC45NzUyIDU3MS45ODIgMjkuODY2MyA1NzMuNTQ4IDMwLjE5OTRMNTczLjk3MSAzMC4yODk0QzU3NS40OTIgMzAuNjEzNSA1NzYuMjEyIDMwLjg1NjUgNTc2LjIxMiAzMS43MjA2QzU3Ni4yMTIgMzIuNDk0NyA1NzUuNTE5IDMzLjAwNzggNTc0LjQ5MyAzMy4wMDc4QzU3My4yODcgMzMuMDA3OCA1NzIuMjE2IDMyLjQ3NjcgNTcxLjQwNiAzMS40Nzc2TDU2OS41NzggMzMuMjY4OUM1NzAuNTUxIDM0LjQyMTEgNTcxLjgzOCAzNS40NjUyIDU3NC41MjkgMzUuNDY1MkM1NzYuODI1IDM1LjQ2NTIgNTc5LjE1NiAzNC4xMzMgNTc5LjE1NiAzMS41NzY2QzU3OS4xNDcgMjguOTU3MiA1NzcuMzY1IDI4LjM2MzEgNTc1LjM4NCAyNy45NDlWMjcuOTQ5Wk01OTkuMTAzIDIzLjE2OTNWMjcuNTYyQzU5OS4xMDMgMjcuNjA3IDU5OS4wNjcgMjcuNjQzIDU5OS4wMjIgMjcuNjQzSDU5NS4zMzFDNTk1LjI4NiAyNy42NDMgNTk1LjI1IDI3LjYwNyA1OTUuMjUgMjcuNTYyVjIzLjE2OTNINTkyLjIyNlYzNS4xNzcySDU5NS4yNVYzMC40NjA0QzU5NS4yNSAzMC40MTU0IDU5NS4yODYgMzAuMzc5NCA1OTUuMzMxIDMwLjM3OTRINTk5LjAyMkM1OTkuMDY3IDMwLjM3OTQgNTk5LjEwMyAzMC40MTU0IDU5OS4xMDMgMzAuNDYwNFYzNS4xNzcySDYwMi4xNDZWMjMuMTY5M0g1OTkuMTAzWk01ODYuMTQxIDMyLjcxOThDNTg0Ljc4MiAzMi43MTk4IDU4My4zMTUgMzEuNTg1NiA1ODMuMzE1IDI5LjA5MjJDNTgzLjMxNSAyNi44MTQ4IDU4NC42OTIgMjUuNjI2NyA1ODYuMDUxIDI1LjYyNjdDNTg3LjA0MSAyNS42MjY3IDU4Ny43MzQgMjYuMDQwNyA1ODguMjgzIDI2Ljk1ODlMNTkwLjYwNiAyNS40MTk2QzU4OS40MTggMjMuNjczMyA1ODguMDA0IDIyLjg4MTIgNTg2LjAzMyAyMi44ODEyQzU4Mi4xNzEgMjIuODgxMiA1ODAuNDQzIDI2LjAwNDcgNTgwLjQ0MyAyOS4wOTIyQzU4MC40NDMgMzIuODQ1OCA1ODIuNzI5IDM1LjQ2NTIgNTg1Ljk5NyAzNS40NjUyQzU4OC40MjcgMzUuNDY1MiA1ODkuNTM1IDM0LjU3NDEgNTkwLjY5NiAzMi45MjY4TDU4OC4zNTUgMzEuMzUxNkM1ODcuODMzIDMyLjE5NzcgNTg3LjI2NiAzMi43MTk4IDU4Ni4xNDEgMzIuNzE5OFpNNTYzLjE3OCAyMi44NjMyQzU1OS44NzUgMjIuODYzMiA1NTcuNjYxIDI1LjM5MjYgNTU3LjY2MSAyOS4xNjQyQzU1Ny42NjEgMzIuOTM1OCA1NTkuODc1IDM1LjQ2NTIgNTYzLjE3OCAzNS40NjUyQzU2Ni40ODIgMzUuNDY1MiA1NjguNjk2IDMyLjkzNTggNTY4LjY5NiAyOS4xNjQyQzU2OC42OTYgMjUuMzkyNiA1NjYuNDgyIDIyLjg2MzIgNTYzLjE3OCAyMi44NjMyVjIyLjg2MzJaTTU2My4xNzggMzIuNzE5OEM1NjEuNTU4IDMyLjcxOTggNTYwLjUxNCAzMS4zMjQ2IDU2MC41MTQgMjkuMTY0MkM1NjAuNTE0IDI3LjAxMjkgNTYxLjU1OCAyNS42MjY3IDU2My4xNzggMjUuNjI2N0M1NjQuODA4IDI1LjYyNjcgNTY1Ljg2MSAyNy4wMTI5IDU2NS44NjEgMjkuMTY0MkM1NjUuODYxIDMxLjMyNDYgNTY0LjgwOCAzMi43MTk4IDU2My4xNzggMzIuNzE5OFoiIGZpbGw9IiNGODAwMDAiLz4NCjwvZz4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTQ2LjM0NCAyMi4xODExQzE0Ny41OTUgMjIuMjg1NCAxNDguODQ1IDIxLjU1NTMgMTQ5LjYyNyAyMC42Mjk4QzE1MC4zOTUgMTkuNjc4MSAxNTAuOTAzIDE4LjQwMDUgMTUwLjc3MyAxNy4wOTY5QzE0OS42NjYgMTcuMTQ5MSAxNDguMjk4IDE3LjgyNjkgMTQ3LjUxNyAxOC43Nzg2QzE0Ni44IDE5LjU5OTkgMTQ2LjE4OCAyMC45Mjk2IDE0Ni4zNDQgMjIuMTgxMVpNMTQ3Ljg0MSAyMy4wNzk3QzE0OC42NTMgMjIuNzYwNiAxNDkuNjU4IDIyLjM2NTYgMTUwLjc2IDIyLjQyOTFDMTUxLjQ2MyAyMi40ODEyIDE1My40OTUgMjIuNjg5OCAxNTQuNzk4IDI0LjYxOTJDMTU0Ljc5MiAyNC42MjM3IDE1NC43NzggMjQuNjMyMyAxNTQuNzU5IDI0LjY0NUMxNTQuNDM2IDI0Ljg1NDggMTUyLjM5IDI2LjE4NzEgMTUyLjQxNCAyOC44MTY5QzE1Mi40MzkgMzEuOTQ5OSAxNTQuOTg4IDMzLjExODMgMTU1LjMyMiAzMy4yNzExQzE1NS4zNDQgMzMuMjgxMSAxNTUuMzU2IDMzLjI4NjcgMTU1LjM1OCAzMy4yODgzQzE1NS4zNTYgMzMuMjkyNiAxNTUuMzU0IDMzLjMwMSAxNTUuMzUgMzMuMzEzM0MxNTUuMjgzIDMzLjUyODggMTU0Ljg0NSAzNC45NDg5IDE1My44NDcgMzYuNDA0QzE1Mi45MjIgMzcuNzU5OCAxNTEuOTcxIDM5LjA4OTUgMTUwLjQ2IDM5LjExNTZDMTQ5Ljc0OSAzOS4xMjgzIDE0OS4yNyAzOC45MjExIDE0OC43NzIgMzguNzA1NEMxNDguMjQ3IDM4LjQ3ODUgMTQ3LjcwMSAzOC4yNDIyIDE0Ni44NCAzOC4yNDIyQzE0NS45NDcgMzguMjQyMiAxNDUuMzc2IDM4LjQ4NDggMTQ0LjgyNiAzOC43MTg0QzE0NC4zNDggMzguOTIxNCAxNDMuODg3IDM5LjExNzQgMTQzLjI0NSAzOS4xNDE3QzE0MS43ODYgMzkuMTkzOCAxNDAuNjc5IDM3LjcwNzcgMTM5Ljc1NCAzNi4zNTE5QzEzNy44NjYgMzMuNjE0MyAxMzYuNDIgMjguNjM0NCAxMzguMzc0IDI1LjI3MUMxMzkuMzI1IDIzLjU4OTMgMTQxLjA1NyAyMi41MzM0IDE0Mi45MTkgMjIuNTA3M0MxNDMuNzMyIDIyLjQ5MjUgMTQ0LjUwNyAyMi44MDA2IDE0NS4xODQgMjMuMDcwMUMxNDUuNzAyIDIzLjI3NTggMTQ2LjE2MiAyMy40NTg5IDE0Ni41NCAyMy40NTg5QzE0Ni44NzcgMjMuNDU4OSAxNDcuMzE5IDIzLjI4NTEgMTQ3Ljg0MSAyMy4wNzk3WiIgZmlsbD0iYmxhY2siLz4NCjxwYXRoIGQ9Ik0zNi44NTg3IDM3LjUyNDFIMzEuOTg3NEwzNS4wMzQyIDE5LjY2NjhIMzkuOTA1MkwzNi44NTg3IDM3LjUyNDFaIiBmaWxsPSIjMDA1NzlGIi8+DQo8cGF0aCBkPSJNNTQuNTE1NyAyMC4xMDQxQzUzLjU1NDkgMTkuNzQyOCA1Mi4wMzA5IDE5LjM0MzggNTAuMTQ2NiAxOS4zNDM4QzQ1LjMzNjEgMTkuMzQzOCA0MS45NDg2IDIxLjc3NTMgNDEuOTI3OCAyNS4yNTE2QzQxLjg4NzggMjcuODE2NSA0NC4zNTMxIDI5LjI0MSA0Ni4xOTcgMzAuMDk2MkM0OC4wODE2IDMwLjk3MDEgNDguNzIyMyAzMS41NDA1IDQ4LjcyMjMgMzIuMzE5NEM0OC43MDMxIDMzLjUxNTcgNDcuMTk5NCAzNC4wNjcyIDQ1Ljc5NjkgMzQuMDY3MkM0My44NTIxIDM0LjA2NzIgNDIuODEgMzMuNzgyOSA0MS4yMjY0IDMzLjExNzNMNDAuNTg1IDMyLjgzMkwzOS45MDMzIDM2Ljg0MDZDNDEuMDQ1OCAzNy4zMzM5IDQzLjE1MDcgMzcuNzcxNyA0NS4zMzYxIDM3Ljc5MDlDNTAuNDQ3MyAzNy43OTA5IDUzLjc3NDkgMzUuMzk3MSA1My44MTQzIDMxLjY5MjVDNTMuODMzOCAyOS42NTk3IDUyLjUzMiAyOC4xMDIgNDkuNzI1NCAyNi44MjkyQzQ4LjAyMTcgMjYuMDEyMSA0Ni45NzgzIDI1LjQ2MTIgNDYuOTc4MyAyNC42MjUyQzQ2Ljk5ODMgMjMuODY1MiA0Ny44NjA4IDIzLjA4NjggNDkuNzg0IDIzLjA4NjhDNTEuMzY3NyAyMy4wNDg2IDUyLjUzMTIgMjMuNDA5NCA1My40MTI2IDIzLjc3MDVMNTMuODUzMiAyMy45NjAxTDU0LjUxNTcgMjAuMTA0MVoiIGZpbGw9IiMwMDU3OUYiLz4NCjxwYXRoIGQ9Ik02MC45OTI0IDMxLjE5NzlDNjEuMzkzNiAzMC4xNzIgNjIuOTM3MiAyNi4yMDE2IDYyLjkzNzIgMjYuMjAxNkM2Mi45MTcgMjYuMjM5NyA2My4zMzc2IDI1LjE1NjggNjMuNTc4MSAyNC40OTE5TDYzLjkxODYgMjYuMDMwNkM2My45MTg2IDI2LjAzMDYgNjQuODQxIDMwLjMwNTEgNjUuMDQxNCAzMS4xOTc5QzY0LjI4IDMxLjE5NzkgNjEuOTU0NiAzMS4xOTc5IDYwLjk5MjQgMzEuMTk3OVpNNjcuMDA1NCAxOS42NjY4SDYzLjIzNzRDNjIuMDc1NSAxOS42NjY4IDYxLjE5MjcgMTkuOTg5NSA2MC42OTE0IDIxLjE0ODRMNTMuNDU1OCAzNy41MjM5SDU4LjU2NzFDNTguNTY3MSAzNy41MjM5IDU5LjQwODUgMzUuMzE5OSA1OS41ODk0IDM0Ljg0NTJDNjAuMTUwMSAzNC44NDUyIDY1LjEyMjMgMzQuODQ1MiA2NS44NDM3IDM0Ljg0NTJDNjUuOTgzNSAzNS40NzIxIDY2LjQyNDkgMzcuNTIzOSA2Ni40MjQ5IDM3LjUyMzlINzAuOTM1Mkw2Ny4wMDU0IDE5LjY2NjhWMTkuNjY2OFoiIGZpbGw9IiMwMDU3OUYiLz4NCjxwYXRoIGQ9Ik0yNy45MTggMTkuNjY2OEwyMy4xNDc1IDMxLjg0MzhMMjIuNjI2MiAyOS4zNzQxQzIxLjc0NDIgMjYuNTI0NSAxOC45NzgxIDIzLjQyODQgMTUuODkxNCAyMS44ODlMMjAuMjYxIDM3LjUwNTJIMjUuNDEyMkwzMy4wNjkgMTkuNjY2OEgyNy45MThWMTkuNjY2OFoiIGZpbGw9IiMwMDU3OUYiLz4NCjxwYXRoIGQ9Ik0xOC43MTg0IDE5LjY2NjhIMTAuODgxMUwxMC44MDA5IDIwLjAyNzZDMTYuOTE0NSAyMS41MDk1IDIwLjk2MzUgMjUuMDgxNSAyMi42MjcgMjkuMzc0OUwyMC45MjMyIDIxLjE2NzlDMjAuNjQyNyAyMC4wMjc0IDE5Ljc4MDcgMTkuNzA0NCAxOC43MTg0IDE5LjY2NjhaIiBmaWxsPSIjRkFBNjFBIi8+DQo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDJfNThfMTExKSI+DQo8cGF0aCBkPSJNMjIxLjE1OCAxNy40OTlWMTguOTM1NkgyMzEuMzA2VjE3LjQ5OUgyMjEuMTU4Wk0yMzIuNzQ0IDE3LjQ5OVYxOC45MzU2SDI0Ny4yMDZDMjQ3LjIwNiAxOC45MzU2IDI0NS43MjkgMTcuNDk5IDI0My43NzMgMTcuNDk5SDIzMi43NDRaTTI1MC4wNDMgMTcuNDk5VjE4LjkzNTZIMjU4Ljc5M0wyNTguMjczIDE3LjQ5OUgyNTAuMDQzWk0yNjUuMDY1IDE3LjQ5OUwyNjQuNTQ2IDE4LjkzNTZIMjczLjIxNlYxNy40OTlIMjY1LjA2NVpNMjIxLjE1OCAyMC4yOTI5VjIxLjcyOTZIMjMxLjMwNlYyMC4yOTI5SDIyMS4xNThaTTIzMi43NDQgMjAuMjk1VjIxLjcyOTdIMjQ4Ljg4NEMyNDguODg0IDIxLjcyOTcgMjQ4LjY5NiAyMC42MjM5IDI0OC4zNjcgMjAuMjk1SDIzMi43NDRaTTI1MC4wNDMgMjAuMjk1VjIxLjcyOTdIMjU5Ljc1MkwyNTkuMjcxIDIwLjI5NUgyNTAuMDQzWk0yNjQuMDI3IDIwLjI5NUwyNjMuNTQ2IDIxLjcyOTdIMjczLjIxNlYyMC4yOTVIMjY0LjAyN1YyMC4yOTVaTTIyNC4wNzQgMjMuMDg2OVYyNC41MjU3SDIyOC40NjlWMjMuMDg2OUgyMjQuMDc0VjIzLjA4NjlaTTIzNS42NjEgMjMuMDg2OVYyNC41MjU3SDI0MC4wNTZWMjMuMDg2OUgyMzUuNjYxVjIzLjA4NjlaTTI0NC4zMzEgMjMuMDg2OVYyNC41MjU3SDI0OC43MjZDMjQ4LjcyNiAyNC41MjU3IDI0OS4wMDUgMjMuNzY1OSAyNDkuMDA1IDIzLjA4NjlIMjQ0LjMzMVYyMy4wODY5Wk0yNTIuOTYgMjMuMDg2OVYyNC41MjU3SDI2MC43NTJMMjYwLjIzMiAyMy4wODY5SDI1Mi45NlYyMy4wODY5Wk0yNjMuMDY5IDIzLjA4NjlMMjYyLjU0OCAyNC41MjU3SDI3MC4zNzlWMjMuMDg2OUgyNjMuMDY5VjIzLjA4NjlaTTIyNC4wNzQgMjUuODgzVjI3LjMxOTdIMjI4LjQ2OVYyNS44ODNIMjI0LjA3NFYyNS44ODNaTTIzNS42NjEgMjUuODgzVjI3LjMxOTdIMjQ2Ljg4N0MyNDYuODg3IDI3LjMxOTcgMjQ3LjgyNiAyNi41ODI1IDI0OC4xMjUgMjUuODgzSDIzNS42NjFaTTI1Mi45NiAyNS44ODNWMjcuMzE5N0gyNTcuMzU1VjI2LjUyTDI1Ny42MzQgMjcuMzE5N0gyNjUuNjg0TDI2NS45ODQgMjYuNTJWMjcuMzE5N0gyNzAuMzc5VjI1Ljg4M0gyNjIuMTI5TDI2MS42OTEgMjcuMDk5OUwyNjEuMjUxIDI1Ljg4M0gyNTIuOTZaTTIyNC4wNzQgMjguNjc3VjMwLjExMzdIMjI4LjQ2OVYyOC42NzdIMjI0LjA3NFpNMjM1LjY2MSAyOC42NzdWMzAuMTEzN0gyNDguMTI1QzI0Ny44MjYgMjkuNDE2NSAyNDYuODg3IDI4LjY3NyAyNDYuODg3IDI4LjY3N0gyMzUuNjYxWk0yNTIuOTYgMjguNjc3VjMwLjExMzdIMjU3LjM1NVYyOC42NzdIMjUyLjk2Wk0yNTguMTUzIDI4LjY3N0wyNTguNjg1IDMwLjExMzdIMjY0LjcyMUwyNjUuMjI2IDI4LjY3N0gyNTguMTUzWk0yNjUuOTg0IDI4LjY3N1YzMC4xMTM3SDI3MC4zNzlWMjguNjc3SDI2NS45ODRaTTIyNC4wNzQgMzEuNDcxVjMyLjkwNzZIMjI4LjQ2OVYzMS40NzFIMjI0LjA3NFpNMjM1LjY2MSAzMS40NzFWMzIuOTA3NkgyNDAuMDU2VjMxLjQ3MUgyMzUuNjYxWk0yNDQuMzMxIDMxLjQ3MVYzMi45MDc2SDI0OS4wMDVDMjQ5LjAwNSAzMi4yMjk2IDI0OC43MjYgMzEuNDcxIDI0OC43MjYgMzEuNDcxSDI0NC4zMzFWMzEuNDcxWk0yNTIuOTYgMzEuNDcxVjMyLjkwNzZIMjU3LjM1NVYzMS40NzFIMjUyLjk2Wk0yNTkuMTUxIDMxLjQ3MUwyNTkuNjY2IDMyLjkwNzZIMjYzLjcxM0wyNjQuMjMyIDMxLjQ3MUgyNTkuMTUxWk0yNjUuOTg0IDMxLjQ3MVYzMi45MDc2SDI3MC4zNzlWMzEuNDcxSDI2NS45ODRaTTIyMS4yMzcgMzQuMjY1VjM1LjcwMzdIMjMxLjM4NlYzNC4yNjVIMjIxLjIzN1pNMjMyLjc0NCAzNC4yNjVWMzUuNzAzN0gyNDguMzY3QzI0OC42OTYgMzUuMzc0MyAyNDguODg0IDM0LjI2NSAyNDguODg0IDM0LjI2NUgyMzIuNzQ0VjM0LjI2NVpNMjUwLjEyMyAzNC4yNjVWMzUuNzAzN0gyNTcuMzU1VjM0LjI2NUgyNTAuMTIzWk0yNjAuMTUxIDM0LjI2NUwyNjAuNjggMzUuNzAzN0gyNjIuNzM5TDI2My4yMzYgMzQuMjY1SDI2MC4xNTFaTTI2NS45ODQgMzQuMjY1VjM1LjcwMzdIMjczLjI5NVYzNC4yNjVIMjY1Ljk4NFpNMjIxLjIzNyAzNy4wNjFWMzguNDk3N0gyMzEuMzg2VjM3LjA2MUgyMjEuMjM3Wk0yMzIuNzQ0IDM3LjA2MVYzOC40OTU2SDI0My43NzNDMjQ1LjcyOSAzOC40OTU2IDI0Ny4yMDYgMzcuMDYxIDI0Ny4yMDYgMzcuMDYxSDIzMi43NDRaTTI1MC4xMjMgMzcuMDYxVjM4LjQ5NzdIMjU3LjM1NVYzNy4wNjFIMjUwLjEyM1pNMjYxLjE1NSAzNy4wNjFMMjYxLjY2NCAzOC40OTM2TDI2MS43NTIgMzguNDk1NkwyNjIuMjY5IDM3LjA2MUgyNjEuMTU1VjM3LjA2MVpNMjY1Ljk4NCAzNy4wNjFWMzguNDk3N0gyNzMuMjk1VjM3LjA2MUgyNjUuOTg0WiIgZmlsbD0iIzFGNzBDMSIvPg0KPC9nPg0KPGRlZnM+DQo8Y2xpcFBhdGggaWQ9ImNsaXAwXzU4XzExMSI+DQo8cmVjdCB3aWR0aD0iNDQuNDQ3MyIgaGVpZ2h0PSIyOS42MzE1IiBmaWxsPSJ3aGl0ZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNzUzLjk1NSAxNC44MTU1KSIvPg0KPC9jbGlwUGF0aD4NCjxjbGlwUGF0aCBpZD0iY2xpcDFfNThfMTExIj4NCjxyZWN0IHdpZHRoPSI3Ni41NDgxIiBoZWlnaHQ9IjE2LjM1MDciIGZpbGw9IndoaXRlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1MjUuNTk5IDIwLjk4ODkpIi8+DQo8L2NsaXBQYXRoPg0KPGNsaXBQYXRoIGlkPSJjbGlwMl81OF8xMTEiPg0KPHJlY3Qgd2lkdGg9IjUyLjEzNzIiIGhlaWdodD0iMjAuOTk4NyIgZmlsbD0id2hpdGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIyMS4xNTggMTcuNDk5KSIvPg0KPC9jbGlwUGF0aD4NCjwvZGVmcz4NCjwvc3ZnPg0K\'style="width: 742.5px;\n                    position: relative;\n                    top: 123px;\n                    left: 32px;"/>\n                    <a href="'.concat(t,'" style="float: left;\n                    border-radius: 56px;\n                    background: #0D6EFD;\n                    padding-top: 12px;\n                    width: 280px;\n                    height: 45px;\n                    text-align: center;\n                    position: relative;\n                    top: 141px;\n                    left: 270px;\n                    font-size: 17px;\n                    color: white;\n                    text-decoration: none;\n                    line-height: 125%;\n                    letter-spacing: 0.02em;">Claim your free account</a>\n                        <div style="\n                        font-size: 14px;\n                        position: relative;\n                        top: 197px;\n                        left: 15px;\n                        letter-spacing: 0.02em;\n                        font-weight: 500;\n                        line-height: 125%;">have a Syncfusion account? <a\n                href="https://www.syncfusion.com/account/login?ReturnUrl=/account/login"\n                style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">Sign In</a></div>\n                    </div>\n                </div>')});document.body.appendChild(s)}else{var n=sf.base.createElement("div",{innerHTML:"<img src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzE5OV80KSI+CjxwYXRoIGQ9Ik0xMiAyMUMxNi45NzA2IDIxIDIxIDE2Ljk3MDYgMjEgMTJDMjEgNy4wMjk0NCAxNi45NzA2IDMgMTIgM0M3LjAyOTQ0IDMgMyA3LjAyOTQ0IDMgMTJDMyAxNi45NzA2IDcuMDI5NDQgMjEgMTIgMjFaIiBzdHJva2U9IiM3MzczNzMiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMS4yNSAxMS4yNUgxMlYxNi41SDEyLjc1IiBmaWxsPSIjNjE2MDYzIi8+CjxwYXRoIGQ9Ik0xMS4yNSAxMS4yNUgxMlYxNi41SDEyLjc1IiBzdHJva2U9IiM3MzczNzMiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMS44MTI1IDlDMTIuNDMzOCA5IDEyLjkzNzUgOC40OTYzMiAxMi45Mzc1IDcuODc1QzEyLjkzNzUgNy4yNTM2OCAxMi40MzM4IDYuNzUgMTEuODEyNSA2Ljc1QzExLjE5MTIgNi43NSAxMC42ODc1IDcuMjUzNjggMTAuNjg3NSA3Ljg3NUMxMC42ODc1IDguNDk2MzIgMTEuMTkxMiA5IDExLjgxMjUgOVoiIGZpbGw9IiM3MzczNzMiLz4KPC9nPgo8ZGVmcz4KPGNsaXBQYXRoIGlkPSJjbGlwMF8xOTlfNCI+CjxyZWN0IHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0id2hpdGUiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K' style=\"\n            position: absolute;\n            left: 16px;\n            height: 24px;\"/><span>".concat(e,' <a style="text-decoration: none;color: #0D6EFD;font-weight: 500;" href="').concat(t,'">Claim your free account</a>.</span>')});n.setAttribute("style","position: fixed;\n            top: 10px;\n            left: 10px;\n            right: 10px;\n            font-size: 14px;\n            background: #EEF2FF;\n            color: #222222;\n            z-index: 999999999;\n            text-align: left;\n            border: 1px solid #EEEEEE;\n            padding: 10px 11px 10px 50px;\n            border-radius: 8px;\n            font-family: Helvetica Neue, Helvetica, Arial;"),document.body.appendChild(n)}}};sf.base.enableBlazorMode(),window.sfBlazor=window.sfBlazor||{},Object.assign(window.sfBlazor,i)}});